var Gle=Object.defineProperty;var P6=n=>{throw TypeError(n)};var Hle=(n,e,t)=>e in n?Gle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var yt=(n,e,t)=>Hle(n,typeof e!="symbol"?e+"":e,t),IP=(n,e,t)=>e.has(n)||P6("Cannot "+t);var x=(n,e,t)=>(IP(n,e,"read from private field"),t?t.call(n):e.get(n)),j=(n,e,t)=>e.has(n)?P6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),L=(n,e,t,r)=>(IP(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),U=(n,e,t)=>(IP(n,e,"access private method"),t);var Gi=(n,e,t,r)=>({set _(s){L(n,e,s,t)},get _(){return x(n,e,r)}});function qle(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $k(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Kle(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var v7={exports:{}},B_={},x7={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk=Symbol.for("react.element"),Xle=Symbol.for("react.portal"),Yle=Symbol.for("react.fragment"),Zle=Symbol.for("react.strict_mode"),Qle=Symbol.for("react.profiler"),Jle=Symbol.for("react.provider"),ece=Symbol.for("react.context"),tce=Symbol.for("react.forward_ref"),nce=Symbol.for("react.suspense"),rce=Symbol.for("react.memo"),sce=Symbol.for("react.lazy"),O6=Symbol.iterator;function ice(n){return n===null||typeof n!="object"?null:(n=O6&&n[O6]||n["@@iterator"],typeof n=="function"?n:null)}var b7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w7=Object.assign,S7={};function Rx(n,e,t){this.props=n,this.context=e,this.refs=S7,this.updater=t||b7}Rx.prototype.isReactComponent={};Rx.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Rx.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function k7(){}k7.prototype=Rx.prototype;function f$(n,e,t){this.props=n,this.context=e,this.refs=S7,this.updater=t||b7}var p$=f$.prototype=new k7;p$.constructor=f$;w7(p$,Rx.prototype);p$.isPureReactComponent=!0;var L6=Array.isArray,C7=Object.prototype.hasOwnProperty,m$={current:null},T7={key:!0,ref:!0,__self:!0,__source:!0};function E7(n,e,t){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)C7.call(e,r)&&!T7.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:zk,type:n,key:i,ref:a,props:s,_owner:m$.current}}function ace(n,e){return{$$typeof:zk,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function g$(n){return typeof n=="object"&&n!==null&&n.$$typeof===zk}function oce(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var M6=/\/+/g;function AP(n,e){return typeof n=="object"&&n!==null&&n.key!=null?oce(""+n.key):e.toString(36)}function wI(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case zk:case Xle:a=!0}}if(a)return a=n,s=s(a),n=r===""?"."+AP(a,0):r,L6(s)?(t="",n!=null&&(t=n.replace(M6,"$&/")+"/"),wI(s,e,t,"",function(c){return c})):s!=null&&(g$(s)&&(s=ace(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(M6,"$&/")+"/")+n)),e.push(s)),1;if(a=0,r=r===""?".":r+":",L6(n))for(var o=0;o<n.length;o++){i=n[o];var l=r+AP(i,o);a+=wI(i,e,t,l,s)}else if(l=ice(n),typeof l=="function")for(n=l.call(n),o=0;!(i=n.next()).done;)i=i.value,l=r+AP(i,o++),a+=wI(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function aE(n,e,t){if(n==null)return n;var r=[],s=0;return wI(n,r,"","",function(i){return e.call(t,i,s++)}),r}function lce(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ma={current:null},SI={transition:null},cce={ReactCurrentDispatcher:ma,ReactCurrentBatchConfig:SI,ReactCurrentOwner:m$};function I7(){throw Error("act(...) is not supported in production builds of React.")}sn.Children={map:aE,forEach:function(n,e,t){aE(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return aE(n,function(){e++}),e},toArray:function(n){return aE(n,function(e){return e})||[]},only:function(n){if(!g$(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};sn.Component=Rx;sn.Fragment=Yle;sn.Profiler=Qle;sn.PureComponent=f$;sn.StrictMode=Zle;sn.Suspense=nce;sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cce;sn.act=I7;sn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=w7({},n.props),s=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=m$.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)C7.call(e,l)&&!T7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:zk,type:n.type,key:s,ref:i,props:r,_owner:a}};sn.createContext=function(n){return n={$$typeof:ece,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Jle,_context:n},n.Consumer=n};sn.createElement=E7;sn.createFactory=function(n){var e=E7.bind(null,n);return e.type=n,e};sn.createRef=function(){return{current:null}};sn.forwardRef=function(n){return{$$typeof:tce,render:n}};sn.isValidElement=g$;sn.lazy=function(n){return{$$typeof:sce,_payload:{_status:-1,_result:n},_init:lce}};sn.memo=function(n,e){return{$$typeof:rce,type:n,compare:e===void 0?null:e}};sn.startTransition=function(n){var e=SI.transition;SI.transition={};try{n()}finally{SI.transition=e}};sn.unstable_act=I7;sn.useCallback=function(n,e){return ma.current.useCallback(n,e)};sn.useContext=function(n){return ma.current.useContext(n)};sn.useDebugValue=function(){};sn.useDeferredValue=function(n){return ma.current.useDeferredValue(n)};sn.useEffect=function(n,e){return ma.current.useEffect(n,e)};sn.useId=function(){return ma.current.useId()};sn.useImperativeHandle=function(n,e,t){return ma.current.useImperativeHandle(n,e,t)};sn.useInsertionEffect=function(n,e){return ma.current.useInsertionEffect(n,e)};sn.useLayoutEffect=function(n,e){return ma.current.useLayoutEffect(n,e)};sn.useMemo=function(n,e){return ma.current.useMemo(n,e)};sn.useReducer=function(n,e,t){return ma.current.useReducer(n,e,t)};sn.useRef=function(n){return ma.current.useRef(n)};sn.useState=function(n){return ma.current.useState(n)};sn.useSyncExternalStore=function(n,e,t){return ma.current.useSyncExternalStore(n,e,t)};sn.useTransition=function(){return ma.current.useTransition()};sn.version="18.3.1";x7.exports=sn;var Me=x7.exports;const V_=$k(Me);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uce=Me,hce=Symbol.for("react.element"),dce=Symbol.for("react.fragment"),fce=Object.prototype.hasOwnProperty,pce=uce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mce={key:!0,ref:!0,__self:!0,__source:!0};function A7(n,e,t){var r,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)fce.call(e,r)&&!mce.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hce,type:n,key:i,ref:a,props:s,_owner:pce.current}}B_.Fragment=dce;B_.jsx=A7;B_.jsxs=A7;v7.exports=B_;var k=v7.exports,h3={},N7={exports:{}},Do={},_7={exports:{}},R7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(K,H){var se=K.length;K.push(H);e:for(;0<se;){var q=se-1>>>1,X=K[q];if(0<s(X,H))K[q]=H,K[se]=X,se=q;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var H=K[0],se=K.pop();if(se!==H){K[0]=se;e:for(var q=0,X=K.length,fe=X>>>1;q<fe;){var de=2*(q+1)-1,ue=K[de],Ce=de+1,Ae=K[Ce];if(0>s(ue,se))Ce<X&&0>s(Ae,ue)?(K[q]=Ae,K[Ce]=se,q=Ce):(K[q]=ue,K[de]=se,q=de);else if(Ce<X&&0>s(Ae,se))K[q]=Ae,K[Ce]=se,q=Ce;else break e}}return H}function s(K,H){var se=K.sortIndex-H.sortIndex;return se!==0?se:K.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var H=t(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=K)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=t(c)}}function w(K){if(m=!1,b(K),!p)if(t(l)!==null)p=!0,z(C);else{var H=t(c);H!==null&&W(w,H.startTime-K)}}function C(K,H){p=!1,m&&(m=!1,g(E),E=-1),f=!0;var se=d;try{for(b(H),h=t(l);h!==null&&(!(h.expirationTime>H)||K&&!F());){var q=h.callback;if(typeof q=="function"){h.callback=null,d=h.priorityLevel;var X=q(h.expirationTime<=H);H=n.unstable_now(),typeof X=="function"?h.callback=X:h===t(l)&&r(l),b(H)}else r(l);h=t(l)}if(h!==null)var fe=!0;else{var de=t(c);de!==null&&W(w,de.startTime-H),fe=!1}return fe}finally{h=null,d=se,f=!1}}var I=!1,T=null,E=-1,A=5,N=-1;function F(){return!(n.unstable_now()-N<A)}function _(){if(T!==null){var K=n.unstable_now();N=K;var H=!0;try{H=T(!0,K)}finally{H?D():(I=!1,T=null)}}else I=!1}var D;if(typeof v=="function")D=function(){v(_)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,B=R.port2;R.port1.onmessage=_,D=function(){B.postMessage(null)}}else D=function(){y(_,0)};function z(K){T=K,I||(I=!0,D())}function W(K,H){E=y(function(){K(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,z(C))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(K){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var se=d;d=H;try{return K()}finally{d=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,H){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=d;d=K;try{return H()}finally{d=se}},n.unstable_scheduleCallback=function(K,H,se){var q=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?q+se:q):se=q,K){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=se+X,K={id:u++,callback:H,priorityLevel:K,startTime:se,expirationTime:X,sortIndex:-1},se>q?(K.sortIndex=se,e(c,K),t(l)===null&&K===t(c)&&(m?(g(E),E=-1):m=!0,W(w,se-q))):(K.sortIndex=X,e(l,K),p||f||(p=!0,z(C))),K},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(K){var H=d;return function(){var se=d;d=H;try{return K.apply(this,arguments)}finally{d=se}}}})(R7);_7.exports=R7;var gce=_7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yce=Me,Ao=gce;function $e(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D7=new Set,sS={};function t0(n,e){ex(n,e),ex(n+"Capture",e)}function ex(n,e){for(sS[n]=e,n=0;n<e.length;n++)D7.add(e[n])}var Ah=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d3=Object.prototype.hasOwnProperty,vce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$6={},z6={};function xce(n){return d3.call(z6,n)?!0:d3.call($6,n)?!1:vce.test(n)?z6[n]=!0:($6[n]=!0,!1)}function bce(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function wce(n,e,t,r){if(e===null||typeof e>"u"||bce(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ga(n,e,t,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){mi[n]=new ga(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];mi[e]=new ga(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){mi[n]=new ga(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){mi[n]=new ga(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){mi[n]=new ga(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){mi[n]=new ga(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){mi[n]=new ga(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){mi[n]=new ga(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){mi[n]=new ga(n,5,!1,n.toLowerCase(),null,!1,!1)});var y$=/[\-:]([a-z])/g;function v$(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(y$,v$);mi[e]=new ga(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(y$,v$);mi[e]=new ga(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(y$,v$);mi[e]=new ga(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){mi[n]=new ga(n,1,!1,n.toLowerCase(),null,!1,!1)});mi.xlinkHref=new ga("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){mi[n]=new ga(n,1,!1,n.toLowerCase(),null,!0,!0)});function x$(n,e,t,r){var s=mi.hasOwnProperty(e)?mi[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wce(e,t,s,r)&&(t=null),r||s===null?xce(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Gh=yce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oE=Symbol.for("react.element"),oy=Symbol.for("react.portal"),ly=Symbol.for("react.fragment"),b$=Symbol.for("react.strict_mode"),f3=Symbol.for("react.profiler"),F7=Symbol.for("react.provider"),P7=Symbol.for("react.context"),w$=Symbol.for("react.forward_ref"),p3=Symbol.for("react.suspense"),m3=Symbol.for("react.suspense_list"),S$=Symbol.for("react.memo"),vd=Symbol.for("react.lazy"),O7=Symbol.for("react.offscreen"),B6=Symbol.iterator;function vw(n){return n===null||typeof n!="object"?null:(n=B6&&n[B6]||n["@@iterator"],typeof n=="function"?n:null)}var Ir=Object.assign,NP;function Hw(n){if(NP===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);NP=e&&e[1]||""}return`
`+NP+n}var _P=!1;function RP(n,e){if(!n||_P)return"";_P=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{_P=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Hw(n):""}function Sce(n){switch(n.tag){case 5:return Hw(n.type);case 16:return Hw("Lazy");case 13:return Hw("Suspense");case 19:return Hw("SuspenseList");case 0:case 2:case 15:return n=RP(n.type,!1),n;case 11:return n=RP(n.type.render,!1),n;case 1:return n=RP(n.type,!0),n;default:return""}}function g3(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ly:return"Fragment";case oy:return"Portal";case f3:return"Profiler";case b$:return"StrictMode";case p3:return"Suspense";case m3:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P7:return(n.displayName||"Context")+".Consumer";case F7:return(n._context.displayName||"Context")+".Provider";case w$:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S$:return e=n.displayName||null,e!==null?e:g3(n.type)||"Memo";case vd:e=n._payload,n=n._init;try{return g3(n(e))}catch{}}return null}function kce(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g3(e);case 8:return e===b$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ff(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function L7(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cce(n){var e=L7(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function lE(n){n._valueTracker||(n._valueTracker=Cce(n))}function M7(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=L7(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function RA(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function y3(n,e){var t=e.checked;return Ir({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function V6(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ff(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $7(n,e){e=e.checked,e!=null&&x$(n,"checked",e,!1)}function v3(n,e){$7(n,e);var t=Ff(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?x3(n,e.type,t):e.hasOwnProperty("defaultValue")&&x3(n,e.type,Ff(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function j6(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function x3(n,e,t){(e!=="number"||RA(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var qw=Array.isArray;function Ty(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ff(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function b3(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error($e(91));return Ir({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function U6(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error($e(92));if(qw(t)){if(1<t.length)throw Error($e(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ff(t)}}function z7(n,e){var t=Ff(e.value),r=Ff(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function W6(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function B7(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w3(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?B7(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var cE,V7=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(cE=cE||document.createElement("div"),cE.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cE.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function iS(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var _1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tce=["Webkit","ms","Moz","O"];Object.keys(_1).forEach(function(n){Tce.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),_1[e]=_1[n]})});function j7(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_1.hasOwnProperty(n)&&_1[n]?(""+e).trim():e+"px"}function U7(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=j7(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var Ece=Ir({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function S3(n,e){if(e){if(Ece[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($e(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($e(61))}if(e.style!=null&&typeof e.style!="object")throw Error($e(62))}}function k3(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C3=null;function k$(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var T3=null,Ey=null,Iy=null;function G6(n){if(n=jk(n)){if(typeof T3!="function")throw Error($e(280));var e=n.stateNode;e&&(e=H_(e),T3(n.stateNode,n.type,e))}}function W7(n){Ey?Iy?Iy.push(n):Iy=[n]:Ey=n}function G7(){if(Ey){var n=Ey,e=Iy;if(Iy=Ey=null,G6(n),e)for(n=0;n<e.length;n++)G6(e[n])}}function H7(n,e){return n(e)}function q7(){}var DP=!1;function K7(n,e,t){if(DP)return n(e,t);DP=!0;try{return H7(n,e,t)}finally{DP=!1,(Ey!==null||Iy!==null)&&(q7(),G7())}}function aS(n,e){var t=n.stateNode;if(t===null)return null;var r=H_(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error($e(231,e,typeof t));return t}var E3=!1;if(Ah)try{var xw={};Object.defineProperty(xw,"passive",{get:function(){E3=!0}}),window.addEventListener("test",xw,xw),window.removeEventListener("test",xw,xw)}catch{E3=!1}function Ice(n,e,t,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var R1=!1,DA=null,FA=!1,I3=null,Ace={onError:function(n){R1=!0,DA=n}};function Nce(n,e,t,r,s,i,a,o,l){R1=!1,DA=null,Ice.apply(Ace,arguments)}function _ce(n,e,t,r,s,i,a,o,l){if(Nce.apply(this,arguments),R1){if(R1){var c=DA;R1=!1,DA=null}else throw Error($e(198));FA||(FA=!0,I3=c)}}function n0(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function X7(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function H6(n){if(n0(n)!==n)throw Error($e(188))}function Rce(n){var e=n.alternate;if(!e){if(e=n0(n),e===null)throw Error($e(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return H6(s),n;if(i===r)return H6(s),e;i=i.sibling}throw Error($e(188))}if(t.return!==r.return)t=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a)throw Error($e(189))}}if(t.alternate!==r)throw Error($e(190))}if(t.tag!==3)throw Error($e(188));return t.stateNode.current===t?n:e}function Y7(n){return n=Rce(n),n!==null?Z7(n):null}function Z7(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Z7(n);if(e!==null)return e;n=n.sibling}return null}var Q7=Ao.unstable_scheduleCallback,q6=Ao.unstable_cancelCallback,Dce=Ao.unstable_shouldYield,Fce=Ao.unstable_requestPaint,Gr=Ao.unstable_now,Pce=Ao.unstable_getCurrentPriorityLevel,C$=Ao.unstable_ImmediatePriority,J7=Ao.unstable_UserBlockingPriority,PA=Ao.unstable_NormalPriority,Oce=Ao.unstable_LowPriority,eq=Ao.unstable_IdlePriority,j_=null,au=null;function Lce(n){if(au&&typeof au.onCommitFiberRoot=="function")try{au.onCommitFiberRoot(j_,n,void 0,(n.current.flags&128)===128)}catch{}}var Jl=Math.clz32?Math.clz32:zce,Mce=Math.log,$ce=Math.LN2;function zce(n){return n>>>=0,n===0?32:31-(Mce(n)/$ce|0)|0}var uE=64,hE=4194304;function Kw(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function OA(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?r=Kw(o):(i&=a,i!==0&&(r=Kw(i)))}else a=t&~s,a!==0?r=Kw(a):i!==0&&(r=Kw(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Jl(e),s=1<<t,r|=n[t],e&=~s;return r}function Bce(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vce(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-Jl(i),o=1<<a,l=s[a];l===-1?(!(o&t)||o&r)&&(s[a]=Bce(o,e)):l<=e&&(n.expiredLanes|=o),i&=~o}}function A3(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function tq(){var n=uE;return uE<<=1,!(uE&4194240)&&(uE=64),n}function FP(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Bk(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Jl(e),n[e]=t}function jce(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Jl(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function T$(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Jl(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var $n=0;function nq(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var rq,E$,sq,iq,aq,N3=!1,dE=[],df=null,ff=null,pf=null,oS=new Map,lS=new Map,Sd=[],Uce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K6(n,e){switch(n){case"focusin":case"focusout":df=null;break;case"dragenter":case"dragleave":ff=null;break;case"mouseover":case"mouseout":pf=null;break;case"pointerover":case"pointerout":oS.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lS.delete(e.pointerId)}}function bw(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=jk(e),e!==null&&E$(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function Wce(n,e,t,r,s){switch(e){case"focusin":return df=bw(df,n,e,t,r,s),!0;case"dragenter":return ff=bw(ff,n,e,t,r,s),!0;case"mouseover":return pf=bw(pf,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return oS.set(i,bw(oS.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,lS.set(i,bw(lS.get(i)||null,n,e,t,r,s)),!0}return!1}function oq(n){var e=em(n.target);if(e!==null){var t=n0(e);if(t!==null){if(e=t.tag,e===13){if(e=X7(t),e!==null){n.blockedOn=e,aq(n.priority,function(){sq(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function kI(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=_3(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);C3=r,t.target.dispatchEvent(r),C3=null}else return e=jk(t),e!==null&&E$(e),n.blockedOn=t,!1;e.shift()}return!0}function X6(n,e,t){kI(n)&&t.delete(e)}function Gce(){N3=!1,df!==null&&kI(df)&&(df=null),ff!==null&&kI(ff)&&(ff=null),pf!==null&&kI(pf)&&(pf=null),oS.forEach(X6),lS.forEach(X6)}function ww(n,e){n.blockedOn===e&&(n.blockedOn=null,N3||(N3=!0,Ao.unstable_scheduleCallback(Ao.unstable_NormalPriority,Gce)))}function cS(n){function e(s){return ww(s,n)}if(0<dE.length){ww(dE[0],n);for(var t=1;t<dE.length;t++){var r=dE[t];r.blockedOn===n&&(r.blockedOn=null)}}for(df!==null&&ww(df,n),ff!==null&&ww(ff,n),pf!==null&&ww(pf,n),oS.forEach(e),lS.forEach(e),t=0;t<Sd.length;t++)r=Sd[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Sd.length&&(t=Sd[0],t.blockedOn===null);)oq(t),t.blockedOn===null&&Sd.shift()}var Ay=Gh.ReactCurrentBatchConfig,LA=!0;function Hce(n,e,t,r){var s=$n,i=Ay.transition;Ay.transition=null;try{$n=1,I$(n,e,t,r)}finally{$n=s,Ay.transition=i}}function qce(n,e,t,r){var s=$n,i=Ay.transition;Ay.transition=null;try{$n=4,I$(n,e,t,r)}finally{$n=s,Ay.transition=i}}function I$(n,e,t,r){if(LA){var s=_3(n,e,t,r);if(s===null)UP(n,e,r,MA,t),K6(n,r);else if(Wce(s,n,e,t,r))r.stopPropagation();else if(K6(n,r),e&4&&-1<Uce.indexOf(n)){for(;s!==null;){var i=jk(s);if(i!==null&&rq(i),i=_3(n,e,t,r),i===null&&UP(n,e,r,MA,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else UP(n,e,r,null,t)}}var MA=null;function _3(n,e,t,r){if(MA=null,n=k$(r),n=em(n),n!==null)if(e=n0(n),e===null)n=null;else if(t=e.tag,t===13){if(n=X7(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return MA=n,null}function lq(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pce()){case C$:return 1;case J7:return 4;case PA:case Oce:return 16;case eq:return 536870912;default:return 16}default:return 16}}var nf=null,A$=null,CI=null;function cq(){if(CI)return CI;var n,e=A$,t=e.length,r,s="value"in nf?nf.value:nf.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===s[i-r];r++);return CI=s.slice(n,1<r?1-r:void 0)}function TI(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function fE(){return!0}function Y6(){return!1}function Fo(n){function e(t,r,s,i,a){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fE:Y6,this.isPropagationStopped=Y6,this}return Ir(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=fE)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=fE)},persist:function(){},isPersistent:fE}),e}var Dx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N$=Fo(Dx),Vk=Ir({},Dx,{view:0,detail:0}),Kce=Fo(Vk),PP,OP,Sw,U_=Ir({},Vk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_$,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sw&&(Sw&&n.type==="mousemove"?(PP=n.screenX-Sw.screenX,OP=n.screenY-Sw.screenY):OP=PP=0,Sw=n),PP)},movementY:function(n){return"movementY"in n?n.movementY:OP}}),Z6=Fo(U_),Xce=Ir({},U_,{dataTransfer:0}),Yce=Fo(Xce),Zce=Ir({},Vk,{relatedTarget:0}),LP=Fo(Zce),Qce=Ir({},Dx,{animationName:0,elapsedTime:0,pseudoElement:0}),Jce=Fo(Qce),eue=Ir({},Dx,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),tue=Fo(eue),nue=Ir({},Dx,{data:0}),Q6=Fo(nue),rue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aue(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=iue[n])?!!e[n]:!1}function _$(){return aue}var oue=Ir({},Vk,{key:function(n){if(n.key){var e=rue[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=TI(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sue[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_$,charCode:function(n){return n.type==="keypress"?TI(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?TI(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lue=Fo(oue),cue=Ir({},U_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J6=Fo(cue),uue=Ir({},Vk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_$}),hue=Fo(uue),due=Ir({},Dx,{propertyName:0,elapsedTime:0,pseudoElement:0}),fue=Fo(due),pue=Ir({},U_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),mue=Fo(pue),gue=[9,13,27,32],R$=Ah&&"CompositionEvent"in window,D1=null;Ah&&"documentMode"in document&&(D1=document.documentMode);var yue=Ah&&"TextEvent"in window&&!D1,uq=Ah&&(!R$||D1&&8<D1&&11>=D1),eU=" ",tU=!1;function hq(n,e){switch(n){case"keyup":return gue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dq(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var cy=!1;function vue(n,e){switch(n){case"compositionend":return dq(e);case"keypress":return e.which!==32?null:(tU=!0,eU);case"textInput":return n=e.data,n===eU&&tU?null:n;default:return null}}function xue(n,e){if(cy)return n==="compositionend"||!R$&&hq(n,e)?(n=cq(),CI=A$=nf=null,cy=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uq&&e.locale!=="ko"?null:e.data;default:return null}}var bue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nU(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!bue[n.type]:e==="textarea"}function fq(n,e,t,r){W7(r),e=$A(e,"onChange"),0<e.length&&(t=new N$("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var F1=null,uS=null;function wue(n){Cq(n,0)}function W_(n){var e=dy(n);if(M7(e))return n}function Sue(n,e){if(n==="change")return e}var pq=!1;if(Ah){var MP;if(Ah){var $P="oninput"in document;if(!$P){var rU=document.createElement("div");rU.setAttribute("oninput","return;"),$P=typeof rU.oninput=="function"}MP=$P}else MP=!1;pq=MP&&(!document.documentMode||9<document.documentMode)}function sU(){F1&&(F1.detachEvent("onpropertychange",mq),uS=F1=null)}function mq(n){if(n.propertyName==="value"&&W_(uS)){var e=[];fq(e,uS,n,k$(n)),K7(wue,e)}}function kue(n,e,t){n==="focusin"?(sU(),F1=e,uS=t,F1.attachEvent("onpropertychange",mq)):n==="focusout"&&sU()}function Cue(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return W_(uS)}function Tue(n,e){if(n==="click")return W_(e)}function Eue(n,e){if(n==="input"||n==="change")return W_(e)}function Iue(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ic=typeof Object.is=="function"?Object.is:Iue;function hS(n,e){if(ic(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!d3.call(e,s)||!ic(n[s],e[s]))return!1}return!0}function iU(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function aU(n,e){var t=iU(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=iU(t)}}function gq(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?gq(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function yq(){for(var n=window,e=RA();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=RA(n.document)}return e}function D$(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Aue(n){var e=yq(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&gq(t.ownerDocument.documentElement,t)){if(r!==null&&D$(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=aU(t,i);var a=aU(t,r);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Nue=Ah&&"documentMode"in document&&11>=document.documentMode,uy=null,R3=null,P1=null,D3=!1;function oU(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;D3||uy==null||uy!==RA(r)||(r=uy,"selectionStart"in r&&D$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),P1&&hS(P1,r)||(P1=r,r=$A(R3,"onSelect"),0<r.length&&(e=new N$("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=uy)))}function pE(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var hy={animationend:pE("Animation","AnimationEnd"),animationiteration:pE("Animation","AnimationIteration"),animationstart:pE("Animation","AnimationStart"),transitionend:pE("Transition","TransitionEnd")},zP={},vq={};Ah&&(vq=document.createElement("div").style,"AnimationEvent"in window||(delete hy.animationend.animation,delete hy.animationiteration.animation,delete hy.animationstart.animation),"TransitionEvent"in window||delete hy.transitionend.transition);function G_(n){if(zP[n])return zP[n];if(!hy[n])return n;var e=hy[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in vq)return zP[n]=e[t];return n}var xq=G_("animationend"),bq=G_("animationiteration"),wq=G_("animationstart"),Sq=G_("transitionend"),kq=new Map,lU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cp(n,e){kq.set(n,e),t0(e,[n])}for(var BP=0;BP<lU.length;BP++){var VP=lU[BP],_ue=VP.toLowerCase(),Rue=VP[0].toUpperCase()+VP.slice(1);cp(_ue,"on"+Rue)}cp(xq,"onAnimationEnd");cp(bq,"onAnimationIteration");cp(wq,"onAnimationStart");cp("dblclick","onDoubleClick");cp("focusin","onFocus");cp("focusout","onBlur");cp(Sq,"onTransitionEnd");ex("onMouseEnter",["mouseout","mouseover"]);ex("onMouseLeave",["mouseout","mouseover"]);ex("onPointerEnter",["pointerout","pointerover"]);ex("onPointerLeave",["pointerout","pointerover"]);t0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));t0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));t0("onBeforeInput",["compositionend","keypress","textInput","paste"]);t0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));t0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));t0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Due=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xw));function cU(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,_ce(r,e,void 0,n),n.currentTarget=null}function Cq(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;cU(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;cU(s,o,c),i=l}}}if(FA)throw n=I3,FA=!1,I3=null,n}function rr(n,e){var t=e[M3];t===void 0&&(t=e[M3]=new Set);var r=n+"__bubble";t.has(r)||(Tq(e,n,2,!1),t.add(r))}function jP(n,e,t){var r=0;e&&(r|=4),Tq(t,n,r,e)}var mE="_reactListening"+Math.random().toString(36).slice(2);function dS(n){if(!n[mE]){n[mE]=!0,D7.forEach(function(t){t!=="selectionchange"&&(Due.has(t)||jP(t,!1,n),jP(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[mE]||(e[mE]=!0,jP("selectionchange",!1,e))}}function Tq(n,e,t,r){switch(lq(e)){case 1:var s=Hce;break;case 4:s=qce;break;default:s=I$}t=s.bind(null,e,t,n),s=void 0,!E3||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function UP(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=em(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}K7(function(){var c=i,u=k$(t),h=[];e:{var d=kq.get(n);if(d!==void 0){var f=N$,p=n;switch(n){case"keypress":if(TI(t)===0)break e;case"keydown":case"keyup":f=lue;break;case"focusin":p="focus",f=LP;break;case"focusout":p="blur",f=LP;break;case"beforeblur":case"afterblur":f=LP;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Z6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Yce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=hue;break;case xq:case bq:case wq:f=Jce;break;case Sq:f=fue;break;case"scroll":f=Kce;break;case"wheel":f=mue;break;case"copy":case"cut":case"paste":f=tue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=J6}var m=(e&4)!==0,y=!m&&n==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var v=c,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,g!==null&&(w=aS(v,g),w!=null&&m.push(fS(v,w,b)))),y)break;v=v.return}0<m.length&&(d=new f(d,p,null,t,u),h.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==C3&&(p=t.relatedTarget||t.fromElement)&&(em(p)||p[Nh]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?em(p):null,p!==null&&(y=n0(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=Z6,w="onMouseLeave",g="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(m=J6,w="onPointerLeave",g="onPointerEnter",v="pointer"),y=f==null?d:dy(f),b=p==null?d:dy(p),d=new m(w,v+"leave",f,t,u),d.target=y,d.relatedTarget=b,w=null,em(u)===c&&(m=new m(g,v+"enter",p,t,u),m.target=b,m.relatedTarget=y,w=m),y=w,f&&p)t:{for(m=f,g=p,v=0,b=m;b;b=O0(b))v++;for(b=0,w=g;w;w=O0(w))b++;for(;0<v-b;)m=O0(m),v--;for(;0<b-v;)g=O0(g),b--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=O0(m),g=O0(g)}m=null}else m=null;f!==null&&uU(h,d,f,m,!1),p!==null&&y!==null&&uU(h,y,p,m,!0)}}e:{if(d=c?dy(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var C=Sue;else if(nU(d))if(pq)C=Eue;else{C=Cue;var I=kue}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=Tue);if(C&&(C=C(n,c))){fq(h,C,t,u);break e}I&&I(n,d,c),n==="focusout"&&(I=d._wrapperState)&&I.controlled&&d.type==="number"&&x3(d,"number",d.value)}switch(I=c?dy(c):window,n){case"focusin":(nU(I)||I.contentEditable==="true")&&(uy=I,R3=c,P1=null);break;case"focusout":P1=R3=uy=null;break;case"mousedown":D3=!0;break;case"contextmenu":case"mouseup":case"dragend":D3=!1,oU(h,t,u);break;case"selectionchange":if(Nue)break;case"keydown":case"keyup":oU(h,t,u)}var T;if(R$)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else cy?hq(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(uq&&t.locale!=="ko"&&(cy||E!=="onCompositionStart"?E==="onCompositionEnd"&&cy&&(T=cq()):(nf=u,A$="value"in nf?nf.value:nf.textContent,cy=!0)),I=$A(c,E),0<I.length&&(E=new Q6(E,n,null,t,u),h.push({event:E,listeners:I}),T?E.data=T:(T=dq(t),T!==null&&(E.data=T)))),(T=yue?vue(n,t):xue(n,t))&&(c=$A(c,"onBeforeInput"),0<c.length&&(u=new Q6("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=T))}Cq(h,e)})}function fS(n,e,t){return{instance:n,listener:e,currentTarget:t}}function $A(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=aS(n,t),i!=null&&r.unshift(fS(n,i,s)),i=aS(n,e),i!=null&&r.push(fS(n,i,s))),n=n.return}return r}function O0(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function uU(n,e,t,r,s){for(var i=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=aS(t,i),l!=null&&a.unshift(fS(t,l,o))):s||(l=aS(t,i),l!=null&&a.push(fS(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var Fue=/\r\n?/g,Pue=/\u0000|\uFFFD/g;function hU(n){return(typeof n=="string"?n:""+n).replace(Fue,`
`).replace(Pue,"")}function gE(n,e,t){if(e=hU(e),hU(n)!==e&&t)throw Error($e(425))}function zA(){}var F3=null,P3=null;function O3(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var L3=typeof setTimeout=="function"?setTimeout:void 0,Oue=typeof clearTimeout=="function"?clearTimeout:void 0,dU=typeof Promise=="function"?Promise:void 0,Lue=typeof queueMicrotask=="function"?queueMicrotask:typeof dU<"u"?function(n){return dU.resolve(null).then(n).catch(Mue)}:L3;function Mue(n){setTimeout(function(){throw n})}function WP(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),cS(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);cS(e)}function mf(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function fU(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Fx=Math.random().toString(36).slice(2),Jc="__reactFiber$"+Fx,pS="__reactProps$"+Fx,Nh="__reactContainer$"+Fx,M3="__reactEvents$"+Fx,$ue="__reactListeners$"+Fx,zue="__reactHandles$"+Fx;function em(n){var e=n[Jc];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Nh]||t[Jc]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=fU(n);n!==null;){if(t=n[Jc])return t;n=fU(n)}return e}n=t,t=n.parentNode}return null}function jk(n){return n=n[Jc]||n[Nh],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function dy(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($e(33))}function H_(n){return n[pS]||null}var $3=[],fy=-1;function up(n){return{current:n}}function ar(n){0>fy||(n.current=$3[fy],$3[fy]=null,fy--)}function Qn(n,e){fy++,$3[fy]=n.current,n.current=e}var Pf={},zi=up(Pf),La=up(!1),wg=Pf;function tx(n,e){var t=n.type.contextTypes;if(!t)return Pf;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Ma(n){return n=n.childContextTypes,n!=null}function BA(){ar(La),ar(zi)}function pU(n,e,t){if(zi.current!==Pf)throw Error($e(168));Qn(zi,e),Qn(La,t)}function Eq(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($e(108,kce(n)||"Unknown",s));return Ir({},t,r)}function VA(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pf,wg=zi.current,Qn(zi,n),Qn(La,La.current),!0}function mU(n,e,t){var r=n.stateNode;if(!r)throw Error($e(169));t?(n=Eq(n,e,wg),r.__reactInternalMemoizedMergedChildContext=n,ar(La),ar(zi),Qn(zi,n)):ar(La),Qn(La,t)}var zu=null,q_=!1,GP=!1;function Iq(n){zu===null?zu=[n]:zu.push(n)}function Bue(n){q_=!0,Iq(n)}function hp(){if(!GP&&zu!==null){GP=!0;var n=0,e=$n;try{var t=zu;for($n=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}zu=null,q_=!1}catch(s){throw zu!==null&&(zu=zu.slice(n+1)),Q7(C$,hp),s}finally{$n=e,GP=!1}}return null}var py=[],my=0,jA=null,UA=0,Ko=[],Xo=0,Sg=null,vh=1,xh="";function Mp(n,e){py[my++]=UA,py[my++]=jA,jA=n,UA=e}function Aq(n,e,t){Ko[Xo++]=vh,Ko[Xo++]=xh,Ko[Xo++]=Sg,Sg=n;var r=vh;n=xh;var s=32-Jl(r)-1;r&=~(1<<s),t+=1;var i=32-Jl(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,vh=1<<32-Jl(e)+s|t<<s|r,xh=i+n}else vh=1<<i|t<<s|r,xh=n}function F$(n){n.return!==null&&(Mp(n,1),Aq(n,1,0))}function P$(n){for(;n===jA;)jA=py[--my],py[my]=null,UA=py[--my],py[my]=null;for(;n===Sg;)Sg=Ko[--Xo],Ko[Xo]=null,xh=Ko[--Xo],Ko[Xo]=null,vh=Ko[--Xo],Ko[Xo]=null}var bo=null,po=null,pr=!1,Gl=null;function Nq(n,e){var t=nl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function gU(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,bo=n,po=mf(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,bo=n,po=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Sg!==null?{id:vh,overflow:xh}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=nl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,bo=n,po=null,!0):!1;default:return!1}}function z3(n){return(n.mode&1)!==0&&(n.flags&128)===0}function B3(n){if(pr){var e=po;if(e){var t=e;if(!gU(n,e)){if(z3(n))throw Error($e(418));e=mf(t.nextSibling);var r=bo;e&&gU(n,e)?Nq(r,t):(n.flags=n.flags&-4097|2,pr=!1,bo=n)}}else{if(z3(n))throw Error($e(418));n.flags=n.flags&-4097|2,pr=!1,bo=n}}}function yU(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;bo=n}function yE(n){if(n!==bo)return!1;if(!pr)return yU(n),pr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!O3(n.type,n.memoizedProps)),e&&(e=po)){if(z3(n))throw _q(),Error($e(418));for(;e;)Nq(n,e),e=mf(e.nextSibling)}if(yU(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($e(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){po=mf(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}po=null}}else po=bo?mf(n.stateNode.nextSibling):null;return!0}function _q(){for(var n=po;n;)n=mf(n.nextSibling)}function nx(){po=bo=null,pr=!1}function O$(n){Gl===null?Gl=[n]:Gl.push(n)}var Vue=Gh.ReactCurrentBatchConfig;function kw(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($e(309));var r=t.stateNode}if(!r)throw Error($e(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error($e(284));if(!t._owner)throw Error($e(290,n))}return n}function vE(n,e){throw n=Object.prototype.toString.call(e),Error($e(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function vU(n){var e=n._init;return e(n._payload)}function Rq(n){function e(g,v){if(n){var b=g.deletions;b===null?(g.deletions=[v],g.flags|=16):b.push(v)}}function t(g,v){if(!n)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=xf(g,v),g.index=0,g.sibling=null,g}function i(g,v,b){return g.index=b,n?(b=g.alternate,b!==null?(b=b.index,b<v?(g.flags|=2,v):b):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return n&&g.alternate===null&&(g.flags|=2),g}function o(g,v,b,w){return v===null||v.tag!==6?(v=QP(b,g.mode,w),v.return=g,v):(v=s(v,b),v.return=g,v)}function l(g,v,b,w){var C=b.type;return C===ly?u(g,v,b.props.children,w,b.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===vd&&vU(C)===v.type)?(w=s(v,b.props),w.ref=kw(g,v,b),w.return=g,w):(w=DI(b.type,b.key,b.props,null,g.mode,w),w.ref=kw(g,v,b),w.return=g,w)}function c(g,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=JP(b,g.mode,w),v.return=g,v):(v=s(v,b.children||[]),v.return=g,v)}function u(g,v,b,w,C){return v===null||v.tag!==7?(v=mg(b,g.mode,w,C),v.return=g,v):(v=s(v,b),v.return=g,v)}function h(g,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=QP(""+v,g.mode,b),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case oE:return b=DI(v.type,v.key,v.props,null,g.mode,b),b.ref=kw(g,null,v),b.return=g,b;case oy:return v=JP(v,g.mode,b),v.return=g,v;case vd:var w=v._init;return h(g,w(v._payload),b)}if(qw(v)||vw(v))return v=mg(v,g.mode,b,null),v.return=g,v;vE(g,v)}return null}function d(g,v,b,w){var C=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:o(g,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case oE:return b.key===C?l(g,v,b,w):null;case oy:return b.key===C?c(g,v,b,w):null;case vd:return C=b._init,d(g,v,C(b._payload),w)}if(qw(b)||vw(b))return C!==null?null:u(g,v,b,w,null);vE(g,b)}return null}function f(g,v,b,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(b)||null,o(v,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case oE:return g=g.get(w.key===null?b:w.key)||null,l(v,g,w,C);case oy:return g=g.get(w.key===null?b:w.key)||null,c(v,g,w,C);case vd:var I=w._init;return f(g,v,b,I(w._payload),C)}if(qw(w)||vw(w))return g=g.get(b)||null,u(v,g,w,C,null);vE(v,w)}return null}function p(g,v,b,w){for(var C=null,I=null,T=v,E=v=0,A=null;T!==null&&E<b.length;E++){T.index>E?(A=T,T=null):A=T.sibling;var N=d(g,T,b[E],w);if(N===null){T===null&&(T=A);break}n&&T&&N.alternate===null&&e(g,T),v=i(N,v,E),I===null?C=N:I.sibling=N,I=N,T=A}if(E===b.length)return t(g,T),pr&&Mp(g,E),C;if(T===null){for(;E<b.length;E++)T=h(g,b[E],w),T!==null&&(v=i(T,v,E),I===null?C=T:I.sibling=T,I=T);return pr&&Mp(g,E),C}for(T=r(g,T);E<b.length;E++)A=f(T,g,E,b[E],w),A!==null&&(n&&A.alternate!==null&&T.delete(A.key===null?E:A.key),v=i(A,v,E),I===null?C=A:I.sibling=A,I=A);return n&&T.forEach(function(F){return e(g,F)}),pr&&Mp(g,E),C}function m(g,v,b,w){var C=vw(b);if(typeof C!="function")throw Error($e(150));if(b=C.call(b),b==null)throw Error($e(151));for(var I=C=null,T=v,E=v=0,A=null,N=b.next();T!==null&&!N.done;E++,N=b.next()){T.index>E?(A=T,T=null):A=T.sibling;var F=d(g,T,N.value,w);if(F===null){T===null&&(T=A);break}n&&T&&F.alternate===null&&e(g,T),v=i(F,v,E),I===null?C=F:I.sibling=F,I=F,T=A}if(N.done)return t(g,T),pr&&Mp(g,E),C;if(T===null){for(;!N.done;E++,N=b.next())N=h(g,N.value,w),N!==null&&(v=i(N,v,E),I===null?C=N:I.sibling=N,I=N);return pr&&Mp(g,E),C}for(T=r(g,T);!N.done;E++,N=b.next())N=f(T,g,E,N.value,w),N!==null&&(n&&N.alternate!==null&&T.delete(N.key===null?E:N.key),v=i(N,v,E),I===null?C=N:I.sibling=N,I=N);return n&&T.forEach(function(_){return e(g,_)}),pr&&Mp(g,E),C}function y(g,v,b,w){if(typeof b=="object"&&b!==null&&b.type===ly&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case oE:e:{for(var C=b.key,I=v;I!==null;){if(I.key===C){if(C=b.type,C===ly){if(I.tag===7){t(g,I.sibling),v=s(I,b.props.children),v.return=g,g=v;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===vd&&vU(C)===I.type){t(g,I.sibling),v=s(I,b.props),v.ref=kw(g,I,b),v.return=g,g=v;break e}t(g,I);break}else e(g,I);I=I.sibling}b.type===ly?(v=mg(b.props.children,g.mode,w,b.key),v.return=g,g=v):(w=DI(b.type,b.key,b.props,null,g.mode,w),w.ref=kw(g,v,b),w.return=g,g=w)}return a(g);case oy:e:{for(I=b.key;v!==null;){if(v.key===I)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){t(g,v.sibling),v=s(v,b.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=JP(b,g.mode,w),v.return=g,g=v}return a(g);case vd:return I=b._init,y(g,v,I(b._payload),w)}if(qw(b))return p(g,v,b,w);if(vw(b))return m(g,v,b,w);vE(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(t(g,v.sibling),v=s(v,b),v.return=g,g=v):(t(g,v),v=QP(b,g.mode,w),v.return=g,g=v),a(g)):t(g,v)}return y}var rx=Rq(!0),Dq=Rq(!1),WA=up(null),GA=null,gy=null,L$=null;function M$(){L$=gy=GA=null}function $$(n){var e=WA.current;ar(WA),n._currentValue=e}function V3(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ny(n,e){GA=n,L$=gy=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ra=!0),n.firstContext=null)}function ml(n){var e=n._currentValue;if(L$!==n)if(n={context:n,memoizedValue:e,next:null},gy===null){if(GA===null)throw Error($e(308));gy=n,GA.dependencies={lanes:0,firstContext:n}}else gy=gy.next=n;return e}var tm=null;function z$(n){tm===null?tm=[n]:tm.push(n)}function Fq(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,z$(e)):(t.next=s.next,s.next=t),e.interleaved=t,_h(n,r)}function _h(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var xd=!1;function B$(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pq(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function bh(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function gf(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,kn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_h(n,t)}return s=r.interleaved,s===null?(e.next=e,z$(r)):(e.next=s.next,s.next=e),r.interleaved=e,_h(n,t)}function EI(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,T$(n,t)}}function xU(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function HA(n,e,t,r){var s=n.updateQueue;xd=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,u=c=l=null,o=i;do{var d=o.lane,f=o.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=n,m=o;switch(d=e,f=t,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ir({},h,d);break e;case 2:xd=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,d=s.effects,d===null?s.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,a|=d;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;d=o,o=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Cg|=a,n.lanes=a,n.memoizedState=h}}function bU(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error($e(191,s));s.call(r)}}}var Uk={},ou=up(Uk),mS=up(Uk),gS=up(Uk);function nm(n){if(n===Uk)throw Error($e(174));return n}function V$(n,e){switch(Qn(gS,e),Qn(mS,n),Qn(ou,Uk),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:w3(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=w3(e,n)}ar(ou),Qn(ou,e)}function sx(){ar(ou),ar(mS),ar(gS)}function Oq(n){nm(gS.current);var e=nm(ou.current),t=w3(e,n.type);e!==t&&(Qn(mS,n),Qn(ou,t))}function j$(n){mS.current===n&&(ar(ou),ar(mS))}var kr=up(0);function qA(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var HP=[];function U$(){for(var n=0;n<HP.length;n++)HP[n]._workInProgressVersionPrimary=null;HP.length=0}var II=Gh.ReactCurrentDispatcher,qP=Gh.ReactCurrentBatchConfig,kg=0,Er=null,vs=null,js=null,KA=!1,O1=!1,yS=0,jue=0;function xi(){throw Error($e(321))}function W$(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ic(n[t],e[t]))return!1;return!0}function G$(n,e,t,r,s,i){if(kg=i,Er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,II.current=n===null||n.memoizedState===null?Hue:que,n=t(r,s),O1){i=0;do{if(O1=!1,yS=0,25<=i)throw Error($e(301));i+=1,js=vs=null,e.updateQueue=null,II.current=Kue,n=t(r,s)}while(O1)}if(II.current=XA,e=vs!==null&&vs.next!==null,kg=0,js=vs=Er=null,KA=!1,e)throw Error($e(300));return n}function H$(){var n=yS!==0;return yS=0,n}function _c(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return js===null?Er.memoizedState=js=n:js=js.next=n,js}function gl(){if(vs===null){var n=Er.alternate;n=n!==null?n.memoizedState:null}else n=vs.next;var e=js===null?Er.memoizedState:js.next;if(e!==null)js=e,vs=n;else{if(n===null)throw Error($e(310));vs=n,n={memoizedState:vs.memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},js===null?Er.memoizedState=js=n:js=js.next=n}return js}function vS(n,e){return typeof e=="function"?e(n):e}function KP(n){var e=gl(),t=e.queue;if(t===null)throw Error($e(311));t.lastRenderedReducer=n;var r=vs,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((kg&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,Er.lanes|=u,Cg|=u}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,ic(r,e.memoizedState)||(Ra=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,Er.lanes|=i,Cg|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function XP(n){var e=gl(),t=e.queue;if(t===null)throw Error($e(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do i=n(i,a.action),a=a.next;while(a!==s);ic(i,e.memoizedState)||(Ra=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function Lq(){}function Mq(n,e){var t=Er,r=gl(),s=e(),i=!ic(r.memoizedState,s);if(i&&(r.memoizedState=s,Ra=!0),r=r.queue,q$(Bq.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||js!==null&&js.memoizedState.tag&1){if(t.flags|=2048,xS(9,zq.bind(null,t,r,s,e),void 0,null),qs===null)throw Error($e(349));kg&30||$q(t,e,s)}return s}function $q(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Er.updateQueue,e===null?(e={lastEffect:null,stores:null},Er.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function zq(n,e,t,r){e.value=t,e.getSnapshot=r,Vq(e)&&jq(n)}function Bq(n,e,t){return t(function(){Vq(e)&&jq(n)})}function Vq(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ic(n,t)}catch{return!0}}function jq(n){var e=_h(n,1);e!==null&&ec(e,n,1,-1)}function wU(n){var e=_c();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vS,lastRenderedState:n},e.queue=n,n=n.dispatch=Gue.bind(null,Er,n),[e.memoizedState,n]}function xS(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Er.updateQueue,e===null?(e={lastEffect:null,stores:null},Er.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Uq(){return gl().memoizedState}function AI(n,e,t,r){var s=_c();Er.flags|=n,s.memoizedState=xS(1|e,t,void 0,r===void 0?null:r)}function K_(n,e,t,r){var s=gl();r=r===void 0?null:r;var i=void 0;if(vs!==null){var a=vs.memoizedState;if(i=a.destroy,r!==null&&W$(r,a.deps)){s.memoizedState=xS(e,t,i,r);return}}Er.flags|=n,s.memoizedState=xS(1|e,t,i,r)}function SU(n,e){return AI(8390656,8,n,e)}function q$(n,e){return K_(2048,8,n,e)}function Wq(n,e){return K_(4,2,n,e)}function Gq(n,e){return K_(4,4,n,e)}function Hq(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function qq(n,e,t){return t=t!=null?t.concat([n]):null,K_(4,4,Hq.bind(null,e,n),t)}function K$(){}function Kq(n,e){var t=gl();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&W$(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Xq(n,e){var t=gl();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&W$(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Yq(n,e,t){return kg&21?(ic(t,e)||(t=tq(),Er.lanes|=t,Cg|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ra=!0),n.memoizedState=t)}function Uue(n,e){var t=$n;$n=t!==0&&4>t?t:4,n(!0);var r=qP.transition;qP.transition={};try{n(!1),e()}finally{$n=t,qP.transition=r}}function Zq(){return gl().memoizedState}function Wue(n,e,t){var r=vf(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Qq(n))Jq(e,t);else if(t=Fq(n,e,t,r),t!==null){var s=ta();ec(t,n,r,s),eK(t,e,r)}}function Gue(n,e,t){var r=vf(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Qq(n))Jq(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,t);if(s.hasEagerState=!0,s.eagerState=o,ic(o,a)){var l=e.interleaved;l===null?(s.next=s,z$(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=Fq(n,e,s,r),t!==null&&(s=ta(),ec(t,n,r,s),eK(t,e,r))}}function Qq(n){var e=n.alternate;return n===Er||e!==null&&e===Er}function Jq(n,e){O1=KA=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function eK(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,T$(n,t)}}var XA={readContext:ml,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},Hue={readContext:ml,useCallback:function(n,e){return _c().memoizedState=[n,e===void 0?null:e],n},useContext:ml,useEffect:SU,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,AI(4194308,4,Hq.bind(null,e,n),t)},useLayoutEffect:function(n,e){return AI(4194308,4,n,e)},useInsertionEffect:function(n,e){return AI(4,2,n,e)},useMemo:function(n,e){var t=_c();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=_c();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Wue.bind(null,Er,n),[r.memoizedState,n]},useRef:function(n){var e=_c();return n={current:n},e.memoizedState=n},useState:wU,useDebugValue:K$,useDeferredValue:function(n){return _c().memoizedState=n},useTransition:function(){var n=wU(!1),e=n[0];return n=Uue.bind(null,n[1]),_c().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Er,s=_c();if(pr){if(t===void 0)throw Error($e(407));t=t()}else{if(t=e(),qs===null)throw Error($e(349));kg&30||$q(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,SU(Bq.bind(null,r,i,n),[n]),r.flags|=2048,xS(9,zq.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=_c(),e=qs.identifierPrefix;if(pr){var t=xh,r=vh;t=(r&~(1<<32-Jl(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=yS++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=jue++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},que={readContext:ml,useCallback:Kq,useContext:ml,useEffect:q$,useImperativeHandle:qq,useInsertionEffect:Wq,useLayoutEffect:Gq,useMemo:Xq,useReducer:KP,useRef:Uq,useState:function(){return KP(vS)},useDebugValue:K$,useDeferredValue:function(n){var e=gl();return Yq(e,vs.memoizedState,n)},useTransition:function(){var n=KP(vS)[0],e=gl().memoizedState;return[n,e]},useMutableSource:Lq,useSyncExternalStore:Mq,useId:Zq,unstable_isNewReconciler:!1},Kue={readContext:ml,useCallback:Kq,useContext:ml,useEffect:q$,useImperativeHandle:qq,useInsertionEffect:Wq,useLayoutEffect:Gq,useMemo:Xq,useReducer:XP,useRef:Uq,useState:function(){return XP(vS)},useDebugValue:K$,useDeferredValue:function(n){var e=gl();return vs===null?e.memoizedState=n:Yq(e,vs.memoizedState,n)},useTransition:function(){var n=XP(vS)[0],e=gl().memoizedState;return[n,e]},useMutableSource:Lq,useSyncExternalStore:Mq,useId:Zq,unstable_isNewReconciler:!1};function _l(n,e){if(n&&n.defaultProps){e=Ir({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function j3(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ir({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var X_={isMounted:function(n){return(n=n._reactInternals)?n0(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ta(),s=vf(n),i=bh(r,s);i.payload=e,t!=null&&(i.callback=t),e=gf(n,i,s),e!==null&&(ec(e,n,s,r),EI(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ta(),s=vf(n),i=bh(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=gf(n,i,s),e!==null&&(ec(e,n,s,r),EI(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ta(),r=vf(n),s=bh(t,r);s.tag=2,e!=null&&(s.callback=e),e=gf(n,s,r),e!==null&&(ec(e,n,r,t),EI(e,n,r))}};function kU(n,e,t,r,s,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!hS(t,r)||!hS(s,i):!0}function tK(n,e,t){var r=!1,s=Pf,i=e.contextType;return typeof i=="object"&&i!==null?i=ml(i):(s=Ma(e)?wg:zi.current,r=e.contextTypes,i=(r=r!=null)?tx(n,s):Pf),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=X_,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function CU(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&X_.enqueueReplaceState(e,e.state,null)}function U3(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},B$(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ml(i):(i=Ma(e)?wg:zi.current,s.context=tx(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(j3(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&X_.enqueueReplaceState(s,s.state,null),HA(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function ix(n,e){try{var t="",r=e;do t+=Sce(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function YP(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function W3(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Xue=typeof WeakMap=="function"?WeakMap:Map;function nK(n,e,t){t=bh(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ZA||(ZA=!0,eL=r),W3(n,e)},t}function rK(n,e,t){t=bh(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){W3(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){W3(n,e),typeof r!="function"&&(yf===null?yf=new Set([this]):yf.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function TU(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Xue;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=che.bind(null,n,e,t),e.then(n,n))}function EU(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function IU(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=bh(-1,1),e.tag=2,gf(t,e,1))),t.lanes|=1),n)}var Yue=Gh.ReactCurrentOwner,Ra=!1;function Zi(n,e,t,r){e.child=n===null?Dq(e,null,t,r):rx(e,n.child,t,r)}function AU(n,e,t,r,s){t=t.render;var i=e.ref;return Ny(e,s),r=G$(n,e,t,r,i,s),t=H$(),n!==null&&!Ra?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Rh(n,e,s)):(pr&&t&&F$(e),e.flags|=1,Zi(n,e,r,s),e.child)}function NU(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!n5(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,sK(n,e,i,r,s)):(n=DI(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:hS,t(a,r)&&n.ref===e.ref)return Rh(n,e,s)}return e.flags|=1,n=xf(i,r),n.ref=e.ref,n.return=e,e.child=n}function sK(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(hS(i,r)&&n.ref===e.ref)if(Ra=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(Ra=!0);else return e.lanes=n.lanes,Rh(n,e,s)}return G3(n,e,t,r,s)}function iK(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(vy,oo),oo|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qn(vy,oo),oo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Qn(vy,oo),oo|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Qn(vy,oo),oo|=r;return Zi(n,e,s,t),e.child}function aK(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function G3(n,e,t,r,s){var i=Ma(t)?wg:zi.current;return i=tx(e,i),Ny(e,s),t=G$(n,e,t,r,i,s),r=H$(),n!==null&&!Ra?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Rh(n,e,s)):(pr&&r&&F$(e),e.flags|=1,Zi(n,e,t,s),e.child)}function _U(n,e,t,r,s){if(Ma(t)){var i=!0;VA(e)}else i=!1;if(Ny(e,s),e.stateNode===null)NI(n,e),tK(e,t,r),U3(e,t,r,s),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=ml(c):(c=Ma(t)?wg:zi.current,c=tx(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&CU(e,a,r,c),xd=!1;var d=e.memoizedState;a.state=d,HA(e,r,a,s),l=e.memoizedState,o!==r||d!==l||La.current||xd?(typeof u=="function"&&(j3(e,t,u,r),l=e.memoizedState),(o=xd||kU(e,t,o,r,d,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Pq(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:_l(e.type,o),a.props=c,h=e.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=ml(l):(l=Ma(t)?wg:zi.current,l=tx(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&CU(e,a,r,l),xd=!1,d=e.memoizedState,a.state=d,HA(e,r,a,s);var p=e.memoizedState;o!==h||d!==p||La.current||xd?(typeof f=="function"&&(j3(e,t,f,r),p=e.memoizedState),(c=xd||kU(e,t,c,r,d,p,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return H3(n,e,t,r,i,s)}function H3(n,e,t,r,s,i){aK(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&mU(e,t,!1),Rh(n,e,i);r=e.stateNode,Yue.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=rx(e,n.child,null,i),e.child=rx(e,null,o,i)):Zi(n,e,o,i),e.memoizedState=r.state,s&&mU(e,t,!0),e.child}function oK(n){var e=n.stateNode;e.pendingContext?pU(n,e.pendingContext,e.pendingContext!==e.context):e.context&&pU(n,e.context,!1),V$(n,e.containerInfo)}function RU(n,e,t,r,s){return nx(),O$(s),e.flags|=256,Zi(n,e,t,r),e.child}var q3={dehydrated:null,treeContext:null,retryLane:0};function K3(n){return{baseLanes:n,cachePool:null,transitions:null}}function lK(n,e,t){var r=e.pendingProps,s=kr.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Qn(kr,s&1),n===null)return B3(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Q_(a,r,0,null),n=mg(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=K3(t),e.memoizedState=q3,n):X$(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Zue(n,e,a,r,o,s,t);if(i){i=r.fallback,a=e.mode,s=n.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xf(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=xf(o,i):(i=mg(i,a,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=n.child.memoizedState,a=a===null?K3(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=q3,r}return i=n.child,n=i.sibling,r=xf(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function X$(n,e){return e=Q_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xE(n,e,t,r){return r!==null&&O$(r),rx(e,n.child,null,t),n=X$(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Zue(n,e,t,r,s,i,a){if(t)return e.flags&256?(e.flags&=-257,r=YP(Error($e(422))),xE(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Q_({mode:"visible",children:r.children},s,0,null),i=mg(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&rx(e,n.child,null,a),e.child.memoizedState=K3(a),e.memoizedState=q3,i);if(!(e.mode&1))return xE(n,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error($e(419)),r=YP(i,r,void 0),xE(n,e,a,r)}if(o=(a&n.childLanes)!==0,Ra||o){if(r=qs,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_h(n,s),ec(r,n,s,-1))}return t5(),r=YP(Error($e(421))),xE(n,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=uhe.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,po=mf(s.nextSibling),bo=e,pr=!0,Gl=null,n!==null&&(Ko[Xo++]=vh,Ko[Xo++]=xh,Ko[Xo++]=Sg,vh=n.id,xh=n.overflow,Sg=e),e=X$(e,r.children),e.flags|=4096,e)}function DU(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),V3(n.return,e,t)}function ZP(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function cK(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Zi(n,e,r.children,t),r=kr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&DU(n,t,e);else if(n.tag===19)DU(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Qn(kr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&qA(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),ZP(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&qA(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}ZP(e,!0,t,null,i);break;case"together":ZP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function NI(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Rh(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Cg|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error($e(153));if(e.child!==null){for(n=e.child,t=xf(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=xf(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Que(n,e,t){switch(e.tag){case 3:oK(e),nx();break;case 5:Oq(e);break;case 1:Ma(e.type)&&VA(e);break;case 4:V$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qn(WA,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qn(kr,kr.current&1),e.flags|=128,null):t&e.child.childLanes?lK(n,e,t):(Qn(kr,kr.current&1),n=Rh(n,e,t),n!==null?n.sibling:null);Qn(kr,kr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return cK(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qn(kr,kr.current),r)break;return null;case 22:case 23:return e.lanes=0,iK(n,e,t)}return Rh(n,e,t)}var uK,X3,hK,dK;uK=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};X3=function(){};hK=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,nm(ou.current);var i=null;switch(t){case"input":s=y3(n,s),r=y3(n,r),i=[];break;case"select":s=Ir({},s,{value:void 0}),r=Ir({},r,{value:void 0}),i=[];break;case"textarea":s=b3(n,s),r=b3(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=zA)}S3(t,r);var a;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sS.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sS.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&rr("scroll",n),i||o===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};dK=function(n,e,t,r){t!==r&&(e.flags|=4)};function Cw(n,e){if(!pr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function bi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Jue(n,e,t){var r=e.pendingProps;switch(P$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(e),null;case 1:return Ma(e.type)&&BA(),bi(e),null;case 3:return r=e.stateNode,sx(),ar(La),ar(zi),U$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(yE(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gl!==null&&(rL(Gl),Gl=null))),X3(n,e),bi(e),null;case 5:j$(e);var s=nm(gS.current);if(t=e.type,n!==null&&e.stateNode!=null)hK(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($e(166));return bi(e),null}if(n=nm(ou.current),yE(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Jc]=e,r[pS]=i,n=(e.mode&1)!==0,t){case"dialog":rr("cancel",r),rr("close",r);break;case"iframe":case"object":case"embed":rr("load",r);break;case"video":case"audio":for(s=0;s<Xw.length;s++)rr(Xw[s],r);break;case"source":rr("error",r);break;case"img":case"image":case"link":rr("error",r),rr("load",r);break;case"details":rr("toggle",r);break;case"input":V6(r,i),rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},rr("invalid",r);break;case"textarea":U6(r,i),rr("invalid",r)}S3(t,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&gE(r.textContent,o,n),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&gE(r.textContent,o,n),s=["children",""+o]):sS.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&rr("scroll",r)}switch(t){case"input":lE(r),j6(r,i,!0);break;case"textarea":lE(r),W6(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zA)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=B7(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[Jc]=e,n[pS]=r,uK(n,e,!1,!1),e.stateNode=n;e:{switch(a=k3(t,r),t){case"dialog":rr("cancel",n),rr("close",n),s=r;break;case"iframe":case"object":case"embed":rr("load",n),s=r;break;case"video":case"audio":for(s=0;s<Xw.length;s++)rr(Xw[s],n);s=r;break;case"source":rr("error",n),s=r;break;case"img":case"image":case"link":rr("error",n),rr("load",n),s=r;break;case"details":rr("toggle",n),s=r;break;case"input":V6(n,r),s=y3(n,r),rr("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=Ir({},r,{value:void 0}),rr("invalid",n);break;case"textarea":U6(n,r),s=b3(n,r),rr("invalid",n);break;default:s=r}S3(t,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?U7(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&V7(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&iS(n,l):typeof l=="number"&&iS(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sS.hasOwnProperty(i)?l!=null&&i==="onScroll"&&rr("scroll",n):l!=null&&x$(n,i,l,a))}switch(t){case"input":lE(n),j6(n,r,!1);break;case"textarea":lE(n),W6(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ff(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Ty(n,!!r.multiple,i,!1):r.defaultValue!=null&&Ty(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=zA)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bi(e),null;case 6:if(n&&e.stateNode!=null)dK(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($e(166));if(t=nm(gS.current),nm(ou.current),yE(e)){if(r=e.stateNode,t=e.memoizedProps,r[Jc]=e,(i=r.nodeValue!==t)&&(n=bo,n!==null))switch(n.tag){case 3:gE(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gE(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Jc]=e,e.stateNode=r}return bi(e),null;case 13:if(ar(kr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(pr&&po!==null&&e.mode&1&&!(e.flags&128))_q(),nx(),e.flags|=98560,i=!1;else if(i=yE(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error($e(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($e(317));i[Jc]=e}else nx(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bi(e),i=!1}else Gl!==null&&(rL(Gl),Gl=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||kr.current&1?ks===0&&(ks=3):t5())),e.updateQueue!==null&&(e.flags|=4),bi(e),null);case 4:return sx(),X3(n,e),n===null&&dS(e.stateNode.containerInfo),bi(e),null;case 10:return $$(e.type._context),bi(e),null;case 17:return Ma(e.type)&&BA(),bi(e),null;case 19:if(ar(kr),i=e.memoizedState,i===null)return bi(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Cw(i,!1);else{if(ks!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=qA(n),a!==null){for(e.flags|=128,Cw(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qn(kr,kr.current&1|2),e.child}n=n.sibling}i.tail!==null&&Gr()>ax&&(e.flags|=128,r=!0,Cw(i,!1),e.lanes=4194304)}else{if(!r)if(n=qA(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Cw(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!pr)return bi(e),null}else 2*Gr()-i.renderingStartTime>ax&&t!==1073741824&&(e.flags|=128,r=!0,Cw(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Gr(),e.sibling=null,t=kr.current,Qn(kr,r?t&1|2:t&1),e):(bi(e),null);case 22:case 23:return e5(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oo&1073741824&&(bi(e),e.subtreeFlags&6&&(e.flags|=8192)):bi(e),null;case 24:return null;case 25:return null}throw Error($e(156,e.tag))}function ehe(n,e){switch(P$(e),e.tag){case 1:return Ma(e.type)&&BA(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return sx(),ar(La),ar(zi),U$(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return j$(e),null;case 13:if(ar(kr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error($e(340));nx()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ar(kr),null;case 4:return sx(),null;case 10:return $$(e.type._context),null;case 22:case 23:return e5(),null;case 24:return null;default:return null}}var bE=!1,Fi=!1,the=typeof WeakSet=="function"?WeakSet:Set,nt=null;function yy(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dr(n,e,r)}else t.current=null}function Y3(n,e,t){try{t()}catch(r){Dr(n,e,r)}}var FU=!1;function nhe(n,e){if(F3=LA,n=yq(),D$(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===s&&(o=a),d===i&&++u===r&&(l=a),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(P3={focusedElem:n,selectionRange:t},LA=!1,nt=e;nt!==null;)if(e=nt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,nt=n;else for(;nt!==null;){e=nt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:_l(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(w){Dr(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,nt=n;break}nt=e.return}return p=FU,FU=!1,p}function L1(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&Y3(e,t,i)}s=s.next}while(s!==r)}}function Y_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Z3(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function fK(n){var e=n.alternate;e!==null&&(n.alternate=null,fK(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Jc],delete e[pS],delete e[M3],delete e[$ue],delete e[zue])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pK(n){return n.tag===5||n.tag===3||n.tag===4}function PU(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pK(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Q3(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=zA));else if(r!==4&&(n=n.child,n!==null))for(Q3(n,e,t),n=n.sibling;n!==null;)Q3(n,e,t),n=n.sibling}function J3(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(J3(n,e,t),n=n.sibling;n!==null;)J3(n,e,t),n=n.sibling}var ai=null,Wl=!1;function ud(n,e,t){for(t=t.child;t!==null;)mK(n,e,t),t=t.sibling}function mK(n,e,t){if(au&&typeof au.onCommitFiberUnmount=="function")try{au.onCommitFiberUnmount(j_,t)}catch{}switch(t.tag){case 5:Fi||yy(t,e);case 6:var r=ai,s=Wl;ai=null,ud(n,e,t),ai=r,Wl=s,ai!==null&&(Wl?(n=ai,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ai.removeChild(t.stateNode));break;case 18:ai!==null&&(Wl?(n=ai,t=t.stateNode,n.nodeType===8?WP(n.parentNode,t):n.nodeType===1&&WP(n,t),cS(n)):WP(ai,t.stateNode));break;case 4:r=ai,s=Wl,ai=t.stateNode.containerInfo,Wl=!0,ud(n,e,t),ai=r,Wl=s;break;case 0:case 11:case 14:case 15:if(!Fi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Y3(t,e,a),s=s.next}while(s!==r)}ud(n,e,t);break;case 1:if(!Fi&&(yy(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Dr(t,e,o)}ud(n,e,t);break;case 21:ud(n,e,t);break;case 22:t.mode&1?(Fi=(r=Fi)||t.memoizedState!==null,ud(n,e,t),Fi=r):ud(n,e,t);break;default:ud(n,e,t)}}function OU(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new the),e.forEach(function(r){var s=hhe.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Cl(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ai=o.stateNode,Wl=!1;break e;case 3:ai=o.stateNode.containerInfo,Wl=!0;break e;case 4:ai=o.stateNode.containerInfo,Wl=!0;break e}o=o.return}if(ai===null)throw Error($e(160));mK(i,a,s),ai=null,Wl=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Dr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gK(e,n),e=e.sibling}function gK(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cl(e,n),Sc(n),r&4){try{L1(3,n,n.return),Y_(3,n)}catch(m){Dr(n,n.return,m)}try{L1(5,n,n.return)}catch(m){Dr(n,n.return,m)}}break;case 1:Cl(e,n),Sc(n),r&512&&t!==null&&yy(t,t.return);break;case 5:if(Cl(e,n),Sc(n),r&512&&t!==null&&yy(t,t.return),n.flags&32){var s=n.stateNode;try{iS(s,"")}catch(m){Dr(n,n.return,m)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&$7(s,i),k3(o,a);var c=k3(o,i);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?U7(s,h):u==="dangerouslySetInnerHTML"?V7(s,h):u==="children"?iS(s,h):x$(s,u,h,c)}switch(o){case"input":v3(s,i);break;case"textarea":z7(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ty(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?Ty(s,!!i.multiple,i.defaultValue,!0):Ty(s,!!i.multiple,i.multiple?[]:"",!1))}s[pS]=i}catch(m){Dr(n,n.return,m)}}break;case 6:if(Cl(e,n),Sc(n),r&4){if(n.stateNode===null)throw Error($e(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(m){Dr(n,n.return,m)}}break;case 3:if(Cl(e,n),Sc(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{cS(e.containerInfo)}catch(m){Dr(n,n.return,m)}break;case 4:Cl(e,n),Sc(n);break;case 13:Cl(e,n),Sc(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Q$=Gr())),r&4&&OU(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Fi=(c=Fi)||u,Cl(e,n),Fi=c):Cl(e,n),Sc(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(nt=n,u=n.child;u!==null;){for(h=nt=u;nt!==null;){switch(d=nt,f=d.child,d.tag){case 0:case 11:case 14:case 15:L1(4,d,d.return);break;case 1:yy(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Dr(r,t,m)}}break;case 5:yy(d,d.return);break;case 22:if(d.memoizedState!==null){MU(h);continue}}f!==null?(f.return=d,nt=f):MU(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=j7("display",a))}catch(m){Dr(n,n.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Dr(n,n.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Cl(e,n),Sc(n),r&4&&OU(n);break;case 21:break;default:Cl(e,n),Sc(n)}}function Sc(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(pK(t)){var r=t;break e}t=t.return}throw Error($e(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(iS(s,""),r.flags&=-33);var i=PU(n);J3(n,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=PU(n);Q3(n,o,a);break;default:throw Error($e(161))}}catch(l){Dr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function rhe(n,e,t){nt=n,yK(n)}function yK(n,e,t){for(var r=(n.mode&1)!==0;nt!==null;){var s=nt,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||bE;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Fi;o=bE;var c=Fi;if(bE=a,(Fi=l)&&!c)for(nt=s;nt!==null;)a=nt,l=a.child,a.tag===22&&a.memoizedState!==null?$U(s):l!==null?(l.return=a,nt=l):$U(s);for(;i!==null;)nt=i,yK(i),i=i.sibling;nt=s,bE=o,Fi=c}LU(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,nt=i):LU(n)}}function LU(n){for(;nt!==null;){var e=nt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fi||Y_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fi)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:_l(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&bU(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}bU(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&cS(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}Fi||e.flags&512&&Z3(e)}catch(d){Dr(e,e.return,d)}}if(e===n){nt=null;break}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}}function MU(n){for(;nt!==null;){var e=nt;if(e===n){nt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,nt=t;break}nt=e.return}}function $U(n){for(;nt!==null;){var e=nt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Y_(4,e)}catch(l){Dr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Dr(e,s,l)}}var i=e.return;try{Z3(e)}catch(l){Dr(e,i,l)}break;case 5:var a=e.return;try{Z3(e)}catch(l){Dr(e,a,l)}}}catch(l){Dr(e,e.return,l)}if(e===n){nt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,nt=o;break}nt=e.return}}var she=Math.ceil,YA=Gh.ReactCurrentDispatcher,Y$=Gh.ReactCurrentOwner,hl=Gh.ReactCurrentBatchConfig,kn=0,qs=null,ts=null,fi=0,oo=0,vy=up(0),ks=0,bS=null,Cg=0,Z_=0,Z$=0,M1=null,Na=null,Q$=0,ax=1/0,Ou=null,ZA=!1,eL=null,yf=null,wE=!1,rf=null,QA=0,$1=0,tL=null,_I=-1,RI=0;function ta(){return kn&6?Gr():_I!==-1?_I:_I=Gr()}function vf(n){return n.mode&1?kn&2&&fi!==0?fi&-fi:Vue.transition!==null?(RI===0&&(RI=tq()),RI):(n=$n,n!==0||(n=window.event,n=n===void 0?16:lq(n.type)),n):1}function ec(n,e,t,r){if(50<$1)throw $1=0,tL=null,Error($e(185));Bk(n,t,r),(!(kn&2)||n!==qs)&&(n===qs&&(!(kn&2)&&(Z_|=t),ks===4&&kd(n,fi)),$a(n,r),t===1&&kn===0&&!(e.mode&1)&&(ax=Gr()+500,q_&&hp()))}function $a(n,e){var t=n.callbackNode;Vce(n,e);var r=OA(n,n===qs?fi:0);if(r===0)t!==null&&q6(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&q6(t),e===1)n.tag===0?Bue(zU.bind(null,n)):Iq(zU.bind(null,n)),Lue(function(){!(kn&6)&&hp()}),t=null;else{switch(nq(r)){case 1:t=C$;break;case 4:t=J7;break;case 16:t=PA;break;case 536870912:t=eq;break;default:t=PA}t=TK(t,vK.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function vK(n,e){if(_I=-1,RI=0,kn&6)throw Error($e(327));var t=n.callbackNode;if(_y()&&n.callbackNode!==t)return null;var r=OA(n,n===qs?fi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=JA(n,r);else{e=r;var s=kn;kn|=2;var i=bK();(qs!==n||fi!==e)&&(Ou=null,ax=Gr()+500,pg(n,e));do try{ohe();break}catch(o){xK(n,o)}while(!0);M$(),YA.current=i,kn=s,ts!==null?e=0:(qs=null,fi=0,e=ks)}if(e!==0){if(e===2&&(s=A3(n),s!==0&&(r=s,e=nL(n,s))),e===1)throw t=bS,pg(n,0),kd(n,r),$a(n,Gr()),t;if(e===6)kd(n,r);else{if(s=n.current.alternate,!(r&30)&&!ihe(s)&&(e=JA(n,r),e===2&&(i=A3(n),i!==0&&(r=i,e=nL(n,i))),e===1))throw t=bS,pg(n,0),kd(n,r),$a(n,Gr()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error($e(345));case 2:$p(n,Na,Ou);break;case 3:if(kd(n,r),(r&130023424)===r&&(e=Q$+500-Gr(),10<e)){if(OA(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){ta(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=L3($p.bind(null,n,Na,Ou),e);break}$p(n,Na,Ou);break;case 4:if(kd(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var a=31-Jl(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Gr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*she(r/1960))-r,10<r){n.timeoutHandle=L3($p.bind(null,n,Na,Ou),r);break}$p(n,Na,Ou);break;case 5:$p(n,Na,Ou);break;default:throw Error($e(329))}}}return $a(n,Gr()),n.callbackNode===t?vK.bind(null,n):null}function nL(n,e){var t=M1;return n.current.memoizedState.isDehydrated&&(pg(n,e).flags|=256),n=JA(n,e),n!==2&&(e=Na,Na=t,e!==null&&rL(e)),n}function rL(n){Na===null?Na=n:Na.push.apply(Na,n)}function ihe(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!ic(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kd(n,e){for(e&=~Z$,e&=~Z_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Jl(e),r=1<<t;n[t]=-1,e&=~r}}function zU(n){if(kn&6)throw Error($e(327));_y();var e=OA(n,0);if(!(e&1))return $a(n,Gr()),null;var t=JA(n,e);if(n.tag!==0&&t===2){var r=A3(n);r!==0&&(e=r,t=nL(n,r))}if(t===1)throw t=bS,pg(n,0),kd(n,e),$a(n,Gr()),t;if(t===6)throw Error($e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,$p(n,Na,Ou),$a(n,Gr()),null}function J$(n,e){var t=kn;kn|=1;try{return n(e)}finally{kn=t,kn===0&&(ax=Gr()+500,q_&&hp())}}function Tg(n){rf!==null&&rf.tag===0&&!(kn&6)&&_y();var e=kn;kn|=1;var t=hl.transition,r=$n;try{if(hl.transition=null,$n=1,n)return n()}finally{$n=r,hl.transition=t,kn=e,!(kn&6)&&hp()}}function e5(){oo=vy.current,ar(vy)}function pg(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Oue(t)),ts!==null)for(t=ts.return;t!==null;){var r=t;switch(P$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&BA();break;case 3:sx(),ar(La),ar(zi),U$();break;case 5:j$(r);break;case 4:sx();break;case 13:ar(kr);break;case 19:ar(kr);break;case 10:$$(r.type._context);break;case 22:case 23:e5()}t=t.return}if(qs=n,ts=n=xf(n.current,null),fi=oo=e,ks=0,bS=null,Z$=Z_=Cg=0,Na=M1=null,tm!==null){for(e=0;e<tm.length;e++)if(t=tm[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}t.pending=r}tm=null}return n}function xK(n,e){do{var t=ts;try{if(M$(),II.current=XA,KA){for(var r=Er.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}KA=!1}if(kg=0,js=vs=Er=null,O1=!1,yS=0,Y$.current=null,t===null||t.return===null){ks=1,bS=e,ts=null;break}e:{var i=n,a=t.return,o=t,l=e;if(e=fi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=EU(a);if(f!==null){f.flags&=-257,IU(f,a,o,i,e),f.mode&1&&TU(i,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){TU(i,c,e),t5();break e}l=Error($e(426))}}else if(pr&&o.mode&1){var y=EU(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),IU(y,a,o,i,e),O$(ix(l,o));break e}}i=l=ix(l,o),ks!==4&&(ks=2),M1===null?M1=[i]:M1.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=nK(i,l,e);xU(i,g);break e;case 1:o=l;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(yf===null||!yf.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=rK(i,o,e);xU(i,w);break e}}i=i.return}while(i!==null)}SK(t)}catch(C){e=C,ts===t&&t!==null&&(ts=t=t.return);continue}break}while(!0)}function bK(){var n=YA.current;return YA.current=XA,n===null?XA:n}function t5(){(ks===0||ks===3||ks===2)&&(ks=4),qs===null||!(Cg&268435455)&&!(Z_&268435455)||kd(qs,fi)}function JA(n,e){var t=kn;kn|=2;var r=bK();(qs!==n||fi!==e)&&(Ou=null,pg(n,e));do try{ahe();break}catch(s){xK(n,s)}while(!0);if(M$(),kn=t,YA.current=r,ts!==null)throw Error($e(261));return qs=null,fi=0,ks}function ahe(){for(;ts!==null;)wK(ts)}function ohe(){for(;ts!==null&&!Dce();)wK(ts)}function wK(n){var e=CK(n.alternate,n,oo);n.memoizedProps=n.pendingProps,e===null?SK(n):ts=e,Y$.current=null}function SK(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=ehe(t,e),t!==null){t.flags&=32767,ts=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ks=6,ts=null;return}}else if(t=Jue(t,e,oo),t!==null){ts=t;return}if(e=e.sibling,e!==null){ts=e;return}ts=e=n}while(e!==null);ks===0&&(ks=5)}function $p(n,e,t){var r=$n,s=hl.transition;try{hl.transition=null,$n=1,lhe(n,e,t,r)}finally{hl.transition=s,$n=r}return null}function lhe(n,e,t,r){do _y();while(rf!==null);if(kn&6)throw Error($e(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error($e(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(jce(n,i),n===qs&&(ts=qs=null,fi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||wE||(wE=!0,TK(PA,function(){return _y(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=hl.transition,hl.transition=null;var a=$n;$n=1;var o=kn;kn|=4,Y$.current=null,nhe(n,t),gK(t,n),Aue(P3),LA=!!F3,P3=F3=null,n.current=t,rhe(t),Fce(),kn=o,$n=a,hl.transition=i}else n.current=t;if(wE&&(wE=!1,rf=n,QA=s),i=n.pendingLanes,i===0&&(yf=null),Lce(t.stateNode),$a(n,Gr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(ZA)throw ZA=!1,n=eL,eL=null,n;return QA&1&&n.tag!==0&&_y(),i=n.pendingLanes,i&1?n===tL?$1++:($1=0,tL=n):$1=0,hp(),null}function _y(){if(rf!==null){var n=nq(QA),e=hl.transition,t=$n;try{if(hl.transition=null,$n=16>n?16:n,rf===null)var r=!1;else{if(n=rf,rf=null,QA=0,kn&6)throw Error($e(331));var s=kn;for(kn|=4,nt=n.current;nt!==null;){var i=nt,a=i.child;if(nt.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(nt=c;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:L1(8,u,i)}var h=u.child;if(h!==null)h.return=u,nt=h;else for(;nt!==null;){u=nt;var d=u.sibling,f=u.return;if(fK(u),u===c){nt=null;break}if(d!==null){d.return=f,nt=d;break}nt=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}nt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,nt=a;else e:for(;nt!==null;){if(i=nt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:L1(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,nt=g;break e}nt=i.return}}var v=n.current;for(nt=v;nt!==null;){a=nt;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,nt=b;else e:for(a=v;nt!==null;){if(o=nt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Y_(9,o)}}catch(C){Dr(o,o.return,C)}if(o===a){nt=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,nt=w;break e}nt=o.return}}if(kn=s,hp(),au&&typeof au.onPostCommitFiberRoot=="function")try{au.onPostCommitFiberRoot(j_,n)}catch{}r=!0}return r}finally{$n=t,hl.transition=e}}return!1}function BU(n,e,t){e=ix(t,e),e=nK(n,e,1),n=gf(n,e,1),e=ta(),n!==null&&(Bk(n,1,e),$a(n,e))}function Dr(n,e,t){if(n.tag===3)BU(n,n,t);else for(;e!==null;){if(e.tag===3){BU(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yf===null||!yf.has(r))){n=ix(t,n),n=rK(e,n,1),e=gf(e,n,1),n=ta(),e!==null&&(Bk(e,1,n),$a(e,n));break}}e=e.return}}function che(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ta(),n.pingedLanes|=n.suspendedLanes&t,qs===n&&(fi&t)===t&&(ks===4||ks===3&&(fi&130023424)===fi&&500>Gr()-Q$?pg(n,0):Z$|=t),$a(n,e)}function kK(n,e){e===0&&(n.mode&1?(e=hE,hE<<=1,!(hE&130023424)&&(hE=4194304)):e=1);var t=ta();n=_h(n,e),n!==null&&(Bk(n,e,t),$a(n,t))}function uhe(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),kK(n,t)}function hhe(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error($e(314))}r!==null&&r.delete(e),kK(n,t)}var CK;CK=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||La.current)Ra=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ra=!1,Que(n,e,t);Ra=!!(n.flags&131072)}else Ra=!1,pr&&e.flags&1048576&&Aq(e,UA,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;NI(n,e),n=e.pendingProps;var s=tx(e,zi.current);Ny(e,t),s=G$(null,e,r,n,s,t);var i=H$();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ma(r)?(i=!0,VA(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,B$(e),s.updater=X_,e.stateNode=s,s._reactInternals=e,U3(e,r,n,t),e=H3(null,e,r,!0,i,t)):(e.tag=0,pr&&i&&F$(e),Zi(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(NI(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fhe(r),n=_l(r,n),s){case 0:e=G3(null,e,r,n,t);break e;case 1:e=_U(null,e,r,n,t);break e;case 11:e=AU(null,e,r,n,t);break e;case 14:e=NU(null,e,r,_l(r.type,n),t);break e}throw Error($e(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_l(r,s),G3(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_l(r,s),_U(n,e,r,s,t);case 3:e:{if(oK(e),n===null)throw Error($e(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Pq(n,e),HA(e,r,null,t);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ix(Error($e(423)),e),e=RU(n,e,r,t,s);break e}else if(r!==s){s=ix(Error($e(424)),e),e=RU(n,e,r,t,s);break e}else for(po=mf(e.stateNode.containerInfo.firstChild),bo=e,pr=!0,Gl=null,t=Dq(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(nx(),r===s){e=Rh(n,e,t);break e}Zi(n,e,r,t)}e=e.child}return e;case 5:return Oq(e),n===null&&B3(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,a=s.children,O3(r,s)?a=null:i!==null&&O3(r,i)&&(e.flags|=32),aK(n,e),Zi(n,e,a,t),e.child;case 6:return n===null&&B3(e),null;case 13:return lK(n,e,t);case 4:return V$(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=rx(e,null,r,t):Zi(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_l(r,s),AU(n,e,r,s,t);case 7:return Zi(n,e,e.pendingProps,t),e.child;case 8:return Zi(n,e,e.pendingProps.children,t),e.child;case 12:return Zi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Qn(WA,r._currentValue),r._currentValue=a,i!==null)if(ic(i.value,a)){if(i.children===s.children&&!La.current){e=Rh(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=bh(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),V3(i.return,t,e),o.lanes|=t;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($e(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),V3(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Zi(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ny(e,t),s=ml(s),r=r(s),e.flags|=1,Zi(n,e,r,t),e.child;case 14:return r=e.type,s=_l(r,e.pendingProps),s=_l(r.type,s),NU(n,e,r,s,t);case 15:return sK(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_l(r,s),NI(n,e),e.tag=1,Ma(r)?(n=!0,VA(e)):n=!1,Ny(e,t),tK(e,r,s),U3(e,r,s,t),H3(null,e,r,!0,n,t);case 19:return cK(n,e,t);case 22:return iK(n,e,t)}throw Error($e(156,e.tag))};function TK(n,e){return Q7(n,e)}function dhe(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(n,e,t,r){return new dhe(n,e,t,r)}function n5(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fhe(n){if(typeof n=="function")return n5(n)?1:0;if(n!=null){if(n=n.$$typeof,n===w$)return 11;if(n===S$)return 14}return 2}function xf(n,e){var t=n.alternate;return t===null?(t=nl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function DI(n,e,t,r,s,i){var a=2;if(r=n,typeof n=="function")n5(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case ly:return mg(t.children,s,i,e);case b$:a=8,s|=8;break;case f3:return n=nl(12,t,e,s|2),n.elementType=f3,n.lanes=i,n;case p3:return n=nl(13,t,e,s),n.elementType=p3,n.lanes=i,n;case m3:return n=nl(19,t,e,s),n.elementType=m3,n.lanes=i,n;case O7:return Q_(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F7:a=10;break e;case P7:a=9;break e;case w$:a=11;break e;case S$:a=14;break e;case vd:a=16,r=null;break e}throw Error($e(130,n==null?n:typeof n,""))}return e=nl(a,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function mg(n,e,t,r){return n=nl(7,n,r,e),n.lanes=t,n}function Q_(n,e,t,r){return n=nl(22,n,r,e),n.elementType=O7,n.lanes=t,n.stateNode={isHidden:!1},n}function QP(n,e,t){return n=nl(6,n,null,e),n.lanes=t,n}function JP(n,e,t){return e=nl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function phe(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=FP(0),this.expirationTimes=FP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=FP(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function r5(n,e,t,r,s,i,a,o,l){return n=new phe(n,e,t,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nl(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},B$(i),n}function mhe(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oy,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function EK(n){if(!n)return Pf;n=n._reactInternals;e:{if(n0(n)!==n||n.tag!==1)throw Error($e(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ma(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($e(171))}if(n.tag===1){var t=n.type;if(Ma(t))return Eq(n,t,e)}return e}function IK(n,e,t,r,s,i,a,o,l){return n=r5(t,r,!0,n,s,i,a,o,l),n.context=EK(null),t=n.current,r=ta(),s=vf(t),i=bh(r,s),i.callback=e??null,gf(t,i,s),n.current.lanes=s,Bk(n,s,r),$a(n,r),n}function J_(n,e,t,r){var s=e.current,i=ta(),a=vf(s);return t=EK(t),e.context===null?e.context=t:e.pendingContext=t,e=bh(i,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=gf(s,e,a),n!==null&&(ec(n,s,a,i),EI(n,s,a)),a}function eN(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function VU(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function s5(n,e){VU(n,e),(n=n.alternate)&&VU(n,e)}function ghe(){return null}var AK=typeof reportError=="function"?reportError:function(n){console.error(n)};function i5(n){this._internalRoot=n}eR.prototype.render=i5.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error($e(409));J_(n,e,null,null)};eR.prototype.unmount=i5.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Tg(function(){J_(null,n,null,null)}),e[Nh]=null}};function eR(n){this._internalRoot=n}eR.prototype.unstable_scheduleHydration=function(n){if(n){var e=iq();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Sd.length&&e!==0&&e<Sd[t].priority;t++);Sd.splice(t,0,n),t===0&&oq(n)}};function a5(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function tR(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jU(){}function yhe(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=eN(a);i.call(c)}}var a=IK(e,r,n,0,null,!1,!1,"",jU);return n._reactRootContainer=a,n[Nh]=a.current,dS(n.nodeType===8?n.parentNode:n),Tg(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=eN(l);o.call(c)}}var l=r5(n,0,!1,null,null,!1,!1,"",jU);return n._reactRootContainer=l,n[Nh]=l.current,dS(n.nodeType===8?n.parentNode:n),Tg(function(){J_(e,l,t,r)}),l}function nR(n,e,t,r,s){var i=t._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=eN(a);o.call(l)}}J_(e,a,n,s)}else a=yhe(t,e,n,s,r);return eN(a)}rq=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Kw(e.pendingLanes);t!==0&&(T$(e,t|1),$a(e,Gr()),!(kn&6)&&(ax=Gr()+500,hp()))}break;case 13:Tg(function(){var r=_h(n,1);if(r!==null){var s=ta();ec(r,n,1,s)}}),s5(n,1)}};E$=function(n){if(n.tag===13){var e=_h(n,134217728);if(e!==null){var t=ta();ec(e,n,134217728,t)}s5(n,134217728)}};sq=function(n){if(n.tag===13){var e=vf(n),t=_h(n,e);if(t!==null){var r=ta();ec(t,n,e,r)}s5(n,e)}};iq=function(){return $n};aq=function(n,e){var t=$n;try{return $n=n,e()}finally{$n=t}};T3=function(n,e,t){switch(e){case"input":if(v3(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=H_(r);if(!s)throw Error($e(90));M7(r),v3(r,s)}}}break;case"textarea":z7(n,t);break;case"select":e=t.value,e!=null&&Ty(n,!!t.multiple,e,!1)}};H7=J$;q7=Tg;var vhe={usingClientEntryPoint:!1,Events:[jk,dy,H_,W7,G7,J$]},Tw={findFiberByHostInstance:em,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xhe={bundleType:Tw.bundleType,version:Tw.version,rendererPackageName:Tw.rendererPackageName,rendererConfig:Tw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gh.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Y7(n),n===null?null:n.stateNode},findFiberByHostInstance:Tw.findFiberByHostInstance||ghe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var SE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!SE.isDisabled&&SE.supportsFiber)try{j_=SE.inject(xhe),au=SE}catch{}}Do.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vhe;Do.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a5(e))throw Error($e(200));return mhe(n,e,null,t)};Do.createRoot=function(n,e){if(!a5(n))throw Error($e(299));var t=!1,r="",s=AK;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=r5(n,1,!1,null,null,t,!1,r,s),n[Nh]=e.current,dS(n.nodeType===8?n.parentNode:n),new i5(e)};Do.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error($e(188)):(n=Object.keys(n).join(","),Error($e(268,n)));return n=Y7(e),n=n===null?null:n.stateNode,n};Do.flushSync=function(n){return Tg(n)};Do.hydrate=function(n,e,t){if(!tR(e))throw Error($e(200));return nR(null,n,e,!0,t)};Do.hydrateRoot=function(n,e,t){if(!a5(n))throw Error($e(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",a=AK;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=IK(e,null,n,1,t??null,s,!1,i,a),n[Nh]=e.current,dS(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new eR(e)};Do.render=function(n,e,t){if(!tR(e))throw Error($e(200));return nR(null,n,e,!1,t)};Do.unmountComponentAtNode=function(n){if(!tR(n))throw Error($e(40));return n._reactRootContainer?(Tg(function(){nR(null,null,n,!1,function(){n._reactRootContainer=null,n[Nh]=null})}),!0):!1};Do.unstable_batchedUpdates=J$;Do.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!tR(t))throw Error($e(200));if(n==null||n._reactInternals===void 0)throw Error($e(38));return nR(n,e,t,!1,r)};Do.version="18.3.1-next-f1338f8080-20240426";function NK(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NK)}catch(n){console.error(n)}}NK(),N7.exports=Do;var bhe=N7.exports,UU=bhe;h3.createRoot=UU.createRoot,h3.hydrateRoot=UU.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var whe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const She=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ue=(n,e)=>{const t=Me.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},u)=>Me.createElement("svg",{ref:u,...whe,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${She(n)}`,o].join(" "),...c},[...e.map(([h,d])=>Me.createElement(h,d)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const khe=Ue("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Che=Ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const The=Ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=Ue("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=Ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ehe=Ue("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=Ue("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=Ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ihe=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ahe=Ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nhe=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=Ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rhe=Ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dhe=Ue("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fhe=Ue("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phe=Ue("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ohe=Ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=Ue("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lhe=Ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=Ue("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mhe=Ue("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=Ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=Ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $he=Ue("FileOutput",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 7V4a2 2 0 0 1 2-2 2 2 0 0 0-2 2",key:"1vk7w2"}],["path",{d:"M4.063 20.999a2 2 0 0 0 2 1L18 22a2 2 0 0 0 2-2V7l-5-5H6",key:"1jink5"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zhe=Ue("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=Ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bhe=Ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=Ue("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=Ue("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=Ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=Ue("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vhe=Ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jhe=Ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uhe=Ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=Ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Whe=Ue("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=Ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ghe=Ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hhe=Ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qhe=Ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=Ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Khe=Ue("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=Ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xhe=Ue("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yhe=Ue("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zhe=Ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qhe=Ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=Ue("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=Ue("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jhe=Ue("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ede=Ue("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tde=Ue("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=Ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nde=Ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rde=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sde=Ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ide=Ue("SeparatorHorizontal",[["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["polyline",{points:"8 8 12 4 16 8",key:"zo8t4w"}],["polyline",{points:"16 16 12 20 8 16",key:"1oyrid"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ade=Ue("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ode=Ue("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lde=Ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cde=Ue("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=Ue("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=Ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ude=Ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hde=Ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=Ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dde=Ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fde=Ue("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pde=Ue("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=Ue("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=Ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mde=Ue("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function $K(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=$K(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function gde(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=$K(n))&&(r&&(r+=" "),r+=e);return r}const d5="-",yde=n=>{const e=xde(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const o=a.split(d5);return o[0]===""&&o.length!==1&&o.shift(),zK(o,e)||vde(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},zK=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?zK(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(d5);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},ZU=/^\[(.+)\]$/,vde=n=>{if(ZU.test(n)){const e=ZU.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},xde=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return wde(Object.entries(n.classGroups),t).forEach(([i,a])=>{aL(a,r,i,e)}),r},aL=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:QU(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(bde(s)){aL(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{aL(a,QU(e,i),t,r)})})},QU=(n,e)=>{let t=n;return e.split(d5).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},bde=n=>n.isThemeGetter,wde=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[t,s]}):n,Sde=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},BK="!",kde=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,a=o=>{const l=[];let c=0,u=0,h;for(let y=0;y<o.length;y++){let g=o[y];if(c===0){if(g===s&&(r||o.slice(y,y+i)===e)){l.push(o.slice(u,y)),u=y+i;continue}if(g==="/"){h=y;continue}}g==="["?c++:g==="]"&&c--}const d=l.length===0?o:o.substring(u),f=d.startsWith(BK),p=f?d.substring(1):d,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}};return t?o=>t({className:o,parseClassName:a}):a},Cde=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Tde=n=>({cache:Sde(n.cacheSize),parseClassName:kde(n),...yde(n)}),Ede=/\s+/,Ide=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=n.trim().split(Ede);let o="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:u,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:f}=t(c);let p=!!f,m=r(p?d.substring(0,f):d);if(!m){if(!p){o=c+(o.length>0?" "+o:o);continue}if(m=r(d),!m){o=c+(o.length>0?" "+o:o);continue}p=!1}const y=Cde(u).join(":"),g=h?y+BK:y,v=g+m;if(i.includes(v))continue;i.push(v);const b=s(m,p);for(let w=0;w<b.length;++w){const C=b[w];i.push(g+C)}o=c+(o.length>0?" "+o:o)}return o};function Ade(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=VK(e))&&(r&&(r+=" "),r+=t);return r}const VK=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=VK(n[r]))&&(t&&(t+=" "),t+=e);return t};function Nde(n,...e){let t,r,s,i=a;function a(l){const c=e.reduce((u,h)=>h(u),n());return t=Tde(c),r=t.cache.get,s=t.cache.set,i=o,o(l)}function o(l){const c=r(l);if(c)return c;const u=Ide(l,t);return s(l,u),u}return function(){return i(Ade.apply(null,arguments))}}const nr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},jK=/^\[(?:([a-z-]+):)?(.+)\]$/i,_de=/^\d+\/\d+$/,Rde=new Set(["px","full","screen"]),Dde=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fde=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pde=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ode=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Lde=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_u=n=>Dy(n)||Rde.has(n)||_de.test(n),hd=n=>Px(n,"length",Wde),Dy=n=>!!n&&!Number.isNaN(Number(n)),tO=n=>Px(n,"number",Dy),Ew=n=>!!n&&Number.isInteger(Number(n)),Mde=n=>n.endsWith("%")&&Dy(n.slice(0,-1)),Wt=n=>jK.test(n),dd=n=>Dde.test(n),$de=new Set(["length","size","percentage"]),zde=n=>Px(n,$de,UK),Bde=n=>Px(n,"position",UK),Vde=new Set(["image","url"]),jde=n=>Px(n,Vde,Hde),Ude=n=>Px(n,"",Gde),Iw=()=>!0,Px=(n,e,t)=>{const r=jK.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Wde=n=>Fde.test(n)&&!Pde.test(n),UK=()=>!1,Gde=n=>Ode.test(n),Hde=n=>Lde.test(n),qde=()=>{const n=nr("colors"),e=nr("spacing"),t=nr("blur"),r=nr("brightness"),s=nr("borderColor"),i=nr("borderRadius"),a=nr("borderSpacing"),o=nr("borderWidth"),l=nr("contrast"),c=nr("grayscale"),u=nr("hueRotate"),h=nr("invert"),d=nr("gap"),f=nr("gradientColorStops"),p=nr("gradientColorStopPositions"),m=nr("inset"),y=nr("margin"),g=nr("opacity"),v=nr("padding"),b=nr("saturate"),w=nr("scale"),C=nr("sepia"),I=nr("skew"),T=nr("space"),E=nr("translate"),A=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Wt,e],_=()=>[Wt,e],D=()=>["",_u,hd],R=()=>["auto",Dy,Wt],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Wt],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Dy,Wt];return{cacheSize:500,separator:":",theme:{colors:[Iw],spacing:[_u,hd],blur:["none","",dd,Wt],brightness:q(),borderColor:[n],borderRadius:["none","","full",dd,Wt],borderSpacing:_(),borderWidth:D(),contrast:q(),grayscale:H(),hueRotate:q(),invert:H(),gap:_(),gradientColorStops:[n],gradientColorStopPositions:[Mde,hd],inset:F(),margin:F(),opacity:q(),padding:_(),saturate:q(),scale:q(),sepia:H(),skew:q(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",Wt]}],container:["container"],columns:[{columns:[dd]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Wt]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ew,Wt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wt]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Ew,Wt]}],"grid-cols":[{"grid-cols":[Iw]}],"col-start-end":[{col:["auto",{span:["full",Ew,Wt]},Wt]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Iw]}],"row-start-end":[{row:["auto",{span:[Ew,Wt]},Wt]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wt]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wt,e]}],"min-w":[{"min-w":[Wt,e,"min","max","fit"]}],"max-w":[{"max-w":[Wt,e,"none","full","min","max","fit","prose",{screen:[dd]},dd]}],h:[{h:[Wt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",dd,hd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tO]}],"font-family":[{font:[Iw]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wt]}],"line-clamp":[{"line-clamp":["none",Dy,tO]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_u,Wt]}],"list-image":[{"list-image":["none",Wt]}],"list-style-type":[{list:["none","disc","decimal",Wt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_u,hd]}],"underline-offset":[{"underline-offset":["auto",_u,Wt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),Bde]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zde]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jde]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[_u,Wt]}],"outline-w":[{outline:[_u,hd]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[_u,hd]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",dd,Ude]}],"shadow-color":[{shadow:[Iw]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",dd,Wt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wt]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Wt]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Ew,Wt]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[_u,hd,tO]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Kde=Nde(qde);function ln(...n){return Kde(gde(n))}const Cs=Me.forwardRef(({className:n,variant:e="primary",size:t="default",...r},s)=>{const i={primary:"bg-primary hover:bg-primaryHover text-white shadow-[0_0_20px_rgba(139,92,246,0.5)] hover:shadow-[0_0_30px_rgba(139,92,246,0.7)]",secondary:"bg-surfaceHighlight hover:bg-slate-700 text-white border border-slate-700",outline:"bg-transparent border border-primary text-primary hover:bg-primary/10",ghost:"bg-transparent hover:bg-white/5 text-slate-300 hover:text-white",danger:"bg-red-500/10 text-red-500 hover:bg-red-500/20 border border-red-500/20"},a={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-md px-8 text-lg",icon:"h-10 w-10 p-2 flex items-center justify-center"};return k.jsx("button",{ref:s,className:ln("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 active:scale-95",i[e],a[t],n),...r})});Cs.displayName="Button";const WK=Me.createContext();function Xde({children:n}){const[e,t]=Me.useState(()=>typeof window<"u"&&localStorage.getItem("notesforge-theme")||"dark");Me.useEffect(()=>{const i=document.documentElement;e==="light"?(i.classList.add("light-mode"),i.classList.remove("dark-mode")):(i.classList.add("dark-mode"),i.classList.remove("light-mode")),localStorage.setItem("notesforge-theme",e)},[e]);const s={theme:e,setTheme:t,toggleTheme:()=>{t(i=>i==="dark"?"light":"dark")},isDark:e==="dark",isLight:e==="light"};return k.jsx(WK.Provider,{value:s,children:n})}function Nr(){const n=Me.useContext(WK);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n}function Yde({currentPage:n,onNavigate:e}){const[t,r]=Me.useState(!1),[s,i]=Me.useState(!1),{theme:a,toggleTheme:o,isLight:l}=Nr();Me.useEffect(()=>{const h=()=>r(window.scrollY>20);return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[]);const c=[{id:"home",label:"Home",icon:Vhe},{id:"about",label:"About",icon:jhe},{id:"help",label:"Help",icon:o5},{id:"support",label:"Support",icon:bf}],u=()=>{e("home"),window.scrollTo(0,0)};return k.jsxs("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${l?t?"bg-white/95 border-b border-slate-200 shadow-sm backdrop-blur-sm":"bg-white border-b border-transparent":t?"bg-slate-950/95 backdrop-blur-xl border-b border-white/10 shadow-lg shadow-black/20":"bg-slate-950/95 backdrop-blur-md"}`,children:[k.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[k.jsxs("button",{onClick:u,className:"flex items-center gap-3 group",children:[k.jsxs("div",{className:"relative",children:[k.jsx("div",{className:`absolute inset-0 rounded-xl blur-lg transition-opacity ${l?"opacity-0":"bg-gradient-to-r from-blue-500 to-violet-500 opacity-50 group-hover:opacity-80"}`}),k.jsx("img",{src:"/logo-new.jpg",alt:"NotesForge Logo",className:`relative w-10 h-10 rounded-xl object-cover ${l?"shadow-sm border border-slate-200":""}`})]}),k.jsxs("div",{className:"flex flex-col leading-none",children:[k.jsx("span",{className:`text-lg font-bold ${l?"text-slate-900":"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-violet-400 to-cyan-400"}`,children:"NotesForge"}),k.jsx("span",{className:"text-[8px] tracking-wider font-medium text-slate-500",children:"FREE  PRIVATE  INSTANT"})]})]}),k.jsx("nav",{className:`hidden md:flex items-center gap-1 rounded-full px-1.5 py-1 ${l?"":"bg-slate-800/40 border border-white/5"}`,children:c.map(h=>k.jsxs("button",{onClick:()=>e(h.id),className:`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-all ${l?n===h.id?"bg-slate-100 text-slate-900 font-semibold":"text-slate-600 hover:text-slate-900 hover:bg-slate-50":n===h.id?"bg-gradient-to-r from-blue-500/20 to-violet-500/20 text-white border border-white/10":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[k.jsx(h.icon,{className:"w-3.5 h-3.5"}),k.jsx("span",{children:h.label})]},h.id))}),k.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[k.jsx("button",{onClick:o,className:`p-2.5 rounded-xl transition-all ${l?"text-slate-500 hover:text-slate-900 hover:bg-slate-100":"bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white border border-white/10"}`,title:l?"Switch to Dark Mode":"Switch to Light Mode",children:l?k.jsx(KU,{className:"w-4 h-4"}):k.jsx(YU,{className:"w-4 h-4"})}),k.jsxs(Cs,{onClick:()=>e("upload"),className:`flex items-center gap-2 px-5 py-2.5 ${l?"bg-slate-900 hover:bg-slate-800 text-white shadow-md shadow-slate-200":"bg-gradient-to-r from-blue-600 to-violet-600 hover:from-blue-500 hover:to-violet-500 shadow-lg shadow-violet-500/25"}`,children:[k.jsx(nN,{className:"w-4 h-4"}),"Start Forging"]})]}),k.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[k.jsx("button",{onClick:o,className:`p-2 rounded-xl transition-colors ${l?"bg-slate-100 text-slate-600":"bg-slate-800/50 text-slate-300 border border-white/10"}`,children:l?k.jsx(KU,{className:"w-4 h-4"}):k.jsx(YU,{className:"w-4 h-4"})}),k.jsx("button",{className:`p-2 rounded-xl transition-colors ${l?"bg-slate-100 text-slate-900":"bg-slate-800/50 border border-white/10 text-slate-300 hover:text-white"}`,onClick:()=>i(!s),children:s?k.jsx(wS,{className:"w-5 h-5"}):k.jsx(Hhe,{className:"w-5 h-5"})})]})]}),s&&k.jsxs("div",{className:`md:hidden absolute top-full left-0 right-0 p-4 border-b ${l?"bg-white border-slate-200 shadow-lg":"bg-slate-950/98 backdrop-blur-xl border-white/10"}`,children:[k.jsx("div",{className:"space-y-1",children:c.map(h=>k.jsxs("button",{onClick:()=>{e(h.id),i(!1)},className:`flex items-center gap-3 w-full text-left p-3 rounded-xl text-sm font-medium transition-all ${l?n===h.id?"bg-slate-100 text-slate-900":"text-slate-600 hover:text-slate-900 hover:bg-slate-50":n===h.id?"bg-gradient-to-r from-blue-500/20 to-violet-500/20 text-white":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[k.jsx(h.icon,{className:"w-4 h-4"}),k.jsx("span",{children:h.label})]},h.id))}),k.jsx("div",{className:`pt-3 mt-3 border-t ${l?"border-slate-100":"border-white/10"}`,children:k.jsxs(Cs,{className:`w-full flex items-center justify-center gap-2 ${l?"bg-slate-900 hover:bg-slate-800":""}`,onClick:()=>{e("upload"),i(!1)},children:[k.jsx(nN,{className:"w-4 h-4"}),"Start Forging"]})})]})]})}function Zde({onNavigate:n}){const e=new Date().getFullYear(),{isLight:t}=Nr(),r=()=>{n&&n("home"),setTimeout(()=>{const a=document.getElementById("how-it-works");a&&a.scrollIntoView({behavior:"smooth"})},100)},s=[{icon:Whe,href:"https://www.linkedin.com/in/abhay-kumar-81b2a8288/",label:"LinkedIn"},{icon:Ghe,href:"mailto:abhayk7481@gmail.com",label:"Email"}],i=[{icon:rl,text:"Privacy First",color:"emerald"},{icon:Ig,text:"100% Free",color:"blue"},{icon:u5,text:"No Login",color:"amber"}];return k.jsxs("footer",{className:`mt-auto border-t ${t?"bg-slate-50 border-slate-200":"bg-slate-950 border-white/5"}`,children:[k.jsx("div",{className:"w-full max-w-7xl mx-auto px-6 py-8",children:k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-8 lg:gap-6",children:[k.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:`w-9 h-9 rounded-lg overflow-hidden p-0.5 flex-shrink-0 ${t?"bg-white border border-slate-200 shadow-sm":"bg-slate-900 border border-white/10"}`,children:k.jsx("img",{src:"/logo-new.jpg",alt:"NotesForge",className:"w-full h-full object-cover rounded"})}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{className:`text-lg font-bold bg-clip-text text-transparent leading-none ${t?"bg-gradient-to-r from-slate-700 to-slate-900":"bg-gradient-to-r from-blue-400 via-violet-400 to-cyan-400"}`,children:"NotesForge"}),k.jsx("span",{className:"text-[8px] font-bold tracking-[0.15em] uppercase text-slate-500",children:"Free  Private  Instant"})]})]}),k.jsx("p",{className:`text-xs leading-relaxed max-w-xs ${t?"text-slate-500":"text-slate-400"}`,children:"Transform dark lecture slides into print-ready documents. 100% privacy-focused  all processing in your browser."}),k.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((a,o)=>k.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-medium ${t?"bg-white border border-slate-200 text-slate-600 shadow-sm":"bg-slate-900 border border-slate-800 text-slate-300"}`,children:[k.jsx(a.icon,{className:`w-3 h-3 ${a.color==="emerald"?"text-emerald-500":a.color==="blue"?"text-blue-500":"text-amber-500"}`}),a.text]},o))})]}),k.jsxs("div",{children:[k.jsx("h4",{className:`text-xs font-semibold mb-3 uppercase tracking-wider ${t?"text-slate-900":"text-white"}`,children:"Quick Links"}),k.jsxs("ul",{className:"space-y-2",children:[k.jsx("li",{children:k.jsx("button",{onClick:()=>n==null?void 0:n("about"),className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"About Us"})}),k.jsx("li",{children:k.jsx("button",{onClick:()=>n==null?void 0:n("blog"),className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"Blog & Tech"})}),k.jsx("li",{children:k.jsx("button",{onClick:r,className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"How it Works"})}),k.jsx("li",{children:k.jsx("button",{onClick:()=>n==null?void 0:n("support"),className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"Support Us"})}),k.jsx("li",{children:k.jsx("button",{onClick:()=>n==null?void 0:n("contact"),className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"Contact / Feedback"})})]})]}),k.jsxs("div",{children:[k.jsx("h4",{className:`text-xs font-semibold mb-3 uppercase tracking-wider ${t?"text-slate-900":"text-white"}`,children:"Legal"}),k.jsxs("ul",{className:"space-y-2",children:[k.jsx("li",{children:k.jsx("button",{onClick:()=>n==null?void 0:n("terms"),className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"Terms & Conditions"})}),k.jsx("li",{children:k.jsx("button",{onClick:()=>n==null?void 0:n("privacy"),className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"Privacy Policy"})}),k.jsx("li",{children:k.jsx("button",{onClick:()=>n==null?void 0:n("refund"),className:`text-xs transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:"Refund Policy"})})]})]}),k.jsxs("div",{children:[k.jsx("h4",{className:`text-xs font-semibold mb-3 uppercase tracking-wider ${t?"text-slate-900":"text-white"}`,children:"Connect"}),k.jsx("div",{className:"flex gap-2 mb-3",children:s.map((a,o)=>k.jsx("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${t?"bg-white border border-slate-200 text-slate-500 hover:text-violet-600 hover:border-violet-300 shadow-sm":"bg-slate-900 border border-slate-800 text-slate-400 hover:text-white hover:bg-violet-600/20 hover:border-violet-500/30"}`,title:a.label,children:k.jsx(a.icon,{className:"w-4 h-4"})},o))}),k.jsx("p",{className:"text-[10px] text-slate-500",children:"Reach out via social links above"})]})]})}),k.jsx("div",{className:`border-t py-4 px-6 ${t?"border-slate-200":"border-white/5"}`,children:k.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-2",children:[k.jsxs("p",{className:"text-[11px] text-slate-500",children:[" ",e," NotesForge. All rights reserved."]}),k.jsxs("p",{className:"text-[11px] flex items-center gap-1 text-slate-500",children:["Made with ",k.jsx(bf,{className:"w-3 h-3 text-red-500"})," by"," ",k.jsx("a",{href:"https://www.linkedin.com/in/abhay-kumar-81b2a8288/",target:"_blank",rel:"noopener noreferrer",className:`font-medium transition-colors ${t?"text-slate-700 hover:text-violet-600":"text-white hover:text-violet-400"}`,children:"Abhay Kumar"})]})]})})]})}function Qde({onAccept:n,onDecline:e}){const[t,r]=Me.useState(!1),{isLight:s}=Nr();Me.useEffect(()=>{if(!localStorage.getItem("cookie_consent")){const l=setTimeout(()=>r(!0),1500);return()=>clearTimeout(l)}},[]);const i=()=>{localStorage.setItem("cookie_consent","accepted"),r(!1),n&&n()},a=()=>{localStorage.setItem("cookie_consent","declined"),r(!1),e&&e()};return t?k.jsx("div",{className:`fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 p-5 rounded-2xl border shadow-2xl z-50 transition-all duration-300 transform translate-y-0 ${s?"bg-white border-slate-200":"bg-slate-900 border-white/10"}`,children:k.jsxs("div",{className:"flex items-start gap-4",children:[k.jsx("div",{className:`p-2 rounded-xl flex-shrink-0 ${s?"bg-violet-100 text-violet-600":"bg-violet-500/20 text-violet-400"}`,children:k.jsx(Phe,{className:"w-6 h-6"})}),k.jsxs("div",{className:"flex-1",children:[k.jsx("h3",{className:`font-bold mb-1 ${s?"text-slate-900":"text-white"}`,children:"We use cookies"}),k.jsx("p",{className:`text-xs mb-4 leading-relaxed ${s?"text-slate-600":"text-slate-400"}`,children:"We use cookies to improve your experience."}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx("button",{onClick:i,className:`flex-1 px-4 py-2 rounded-lg text-xs font-bold transition-colors ${s?"bg-violet-600 hover:bg-violet-700 text-white":"bg-violet-600 hover:bg-violet-500 text-white"}`,children:"Accept"}),k.jsx("button",{onClick:a,className:`flex-1 px-4 py-2 rounded-lg text-xs font-bold border transition-colors ${s?"border-slate-200 text-slate-600 hover:bg-slate-50":"border-white/10 text-slate-400 hover:bg-white/5"}`,children:"Decline"})]})]}),k.jsx("button",{onClick:()=>r(!1),className:`p-1 rounded-lg transition-colors ${s?"hover:bg-slate-100 text-slate-400":"hover:bg-white/5 text-slate-500"}`,children:k.jsx(wS,{className:"w-4 h-4"})})]})}):null}function Jde({children:n,currentPage:e,onNavigate:t}){const{isLight:r}=Nr();return k.jsxs("div",{className:`min-h-screen relative overflow-hidden font-sans flex flex-col ${r?"bg-white selection:bg-slate-200 selection:text-slate-900":"bg-background selection:bg-primary/30 selection:text-white"}`,children:[!r&&k.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[k.jsx("div",{className:"absolute top-0 left-1/4 w-[500px] h-[500px] bg-violet-600/10 rounded-full blur-[100px]"}),k.jsx("div",{className:"absolute bottom-0 right-1/4 w-[400px] h-[400px] bg-fuchsia-600/8 rounded-full blur-[100px]"})]}),!r&&k.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.01]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),k.jsx(Yde,{currentPage:e,onNavigate:t}),k.jsx("main",{className:"flex-1 container mx-auto px-4 pt-20 pb-6 relative z-10",children:n}),k.jsx(Zde,{onNavigate:t}),k.jsx(Qde,{})]})}var GK={exports:{}},efe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tfe=efe,nfe=tfe;function HK(){}function qK(){}qK.resetWarningCache=HK;var rfe=function(){function n(r,s,i,a,o,l){if(l!==nfe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qK,resetWarningCache:HK};return t.PropTypes=t,t};GK.exports=rfe();var sfe=GK.exports;const Gn=$k(sfe);function r0(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})}const ife=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function lx(n,e,t){const r=afe(n),{webkitRelativePath:s}=n,i=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${n.name}`;return typeof r.path!="string"&&JU(r,"path",i),JU(r,"relativePath",i),r}function afe(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const r=e.split(".").pop().toLowerCase(),s=ife.get(r);s&&Object.defineProperty(n,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return n}function JU(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const ofe=[".DS_Store","Thumbs.db"];function lfe(n){return r0(this,void 0,void 0,function*(){return rN(n)&&cfe(n.dataTransfer)?ffe(n.dataTransfer,n.type):ufe(n)?hfe(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?dfe(n):[]})}function cfe(n){return rN(n)}function ufe(n){return rN(n)&&rN(n.target)}function rN(n){return typeof n=="object"&&n!==null}function hfe(n){return oL(n.target.files).map(e=>lx(e))}function dfe(n){return r0(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>lx(t))})}function ffe(n,e){return r0(this,void 0,void 0,function*(){if(n.items){const t=oL(n.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(pfe));return e8(KK(r))}return e8(oL(n.files).map(t=>lx(t)))})}function e8(n){return n.filter(e=>ofe.indexOf(e.name)===-1)}function oL(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const r=n[t];e.push(r)}return e}function pfe(n){if(typeof n.webkitGetAsEntry!="function")return t8(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?XK(e):t8(n,e)}function KK(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?KK(t):[t]],[])}function t8(n,e){return r0(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const i=yield n.getAsFileSystemHandle();if(i===null)throw new Error(`${n} is not a File`);if(i!==void 0){const a=yield i.getFile();return a.handle=i,lx(a)}}const r=n.getAsFile();if(!r)throw new Error(`${n} is not a File`);return lx(r,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function mfe(n){return r0(this,void 0,void 0,function*(){return n.isDirectory?XK(n):gfe(n)})}function XK(n){const e=n.createReader();return new Promise((t,r)=>{const s=[];function i(){e.readEntries(a=>r0(this,void 0,void 0,function*(){if(a.length){const o=Promise.all(a.map(mfe));s.push(o),i()}else try{const o=yield Promise.all(s);t(o)}catch(o){r(o)}}),a=>{r(a)})}i()})}function gfe(n){return r0(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(r=>{const s=lx(r,n.fullPath);e(s)},r=>{t(r)})})})}var nO=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",s=(n.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return t.some(function(a){var o=a.trim().toLowerCase();return o.charAt(0)==="."?r.toLowerCase().endsWith(o):o.endsWith("/*")?i===o.replace(/\/.*$/,""):s===o})}return!0};function n8(n){return xfe(n)||vfe(n)||ZK(n)||yfe()}function yfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vfe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xfe(n){if(Array.isArray(n))return lL(n)}function r8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function s8(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r8(Object(t),!0).forEach(function(r){YK(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function YK(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SS(n,e){return Sfe(n)||wfe(n,e)||ZK(n,e)||bfe()}function bfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZK(n,e){if(n){if(typeof n=="string")return lL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lL(n,e)}}function lL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function wfe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],s=!0,i=!1,a,o;try{for(t=t.call(n);!(s=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));s=!0);}catch(l){i=!0,o=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(i)throw o}}return r}}function Sfe(n){if(Array.isArray(n))return n}var kfe=typeof nO=="function"?nO:nO.default,Cfe="file-invalid-type",Tfe="file-too-large",Efe="file-too-small",Ife="too-many-files",Afe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:Cfe,message:"File type must be ".concat(r)}},i8=function(e){return{code:Tfe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},a8=function(e){return{code:Efe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Nfe={code:Ife,message:"Too many files"};function QK(n,e){var t=n.type==="application/x-moz-file"||kfe(n,e);return[t,t?null:Afe(e)]}function JK(n,e,t){if(Gp(n.size))if(Gp(e)&&Gp(t)){if(n.size>t)return[!1,i8(t)];if(n.size<e)return[!1,a8(e)]}else{if(Gp(e)&&n.size<e)return[!1,a8(e)];if(Gp(t)&&n.size>t)return[!1,i8(t)]}return[!0,null]}function Gp(n){return n!=null}function _fe(n){var e=n.files,t=n.accept,r=n.minSize,s=n.maxSize,i=n.multiple,a=n.maxFiles,o=n.validator;return!i&&e.length>1||i&&a>=1&&e.length>a?!1:e.every(function(l){var c=QK(l,t),u=SS(c,1),h=u[0],d=JK(l,r,s),f=SS(d,1),p=f[0],m=o?o(l):null;return h&&p&&!m})}function sN(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function kE(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function o8(n){n.preventDefault()}function Rfe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Dfe(n){return n.indexOf("Edge/")!==-1}function Ffe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Rfe(n)||Dfe(n)}function kc(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return e.some(function(o){return!sN(r)&&o&&o.apply(void 0,[r].concat(i)),sN(r)})}}function Pfe(){return"showOpenFilePicker"in window}function Ofe(n){if(Gp(n)){var e=Object.entries(n).filter(function(t){var r=SS(t,2),s=r[0],i=r[1],a=!0;return eX(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(i)||!i.every(tX))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(t,r){var s=SS(r,2),i=s[0],a=s[1];return s8(s8({},t),{},YK({},i,a))},{});return[{description:"Files",accept:e}]}return n}function Lfe(n){if(Gp(n))return Object.entries(n).reduce(function(e,t){var r=SS(t,2),s=r[0],i=r[1];return[].concat(n8(e),[s],n8(i))},[]).filter(function(e){return eX(e)||tX(e)}).join(",")}function Mfe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function $fe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function eX(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function tX(n){return/^.*\.[\w]+$/.test(n)}var zfe=["children"],Bfe=["open"],Vfe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],jfe=["refKey","onChange","onClick"];function Ufe(n){return Hfe(n)||Gfe(n)||nX(n)||Wfe()}function Wfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gfe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Hfe(n){if(Array.isArray(n))return cL(n)}function rO(n,e){return Xfe(n)||Kfe(n,e)||nX(n,e)||qfe()}function qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nX(n,e){if(n){if(typeof n=="string")return cL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cL(n,e)}}function cL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Kfe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],s=!0,i=!1,a,o;try{for(t=t.call(n);!(s=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));s=!0);}catch(l){i=!0,o=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(i)throw o}}return r}}function Xfe(n){if(Array.isArray(n))return n}function l8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Sr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l8(Object(t),!0).forEach(function(r){uL(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function uL(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iN(n,e){if(n==null)return{};var t=Yfe(n,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Yfe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var f5=Me.forwardRef(function(n,e){var t=n.children,r=iN(n,zfe),s=FI(r),i=s.open,a=iN(s,Bfe);return Me.useImperativeHandle(e,function(){return{open:i}},[i]),V_.createElement(Me.Fragment,null,t(Sr(Sr({},a),{},{open:i})))});f5.displayName="Dropzone";var rX={disabled:!1,getFilesFromEvent:lfe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};f5.defaultProps=rX;f5.propTypes={children:Gn.func,accept:Gn.objectOf(Gn.arrayOf(Gn.string)),multiple:Gn.bool,preventDropOnDocument:Gn.bool,noClick:Gn.bool,noKeyboard:Gn.bool,noDrag:Gn.bool,noDragEventsBubbling:Gn.bool,minSize:Gn.number,maxSize:Gn.number,maxFiles:Gn.number,disabled:Gn.bool,getFilesFromEvent:Gn.func,onFileDialogCancel:Gn.func,onFileDialogOpen:Gn.func,useFsAccessApi:Gn.bool,autoFocus:Gn.bool,onDragEnter:Gn.func,onDragLeave:Gn.func,onDragOver:Gn.func,onDrop:Gn.func,onDropAccepted:Gn.func,onDropRejected:Gn.func,onError:Gn.func,validator:Gn.func};var hL={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function FI(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Sr(Sr({},rX),n),t=e.accept,r=e.disabled,s=e.getFilesFromEvent,i=e.maxSize,a=e.minSize,o=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,d=e.onDrop,f=e.onDropAccepted,p=e.onDropRejected,m=e.onFileDialogCancel,y=e.onFileDialogOpen,g=e.useFsAccessApi,v=e.autoFocus,b=e.preventDropOnDocument,w=e.noClick,C=e.noKeyboard,I=e.noDrag,T=e.noDragEventsBubbling,E=e.onError,A=e.validator,N=Me.useMemo(function(){return Lfe(t)},[t]),F=Me.useMemo(function(){return Ofe(t)},[t]),_=Me.useMemo(function(){return typeof y=="function"?y:c8},[y]),D=Me.useMemo(function(){return typeof m=="function"?m:c8},[m]),R=Me.useRef(null),B=Me.useRef(null),z=Me.useReducer(Zfe,hL),W=rO(z,2),K=W[0],H=W[1],se=K.isFocused,q=K.isFileDialogActive,X=Me.useRef(typeof window<"u"&&window.isSecureContext&&g&&Pfe()),fe=function(){!X.current&&q&&setTimeout(function(){if(B.current){var pe=B.current.files;pe.length||(H({type:"closeDialog"}),D())}},300)};Me.useEffect(function(){return window.addEventListener("focus",fe,!1),function(){window.removeEventListener("focus",fe,!1)}},[B,q,D,X]);var de=Me.useRef([]),ue=function(pe){R.current&&R.current.contains(pe.target)||(pe.preventDefault(),de.current=[])};Me.useEffect(function(){return b&&(document.addEventListener("dragover",o8,!1),document.addEventListener("drop",ue,!1)),function(){b&&(document.removeEventListener("dragover",o8),document.removeEventListener("drop",ue))}},[R,b]),Me.useEffect(function(){return!r&&v&&R.current&&R.current.focus(),function(){}},[R,v,r]);var Ce=Me.useCallback(function(ce){E?E(ce):console.error(ce)},[E]),Ae=Me.useCallback(function(ce){ce.preventDefault(),ce.persist(),we(ce),de.current=[].concat(Ufe(de.current),[ce.target]),kE(ce)&&Promise.resolve(s(ce)).then(function(pe){if(!(sN(ce)&&!T)){var Ie=pe.length,je=Ie>0&&_fe({files:pe,accept:N,minSize:a,maxSize:i,multiple:o,maxFiles:l,validator:A}),Pe=Ie>0&&!je;H({isDragAccept:je,isDragReject:Pe,isDragActive:!0,type:"setDraggedFiles"}),c&&c(ce)}}).catch(function(pe){return Ce(pe)})},[s,c,Ce,T,N,a,i,o,l,A]),Ee=Me.useCallback(function(ce){ce.preventDefault(),ce.persist(),we(ce);var pe=kE(ce);if(pe&&ce.dataTransfer)try{ce.dataTransfer.dropEffect="copy"}catch{}return pe&&h&&h(ce),!1},[h,T]),Le=Me.useCallback(function(ce){ce.preventDefault(),ce.persist(),we(ce);var pe=de.current.filter(function(je){return R.current&&R.current.contains(je)}),Ie=pe.indexOf(ce.target);Ie!==-1&&pe.splice(Ie,1),de.current=pe,!(pe.length>0)&&(H({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),kE(ce)&&u&&u(ce))},[R,u,T]),Ke=Me.useCallback(function(ce,pe){var Ie=[],je=[];ce.forEach(function(Pe){var xt=QK(Pe,N),Lt=rO(xt,2),Dt=Lt[0],dn=Lt[1],ct=JK(Pe,a,i),Zr=rO(ct,2),Ha=Zr[0],$r=Zr[1],Nu=A?A(Pe):null;if(Dt&&Ha&&!Nu)Ie.push(Pe);else{var xc=[dn,$r];Nu&&(xc=xc.concat(Nu)),je.push({file:Pe,errors:xc.filter(function(R0){return R0})})}}),(!o&&Ie.length>1||o&&l>=1&&Ie.length>l)&&(Ie.forEach(function(Pe){je.push({file:Pe,errors:[Nfe]})}),Ie.splice(0)),H({acceptedFiles:Ie,fileRejections:je,isDragReject:je.length>0,type:"setFiles"}),d&&d(Ie,je,pe),je.length>0&&p&&p(je,pe),Ie.length>0&&f&&f(Ie,pe)},[H,o,N,a,i,l,d,f,p,A]),Ze=Me.useCallback(function(ce){ce.preventDefault(),ce.persist(),we(ce),de.current=[],kE(ce)&&Promise.resolve(s(ce)).then(function(pe){sN(ce)&&!T||Ke(pe,ce)}).catch(function(pe){return Ce(pe)}),H({type:"reset"})},[s,Ke,Ce,T]),gt=Me.useCallback(function(){if(X.current){H({type:"openDialog"}),_();var ce={multiple:o,types:F};window.showOpenFilePicker(ce).then(function(pe){return s(pe)}).then(function(pe){Ke(pe,null),H({type:"closeDialog"})}).catch(function(pe){Mfe(pe)?(D(pe),H({type:"closeDialog"})):$fe(pe)?(X.current=!1,B.current?(B.current.value=null,B.current.click()):Ce(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ce(pe)});return}B.current&&(H({type:"openDialog"}),_(),B.current.value=null,B.current.click())},[H,_,D,g,Ke,Ce,F,o]),Ct=Me.useCallback(function(ce){!R.current||!R.current.isEqualNode(ce.target)||(ce.key===" "||ce.key==="Enter"||ce.keyCode===32||ce.keyCode===13)&&(ce.preventDefault(),gt())},[R,gt]),M=Me.useCallback(function(){H({type:"focus"})},[]),be=Me.useCallback(function(){H({type:"blur"})},[]),me=Me.useCallback(function(){w||(Ffe()?setTimeout(gt,0):gt())},[w,gt]),J=function(pe){return r?null:pe},Z=function(pe){return C?null:J(pe)},oe=function(pe){return I?null:J(pe)},we=function(pe){T&&pe.stopPropagation()},Ne=Me.useMemo(function(){return function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=ce.refKey,Ie=pe===void 0?"ref":pe,je=ce.role,Pe=ce.onKeyDown,xt=ce.onFocus,Lt=ce.onBlur,Dt=ce.onClick,dn=ce.onDragEnter,ct=ce.onDragOver,Zr=ce.onDragLeave,Ha=ce.onDrop,$r=iN(ce,Vfe);return Sr(Sr(uL({onKeyDown:Z(kc(Pe,Ct)),onFocus:Z(kc(xt,M)),onBlur:Z(kc(Lt,be)),onClick:J(kc(Dt,me)),onDragEnter:oe(kc(dn,Ae)),onDragOver:oe(kc(ct,Ee)),onDragLeave:oe(kc(Zr,Le)),onDrop:oe(kc(Ha,Ze)),role:typeof je=="string"&&je!==""?je:"presentation"},Ie,R),!r&&!C?{tabIndex:0}:{}),$r)}},[R,Ct,M,be,me,Ae,Ee,Le,Ze,C,I,r]),te=Me.useCallback(function(ce){ce.stopPropagation()},[]),xe=Me.useMemo(function(){return function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=ce.refKey,Ie=pe===void 0?"ref":pe,je=ce.onChange,Pe=ce.onClick,xt=iN(ce,jfe),Lt=uL({accept:N,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:J(kc(je,Ze)),onClick:J(kc(Pe,te)),tabIndex:-1},Ie,B);return Sr(Sr({},Lt),xt)}},[B,t,o,Ze,r]);return Sr(Sr({},K),{},{isFocused:se&&!r,getRootProps:Ne,getInputProps:xe,rootRef:R,inputRef:B,open:J(gt)})}function Zfe(n,e){switch(e.type){case"focus":return Sr(Sr({},n),{},{isFocused:!0});case"blur":return Sr(Sr({},n),{},{isFocused:!1});case"openDialog":return Sr(Sr({},hL),{},{isFileDialogActive:!0});case"closeDialog":return Sr(Sr({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return Sr(Sr({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Sr(Sr({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Sr({},hL);default:return n}}function c8(){}function Qfe({onFileSelect:n,onImagesSelect:e,onPptxSelect:t}){const[r,s]=Me.useState("pdf"),{isLight:i}=Nr(),a=Me.useCallback(b=>{(b==null?void 0:b.length)>0&&n(b[0])},[n]),o=Me.useCallback(b=>{(b==null?void 0:b.length)>0&&e(b)},[e]),l=Me.useCallback(b=>{(b==null?void 0:b.length)>0&&(t==null||t(b[0]))},[t]),c=FI({onDrop:a,accept:{"application/pdf":[".pdf"]},maxFiles:1,noClick:r!=="pdf",noDrag:r!=="pdf"}),u=FI({onDrop:o,accept:{"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"],"image/webp":[".webp"],"image/gif":[".gif"]},multiple:!0,noClick:r!=="images",noDrag:r!=="images"}),h=FI({onDrop:l,accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]},maxFiles:1,noClick:r!=="pptx",noDrag:r!=="pptx"}),d=r==="pdf"?c:r==="images"?u:h,{getRootProps:f,getInputProps:p,isDragActive:m}=d,g={pdf:{icon:Of,color:"violet",gradient:"from-blue-500 to-violet-500",hoverGradient:"from-violet-500/10 via-transparent to-blue-500/10",title:m?"Drop your PDF here":"Upload your Lecture Notes",description:"Drag and drop your PDF file here, or click to browse. We process everything locally.",support:"Supports PDF (Max 100MB)"},images:{icon:Ry,color:"emerald",gradient:"from-emerald-500 to-cyan-500",hoverGradient:"from-emerald-500/10 via-transparent to-cyan-500/10",title:m?"Drop your images here":"Upload your Screenshots",description:"Drag and drop multiple images or screenshots. We'll combine them into a printable PDF.",support:"Supports PNG, JPG, WebP, GIF"},pptx:{icon:sL,color:"orange",gradient:"from-orange-500 to-red-500",hoverGradient:"from-orange-500/10 via-transparent to-red-500/10",title:m?"Drop your PowerPoint here":"Upload your Presentation",description:"Drag and drop your PowerPoint file. We'll extract slides and convert to printable PDF.",support:"Supports PPTX (PowerPoint 2007+)"}}[r],v=g.icon;return k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{className:`flex items-center justify-center gap-1 p-1 rounded-full max-w-md mx-auto border transition-colors ${i?"bg-slate-100 border-slate-200":"bg-slate-800/50 border-white/5"}`,children:[k.jsxs("button",{onClick:()=>s("pdf"),className:ln("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all",r==="pdf"?"bg-gradient-to-r from-blue-500 to-violet-500 text-white shadow-lg":i?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"),children:[k.jsx(Of,{className:"w-4 h-4"}),"PDF"]}),k.jsxs("button",{onClick:()=>s("pptx"),className:ln("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all",r==="pptx"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":i?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"),children:[k.jsx(sL,{className:"w-4 h-4"}),"PPT"]}),k.jsxs("button",{onClick:()=>s("images"),className:ln("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all",r==="images"?"bg-gradient-to-r from-emerald-500 to-cyan-500 text-white shadow-lg":i?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"),children:[k.jsx(Ry,{className:"w-4 h-4"}),"Images"]})]}),k.jsxs("div",{...f(),className:ln("relative group cursor-pointer overflow-hidden rounded-2xl border-2 border-dashed p-12 text-center transition-all duration-300",i?"bg-white border-slate-300 hover:border-slate-400 hover:bg-slate-50":"bg-surface/50 border-slate-700 hover:bg-surfaceHighlight/50 hover:border-primary/50",m&&(i?"border-violet-500 bg-violet-50 ring-4 ring-violet-100":"border-primary bg-primary/10 ring-4 ring-primary/20 scale-[1.02]"),r==="images"&&(i?"hover:border-emerald-400":"border-emerald-700 hover:border-emerald-500/50"),r==="pptx"&&(i?"hover:border-orange-400":"border-orange-700 hover:border-orange-500/50")),children:[k.jsx("input",{...p()}),k.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-4",children:[k.jsx("div",{className:ln("flex h-20 w-20 items-center justify-center rounded-full shadow-xl transition-all duration-500 group-hover:scale-110",i?"bg-slate-100 text-slate-500":"bg-slate-800 text-slate-400",r==="pdf"&&(i?"group-hover:bg-violet-100 group-hover:text-violet-600":"group-hover:bg-violet-500 group-hover:text-white"),r==="images"&&(i?"group-hover:bg-emerald-100 group-hover:text-emerald-600":"group-hover:bg-emerald-500 group-hover:text-white"),r==="pptx"&&(i?"group-hover:bg-orange-100 group-hover:text-orange-600":"group-hover:bg-orange-500 group-hover:text-white"),m&&r==="pdf"&&"scale-110 bg-violet-500 text-white",m&&r==="images"&&"scale-110 bg-emerald-500 text-white",m&&r==="pptx"&&"scale-110 bg-orange-500 text-white"),children:m?k.jsx(pde,{className:"h-10 w-10 animate-bounce"}):k.jsx(v,{className:"h-10 w-10"})}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("h3",{className:`text-2xl font-bold ${i?"text-slate-900":"text-white"}`,children:g.title}),k.jsx("p",{className:`max-w-sm mx-auto ${i?"text-slate-600":"text-slate-400"}`,children:g.description})]}),k.jsx("div",{className:ln("mt-4 rounded-full px-4 py-1.5 text-xs font-medium border",r==="pdf"&&(i?"bg-slate-100 text-slate-500 border-slate-200":"bg-slate-800 text-slate-400 border-slate-700"),r==="images"&&(i?"bg-slate-100 text-slate-500 border-slate-200":"bg-slate-800 text-slate-400 border-slate-700"),r==="pptx"&&(i?"bg-slate-100 text-slate-500 border-slate-200":"bg-slate-800 text-slate-400 border-slate-700")),children:g.support})]}),k.jsx("div",{className:ln("absolute inset-0 opacity-0 transition-opacity duration-500 group-hover:opacity-100",`bg-gradient-to-tr ${g.hoverGradient}`,m&&"opacity-100")})]})]})}function Jfe({page:n,onSave:e,onClose:t}){const r=Me.useRef(null),[s,i]=Me.useState("rectangle"),[a,o]=Me.useState("invert"),[l,c]=Me.useState(!1),[u,h]=Me.useState({x:0,y:0}),[d,f]=Me.useState({x:0,y:0}),[p,m]=Me.useState([]),[y,g]=Me.useState(-1),[v,b]=Me.useState(null);Me.useEffect(()=>{const R=r.current;if(!R||!(n!=null&&n.thumbnail))return;const B=R.getContext("2d"),z=new Image;z.onload=()=>{R.width=z.width,R.height=z.height,B.drawImage(z,0,0),b(z),w()},z.src=n.thumbnail},[n]);const w=()=>{const R=r.current;if(!R)return;const B=R.toDataURL(),z=p.slice(0,y+1);z.push(B),m(z),g(z.length-1)},C=()=>{if(y>0){const R=y-1;g(R),T(p[R])}},I=()=>{if(y<p.length-1){const R=y+1;g(R),T(p[R])}},T=R=>{const B=r.current,z=B.getContext("2d"),W=new Image;W.onload=()=>{z.clearRect(0,0,B.width,B.height),z.drawImage(W,0,0)},W.src=R},E=R=>{const B=r.current,z=B.getBoundingClientRect(),W=B.width/z.width,K=B.height/z.height;return{x:(R.clientX-z.left)*W,y:(R.clientY-z.top)*K}},A=R=>{c(!0);const B=E(R);h(B),f(B)},N=R=>{l&&f(E(R))},F=()=>{l&&(c(!1),_())},_=()=>{const B=r.current.getContext("2d"),z=Math.min(u.x,d.x),W=Math.min(u.y,d.y),K=Math.abs(d.x-u.x),H=Math.abs(d.y-u.y);if(K<5||H<5)return;const se=B.getImageData(z,W,K,H),q=se.data;if(a==="invert")for(let X=0;X<q.length;X+=4)q[X]=255-q[X],q[X+1]=255-q[X+1],q[X+2]=255-q[X+2];else if(a==="paintBlack")for(let X=0;X<q.length;X+=4)q[X]=0,q[X+1]=0,q[X+2]=0;if(s==="rectangle")B.putImageData(se,z,W);else if(s==="circle"){const X=z+K/2,fe=W+H/2,de=K/2,ue=H/2,Ce=document.createElement("canvas");Ce.width=K,Ce.height=H,Ce.getContext("2d").putImageData(se,0,0),B.save(),B.beginPath(),B.ellipse(X,fe,de,ue,0,0,Math.PI*2),B.clip(),B.drawImage(Ce,z,W),B.restore()}w()},D=()=>{const B=r.current.toDataURL();e({...n,thumbnail:B,edited:!0})};return Me.useEffect(()=>{if(!l)return;const R=r.current,B=R.getContext("2d");if(p[y]){const z=new Image;z.onload=()=>{B.clearRect(0,0,R.width,R.height),B.drawImage(z,0,0),B.strokeStyle="#8b5cf6",B.lineWidth=2,B.setLineDash([5,5]);const W=Math.min(u.x,d.x),K=Math.min(u.y,d.y),H=Math.abs(d.x-u.x),se=Math.abs(d.y-u.y);s==="rectangle"?B.strokeRect(W,K,H,se):(B.beginPath(),B.ellipse(W+H/2,K+se/2,H/2,se/2,0,0,Math.PI*2),B.stroke()),B.setLineDash([])},z.src=p[y]}},[l,d,s]),k.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-950/95 backdrop-blur-md flex",children:[k.jsxs("div",{className:"w-64 bg-slate-900 border-r border-white/5 p-4 flex flex-col gap-6",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Edit Page ",n==null?void 0:n.id]}),k.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:k.jsx(wS,{className:"w-5 h-5"})})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h3",{className:"text-sm text-slate-400",children:"Selection Tool"}),k.jsxs("div",{className:"space-y-2",children:[k.jsxs("button",{onClick:()=>i("rectangle"),className:ln("w-full flex items-center gap-3 p-3 rounded-lg border transition-all",s==="rectangle"?"bg-violet-600 border-violet-600 text-white":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:[k.jsx(hde,{className:"w-5 h-5"}),k.jsx("span",{children:"Rectangle"})]}),k.jsxs("button",{onClick:()=>i("circle"),className:ln("w-full flex items-center gap-3 p-3 rounded-lg border transition-all",s==="circle"?"bg-violet-600 border-violet-600 text-white":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:[k.jsx(Rhe,{className:"w-5 h-5"}),k.jsx("span",{children:"Circle"})]})]})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h3",{className:"text-sm text-slate-400",children:"Edit Action"}),k.jsxs("div",{className:"space-y-2",children:[k.jsxs("button",{onClick:()=>o("invert"),className:ln("w-full flex items-center gap-3 p-3 rounded-lg border transition-all",a==="invert"?"bg-violet-600 border-violet-600 text-white":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:[k.jsx(DK,{className:"w-5 h-5"}),k.jsx("span",{children:"Invert Colors"})]}),k.jsxs("button",{onClick:()=>o("paintBlack"),className:ln("w-full flex items-center gap-3 p-3 rounded-lg border transition-all",a==="paintBlack"?"bg-violet-600 border-violet-600 text-white":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:[k.jsx(Yhe,{className:"w-5 h-5"}),k.jsx("span",{children:"Paint Black"})]})]})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h3",{className:"text-sm text-slate-400",children:"History"}),k.jsxs("div",{className:"flex gap-2",children:[k.jsxs("button",{onClick:C,disabled:y<=0,className:"flex-1 flex items-center justify-center gap-2 p-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[k.jsx(fde,{className:"w-4 h-4"}),k.jsx("span",{children:"Undo"})]}),k.jsxs("button",{onClick:I,disabled:y>=p.length-1,className:"flex-1 flex items-center justify-center gap-2 p-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[k.jsx(ede,{className:"w-4 h-4"}),k.jsx("span",{children:"Redo"})]})]})]}),k.jsx("div",{className:"mt-auto text-xs text-slate-500",children:"Draw selections, click Apply to commit changes."})]}),k.jsxs("div",{className:"flex-1 flex flex-col",children:[k.jsx("div",{className:"h-12 bg-slate-900/50 border-b border-white/5 flex items-center justify-center px-4",children:k.jsxs("span",{className:"text-sm text-slate-400",children:["Tool: ",s,"  Action: ",a]})}),k.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-auto",children:k.jsx("div",{className:"relative rounded-xl overflow-hidden shadow-2xl border border-white/10",children:k.jsx("canvas",{ref:r,onMouseDown:A,onMouseMove:N,onMouseUp:F,onMouseLeave:()=>c(!1),className:"max-w-full max-h-[60vh] cursor-crosshair",style:{display:"block"}})})}),k.jsxs("div",{className:"h-16 bg-slate-900/50 border-t border-white/5 flex items-center justify-between px-6",children:[k.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:"Cancel"}),k.jsxs(Cs,{onClick:D,className:"gap-2",children:[k.jsx(rR,{className:"w-4 h-4"}),"Save Edits"]})]})]})]})}function epe({pages:n,selectedPages:e,onSelectionChange:t,onPageEdit:r,onContinue:s,onBack:i,onReorder:a,onAddPdfs:o,onAddImages:l,onAddPptx:c}){const{isLight:u}=Nr(),[h,d]=Me.useState(null),[f,p]=Me.useState(null),[m,y]=Me.useState(null),g=(A,N)=>{y(N),A.dataTransfer.effectAllowed="move"},v=(A,N)=>{A.preventDefault(),A.dataTransfer.dropEffect="move"},b=(A,N)=>{A.preventDefault(),m&&m!==N&&(a==null||a(m,N)),y(null)},w=A=>{e.includes(A)?t(e.filter(N=>N!==A)):t([...e,A].sort((N,F)=>N-F))},C=()=>{t(n.map(A=>A.id))},I=()=>{t([])},T=(A,N)=>{A.stopPropagation(),p(N)},E=A=>{r(A),p(null)};return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border ${u?"bg-amber-50 border-amber-200":"bg-amber-500/10 border-amber-500/20"}`,children:[k.jsx("span",{className:"text-xl",children:""}),k.jsxs("div",{children:[k.jsx("span",{className:"text-amber-500 font-medium",children:"Tip: "}),k.jsx("span",{className:u?"text-slate-600":"text-slate-300",children:"Click the pencil icon to edit individual pages. Deselect pages to remove them from the final document."})]})]}),k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("span",{className:`font-semibold ${u?"text-slate-900":"text-white"}`,children:[e.length," of ",n.length]}),k.jsx("span",{className:"text-slate-500",children:"pages selected"})]}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx(Cs,{variant:"secondary",size:"sm",onClick:C,children:"Select All"}),k.jsx(Cs,{variant:"secondary",size:"sm",onClick:I,children:"Deselect All"})]})]}),k.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 max-h-[50vh] overflow-y-auto p-2 scrollbar-thin",children:n.map((A,N)=>{const F=e.includes(A.id);return k.jsxs("div",{draggable:!0,onDragStart:_=>g(_,A.id),onDragOver:_=>v(_,A.id),onDrop:_=>b(_,A.id),className:ln("relative group rounded-xl overflow-hidden cursor-pointer transition-all duration-300 border-2",F?"border-violet-500 shadow-lg shadow-violet-500/20":u?"border-slate-200 opacity-60 hover:opacity-100 hover:border-slate-300":"border-slate-700 opacity-50 hover:opacity-80",m===A.id&&"opacity-20 border-dashed"),onClick:()=>w(A.id),onMouseEnter:()=>d(A.id),onMouseLeave:()=>d(null),children:[k.jsx("img",{src:A.thumbnail,alt:`Page ${A.id}`,className:"w-full h-auto"}),k.jsx("button",{onClick:_=>T(_,A),className:ln("absolute top-2 left-2 w-7 h-7 rounded-full flex items-center justify-center transition-all","bg-violet-500 text-white opacity-0 group-hover:opacity-100 hover:bg-violet-400 hover:scale-110"),children:k.jsx(Qhe,{className:"w-3.5 h-3.5"})}),k.jsx("div",{className:ln("absolute top-2 right-2 w-6 h-6 rounded-full flex items-center justify-center transition-all",F?"bg-violet-500":"bg-slate-800/80 border border-slate-600"),children:F&&k.jsx(rR,{className:"w-4 h-4 text-white"})}),k.jsx("div",{className:"absolute bottom-2 right-2 bg-black/70 px-2 py-1 rounded text-xs font-medium text-white",children:A.id}),k.jsxs("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 flex gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity z-20",children:[k.jsx("button",{onClick:_=>{_.stopPropagation(),N>0&&(a==null||a(A.id,n[N-1].id))},disabled:N===0,className:"p-1 rounded-full bg-black/50 text-white hover:bg-violet-500 disabled:opacity-30 disabled:hover:bg-black/50",title:"Move Backward",children:k.jsx(Ahe,{className:"w-3 h-3"})}),k.jsx("button",{onClick:_=>{_.stopPropagation(),N<n.length-1&&(a==null||a(A.id,n[N+1].id))},disabled:N===n.length-1,className:"p-1 rounded-full bg-black/50 text-white hover:bg-violet-500 disabled:opacity-30 disabled:hover:bg-black/50",title:"Move Forward",children:k.jsx(Nhe,{className:"w-3 h-3"})})]}),A.edited&&k.jsx("div",{className:"absolute bottom-8 left-2 bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded text-[10px] font-medium border border-emerald-500/30",children:"Edited"})]},A.id)})}),k.jsxs("div",{className:`flex flex-wrap items-center justify-center gap-4 py-4 border-t rounded-xl ${u?"bg-slate-50 border-slate-200":"bg-slate-800/20 border-white/5"}`,children:[k.jsx("span",{className:"text-sm font-medium text-slate-500 w-full text-center sm:w-auto",children:"Add more:"}),k.jsxs("button",{onClick:o,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm border transition-colors ${u?"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100":"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 border-blue-600/30"}`,children:[k.jsx(Of,{className:"w-4 h-4"})," PDF"]}),k.jsxs("button",{onClick:c,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm border transition-colors ${u?"bg-orange-50 text-orange-600 border-orange-200 hover:bg-orange-100":"bg-orange-600/20 text-orange-400 hover:bg-orange-600/30 border-orange-600/30"}`,children:[k.jsx(sL,{className:"w-4 h-4"})," PPT"]}),k.jsxs("button",{onClick:l,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm border transition-colors ${u?"bg-emerald-50 text-emerald-600 border-emerald-200 hover:bg-emerald-100":"bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30 border-emerald-600/30"}`,children:[k.jsx(Ry,{className:"w-4 h-4"})," Images"]})]}),k.jsxs("div",{className:`flex items-center justify-between pt-4 border-t ${u?"border-slate-200":"border-white/5"}`,children:[k.jsx("button",{onClick:i,className:`transition-colors ${u?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:" Back to Upload"}),k.jsxs(Cs,{size:"lg",onClick:s,disabled:e.length===0,className:"px-8",children:["Continue with ",e.length," Pages"]})]})]}),f&&k.jsx(Jfe,{page:f,onSave:E,onClose:()=>p(null)})]})}function tpe({settings:n,updateSettings:e,fileInfo:t,onBack:r,onProcess:s,processing:i}){const{isLight:a}=Nr();return k.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[t&&k.jsx("div",{className:`flex items-center justify-between p-4 rounded-xl border ${a?"bg-white border-slate-200 shadow-sm":"bg-slate-900/50 border-white/5"}`,children:k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:`p-3 rounded-lg ${a?"bg-violet-50 text-violet-600":"bg-violet-500/20"}`,children:k.jsx(Of,{className:`w-6 h-6 ${a?"text-violet-600":"text-violet-400"}`})}),k.jsxs("div",{children:[k.jsx("h3",{className:`font-medium ${a?"text-slate-900":"text-white"}`,children:t.name}),k.jsxs("div",{className:`flex gap-4 text-sm ${a?"text-slate-500":"text-slate-400"}`,children:[k.jsxs("span",{children:["Size: ",k.jsxs("span",{className:"text-violet-400",children:[(t.size/1024).toFixed(2)," KB"]})]}),k.jsxs("span",{children:["Pages: ",k.jsx("span",{className:"text-violet-400",children:t.pageCount})]}),k.jsxs("span",{children:["Excluded: ",k.jsx("span",{className:"text-red-400",children:t.excludedCount||0})]})]})]})]})}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[k.jsxs("div",{className:`space-y-6 p-6 rounded-2xl border backdrop-blur-sm ${a?"bg-white border-slate-200 shadow-sm":"bg-slate-900/50 border-white/5"}`,children:[k.jsxs("div",{children:[k.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${a?"text-slate-900":"text-white"}`,children:[k.jsx(DK,{className:"w-5 h-5 text-violet-400"}),"Enhancement"]}),k.jsx("p",{className:"text-xs mt-1 text-slate-500",children:"Apply image processing filters"})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsxs("h4",{className:"text-sm text-slate-400 flex items-center gap-2",children:[k.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-violet-500"}),"Color Filters"]}),k.jsx(L0,{label:"Smart Invert Colors",description:"Dark to white background conversion",checked:n.invert,onChange:o=>e("invert",o)}),k.jsx(L0,{label:"Clear PDF Background",description:"Remove background noise, make dark areas white",checked:n.clearBackground,onChange:o=>e("clearBackground",o)}),k.jsx(L0,{label:"Grayscale",description:"Convert to shades of gray",checked:n.greyscale,onChange:o=>e("greyscale",o)}),k.jsx(L0,{label:"Black & White",description:"Pure black and white (high contrast)",checked:n.blackAndWhite,onChange:o=>e("blackAndWhite",o)})]}),k.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/5",children:[k.jsxs("h4",{className:"text-sm text-slate-400 flex items-center gap-2",children:[k.jsx(Mhe,{className:"w-4 h-4"}),"Logo Removal"]}),k.jsx(L0,{label:"Remove Logo",description:"Remove logos from corners of slides",checked:n.removeLogo,onChange:o=>e("removeLogo",o)})]}),k.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/5",children:[k.jsxs("h4",{className:"text-sm text-slate-400 flex items-center gap-2",children:[k.jsx(u5,{className:"w-4 h-4"}),"AI Teacher Removal",k.jsx("span",{className:"px-1.5 py-0.5 text-[10px] bg-emerald-500/20 text-emerald-400 rounded-full",children:"NEW"})]}),k.jsx(L0,{label:"Remove Teacher/Person",description:"Auto-detect and remove person from slides (for images only)",checked:n.removeTeacher,onChange:o=>e("removeTeacher",o)}),n.removeTeacher&&k.jsx("p",{className:"text-xs text-amber-400/80 bg-amber-500/10 rounded-lg p-2",children:" AI model will be downloaded (~2MB) on first use. Processing may take longer."})]}),k.jsxs("div",{className:`space-y-3 pt-4 border-t ${a?"border-slate-100":"border-white/5"}`,children:[k.jsxs("h4",{className:"text-sm text-slate-400 flex items-center gap-2",children:[k.jsx(zhe,{className:"w-4 h-4"}),"Output Quality"]}),k.jsx("div",{className:"grid grid-cols-3 gap-2",children:["low","medium","high"].map(o=>k.jsx("button",{onClick:()=>e("quality",o),className:ln("p-3 rounded-lg border text-sm capitalize font-medium transition-all",n.quality===o?"bg-violet-600 border-violet-600 text-white":a?"bg-slate-50 border-slate-200 text-slate-600 hover:border-violet-500/50":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:o},o))}),k.jsxs("p",{className:"text-xs text-slate-500",children:[n.quality==="low"&&" Smaller file size, faster processing",n.quality==="medium"&&" Balanced quality and file size",n.quality==="high"&&" Best quality, larger file size"]})]})]}),k.jsxs("div",{className:`space-y-6 p-6 rounded-2xl border backdrop-blur-sm ${a?"bg-white border-slate-200 shadow-sm":"bg-slate-900/50 border-white/5"}`,children:[k.jsxs("div",{children:[k.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${a?"text-slate-900":"text-white"}`,children:[k.jsx(OK,{className:"w-5 h-5 text-cyan-400"}),"Layout"]}),k.jsx("p",{className:"text-xs mt-1 text-slate-500",children:"Arrange your document pages"})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h4",{className:"text-sm text-slate-400",children:"Document Size"}),k.jsx("div",{className:"grid grid-cols-2 gap-2",children:["original","A4"].map(o=>k.jsx("button",{onClick:()=>e("documentSize",o),className:ln("p-3 rounded-lg border text-sm font-medium transition-all",n.documentSize===o?"bg-violet-600 border-violet-600 text-white":a?"bg-slate-50 border-slate-200 text-slate-600 hover:border-violet-500/50":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:o},o))})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h4",{className:"text-sm text-slate-400",children:"Orientation"}),k.jsx("div",{className:"grid grid-cols-2 gap-2",children:["portrait","landscape"].map(o=>k.jsxs("button",{onClick:()=>e("orientation",o),className:ln("p-3 rounded-lg border text-sm font-medium capitalize transition-all flex items-center justify-center gap-2",n.orientation===o?"bg-violet-600 border-violet-600 text-white":a?"bg-slate-50 border-slate-200 text-slate-600 hover:border-violet-500/50":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:[k.jsx("div",{className:ln("border border-current rounded-sm",o==="portrait"?"w-3 h-4":"w-4 h-3")}),o]},o))})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h4",{className:"text-sm text-slate-400",children:"Slides per Page"}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsxs("div",{children:[k.jsx("label",{className:"text-xs text-slate-500",children:"Rows"}),k.jsx("select",{value:n.rows,onChange:o=>e("rows",parseInt(o.target.value)),className:`w-full mt-1 p-3 rounded-lg border focus:border-violet-500 focus:outline-none ${a?"bg-slate-50 border-slate-200 text-slate-900":"bg-slate-800 border-slate-700 text-white"}`,children:[1,2,3,4].map(o=>k.jsx("option",{value:o,children:o},o))})]}),k.jsxs("div",{children:[k.jsx("label",{className:"text-xs text-slate-500",children:"Columns"}),k.jsx("select",{value:n.cols,onChange:o=>e("cols",parseInt(o.target.value)),className:`w-full mt-1 p-3 rounded-lg border focus:border-violet-500 focus:outline-none ${a?"bg-slate-50 border-slate-200 text-slate-900":"bg-slate-800 border-slate-700 text-white"}`,children:[1,2,3,4].map(o=>k.jsx("option",{value:o,children:o},o))})]})]})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsxs("h4",{className:"text-sm text-slate-400 flex items-center gap-2",children:[k.jsx(cde,{className:"w-4 h-4"}),"Margins & Spacing"]}),k.jsxs("div",{className:"space-y-2",children:[k.jsxs("div",{className:"flex justify-between text-xs",children:[k.jsx("span",{className:"text-slate-500",children:"Page Margin"}),k.jsxs("span",{className:"text-violet-400",children:[n.margin||20,"px"]})]}),k.jsx("input",{type:"range",min:"5",max:"50",value:n.margin||20,onChange:o=>e("margin",parseInt(o.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-violet-500"})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsxs("div",{className:"flex justify-between text-xs",children:[k.jsx("span",{className:"text-slate-500",children:"Cell Padding"}),k.jsxs("span",{className:"text-violet-400",children:[n.cellPadding||5,"px"]})]}),k.jsx("input",{type:"range",min:"0",max:"20",value:n.cellPadding||5,onChange:o=>e("cellPadding",parseInt(o.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-violet-500"})]})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsxs("h4",{className:"text-sm text-slate-400 flex items-center gap-2",children:[k.jsx(ide,{className:"w-4 h-4"}),"Additional Options"]}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx(u8,{label:"Borders",active:n.showBorders,onClick:()=>e("showBorders",!n.showBorders)}),k.jsx(u8,{label:"Page Numbers",active:n.addPageNumbers,onClick:()=>e("addPageNumbers",!n.addPageNumbers)})]})]}),k.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/5",children:[k.jsx("h4",{className:"text-sm text-slate-400",children:"Layout Preview"}),k.jsxs("div",{className:"flex items-center gap-6",children:[k.jsx("div",{className:ln("rounded-lg border flex flex-col gap-0.5 overflow-hidden transition-all duration-300",n.orientation==="portrait"?"w-20 h-28":"w-28 h-20",a?"bg-slate-200 border-slate-300":"bg-slate-800 border-slate-700"),style:{padding:`${(n.margin||20)/5}px`},children:Array.from({length:n.rows}).map((o,l)=>k.jsx("div",{className:"flex-1 flex gap-0.5",children:Array.from({length:n.cols}).map((c,u)=>k.jsx("div",{className:ln("flex-1 rounded-sm transition-all",a?"bg-white":"bg-violet-500/30",n.showBorders&&(a?"border border-slate-900/10":"border border-violet-500/50")),style:{margin:`${(n.cellPadding||5)/5}px`}},u))},l))}),k.jsxs("div",{className:"text-right",children:[k.jsx("div",{className:"text-3xl font-bold text-violet-400",children:n.rows*n.cols}),k.jsxs("div",{className:"text-xs text-slate-500",children:[n.rows,"",n.cols," slides per page"]}),k.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[n.orientation==="portrait"?"Portrait":"Landscape","  ",n.documentSize||"A4"]})]})]})]})]})]}),k.jsxs("div",{className:"flex items-center justify-between pt-4",children:[k.jsx("button",{onClick:r,className:`transition-colors ${a?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:" Back"}),k.jsx(Cs,{size:"lg",onClick:s,disabled:i,className:"px-8 gap-2",children:i?k.jsx(k.Fragment,{children:"Processing..."}):k.jsxs(k.Fragment,{children:[k.jsx(Eg,{className:"w-5 h-5"}),"Process File"]})})]})]})}function L0({label:n,description:e,checked:t,onChange:r}){const{isLight:s}=Nr();return k.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors cursor-pointer group ${s?"bg-slate-50 border-slate-200 hover:border-violet-500/50":"bg-slate-800/50 border-slate-700 hover:border-violet-500/50"}`,children:[k.jsxs("div",{children:[k.jsx("span",{className:`transition-colors ${s?"text-slate-900 group-hover:text-violet-600":"text-white group-hover:text-violet-300"}`,children:n}),e&&k.jsx("p",{className:"text-xs text-slate-500",children:e})]}),k.jsx("button",{onClick:i=>{i.stopPropagation(),r(!t)},className:ln("relative w-12 h-6 rounded-full transition-colors duration-300",t?"bg-violet-600":s?"bg-slate-300":"bg-slate-700"),children:k.jsx("div",{className:ln("absolute top-1 w-4 h-4 bg-white rounded-full transition-all duration-300",t?"left-7":"left-1")})})]})}function u8({label:n,active:e,onClick:t}){const{isLight:r}=Nr();return k.jsx("button",{onClick:t,className:ln("p-3 rounded-lg border text-sm font-medium transition-all",e?"bg-violet-600 border-violet-600 text-white":r?"bg-slate-50 border-slate-200 text-slate-600 hover:border-violet-500/50":"bg-slate-800 border-slate-700 text-slate-400 hover:border-violet-500/50"),children:n})}function dL({currentStep:n,totalSteps:e=6,onStepClick:t,canNavigateToStep:r}){const s=[{id:1,label:"Upload",step:"upload"},{id:2,label:"Select",step:"select"},{id:3,label:"Review",step:"select"},{id:4,label:"Enhance",step:"settings"},{id:5,label:"Format",step:"settings"},{id:6,label:"Download",step:"success"}],i=a=>{t&&a.id<=n&&r!=null&&r(a.step)&&t(a.step,a.id)};return k.jsx("div",{className:"flex items-center justify-center gap-2 py-6",children:s.map((a,o)=>{const l=a.id<n,c=a.id===n,u=a.id>n,h=t&&a.id<=n&&(r==null?void 0:r(a.step));return k.jsxs(V_.Fragment,{children:[k.jsxs("div",{className:"flex flex-col items-center gap-1",children:[k.jsx("button",{onClick:()=>i(a),disabled:!h,className:ln("w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all duration-300 border-2",l&&"bg-violet-600 border-violet-600 text-white",c&&"bg-violet-600 border-violet-600 text-white shadow-lg shadow-violet-500/50 scale-110",u&&"bg-slate-800 border-slate-700 text-slate-500",h&&!c&&"hover:scale-110 hover:shadow-lg hover:shadow-violet-500/30 cursor-pointer",!h&&u&&"cursor-not-allowed"),title:h?`Go to ${a.label}`:u?"Complete previous steps first":a.label,children:l?k.jsx(rR,{className:"w-5 h-5"}):a.id}),k.jsx("span",{className:ln("text-[10px] hidden sm:block transition-colors",c?"text-violet-400 font-medium":"text-slate-500",h&&!c&&"hover:text-violet-400 cursor-pointer"),children:a.label})]}),o<s.length-1&&k.jsx("div",{className:ln("w-8 sm:w-12 h-0.5 transition-colors duration-300",a.id<n?"bg-violet-600":"bg-slate-700")})]},a.id)})})}function npe({fileInfo:n,onDownload:e,onPreview:t,onProcessAnother:r,onGoBack:s,onStepClick:i,canNavigateToStep:a}){const{isLight:o}=Nr();return k.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[k.jsx(dL,{currentStep:6,onStepClick:i,canNavigateToStep:a}),k.jsxs("div",{className:`text-center space-y-5 p-6 rounded-2xl border backdrop-blur-sm transition-all ${o?"bg-emerald-50/80 border-emerald-200 shadow-sm":"bg-slate-900/50 border-white/5"}`,children:[k.jsxs("div",{className:"relative mx-auto w-16 h-16",children:[k.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 rounded-full blur-lg animate-pulse"}),k.jsx("div",{className:"relative w-16 h-16 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center",children:k.jsx(Eg,{className:"w-8 h-8 text-white"})})]}),k.jsxs("div",{children:[k.jsx("h2",{className:`text-xl font-bold mb-1 ${o?"text-slate-900":"text-white"}`,children:"Success!"}),k.jsx("p",{className:`text-sm ${o?"text-emerald-700":"text-slate-400"}`,children:"Your document is ready for download."})]}),k.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg border text-left ${o?"bg-amber-50 border-amber-200":"bg-amber-500/10 border-amber-500/20"}`,children:[k.jsx(Che,{className:"w-4 h-4 text-amber-500 flex-shrink-0"}),k.jsx("span",{className:`text-xs ${o?"text-amber-800":"text-slate-300"}`,children:"Always review content before printing"})]}),k.jsxs("div",{className:`p-3 rounded-lg border ${o?"bg-white/60 border-emerald-100":"bg-slate-800/50 border-slate-700"}`,children:[k.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[k.jsx("div",{className:`p-2 rounded ${o?"bg-violet-100":"bg-violet-500/20"}`,children:k.jsx(tN,{className:`w-4 h-4 ${o?"text-violet-600":"text-violet-400"}`})}),k.jsxs("div",{className:"text-left",children:[k.jsxs("h3",{className:`font-medium text-sm ${o?"text-slate-900":"text-white"}`,children:[(n==null?void 0:n.name)||"Document","_processed.pdf"]}),k.jsx("span",{className:"text-xs text-slate-500",children:"Enhanced PDF"})]})]}),k.jsxs("div",{className:`grid grid-cols-3 gap-3 text-center py-2 border-t ${o?"border-slate-200":"border-white/5"}`,children:[k.jsxs("div",{children:[k.jsxs("div",{className:`text-xs font-semibold ${o?"text-slate-900":"text-white"}`,children:[(n==null?void 0:n.originalSize)||"0"," KB"]}),k.jsx("div",{className:"text-[10px] text-slate-500",children:"Original"})]}),k.jsxs("div",{children:[k.jsxs("div",{className:"text-xs font-semibold text-violet-500",children:[(n==null?void 0:n.finalSize)||"0"," MB"]}),k.jsx("div",{className:"text-[10px] text-slate-500",children:"Final"})]}),k.jsxs("div",{children:[k.jsx("div",{className:`text-xs font-semibold ${o?"text-slate-900":"text-white"}`,children:(n==null?void 0:n.pageCount)||0}),k.jsx("div",{className:"text-[10px] text-slate-500",children:"Pages"})]})]})]}),k.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[k.jsxs(Cs,{onClick:e,size:"lg",className:"gap-2",children:[k.jsx(tN,{className:"w-4 h-4"}),"Download PDF"]}),k.jsxs(Cs,{onClick:t,variant:"secondary",className:"gap-2",children:[k.jsx(FK,{className:"w-4 h-4"}),"Preview"]})]}),k.jsxs("div",{className:`flex items-center justify-center gap-4 pt-2 border-t ${o?"border-slate-200":"border-white/5"}`,children:[k.jsxs("button",{onClick:s,className:`flex items-center gap-1 text-sm transition-colors ${o?"text-slate-500 hover:text-violet-600":"text-slate-400 hover:text-violet-400"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Settings"]}),k.jsx("span",{className:"text-slate-400",children:"|"}),k.jsxs("button",{onClick:r,className:`flex items-center gap-1 text-sm transition-colors ${o?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(LK,{className:"w-4 h-4"}),"Process Another"]})]})]}),k.jsx(rpe,{isLight:o})]})}function rpe({isLight:n}){return k.jsxs("div",{className:`p-5 rounded-2xl border text-center space-y-3 ${n?"bg-gradient-to-br from-violet-50 to-fuchsia-50 border-violet-200":"bg-gradient-to-br from-violet-900/20 to-fuchsia-900/10 border-violet-500/20"}`,children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs ${n?"bg-fuchsia-100 border border-fuchsia-200 text-fuchsia-700":"bg-fuchsia-500/20 border border-fuchsia-500/30 text-fuchsia-300"}`,children:[k.jsx(PK,{className:"w-3 h-3"}),"100% FREE"]}),k.jsxs("div",{children:[k.jsx("h3",{className:`text-lg font-bold mb-1 ${n?"text-slate-900":"text-white"}`,children:"Help Keep It Free"}),k.jsx("p",{className:`text-xs ${n?"text-slate-600":"text-slate-400"}`,children:"Every contribution helps us keep NotesForge free for students worldwide."})]}),k.jsxs(Cs,{className:"gap-2 bg-gradient-to-r from-fuchsia-600 to-pink-600 hover:from-fuchsia-500 hover:to-pink-500 text-white",onClick:()=>window.open("https://buymeacoffee.com","_blank"),children:[k.jsx(bf,{className:"w-4 h-4"}),"Support NotesForge"]}),k.jsxs("div",{className:`flex items-center justify-center gap-4 pt-3 border-t text-[10px] ${n?"border-violet-200 text-slate-500":"border-white/5 text-slate-500"}`,children:[k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(rl,{className:"w-3 h-3 text-emerald-500"}),"Free Forever"]}),k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(ox,{className:"w-3 h-3 text-emerald-500"}),"No Login"]})]})]})}function spe({onGetStarted:n}){const{isLight:e}=Nr(),t=[{icon:rl,text:"100% Private - No uploads"},{icon:Ig,text:"Instant processing"},{icon:c5,text:"Print optimized"}];return k.jsxs("section",{className:`relative min-h-[90vh] flex items-center justify-center overflow-hidden ${e?"bg-white":""}`,children:[k.jsxs("div",{className:"absolute inset-0 z-0",children:[k.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:`absolute inset-0 w-full h-full object-cover ${e?"opacity-[0.08]":"opacity-15"}`,children:k.jsx("source",{src:"/ProductShowcaseVideo.webm",type:"video/webm"})}),!e&&k.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-950/60 via-slate-950/80 to-slate-950"})]}),k.jsxs("div",{className:`relative z-10 text-center max-w-5xl mx-auto px-6 py-20 ${e?"mt-10":""}`,children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm mb-8 ${e?"bg-slate-100 text-slate-700 font-medium border border-slate-200":"bg-blue-500/10 border border-blue-500/20 text-blue-400 animate-fade-in"}`,children:[k.jsx(nN,{className:"w-4 h-4"}),k.jsx("span",{children:"Free & Open Source"}),k.jsx("span",{className:`w-1 h-1 rounded-full ${e?"bg-slate-400":"bg-blue-400"}`}),k.jsx("span",{children:"No Login Required"})]}),k.jsx("h1",{className:`text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight ${e?"tracking-tight text-slate-900":""}`,children:e?k.jsxs(k.Fragment,{children:["Make Your ",k.jsx("span",{className:"text-violet-600",children:"Lecture Slides"}),k.jsx("br",{}),k.jsx("span",{className:"text-violet-600",children:"Printable"})]}):k.jsxs(k.Fragment,{children:[k.jsx("span",{className:"text-white",children:"Make Your "}),k.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-violet-500 to-purple-500",children:"Lecture Slides"}),k.jsx("br",{}),k.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-cyan-400",children:"Printable"})]})}),k.jsx("p",{className:`text-lg md:text-xl max-w-2xl mx-auto mb-10 leading-relaxed ${e?"text-slate-600 font-normal":"text-slate-400"}`,children:"Instantly convert dark mode lecture slides into printer-friendly PDFs. Save ink, save paper, and study smarter  all without uploading a single file."}),k.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-10",children:t.map((r,s)=>k.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm ${e?"bg-white border border-slate-200 text-slate-700 shadow-sm":"bg-slate-800/50 border border-white/5 text-slate-300"}`,children:[k.jsx(r.icon,{className:`w-4 h-4 ${e?"text-slate-900":"text-emerald-400"}`}),k.jsx("span",{children:r.text})]},s))}),k.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[k.jsxs(Cs,{size:"lg",onClick:n,className:`text-lg px-8 py-6 group relative overflow-hidden ${e?"bg-slate-900 hover:bg-slate-800 text-white shadow-md hover:shadow-lg transition-all":"shadow-2xl shadow-blue-500/25 bg-gradient-to-r from-blue-600 to-violet-600 hover:from-blue-500 hover:to-violet-500"}`,children:[k.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[k.jsx(nN,{className:"w-5 h-5"}),"Start Forging",k.jsx(The,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),!e&&k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-600 via-violet-600 to-violet-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),k.jsxs("span",{className:"text-sm flex items-center gap-2 text-slate-500",children:[k.jsx(Eg,{className:`w-4 h-4 ${e?"text-emerald-600":"text-emerald-500"}`}),"No signup needed"]})]})]})]})}function ipe(){const{isLight:n}=Nr(),e=[{icon:rl,title:"Privacy First",description:"Your files never leave your device. All processing happens locally in your browser.",gradient:"from-emerald-500 to-teal-500",bgGlow:"bg-emerald-500/20"},{icon:Zhe,title:"Smart Invert",description:"Automatically convert dark backgrounds to printer-friendly white while preserving text clarity.",gradient:"from-violet-500 to-fuchsia-500",bgGlow:"bg-violet-500/20"},{icon:OK,title:"Flexible Grid Layouts",description:"Arrange multiple slides per page (2, 4, 6, 9) to save paper and create compact study sheets.",gradient:"from-cyan-500 to-blue-500",bgGlow:"bg-cyan-500/20"},{icon:Ig,title:"Lightning Fast",description:"Process entire lectures in seconds. No waiting, no queues, no limits.",gradient:"from-amber-500 to-orange-500",bgGlow:"bg-amber-500/20"},{icon:$he,title:"High Quality Output",description:"Generate crisp, high-resolution PDFs optimized for both viewing and printing.",gradient:"from-rose-500 to-pink-500",bgGlow:"bg-rose-500/20"},{icon:ox,title:"No Account Needed",description:"Start using immediately. No signup, no login, no credit card required.",gradient:"from-indigo-500 to-violet-500",bgGlow:"bg-indigo-500/20"}];return k.jsxs("section",{id:"features",className:`pt-20 pb-8 ${n?"bg-white":""}`,children:[k.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-16 px-4",children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs mb-4 ${n?"bg-slate-100 border border-slate-200 text-slate-600 font-medium":"bg-violet-500/10 border border-violet-500/20 text-violet-400"}`,children:[k.jsx(sR,{className:"w-3 h-3"}),k.jsx("span",{children:"Features"})]}),k.jsxs("h2",{className:`text-3xl md:text-4xl font-bold mb-4 ${n?"text-slate-900 tracking-tight":"text-white"}`,children:["Everything You Need to"," ",k.jsx("span",{className:`bg-clip-text text-transparent ${n?"bg-gradient-to-r from-violet-600 to-violet-600 text-violet-600":"bg-gradient-to-r from-violet-400 to-cyan-400"}`,children:"Print Smart"})]}),k.jsx("p",{className:n?"text-slate-600 max-w-lg mx-auto":"text-slate-400",children:"Powerful tools designed specifically for students who want to save ink, paper, and study time."})]}),k.jsx("div",{className:"container mx-auto px-6",children:k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t,r)=>k.jsxs("div",{className:`group relative p-6 rounded-2xl transition-all duration-500 hover:-translate-y-1 ${n?"bg-white border border-slate-200 shadow-sm hover:shadow-md hover:border-slate-300":"bg-slate-900/50 border border-white/5 hover:border-white/10"}`,children:[!n&&k.jsx("div",{className:`absolute inset-0 ${t.bgGlow} rounded-2xl blur-xl opacity-0 group-hover:opacity-30 transition-opacity duration-500`}),k.jsxs("div",{className:"relative",children:[k.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-4 ${n?"bg-slate-100 text-slate-900":`bg-gradient-to-br ${t.gradient} shadow-lg`}`,children:k.jsx(t.icon,{className:`w-6 h-6 ${n?"text-slate-700":"text-white"}`})}),k.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${n?"text-slate-900":"text-white group-hover:text-violet-300"}`,children:t.title}),k.jsx("p",{className:`text-sm leading-relaxed ${n?"text-slate-600":"text-slate-400"}`,children:t.description})]})]},r))})})]})}function ape(){const[n,e]=Me.useState(0),{isLight:t}=Nr(),r=[{icon:MK,title:"Upload PDF",description:"Drag and drop your lecture notes. We support PDFs of any size.",mobileDesc:"Upload your lecture slides instantly.",detail:"Processing happens 100% on your device.",color:"violet",gradient:"from-violet-500 to-purple-600"},{icon:Xhe,title:"Select Pages",description:"Choose pages to keep. Edit content with selection tools.",mobileDesc:"Tap to select the pages you want.",detail:"Remove title slides or standard fillers.",color:"fuchsia",gradient:"from-fuchsia-500 to-pink-600"},{icon:ode,title:"Customize",description:"Configure grid (1-6 slides), colors, and quality settings.",mobileDesc:"Set grid layout & invert colors.",detail:"Save paper by shrinking slides.",color:"cyan",gradient:"from-cyan-500 to-blue-600"},{icon:tN,title:"Preview",description:"Check exactly how your PDF will look before saving.",mobileDesc:"See the result before downloading.",detail:"Compare file size savings instantly.",color:"emerald",gradient:"from-emerald-500 to-teal-600"},{icon:c5,title:"Print",description:"Get your optimized, ink-saving PDF ready for printing.",mobileDesc:"Save ink, paper, and money!",detail:"Perfect for home or shop printing.",color:"amber",gradient:"from-amber-500 to-orange-600"}],s=t?{violet:{bg:"bg-violet-50",border:"border-violet-200",text:"text-violet-600",glow:"shadow-none",line:"bg-violet-200"},fuchsia:{bg:"bg-fuchsia-50",border:"border-fuchsia-200",text:"text-fuchsia-600",glow:"shadow-none",line:"bg-fuchsia-200"},cyan:{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-600",glow:"shadow-none",line:"bg-cyan-200"},emerald:{bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-600",glow:"shadow-none",line:"bg-emerald-200"},amber:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-600",glow:"shadow-none",line:"bg-amber-200"}}:{violet:{bg:"bg-violet-500/10",border:"border-violet-500/30",text:"text-violet-400",glow:"shadow-violet-500/30",line:"bg-violet-500"},fuchsia:{bg:"bg-fuchsia-500/10",border:"border-fuchsia-500/30",text:"text-fuchsia-400",glow:"shadow-fuchsia-500/30",line:"bg-fuchsia-500"},cyan:{bg:"bg-cyan-500/10",border:"border-cyan-500/30",text:"text-cyan-400",glow:"shadow-cyan-500/30",line:"bg-cyan-500"},emerald:{bg:"bg-emerald-500/10",border:"border-emerald-500/30",text:"text-emerald-400",glow:"shadow-emerald-500/30",line:"bg-emerald-500"},amber:{bg:"bg-amber-500/10",border:"border-amber-500/30",text:"text-amber-400",glow:"shadow-amber-500/30",line:"bg-amber-500"}};return k.jsxs("section",{id:"how-it-works",className:`pt-8 pb-20 md:pb-24 relative px-4 overflow-hidden ${t?"bg-white":""}`,children:[k.jsx("div",{className:"absolute inset-0 pointer-events-none",children:t?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"absolute top-1/4 left-0 w-64 md:w-96 h-64 md:h-96 bg-violet-100/50 rounded-full blur-[120px]"}),k.jsx("div",{className:"absolute bottom-1/4 right-0 w-64 md:w-96 h-64 md:h-96 bg-blue-100/40 rounded-full blur-[120px]"})]}):k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"absolute top-1/4 left-0 w-64 md:w-96 h-64 md:h-96 bg-violet-600/10 rounded-full blur-[100px]"}),k.jsx("div",{className:"absolute bottom-1/4 right-0 w-64 md:w-96 h-64 md:h-96 bg-cyan-600/10 rounded-full blur-[100px]"})]})}),k.jsxs("div",{className:`relative z-10 max-w-6xl mx-auto rounded-3xl ${t?"md:p-8":""}`,children:[k.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-12 md:mb-16",children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs mb-4 ${t?"bg-slate-100 border border-slate-200 text-slate-600 font-medium":"bg-slate-900/50 border border-white/10 text-slate-300"}`,children:[k.jsx(sR,{className:`w-3 h-3 ${t?"text-violet-600":"text-violet-400"}`}),k.jsx("span",{children:"Simple Workflow"})]}),k.jsxs("h2",{className:`text-3xl md:text-5xl font-bold mb-4 ${t?"text-slate-900 tracking-tight":"text-white"}`,children:["How it ",k.jsxs("span",{className:`relative inline-block ${t?"text-violet-600":"text-violet-400"}`,children:["Works",k.jsx("svg",{className:"absolute w-full h-3 -bottom-2 left-0",viewBox:"0 0 100 20",preserveAspectRatio:"none",children:k.jsx("path",{d:"M0 10 Q50 20 100 10",fill:"none",stroke:"currentColor",strokeWidth:"4",className:t?"opacity-30":"opacity-50"})})]})]}),k.jsx("p",{className:`text-sm md:text-lg ${t?"text-slate-600":"text-slate-400"}`,children:"From dark slides to printable notes in seconds"})]}),k.jsxs("div",{className:"md:hidden relative max-w-sm mx-auto pl-4",children:[k.jsx("div",{className:`absolute left-[27px] top-6 bottom-6 w-0.5 opacity-30 ${t?"bg-slate-200":"bg-gradient-to-b from-violet-500 via-cyan-500 to-amber-500"}`}),k.jsx("div",{className:"space-y-8",children:r.map((i,a)=>{const o=s[i.color];return k.jsxs("div",{className:"relative flex items-center gap-6 group",children:[k.jsxs("div",{className:`relative z-10 w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 border-2 transition-all duration-300 ${t?"bg-white border-slate-200 shadow-sm":`bg-slate-900 ${o.border} shadow-lg shadow-black/50`}`,children:[!t&&k.jsx("div",{className:`absolute inset-0 rounded-2xl opacity-20 bg-${i.color}-500 blur-md group-hover:opacity-40 transition-opacity`}),k.jsx(i.icon,{className:`w-6 h-6 ${o.text}`}),k.jsx("div",{className:`absolute -top-2 -right-2 w-5 h-5 rounded-full text-[10px] font-bold flex items-center justify-center border-2 ${t?"bg-slate-100 border-white text-slate-900 shadow-sm":"bg-white text-slate-900 border-slate-900"}`,children:a+1})]}),k.jsxs("div",{className:`flex-1 p-4 rounded-xl border transition-colors ${t?"bg-white border-slate-200 shadow-sm":"bg-slate-900/40 border-white/5 backdrop-blur-sm hover:bg-slate-900/60"}`,children:[k.jsx("h3",{className:`font-bold text-base mb-1 ${t?"text-slate-900":"text-white"}`,children:i.title}),k.jsx("p",{className:`text-xs leading-relaxed ${t?"text-slate-600":"text-slate-400"}`,children:i.mobileDesc})]})]},a)})})]}),k.jsxs("div",{className:"hidden md:grid grid-cols-2 gap-12 items-center",children:[k.jsx("div",{className:"space-y-4",children:r.map((i,a)=>{const o=s[i.color],l=n===a;return k.jsxs("div",{onClick:()=>e(a),className:ln("relative p-5 rounded-2xl border cursor-pointer transition-all duration-300 ml-3 group",t?l?"bg-white border-violet-200 shadow-md translate-x-1":"bg-white border-slate-100 hover:border-slate-300 hover:bg-slate-50":l?`${o.bg} ${o.border} shadow-lg ${o.glow}`:"bg-slate-900/30 border-white/5 hover:border-white/10"),children:[k.jsx("div",{className:ln("absolute -left-3 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 border-2",t?l?"bg-violet-600 border-white text-white shadow-md scale-110":"bg-white border-slate-200 text-slate-400":l?`bg-gradient-to-br ${i.gradient} border-transparent text-white shadow-lg`:"bg-slate-900 border-slate-700 text-slate-500"),children:a+1}),k.jsxs("div",{className:"flex items-center gap-4 pl-4",children:[k.jsx("div",{className:ln("w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300",t?l?"bg-violet-50 text-violet-600":"bg-slate-50 text-slate-400":l?`bg-gradient-to-br ${i.gradient} shadow-lg`:"bg-slate-800"),children:k.jsx(i.icon,{className:ln("w-6 h-6",t?l?"text-violet-600":"text-slate-400":l?"text-white":"text-slate-500")})}),k.jsxs("div",{children:[k.jsx("h3",{className:ln("font-semibold text-base transition-colors",t?l?"text-slate-900":"text-slate-500":l?"text-white":"text-slate-400"),children:i.title}),k.jsx("p",{className:ln("text-sm mt-1 transition-colors",t?l?"text-slate-600":"text-slate-400":l?"text-slate-300":"text-slate-500"),children:i.description})]})]})]},a)})}),k.jsxs("div",{className:"relative",children:[k.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:k.jsx("div",{className:ln("w-96 h-96 rounded-full border-2 transition-colors duration-500",t?"border-slate-100 opacity-100":`opacity-20 ${s[r[n].color].border}`)})}),k.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[400px] text-center",children:[k.jsx("div",{className:ln("w-32 h-32 rounded-3xl flex items-center justify-center mb-8 transition-all duration-500 shadow-2xl",t?"bg-white border-2 border-slate-100 shadow-xl":`bg-gradient-to-br ${r[n].gradient}`),children:V_.createElement(r[n].icon,{className:ln("w-16 h-16",t?"text-violet-600":"text-white")})}),k.jsx("h3",{className:`text-3xl font-bold mb-2 ${t?"text-slate-900":"text-white"}`,children:r[n].title}),k.jsx("p",{className:`max-w-sm mx-auto ${t?"text-slate-600":"text-slate-400"}`,children:r[n].detail})]})]})]})]})]})}function ope({onBack:n,onNavigate:e}){const{isLight:t}=Nr(),r=[{value:"100%",label:"Free"},{value:"0",label:"Data Collected"},{value:"Local",label:"Processing"},{value:"No",label:"Login Required"}],s=[{icon:bf,title:"Free Forever",desc:"We believe PDF tools should be accessible to everyone. No paywalls, no subscriptions, just free tools for all.",color:"violet"},{icon:rl,title:"Privacy First",desc:"Your files never leave your device. Everything processes in your browser, ensuring complete privacy and security.",color:"emerald"},{icon:h5,title:"No Login Required",desc:"Use NotesForge instantly without creating an account. Anonymous, simple, and hassle-free.",color:"blue"},{icon:Ig,title:"Built for Students",desc:"Created by students who understand the struggle of expensive PDF tools and the need for privacy.",color:"amber"}],i=[{icon:Khe,title:"Browser-Based Processing",desc:"All PDF processing happens locally in your browser using JavaScript. No servers, no uploads, complete control."},{icon:Dhe,title:"Open & Transparent",desc:"Our approach is open and verifiable. You can inspect the code to confirm we don't collect or store your data."},{icon:Bhe,title:"Works Offline",desc:"Once loaded, NotesForge works even without internet. Process PDFs anywhere, anytime."}],a=[{icon:Of,name:"PDF-lib",desc:"PDF Processing"},{icon:FK,name:"PDF.js",desc:"PDF Rendering"},{icon:RK,name:"WebAssembly",desc:"Fast Computation"},{icon:ox,name:"Browser Security",desc:"Local Processing"}],o=t?{violet:"bg-violet-50 text-violet-700 border border-violet-100",emerald:"bg-emerald-50 text-emerald-700 border border-emerald-100",blue:"bg-blue-50 text-blue-700 border border-blue-100",amber:"bg-amber-50 text-amber-700 border border-amber-100"}:{violet:"bg-violet-500/20 text-violet-400",emerald:"bg-emerald-500/20 text-emerald-400",blue:"bg-blue-500/20 text-blue-400",amber:"bg-amber-500/20 text-amber-400"};return k.jsxs("div",{className:"max-w-4xl mx-auto pt-4 space-y-8 pb-12",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${t?"text-gray-500 hover:text-gray-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:`text-center space-y-4 ${t?"mt-4":""}`,children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs mb-2 ${t?"bg-slate-100 border border-slate-200 text-slate-600 font-medium":"bg-violet-500/20 border border-violet-500/30 text-violet-300"}`,children:[k.jsx(rl,{className:"w-3 h-3"}),"Privacy-First PDF Tools"]}),k.jsxs("h1",{className:`text-3xl md:text-4xl font-bold ${t?"text-slate-900 tracking-tight":"text-white"}`,children:["About"," ",k.jsx("span",{className:`bg-clip-text text-transparent ${t?"bg-gradient-to-r from-violet-700 to-violet-600 text-violet-700":"bg-gradient-to-r from-violet-400 to-purple-400"}`,children:"NotesForge"})]}),k.jsx("p",{className:`max-w-2xl mx-auto text-lg ${t?"text-slate-600 font-normal":"text-slate-400"}`,children:"Free, privacy-first PDF tools that work entirely in your browser"}),k.jsx("p",{className:"max-w-xl mx-auto text-sm text-slate-500",children:"Transform dark lecture slides into printer-friendly documents with zero uploads and complete privacy."})]}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.map((l,c)=>k.jsxs("div",{className:`p-5 rounded-xl text-center transition-colors ${t?"bg-white border border-slate-200 shadow-sm hover:border-slate-300":"bg-slate-900/50 border border-white/5 hover:border-violet-500/30"}`,children:[k.jsx("div",{className:`text-2xl md:text-3xl font-bold bg-clip-text text-transparent ${t?"bg-gradient-to-r from-slate-900 to-slate-700 text-slate-900":"bg-gradient-to-r from-violet-400 to-purple-400"}`,children:l.value}),k.jsx("div",{className:`text-sm mt-1 ${t?"text-slate-600":"text-slate-400"}`,children:l.label})]},c))}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[k.jsxs("div",{className:`p-4 rounded-xl text-center space-y-2 transition-colors ${t?"bg-white border border-slate-200 shadow-sm hover:border-slate-300":"bg-slate-900/50 border border-white/5 hover:border-violet-500/30"}`,children:[k.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mx-auto ${t?"bg-violet-100":"bg-violet-500/20"}`,children:k.jsx(dde,{className:`w-5 h-5 ${t?"text-violet-600":"text-violet-400"}`})}),k.jsx("h3",{className:`font-semibold text-sm ${t?"text-slate-800":"text-white"}`,children:"Our Mission"}),k.jsx("p",{className:`text-xs ${t?"text-slate-600":"text-slate-400"}`,children:"Make quality education materials accessible by optimizing notes for affordable printing."})]}),k.jsxs("div",{className:`p-4 rounded-xl text-center space-y-2 transition-colors ${t?"bg-white border border-slate-200 shadow-sm hover:border-slate-300":"bg-slate-900/50 border border-white/5 hover:border-emerald-500/30"}`,children:[k.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mx-auto ${t?"bg-emerald-100":"bg-emerald-500/20"}`,children:k.jsx(rl,{className:`w-5 h-5 ${t?"text-emerald-600":"text-emerald-400"}`})}),k.jsx("h3",{className:`font-semibold text-sm ${t?"text-slate-800":"text-white"}`,children:"Privacy First"}),k.jsx("p",{className:`text-xs ${t?"text-slate-600":"text-slate-400"}`,children:"Your documents never leave your device. All processing happens locally in your browser."})]}),k.jsxs("div",{className:`p-4 rounded-xl text-center space-y-2 transition-colors ${t?"bg-white border border-slate-200 shadow-sm hover:border-slate-300":"bg-slate-900/50 border border-white/5 hover:border-fuchsia-500/30"}`,children:[k.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mx-auto ${t?"bg-fuchsia-100":"bg-fuchsia-500/20"}`,children:k.jsx(bf,{className:`w-5 h-5 ${t?"text-fuchsia-600":"text-fuchsia-400"}`})}),k.jsx("h3",{className:`font-semibold text-sm ${t?"text-slate-800":"text-white"}`,children:"Forever Free"}),k.jsx("p",{className:`text-xs ${t?"text-slate-600":"text-slate-400"}`,children:"No subscriptions, no hidden costs, no watermarks. NotesForge will always be 100% free."})]})]}),k.jsxs("div",{className:"space-y-6",children:[k.jsx("h2",{className:`text-2xl font-bold text-center ${t?"text-slate-900":"text-white"}`,children:"Our Core Values"}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map((l,c)=>k.jsxs("div",{className:`p-5 rounded-xl transition-all group ${t?"bg-white border border-slate-200 shadow-sm hover:shadow-md hover:border-slate-300":"bg-slate-900/50 border border-white/5 hover:border-violet-500/30"}`,children:[k.jsx("div",{className:`w-12 h-12 rounded-lg ${o[l.color]} flex items-center justify-center mb-4 group-hover:scale-105 transition-transform`,children:k.jsx(l.icon,{className:"w-6 h-6"})}),k.jsx("h3",{className:`font-bold text-lg mb-2 ${t?"text-slate-900":"text-white"}`,children:l.title}),k.jsx("p",{className:`text-sm leading-relaxed ${t?"text-slate-600":"text-slate-400"}`,children:l.desc})]},c))})]}),k.jsxs("div",{className:`p-5 rounded-xl ${t?"bg-white border border-slate-200 shadow-sm":"bg-slate-900/50 border border-white/5"}`,children:[k.jsxs("h2",{className:`text-lg font-bold mb-3 flex items-center gap-2 ${t?"text-slate-900":"text-white"}`,children:[k.jsx(_K,{className:"w-5 h-5 text-cyan-400"}),"Why NotesForge"]}),k.jsxs("div",{className:`space-y-3 leading-relaxed text-sm ${t?"text-slate-600":"text-slate-300"}`,children:[k.jsx("p",{children:"NotesForge was born out of frustration. As students preparing for competitive exams, we found ourselves spending a fortune on ink cartridges just to print our lecture notes  most of which had dark backgrounds that consumed excessive ink."}),k.jsx("p",{children:"We looked for solutions but found nothing that was free, private, and actually worked well. So we built NotesForge  a tool that does exactly what we needed: converts dark slides to printer-friendly format, arranges multiple slides per page, and does it all without uploading your files anywhere."}),k.jsx("p",{children:"Today, NotesForge helps thousands of students save money on printing while keeping their study materials private and secure."})]})]}),k.jsxs("div",{className:`p-5 rounded-xl ${t?"bg-violet-50/50 border border-violet-100":"bg-gradient-to-br from-violet-900/20 to-fuchsia-900/10 border border-violet-500/20"}`,children:[k.jsxs("h2",{className:`text-lg font-bold mb-3 flex items-center gap-2 ${t?"text-slate-900":"text-white"}`,children:[k.jsx(l5,{className:"w-5 h-5 text-amber-400"}),"Story Behind NotesForge"]}),k.jsxs("div",{className:`space-y-3 leading-relaxed text-sm ${t?"text-slate-600":"text-slate-300"}`,children:[k.jsx("p",{children:"During my IIT JEE preparation journey (and now in GATE), I stepped into a whole new era of digital learning. Online classes were packed with information, and it felt impossible to capture everything in my notes. I often spent hours trying to organize content, only to feel that I was falling behind. It was frustrating, exhausting, and overwhelming  yet I knew there had to be a better way."}),k.jsxs("p",{children:["That's when ",k.jsx("span",{className:`font-medium ${t?"text-violet-700":"text-violet-400"}`,children:"NotesForge"})," was born. I created a platform that turns digital lessons and slides into clear, printable notes, saving precious time, reducing effort, and allowing students to focus on learning, understanding, and achieving their goals."]})]})]}),k.jsxs("div",{className:"space-y-6",children:[k.jsx("h2",{className:`text-2xl font-bold text-center ${t?"text-slate-900":"text-white"}`,children:"What We Do"}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.map((l,c)=>k.jsxs("div",{className:`p-5 rounded-2xl text-center transition-all ${t?"bg-white border border-slate-200 shadow-sm hover:border-violet-300":"bg-slate-900/50 border border-white/5 hover:border-violet-500/30"}`,children:[k.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4 ${t?"bg-violet-100":"bg-gradient-to-br from-violet-500/20 to-purple-500/20"}`,children:k.jsx(l.icon,{className:`w-7 h-7 ${t?"text-violet-600":"text-violet-400"}`})}),k.jsx("h3",{className:`font-bold mb-2 ${t?"text-slate-900":"text-white"}`,children:l.title}),k.jsx("p",{className:`text-sm leading-relaxed ${t?"text-slate-600":"text-slate-400"}`,children:l.desc})]},c))})]}),k.jsxs("div",{className:`p-6 rounded-2xl ${t?"bg-violet-50 border border-violet-100":"bg-gradient-to-br from-violet-900/20 to-purple-900/10 border border-violet-500/20"}`,children:[k.jsx("h2",{className:`text-xl font-bold text-center mb-6 ${t?"text-slate-900":"text-white"}`,children:"Powered by Modern Browser Technology"}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map((l,c)=>k.jsxs("div",{className:`text-center p-4 rounded-xl transition-colors ${t?"bg-white border border-violet-100 hover:border-violet-300 shadow-sm":"bg-white/5 border border-white/10 hover:border-violet-500/30"}`,children:[k.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-3 ${t?"bg-violet-100":"bg-violet-500/20"}`,children:k.jsx(l.icon,{className:`w-6 h-6 ${t?"text-violet-600":"text-violet-400"}`})}),k.jsx("div",{className:`font-semibold text-sm ${t?"text-slate-900":"text-white"}`,children:l.name}),k.jsx("div",{className:`text-xs mt-1 ${t?"text-slate-600":"text-slate-500"}`,children:l.desc})]},c))})]}),k.jsxs("div",{className:`text-center p-5 rounded-2xl ${t?"bg-slate-100 border border-slate-200":"bg-slate-900/50 border border-white/5"}`,children:[k.jsx("h3",{className:`font-bold mb-2 ${t?"text-slate-900":"text-white"}`,children:"Want to see how it works?"}),k.jsx("p",{className:`text-sm mb-4 ${t?"text-slate-600":"text-slate-400"}`,children:"Check out our step-by-step guide on the homepage."}),k.jsxs("button",{onClick:()=>{n(),setTimeout(()=>{const l=document.getElementById("how-it-works");l&&l.scrollIntoView({behavior:"smooth"})},100)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t?"bg-violet-600 hover:bg-violet-700 text-white shadow-sm":"bg-violet-600 hover:bg-violet-500 text-white"}`,children:[k.jsx(Ig,{className:"w-4 h-4"}),"See How It Works"]})]}),k.jsxs("div",{className:`flex flex-wrap justify-center gap-4 pt-4 border-t text-xs ${t?"border-gray-200 text-gray-500":"border-white/5 text-slate-500"}`,children:[k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(Eg,{className:"w-3 h-3 text-emerald-500"}),"100% Browser-Based"]}),k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(rl,{className:"w-3 h-3 text-emerald-500"}),"Zero Data Collection"]}),k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(ox,{className:"w-3 h-3 text-emerald-500"}),"No Account Required"]}),k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(bf,{className:"w-3 h-3 text-emerald-500"}),"Free Forever"]})]})]})}function lpe({onBack:n}){const{isLight:e}=Nr(),[t,r]=Me.useState(""),[s,i]=Me.useState("getting-started"),[a,o]=Me.useState(null),l=[{id:"getting-started",icon:MK,title:"Getting Started",color:"violet",faqs:[{q:"How do I upload a PDF?",a:"Click the 'Process Your Notes' button on the homepage, then drag and drop your PDF file into the upload zone, or click to browse and select your file."},{q:"What file types are supported?",a:"Currently, NotesForge supports PDF files only. We're working on adding support for images and PowerPoint files in future updates."},{q:"Is there a file size limit?",a:"Since all processing happens locally in your browser, the only limit is your device's memory. For best performance, we recommend files under 50MB."},{q:"Can I upload multiple PDFs at once?",a:"Yes! After uploading your first PDF, click the '+ Add more PDFs' button to add additional files. All pages will be combined in the output."}]},{id:"editing",icon:ude,title:"Editing & Enhancement",color:"fuchsia",faqs:[{q:"How do I invert colors on specific areas?",a:"In the page selection step, click the pencil icon on any page thumbnail. Use the Rectangle or Circle tool to select an area, choose 'Invert Colors' action, and draw on the area you want to invert."},{q:"What does 'Clear PDF Background' do?",a:"This feature detects the dominant background color and replaces it with white, while preserving all text and annotations. It's perfect for dark-themed slides."},{q:"How does watermark removal work?",a:"NotesForge analyzes color patterns to detect semi-transparent watermarks and logos. It then removes them while preserving the original content."},{q:"What's the difference between Grayscale and Black & White?",a:"Grayscale converts your document to shades of gray (smooth gradients). Black & White converts to pure black and white only (high contrast, best for text-heavy documents)."}]},{id:"layout",icon:lde,title:"Layout & Formatting",color:"cyan",faqs:[{q:"How do I fit multiple slides per page?",a:"In the Settings panel, adjust the 'Rows' and 'Columns' values. For example, 3 rows  2 columns = 6 slides per page."},{q:"How do I change the orientation?",a:"In the Layout section, select either 'Portrait' or 'Landscape'. The preview will update to show your selection."},{q:"Can I adjust margins?",a:"Yes! Use the 'Page Margin' and 'Cell Padding' sliders in the Layout section to control spacing."},{q:"What do separation lines/borders do?",a:"When enabled, a thin gray line is drawn around each slide cell, making it easier to cut or fold printed pages."}]},{id:"output",icon:tN,title:"Output & Downloads",color:"emerald",faqs:[{q:"How do I preview before downloading?",a:"After processing completes, click the 'Preview' button to open the PDF in a new browser tab before downloading."},{q:"What quality settings should I use?",a:"Use 'Low' for smaller files and faster processing, 'Medium' for balanced quality (recommended), or 'High' for best print quality."},{q:"Why is my output file larger than expected?",a:"Higher quality settings and more slides result in larger files. Try reducing quality to 'Medium' or 'Low' if file size is a concern."}]},{id:"privacy",icon:rl,title:"Privacy & Security",color:"amber",faqs:[{q:"Are my files uploaded to any server?",a:"No! All processing happens locally in your browser using JavaScript. Your files never leave your device."},{q:"Do you store any of my data?",a:"We don't store any personal data or documents. NotesForge is completely privacy-focused."},{q:"Is NotesForge safe to use?",a:"Yes! We use industry-standard libraries (PDF.js, pdf-lib) and all code runs locally. No external servers are involved in processing."}]}],c={violet:{bg:"bg-violet-500/20",text:"text-violet-400",border:"border-violet-500/30"},fuchsia:{bg:"bg-fuchsia-500/20",text:"text-fuchsia-400",border:"border-fuchsia-500/30"},cyan:{bg:"bg-cyan-500/20",text:"text-cyan-400",border:"border-cyan-500/30"},emerald:{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30"},amber:{bg:"bg-amber-500/20",text:"text-amber-400",border:"border-amber-500/30"}},u=l.map(h=>({...h,faqs:h.faqs.filter(d=>d.q.toLowerCase().includes(t.toLowerCase())||d.a.toLowerCase().includes(t.toLowerCase()))})).filter(h=>h.faqs.length>0||!t);return k.jsx("div",{className:`min-h-screen ${e?"bg-white":""}`,children:k.jsxs("div",{className:"max-w-4xl mx-auto py-6 space-y-8 px-4",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${e?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:"text-center space-y-3",children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs ${e?"bg-cyan-50 border border-cyan-200 text-cyan-700 font-medium":"bg-cyan-500/10 border border-cyan-500/20 text-cyan-400"}`,children:[k.jsx(o5,{className:"w-3 h-3"}),k.jsx("span",{children:"Help Center"})]}),k.jsxs("h1",{className:`text-2xl md:text-3xl font-bold ${e?"text-slate-900":"text-white"}`,children:["How Can We"," ",k.jsx("span",{className:`bg-clip-text text-transparent ${e?"bg-gradient-to-r from-cyan-600 to-cyan-500 text-cyan-600":"bg-gradient-to-r from-cyan-400 to-emerald-400"}`,children:"Help You?"})]}),k.jsx("p",{className:`text-sm max-w-md mx-auto ${e?"text-slate-500":"text-slate-400"}`,children:"Find answers to common questions about NotesForge"}),k.jsxs("div",{className:"relative max-w-md mx-auto",children:[k.jsx(rde,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${e?"text-slate-400":"text-slate-500"}`}),k.jsx("input",{type:"text",placeholder:"Search for help...",value:t,onChange:h=>r(h.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none transition-all ${e?"bg-white border border-slate-200 text-slate-900 placeholder-slate-400 focus:border-cyan-500 shadow-sm":"bg-slate-900 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500"}`})]})]}),k.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:l.map(h=>{const d=c[h.color];return k.jsxs("button",{onClick:()=>i(h.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs transition-all ${s===h.id?`${d.bg} ${d.text} ${d.border} border font-medium`:e?"bg-white text-slate-600 border border-slate-200 hover:border-slate-300 shadow-sm":"bg-slate-900/50 text-slate-400 border border-white/5 hover:border-white/10"}`,children:[k.jsx(h.icon,{className:"w-3 h-3"}),h.title]},h.id)})}),k.jsx("div",{className:"space-y-4",children:u.map(h=>{const d=c[h.color];return!(s===h.id||t)&&!t?null:k.jsxs("div",{className:"space-y-2",children:[k.jsxs("h2",{className:`text-sm font-medium flex items-center gap-2 ${d.text}`,children:[k.jsx(h.icon,{className:"w-4 h-4"}),h.title]}),k.jsx("div",{className:"space-y-1",children:h.faqs.map((p,m)=>{const y=`${h.id}-${m}`;return k.jsxs("div",{className:`rounded-lg overflow-hidden transition-all ${e?"bg-white border border-slate-200 shadow-sm hover:border-cyan-300":"bg-slate-900/50 border border-white/5"}`,children:[k.jsxs("button",{onClick:()=>o(a===y?null:y),className:"w-full flex items-center justify-between p-3 text-left",children:[k.jsx("span",{className:`text-sm ${e?"text-slate-800":"text-white"}`,children:p.q}),a===y?k.jsx(_he,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}):k.jsx(Ihe,{className:`w-4 h-4 flex-shrink-0 ${e?"text-slate-400":"text-slate-500"}`})]}),a===y&&k.jsx("div",{className:"px-3 pb-3",children:k.jsx("p",{className:`text-xs leading-relaxed ${e?"text-slate-600":"text-slate-400"}`,children:p.a})})]},m)})})]},h.id)})}),k.jsxs("div",{className:`p-6 rounded-xl text-center border ${e?"bg-cyan-50 border-cyan-100":"bg-gradient-to-br from-cyan-900/20 to-emerald-900/10 border-cyan-500/20"}`,children:[k.jsx(qhe,{className:`w-6 h-6 mx-auto mb-2 ${e?"text-cyan-600":"text-cyan-400"}`}),k.jsx("h3",{className:`text-base font-semibold mb-1 ${e?"text-slate-900":"text-white"}`,children:"Still Need Help?"}),k.jsx("p",{className:`text-xs mb-3 ${e?"text-slate-600":"text-slate-400"}`,children:"Can't find what you're looking for?"}),k.jsx("a",{href:"mailto:abhayk7481@gmail.com",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e?"bg-cyan-600 text-white hover:bg-cyan-700 shadow-sm":"bg-cyan-600 text-white hover:bg-cyan-500"}`,children:"Contact Support"})]})]})})}function cpe({onBack:n}){const[e,t]=Me.useState(!1),r="notesforage@ptyes",{isLight:s}=Nr(),i=()=>{navigator.clipboard.writeText(r),t(!0),setTimeout(()=>t(!1),2e3)},a=()=>{const h=`upi://pay?pa=${r}&pn=NotesForge&cu=INR`;window.location.href=h},o=()=>{window.open("https://razorpay.me/@abhay07","_blank")},l=()=>{window.open("https://buymeacoffee.com/abhay07","_blank")},c=[{icon:nde,title:"Powerful New Features",desc:"AI enhancements & new tools"},{icon:PK,title:"Always Free Forever",desc:"Zero-cost access for everyone"},{icon:ade,title:"Better Performance",desc:"Faster processing & quality"},{icon:h5,title:"Growing Community",desc:"Reaching more students"}],u=["Share NotesForge with friends, classmates, and colleagues","Provide feedback and feature suggestions to help us improve","Write a review or testimonial about your experience"];return k.jsxs("div",{className:"max-w-3xl mx-auto pt-4 space-y-6 pb-8",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${s?"text-gray-500 hover:text-gray-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:"text-center space-y-4",children:[k.jsxs("div",{className:"relative inline-block",children:[k.jsx("div",{className:`absolute inset-0 rounded-full blur-xl animate-pulse ${s?"bg-violet-300/40":"bg-violet-500/30"}`}),k.jsx("div",{className:"relative w-16 h-16 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center mx-auto shadow-lg shadow-violet-500/30",children:k.jsx(bf,{className:"w-8 h-8 text-white"})})]}),k.jsxs("h1",{className:`text-3xl md:text-4xl font-bold ${s?"text-gray-900":"text-white"}`,children:["Support"," ",k.jsx("span",{className:`bg-clip-text text-transparent ${s?"bg-gradient-to-r from-violet-600 to-purple-600":"bg-gradient-to-r from-violet-400 to-purple-400"}`,children:"NotesForge"})]}),k.jsx("p",{className:`max-w-md mx-auto ${s?"text-gray-600":"text-slate-400"}`,children:"Help us bring powerful new features and keep NotesForge free forever for everyone"})]}),k.jsxs("div",{className:`p-6 rounded-2xl shadow-xl ${s?"bg-gradient-to-br from-violet-100 via-purple-50 to-fuchsia-50 border border-violet-200":"bg-gradient-to-br from-violet-600/30 via-purple-600/20 to-fuchsia-600/20 border border-violet-500/30"}`,children:[k.jsxs("div",{className:"text-center mb-5",children:[k.jsx("h2",{className:`text-xl font-bold mb-1 ${s?"text-gray-900":"text-white"}`,children:"Support NotesForge"}),k.jsx("p",{className:`text-sm italic ${s?"text-violet-600/70":"text-violet-200/70"}`,children:"Every contribution, no matter how small, makes a big difference"})]}),k.jsxs("div",{className:"p-5 rounded-xl bg-white mb-4 shadow-sm",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center",children:k.jsx(iL,{className:"w-4 h-4 text-violet-600"})}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-bold text-slate-800",children:"Support via UPI (India)"}),k.jsx("p",{className:"text-xs text-slate-500",children:"Scan QR or use UPI ID"})]})]}),k.jsxs("div",{className:"flex flex-col md:flex-row gap-5 items-center",children:[k.jsxs("div",{className:"flex-shrink-0 text-center",children:[k.jsx("div",{className:"p-3 bg-slate-50 rounded-xl border-2 border-dashed border-violet-200",children:k.jsx("img",{src:"/upi-qr.png",alt:"UPI QR Code",className:"w-28 h-28 object-contain",onError:h=>{h.target.style.display="none",h.target.parentElement.innerHTML='<div class="w-28 h-28 bg-violet-50 rounded-lg flex items-center justify-center"><span class="text-xs text-violet-400">QR Code</span></div>'}})}),k.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Scan to Pay"})]}),k.jsxs("div",{className:"flex-1 w-full space-y-3",children:[k.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-slate-100 border border-slate-200",children:[k.jsx(Jhe,{className:"w-4 h-4 text-violet-500"}),k.jsx("span",{className:"flex-1 font-mono text-slate-700 font-medium",children:r}),k.jsx("button",{onClick:i,className:"p-2 rounded-lg bg-white hover:bg-slate-50 transition-colors border border-slate-200",children:e?k.jsx(rR,{className:"w-4 h-4 text-emerald-500"}):k.jsx(Ohe,{className:"w-4 h-4 text-slate-500"})})]}),k.jsxs(Cs,{onClick:a,className:"w-full gap-2 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white shadow-lg",children:[k.jsx(iL,{className:"w-4 h-4"}),"Open UPI App & Pay"]})]})]})]}),k.jsxs("div",{className:"p-5 rounded-xl bg-white shadow-sm",children:[k.jsx("h3",{className:"font-bold text-slate-800 mb-1 text-center",children:"Other Payment Methods"}),k.jsx("p",{className:"text-xs text-slate-500 text-center mb-4",children:"Secure payments via trusted platforms"}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[k.jsxs("button",{onClick:o,className:"flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-purple-500 to-violet-600 hover:from-purple-400 hover:to-violet-500 transition-all group shadow-md",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center flex-shrink-0",children:k.jsx(Lhe,{className:"w-5 h-5 text-white"})}),k.jsxs("div",{className:"text-left",children:[k.jsx("span",{className:"font-bold text-white block",children:"Razorpay"}),k.jsx("span",{className:"text-xs text-purple-100",children:"Cards, Netbanking"})]})]}),k.jsx(GU,{className:"w-4 h-4 text-white/70 group-hover:text-white"})]}),k.jsxs("button",{onClick:l,className:"flex items-center justify-between p-4 rounded-xl bg-amber-400 hover:bg-amber-300 transition-all group shadow-md",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center flex-shrink-0",children:k.jsx(Fhe,{className:"w-5 h-5 text-amber-900"})}),k.jsxs("div",{className:"text-left",children:[k.jsx("span",{className:"font-bold text-amber-900 block",children:"Buy Me a Coffee"}),k.jsx("span",{className:"text-xs text-amber-800/80",children:"Support Project"})]})]}),k.jsx(GU,{className:"w-4 h-4 text-amber-900/60 group-hover:text-amber-900"})]})]})]})]}),k.jsxs("div",{className:`p-5 rounded-xl ${s?"bg-violet-50 border border-violet-200":"bg-violet-500/10 border border-violet-500/20"}`,children:[k.jsx("h3",{className:`font-bold mb-3 ${s?"text-gray-900":"text-white"}`,children:"Other Ways to Help"}),k.jsx("div",{className:"space-y-2",children:u.map((h,d)=>k.jsxs("div",{className:"flex items-start gap-3 p-2",children:[k.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 ${s?"bg-violet-200":"bg-violet-500/20"}`,children:k.jsx(Eg,{className:`w-3 h-3 ${s?"text-violet-600":"text-violet-400"}`})}),k.jsx("span",{className:`text-sm ${s?"text-gray-700":"text-slate-300"}`,children:h})]},d))})]}),k.jsxs("div",{className:`p-5 rounded-xl ${s?"bg-white border border-gray-200 shadow-sm":"bg-slate-900/50 border border-white/5"}`,children:[k.jsx("h2",{className:`text-lg font-bold mb-4 text-center ${s?"text-gray-900":"text-white"}`,children:"Why Your Support Matters"}),k.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map((h,d)=>k.jsxs("div",{className:`p-4 rounded-xl transition-colors ${s?"bg-gray-50 border border-gray-200 hover:border-violet-300":"bg-slate-800/50 border border-white/5 hover:border-violet-500/30"}`,children:[k.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mb-3 ${s?"bg-violet-100":"bg-gradient-to-br from-violet-500/20 to-purple-500/20"}`,children:k.jsx(h.icon,{className:`w-5 h-5 ${s?"text-violet-600":"text-violet-400"}`})}),k.jsx("h4",{className:`font-semibold text-sm mb-1 ${s?"text-gray-900":"text-white"}`,children:h.title}),k.jsx("p",{className:`text-xs ${s?"text-gray-600":"text-slate-400"}`,children:h.desc})]},d))})]}),k.jsxs("div",{className:`flex flex-wrap justify-center gap-4 pt-3 border-t text-xs ${s?"border-gray-200 text-gray-500":"border-white/5 text-slate-500"}`,children:[k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(Eg,{className:"w-3 h-3 text-emerald-500"}),"Free Forever"]}),k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(ox,{className:"w-3 h-3 text-emerald-500"}),"No Login"]}),k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(rl,{className:"w-3 h-3 text-emerald-500"}),"No Watermarks"]}),k.jsxs("span",{className:"flex items-center gap-1",children:[k.jsx(Ig,{className:"w-3 h-3 text-emerald-500"}),"Local Processing"]})]}),k.jsxs("div",{className:`text-center p-5 rounded-xl ${s?"bg-gradient-to-br from-violet-100 to-purple-50 border border-violet-200":"bg-gradient-to-br from-violet-900/30 to-purple-900/20 border border-violet-500/20"}`,children:[k.jsx(sR,{className:"w-6 h-6 text-amber-400 mx-auto mb-2"}),k.jsx("h3",{className:`text-lg font-semibold mb-1 ${s?"text-gray-900":"text-white"}`,children:"Thank You!"}),k.jsx("p",{className:`text-sm ${s?"text-gray-600":"text-slate-400"}`,children:"Your support means the world to us! Every contribution helps keep NotesForge free for students worldwide."})]})]})}function upe({onBack:n}){const{isLight:e}=Nr(),[t,r]=Me.useState({name:"",email:"",type:"feedback",message:""}),[s,i]=Me.useState(!1),[a,o]=Me.useState(!1),l=[{value:"feedback",label:"General Feedback",icon:qU,color:"violet"},{value:"feature",label:"Feature Request",icon:l5,color:"amber"},{value:"bug",label:"Report a Bug",icon:Ehe,color:"red"},{value:"help",label:"Need Help",icon:o5,color:"blue"}],c=h=>{r({...t,[h.target.name]:h.target.value})},u=h=>{h.preventDefault(),o(!0);const d=encodeURIComponent(`[NotesForge ${t.type}] ${t.name}`),f=encodeURIComponent(`Name: ${t.name}
Email: ${t.email}
Type: ${t.type}

Message:
${t.message}`);window.location.href=`mailto:abhayk7481@gmail.com?subject=${d}&body=${f}`,setTimeout(()=>{o(!1),i(!0)},500)};return s?k.jsxs("div",{className:"max-w-2xl mx-auto pt-4 pb-8",children:[k.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm mb-8",children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:`text-center p-8 rounded-2xl border ${e?"bg-emerald-50 border-emerald-100":"bg-gradient-to-br from-emerald-900/30 to-teal-900/20 border-emerald-500/30"}`,children:[k.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${e?"bg-emerald-100":"bg-emerald-500/20"}`,children:k.jsx(Eg,{className:`w-8 h-8 ${e?"text-emerald-600":"text-emerald-400"}`})}),k.jsx("h2",{className:`text-2xl font-bold mb-2 ${e?"text-slate-900":"text-white"}`,children:"Email Client Opened!"}),k.jsx("p",{className:`mb-6 ${e?"text-slate-600":"text-slate-400"}`,children:"Your email client should have opened with your message pre-filled. Just hit send to reach us!"}),k.jsx(Cs,{onClick:()=>i(!1),variant:"secondary",children:"Send Another Message"})]})]}):k.jsxs("div",{className:"max-w-2xl mx-auto pt-4 space-y-6 pb-8",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${e?"text-gray-500 hover:text-gray-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:"text-center space-y-3",children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs ${e?"bg-violet-50 border border-violet-200 text-violet-600":"bg-violet-500/10 border border-violet-500/20 text-violet-400"}`,children:[k.jsx(qU,{className:"w-3 h-3"}),k.jsx("span",{children:"Get in Touch"})]}),k.jsxs("h1",{className:`text-3xl md:text-4xl font-bold ${e?"text-gray-900":"text-white"}`,children:["Contact"," ",k.jsx("span",{className:`bg-clip-text text-transparent ${e?"bg-gradient-to-r from-violet-600 to-cyan-500":"bg-gradient-to-r from-violet-400 to-cyan-400"}`,children:"Us"})]}),k.jsx("p",{className:`max-w-md mx-auto text-sm ${e?"text-gray-600":"text-slate-400"}`,children:"Have feedback, feature requests, or found a bug? We'd love to hear from you!"})]}),k.jsxs("form",{onSubmit:u,className:`p-6 rounded-2xl border space-y-5 ${e?"bg-white border-slate-200 shadow-sm":"bg-slate-900/50 border-white/5"}`,children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-700":"text-slate-300"}`,children:"Your Name"}),k.jsx("input",{type:"text",name:"name",value:t.name,onChange:c,required:!0,placeholder:"John Doe",className:`w-full px-4 py-3 rounded-xl border transition-colors ${e?"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-400 focus:border-violet-500 focus:bg-white":"bg-slate-800 border-slate-700 text-white placeholder-slate-500 focus:border-violet-500"}`})]}),k.jsxs("div",{children:[k.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-700":"text-slate-300"}`,children:"Your Email"}),k.jsx("input",{type:"email",name:"email",value:t.email,onChange:c,required:!0,placeholder:"john@example.com",className:`w-full px-4 py-3 rounded-xl border transition-colors ${e?"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-400 focus:border-violet-500 focus:bg-white":"bg-slate-800 border-slate-700 text-white placeholder-slate-500 focus:border-violet-500"}`})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:`block text-sm font-medium mb-3 ${e?"text-slate-700":"text-slate-300"}`,children:"What's this about?"}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:l.map(h=>k.jsxs("button",{type:"button",onClick:()=>r({...t,type:h.value}),className:`p-3 rounded-xl border text-center transition-all ${t.type===h.value?e?"bg-violet-100 border-violet-200 text-violet-700":"bg-violet-500/20 border-violet-500 text-violet-400":e?"bg-slate-50 border-slate-200 text-slate-600 hover:border-slate-300 hover:bg-slate-100":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:[k.jsx(h.icon,{className:"w-5 h-5 mx-auto mb-1"}),k.jsx("span",{className:"text-xs font-medium",children:h.label})]},h.value))})]}),k.jsxs("div",{children:[k.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-700":"text-slate-300"}`,children:"Your Message"}),k.jsx("textarea",{name:"message",value:t.message,onChange:c,required:!0,rows:5,placeholder:"Tell us what's on your mind...",className:`w-full px-4 py-3 rounded-xl border transition-colors resize-none ${e?"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-400 focus:border-violet-500 focus:bg-white":"bg-slate-800 border-slate-700 text-white placeholder-slate-500 focus:border-violet-500"}`})]}),k.jsx(Cs,{type:"submit",disabled:a,className:`w-full gap-2 ${e?"bg-violet-600 hover:bg-violet-700 text-white shadow-md":"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500"}`,children:a?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Opening Email..."]}):k.jsxs(k.Fragment,{children:[k.jsx(sde,{className:"w-4 h-4"}),"Send Message"]})}),k.jsx("p",{className:"text-xs text-slate-500 text-center",children:"This will open your email client with the message pre-filled."})]}),k.jsxs("div",{className:`text-center p-4 rounded-xl border ${e?"bg-slate-50 border-slate-200":"bg-slate-900/30 border-white/5"}`,children:[k.jsx(sR,{className:`w-5 h-5 mx-auto mb-2 ${e?"text-amber-500":"text-amber-400"}`}),k.jsxs("p",{className:`text-sm ${e?"text-slate-600":"text-slate-400"}`,children:["We typically respond within ",k.jsx("span",{className:`font-medium ${e?"text-slate-900":"text-white"}`,children:"24-48 hours"})]})]})]})}function hpe({onBack:n}){const{isLight:e}=Nr(),t=[{title:"The Technology Behind NotesForge",icon:RK,color:"violet",content:k.jsxs("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:[k.jsxs("p",{children:["NotesForge is built on a modern, client-side architecture that prioritizes privacy and performance. Unlike traditional PDF tools that upload your files to a server, we use ",k.jsx("strong",{className:e?"text-violet-700":"",children:"WebAssembly (WASM)"}),"to run powerful PDF processing libraries directly in your browser."]}),k.jsx("h4",{className:`${e?"text-slate-900":"text-white"} font-semibold mt-4`,children:"Key Technologies:"}),k.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[k.jsxs("li",{children:[k.jsx("strong",{className:"text-violet-400",children:"React & Tailwind CSS:"})," For a fast, responsive, and beautiful user interface."]}),k.jsxs("li",{children:[k.jsx("strong",{className:"text-violet-400",children:"PDF-lib:"})," A powerful library for modifying documents (splitting, merging, inverting colors) entirely in JavaScript."]}),k.jsxs("li",{children:[k.jsx("strong",{className:"text-violet-400",children:"PDF.js:"})," The industry standard for rendering PDF pages for preview without external dependencies."]}),k.jsxs("li",{children:[k.jsx("strong",{className:"text-violet-400",children:"JSZip:"})," For efficient file handling and compression when dealing with multiple documents."]})]}),k.jsx("p",{children:`This stack ensures that your data never leaves your device  "The cloud is just someone else's computer," and we believe your study notes should stay on yours.`})]})},{title:"How Does the 'Invert Colors' Feature Work?",icon:Ig,color:"amber",content:k.jsxs("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:[k.jsx("p",{children:'Many lecture slides use "Dark Mode" (dark background, light text) which looks great on screens but is terrible for printing. It wastes ink and makes pages soggy and unreadable.'}),k.jsxs("p",{children:["Our specialized ",k.jsx("strong",{children:"Smart Invert algorithm"})," doesn't just negative the image. It intelligently:"]}),k.jsxs("ol",{className:"list-decimal pl-5 space-y-2",children:[k.jsx("li",{children:"Analyzes the background color of each slide."}),k.jsx("li",{children:"If it's dark, it swaps it to white."}),k.jsx("li",{children:"Then, it inverts the text color (white  black) to maintain readability."}),k.jsxs("li",{children:["Crucially, it attempts to ",k.jsx("strong",{className:"text-amber-400",children:"preserve images and diagrams"})," so they don't look like X-ray negatives."]})]}),k.jsxs("p",{children:["This typically saves ",k.jsx("strong",{children:"90% of ink/toner"})," while making the notes much easier to annotate with a pen."]})]})},{title:"Is It Really 100% Free? How Do You Sustain It?",icon:bf,color:"red",content:k.jsxs("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:[k.jsx("p",{children:'Yes, NotesForge is 100% free. No hidden subscriptions, no "Pro" plans, no watermarks.'}),k.jsxs("p",{children:["The project was born out of personal necessity. As students, we couldn't find a good tool for this, so we built one. Since the processing happens on ",k.jsx("em",{children:"your"})," device, our server costs are minimal (we just host the static website files)."]}),k.jsx("p",{children:"We sustain the project through:"}),k.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[k.jsx("li",{children:"Occasional voluntary donations (Buy Me a Coffee)."}),k.jsx("li",{children:"Open-source contributions from the developer community."}),k.jsx("li",{children:"Passion for helping fellow students succeed."})]})]})},{title:"Why No Login Required?",icon:u5,color:"blue",content:k.jsxs("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:[k.jsxs("p",{children:["Simple: ",k.jsx("strong",{children:"We don't want your data."})]}),k.jsx("p",{children:"Most sites ask for login to track users, send marketing emails, or sell data. Since NotesForge is privacy-first and client-side, we have no need to store your email or file history."}),k.jsx("p",{children:"You arrive, you process your notes, you leave. That's the way tools should be  instant and frictionless."})]})},{title:"Tips for Better Note Printing",icon:c5,color:"emerald",content:k.jsx("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:k.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[k.jsxs("li",{children:[k.jsx("strong",{className:"text-emerald-400",children:"Use Grid Layout:"})," Printing 1 slide per page is a waste. Use our 4-slide or 6-slide grid options to save paper."]}),k.jsxs("li",{children:[k.jsx("strong",{className:"text-emerald-400",children:"Remove Teacher Slides:"}),' Use our "Remove Teacher" feature to automatically detect and delete slides that are mostly images or have low text content (often just "Any Questions?").']}),k.jsxs("li",{children:[k.jsx("strong",{className:"text-emerald-400",children:"Grayscale Mode:"}),' Even if you invert colors, force your printer to use "Black & White" or "Draft" mode to save color cartridges.']})]})})},{title:"Can I use NotesForge on my phone?",icon:iL,color:"pink",content:k.jsxs("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:[k.jsx("p",{children:"Absolutely! NotesForge is fully responsive and works great on mobile browsers (Chrome, Safari, Firefox)."}),k.jsxs("p",{children:["However, for complex editing like selecting specific pages or arranging grid layouts, we recommend using a ",k.jsx("strong",{children:"desktop or tablet"})," for the best experience simply because of the larger screen real estate."]})]})},{title:"Do I need internet to use this?",icon:mde,color:"slate",content:k.jsxs("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:[k.jsxs("p",{children:["You only need internet to load the website initially. Once loaded, NotesForge works ",k.jsx("strong",{children:"offline"})," thanks to Service Worker technology."]}),k.jsx("p",{children:"You can even handle massive files without a connection because the processing happens on your device's processor, not on a remote server."})]})},{title:"Are there any file size limits?",icon:Uhe,color:"indigo",content:k.jsxs("div",{className:`space-y-4 ${e?"text-slate-600":"text-slate-300"}`,children:[k.jsx("p",{children:`We don't enforce a hard limit like "10MB max". You can process files as large as your device's memory can handle.`}),k.jsxs("p",{children:["We've successfully tested with PDFs over ",k.jsx("strong",{children:"100MB+"})," and decks with hundreds of slides. If your device slows down, try processing fewer pages at a time."]})]})}];return k.jsxs("div",{className:"max-w-4xl mx-auto pt-4 space-y-8 pb-12",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${e?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:`text-center space-y-4 ${e?"mt-4":""}`,children:[k.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs ${e?"bg-slate-100 border border-slate-200 text-slate-600 font-medium":"bg-violet-500/10 border border-violet-500/20 text-violet-400"}`,children:[k.jsx(_K,{className:"w-3 h-3"}),k.jsx("span",{children:"Knowledge Base"})]}),k.jsxs("h1",{className:`text-3xl md:text-4xl font-bold ${e?"text-slate-900 tracking-tight":"text-white"}`,children:["NotesForge"," ",k.jsx("span",{className:`bg-clip-text text-transparent ${e?"bg-gradient-to-r from-violet-600 to-cyan-600 text-violet-700":"bg-gradient-to-r from-violet-400 to-cyan-400"}`,children:"Inside Out"})]}),k.jsx("p",{className:`max-w-2xl mx-auto ${e?"text-slate-600 font-normal":"text-slate-400"}`,children:"Deep dive into how NotesForge works, the technology stack, and tips for efficient studying."}),k.jsx("div",{className:"max-w-md mx-auto pt-4 opacity-70",children:k.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-900/50 border border-white/10 text-slate-400 text-sm",children:[k.jsx(WU,{className:"w-4 h-4"}),k.jsx("span",{children:"Searching for answers? Just scroll down!"})]})})]}),k.jsx("div",{className:"grid gap-8",children:t.map((r,s)=>k.jsx("article",{className:`p-6 rounded-2xl transition-all ${e?"bg-white border border-slate-200 shadow-sm hover:shadow-md hover:border-slate-300":"bg-slate-900/50 border border-white/5 hover:border-violet-500/20 hover:bg-slate-900/80"}`,children:k.jsxs("div",{className:"flex items-start gap-4",children:[k.jsx("div",{className:`p-3 rounded-xl flex-shrink-0 ${e?`bg-${r.color}-50 border border-${r.color}-100`:`bg-${r.color}-500/10 border border-${r.color}-500/20`}`,children:k.jsx(r.icon,{className:`w-6 h-6 ${e?`text-${r.color}-600`:`text-${r.color}-400`}`})}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h2",{className:`text-xl font-bold leading-tight ${e?"text-slate-900":"text-white"}`,children:r.title}),k.jsx("div",{className:`text-sm leading-relaxed ${e?"text-slate-600":""}`,children:r.content})]})]})},s))}),k.jsxs("div",{className:`text-center p-8 rounded-2xl ${e?"bg-slate-100 border border-slate-200":"bg-gradient-to-br from-violet-900/20 to-cyan-900/20 border border-white/5"}`,children:[k.jsx(WU,{className:`w-8 h-8 mx-auto mb-3 ${e?"text-violet-600":"text-violet-400"}`}),k.jsx("h3",{className:`text-lg font-bold mb-2 ${e?"text-slate-900":"text-white"}`,children:"Still have questions?"}),k.jsx("p",{className:`text-sm mb-4 ${e?"text-slate-600":"text-slate-400"}`,children:"We're always looking for new ideas and questions to answer."}),k.jsx("div",{className:"flex justify-center gap-3",children:k.jsx("button",{onClick:()=>window.location.href="mailto:abhayk7481@gmail.com",className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e?"bg-violet-600 hover:bg-violet-700 text-white shadow-sm":"bg-violet-600 hover:bg-violet-500 text-white"}`,children:"Email Us"})})]})]})}function dpe({onBack:n}){const{isLight:e}=Nr();return k.jsxs("div",{className:"max-w-3xl mx-auto pt-4 space-y-6",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${e?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:"text-center space-y-2",children:[k.jsx(Of,{className:`w-10 h-10 mx-auto ${e?"text-violet-600":"text-violet-400"}`}),k.jsx("h1",{className:`text-2xl font-bold ${e?"text-slate-900":"text-white"}`,children:"Terms & Conditions"}),k.jsx("p",{className:`text-sm ${e?"text-slate-500":"text-slate-400"}`,children:"Last updated: January 2026"})]}),k.jsxs("div",{className:`p-5 rounded-xl border space-y-4 text-sm ${e?"bg-white border-slate-200 text-slate-600":"bg-slate-900/50 border-white/5 text-slate-300"}`,children:[k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"1. Acceptance of Terms"}),k.jsx("p",{children:"By accessing and using NotesForge, you agree to be bound by these Terms and Conditions. If you do not agree, please do not use our service."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"2. Service Description"}),k.jsx("p",{children:"NotesForge is a free, browser-based tool that converts PDF documents into print-optimized formats. All processing occurs locally in your browser; no files are uploaded to our servers."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"3. User Responsibilities"}),k.jsx("p",{children:"You are responsible for ensuring you have the right to process the documents you upload. Do not use NotesForge for illegal purposes or to process copyrighted material without permission."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"4. Disclaimer"}),k.jsx("p",{children:'NotesForge is provided "as is" without warranties of any kind. We do not guarantee the accuracy or reliability of the output. Use at your own risk.'})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"5. Limitation of Liability"}),k.jsx("p",{children:"NotesForge and its developers shall not be liable for any damages arising from the use of this service."})]})]})]})}function fpe({onBack:n}){const{isLight:e}=Nr();return k.jsxs("div",{className:"max-w-3xl mx-auto pt-4 space-y-6",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${e?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:"text-center space-y-2",children:[k.jsx(rl,{className:`w-10 h-10 mx-auto ${e?"text-emerald-600":"text-emerald-400"}`}),k.jsx("h1",{className:`text-2xl font-bold ${e?"text-slate-900":"text-white"}`,children:"Privacy Policy"}),k.jsx("p",{className:`text-sm ${e?"text-slate-500":"text-slate-400"}`,children:"Last updated: January 2026"})]}),k.jsxs("div",{className:`p-5 rounded-xl border space-y-4 text-sm ${e?"bg-white border-slate-200 text-slate-600":"bg-slate-900/50 border-white/5 text-slate-300"}`,children:[k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"1. No Data Collection"}),k.jsx("p",{children:"NotesForge does not collect, store, or transmit any personal data or documents. All PDF processing happens entirely within your browser."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"2. Local Processing"}),k.jsx("p",{children:"Your files never leave your device. We use JavaScript-based PDF libraries (PDF.js, pdf-lib) that run locally in your browser."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"3. No Cookies"}),k.jsx("p",{children:"We do not use cookies or tracking technologies to monitor your activity."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"4. Third-Party Services"}),k.jsx("p",{children:"We may use Google Fonts for typography. No other third-party services are integrated that could access your documents."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"5. Contact"}),k.jsx("p",{children:"For privacy-related inquiries, contact us at: abhayk7481@gmail.com"})]})]})]})}function ppe({onBack:n}){const{isLight:e}=Nr();return k.jsxs("div",{className:"max-w-3xl mx-auto pt-4 space-y-6",children:[k.jsxs("button",{onClick:n,className:`flex items-center gap-2 transition-colors text-sm ${e?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:"text-center space-y-2",children:[k.jsx(tde,{className:`w-10 h-10 mx-auto ${e?"text-amber-600":"text-amber-400"}`}),k.jsx("h1",{className:`text-2xl font-bold ${e?"text-slate-900":"text-white"}`,children:"Refund Policy"}),k.jsx("p",{className:`text-sm ${e?"text-slate-500":"text-slate-400"}`,children:"Last updated: January 2026"})]}),k.jsxs("div",{className:`p-5 rounded-xl border space-y-4 text-sm ${e?"bg-white border-slate-200 text-slate-600":"bg-slate-900/50 border-white/5 text-slate-300"}`,children:[k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"Free Service"}),k.jsx("p",{children:"NotesForge is a completely free service. There are no charges for using any of our features."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"Voluntary Donations"}),k.jsx("p",{children:"Any donations made to support NotesForge are voluntary and non-refundable. Donations help us maintain and improve the service for all users."})]}),k.jsxs("section",{children:[k.jsx("h2",{className:`font-semibold mb-2 ${e?"text-slate-900":"text-white"}`,children:"Exceptional Circumstances"}),k.jsx("p",{children:"In case of accidental or duplicate donations, please contact us at abhayk7481@gmail.com within 7 days. We will review requests on a case-by-case basis."})]})]})]})}function h8({type:n="horizontal",className:e="",adSlot:t="XXXXXXXXXX"}){const r={horizontal:"min-h-[90px] max-h-[90px]",responsive:"min-h-[100px]",square:"min-h-[250px] max-w-[300px]"};return k.jsx("div",{className:`ad-container flex items-center justify-center ${r[n]} ${e}`,style:{margin:"16px auto"},children:k.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":t,"data-ad-format":n==="responsive"?"auto":"horizontal","data-full-width-responsive":"true"})})}var z1={};z1.d=(n,e)=>{for(var t in e)z1.o(e,t)&&!z1.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};z1.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var _t=globalThis.pdfjsLib={};z1.d(_t,{AbortException:()=>Lf,AnnotationEditorLayer:()=>wM,AnnotationEditorParamsType:()=>pn,AnnotationEditorType:()=>Gt,AnnotationEditorUIManager:()=>Ng,AnnotationLayer:()=>cge,AnnotationMode:()=>Cd,ColorPicker:()=>hN,DOMSVGFactory:()=>S5,DrawLayer:()=>CM,FeatureTest:()=>na,GlobalWorkerOptions:()=>mh,ImageKind:()=>PI,InvalidPDFException:()=>pL,MissingPDFException:()=>kS,OPS:()=>Rl,OutputScale:()=>gL,PDFDataRangeTransport:()=>iY,PDFDateString:()=>v5,PDFWorker:()=>Py,PasswordResponses:()=>vpe,PermissionFlag:()=>ype,PixelsPerInch:()=>Mf,RenderingCancelledException:()=>g5,TextLayer:()=>CS,TouchManager:()=>cN,UnexpectedResponseException:()=>aN,Util:()=>pt,VerbosityLevel:()=>iR,XfaLayer:()=>oY,build:()=>Ume,createValidAbsoluteUrl:()=>Spe,fetchData:()=>cR,getDocument:()=>Pme,getFilenameFromUrl:()=>Rpe,getPdfFilenameFromUrl:()=>Dpe,getXfaPageViewport:()=>Fpe,isDataScheme:()=>uR,isPdfFile:()=>y5,noContextMenu:()=>oc,normalizeUnicode:()=>Ape,setLayerDimensions:()=>Ag,shadow:()=>en,stopEvent:()=>uo,version:()=>jme});const Li=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),sX=[1,0,0,1,0,0],fL=[.001,0,0,.001,0,0],mpe=1e7,sO=1.35,ao={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},gpe="pdfjs_internal_editor_",Gt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},pn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},ype={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Si={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},PI={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},fs={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Aw={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},iR={ERRORS:0,WARNINGS:1,INFOS:5},Rl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},vpe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let aR=iR.WARNINGS;function xpe(n){Number.isInteger(n)&&(aR=n)}function bpe(){return aR}function oR(n){aR>=iR.INFOS&&console.log(`Info: ${n}`)}function Ht(n){aR>=iR.WARNINGS&&console.log(`Warning: ${n}`)}function qn(n){throw new Error(n)}function ns(n,e){n||qn(e)}function wpe(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Spe(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Ipe(n)}catch{}}const r=e?new URL(n,e):new URL(n);if(wpe(r))return r}catch{}return null}function en(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const dp=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class d8 extends dp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class iO extends dp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class pL extends dp{constructor(e){super(e,"InvalidPDFException")}}class kS extends dp{constructor(e){super(e,"MissingPDFException")}}class aN extends dp{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class kpe extends dp{constructor(e){super(e,"FormatError")}}class Lf extends dp{constructor(e){super(e,"AbortException")}}function iX(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&qn("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function lR(n){typeof n!="string"&&qn("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function Cpe(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function p5(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function Tpe(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Epe(){try{return new Function(""),!0}catch{return!1}}class na{static get isLittleEndian(){return en(this,"isLittleEndian",Tpe())}static get isEvalSupported(){return en(this,"isEvalSupported",Epe())}static get isOffscreenCanvasSupported(){return en(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return en(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?en(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):en(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return en(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const aO=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Eh,OI,mL;class pt{static makeHexColor(e,t,r){return`#${aO[e]}${aO[t]}${aO[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[r,s]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[s,i]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],s[0],i[0],a[0]),Math.min(r[1],s[1],i[1],a[1]),Math.max(r[0],s[0],i[0],a[0]),Math.max(r[1],s[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(r+a)/2,l=Math.sqrt((r+a)**2-4*(r*a-i*s))/2,c=o+l||1,u=o-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static bezierBoundingBox(e,t,r,s,i,a,o,l,c){return c?(c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],U(this,Eh,mL).call(this,e,r,i,o,t,s,a,l,3*(-e+3*(r-i)+o),6*(e-2*r+i),3*(r-e),c),U(this,Eh,mL).call(this,e,r,i,o,t,s,a,l,3*(-t+3*(s-a)+l),6*(t-2*s+a),3*(s-t),c),c}}Eh=new WeakSet,OI=function(e,t,r,s,i,a,o,l,c,u){if(c<=0||c>=1)return;const h=1-c,d=c*c,f=d*c,p=h*(h*(h*e+3*c*t)+3*d*r)+f*s,m=h*(h*(h*i+3*c*a)+3*d*o)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],m),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],m)},mL=function(e,t,r,s,i,a,o,l,c,u,h,d){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&U(this,Eh,OI).call(this,e,t,r,s,i,a,o,l,-h/u,d);return}const f=u**2-4*h*c;if(f<0)return;const p=Math.sqrt(f),m=2*c;U(this,Eh,OI).call(this,e,t,r,s,i,a,o,l,(-u+p)/m,d),U(this,Eh,OI).call(this,e,t,r,s,i,a,o,l,(-u-p)/m,d)},j(pt,Eh);function Ipe(n){return decodeURIComponent(escape(n))}let oO=null,f8=null;function Ape(n){return oO||(oO=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,f8=new Map([["","t"]])),n.replaceAll(oO,(e,t,r)=>t?t.normalize("NFKC"):f8.get(r))}function Npe(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),iX(n)}const m5="pdfjs_internal_id_";function _pe(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(iX(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const Du="http://www.w3.org/2000/svg",Qp=class Qp{};yt(Qp,"CSS",96),yt(Qp,"PDF",72),yt(Qp,"PDF_TO_CSS_UNITS",Qp.CSS/Qp.PDF);let Mf=Qp;async function cR(n,e="text"){if(Yw(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Wk{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=a,r*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,y,g;u===0?(p=Math.abs(c-e[1])*r+i,m=Math.abs(l-e[0])*r+a,y=(e[3]-e[1])*r,g=(e[2]-e[0])*r):(p=Math.abs(l-e[0])*r+i,m=Math.abs(c-e[1])*r+a,y=(e[2]-e[0])*r,g=(e[3]-e[1])*r),this.transform=[u*r,h*r,d*r,f*r,p-u*r*l-d*r*c,m-h*r*l-f*r*c],this.width=y,this.height=g}get rawDims(){const{userUnit:e,viewBox:t}=this,r=t.map(s=>s*e);return en(this,"rawDims",{pageWidth:r[2]-r[0],pageHeight:r[3]-r[1],pageX:r[0],pageY:r[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Wk({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return pt.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=pt.applyTransform([e[0],e[1]],this.transform),r=pt.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return pt.applyInverseTransform([e,t],this.transform)}}class g5 extends dp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function uR(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function y5(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Rpe(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Dpe(n,e="document.pdf"){if(typeof n!="string")return e;if(uR(n))return Ht('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let i=r.exec(s[1])||r.exec(s[2])||r.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=r.exec(decodeURIComponent(i))[0]}catch{}return i||e}class p8{constructor(){yt(this,"started",Object.create(null));yt(this,"times",[])}time(e){e in this.started&&Ht(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ht(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Yw(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function oc(n){n.preventDefault()}function uo(n){n.preventDefault(),n.stopPropagation()}var f2;class v5{static toDateObject(e){if(!e||typeof e!="string")return null;x(this,f2)||L(this,f2,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=x(this,f2).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(a+=u,o+=h):c==="+"&&(a-=u,o-=h),new Date(Date.UTC(r,s,i,a,o,l))}}f2=new WeakMap,j(v5,f2);function Fpe(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Wk({viewBox:i,userUnit:1,scale:e,rotation:t})}function x5(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ht(`Not a valid color format: "${n}"`),[0,0,0])}function Ppe(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,x5(r))}e.remove()}function hr(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function Cc(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function Ag(n,e,t=!1,r=!0){if(e instanceof Wk){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,o=na.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${i}px`,u=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=o?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!t||e.rotation%180===0?(a.width=u,a.height=h):(a.width=h,a.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}class gL{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ed,um,Dl,hm,p2,m2,w_,aX,oa,oX,lX,LI,cX,vL;const Mu=class Mu{constructor(e){j(this,oa);j(this,Ed,null);j(this,um,null);j(this,Dl);j(this,hm,null);j(this,p2,null);L(this,Dl,e),x(Mu,m2)||L(Mu,m2,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=L(this,Ed,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=x(this,Dl)._uiManager._signal;e.addEventListener("contextmenu",oc,{signal:t}),e.addEventListener("pointerdown",U(Mu,w_,aX),{signal:t});const r=L(this,hm,document.createElement("div"));r.className="buttons",e.append(r);const s=x(this,Dl).toolbarPosition;if(s){const{style:i}=e,a=x(this,Dl)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return U(this,oa,cX).call(this),e}get div(){return x(this,Ed)}hide(){var e;x(this,Ed).classList.add("hidden"),(e=x(this,um))==null||e.hideDropdown()}show(){var e;x(this,Ed).classList.remove("hidden"),(e=x(this,p2))==null||e.shown()}async addAltText(e){const t=await e.render();U(this,oa,LI).call(this,t),x(this,hm).prepend(t,x(this,oa,vL)),L(this,p2,e)}addColorPicker(e){L(this,um,e);const t=e.renderButton();U(this,oa,LI).call(this,t),x(this,hm).prepend(t,x(this,oa,vL))}remove(){var e;x(this,Ed).remove(),(e=x(this,um))==null||e.destroy(),L(this,um,null)}};Ed=new WeakMap,um=new WeakMap,Dl=new WeakMap,hm=new WeakMap,p2=new WeakMap,m2=new WeakMap,w_=new WeakSet,aX=function(e){e.stopPropagation()},oa=new WeakSet,oX=function(e){x(this,Dl)._focusEventsAllowed=!1,uo(e)},lX=function(e){x(this,Dl)._focusEventsAllowed=!0,uo(e)},LI=function(e){const t=x(this,Dl)._uiManager._signal;e.addEventListener("focusin",U(this,oa,oX).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",U(this,oa,lX).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",oc,{signal:t})},cX=function(){const{editorType:e,_uiManager:t}=x(this,Dl),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",x(Mu,m2)[e]),U(this,oa,LI).call(this,r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),x(this,hm).append(r)},vL=function(){const e=document.createElement("div");return e.className="divider",e},j(Mu,w_),j(Mu,m2,null);let yL=Mu;var g2,dm,fm,lp,uX,hX,dX;class Ope{constructor(e){j(this,lp);j(this,g2,null);j(this,dm,null);j(this,fm);L(this,fm,e)}show(e,t,r){const[s,i]=U(this,lp,hX).call(this,t,r),{style:a}=x(this,dm)||L(this,dm,U(this,lp,uX).call(this));e.append(x(this,dm)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){x(this,dm).remove()}}g2=new WeakMap,dm=new WeakMap,fm=new WeakMap,lp=new WeakSet,uX=function(){const e=L(this,dm,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",oc,{signal:x(this,fm)._signal});const t=L(this,g2,document.createElement("div"));return t.className="buttons",e.append(t),U(this,lp,dX).call(this),e},hX=function(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const o=i.x+(t?i.width:0);if(a>r){s=o,r=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,r]},dX=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=x(this,fm)._signal;e.addEventListener("contextmenu",oc,{signal:r}),e.addEventListener("click",()=>{x(this,fm).highlightSelection("floating_button")},{signal:r}),x(this,g2).append(e)};function oN(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var S_;class Lpe{constructor(){j(this,S_,0)}get id(){return`${gpe}${Gi(this,S_)._++}`}}S_=new WeakMap;var Xy,y2,Ti,Yy,MI;const Uj=class Uj{constructor(){j(this,Yy);j(this,Xy,Npe());j(this,y2,0);j(this,Ti,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return en(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return U(this,Yy,MI).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return U(this,Yy,MI).call(this,e,e)}async getFromBlob(e,t){const r=await t;return U(this,Yy,MI).call(this,e,r)}async getFromId(e){x(this,Ti)||L(this,Ti,new Map);const t=x(this,Ti).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){x(this,Ti)||L(this,Ti,new Map);let r=x(this,Ti).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${x(this,Xy)}_${Gi(this,y2)._++}`,refCounter:1,isSvg:!1},x(this,Ti).set(e,r),x(this,Ti).set(r.id,r),r}getSvgUrl(e){const t=x(this,Ti).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;x(this,Ti)||L(this,Ti,new Map);const t=x(this,Ti).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${x(this,Xy)}_`)}};Xy=new WeakMap,y2=new WeakMap,Ti=new WeakMap,Yy=new WeakSet,MI=async function(e,t){x(this,Ti)||L(this,Ti,new Map);let r=x(this,Ti).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${x(this,Xy)}_${Gi(this,y2)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await cR(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=Uj._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,c()},a.onload=async()=>{const h=r.svgUrl=a.result;o.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=u});a.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){Ht(s),r=null}return x(this,Ti).set(e,r),r&&x(this,Ti).set(r.id,r),r};let xL=Uj;var Vr,Id,v2,br;class Mpe{constructor(e=128){j(this,Vr,[]);j(this,Id,!1);j(this,v2);j(this,br,-1);L(this,v2,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),x(this,Id))return;const l={cmd:e,undo:t,post:r,type:i};if(x(this,br)===-1){x(this,Vr).length>0&&(x(this,Vr).length=0),L(this,br,0),x(this,Vr).push(l);return}if(a&&x(this,Vr)[x(this,br)].type===i){o&&(l.undo=x(this,Vr)[x(this,br)].undo),x(this,Vr)[x(this,br)]=l;return}const c=x(this,br)+1;c===x(this,v2)?x(this,Vr).splice(0,1):(L(this,br,c),c<x(this,Vr).length&&x(this,Vr).splice(c)),x(this,Vr).push(l)}undo(){if(x(this,br)===-1)return;L(this,Id,!0);const{undo:e,post:t}=x(this,Vr)[x(this,br)];e(),t==null||t(),L(this,Id,!1),L(this,br,x(this,br)-1)}redo(){if(x(this,br)<x(this,Vr).length-1){L(this,br,x(this,br)+1),L(this,Id,!0);const{cmd:e,post:t}=x(this,Vr)[x(this,br)];e(),t==null||t(),L(this,Id,!1)}}hasSomethingToUndo(){return x(this,br)!==-1}hasSomethingToRedo(){return x(this,br)<x(this,Vr).length-1}cleanType(e){if(x(this,br)!==-1){for(let t=x(this,br);t>=0;t--)if(x(this,Vr)[t].type!==e){x(this,Vr).splice(t+1,x(this,br)-t),L(this,br,t);return}x(this,Vr).length=0,L(this,br,-1)}}destroy(){L(this,Vr,null)}}Vr=new WeakMap,Id=new WeakMap,v2=new WeakMap,br=new WeakMap;var k_,fX;class Gk{constructor(e){j(this,k_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=na.platform;for(const[r,s,i={}]of e)for(const a of r){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(U(this,k_,fX).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=r;o&&!o(e,t)||(s.bind(e,...a,t)(),i||uo(t))}}k_=new WeakSet,fX=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const C_=class C_{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Ppe(e),en(this,"_colors",e)}convert(e){const t=x5(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return C_._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?pt.makeHexColor(...t):e}};yt(C_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let bL=C_;var Zy,Ka,ms,ti,Qy,Wu,Jy,Bo,Ad,pm,ev,mm,Fc,Fl,gm,x2,b2,tv,w2,Pc,Nd,nv,_d,Oc,T_,Rd,S2,Dd,ym,k2,C2,Os,On,Gu,vm,T2,E2,Fd,Lc,Hu,I2,Vo,qe,$I,wL,pX,mX,zI,gX,yX,vX,SL,xX,kL,CL,bX,Hi,Fu,wX,SX,TL,kX,Zw,EL;const ky=class ky{constructor(e,t,r,s,i,a,o,l,c,u,h,d,f){j(this,qe);j(this,Zy,new AbortController);j(this,Ka,null);j(this,ms,new Map);j(this,ti,new Map);j(this,Qy,null);j(this,Wu,null);j(this,Jy,null);j(this,Bo,new Mpe);j(this,Ad,null);j(this,pm,null);j(this,ev,0);j(this,mm,new Set);j(this,Fc,null);j(this,Fl,null);j(this,gm,new Set);yt(this,"_editorUndoBar",null);j(this,x2,!1);j(this,b2,!1);j(this,tv,!1);j(this,w2,null);j(this,Pc,null);j(this,Nd,null);j(this,nv,null);j(this,_d,!1);j(this,Oc,null);j(this,T_,new Lpe);j(this,Rd,!1);j(this,S2,!1);j(this,Dd,null);j(this,ym,null);j(this,k2,null);j(this,C2,null);j(this,Os,Gt.NONE);j(this,On,new Set);j(this,Gu,null);j(this,vm,null);j(this,T2,null);j(this,E2,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});j(this,Fd,[0,0]);j(this,Lc,null);j(this,Hu,null);j(this,I2,null);j(this,Vo,null);const p=this._signal=x(this,Zy).signal;L(this,Hu,e),L(this,I2,t),L(this,Qy,r),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:p}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),s._on("setpreference",this.onSetPreference.bind(this),{signal:p}),s._on("switchannotationeditorparams",m=>this.updateParams(m.type,m.value),{signal:p}),U(this,qe,gX).call(this),U(this,qe,bX).call(this),U(this,qe,SL).call(this),L(this,Wu,i.annotationStorage),L(this,w2,i.filterFactory),L(this,vm,a),L(this,nv,o||null),L(this,x2,l),L(this,b2,c),L(this,tv,u),L(this,C2,h||null),this.viewParameters={realScale:Mf.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=d||null,this._supportsPinchToZoom=f!==!1}static get _keyboardManager(){const e=ky.prototype,t=a=>x(a,Hu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return en(this,"_keyboardManager",new Gk([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&x(a,Hu).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&x(a,Hu).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i;(e=x(this,Vo))==null||e.resolve(),L(this,Vo,null),(t=x(this,Zy))==null||t.abort(),L(this,Zy,null),this._signal=null;for(const a of x(this,ti).values())a.destroy();x(this,ti).clear(),x(this,ms).clear(),x(this,gm).clear(),L(this,Ka,null),x(this,On).clear(),x(this,Bo).destroy(),(r=x(this,Qy))==null||r.destroy(),(s=x(this,Oc))==null||s.hide(),L(this,Oc,null),x(this,Pc)&&(clearTimeout(x(this,Pc)),L(this,Pc,null)),x(this,Lc)&&(clearTimeout(x(this,Lc)),L(this,Lc,null)),(i=this._editorUndoBar)==null||i.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return x(this,C2)}get useNewAltTextFlow(){return x(this,b2)}get useNewAltTextWhenAddingImage(){return x(this,tv)}get hcmFilter(){return en(this,"hcmFilter",x(this,vm)?x(this,w2).addHCMFilter(x(this,vm).foreground,x(this,vm).background):"none")}get direction(){return en(this,"direction",getComputedStyle(x(this,Hu)).direction)}get highlightColors(){return en(this,"highlightColors",x(this,nv)?new Map(x(this,nv).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return en(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),L(this,pm,e)}setMainHighlightColorPicker(e){L(this,k2,e)}editAltText(e,t=!1){var r;(r=x(this,Qy))==null||r.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":L(this,tv,t);break}}onPageChanging({pageNumber:e}){L(this,ev,e-1)}focusMainContainer(){x(this,Hu).focus()}findParent(e,t){for(const r of x(this,ti).values()){const{x:s,y:i,width:a,height:o}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return r}return null}disableUserSelect(e=!1){x(this,I2).classList.toggle("noUserSelect",e)}addShouldRescale(e){x(this,gm).add(e)}removeShouldRescale(e){x(this,gm).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Mf.PDF_TO_CSS_UNITS;for(const r of x(this,gm))r.onScaleChanging();(t=x(this,pm))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a}=t,o=t.toString(),c=U(this,qe,$I).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const h=U(this,qe,wL).call(this,c),d=x(this,Os)===Gt.NONE,f=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a,text:o}),d&&this.showAllEditors("highlight",!0,!0)};if(d){this.switchToMode(Gt.HIGHLIGHT,f);return}f()}addToAnnotationStorage(e){!e.isEmpty()&&x(this,Wu)&&!x(this,Wu).has(e.id)&&x(this,Wu).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,x(this,_d)&&(L(this,_d,!1),U(this,qe,zI).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of x(this,On))if(t.div.contains(e)){L(this,ym,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!x(this,ym))return;const[e,t]=x(this,ym);L(this,ym,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){U(this,qe,SL).call(this),U(this,qe,kL).call(this)}removeEditListeners(){U(this,qe,xX).call(this),U(this,qe,CL).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of x(this,Fl))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of x(this,Fl))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=x(this,Ka))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of x(this,On)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of x(this,Fl))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){Ht(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const c=await s.deserialize(l);if(!c)return;i.push(c)}const a=()=>{for(const l of i)U(this,qe,TL).call(this,l);U(this,qe,EL).call(this,i)},o=()=>{for(const l of i)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){Ht(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),x(this,Os)!==Gt.NONE&&!this.isEditorHandlingKeyboard&&ky._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,x(this,_d)&&(L(this,_d,!1),U(this,qe,zI).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(U(this,qe,yX).call(this),U(this,qe,kL).call(this),U(this,qe,Hi).call(this,{isEditing:x(this,Os)!==Gt.NONE,isEmpty:U(this,qe,Zw).call(this),hasSomethingToUndo:x(this,Bo).hasSomethingToUndo(),hasSomethingToRedo:x(this,Bo).hasSomethingToRedo(),hasSelectedEditor:!1})):(U(this,qe,vX).call(this),U(this,qe,CL).call(this),U(this,qe,Hi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!x(this,Fl)){L(this,Fl,e);for(const t of x(this,Fl))U(this,qe,Fu).call(this,t.defaultPropertiesToUpdate)}}getId(){return x(this,T_).id}get currentLayer(){return x(this,ti).get(x(this,ev))}getLayer(e){return x(this,ti).get(e)}get currentPageIndex(){return x(this,ev)}addLayer(e){x(this,ti).set(e.pageIndex,e),x(this,Rd)?e.enable():e.disable()}removeLayer(e){x(this,ti).delete(e.pageIndex)}async updateMode(e,t=null,r=!1){var s;if(x(this,Os)!==e&&!(x(this,Vo)&&(await x(this,Vo).promise,!x(this,Vo)))){if(L(this,Vo,Promise.withResolvers()),L(this,Os,e),e===Gt.NONE){this.setEditingState(!1),U(this,qe,SX).call(this),(s=this._editorUndoBar)==null||s.hide(),x(this,Vo).resolve();return}this.setEditingState(!0),await U(this,qe,wX).call(this),this.unselectAll();for(const i of x(this,ti).values())i.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),x(this,Vo).resolve();return}for(const i of x(this,ms).values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();x(this,Vo).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==x(this,Os)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var r;if(x(this,Fl)){switch(e){case pn.CREATE:this.currentLayer.addNewEditor();return;case pn.HIGHLIGHT_DEFAULT_COLOR:(r=x(this,k2))==null||r.updateColor(t);break;case pn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(x(this,T2)||L(this,T2,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of x(this,On))s.updateParams(e,t);for(const s of x(this,Fl))s.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const a of x(this,ms).values())a.editorType===e&&a.show(t);(((i=x(this,T2))==null?void 0:i.get(pn.HIGHLIGHT_SHOW_ALL))??!0)!==t&&U(this,qe,Fu).call(this,[[pn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(x(this,S2)!==e){L(this,S2,e);for(const t of x(this,ti).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of x(this,ms).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return x(this,ms).get(e)}addEditor(e){x(this,ms).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(x(this,Pc)&&clearTimeout(x(this,Pc)),L(this,Pc,setTimeout(()=>{this.focusMainContainer(),L(this,Pc,null)},0))),x(this,ms).delete(e.id),this.unselect(e),(!e.annotationElementId||!x(this,mm).has(e.annotationElementId))&&((t=x(this,Wu))==null||t.remove(e.id))}addDeletedAnnotationElement(e){x(this,mm).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return x(this,mm).has(e)}removeDeletedAnnotationElement(e){x(this,mm).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){x(this,Ka)!==e&&(L(this,Ka,e),e&&U(this,qe,Fu).call(this,e.propertiesToUpdate))}updateUI(e){x(this,qe,kX)===e&&U(this,qe,Fu).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){U(this,qe,Fu).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(x(this,On).has(e)){x(this,On).delete(e),e.unselect(),U(this,qe,Hi).call(this,{hasSelectedEditor:this.hasSelection});return}x(this,On).add(e),e.select(),U(this,qe,Fu).call(this,e.propertiesToUpdate),U(this,qe,Hi).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=x(this,pm))==null||t.commitOrRemove();for(const r of x(this,On))r!==e&&r.unselect();x(this,On).clear(),x(this,On).add(e),e.select(),U(this,qe,Fu).call(this,e.propertiesToUpdate),U(this,qe,Hi).call(this,{hasSelectedEditor:!0})}isSelected(e){return x(this,On).has(e)}get firstSelectedEditor(){return x(this,On).values().next().value}unselect(e){e.unselect(),x(this,On).delete(e),U(this,qe,Hi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return x(this,On).size!==0}get isEnterHandled(){return x(this,On).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;x(this,Bo).undo(),U(this,qe,Hi).call(this,{hasSomethingToUndo:x(this,Bo).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:U(this,qe,Zw).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){x(this,Bo).redo(),U(this,qe,Hi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:x(this,Bo).hasSomethingToRedo(),isEmpty:U(this,qe,Zw).call(this)})}addCommands(e){x(this,Bo).add(e),U(this,qe,Hi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:U(this,qe,Zw).call(this)})}cleanUndoStack(e){x(this,Bo).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...x(this,On)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const a of t)U(this,qe,TL).call(this,a)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=x(this,Ka))==null||e.commitOrRemove()}hasSomethingToControl(){return x(this,Ka)||this.hasSelection}selectAll(){for(const e of x(this,On))e.commit();U(this,qe,EL).call(this,x(this,ms).values())}unselectAll(){var e;if(!(x(this,Ka)&&(x(this,Ka).commitOrRemove(),x(this,Os)!==Gt.NONE))&&!((e=x(this,pm))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of x(this,On))t.unselect();x(this,On).clear(),U(this,qe,Hi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;x(this,Fd)[0]+=e,x(this,Fd)[1]+=t;const[s,i]=x(this,Fd),a=[...x(this,On)],o=1e3;x(this,Lc)&&clearTimeout(x(this,Lc)),L(this,Lc,setTimeout(()=>{L(this,Lc,null),x(this,Fd)[0]=x(this,Fd)[1]=0,this.addCommands({cmd:()=>{for(const l of a)x(this,ms).has(l.id)&&l.translateInPage(s,i)},undo:()=>{for(const l of a)x(this,ms).has(l.id)&&l.translateInPage(-s,-i)},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),L(this,Fc,new Map);for(const e of x(this,On))x(this,Fc).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!x(this,Fc))return!1;this.disableUserSelect(!1);const e=x(this,Fc);L(this,Fc,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const r=(s,i,a,o)=>{if(x(this,ms).has(s.id)){const l=x(this,ti).get(o);l?s._setParentAndPosition(l,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)r(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)r(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(x(this,Fc))for(const r of x(this,Fc).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||x(this,On).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return x(this,Ka)===e}getActive(){return x(this,Ka)}getMode(){return x(this,Os)}get imageManager(){return en(this,"imageManager",new xL)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,u,h,d)=>({x:(u-s)/a,y:1-(c+h-r)/i,width:d/a,height:h/i});break;case"180":o=(c,u,h,d)=>({x:1-(c+h-r)/i,y:1-(u+d-s)/a,width:h/i,height:d/a});break;case"270":o=(c,u,h,d)=>({x:1-(u+d-s)/a,y:(c-r)/i,width:d/a,height:h/i});break;default:o=(c,u,h,d)=>({x:(c-r)/i,y:(u-s)/a,width:h/i,height:d/a});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const h=t.getRangeAt(c);if(!h.collapsed)for(const{x:d,y:f,width:p,height:m}of h.getClientRects())p===0||m===0||l.push(o(d,f,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(x(this,Jy)||L(this,Jy,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=x(this,Jy))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=x(this,Jy))==null?void 0:s.get(e.data.id);if(!t)return;const r=x(this,Wu).getRawValue(t);r&&(x(this,Os)===Gt.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}};Zy=new WeakMap,Ka=new WeakMap,ms=new WeakMap,ti=new WeakMap,Qy=new WeakMap,Wu=new WeakMap,Jy=new WeakMap,Bo=new WeakMap,Ad=new WeakMap,pm=new WeakMap,ev=new WeakMap,mm=new WeakMap,Fc=new WeakMap,Fl=new WeakMap,gm=new WeakMap,x2=new WeakMap,b2=new WeakMap,tv=new WeakMap,w2=new WeakMap,Pc=new WeakMap,Nd=new WeakMap,nv=new WeakMap,_d=new WeakMap,Oc=new WeakMap,T_=new WeakMap,Rd=new WeakMap,S2=new WeakMap,Dd=new WeakMap,ym=new WeakMap,k2=new WeakMap,C2=new WeakMap,Os=new WeakMap,On=new WeakMap,Gu=new WeakMap,vm=new WeakMap,T2=new WeakMap,E2=new WeakMap,Fd=new WeakMap,Lc=new WeakMap,Hu=new WeakMap,I2=new WeakMap,Vo=new WeakMap,qe=new WeakSet,$I=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},wL=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of x(this,ti).values())if(r.hasTextLayer(e))return r;return null},pX=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=U(this,qe,$I).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(x(this,Oc)||L(this,Oc,new Ope(this)),x(this,Oc).show(r,s,this.direction==="ltr"))},mX=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){x(this,Gu)&&((i=x(this,Oc))==null||i.hide(),L(this,Gu,null),U(this,qe,Hi).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===x(this,Gu))return;const s=U(this,qe,$I).call(this,e).closest(".textLayer");if(!s){x(this,Gu)&&((a=x(this,Oc))==null||a.hide(),L(this,Gu,null),U(this,qe,Hi).call(this,{hasSelectedText:!1}));return}if((o=x(this,Oc))==null||o.hide(),L(this,Gu,t),U(this,qe,Hi).call(this,{hasSelectedText:!0}),!(x(this,Os)!==Gt.HIGHLIGHT&&x(this,Os)!==Gt.NONE)&&(x(this,Os)===Gt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),L(this,_d,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=x(this,Os)===Gt.HIGHLIGHT?U(this,qe,wL).call(this,s):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),h=d=>{d.type==="pointerup"&&d.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),d.type==="pointerup"&&U(this,qe,zI).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}},zI=function(e=""){x(this,Os)===Gt.HIGHLIGHT?this.highlightSelection(e):x(this,x2)&&U(this,qe,pX).call(this)},gX=function(){document.addEventListener("selectionchange",U(this,qe,mX).bind(this),{signal:this._signal})},yX=function(){if(x(this,Nd))return;L(this,Nd,new AbortController);const e=this.combinedSignal(x(this,Nd));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},vX=function(){var e;(e=x(this,Nd))==null||e.abort(),L(this,Nd,null)},SL=function(){if(x(this,Dd))return;L(this,Dd,new AbortController);const e=this.combinedSignal(x(this,Dd));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},xX=function(){var e;(e=x(this,Dd))==null||e.abort(),L(this,Dd,null)},kL=function(){if(x(this,Ad))return;L(this,Ad,new AbortController);const e=this.combinedSignal(x(this,Ad));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},CL=function(){var e;(e=x(this,Ad))==null||e.abort(),L(this,Ad,null)},bX=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Hi=function(e){Object.entries(e).some(([r,s])=>x(this,E2)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(x(this,E2),e)}),x(this,Os)===Gt.HIGHLIGHT&&e.hasSelectedEditor===!1&&U(this,qe,Fu).call(this,[[pn.HIGHLIGHT_FREE,!0]]))},Fu=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},wX=async function(){if(!x(this,Rd)){L(this,Rd,!0);const e=[];for(const t of x(this,ti).values())e.push(t.enable());await Promise.all(e);for(const t of x(this,ms).values())t.enable()}},SX=function(){if(this.unselectAll(),x(this,Rd)){L(this,Rd,!1);for(const e of x(this,ti).values())e.disable();for(const e of x(this,ms).values())e.disable()}},TL=function(e){const t=x(this,ti).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},kX=function(){let e=null;for(e of x(this,On));return e},Zw=function(){if(x(this,ms).size===0)return!0;if(x(this,ms).size===1)for(const e of x(this,ms).values())return e.isEmpty();return!1},EL=function(e){for(const t of x(this,On))t.unselect();x(this,On).clear();for(const t of e)t.isEmpty()||(x(this,On).add(t),t.select());U(this,qe,Hi).call(this,{hasSelectedEditor:this.hasSelection})},yt(ky,"TRANSLATE_SMALL",1),yt(ky,"TRANSLATE_BIG",10);let Ng=ky;var Ls,Mc,Pl,rv,$c,Xa,sv,zc,Sa,qu,xm,Bc,Pd,Ql,Qw,BI;const qi=class qi{constructor(e){j(this,Ql);j(this,Ls,null);j(this,Mc,!1);j(this,Pl,null);j(this,rv,null);j(this,$c,null);j(this,Xa,null);j(this,sv,!1);j(this,zc,null);j(this,Sa,null);j(this,qu,null);j(this,xm,null);j(this,Bc,!1);L(this,Sa,e),L(this,Bc,e._uiManager.useNewAltTextFlow),x(qi,Pd)||L(qi,Pd,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){qi._l10n??(qi._l10n=e)}async render(){const e=L(this,Pl,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=L(this,rv,document.createElement("span"));e.append(t),x(this,Bc)?(e.classList.add("new"),e.setAttribute("data-l10n-id",x(qi,Pd).missing),t.setAttribute("data-l10n-id",x(qi,Pd)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=x(this,Sa)._uiManager._signal;e.addEventListener("contextmenu",oc,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),x(this,Sa)._uiManager.editAltText(x(this,Sa)),x(this,Bc)&&x(this,Sa)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:x(this,Ql,Qw)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(L(this,sv,!0),s(i))},{signal:r}),await U(this,Ql,BI).call(this),e}finish(){x(this,Pl)&&(x(this,Pl).focus({focusVisible:x(this,sv)}),L(this,sv,!1))}isEmpty(){return x(this,Bc)?x(this,Ls)===null:!x(this,Ls)&&!x(this,Mc)}hasData(){return x(this,Bc)?x(this,Ls)!==null||!!x(this,qu):this.isEmpty()}get guessedText(){return x(this,qu)}async setGuessedText(e){x(this,Ls)===null&&(L(this,qu,e),L(this,xm,await qi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),U(this,Ql,BI).call(this))}toggleAltTextBadge(e=!1){var t;if(!x(this,Bc)||x(this,Ls)){(t=x(this,zc))==null||t.remove(),L(this,zc,null);return}if(!x(this,zc)){const r=L(this,zc,document.createElement("div"));r.className="noAltTextBadge",x(this,Sa).div.append(r)}x(this,zc).classList.toggle("hidden",!e)}serialize(e){let t=x(this,Ls);return!e&&x(this,qu)===t&&(t=x(this,xm)),{altText:t,decorative:x(this,Mc),guessedText:x(this,qu),textWithDisclaimer:x(this,xm)}}get data(){return{altText:x(this,Ls),decorative:x(this,Mc)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(L(this,qu,r),L(this,xm,s)),!(x(this,Ls)===e&&x(this,Mc)===t)&&(i||(L(this,Ls,e),L(this,Mc,t)),U(this,Ql,BI).call(this))}toggle(e=!1){x(this,Pl)&&(!e&&x(this,Xa)&&(clearTimeout(x(this,Xa)),L(this,Xa,null)),x(this,Pl).disabled=!e)}shown(){x(this,Sa)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:x(this,Ql,Qw)}})}destroy(){var e,t;(e=x(this,Pl))==null||e.remove(),L(this,Pl,null),L(this,rv,null),L(this,$c,null),(t=x(this,zc))==null||t.remove(),L(this,zc,null)}};Ls=new WeakMap,Mc=new WeakMap,Pl=new WeakMap,rv=new WeakMap,$c=new WeakMap,Xa=new WeakMap,sv=new WeakMap,zc=new WeakMap,Sa=new WeakMap,qu=new WeakMap,xm=new WeakMap,Bc=new WeakMap,Pd=new WeakMap,Ql=new WeakSet,Qw=function(){return x(this,Ls)&&"added"||x(this,Ls)===null&&this.guessedText&&"review"||"missing"},BI=async function(){var s,i,a;const e=x(this,Pl);if(!e)return;if(x(this,Bc)){if(e.classList.toggle("done",!!x(this,Ls)),e.setAttribute("data-l10n-id",x(qi,Pd)[x(this,Ql,Qw)]),(s=x(this,rv))==null||s.setAttribute("data-l10n-id",x(qi,Pd)[`${x(this,Ql,Qw)}-label`]),!x(this,Ls)){(i=x(this,$c))==null||i.remove();return}}else{if(!x(this,Ls)&&!x(this,Mc)){e.classList.remove("done"),(a=x(this,$c))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=x(this,$c);if(!t){L(this,$c,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${x(this,Sa).id}`;const o=100,l=x(this,Sa)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(x(this,Xa)),L(this,Xa,null)},{once:!0}),e.addEventListener("mouseenter",()=>{L(this,Xa,setTimeout(()=>{L(this,Xa,null),x(this,$c).classList.add("show"),x(this,Sa)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;x(this,Xa)&&(clearTimeout(x(this,Xa)),L(this,Xa,null)),(c=x(this,$c))==null||c.classList.remove("show")},{signal:l})}x(this,Mc)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=x(this,Ls)),t.parentNode||e.append(t);const r=x(this,Sa).getImageForAltText();r==null||r.setAttribute("aria-describedby",t.id)},j(qi,Pd,null),yt(qi,"_l10n",null);let lN=qi;var A2,bm,N2,_2,R2,D2,F2,iv,Ku,wm,Od,Uh,CX,TX,IL;const Wj=class Wj{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:a=null,signal:o}){j(this,Uh);j(this,A2);j(this,bm,!1);j(this,N2,null);j(this,_2);j(this,R2);j(this,D2);j(this,F2);j(this,iv);j(this,Ku,null);j(this,wm);j(this,Od,null);L(this,A2,e),L(this,N2,r),L(this,_2,t),L(this,R2,s),L(this,D2,i),L(this,F2,a),L(this,wm,new AbortController),L(this,iv,AbortSignal.any([o,x(this,wm).signal])),e.addEventListener("touchstart",U(this,Uh,CX).bind(this),{passive:!1,signal:x(this,iv)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return en(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=x(this,wm))==null||e.abort(),L(this,wm,null)}};A2=new WeakMap,bm=new WeakMap,N2=new WeakMap,_2=new WeakMap,R2=new WeakMap,D2=new WeakMap,F2=new WeakMap,iv=new WeakMap,Ku=new WeakMap,wm=new WeakMap,Od=new WeakMap,Uh=new WeakSet,CX=function(e){var s,i,a;if((s=x(this,_2))!=null&&s.call(this)||e.touches.length<2)return;if(!x(this,Od)){L(this,Od,new AbortController);const o=AbortSignal.any([x(this,iv),x(this,Od).signal]),l=x(this,A2),c={signal:o,passive:!1};l.addEventListener("touchmove",U(this,Uh,TX).bind(this),c),l.addEventListener("touchend",U(this,Uh,IL).bind(this),c),l.addEventListener("touchcancel",U(this,Uh,IL).bind(this),c),(i=x(this,R2))==null||i.call(this)}if(uo(e),e.touches.length!==2||(a=x(this,N2))!=null&&a.call(this)){L(this,Ku,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),L(this,Ku,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},TX=function(e){var w;if(!x(this,Ku)||e.touches.length!==2)return;let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:a,screenY:o}=r,l=x(this,Ku),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,f=h-c,p=d-u,m=a-s,y=o-i,g=Math.hypot(m,y)||1,v=Math.hypot(f,p)||1;if(!x(this,bm)&&Math.abs(v-g)<=Wj.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=i,l.touch1X=a,l.touch1Y=o,e.preventDefault(),!x(this,bm)){L(this,bm,!0);return}const b=[(s+a)/2,(i+o)/2];(w=x(this,D2))==null||w.call(this,b,v,g)},IL=function(e){var t;x(this,Od).abort(),L(this,Od,null),(t=x(this,F2))==null||t.call(this),x(this,Ku)&&(e.preventDefault(),L(this,Ku,null),L(this,bm,!1))};let cN=Wj;var Sm,Ol,sr,av,Ld,P2,km,ni,Cm,Xu,Md,O2,Tm,Ya,L2,Em,Yu,Vc,ov,lv,jo,Im,M2,E_,vt,AL,$2,NL,VI,EX,IX,_L,jI,RL,AX,NX,_X,DL,RX,FL,DX,FX,PX,PL,Jw;const Yt=class Yt{constructor(e){j(this,vt);j(this,Sm,null);j(this,Ol,null);j(this,sr,null);j(this,av,!1);j(this,Ld,null);j(this,P2,"");j(this,km,!1);j(this,ni,null);j(this,Cm,null);j(this,Xu,null);j(this,Md,null);j(this,O2,"");j(this,Tm,!1);j(this,Ya,null);j(this,L2,!1);j(this,Em,!1);j(this,Yu,!1);j(this,Vc,null);j(this,ov,0);j(this,lv,0);j(this,jo,null);j(this,Im,null);yt(this,"_editToolbar",null);yt(this,"_initialOptions",Object.create(null));yt(this,"_initialData",null);yt(this,"_isVisible",!0);yt(this,"_uiManager",null);yt(this,"_focusEventsAllowed",!0);j(this,M2,!1);j(this,E_,Yt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Yt.prototype._resizeWithKeyboard,t=Ng.TRANSLATE_SMALL,r=Ng.TRANSLATE_BIG;return en(this,"_resizerKeyboardManager",new Gk([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Yt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return en(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new $pe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Yt._l10n??(Yt._l10n=e),Yt._l10nResizer||(Yt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Yt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Yt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){qn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return x(this,M2)}set _isDraggable(e){var t;L(this,M2,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=x(this,E_)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):U(this,vt,Jw).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(x(this,Tm)?L(this,Tm,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){U(this,vt,AL).call(this,this.parentDimensions,e,t)}translateInPage(e,t){x(this,Ya)||L(this,Ya,[this.x,this.y,this.width,this.height]),U(this,vt,AL).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){x(this,Ya)||L(this,Ya,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:u}=r;u.left=`${(100*a).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!x(this,Ya)&&(x(this,Ya)[0]!==this.x||x(this,Ya)[1]!==this.y)}get _hasBeenResized(){return!!x(this,Ya)&&(x(this,Ya)[2]!==this.width||x(this,Ya)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Yt,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:a,width:o,height:l}=this;if(o*=r,l*=s,i*=r,a*=s,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(r-o,i)),a=Math.max(0,Math.min(s-l,a));break;case 90:i=Math.max(0,Math.min(r-l,i)),a=Math.min(s,Math.max(o,a));break;case 180:i=Math.min(r,Math.max(o,i)),a=Math.min(s,Math.max(l,a));break;case 270:i=Math.min(r,Math.max(l,i)),a=Math.max(0,Math.min(s-o,a));break}this.x=i/=r,this.y=a/=s;const[c,u]=this.getBaseTranslation();i+=c,a+=u,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return U(r=Yt,$2,NL).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return U(r=Yt,$2,NL).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,x(this,km)||(i.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!x(this,km)&&t.endsWith("%");if(s&&i)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!x(this,km)&&!i&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=x(this,sr))==null||e.finish()}async addEditToolbar(){return this._editToolbar||x(this,Em)?this._editToolbar:(this._editToolbar=new yL(this),this.div.append(this._editToolbar.render()),x(this,sr)&&await this._editToolbar.addAltText(x(this,sr)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=x(this,sr))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){x(this,sr)||(lN.initialize(Yt._l10n),L(this,sr,new lN(this)),x(this,Sm)&&(x(this,sr).data=x(this,Sm),L(this,Sm,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=x(this,sr))==null?void 0:e.data}set altTextData(e){x(this,sr)&&(x(this,sr).data=e)}get guessedAltText(){var e;return(e=x(this,sr))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=x(this,sr))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=x(this,sr))==null?void 0:t.serialize(e)}hasAltText(){return!!x(this,sr)&&!x(this,sr).isEmpty()}hasAltTextData(){var e;return((e=x(this,sr))==null?void 0:e.hasData())??!1}render(){var i;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=x(this,av)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),U(this,vt,FL).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),oN(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(x(this,Im)||L(this,Im,new cN({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:U(this,vt,AX).bind(this),onPinching:U(this,vt,NX).bind(this),onPinchEnd:U(this,vt,_X).bind(this),signal:this._uiManager._signal}))),(i=this._uiManager._editorUndoBar)==null||i.hide(),this.div}pointerdown(e){const{isMac:t}=na.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(L(this,Tm,!0),this._isDraggable){U(this,vt,RX).call(this,e);return}U(this,vt,DL).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){x(this,Vc)&&clearTimeout(x(this,Vc)),L(this,Vc,setTimeout(()=>{var e;L(this,Vc,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/s,u=t/s,h=this.x*i,d=this.y*a,f=this.width*i,p=this.height*a;switch(r){case 0:return[h+c+o,a-d-u-p+l,h+c+f+o,a-d-u+l];case 90:return[h+u+o,a-d+c+l,h+u+p+o,a-d+c+f+l];case 180:return[h-c-f+o,a-d+u+l,h-c+o,a-d+u+p+l];case 270:return[h-u-p+o,a-d-c-f+l,h-u+o,a-d-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,o=i-r,l=a-s;switch(this.rotation){case 0:return[r,t-a,o,l];case 90:return[r,t-s,l,o];case 180:return[i,t-s,o,l];case 270:return[i,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){L(this,Em,!0)}disableEditMode(){L(this,Em,!1)}isInEditMode(){return x(this,Em)}shouldGetKeyboardEvents(){return x(this,Yu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&s>0&&e<i&&r>0}rebuild(){U(this,vt,FL).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){qn("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});s.rotation=e.rotation,L(s,Sm,e.accessibilityData);const[i,a]=s.pageDimensions,[o,l,c,u]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=l/a,s.width=c/i,s.height=u/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=x(this,Md))==null||e.abort(),L(this,Md,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),x(this,Vc)&&(clearTimeout(x(this,Vc)),L(this,Vc,null)),U(this,vt,Jw).call(this),this.removeEditToolbar(),x(this,jo)){for(const r of x(this,jo).values())clearTimeout(r);L(this,jo,null)}this.parent=null,(t=x(this,Im))==null||t.destroy(),L(this,Im,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(U(this,vt,EX).call(this),x(this,ni).classList.remove("hidden"),oN(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),L(this,Xu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=x(this,ni).children;if(!x(this,Ol)){L(this,Ol,Array.from(t));const a=U(this,vt,DX).bind(this),o=U(this,vt,FX).bind(this),l=this._uiManager._signal;for(const c of x(this,Ol)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",U(this,vt,PX).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",Yt._l10nResizer[u])}}const r=x(this,Ol)[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(x(this,Ol).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)x(this,ni).append(x(this,ni).firstChild);else if(i>s)for(let o=0;o<i-s;o++)x(this,ni).firstChild.before(x(this,ni).lastChild);let a=0;for(const o of t){const c=x(this,Ol)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Yt._l10nResizer[c])}}U(this,vt,PL).call(this,0),L(this,Yu,!0),x(this,ni).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){x(this,Yu)&&U(this,vt,RL).call(this,x(this,O2),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){U(this,vt,Jw).call(this),this.div.focus()}select(){var e,t,r;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=x(this,sr))==null||r.toggleAltTextBadge(!1)}unselect(){var e,t,r,s,i;(e=x(this,ni))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=x(this,sr))==null||i.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return x(this,L2)}set isEditing(e){L(this,L2,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){L(this,km,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){x(this,jo)||L(this,jo,new Map);const{action:r}=e;let s=x(this,jo).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),x(this,jo).delete(r),x(this,jo).size===0&&L(this,jo,null)},Yt._telemetryTimeout),x(this,jo).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),L(this,av,!1)}disable(){this.div&&(this.div.tabIndex=-1),L(this,av,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Sm=new WeakMap,Ol=new WeakMap,sr=new WeakMap,av=new WeakMap,Ld=new WeakMap,P2=new WeakMap,km=new WeakMap,ni=new WeakMap,Cm=new WeakMap,Xu=new WeakMap,Md=new WeakMap,O2=new WeakMap,Tm=new WeakMap,Ya=new WeakMap,L2=new WeakMap,Em=new WeakMap,Yu=new WeakMap,Vc=new WeakMap,ov=new WeakMap,lv=new WeakMap,jo=new WeakMap,Im=new WeakMap,M2=new WeakMap,E_=new WeakMap,vt=new WeakSet,AL=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},$2=new WeakSet,NL=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},VI=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},EX=function(){if(x(this,ni))return;L(this,ni,document.createElement("div")),x(this,ni).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");x(this,ni).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",U(this,vt,IX).bind(this,r),{signal:t}),s.addEventListener("contextmenu",oc,{signal:t}),s.tabIndex=-1}this.div.prepend(x(this,ni))},IX=function(e,t){var u;t.preventDefault();const{isMac:r}=na.platform;if(t.button!==0||t.ctrlKey&&r)return;(u=x(this,sr))==null||u.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,L(this,Cm,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",U(this,vt,RL).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",uo,{passive:!1,signal:a}),window.addEventListener("contextmenu",oc,{signal:a}),L(this,Xu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=x(this,sr))==null||h.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,U(this,vt,jI).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},_L=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*r,a*s),this.fixAndSetPosition(),this._onResized()},jI=function(){if(!x(this,Xu))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=x(this,Xu);L(this,Xu,null);const i=this.x,a=this.y,o=this.width,l=this.height;i===e&&a===t&&o===r&&l===s||this.addCommands({cmd:U(this,vt,_L).bind(this,i,a,o,l),undo:U(this,vt,_L).bind(this,e,t,r,s),mustExec:!0})},RL=function(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,l=this.height,c=Yt.MIN_SIZE/r,u=Yt.MIN_SIZE/s,h=U(this,vt,VI).call(this,this.rotation),d=(z,W)=>[h[0]*z+h[2]*W,h[1]*z+h[3]*W],f=U(this,vt,VI).call(this,360-this.rotation),p=(z,W)=>[f[0]*z+f[2]*W,f[1]*z+f[3]*W];let m,y,g=!1,v=!1;switch(e){case"topLeft":g=!0,m=(z,W)=>[0,0],y=(z,W)=>[z,W];break;case"topMiddle":m=(z,W)=>[z/2,0],y=(z,W)=>[z/2,W];break;case"topRight":g=!0,m=(z,W)=>[z,0],y=(z,W)=>[0,W];break;case"middleRight":v=!0,m=(z,W)=>[z,W/2],y=(z,W)=>[0,W/2];break;case"bottomRight":g=!0,m=(z,W)=>[z,W],y=(z,W)=>[0,0];break;case"bottomMiddle":m=(z,W)=>[z/2,W],y=(z,W)=>[z/2,0];break;case"bottomLeft":g=!0,m=(z,W)=>[0,W],y=(z,W)=>[z,0];break;case"middleLeft":v=!0,m=(z,W)=>[0,W/2],y=(z,W)=>[z,W/2];break}const b=m(o,l),w=y(o,l);let C=d(...w);const I=Yt._round(i+C[0]),T=Yt._round(a+C[1]);let E=1,A=1,N,F;if(t.fromKeyboard)({deltaX:N,deltaY:F}=t);else{const{screenX:z,screenY:W}=t,[K,H]=x(this,Cm);[N,F]=this.screenToPageTranslation(z-K,W-H),x(this,Cm)[0]=z,x(this,Cm)[1]=W}if([N,F]=p(N/r,F/s),g){const z=Math.hypot(o,l);E=A=Math.max(Math.min(Math.hypot(w[0]-b[0]-N,w[1]-b[1]-F)/z,1/o,1/l),c/o,u/l)}else v?E=Math.max(c,Math.min(1,Math.abs(w[0]-b[0]-N)))/o:A=Math.max(u,Math.min(1,Math.abs(w[1]-b[1]-F)))/l;const _=Yt._round(o*E),D=Yt._round(l*A);C=d(...y(_,D));const R=I-C[0],B=T-C[1];x(this,Ya)||L(this,Ya,[this.x,this.y,this.width,this.height]),this.width=_,this.height=D,this.x=R,this.y=B,this.setDims(r*_,s*D),this.fixAndSetPosition(),this._onResizing()},AX=function(){var e;L(this,Xu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=x(this,sr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},NX=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const a=U(this,vt,VI).call(this,this.rotation),o=(I,T)=>[a[0]*I+a[2]*T,a[1]*I+a[3]*T],[l,c]=this.parentDimensions,u=this.x,h=this.y,d=this.width,f=this.height,p=Yt.MIN_SIZE/l,m=Yt.MIN_SIZE/c;i=Math.max(Math.min(i,1/d,1/f),p/d,m/f);const y=Yt._round(d*i),g=Yt._round(f*i);if(y===d&&g===f)return;x(this,Ya)||L(this,Ya,[u,h,d,f]);const v=o(d/2,f/2),b=Yt._round(u+v[0]),w=Yt._round(h+v[1]),C=o(y/2,g/2);this.x=b-C[0],this.y=w-C[1],this.width=y,this.height=g,this.setDims(l*y,c*g),this.fixAndSetPosition(),this._onResizing()},_X=function(){var e;(e=x(this,sr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),U(this,vt,jI).call(this)},DL=function(e){const{isMac:t}=na.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},RX=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:i},o=c=>{s.abort(),L(this,Ld,null),L(this,Tm,!1),this._uiManager.endDragSession()||U(this,vt,DL).call(this,c),r&&this._onStopDragging()};t&&(L(this,ov,e.clientX),L(this,lv,e.clientY),L(this,Ld,e.pointerId),L(this,P2,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._onStartDragging());const{clientX:u,clientY:h,pointerId:d}=c;if(d!==x(this,Ld)){uo(c);return}const[f,p]=this.screenToPageTranslation(u-x(this,ov),h-x(this,lv));L(this,ov,u),L(this,lv,h),this._uiManager.dragSelectedEditors(f,p)},a),window.addEventListener("touchmove",uo,a),window.addEventListener("pointerdown",c=>{c.pointerType===x(this,P2)&&(x(this,Im)||c.isPrimary)&&o(c),uo(c)},a));const l=c=>{if(!x(this,Ld)||x(this,Ld)===c.pointerId){o(c);return}uo(c)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},FL=function(){if(x(this,Md)||!this.div)return;L(this,Md,new AbortController);const e=this._uiManager.combinedSignal(x(this,Md));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},DX=function(e){Yt._resizerKeyboardManager.exec(this,e)},FX=function(e){var t;x(this,Yu)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==x(this,ni)&&U(this,vt,Jw).call(this)},PX=function(e){L(this,O2,x(this,Yu)?e:"")},PL=function(e){if(x(this,Ol))for(const t of x(this,Ol))t.tabIndex=e},Jw=function(){L(this,Yu,!1),U(this,vt,PL).call(this,-1),U(this,vt,jI).call(this)},j(Yt,$2),yt(Yt,"_l10n",null),yt(Yt,"_l10nResizer",null),yt(Yt,"_borderLineWidth",-1),yt(Yt,"_colorManager",new bL),yt(Yt,"_zIndex",1),yt(Yt,"_telemetryTimeout",1e3);let Cr=Yt;class $pe extends Cr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const m8=3285377520,Oo=4294901760,Tc=65535;class OX{constructor(e){this.h1=e?e&4294967295:m8,this.h2=e?e&4294967295:m8}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let m=0,y=e.length;m<y;m++){const g=e.charCodeAt(m);g<=255?t[r++]=g:(t[r++]=g>>>8,t[r++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,l=0,c=this.h1,u=this.h2;const h=3432918353,d=461845907,f=h&Tc,p=d&Tc;for(let m=0;m<s;m++)m&1?(o=a[m],o=o*h&Oo|o*f&Tc,o=o<<15|o>>>17,o=o*d&Oo|o*p&Tc,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[m],l=l*h&Oo|l*f&Tc,l=l<<15|l>>>17,l=l*d&Oo|l*p&Tc,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*h&Oo|o*f&Tc,o=o<<15|o>>>17,o=o*d&Oo|o*p&Tc,s&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Oo|e*36045&Tc,t=t*4283543511&Oo|((t<<16|e>>>16)*2950163797&Oo)>>>16,e^=t>>>1,e=e*444984403&Oo|e*60499&Tc,t=t*3301882366&Oo|((t<<16|e>>>16)*3120437893&Oo)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const OL=Object.freeze({map:null,hash:"",transfer:void 0});var Am,Nm,Ms,I_,LX;class b5{constructor(){j(this,I_);j(this,Am,!1);j(this,Nm,null);j(this,Ms,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=x(this,Ms).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return x(this,Ms).get(e)}remove(e){if(x(this,Ms).delete(e),x(this,Ms).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of x(this,Ms).values())if(t instanceof Cr)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=x(this,Ms).get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,x(this,Ms).set(e,t);s&&U(this,I_,LX).call(this),t instanceof Cr&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return x(this,Ms).has(e)}getAll(){return x(this,Ms).size>0?p5(x(this,Ms)):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return x(this,Ms).size}resetModified(){x(this,Am)&&(L(this,Am,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new MX(this)}get serializable(){if(x(this,Ms).size===0)return OL;const e=new Map,t=new OX,r=[],s=Object.create(null);let i=!1;for(const[a,o]of x(this,Ms)){const l=o instanceof Cr?o.serialize(!1,s):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:OL}get editorStats(){let e=null;const t=new Map;for(const r of x(this,Ms).values()){if(!(r instanceof Cr))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[o,l]of Object.entries(s)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){L(this,Nm,null)}get modifiedIds(){if(x(this,Nm))return x(this,Nm);const e=[];for(const t of x(this,Ms).values())!(t instanceof Cr)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return L(this,Nm,{ids:new Set(e),hash:e.join(",")})}}Am=new WeakMap,Nm=new WeakMap,Ms=new WeakMap,I_=new WeakSet,LX=function(){x(this,Am)||(L(this,Am,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var z2;class MX extends b5{constructor(t){super();j(this,z2);const{map:r,hash:s,transfer:i}=t.serializable,a=structuredClone(r,i?{transfer:i}:null);L(this,z2,{map:a,hash:s,transfer:i})}get print(){qn("Should not call PrintAnnotationStorage.print")}get serializable(){return x(this,z2)}get modifiedIds(){return en(this,"modifiedIds",{ids:new Set,hash:""})}}z2=new WeakMap;var cv;class zpe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){j(this,cv,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),x(this,cv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||x(this,cv).has(e.loadedName))){if(ns(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:i}=e,a=new FontFace(r,s,i);this.addNativeFontFace(a);try{await a.load(),x(this,cv).add(r),t==null||t(e)}catch{Ht(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}qn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw Ht(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return en(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Li||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),en(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(ns(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return en(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(w,C){return w.charCodeAt(C)<<24|w.charCodeAt(C+1)<<16|w.charCodeAt(C+2)<<8|w.charCodeAt(C+3)&255}function s(w,C,I,T){const E=w.substring(0,C),A=w.substring(C+I);return E+T+A}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function u(w,C){if(++c>30){Ht("Load test font never loaded."),C();return}if(l.font="30px "+w,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(u.bind(null,w,C))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=s(d,976,h.length,h);const p=16,m=1482184792;let y=r(d,p);for(i=0,a=h.length-3;i<a;i+=4)y=y-m+r(h,i)|0;i<h.length&&(y=y-m+r(h+"XXX",i)|0),d=s(d,p,4,Cpe(y));const g=`url(data:font/opentype;base64,${btoa(d)});`,v=`@font-face {font-family:"${h}";src:${g}}`;this.insertRule(v);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const w of[e.loadedName,h]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=w,b.append(C)}this._document.body.append(b),u(h,()=>{b.remove(),t.complete()})}}cv=new WeakMap;class Bpe{constructor(e,{disableFontFace:t=!1,fontExtraProperties:r=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this.fontExtraProperties=r===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${_pe(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(a){Ht(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}const CE={DATA:1,ERROR:2},Qr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function g8(){}function xa(n){if(n instanceof Lf||n instanceof pL||n instanceof kS||n instanceof d8||n instanceof aN||n instanceof iO)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||qn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Lf(n.message);case"InvalidPDFException":return new pL(n.message);case"MissingPDFException":return new kS(n.message);case"PasswordException":return new d8(n.message,n.code);case"UnexpectedResponseException":return new aN(n.message,n.status);case"UnknownErrorException":return new iO(n.message,n.details)}return new iO(n.message,n.toString())}var uv,pl,$X,zX,BX,UI;class e1{constructor(e,t,r){j(this,pl);j(this,uv,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",U(this,pl,$X).bind(this),{signal:x(this,uv).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,l.postMessage({sourceName:a,targetName:o,stream:Qr.PULL,streamId:i,desiredSize:c.desiredSize}),u.promise},cancel:c=>{ns(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Qr.CANCEL,streamId:i,reason:xa(c)}),u.promise}},r)}destroy(){var e;(e=x(this,uv))==null||e.abort(),L(this,uv,null)}}uv=new WeakMap,pl=new WeakSet,$X=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){U(this,pl,BX).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===CE.DATA)s.resolve(e.data);else if(e.callback===CE.ERROR)s.reject(xa(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:CE.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:CE.ERROR,callbackId:e.callbackId,reason:xa(a)})});return}if(e.streamId){U(this,pl,zX).call(this,e);return}t(e.data)},zX=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,u=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=u,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:Qr.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Qr.CLOSE,streamId:t}),delete a.streamSinks[t])},error(c){ns(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Qr.ERROR,streamId:t,reason:xa(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Qr.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:Qr.START_COMPLETE,streamId:t,reason:xa(c)})})},BX=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Qr.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(xa(e.reason));break;case Qr.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(xa(e.reason));break;case Qr.PULL:if(!o){i.postMessage({sourceName:r,targetName:s,stream:Qr.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||g8).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Qr.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:Qr.PULL_COMPLETE,streamId:t,reason:xa(c)})});break;case Qr.ENQUEUE:if(ns(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Qr.CLOSE:if(ns(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),U(this,pl,UI).call(this,a,t);break;case Qr.ERROR:ns(a,"error should have stream controller"),a.controller.error(xa(e.reason)),U(this,pl,UI).call(this,a,t);break;case Qr.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(xa(e.reason)),U(this,pl,UI).call(this,a,t);break;case Qr.CANCEL:if(!o)break;const l=xa(e.reason);Promise.try(o.onCancel||g8,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Qr.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:Qr.CANCEL_COMPLETE,streamId:t,reason:xa(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},UI=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var B2;class VX{constructor({enableHWA:e=!1}){j(this,B2,!1);L(this,B2,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!x(this,B2)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){qn("Abstract method `_createCanvas` called.")}}B2=new WeakMap;class Vpe extends VX{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class jX{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){qn("Abstract method `_fetch` called.")}}class UX extends jX{async _fetch(e){const t=await cR(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):lR(t)}}class WX{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var _m,hv,Zu,Qu,Ei,Rm,Dm,et,ki,t1,q0,WI,K0,GX,LL,X0,n1,r1,ML,s1;class jpe extends WX{constructor({docId:t,ownerDocument:r=globalThis.document}){super();j(this,et);j(this,_m);j(this,hv);j(this,Zu);j(this,Qu);j(this,Ei);j(this,Rm);j(this,Dm,0);L(this,Qu,t),L(this,Ei,r)}addFilter(t){if(!t)return"none";let r=x(this,et,ki).get(t);if(r)return r;const[s,i,a]=U(this,et,WI).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(r=x(this,et,ki).get(o),r)return x(this,et,ki).set(t,r),r;const l=`g_${x(this,Qu)}_transfer_map_${Gi(this,Dm)._++}`,c=U(this,et,K0).call(this,l);x(this,et,ki).set(t,c),x(this,et,ki).set(o,c);const u=U(this,et,X0).call(this,l);return U(this,et,r1).call(this,s,i,a,u),c}addHCMFilter(t,r){var p;const s=`${t}-${r}`,i="base";let a=x(this,et,t1).get(i);if((a==null?void 0:a.key)===s||(a?((p=a.filter)==null||p.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},x(this,et,t1).set(i,a)),!t||!r))return a.url;const o=U(this,et,s1).call(this,t);t=pt.makeHexColor(...o);const l=U(this,et,s1).call(this,r);if(r=pt.makeHexColor(...l),x(this,et,q0).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return a.url;const c=new Array(256);for(let m=0;m<=255;m++){const y=m/255;c[m]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}const u=c.join(","),h=`g_${x(this,Qu)}_hcm_filter`,d=a.filter=U(this,et,X0).call(this,h);U(this,et,r1).call(this,u,u,u,d),U(this,et,LL).call(this,d);const f=(m,y)=>{const g=o[m]/255,v=l[m]/255,b=new Array(y+1);for(let w=0;w<=y;w++)b[w]=g+w/y*(v-g);return b.join(",")};return U(this,et,r1).call(this,f(0,5),f(1,5),f(2,5),d),a.url=U(this,et,K0).call(this,h),a.url}addAlphaFilter(t){let r=x(this,et,ki).get(t);if(r)return r;const[s]=U(this,et,WI).call(this,[t]),i=`alpha_${s}`;if(r=x(this,et,ki).get(i),r)return x(this,et,ki).set(t,r),r;const a=`g_${x(this,Qu)}_alpha_map_${Gi(this,Dm)._++}`,o=U(this,et,K0).call(this,a);x(this,et,ki).set(t,o),x(this,et,ki).set(i,o);const l=U(this,et,X0).call(this,a);return U(this,et,ML).call(this,s,l),o}addLuminosityFilter(t){let r=x(this,et,ki).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=U(this,et,WI).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=x(this,et,ki).get(i),r)return x(this,et,ki).set(t,r),r;const a=`g_${x(this,Qu)}_luminosity_map_${Gi(this,Dm)._++}`,o=U(this,et,K0).call(this,a);x(this,et,ki).set(t,o),x(this,et,ki).set(i,o);const l=U(this,et,X0).call(this,a);return U(this,et,GX).call(this,l),t&&U(this,et,ML).call(this,s,l),o}addHighlightHCMFilter(t,r,s,i,a){var v;const o=`${r}-${s}-${i}-${a}`;let l=x(this,et,t1).get(t);if((l==null?void 0:l.key)===o||(l?((v=l.filter)==null||v.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},x(this,et,t1).set(t,l)),!r||!s))return l.url;const[c,u]=[r,s].map(U(this,et,s1).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[f,p]=[i,a].map(U(this,et,s1).bind(this));d<h&&([h,d,f,p]=[d,h,p,f]),x(this,et,q0).style.color="";const m=(b,w,C)=>{const I=new Array(256),T=(d-h)/C,E=b/255,A=(w-b)/(255*C);let N=0;for(let F=0;F<=C;F++){const _=Math.round(h+F*T),D=E+F*A;for(let R=N;R<=_;R++)I[R]=D;N=_+1}for(let F=N;F<256;F++)I[F]=I[N-1];return I.join(",")},y=`g_${x(this,Qu)}_hcm_${t}_filter`,g=l.filter=U(this,et,X0).call(this,y);return U(this,et,LL).call(this,g),U(this,et,r1).call(this,m(f[0],p[0],5),m(f[1],p[1],5),m(f[2],p[2],5),g),l.url=U(this,et,K0).call(this,y),l.url}destroy(t=!1){var r,s,i,a;t&&((r=x(this,Rm))!=null&&r.size)||((s=x(this,Zu))==null||s.parentNode.parentNode.remove(),L(this,Zu,null),(i=x(this,hv))==null||i.clear(),L(this,hv,null),(a=x(this,Rm))==null||a.clear(),L(this,Rm,null),L(this,Dm,0))}}_m=new WeakMap,hv=new WeakMap,Zu=new WeakMap,Qu=new WeakMap,Ei=new WeakMap,Rm=new WeakMap,Dm=new WeakMap,et=new WeakSet,ki=function(){return x(this,hv)||L(this,hv,new Map)},t1=function(){return x(this,Rm)||L(this,Rm,new Map)},q0=function(){if(!x(this,Zu)){const t=x(this,Ei).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=x(this,Ei).createElementNS(Du,"svg");s.setAttribute("width",0),s.setAttribute("height",0),L(this,Zu,x(this,Ei).createElementNS(Du,"defs")),t.append(s),s.append(x(this,Zu)),x(this,Ei).body.append(t)}return x(this,Zu)},WI=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let d=0;d<256;d++)u[d]=c[d]/255;const h=u.join(",");return[h,h,h]}const[r,s,i]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=r[c]/255,o[c]=s[c]/255,l[c]=i[c]/255;return[a.join(","),o.join(","),l.join(",")]},K0=function(t){if(x(this,_m)===void 0){L(this,_m,"");const r=x(this,Ei).URL;r!==x(this,Ei).baseURI&&(uR(r)?Ht('#createUrl: ignore "data:"-URL for performance reasons.'):L(this,_m,r.split("#",1)[0]))}return`url(${x(this,_m)}#${t})`},GX=function(t){const r=x(this,Ei).createElementNS(Du,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},LL=function(t){const r=x(this,Ei).createElementNS(Du,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},X0=function(t){const r=x(this,Ei).createElementNS(Du,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),x(this,et,q0).append(r),r},n1=function(t,r,s){const i=x(this,Ei).createElementNS(Du,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},r1=function(t,r,s,i){const a=x(this,Ei).createElementNS(Du,"feComponentTransfer");i.append(a),U(this,et,n1).call(this,a,"feFuncR",t),U(this,et,n1).call(this,a,"feFuncG",r),U(this,et,n1).call(this,a,"feFuncB",s)},ML=function(t,r){const s=x(this,Ei).createElementNS(Du,"feComponentTransfer");r.append(s),U(this,et,n1).call(this,s,"feFuncA",t)},s1=function(t){return x(this,et,q0).style.color=t,x5(getComputedStyle(x(this,et,q0)).getPropertyValue("color"))};class HX{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){qn("Abstract method `_fetch` called.")}}class qX extends HX{async _fetch(e){const t=await cR(e,"arraybuffer");return new Uint8Array(t)}}Li&&Ht("Please use the `legacy` build in Node.js environments.");async function KX(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Upe extends WX{}class Wpe extends VX{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Gpe extends jX{async _fetch(e){return KX(e)}}class Hpe extends HX{async _fetch(e){return KX(e)}}const _i={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $L(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class w5{getPattern(){qn("Abstract method `getPattern` called.")}}class qpe extends w5{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===_i.STROKE||s===_i.FILL){const a=t.current.getClippedPathBoundingBox(s,hr(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=t.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),r=pt.transform(r,[1,0,0,1,a[0],a[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),$L(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(r);i.setTransform(h)}else $L(e,this._bbox),i=this._createGradient(e);return i}}function lO(n,e,t,r,s,i,a,o){const l=e.coords,c=e.colors,u=n.data,h=n.width*4;let d;l[t+1]>l[r+1]&&(d=t,t=r,r=d,d=i,i=a,a=d),l[r+1]>l[s+1]&&(d=r,r=s,s=d,d=a,a=o,o=d),l[t+1]>l[r+1]&&(d=t,t=r,r=d,d=i,i=a,a=d);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,m=(l[r]+e.offsetX)*e.scaleX,y=(l[r+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,v=(l[s+1]+e.offsetY)*e.scaleY;if(p>=v)return;const b=c[i],w=c[i+1],C=c[i+2],I=c[a],T=c[a+1],E=c[a+2],A=c[o],N=c[o+1],F=c[o+2],_=Math.round(p),D=Math.round(v);let R,B,z,W,K,H,se,q;for(let X=_;X<=D;X++){if(X<y){const Ae=X<p?0:(p-X)/(p-y);R=f-(f-m)*Ae,B=b-(b-I)*Ae,z=w-(w-T)*Ae,W=C-(C-E)*Ae}else{let Ae;X>v?Ae=1:y===v?Ae=0:Ae=(y-X)/(y-v),R=m-(m-g)*Ae,B=I-(I-A)*Ae,z=T-(T-N)*Ae,W=E-(E-F)*Ae}let fe;X<p?fe=0:X>v?fe=1:fe=(p-X)/(p-v),K=f-(f-g)*fe,H=b-(b-A)*fe,se=w-(w-N)*fe,q=C-(C-F)*fe;const de=Math.round(Math.min(R,K)),ue=Math.round(Math.max(R,K));let Ce=h*X+de*4;for(let Ae=de;Ae<=ue;Ae++)fe=(R-Ae)/(R-K),fe<0?fe=0:fe>1&&(fe=1),u[Ce++]=B-(B-H)*fe|0,u[Ce++]=z-(z-se)*fe|0,u[Ce++]=W-(W-q)*fe|0,u[Ce++]=255}}function Kpe(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(i=0;i<l;i++){let u=i*o;for(let h=0;h<c;h++,u++)lO(n,t,r[u],r[u+1],r[u+o],s[u],s[u+1],s[u+o]),lO(n,t,r[u+o+1],r[u+1],r[u+o],s[u+o+1],s[u+1],s[u+o])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)lO(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class Xpe extends w5{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=c/h,p=u/d,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},y=h+2*2,g=d+2*2,v=r.getCanvas("mesh",y,g),b=v.context,w=b.createImageData(h,d);if(t){const I=w.data;for(let T=0,E=I.length;T<E;T+=4)I[T]=t[0],I[T+1]=t[1],I[T+2]=t[2],I[T+3]=255}for(const I of this._figures)Kpe(w,I,m);return b.putImageData(w,2,2),{canvas:v.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(e,t,r,s){$L(e,this._bbox);let i;if(s===_i.SHADING)i=pt.singularValueDecompose2dScale(hr(e));else if(i=pt.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=pt.singularValueDecompose2dScale(this.matrix);i=[i[0]*o[0],i[1]*o[1]]}const a=this._createMeshCanvas(i,s===_i.SHADING?null:this._background,t.cachedCanvases);return s!==_i.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Ype extends w5{getPattern(){return"hotpink"}}function Zpe(n){switch(n[0]){case"RadialAxial":return new qpe(n);case"Mesh":return new Xpe(n);case"Dummy":return new Ype}throw new Error(`Unknown IR type: ${n[0]}`)}const y8={COLORED:1,UNCOLORED:2},A_=class A_{constructor(e,t,r,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),oR("TilingType: "+i);const u=t[0],h=t[1],d=t[2],f=t[3],p=d-u,m=f-h,y=pt.singularValueDecompose2dScale(this.matrix),g=pt.singularValueDecompose2dScale(this.baseTransform),v=y[0]*g[0],b=y[1]*g[1];let w=p,C=m,I=!1,T=!1;const E=Math.ceil(l*v),A=Math.ceil(c*b),N=Math.ceil(p*v),F=Math.ceil(m*b);E>=N?w=l:I=!0,A>=F?C=c:T=!0;const _=this.getSizeAndScale(w,this.ctx.canvas.width,v),D=this.getSizeAndScale(C,this.ctx.canvas.height,b),R=e.cachedCanvases.getCanvas("pattern",_.size,D.size),B=R.context,z=o.createCanvasGraphics(B);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,s,a),B.translate(-_.scale*u,-D.scale*h),z.transform(_.scale,0,0,D.scale,0,0),B.save(),this.clipBbox(z,u,h,d,f),z.baseTransform=hr(z.ctx),z.executeOperatorList(r),z.endDrawing(),B.restore(),I||T){const W=R.canvas;I&&(w=l),T&&(C=c);const K=this.getSizeAndScale(w,this.ctx.canvas.width,v),H=this.getSizeAndScale(C,this.ctx.canvas.height,b),se=K.size,q=H.size,X=e.cachedCanvases.getCanvas("pattern-workaround",se,q),fe=X.context,de=I?Math.floor(p/l):0,ue=T?Math.floor(m/c):0;for(let Ce=0;Ce<=de;Ce++)for(let Ae=0;Ae<=ue;Ae++)fe.drawImage(W,se*Ce,q*Ae,se,q,0,0,se,q);return{canvas:X.canvas,scaleX:K.scale,scaleY:H.scale,offsetX:u,offsetY:h}}return{canvas:R.canvas,scaleX:_.scale,scaleY:D.scale,offsetX:u,offsetY:h}}getSizeAndScale(e,t,r){const s=Math.max(A_.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,o=i-r;e.ctx.rect(t,r,a,o),e.current.updateRectMinMax(hr(e.ctx),[t,r,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case y8.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case y8.UNCOLORED:const o=pt.makeHexColor(r[0],r[1],r[2]);s.fillStyle=o,s.strokeStyle=o,i.fillColor=o,i.strokeColor=o;break;default:throw new kpe(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,s){let i=r;s!==_i.SHADING&&(i=pt.transform(i,t.baseTransform),this.matrix&&(i=pt.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(i);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};yt(A_,"MAX_PATTERN_SIZE",3e3);let zL=A_;function Qpe({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=na.isLittleEndian?4278190080:255,[l,c]=a?[i,o]:[o,i],u=r>>3,h=r&7,d=n.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<s;p++){for(const y=e+u;e<y;e++){const g=e<d?n[e]:255;t[f++]=g&128?c:l,t[f++]=g&64?c:l,t[f++]=g&32?c:l,t[f++]=g&16?c:l,t[f++]=g&8?c:l,t[f++]=g&4?c:l,t[f++]=g&2?c:l,t[f++]=g&1?c:l}if(h===0)continue;const m=e<d?n[e++]:255;for(let y=0;y<h;y++)t[f++]=m&1<<7-y?c:l}return{srcPos:e,destPos:f}}const v8=16,x8=100,Jpe=15,b8=10,w8=1e3,Ta=16;function eme(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,s){e.translate(r,s),this.__originalTranslate(r,s)},n.scale=function(r,s){e.scale(r,s),this.__originalScale(r,s)},n.transform=function(r,s,i,a,o,l){e.transform(r,s,i,a,o,l),this.__originalTransform(r,s,i,a,o,l)},n.setTransform=function(r,s,i,a,o,l){e.setTransform(r,s,i,a,o,l),this.__originalSetTransform(r,s,i,a,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,o){e.bezierCurveTo(t,r,s,i,a,o),this.__originalBezierCurveTo(t,r,s,i,a,o)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class tme{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function TE(n,e,t,r,s,i,a,o,l,c){const[u,h,d,f,p,m]=hr(n);if(h===0&&d===0){const v=a*u+p,b=Math.round(v),w=o*f+m,C=Math.round(w),I=(a+l)*u+p,T=Math.abs(Math.round(I)-b)||1,E=(o+c)*f+m,A=Math.abs(Math.round(E)-C)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),b,C),n.drawImage(e,t,r,s,i,0,0,T,A),n.setTransform(u,h,d,f,p,m),[T,A]}if(u===0&&f===0){const v=o*d+p,b=Math.round(v),w=a*h+m,C=Math.round(w),I=(o+c)*d+p,T=Math.abs(Math.round(I)-b)||1,E=(a+l)*h+m,A=Math.abs(Math.round(E)-C)||1;return n.setTransform(0,Math.sign(h),Math.sign(d),0,b,C),n.drawImage(e,t,r,s,i,0,0,A,T),n.setTransform(u,h,d,f,p,m),[A,T]}n.drawImage(e,t,r,s,i,a,o,l,c);const y=Math.hypot(u,h),g=Math.hypot(d,f);return[y*l,g*c]}function nme(n){const{width:e,height:t}=n;if(e>w8||t>w8)return null;const r=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),o,l,c;const u=e+7&-8;let h=new Uint8Array(u*t),d=0;for(const g of n.data){let v=128;for(;v>0;)h[d++]=g&v?0:255,v>>=1}let f=0;for(d=0,h[d]!==0&&(a[0]=1,++f),l=1;l<e;l++)h[d]!==h[d+1]&&(a[l]=h[d]?2:1,++f),d++;for(h[d]!==0&&(a[l]=2,++f),o=1;o<t;o++){d=o*u,c=o*i,h[d-u]!==h[d]&&(a[c]=h[d]?1:8,++f);let g=(h[d]?4:0)+(h[d-u]?8:0);for(l=1;l<e;l++)g=(g>>2)+(h[d+1]?4:0)+(h[d-u+1]?8:0),s[g]&&(a[c+l]=s[g],++f),d++;if(h[d-u]!==h[d]&&(a[c+l]=h[d]?2:4,++f),f>r)return null}for(d=u*(t-1),c=o*i,h[d]!==0&&(a[c]=8,++f),l=1;l<e;l++)h[d]!==h[d+1]&&(a[c+l]=h[d]?4:8,++f),d++;if(h[d]!==0&&(a[c+l]=4,++f),f>r)return null;const p=new Int32Array([0,i,-1,0,-i,0,0,0,1]),m=new Path2D;for(o=0;f&&o<=t;o++){let g=o*i;const v=g+e;for(;g<v&&!a[g];)g++;if(g===v)continue;m.moveTo(g%i,o);const b=g;let w=a[g];do{const C=p[w];do g+=C;while(!a[g]);const I=a[g];I!==5&&I!==10?(w=I,a[g]=0):(w=I&51*w>>4,a[g]&=w>>2|w<<2),m.lineTo(g%i,g/i|0),a[g]||--f}while(b!==g);--o}return h=null,a=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(m),g.beginPath(),g.restore()}}class S8{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=sX,this.textMatrixScale=1,this.fontMatrix=fL,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Si.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=pt.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=pt.applyTransform(t,e),s=pt.applyTransform(t.slice(2),e),i=pt.applyTransform([t[0],t[3]],e),a=pt.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],s[0],i[0],a[0]),this.minY=Math.min(this.minY,r[1],s[1],i[1],a[1]),this.maxX=Math.max(this.maxX,r[0],s[0],i[0],a[0]),this.maxY=Math.max(this.maxY,r[1],s[1],i[1],a[1])}updateScalingPathMinMax(e,t){pt.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,s,i,a,o,l,c,u){const h=pt.bezierBoundingBox(t,r,s,i,a,o,l,c,u);u||this.updateRectMinMax(e,h)}getPathBoundingBox(e=_i.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===_i.STROKE){t||qn("Stroke bounding box must include transform.");const s=pt.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=_i.FILL,t=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function k8(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Ta,i=(t-s)/Ta,a=s===0?i:i+1,o=n.createImageData(r,Ta);let l=0,c;const u=e.data,h=o.data;let d,f,p,m;if(e.kind===PI.GRAYSCALE_1BPP){const y=u.byteLength,g=new Uint32Array(h.buffer,0,h.byteLength>>2),v=g.length,b=r+7>>3,w=4294967295,C=na.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<i?Ta:s,c=0,f=0;f<p;f++){const I=y-l;let T=0;const E=I>b?r:I*8-7,A=E&-8;let N=0,F=0;for(;T<A;T+=8)F=u[l++],g[c++]=F&128?w:C,g[c++]=F&64?w:C,g[c++]=F&32?w:C,g[c++]=F&16?w:C,g[c++]=F&8?w:C,g[c++]=F&4?w:C,g[c++]=F&2?w:C,g[c++]=F&1?w:C;for(;T<E;T++)N===0&&(F=u[l++],N=128),g[c++]=F&N?w:C,N>>=1}for(;c<v;)g[c++]=0;n.putImageData(o,0,d*Ta)}}else if(e.kind===PI.RGBA_32BPP){for(f=0,m=r*Ta*4,d=0;d<i;d++)h.set(u.subarray(l,l+m)),l+=m,n.putImageData(o,0,f),f+=Ta;d<a&&(m=r*s*4,h.set(u.subarray(l,l+m)),n.putImageData(o,0,f))}else if(e.kind===PI.RGB_24BPP)for(p=Ta,m=r*p,d=0;d<a;d++){for(d>=i&&(p=s,m=r*p),c=0,f=m;f--;)h[c++]=u[l++],h[c++]=u[l++],h[c++]=u[l++],h[c++]=255;n.putImageData(o,0,d*Ta)}else throw new Error(`bad image kind: ${e.kind}`)}function C8(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Ta,i=(t-s)/Ta,a=s===0?i:i+1,o=n.createImageData(r,Ta);let l=0;const c=e.data,u=o.data;for(let h=0;h<a;h++){const d=h<i?Ta:s;({srcPos:l}=Qpe({src:c,srcPos:l,dest:u,width:r,height:d,nonBlackColor:0})),n.putImageData(o,0,h*Ta)}}function Nw(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function EE(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Li){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function T8(n,e){if(e)return!0;const t=pt.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Mf.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const rme=["butt","round","square"],sme=["miter","round","bevel"],ime={},E8={};var fc,BL,VL,jL;const Gj=class Gj{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:o=null},l,c){j(this,fc);this.ctx=e,this.current=new S8(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new tme(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...hr(this.compositeCtx))}this.ctx.save(),EE(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=hr(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,a=e.fnArray;let o=t||0;const l=i.length;if(l===o)return o;const c=l-o>b8&&typeof r=="function",u=c?Date.now()+Jpe:0;let h=0;const d=this.commonObjs,f=this.objs;let p;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,r),o;if(p=a[o],p!==Rl.dependency)this[p].apply(this,i[o]);else for(const m of i[o]){const y=m.startsWith("g_")?d:f;if(!y.has(m))return y.get(m,r),o}if(o++,o===l)return o;if(c&&++h>b8){if(Date.now()>u)return r(),o;h=0}}}endDrawing(){U(this,fc,BL).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),U(this,fc,VL).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=r,l=s,c="prescale1",u,h;for(;i>2&&o>1||a>2&&l>1;){let d=o,f=l;i>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/d),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),u=this.cachedCanvases.getCanvas(c,d,f),h=u.context,h.clearRect(0,0,d,f),h.drawImage(e,0,0,o,l,0,0,d,f),e=u.canvas,o=d,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,o=hr(t);let l,c,u,h;if((e.bitmap||e.data)&&e.count>1){const E=e.bitmap||e.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),i]),l=this._cachedBitmapsMap.get(E),l||(l=new Map,this._cachedBitmapsMap.set(E,l));const A=l.get(c);if(A&&!a){const N=Math.round(Math.min(o[0],o[2])+o[4]),F=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:A,offsetX:N,offsetY:F}}u=A}u||(h=this.cachedCanvases.getCanvas("maskCanvas",r,s),C8(h.context,e));let d=pt.transform(o,[1/r,0,0,-1/s,0,0]);d=pt.transform(d,[1,0,0,1,0,-s]);const[f,p,m,y]=pt.getAxialAlignedBoundingBox([0,0,r,s],d),g=Math.round(m-f)||1,v=Math.round(y-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",g,v),w=b.context,C=f,I=p;w.translate(-C,-I),w.transform(...d),u||(u=this._scaleImage(h.canvas,Cc(w)),u=u.img,l&&a&&l.set(c,u)),w.imageSmoothingEnabled=T8(hr(w),e.interpolate),TE(w,u,0,0,u.width,u.height,0,0,r,s),w.globalCompositeOperation="source-in";const T=pt.transform(Cc(w),[1,0,0,1,-C,-I]);return w.fillStyle=a?i.getPattern(t,this,T,_i.FILL):i,w.fillRect(0,0,r,s),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,b.canvas)),{canvas:b.canvas,offsetX:Math.round(C),offsetY:Math.round(I)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=rme[e]}setLineJoin(e){this.ctx.lineJoin=sme[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...hr(this.suspendedCtx)),Nw(this.suspendedCtx,i),eme(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nw(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],o=s[2]-i,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,r,o,l,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,o,l,c,u,h){let d=e.canvas,f=l-u,p=c-h;if(a){const y=pt.makeHexColor(...a);if(f<0||p<0||f+r>d.width||p+s>d.height){const g=this.cachedCanvases.getCanvas("maskExtension",r,s),v=g.context;v.drawImage(d,-f,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=y,v.fillRect(0,0,r,s),v.globalCompositeOperation="source-over",d=g.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(f,p,r,s),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=y,e.fillRect(f,p,r,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,c,r,s),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(d,f,p,r,s,l,c,r,s),t.restore()}save(){this.inSMaskMode?(Nw(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Nw(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,s,i,a){this.ctx.transform(e,t,r,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const s=this.ctx,i=this.current;let a=i.x,o=i.y,l,c;const u=hr(s),h=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,d=h?r.slice(0):null;for(let f=0,p=0,m=e.length;f<m;f++)switch(e[f]|0){case Rl.rectangle:a=t[p++],o=t[p++];const y=t[p++],g=t[p++],v=a+y,b=o+g;s.moveTo(a,o),y===0||g===0?s.lineTo(v,b):(s.lineTo(v,o),s.lineTo(v,b),s.lineTo(a,b)),h||i.updateRectMinMax(u,[a,o,v,b]),s.closePath();break;case Rl.moveTo:a=t[p++],o=t[p++],s.moveTo(a,o),h||i.updatePathMinMax(u,a,o);break;case Rl.lineTo:a=t[p++],o=t[p++],s.lineTo(a,o),h||i.updatePathMinMax(u,a,o);break;case Rl.curveTo:l=a,c=o,a=t[p+4],o=t[p+5],s.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],a,o),i.updateCurvePathMinMax(u,l,c,t[p],t[p+1],t[p+2],t[p+3],a,o,d),p+=6;break;case Rl.curveTo2:l=a,c=o,s.bezierCurveTo(a,o,t[p],t[p+1],t[p+2],t[p+3]),i.updateCurvePathMinMax(u,l,c,a,o,t[p],t[p+1],t[p+2],t[p+3],d),a=t[p+2],o=t[p+3],p+=4;break;case Rl.curveTo3:l=a,c=o,a=t[p+2],o=t[p+3],s.bezierCurveTo(t[p],t[p+1],a,o,a,o),i.updateCurvePathMinMax(u,l,c,t[p],t[p+1],a,o,a,o,d),p+=4;break;case Rl.closePath:s.closePath();break}h&&i.updateScalingPathMinMax(u,d),i.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(t.save(),t.strokeStyle=r.getPattern(t,this,Cc(t),_i.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=r.getPattern(t,this,Cc(t),_i.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ime}eoClip(){this.pendingClip=E8}beginText(){this.current.textMatrix=sX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const r=new Path2D,s=t.getTransform().invertSelf();for(const{transform:i,x:a,y:o,fontSize:l,path:c}of e)r.addPath(c,new DOMMatrix(i).preMultiplySelf(s).translate(a,o).scale(l,-l));t.clip(r),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||fL,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ht("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",a=((u=r.systemFontInfo)==null?void 0:u.css)||`"${i}", ${r.fallbackName}`;let o="normal";r.black?o="900":r.bold&&(o="bold");const l=r.italic?"italic":"normal";let c=t;t<v8?c=v8:t>x8&&(c=x8),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,s,i,a){this.current.textMatrix=[e,t,r,s,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s,i){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&Si.FILL_STROKE_MASK,d=!!(c&Si.ADD_TO_PATH_FLAG),f=o.patternFill&&!l.missingFile,p=o.patternStroke&&!l.missingFile;let m;if((l.disableFontFace||d||f||p)&&(m=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||f||p){if(a.save(),a.translate(t,r),a.scale(u,-u),h===Si.FILL||h===Si.FILL_STROKE)if(s){const y=a.getTransform();a.setTransform(...s),a.fill(U(this,fc,jL).call(this,m,y,s))}else a.fill(m);if(h===Si.STROKE||h===Si.FILL_STROKE)if(i){const y=a.getTransform();a.setTransform(...i),a.stroke(U(this,fc,jL).call(this,m,y,i))}else a.lineWidth/=u,a.stroke(m);a.restore()}else(h===Si.FILL||h===Si.FILL_STROKE)&&a.fillText(e,t,r),(h===Si.STROKE||h===Si.FILL_STROKE)&&a.strokeText(e,t,r);d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:hr(a),x:t,y:r,fontSize:u,path:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return en(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,h=e.length,d=r.vertical,f=d?1:-1,p=r.defaultVMetrics,m=s*t.fontMatrix[0],y=t.textRenderingMode===Si.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),c>0?i.scale(u,-1):i.scale(u,1);let g,v;if(t.patternFill){i.save();const T=t.fillColor.getPattern(i,this,Cc(i),_i.FILL);g=hr(i),i.restore(),i.fillStyle=T}if(t.patternStroke){i.save();const T=t.strokeColor.getPattern(i,this,Cc(i),_i.STROKE);v=hr(i),i.restore(),i.strokeStyle=T}let b=t.lineWidth;const w=t.textMatrixScale;if(w===0||b===0){const T=t.textRenderingMode&Si.FILL_STROKE_MASK;(T===Si.STROKE||T===Si.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=w;if(a!==1&&(i.scale(a,a),b/=a),i.lineWidth=b,r.isInvalidPDFjsFont){const T=[];let E=0;for(const A of e)T.push(A.unicode),E+=A.width;i.fillText(T.join(""),0,0),t.x+=E*m*u,i.restore(),this.compose();return}let C=0,I;for(I=0;I<h;++I){const T=e[I];if(typeof T=="number"){C+=f*T*s/1e3;continue}let E=!1;const A=(T.isSpace?l:0)+o,N=T.fontChar,F=T.accent;let _,D,R=T.width;if(d){const z=T.vmetric||p,W=-(T.vmetric?z[1]:R*.5)*m,K=z[2]*m;R=z?-z[0]:R,_=W/a,D=(C+K)/a}else _=C/a,D=0;if(r.remeasure&&R>0){const z=i.measureText(N).width*1e3/s*a;if(R<z&&this.isFontSubpixelAAEnabled){const W=R/z;E=!0,i.save(),i.scale(W,1),_/=W}else R!==z&&(_+=(R-z)/2e3*s/a)}if(this.contentVisible&&(T.isInFont||r.missingFile)){if(y&&!F)i.fillText(N,_,D);else if(this.paintChar(N,_,D,g,v),F){const z=_+s*F.offset.x/a,W=D-s*F.offset.y/a;this.paintChar(F.fontChar,z,W,g,v)}}const B=d?R*m-A*c:R*m+A*c;C+=B,E&&i.restore()}d?t.y-=C:t.x+=C*u,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,a=r.fontDirection,o=s.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*a,h=r.fontMatrix||fL,d=e.length,f=r.textRenderingMode===Si.INVISIBLE;let p,m,y,g;if(!(f||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(u,a),p=0;p<d;++p){if(m=e[p],typeof m=="number"){g=o*m*i/1e3,this.ctx.translate(g,0),r.x+=g*u;continue}const v=(m.isSpace?c:0)+l,b=s.charProcOperatorList[m.operatorListId];if(!b){Ht(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),t.scale(i,i),t.transform(...h),this.executeOperatorList(b),this.restore()),y=pt.applyTransform([m.width,0],h)[0]*i+v,t.translate(y,0),r.x+=y*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,a){this.ctx.rect(r,s,i-r,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],s=this.baseTransform||hr(this.ctx),i={createCanvasGraphics:a=>new Gj(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new zL(e,r,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=pt.makeHexColor(e,t,r),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=pt.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=Zpe(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Cc(t),_i.SHADING);const s=Cc(t);if(s){const{width:i,height:a}=t.canvas,[o,l,c,u]=pt.getAxialAlignedBoundingBox([0,0,i,a],s);this.ctx.fillRect(o,l,c-o,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){qn("Should not call beginInlineImage")}beginImageData(){qn("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=hr(this.ctx),t)){const r=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],r,s),this.current.updateRectMinMax(hr(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||oR("TODO: Support non-isolated groups."),e.knockout&&Ht("Knockout groups not supported.");const r=hr(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=pt.getAxialAlignedBoundingBox(e.bbox,hr(t));const i=[0,0,t.canvas.width,t.canvas.height];s=pt.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-a,1),c=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,l,c),d=h.context;d.translate(-a,-o),d.transform(...r),e.smask?this.smaskStack.push({canvas:h.canvas,context:d,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Nw(t,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=hr(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=pt.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(U(this,fc,BL).call(this),EE(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,c]=pt.singularValueDecompose2dScale(hr(this.ctx)),{viewportScale:u}=this,h=Math.ceil(a*this.outputScaleX*u),d=Math.ceil(o*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),EE(this.ctx)}else EE(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new S8(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),U(this,fc,VL).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=nme(e)),s.compiled)){s.compiled(r);return}const i=this._createMaskCanvas(e),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=hr(o);o.transform(t,r,s,i,0,0);const c=this._createMaskCanvas(e);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,h=a.length;u<h;u+=2){const d=pt.transform(l,[t,r,s,i,a[u],a[u+1]]),[f,p]=pt.applyTransform([0,0],d);o.drawImage(c.canvas,f,p)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:o,height:l,transform:c}=i,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save();const d=this.getObject(a,i);C8(h,d),h.globalCompositeOperation="source-in",h.fillStyle=s?r.getPattern(h,this,Cc(t),_i.FILL):r,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),TE(t,u.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ht("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){Ht("Dependent image isn't ready yet");return}const a=i.width,o=i.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[t,0,0,r,s[c],s[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;if(this.save(),!Li){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/r);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,r).context;k8(l,e),i=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(i,Cc(s));s.imageSmoothingEnabled=T8(hr(s),e.interpolate),TE(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,a).context;k8(l,e),s=this.applyTransferMapsToCanvas(l)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),TE(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===E8?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=hr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,o;if(r===0&&s===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)a=o=1/l;else{const u=l*e;a=o=u<1?1/u:1}else if(e===0)a=1/l,o=1/c;else{const u=l*e,h=c*e;a=u<1?1/u:1,o=h<1?1/h:1}}else{const l=Math.abs(t*i-r*s),c=Math.hypot(t,r),u=Math.hypot(s,i);if(e===0)a=u/l,o=c/l;else{const h=e*l;a=u>h?u/h:1,o=c>h?c/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=r||1,s===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,i),a.length>0){const o=Math.max(s,i);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};fc=new WeakSet,BL=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},VL=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},jL=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Fy=Gj;for(const n in Rl)Fy.prototype[n]!==void 0&&(Fy.prototype[Rl[n]]=Fy.prototype[n]);var V2,j2;class mh{static get workerPort(){return x(this,V2)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");L(this,V2,e)}static get workerSrc(){return x(this,j2)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");L(this,j2,e)}}V2=new WeakMap,j2=new WeakMap,j(mh,V2,null),j(mh,j2,"");var Fm,U2;class ame{constructor({parsedData:e,rawData:t}){j(this,Fm);j(this,U2);L(this,Fm,e),L(this,U2,t)}getRaw(){return x(this,U2)}get(e){return x(this,Fm).get(e)??null}getAll(){return p5(x(this,Fm))}has(e){return x(this,Fm).has(e)}}Fm=new WeakMap,U2=new WeakMap;const Y0=Symbol("INTERNAL");var W2,G2,H2,dv;class ome{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){j(this,W2,!1);j(this,G2,!1);j(this,H2,!1);j(this,dv,!0);L(this,W2,!!(e&ao.DISPLAY)),L(this,G2,!!(e&ao.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(x(this,H2))return x(this,dv);if(!x(this,dv))return!1;const{print:e,view:t}=this.usage;return x(this,W2)?(t==null?void 0:t.viewState)!=="OFF":x(this,G2)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Y0&&qn("Internal method `_setVisible` called."),L(this,H2,r),L(this,dv,t)}}W2=new WeakMap,G2=new WeakMap,H2=new WeakMap,dv=new WeakMap;var $d,Ln,fv,pv,q2,UL;class lme{constructor(e,t=ao.DISPLAY){j(this,q2);j(this,$d,null);j(this,Ln,new Map);j(this,fv,null);j(this,pv,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,L(this,pv,e.order);for(const r of e.groups)x(this,Ln).set(r.id,new ome(t,r));if(e.baseState==="OFF")for(const r of x(this,Ln).values())r._setVisible(Y0,!1);for(const r of e.on)x(this,Ln).get(r)._setVisible(Y0,!0);for(const r of e.off)x(this,Ln).get(r)._setVisible(Y0,!1);L(this,fv,this.getHash())}}isVisible(e){if(x(this,Ln).size===0)return!0;if(!e)return oR("Optional content group not defined."),!0;if(e.type==="OCG")return x(this,Ln).has(e.id)?x(this,Ln).get(e.id).visible:(Ht(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return U(this,q2,UL).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!x(this,Ln).has(t))return Ht(`Optional content group not found: ${t}`),!0;if(x(this,Ln).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!x(this,Ln).has(t))return Ht(`Optional content group not found: ${t}`),!0;if(!x(this,Ln).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!x(this,Ln).has(t))return Ht(`Optional content group not found: ${t}`),!0;if(!x(this,Ln).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!x(this,Ln).has(t))return Ht(`Optional content group not found: ${t}`),!0;if(x(this,Ln).get(t).visible)return!1}return!0}return Ht(`Unknown optional content policy ${e.policy}.`),!0}return Ht(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=x(this,Ln).get(e);if(!s){Ht(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((i=x(this,Ln).get(o))==null||i._setVisible(Y0,!1,!0));s._setVisible(Y0,!!t,!0),L(this,$d,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=x(this,Ln).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}L(this,$d,null)}get hasInitialVisibility(){return x(this,fv)===null||this.getHash()===x(this,fv)}getOrder(){return x(this,Ln).size?x(this,pv)?x(this,pv).slice():[...x(this,Ln).keys()]:null}getGroups(){return x(this,Ln).size>0?p5(x(this,Ln)):null}getGroup(e){return x(this,Ln).get(e)||null}getHash(){if(x(this,$d)!==null)return x(this,$d);const e=new OX;for(const[t,r]of x(this,Ln))e.update(`${t}:${r.visible}`);return L(this,$d,e.hexdigest())}}$d=new WeakMap,Ln=new WeakMap,fv=new WeakMap,pv=new WeakMap,q2=new WeakSet,UL=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=U(this,q2,UL).call(this,i);else if(x(this,Ln).has(i))a=x(this,Ln).get(i).visible;else return Ht(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class cme{constructor(e,{disableRange:t=!1,disableStream:r=!1}){ns(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});ns(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ns(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ume(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new hme(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class ume{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=y5(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class hme{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function dme(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=o(t);return u=unescape(u),u=l(u),u=c(u),i(u)}if(t=a(n),t){const u=c(t);return i(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=o(t);return u=c(u),i(u)}function r(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(u,{fatal:!0}),f=lR(h);h=d.decode(f),e=!1}catch{}}return h}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),e&&(u=s("iso-8859-1",u))),u}function a(u){const h=[];let d;const f=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(u))!==null;){let[,m,y,g]=d;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[y,g]}const p=[];for(let m=0;m<h.length&&m in h;++m){let[y,g]=h[m];g=o(g),y&&(g=unescape(g),m===0&&(g=l(g))),p.push(g)}return p.join("")}function o(u){if(u.startsWith('"')){const h=u.slice(1).split('\\"');for(let d=0;d<h.length;++d){const f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function l(u){const h=u.indexOf("'");if(h===-1)return u;const d=u.slice(0,h),p=u.slice(h+1).replace(/^[^']*'/,"");return s(d,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,y){return String.fromCharCode(parseInt(y,16))}),s(d,p);try{p=atob(p)}catch{}return s(d,p)})}return""}function XX(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function hR(n){try{return new URL(n).origin}catch{}return null}function YX({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function ZX(n){const e=n.get("Content-Disposition");if(e){let t=dme(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(y5(t))return t}return null}function dR(n,e){return n===404||n===0&&e.startsWith("file:")?new kS('Missing PDF "'+e+'".'):new aN(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function QX(n){return n===200||n===206}function JX(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function eY(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ht(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class I8{constructor(e){yt(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=XX(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ns(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new fme(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new pme(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class fme{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,JX(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=hR(i.url),!QX(i.status))throw dR(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:o,suggestedLength:l}=YX({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=ZX(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Lf("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:eY(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class pme{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,JX(i,this._withCredentials,this._abortController)).then(o=>{const l=hR(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!QX(o.status))throw dR(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:eY(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const cO=200,uO=206;function mme(n){const e=n.response;return typeof e!="string"?e:lR(e).buffer}class gme{constructor({url:e,httpHeaders:t,withCredentials:r}){yt(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=XX(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=uO):s.expectedStatus=cO,t.responseType="arraybuffer",ns(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||cO;if(!(i===cO&&r.expectedStatus===uO)&&i!==r.expectedStatus){r.onError(s.status);return}const o=mme(s);if(i===uO){const l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:o}):(Ht('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class yme{constructor(e){this._source=e,this._manager=new gme(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ns(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vme(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new xme(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class vme{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=hR(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=YX({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=ZX(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=dR(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class xme{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=hR((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=dR(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bme=/^[a-z][a-z0-9\-+.]+:/i;function wme(n){if(bme.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class Sme{constructor(e){this.source=e,this.url=wme(e.url),ns(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ns(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new kme(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Cme(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class kme{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new kS(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Lf("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Cme{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Tme=1e5,ya=30,Eme=.8;var y7,zd,ka,K2,X2,Pm,Ju,Y2,Z2,Om,mv,gv,Bd,yv,Q2,vv,Lm,J2,ek,Mm,$m,tk,Vd,xv,Wh,tY,nY,WL,Io,GI,GL,rY,sY;const ps=class ps{constructor({textContentSource:e,container:t,viewport:r}){j(this,Wh);j(this,zd,Promise.withResolvers());j(this,ka,null);j(this,K2,!1);j(this,X2,!!((y7=globalThis.FontInspector)!=null&&y7.enabled));j(this,Pm,null);j(this,Ju,null);j(this,Y2,0);j(this,Z2,0);j(this,Om,null);j(this,mv,null);j(this,gv,0);j(this,Bd,0);j(this,yv,Object.create(null));j(this,Q2,[]);j(this,vv,null);j(this,Lm,[]);j(this,J2,new WeakMap);j(this,ek,null);var l;if(e instanceof ReadableStream)L(this,vv,e);else if(typeof e=="object")L(this,vv,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');L(this,ka,L(this,mv,t)),L(this,Bd,r.scale*(globalThis.devicePixelRatio||1)),L(this,gv,r.rotation),L(this,Ju,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=r.rawDims;L(this,ek,[1,0,0,-1,-a,o+i]),L(this,Z2,s),L(this,Y2,i),U(l=ps,Io,rY).call(l),Ag(t,r),x(this,zd).promise.finally(()=>{x(ps,xv).delete(this),L(this,Ju,null),L(this,yv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=na.platform;return en(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{x(this,Om).read().then(({value:t,done:r})=>{if(r){x(this,zd).resolve();return}x(this,Pm)??L(this,Pm,t.lang),Object.assign(x(this,yv),t.styles),U(this,Wh,tY).call(this,t.items),e()},x(this,zd).reject)};return L(this,Om,x(this,vv).getReader()),x(ps,xv).add(this),e(),x(this,zd).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==x(this,gv)&&(t==null||t(),L(this,gv,s),Ag(x(this,mv),{rotation:s})),r!==x(this,Bd)){t==null||t(),L(this,Bd,r);const a={div:null,properties:null,ctx:U(i=ps,Io,GI).call(i,x(this,Pm))};for(const o of x(this,Lm))a.properties=x(this,J2).get(o),a.div=o,U(this,Wh,WL).call(this,a)}}cancel(){var t;const e=new Lf("TextLayer task cancelled.");(t=x(this,Om))==null||t.cancel(e).catch(()=>{}),L(this,Om,null),x(this,zd).reject(e)}get textDivs(){return x(this,Lm)}get textContentItemsStr(){return x(this,Q2)}static cleanup(){if(!(x(this,xv).size>0)){x(this,Mm).clear();for(const{canvas:e}of x(this,$m).values())e.remove();x(this,$m).clear()}}};zd=new WeakMap,ka=new WeakMap,K2=new WeakMap,X2=new WeakMap,Pm=new WeakMap,Ju=new WeakMap,Y2=new WeakMap,Z2=new WeakMap,Om=new WeakMap,mv=new WeakMap,gv=new WeakMap,Bd=new WeakMap,yv=new WeakMap,Q2=new WeakMap,vv=new WeakMap,Lm=new WeakMap,J2=new WeakMap,ek=new WeakMap,Mm=new WeakMap,$m=new WeakMap,tk=new WeakMap,Vd=new WeakMap,xv=new WeakMap,Wh=new WeakSet,tY=function(e){var s,i;if(x(this,K2))return;(i=x(this,Ju)).ctx??(i.ctx=U(s=ps,Io,GI).call(s,x(this,Pm)));const t=x(this,Lm),r=x(this,Q2);for(const a of e){if(t.length>Tme){Ht("Ignoring additional textDivs for performance reasons."),L(this,K2,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=x(this,ka);L(this,ka,document.createElement("span")),x(this,ka).classList.add("markedContent"),a.id!==null&&x(this,ka).setAttribute("id",`${a.id}`),o.append(x(this,ka))}else a.type==="endMarkedContent"&&L(this,ka,x(this,ka).parentNode);continue}r.push(a.str),U(this,Wh,nY).call(this,a)}},nY=function(e){var m;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};x(this,Lm).push(t);const s=pt.transform(x(this,ek),e.transform);let i=Math.atan2(s[1],s[0]);const a=x(this,yv)[e.fontName];a.vertical&&(i+=Math.PI/2);let o=x(this,X2)&&a.fontSubstitution||a.fontFamily;o=ps.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),c=l*U(m=ps,Io,sY).call(m,o,x(this,Pm));let u,h;i===0?(u=s[4],h=s[5]-c):(u=s[4]+c*Math.sin(i),h=s[5]-c*Math.cos(i));const d="calc(var(--scale-factor)*",f=t.style;x(this,ka)===x(this,mv)?(f.left=`${(100*u/x(this,Z2)).toFixed(2)}%`,f.top=`${(100*h/x(this,Y2)).toFixed(2)}%`):(f.left=`${d}${u.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(x(ps,Vd)*l).toFixed(2)}px)`,f.fontFamily=o,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,x(this,X2)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const y=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);y!==g&&Math.max(y,g)/Math.min(y,g)>1.5&&(p=!0)}if(p&&(r.canvasWidth=a.vertical?e.height:e.width),x(this,J2).set(t,r),x(this,Ju).div=t,x(this,Ju).properties=r,U(this,Wh,WL).call(this,x(this,Ju)),r.hasText&&x(this,ka).append(t),r.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),x(this,ka).append(y)}},WL=function(e){var o;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(x(ps,Vd)>1&&(a=`scale(${1/x(ps,Vd)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=i,{canvasWidth:c,fontSize:u}=r;U(o=ps,Io,GL).call(o,s,u*x(this,Bd),l);const{width:h}=s.measureText(t.textContent);h>0&&(a=`scaleX(${c*x(this,Bd)/h}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Io=new WeakSet,GI=function(e=null){let t=x(this,$m).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),x(this,$m).set(e,t),x(this,tk).set(t,{size:0,family:""})}return t},GL=function(e,t,r){const s=x(this,tk).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},rY=function(){if(x(this,Vd)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),L(this,Vd,e.getBoundingClientRect().height),e.remove()},sY=function(e,t){const r=x(this,Mm).get(e);if(r)return r;const s=U(this,Io,GI).call(this,t);s.canvas.width=s.canvas.height=ya,U(this,Io,GL).call(this,s,ya,e);const i=s.measureText("");let a=i.fontBoundingBoxAscent,o=Math.abs(i.fontBoundingBoxDescent);if(a){const u=a/(a+o);return x(this,Mm).set(e,u),s.canvas.width=s.canvas.height=0,u}s.strokeStyle="red",s.clearRect(0,0,ya,ya),s.strokeText("g",0,0);let l=s.getImageData(0,0,ya,ya).data;o=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){o=Math.ceil(u/4/ya);break}s.clearRect(0,0,ya,ya),s.strokeText("A",0,ya),l=s.getImageData(0,0,ya,ya).data,a=0;for(let u=0,h=l.length;u<h;u+=4)if(l[u]>0){a=ya-Math.floor(u/4/ya);break}s.canvas.width=s.canvas.height=0;const c=a?a/(a+o):Eme;return x(this,Mm).set(e,c),c},j(ps,Io),j(ps,Mm,new Map),j(ps,$m,new Map),j(ps,tk,new WeakMap),j(ps,Vd,null),j(ps,xv,new Set);let CS=ps;class TS{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(TS.shouldBuildText(o))(l=i==null?void 0:i.attributes)!=null&&l.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const c of i.children)s(c)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Ime=65536,Ame=100,Nme=5e3,_me=Li?Wpe:Vpe,Rme=Li?Gpe:UX,Dme=Li?Upe:jpe,Fme=Li?Hpe:qX;function Pme(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new HL,{docId:t}=e,r=n.url?Ome(n.url):null,s=n.data?Lme(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof iY?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Ime;let u=n.worker instanceof Py?n.worker:null;const h=n.verbosity,d=typeof n.docBaseUrl=="string"&&!uR(n.docBaseUrl)?n.docBaseUrl:null,f=typeof n.cMapUrl=="string"?n.cMapUrl:null,p=n.cMapPacked!==!1,m=n.CMapReaderFactory||Rme,y=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||Fme,v=n.stopAtErrors!==!0,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,w=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Li,I=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Li&&(na.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,E=typeof n.disableFontFace=="boolean"?n.disableFontFace:Li,A=n.fontExtraProperties===!0,N=n.enableXfa===!0,F=n.ownerDocument||globalThis.document,_=n.disableRange===!0,D=n.disableStream===!0,R=n.disableAutoFetch===!0,B=n.pdfBug===!0,z=n.CanvasFactory||_me,W=n.FilterFactory||Dme,K=n.enableHWA===!0,H=l?l.length:n.length??NaN,se=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Li&&!E,q=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:m===UX&&g===qX&&f&&y&&Yw(f,document.baseURI)&&Yw(y,document.baseURI),X=null;xpe(h);const fe={canvasFactory:new z({ownerDocument:F,enableHWA:K}),filterFactory:new W({docId:t,ownerDocument:F}),cMapReaderFactory:q?null:new m({baseUrl:f,isCompressed:p}),standardFontDataFactory:q?null:new g({baseUrl:y})};if(!u){const Ce={verbosity:h,port:mh.workerPort};u=Ce.port?Py.fromPort(Ce):new Py(Ce),e._worker=u}const de={docId:t,apiVersion:"4.10.38",data:s,password:o,disableAutoFetch:R,rangeChunkSize:c,length:H,docBaseUrl:d,enableXfa:N,evaluatorOptions:{maxImageSize:b,disableFontFace:E,ignoreErrors:v,isEvalSupported:w,isOffscreenCanvasSupported:C,isImageDecoderSupported:I,canvasMaxAreaInBytes:T,fontExtraProperties:A,useSystemFonts:se,cMapUrl:q?f:null,standardFontDataUrl:q?y:null}},ue={disableFontFace:E,fontExtraProperties:A,ownerDocument:F,pdfBug:B,styleElement:X,loadingParams:{disableAutoFetch:R,enableXfa:N}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ce=u.messageHandler.sendWithPromise("GetDocRequest",de,s?[s.buffer]:null);let Ae;if(l)Ae=new cme(l,{disableRange:_,disableStream:D});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Ee;if(Li)if(Yw(r)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ee=I8}else Ee=Sme;else Ee=Yw(r)?I8:yme;Ae=new Ee({url:r,length:H,httpHeaders:i,withCredentials:a,rangeChunkSize:c,disableRange:_,disableStream:D})}return Ce.then(Ee=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Le=new e1(t,Ee,u.port),Ke=new Bme(Le,e,Ae,ue,fe);e._transport=Ke,Le.send("Ready",null)})}).catch(e._capability.reject),e}function Ome(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Li&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Lme(n){if(Li&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return lR(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function A8(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var N_;const __=class __{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Gi(__,N_)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}};N_=new WeakMap,j(__,N_,0);let HL=__;class iY{constructor(e,t,r=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){qn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Mme{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return en(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var jd,eh,el,Z0,HI;class $me{constructor(e,t,r,s=!1){j(this,el);j(this,jd,null);j(this,eh,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new p8:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new aY,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Wk({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return en(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=Cd.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:h=!1}){var w,C;(w=this._stats)==null||w.time("Overall");const d=this._transport.getRenderingIntent(r,s,u,h),{renderingIntent:f,cacheKey:p}=d;L(this,eh,!1),U(this,el,HI).call(this),o||(o=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const y=!!(f&ao.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(d));const g=I=>{var T;m.renderTasks.delete(v),(this._maybeCleanupAfterRender||y)&&L(this,eh,!0),U(this,el,Z0).call(this,!y),I?(v.capability.reject(I),this._abortOperatorList({intentState:m,reason:I instanceof Error?I:new Error(I)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new KL({callback:g,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c});(m.renderTasks||(m.renderTasks=new Set)).add(v);const b=v.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([I,T])=>{var E;if(this.destroyed){g();return}if((E=this._stats)==null||E.time("Rendering"),!(T.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:I,optionalContentConfig:T}),v.operatorListChanged()}).catch(g),b}getOperatorList({intent:e="display",annotationMode:t=Cd.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var c;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>TS.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:l,done:c}){if(c){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),L(this,eh,!1),U(this,el,HI).call(this),Promise.all(e)}cleanup(e=!1){L(this,eh,!0);const t=U(this,el,Z0).call(this,!1);return e&&t&&this._stats&&(this._stats=new p8),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&U(this,el,Z0).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const d of c.renderTasks)d.operatorListChanged();U(this,el,Z0).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof g5){let s=Ame;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Lf(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}jd=new WeakMap,eh=new WeakMap,el=new WeakSet,Z0=function(e=!1){if(U(this,el,HI).call(this),!x(this,eh)||this.destroyed)return!1;if(e)return L(this,jd,setTimeout(()=>{L(this,jd,null),U(this,el,Z0).call(this,!1)},Nme)),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),L(this,eh,!1),!0},HI=function(){x(this,jd)&&(clearTimeout(x(this,jd)),L(this,jd,null))};var th,R_;class zme{constructor(){j(this,th,new Map);j(this,R_,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};x(this,R_).then(()=>{for(const[s]of x(this,th))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){Ht("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}x(this,th).set(t,s)}removeEventListener(e,t){const r=x(this,th).get(t);r==null||r(),x(this,th).delete(t)}terminate(){for(const[,e]of x(this,th))e==null||e();x(this,th).clear()}}th=new WeakMap,R_=new WeakMap;var D_,zm,Bm,bv,qI,wv,KI;const ur=class ur{constructor({name:e=null,port:t=null,verbosity:r=bpe()}={}){j(this,bv);var s;if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=x(ur,Bm))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(x(ur,Bm)||L(ur,Bm,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new e1("main","worker",e),this._messageHandler.on("ready",function(){}),U(this,bv,qI).call(this)}_initialize(){if(x(ur,zm)||x(ur,wv,KI)){this._setupFakeWorker();return}let{workerSrc:e}=ur;try{ur._isSameOrigin(window.location.href,e)||(e=ur._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new e1("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),r.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}this._messageHandler=r,this._port=t,this._webWorker=t,U(this,bv,qI).call(this)}),r.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{oR("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){x(ur,zm)||(Ht("Setting up fake worker."),L(ur,zm,!0)),ur._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new zme;this._port=t;const r=`fake${Gi(ur,D_)._++}`,s=new e1(r+"_worker",r,t);e.setup(s,t),this._messageHandler=new e1(r,r+"_worker",t),U(this,bv,qI).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,r;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=x(ur,Bm))==null||t.delete(this._port),this._port=null,(r=this._messageHandler)==null||r.destroy(),this._messageHandler=null}static fromPort(e){var r;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(r=x(this,Bm))==null?void 0:r.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ur(e)}static get workerSrc(){if(mh.workerSrc)return mh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return en(this,"_setupFakeWorkerGlobal",(async()=>x(this,wv,KI)?x(this,wv,KI):(await import(this.workerSrc)).WorkerMessageHandler)())}};D_=new WeakMap,zm=new WeakMap,Bm=new WeakMap,bv=new WeakSet,qI=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},wv=new WeakSet,KI=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},j(ur,wv),j(ur,D_,0),j(ur,zm,!1),j(ur,Bm),Li&&(L(ur,zm,!0),mh.workerSrc||(mh.workerSrc="./pdf.worker.mjs")),ur._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const s=new URL(t,r);return r.origin===s.origin},ur._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Py=ur;var nh,jc,Sv,kv,rh,Vm,i1;class Bme{constructor(e,t,r,s,i){j(this,Vm);j(this,nh,new Map);j(this,jc,new Map);j(this,Sv,new Map);j(this,kv,new Map);j(this,rh,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new aY,this.fontLoader=new zpe({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return en(this,"annotationStorage",new b5)}getRenderingIntent(e,t=Cd.ENABLE,r=null,s=!1,i=!1){let a=ao.DISPLAY,o=OL;switch(e){case"any":a=ao.ANY;break;case"display":break;case"print":a=ao.PRINT;break;default:Ht(`getRenderingIntent - invalid intent: ${e}`)}const l=a&ao.PRINT&&r instanceof MX?r:this.annotationStorage;switch(t){case Cd.DISABLE:a+=ao.ANNOTATIONS_DISABLE;break;case Cd.ENABLE:break;case Cd.ENABLE_FORMS:a+=ao.ANNOTATIONS_FORMS;break;case Cd.ENABLE_STORAGE:a+=ao.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Ht(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=ao.IS_EDITING),i&&(a+=ao.OPLIST);const{ids:c,hash:u}=l.modifiedIds,h=[a,o.hash,u];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=x(this,rh))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of x(this,jc).values())e.push(s._destroy());x(this,jc).clear(),x(this,Sv).clear(),x(this,kv).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),x(this,nh).clear(),this.filterFactory.destroy(),CS.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Lf("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{ns(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}ns(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{ns(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}ns(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Mme(r,this))}),e.on("DocException",r=>{t._capability.reject(xa(r))}),e.on("PasswordRequest",r=>{L(this,rh,Promise.withResolvers());try{if(!t.onPassword)throw xa(r);const s=i=>{i instanceof Error?x(this,rh).reject(i):x(this,rh).resolve({password:i})};t.onPassword(s,r.code)}catch(s){x(this,rh).reject(s)}return x(this,rh).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;x(this,jc).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in i){const f=i.error;Ht(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const u=c&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,h=new Bpe(i,{disableFontFace:o,fontExtraProperties:l,inspectFont:u});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(r,h)});break;case"CopyLocalImage":const{imageRef:d}=i;ns(d,"The imageRef must be defined.");for(const f of x(this,jc).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===d)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{var l;if(this.destroyed)return;const o=x(this,jc).get(s);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(i){case"Image":o.objs.resolve(r,a),(a==null?void 0:a.dataLen)>mpe&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&Ht("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=x(this,Sv).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&x(this,kv).set(i.refStr,e);const a=new $me(t,i,this,this._params.pdfBug);return x(this,jc).set(t,a),a});return x(this,Sv).set(t,s),s}getPageIndex(e){return A8(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return U(this,Vm,i1).call(this,"GetFieldObjects")}hasJSActions(){return U(this,Vm,i1).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return U(this,Vm,i1).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return U(this,Vm,i1).call(this,"GetOptionalContentConfig").then(t=>new lme(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=x(this,nh).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new ame(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return x(this,nh).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of x(this,jc).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),x(this,nh).clear(),this.filterFactory.destroy(!0),CS.cleanup()}}cachedPageNumber(e){if(!A8(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return x(this,kv).get(t)??null}}nh=new WeakMap,jc=new WeakMap,Sv=new WeakMap,kv=new WeakMap,rh=new WeakMap,Vm=new WeakSet,i1=function(e,t=null){const r=x(this,nh).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return x(this,nh).set(e,s),s};const _w=Symbol("INITIAL_DATA");var Za,nk,qL;class aY{constructor(){j(this,nk);j(this,Za,Object.create(null))}get(e,t=null){if(t){const s=U(this,nk,qL).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=x(this,Za)[e];if(!r||r.data===_w)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=x(this,Za)[e];return!!t&&t.data!==_w}delete(e){const t=x(this,Za)[e];return!t||t.data===_w?!1:(delete x(this,Za)[e],!0)}resolve(e,t=null){const r=U(this,nk,qL).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in x(this,Za)){const{data:r}=x(this,Za)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}L(this,Za,Object.create(null))}*[Symbol.iterator](){for(const e in x(this,Za)){const{data:t}=x(this,Za)[e];t!==_w&&(yield[e,t])}}}Za=new WeakMap,nk=new WeakSet,qL=function(e){var t;return(t=x(this,Za))[e]||(t[e]={...Promise.withResolvers(),data:_w})};var Ud;class Vme{constructor(e){j(this,Ud,null);L(this,Ud,e),this.onContinue=null}get promise(){return x(this,Ud).capability.promise}cancel(e=0){x(this,Ud).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=x(this,Ud).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=x(this,Ud);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Ud=new WeakMap;var Wd,jm;const Jp=class Jp{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null}){j(this,Wd,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Vme(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(x(Jp,jm).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");x(Jp,jm).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:a}=this.params;this.gfx=new Fy(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),x(this,Wd)&&(window.cancelAnimationFrame(x(this,Wd)),L(this,Wd,null)),x(Jp,jm).delete(this._canvas),this.callback(e||new g5(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?L(this,Wd,window.requestAnimationFrame(()=>{L(this,Wd,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),x(Jp,jm).delete(this._canvas),this.callback())))}};Wd=new WeakMap,jm=new WeakMap,j(Jp,jm,new WeakSet);let KL=Jp;const jme="4.10.38",Ume="f9bea397f";function N8(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Rw(n){return Math.max(0,Math.min(255,255*n))}class _8{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Rw(e),[e,e,e]}static G_HTML([e]){const t=N8(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Rw)}static RGB_HTML(e){return`#${e.map(N8).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[Rw(1-Math.min(1,e+s)),Rw(1-Math.min(1,r+s)),Rw(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class Wme{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){qn("Abstract method `_createSVG` called.")}}class S5 extends Wme{_createSVG(e){return document.createElementNS(Du,e)}}class oY{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){var h,d;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const o=i!=="richText",l=e.div;if(l.append(a),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const f=document.createTextNode(s.value);a.append(f),o&&TS.shouldBuildText(s.name)&&c.push(f)}return{textDivs:c}}const u=[[s,-1,a]];for(;u.length>0;){const[f,p,m]=u.at(-1);if(p+1===f.children.length){u.pop();continue}const y=f.children[++u.at(-1)[1]];if(y===null)continue;const{name:g}=y;if(g==="#text"){const b=document.createTextNode(y.value);c.push(b),m.append(b);continue}const v=(h=y==null?void 0:y.attributes)!=null&&h.xmlns?document.createElementNS(y.attributes.xmlns,g):document.createElement(g);if(m.append(v),y.attributes&&this.setAttributes({html:v,element:y,storage:t,intent:i,linkService:r}),((d=y.children)==null?void 0:d.length)>0)u.push([y,-1,v]);else if(y.value){const b=document.createTextNode(y.value);o&&TS.shouldBuildText(g)&&c.push(b),v.append(b)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Hk=1e3,Gme=9,_g=new WeakSet;function wf(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class Hme{static create(e){switch(e.data.annotationType){case fs.LINK:return new lY(e);case fs.TEXT:return new qme(e);case fs.WIDGET:switch(e.data.fieldType){case"Tx":return new Kme(e);case"Btn":return e.data.radioButton?new hY(e):e.data.checkBox?new Yme(e):new Zme(e);case"Ch":return new Qme(e);case"Sig":return new Xme(e)}return new s0(e);case fs.POPUP:return new YL(e);case fs.FREETEXT:return new gY(e);case fs.LINE:return new ege(e);case fs.SQUARE:return new tge(e);case fs.CIRCLE:return new nge(e);case fs.POLYLINE:return new yY(e);case fs.CARET:return new sge(e);case fs.INK:return new k5(e);case fs.POLYGON:return new rge(e);case fs.HIGHLIGHT:return new vY(e);case fs.UNDERLINE:return new ige(e);case fs.SQUIGGLY:return new age(e);case fs.STRIKEOUT:return new oge(e);case fs.STAMP:return new xY(e);case fs.FILEATTACHMENT:return new lge(e);default:return new Xr(e)}}}var Um,Cv,Tv,rk,XL;const Hj=class Hj{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){j(this,rk);j(this,Um,null);j(this,Cv,!1);j(this,Tv,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e!=null&&e.str||t!=null&&t.str||r!=null&&r.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Hj._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;x(this,Um)||L(this,Um,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&U(this,rk,XL).call(this,t),(r=x(this,Tv))==null||r.popup.updateEdited(e)}resetEdited(){var e;x(this,Um)&&(U(this,rk,XL).call(this,x(this,Um).rect),(e=x(this,Tv))==null||e.popup.resetEdited(),L(this,Um,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof s0||(i.tabIndex=Hk);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof YL){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,i),i}const{width:o,height:l}=wf(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,y=t.borderStyle.verticalCornerRadius;if(m>0||y>0){const v=`calc(${m}px * var(--scale-factor)) / calc(${y}px * var(--scale-factor))`;a.borderRadius=v}else if(this instanceof hY){const v=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=v}switch(t.borderStyle.style){case Aw.SOLID:a.borderStyle="solid";break;case Aw.DASHED:a.borderStyle="dashed";break;case Aw.BEVELED:Ht("Unimplemented border style: beveled");break;case Aw.INSET:Ht("Unimplemented border style: inset");break;case Aw.UNDERLINE:a.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(L(this,Cv,!0),a.borderColor=pt.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const c=pt.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:h,pageX:d,pageY:f}=s.rawDims;a.left=`${100*(c[0]-d)/u}%`,a.top=`${100*(c[1]-f)/h}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(a.width=`${100*o/u}%`,a.height=`${100*l/h}%`):this.setRotation(p,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:a}=wf(this.data.rect);let o,l;e%180===0?(o=100*i/r,l=100*a/s):(o=100*a/r,l=100*i/s),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[r]=_8[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:_8[`${a}_rgb`](o)})};return en(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,y,g,v]=e.subarray(2,6);if(s===m&&i===y&&t===g&&r===v)return}const{style:a}=this.container;let o;if(x(this,Cv)){const{borderColor:m,borderWidth:y}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const l=s-t,c=i-r,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const d=u.createElement("defs");h.append(d);const f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let m=2,y=e.length;m<y;m+=8){const g=e[m],v=e[m+1],b=e[m+2],w=e[m+3],C=u.createElement("rect"),I=(b-t)/l,T=(i-v)/c,E=(g-b)/l,A=(v-w)/c;C.setAttribute("x",I),C.setAttribute("y",T),C.setAttribute("width",E),C.setAttribute("height",A),f.append(C),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${T}" width="${E}" height="${A}"/>`)}x(this,Cv)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:e}=this,t=L(this,Tv,new YL({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){qn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!_g.has(c)){Ht(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:c})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&_g.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Um=new WeakMap,Cv=new WeakMap,Tv=new WeakMap,rk=new WeakSet,XL=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e);const{width:c,height:u}=wf(e);t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+l)/a}%`,s===0?(t.width=`${100*c/i}%`,t.height=`${100*u/a}%`):this.setRotation(s)};let Xr=Hj;var co,zp,cY,uY;class lY extends Xr{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});j(this,co);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(U(this,co,cY).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(U(this,co,uY).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&U(this,co,zp).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),U(this,co,zp).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),U(this,co,zp).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),U(this,co,zp).call(this),!this._fieldObjects){Ht('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var h;s==null||s();const{fields:i,refs:a,include:o}=r,l=[];if(i.length!==0||a.length!==0){const d=new Set(a);for(const f of i){const p=this._fieldObjects[f]||[];for(const{id:m}of p)d.add(m)}for(const f of Object.values(this._fieldObjects))for(const p of f)d.has(p.id)===o&&l.push(p)}else for(const d of Object.values(this._fieldObjects))l.push(...d);const c=this.annotationStorage,u=[];for(const d of l){const{id:f}=d;switch(u.push(f),d.type){case"text":{const m=d.defaultValue||"";c.setValue(f,{value:m});break}case"checkbox":case"radiobutton":{const m=d.defaultValue===d.exportValues;c.setValue(f,{value:m});break}case"combobox":case"listbox":{const m=d.defaultValue||"";c.setValue(f,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!_g.has(p)){Ht(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}co=new WeakSet,zp=function(){this.container.setAttribute("data-internal-link","")},cY=function(t,r,s=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(r.content,r.filename,s),!1},U(this,co,zp).call(this)},uY=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),U(this,co,zp).call(this)};class qme extends Xr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class s0 extends Xr{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return na.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,r,s){var i,a,o;for(const[l,c]of r)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,s),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":pt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Gme,i=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(sO*s))||1,h=c/u;a=Math.min(s,l(h/sO))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(c/sO))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=pt.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Kme extends s0{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",c??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),_g.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=Hk,this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",d=>{e.setValue(t,{value:d.target.value}),this.setPropertyOnSiblings(r,"value",d.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",d=>{const f=this.data.defaultFieldValue??"";r.value=u.userValue=f,u.formattedValue=null});let h=d=>{const{formattedValue:f}=u;f!=null&&(d.target.value=f),d.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",f=>{var m;if(u.focused)return;const{target:p}=f;u.userValue&&(p.value=u.userValue),u.lastCommittedValue=p.value,u.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const p={value(m){u.userValue=m.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),m.target.value=u.userValue},formattedValue(m){const{formattedValue:y}=m.detail;u.formattedValue=y,y!=null&&m.target!==document.activeElement&&(m.target.value=y),e.setValue(t,{formattedValue:y})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var b;const{charLimit:y}=m.detail,{target:g}=m;if(y===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",y);let v=u.userValue;!v||v.length<=y||(v=v.slice(0,y),g.value=u.userValue=v,e.setValue(t,{value:v}),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(p,f)}),r.addEventListener("keydown",f=>{var y;u.commitKey=1;let p=-1;if(f.key==="Escape"?p=0:f.key==="Enter"&&!this.data.multiLine?p=2:f.key==="Tab"&&(u.commitKey=3),p===-1)return;const{value:m}=f.target;u.lastCommittedValue!==m&&(u.lastCommittedValue=m,u.userValue=m,(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:p,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const d=h;h=null,r.addEventListener("blur",f=>{var m,y;if(!u.focused||!f.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(u.focused=!1);const{value:p}=f.target;u.userValue=p,u.lastCommittedValue!==p&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:u.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}})),d(f)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",f=>{var C;u.lastCommittedValue=null;const{data:p,target:m}=f,{value:y,selectionStart:g,selectionEnd:v}=m;let b=g,w=v;switch(f.inputType){case"deleteWordBackward":{const I=y.substring(0,g).match(/\w*[^\w]*$/);I&&(b-=I[0].length);break}case"deleteWordForward":{const I=y.substring(g).match(/^[^\w]*\w*/);I&&(w+=I[0].length);break}case"deleteContentBackward":g===v&&(b-=1);break;case"deleteContentForward":g===v&&(w+=1);break}f.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,change:p||"",willCommit:!1,selStart:b,selEnd:w}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(h&&r.addEventListener("blur",h),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Xme extends s0{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Yme extends s0{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return _g.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=Hk,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class hY extends s0{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(_g.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=Hk,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const u=a===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const d=u&&h.id===r;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Zme extends lY{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Qme extends s0{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");_g.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Hk;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue;for(const d of s.options)d.selected=d.value===h});for(const u of this.data.options){const h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,r.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),i=!1),s.append(h)}let a=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),a=()=>{u.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=u=>{const h=u?"value":"textContent",{options:d,multiple:f}=s;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let l=o(!1);const c=u=>{const h=u.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const h={value(d){a==null||a();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const m of s.options)m.selected=p.has(m.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(d){s.multiple=!0},remove(d){const f=s.options,p=d.detail.remove;f[p].selected=!1,s.remove(p),f.length>0&&Array.prototype.findIndex.call(f,y=>y.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:o(!0),items:c(d)}),l=o(!1)},clear(d){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:m}=d.detail.insert,y=s.children[f],g=document.createElement("option");g.textContent=p,g.value=m,y?y.before(g):s.append(g),e.setValue(t,{value:o(!0),items:c(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;s.length!==0;)s.remove(0);for(const p of f){const{displayValue:m,exportValue:y}=p,g=document.createElement("option");g.textContent=m,g.value=y,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,u)}),s.addEventListener("input",u=>{var f;const h=o(!0),d=o(!1);e.setValue(t,{value:h}),u.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class YL extends Xr{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Xr._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Jme({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${m5}${r}`).join(",")),this.container}}var Ev,F_,P_,Iv,Wm,Rr,sh,Av,sk,ik,Nv,ih,Ll,ah,ak,oh,ok,Gm,Hm,Un,XI,ZL,dY,fY,pY,mY,YI,ZI,QL;class Jme{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h}){j(this,Un);j(this,Ev,U(this,Un,pY).bind(this));j(this,F_,U(this,Un,QL).bind(this));j(this,P_,U(this,Un,ZI).bind(this));j(this,Iv,U(this,Un,YI).bind(this));j(this,Wm,null);j(this,Rr,null);j(this,sh,null);j(this,Av,null);j(this,sk,null);j(this,ik,null);j(this,Nv,null);j(this,ih,!1);j(this,Ll,null);j(this,ah,null);j(this,ak,null);j(this,oh,null);j(this,ok,null);j(this,Gm,null);j(this,Hm,!1);var d;L(this,Rr,e),L(this,ok,s),L(this,sh,a),L(this,oh,o),L(this,ik,l),L(this,Wm,t),L(this,ak,c),L(this,Nv,u),L(this,sk,r),L(this,Av,v5.toDateObject(i)),this.trigger=r.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",x(this,Iv)),f.addEventListener("mouseenter",x(this,P_)),f.addEventListener("mouseleave",x(this,F_)),f.classList.add("popupTriggerArea");for(const f of r)(d=f.container)==null||d.addEventListener("keydown",x(this,Ev));x(this,Rr).hidden=!0,h&&U(this,Un,YI).call(this)}render(){if(x(this,Ll))return;const e=L(this,Ll,document.createElement("div"));if(e.className="popup",x(this,Wm)){const i=e.style.outlineColor=pt.makeHexColor(...x(this,Wm));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=pt.makeHexColor(...x(this,Wm).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=x(this,ok),e.append(t),x(this,Av)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:x(this,Av).valueOf()})),t.append(i)}const s=x(this,Un,XI);if(s)oY.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(x(this,sh));e.append(i)}x(this,Rr).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const o=s[i];r.append(document.createTextNode(o)),i<a-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;x(this,Gm)||L(this,Gm,{contentsObj:x(this,sh),richText:x(this,oh)}),e&&L(this,ah,null),t&&(L(this,oh,U(this,Un,fY).call(this,t)),L(this,sh,null)),(r=x(this,Ll))==null||r.remove(),L(this,Ll,null)}resetEdited(){var e;x(this,Gm)&&({contentsObj:Gi(this,sh)._,richText:Gi(this,oh)._}=x(this,Gm),L(this,Gm,null),(e=x(this,Ll))==null||e.remove(),L(this,Ll,null),L(this,ah,null))}forceHide(){L(this,Hm,this.isVisible),x(this,Hm)&&(x(this,Rr).hidden=!0)}maybeShow(){x(this,Hm)&&(x(this,Ll)||U(this,Un,ZI).call(this),L(this,Hm,!1),x(this,Rr).hidden=!1)}get isVisible(){return x(this,Rr).hidden===!1}}Ev=new WeakMap,F_=new WeakMap,P_=new WeakMap,Iv=new WeakMap,Wm=new WeakMap,Rr=new WeakMap,sh=new WeakMap,Av=new WeakMap,sk=new WeakMap,ik=new WeakMap,Nv=new WeakMap,ih=new WeakMap,Ll=new WeakMap,ah=new WeakMap,ak=new WeakMap,oh=new WeakMap,ok=new WeakMap,Gm=new WeakMap,Hm=new WeakMap,Un=new WeakSet,XI=function(){const e=x(this,oh),t=x(this,sh);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&x(this,oh).html||null},ZL=function(){var e,t,r;return((r=(t=(e=x(this,Un,XI))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},dY=function(){var e,t,r;return((r=(t=(e=x(this,Un,XI))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},fY=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:x(this,Un,dY),fontSize:x(this,Un,ZL)?`calc(${x(this,Un,ZL)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},pY=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&x(this,ih))&&U(this,Un,YI).call(this)},mY=function(){if(x(this,ah)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=x(this,ik);let a=!!x(this,Nv),o=a?x(this,Nv):x(this,ak);for(const p of x(this,sk))if(!o||pt.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=pt.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),u=a?o[2]-o[0]+5:0,h=l[0]+u,d=l[1];L(this,ah,[100*(h-s)/t,100*(d-i)/r]);const{style:f}=x(this,Rr);f.left=`${x(this,ah)[0]}%`,f.top=`${x(this,ah)[1]}%`},YI=function(){L(this,ih,!x(this,ih)),x(this,ih)?(U(this,Un,ZI).call(this),x(this,Rr).addEventListener("click",x(this,Iv)),x(this,Rr).addEventListener("keydown",x(this,Ev))):(U(this,Un,QL).call(this),x(this,Rr).removeEventListener("click",x(this,Iv)),x(this,Rr).removeEventListener("keydown",x(this,Ev)))},ZI=function(){x(this,Ll)||this.render(),this.isVisible?x(this,ih)&&x(this,Rr).classList.add("focused"):(U(this,Un,mY).call(this),x(this,Rr).hidden=!1,x(this,Rr).style.zIndex=parseInt(x(this,Rr).style.zIndex)+1e3)},QL=function(){x(this,Rr).classList.remove("focused"),!(x(this,ih)||!this.isVisible)&&(x(this,Rr).hidden=!0,x(this,Rr).style.zIndex=parseInt(x(this,Rr).style.zIndex)-1e3)};class gY extends Xr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Gt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var lk;class ege extends Xr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});j(this,lk,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:r,height:s}=wf(t.rect),i=this.svgFactory.create(r,s,!0),a=L(this,lk,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,lk)}addHighlightArea(){this.container.classList.add("highlightArea")}}lk=new WeakMap;var ck;class tge extends Xr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});j(this,ck,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:r,height:s}=wf(t.rect),i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=L(this,ck,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,ck)}addHighlightArea(){this.container.classList.add("highlightArea")}}ck=new WeakMap;var uk;class nge extends Xr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});j(this,uk,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:r,height:s}=wf(t.rect),i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=L(this,uk,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",s/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,uk)}addHighlightArea(){this.container.classList.add("highlightArea")}}uk=new WeakMap;var hk;class yY extends Xr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});j(this,hk,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i}}=this;if(!r)return this.container;const{width:a,height:o}=wf(t),l=this.svgFactory.create(a,o,!0);let c=[];for(let h=0,d=r.length;h<d;h+=2){const f=r[h]-t[0],p=t[3]-r[h+1];c.push(`${f},${p}`)}c=c.join(" ");const u=L(this,hk,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,hk)}addHighlightArea(){this.container.classList.add("highlightArea")}}hk=new WeakMap;class rge extends yY{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sge extends Xr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var dk,qm,fk,JL;class k5 extends Xr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});j(this,fk);j(this,dk,null);j(this,qm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Gt.HIGHLIGHT:Gt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:l,height:c}=U(this,fk,JL).call(this,r,t),u=this.svgFactory.create(l,c,!0),h=L(this,dk,this.svgFactory.createElement("svg:g"));u.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let d=0,f=s.length;d<f;d++){const p=this.svgFactory.createElement(this.svgElementName);x(this,qm).push(p),p.setAttribute("points",s[d].join(",")),h.append(p)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,a=x(this,dk);if(r>=0&&a.setAttribute("stroke-width",r||1),s)for(let o=0,l=x(this,qm).length;o<l;o++)x(this,qm)[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:l,height:c}=U(this,fk,JL).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return x(this,qm)}addHighlightArea(){this.container.classList.add("highlightArea")}}dk=new WeakMap,qm=new WeakMap,fk=new WeakSet,JL=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class vY extends Xr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Gt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class ige extends Xr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class age extends Xr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class oge extends Xr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xY extends Xr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Gt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pk,mk,eM;class lge extends Xr{constructor(t){var s;super(t,{isRenderable:!0});j(this,mk);j(this,pk,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",U(this,mk,eM).bind(this)),L(this,pk,s);const{isMac:i}=na.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&U(this,mk,eM).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return x(this,pk)}addHighlightArea(){this.container.classList.add("highlightArea")}}pk=new WeakMap,mk=new WeakSet,eM=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var gk,Km,Xm,yk,e0,bY,tM;class cge{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:o}){j(this,e0);j(this,gk,null);j(this,Km,null);j(this,Xm,new Map);j(this,yk,null);this.div=e,L(this,gk,t),L(this,Km,r),L(this,yk,o||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return x(this,Xm).size>0}async render(e){var a;const{annotations:t}=e,r=this.div;Ag(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new S5,annotationStorage:e.annotationStorage||new b5,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===fs.POPUP;if(l){const h=s.get(o.id);if(!h)continue;i.elements=h}else{const{width:h,height:d}=wf(o.rect);if(h<=0||d<=0)continue}i.data=o;const c=Hme.create(i);if(!c.isRenderable)continue;if(!l&&o.popupRef){const h=s.get(o.popupRef);h?h.push(c):s.set(o.popupRef,[c])}const u=c.render();o.hidden&&(u.style.visibility="hidden"),await U(this,e0,bY).call(this,u,o.id),c._isEditable&&(x(this,Xm).set(c.data.id,c),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(c))}U(this,e0,tM).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Ag(t,{rotation:e.rotation}),U(this,e0,tM).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(x(this,Xm).values())}getEditableAnnotation(e){return x(this,Xm).get(e)}}gk=new WeakMap,Km=new WeakMap,Xm=new WeakMap,yk=new WeakMap,e0=new WeakSet,bY=async function(e,t){var a,o;const r=e.firstChild||e,s=r.id=`${m5}${t}`,i=await((a=x(this,yk))==null?void 0:a.getAriaAttributes(s));if(i)for(const[l,c]of i)r.setAttribute(l,c);this.div.append(e),(o=x(this,gk))==null||o.moveElementInDOM(this.div,e,r,!1)},tM=function(){if(!x(this,Km))return;const e=this.div;for(const[t,r]of x(this,Km)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):s.append(r)}x(this,Km).clear()};const IE=/\r\n?|\n/g;var Ml,Qa,vk,Ym,Ja,us,wY,SY,kY,QI,Ih,JI,eA,CY,rM,TY;const Yn=class Yn extends Cr{constructor(t){super({...t,name:"freeTextEditor"});j(this,us);j(this,Ml);j(this,Qa,"");j(this,vk,`${this.id}-editor`);j(this,Ym,null);j(this,Ja);L(this,Ml,t.color||Yn._defaultColor||Cr._defaultLineColor),L(this,Ja,t.fontSize||Yn._defaultFontSize)}static get _keyboardManager(){const t=Yn.prototype,r=a=>a.isEmpty(),s=Ng.TRANSLATE_SMALL,i=Ng.TRANSLATE_BIG;return en(this,"_keyboardManager",new Gk([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){Cr.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case pn.FREETEXT_SIZE:Yn._defaultFontSize=r;break;case pn.FREETEXT_COLOR:Yn._defaultColor=r;break}}updateParams(t,r){switch(t){case pn.FREETEXT_SIZE:U(this,us,wY).call(this,r);break;case pn.FREETEXT_COLOR:U(this,us,SY).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pn.FREETEXT_SIZE,Yn._defaultFontSize],[pn.FREETEXT_COLOR,Yn._defaultColor||Cr._defaultLineColor]]}get propertiesToUpdate(){return[[pn.FREETEXT_SIZE,x(this,Ja)],[pn.FREETEXT_COLOR,x(this,Ml)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Yn._internalPadding*t,-(Yn._internalPadding+x(this,Ja))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Gt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),L(this,Ym,new AbortController);const t=this._uiManager.combinedSignal(x(this,Ym));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",x(this,vk)),this._isDraggable=!0,(t=x(this,Ym))==null||t.abort(),L(this,Ym,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=x(this,Qa),r=L(this,Qa,U(this,us,kY).call(this).trimEnd());if(t===r)return;const s=i=>{if(L(this,Qa,i),!i){this.remove();return}U(this,us,eA).call(this),this._uiManager.rebuild(this),U(this,us,QI).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),U(this,us,QI).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Yn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",x(this,vk)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${x(this,Ja)}px * var(--scale-factor))`,s.color=x(this,Ml),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),oN(this,this.div,["dblclick","keydown"]),this.width){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,h]=this.pageDimensions,[d,f]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=t+(o[0]-d)/u,m=r+this.height-(o[1]-f)/h;break;case 90:p=t+(o[0]-d)/u,m=r-(o[1]-f)/h,[l,c]=[c,-l];break;case 180:p=t-this.width+(o[0]-d)/u,m=r-(o[1]-f)/h,[l,c]=[-l,-c];break;case 270:p=t+(o[0]-d-this.height*h)/u,m=r+(o[1]-f-this.width*u)/h,[l,c]=[-c,l];break}this.setAt(p*i,m*a,l,c)}else this.setAt(t*i,r*a,this.width*i,this.height*a);U(this,us,eA).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,m,y;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=U(p=Yn,Ih,rM).call(p,r.getData("text")||"").replaceAll(IE,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,u=[],h=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(IE,"")),g!==this.editorDiv){let v=u;for(const b of this.editorDiv.childNodes){if(b===g){v=h;continue}v.push(U(m=Yn,Ih,JI).call(m,b))}}u.push(l.nodeValue.slice(0,c).replaceAll(IE,""))}else if(l===this.editorDiv){let g=u,v=0;for(const b of this.editorDiv.childNodes)v++===c&&(g=h),g.push(U(y=Yn,Ih,JI).call(y,b))}L(this,Qa,`${u.join(`
`)}${i}${h.join(`
`)}`),U(this,us,eA).call(this);const d=new Range;let f=u.reduce((g,v)=>g+v.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const v=g.nodeValue.length;if(f<=v){d.setStart(g,f),d.setEnd(g,f);break}f-=v}a.removeAllRanges(),a.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,s){var o;let i=null;if(t instanceof gY){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:h,id:d,popupRef:f},textContent:p,textPosition:m,parent:{page:{pageNumber:y}}}=t;if(!p||p.length===0)return null;i=t={annotationType:Gt.FREETEXT,color:Array.from(c),fontSize:l,value:p.join(`
`),position:m,pageIndex:y-1,rect:u.slice(0),rotation:h,id:d,deleted:!1,popupRef:f}}const a=await super.deserialize(t,r,s);return L(a,Ja,t.fontSize),L(a,Ml,pt.makeHexColor(...t.color)),L(a,Qa,U(o=Yn,Ih,rM).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=i,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Yn._internalPadding*this.parentScale,s=this.getRect(r,r),i=Cr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:x(this,Ml)),a={annotationType:Gt.FREETEXT,color:i,fontSize:x(this,Ja),value:U(this,us,CY).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!U(this,us,TY).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:s}=r;s.fontSize=`calc(${x(this,Ja)}px * var(--scale-factor))`,s.color=x(this,Ml),r.replaceChildren();for(const a of x(this,Qa).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),r.append(o)}const i=Yn._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:x(this,Qa)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ml=new WeakMap,Qa=new WeakMap,vk=new WeakMap,Ym=new WeakMap,Ja=new WeakMap,us=new WeakSet,wY=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-x(this,Ja))*this.parentScale),L(this,Ja,i),U(this,us,QI).call(this)},s=x(this,Ja);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},SY=function(t){const r=i=>{L(this,Ml,this.editorDiv.style.color=i)},s=x(this,Ml);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},kY=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(U(s=Yn,Ih,JI).call(s,i)),r=i);return t.join(`
`)},QI=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Ih=new WeakSet,JI=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(IE,"")},eA=function(){if(this.editorDiv.replaceChildren(),!!x(this,Qa))for(const t of x(this,Qa).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},CY=function(){return x(this,Qa).replaceAll(""," ")},rM=function(t){return t.replaceAll(" ","")},TY=function(t){const{value:r,fontSize:s,color:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((o,l)=>o!==i[l])||t.pageIndex!==a},j(Yn,Ih),yt(Yn,"_freeTextDefaultContent",""),yt(Yn,"_internalPadding",0),yt(Yn,"_defaultColor",null),yt(Yn,"_defaultFontSize",10),yt(Yn,"_type","freetext"),yt(Yn,"_editorType",Gt.FREETEXT);let nM=Yn;class tt{toSVGPath(){qn("Abstract method `toSVGPath` must be implemented.")}get box(){qn("Abstract getter `box` must be implemented.")}serialize(e,t){qn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*s,a[o+1]=r+e[o+1]*i;return a}static _rescaleAndSwap(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*s,a[o+1]=r+e[o]*i;return a}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,a){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+a)/6,(r+i)/2,(s+a)/2]}}yt(tt,"PRECISION",1e-4);var eo,$l,_v,Rv,Uc,Jt,Zm,Qm,xk,bk,Dv,Fv,Gd,wk,O_,L_,Es,a1,EY,IY,AY,NY,_Y,RY;const $u=class $u{constructor({x:e,y:t},r,s,i,a,o=0){j(this,Es);j(this,eo);j(this,$l,[]);j(this,_v);j(this,Rv);j(this,Uc,[]);j(this,Jt,new Float32Array(18));j(this,Zm);j(this,Qm);j(this,xk);j(this,bk);j(this,Dv);j(this,Fv);j(this,Gd,[]);L(this,eo,r),L(this,Fv,i*s),L(this,Rv,a),x(this,Jt).set([NaN,NaN,NaN,NaN,e,t],6),L(this,_v,o),L(this,bk,x($u,wk)*s),L(this,xk,x($u,L_)*s),L(this,Dv,s),x(this,Gd).push(e,t)}isEmpty(){return isNaN(x(this,Jt)[8])}add({x:e,y:t}){var A;L(this,Zm,e),L(this,Qm,t);const[r,s,i,a]=x(this,eo);let[o,l,c,u]=x(this,Jt).subarray(8,12);const h=e-c,d=t-u,f=Math.hypot(h,d);if(f<x(this,xk))return!1;const p=f-x(this,bk),m=p/f,y=m*h,g=m*d;let v=o,b=l;o=c,l=u,c+=y,u+=g,(A=x(this,Gd))==null||A.push(e,t);const w=-g/p,C=y/p,I=w*x(this,Fv),T=C*x(this,Fv);return x(this,Jt).set(x(this,Jt).subarray(2,8),0),x(this,Jt).set([c+I,u+T],4),x(this,Jt).set(x(this,Jt).subarray(14,18),12),x(this,Jt).set([c-I,u-T],16),isNaN(x(this,Jt)[6])?(x(this,Uc).length===0&&(x(this,Jt).set([o+I,l+T],2),x(this,Uc).push(NaN,NaN,NaN,NaN,(o+I-r)/i,(l+T-s)/a),x(this,Jt).set([o-I,l-T],14),x(this,$l).push(NaN,NaN,NaN,NaN,(o-I-r)/i,(l-T-s)/a)),x(this,Jt).set([v,b,o,l,c,u],6),!this.isEmpty()):(x(this,Jt).set([v,b,o,l,c,u],6),Math.abs(Math.atan2(b-l,v-o)-Math.atan2(g,y))<Math.PI/2?([o,l,c,u]=x(this,Jt).subarray(2,6),x(this,Uc).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/i,((l+u)/2-s)/a),[o,l,v,b]=x(this,Jt).subarray(14,18),x(this,$l).push(NaN,NaN,NaN,NaN,((v+o)/2-r)/i,((b+l)/2-s)/a),!0):([v,b,o,l,c,u]=x(this,Jt).subarray(0,6),x(this,Uc).push(((v+5*o)/6-r)/i,((b+5*l)/6-s)/a,((5*o+c)/6-r)/i,((5*l+u)/6-s)/a,((o+c)/2-r)/i,((l+u)/2-s)/a),[c,u,o,l,v,b]=x(this,Jt).subarray(12,18),x(this,$l).push(((v+5*o)/6-r)/i,((b+5*l)/6-s)/a,((5*o+c)/6-r)/i,((5*l+u)/6-s)/a,((o+c)/2-r)/i,((l+u)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=x(this,Uc),t=x(this,$l);if(isNaN(x(this,Jt)[6])&&!this.isEmpty())return U(this,Es,EY).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);U(this,Es,AY).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return U(this,Es,IY).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,a){return new DY(e,t,r,s,i,a)}getOutlines(){var h;const e=x(this,Uc),t=x(this,$l),r=x(this,Jt),[s,i,a,o]=x(this,eo),l=new Float32Array((((h=x(this,Gd))==null?void 0:h.length)??0)+2);for(let d=0,f=l.length-2;d<f;d+=2)l[d]=(x(this,Gd)[d]-s)/a,l[d+1]=(x(this,Gd)[d+1]-i)/o;if(l[l.length-2]=(x(this,Zm)-s)/a,l[l.length-1]=(x(this,Qm)-i)/o,isNaN(r[6])&&!this.isEmpty())return U(this,Es,NY).call(this,l);const c=new Float32Array(x(this,Uc).length+24+x(this,$l).length);let u=e.length;for(let d=0;d<u;d+=2){if(isNaN(e[d])){c[d]=c[d+1]=NaN;continue}c[d]=e[d],c[d+1]=e[d+1]}u=U(this,Es,RY).call(this,c,u);for(let d=t.length-6;d>=6;d-=6)for(let f=0;f<6;f+=2){if(isNaN(t[d+f])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[d+f],c[u+1]=t[d+f+1],u+=2}return U(this,Es,_Y).call(this,c,u),this.newFreeDrawOutline(c,l,x(this,eo),x(this,Dv),x(this,_v),x(this,Rv))}};eo=new WeakMap,$l=new WeakMap,_v=new WeakMap,Rv=new WeakMap,Uc=new WeakMap,Jt=new WeakMap,Zm=new WeakMap,Qm=new WeakMap,xk=new WeakMap,bk=new WeakMap,Dv=new WeakMap,Fv=new WeakMap,Gd=new WeakMap,wk=new WeakMap,O_=new WeakMap,L_=new WeakMap,Es=new WeakSet,a1=function(){const e=x(this,Jt).subarray(4,6),t=x(this,Jt).subarray(16,18),[r,s,i,a]=x(this,eo);return[(x(this,Zm)+(e[0]-t[0])/2-r)/i,(x(this,Qm)+(e[1]-t[1])/2-s)/a,(x(this,Zm)+(t[0]-e[0])/2-r)/i,(x(this,Qm)+(t[1]-e[1])/2-s)/a]},EY=function(){const[e,t,r,s]=x(this,eo),[i,a,o,l]=U(this,Es,a1).call(this);return`M${(x(this,Jt)[2]-e)/r} ${(x(this,Jt)[3]-t)/s} L${(x(this,Jt)[4]-e)/r} ${(x(this,Jt)[5]-t)/s} L${i} ${a} L${o} ${l} L${(x(this,Jt)[16]-e)/r} ${(x(this,Jt)[17]-t)/s} L${(x(this,Jt)[14]-e)/r} ${(x(this,Jt)[15]-t)/s} Z`},IY=function(e){const t=x(this,$l);e.push(`L${t[4]} ${t[5]} Z`)},AY=function(e){const[t,r,s,i]=x(this,eo),a=x(this,Jt).subarray(4,6),o=x(this,Jt).subarray(16,18),[l,c,u,h]=U(this,Es,a1).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${l} ${c} L${u} ${h} L${(o[0]-t)/s} ${(o[1]-r)/i}`)},NY=function(e){const t=x(this,Jt),[r,s,i,a]=x(this,eo),[o,l,c,u]=U(this,Es,a1).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(h,e,x(this,eo),x(this,Dv),x(this,_v),x(this,Rv))},_Y=function(e,t){const r=x(this,$l);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},RY=function(e,t){const r=x(this,Jt).subarray(4,6),s=x(this,Jt).subarray(16,18),[i,a,o,l]=x(this,eo),[c,u,h,d]=U(this,Es,a1).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/l],t),t+=24},j($u,wk,8),j($u,O_,2),j($u,L_,x($u,wk)+x($u,O_));let uN=$u;var Pv,Jm,lh,Sk,to,kk,jr,M_,FY;class DY extends tt{constructor(t,r,s,i,a,o){super();j(this,M_);j(this,Pv);j(this,Jm,new Float32Array(4));j(this,lh);j(this,Sk);j(this,to);j(this,kk);j(this,jr);L(this,jr,t),L(this,to,r),L(this,Pv,s),L(this,kk,i),L(this,lh,a),L(this,Sk,o),this.lastPoint=[NaN,NaN],U(this,M_,FY).call(this,o);const[l,c,u,h]=x(this,Jm);for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-l)/u,t[d+1]=(t[d+1]-c)/h;for(let d=0,f=r.length;d<f;d+=2)r[d]=(r[d]-l)/u,r[d+1]=(r[d+1]-c)/h}toSVGPath(){const t=[`M${x(this,jr)[4]} ${x(this,jr)[5]}`];for(let r=6,s=x(this,jr).length;r<s;r+=6){if(isNaN(x(this,jr)[r])){t.push(`L${x(this,jr)[r+4]} ${x(this,jr)[r+5]}`);continue}t.push(`C${x(this,jr)[r]} ${x(this,jr)[r+1]} ${x(this,jr)[r+2]} ${x(this,jr)[r+3]} ${x(this,jr)[r+4]} ${x(this,jr)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],a){const o=s-t,l=i-r;let c,u;switch(a){case 0:c=tt._rescale(x(this,jr),t,i,o,-l),u=tt._rescale(x(this,to),t,i,o,-l);break;case 90:c=tt._rescaleAndSwap(x(this,jr),t,r,o,l),u=tt._rescaleAndSwap(x(this,to),t,r,o,l);break;case 180:c=tt._rescale(x(this,jr),s,r,-o,l),u=tt._rescale(x(this,to),s,r,-o,l);break;case 270:c=tt._rescaleAndSwap(x(this,jr),s,i,-o,-l),u=tt._rescaleAndSwap(x(this,to),s,i,-o,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return x(this,Jm)}newOutliner(t,r,s,i,a,o=0){return new uN(t,r,s,i,a,o)}getNewOutline(t,r){const[s,i,a,o]=x(this,Jm),[l,c,u,h]=x(this,Pv),d=a*u,f=o*h,p=s*u+l,m=i*h+c,y=this.newOutliner({x:x(this,to)[0]*d+p,y:x(this,to)[1]*f+m},x(this,Pv),x(this,kk),t,x(this,Sk),r??x(this,lh));for(let g=2;g<x(this,to).length;g+=2)y.add({x:x(this,to)[g]*d+p,y:x(this,to)[g+1]*f+m});return y.getOutlines()}}Pv=new WeakMap,Jm=new WeakMap,lh=new WeakMap,Sk=new WeakMap,to=new WeakMap,kk=new WeakMap,jr=new WeakMap,M_=new WeakSet,FY=function(t){const r=x(this,jr);let s=r[4],i=r[5],a=s,o=i,l=s,c=i,u=s,h=i;const d=t?Math.max:Math.min;for(let p=6,m=r.length;p<m;p+=6){if(isNaN(r[p]))a=Math.min(a,r[p+4]),o=Math.min(o,r[p+5]),l=Math.max(l,r[p+4]),c=Math.max(c,r[p+5]),h<r[p+5]?(u=r[p+4],h=r[p+5]):h===r[p+5]&&(u=d(u,r[p+4]));else{const y=pt.bezierBoundingBox(s,i,...r.slice(p,p+6));a=Math.min(a,y[0]),o=Math.min(o,y[1]),l=Math.max(l,y[2]),c=Math.max(c,y[3]),h<y[3]?(u=y[2],h=y[3]):h===y[3]&&(u=d(u,y[2]))}s=r[p+4],i=r[p+5]}const f=x(this,Jm);f[0]=a-x(this,lh),f[1]=o-x(this,lh),f[2]=l-a+2*x(this,lh),f[3]=c-o+2*x(this,lh),this.lastPoint=[u,h]};var Ck,Tk,Hd,zl,la,PY,tA,OY,LY,iM;class sM{constructor(e,t=0,r=0,s=!0){j(this,la);j(this,Ck);j(this,Tk);j(this,Hd,[]);j(this,zl,[]);let i=1/0,a=-1/0,o=1/0,l=-1/0;const c=10**-4;for(const{x:y,y:g,width:v,height:b}of e){const w=Math.floor((y-t)/c)*c,C=Math.ceil((y+v+t)/c)*c,I=Math.floor((g-t)/c)*c,T=Math.ceil((g+b+t)/c)*c,E=[w,I,T,!0],A=[C,I,T,!1];x(this,Hd).push(E,A),i=Math.min(i,w),a=Math.max(a,C),o=Math.min(o,I),l=Math.max(l,T)}const u=a-i+2*r,h=l-o+2*r,d=i-r,f=o-r,p=x(this,Hd).at(s?-1:-2),m=[p[0],p[2]];for(const y of x(this,Hd)){const[g,v,b]=y;y[0]=(g-d)/u,y[1]=(v-f)/h,y[2]=(b-f)/h}L(this,Ck,new Float32Array([d,f,u,h])),L(this,Tk,m)}getOutlines(){x(this,Hd).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of x(this,Hd))t[3]?(e.push(...U(this,la,iM).call(this,t)),U(this,la,OY).call(this,t)):(U(this,la,LY).call(this,t),e.push(...U(this,la,iM).call(this,t)));return U(this,la,PY).call(this,e)}}Ck=new WeakMap,Tk=new WeakMap,Hd=new WeakMap,zl=new WeakMap,la=new WeakSet,PY=function(e){const t=[],r=new Set;for(const a of e){const[o,l,c]=a;t.push([o,l,a],[o,c,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],c=t[a+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[o,l,c,u,h]=a;r.delete(a);let d=o,f=l;for(i=[o,c],s.push(i);;){let p;if(r.has(u))p=u;else if(r.has(h))p=h;else break;r.delete(p),[o,l,c,u,h]=p,d!==o&&(i.push(d,f,o,f===l?l:c),d=o),f=f===l?c:l}i.push(d,f)}return new uge(s,x(this,Ck),x(this,Tk))},tA=function(e){const t=x(this,zl);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1},OY=function([,e,t]){const r=U(this,la,tA).call(this,e);x(this,zl).splice(r,0,[e,t])},LY=function([,e,t]){const r=U(this,la,tA).call(this,e);for(let s=r;s<x(this,zl).length;s++){const[i,a]=x(this,zl)[s];if(i!==e)break;if(i===e&&a===t){x(this,zl).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=x(this,zl)[s];if(i!==e)break;if(i===e&&a===t){x(this,zl).splice(s,1);return}}},iM=function(e){const[t,r,s]=e,i=[[t,r,s]],a=U(this,la,tA).call(this,s);for(let o=0;o<a;o++){const[l,c]=x(this,zl)[o];for(let u=0,h=i.length;u<h;u++){const[,d,f]=i[u];if(!(c<=d||f<=l)){if(d>=l){if(f>c)i[u][1]=c;else{if(h===1)return[];i.splice(u,1),u--,h--}continue}i[u][2]=l,f>c&&i.push([t,c,f])}}}return i};var Ek,Ov;class uge extends tt{constructor(t,r,s){super();j(this,Ek);j(this,Ov);L(this,Ov,t),L(this,Ek,r),this.lastPoint=s}toSVGPath(){const t=[];for(const r of x(this,Ov)){let[s,i]=r;t.push(`M${s} ${i}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],a){const o=[],l=s-t,c=i-r;for(const u of x(this,Ov)){const h=new Array(u.length);for(let d=0;d<u.length;d+=2)h[d]=t+u[d]*l,h[d+1]=i-u[d+1]*c;o.push(h)}return o}get box(){return x(this,Ek)}get classNamesForOutlining(){return["highlightOutline"]}}Ek=new WeakMap,Ov=new WeakMap;class aM extends uN{newFreeDrawOutline(e,t,r,s,i,a){return new hge(e,t,r,s,i,a)}}class hge extends DY{newOutliner(e,t,r,s,i,a=0){return new aM(e,t,r,s,i,a)}}var Bl,eg,Lv,gs,Ik,Mv,Ak,Nk,qd,Vl,$v,_k,Vn,oM,lM,cM,Bp,MY,md;const wa=class wa{constructor({editor:e=null,uiManager:t=null}){j(this,Vn);j(this,Bl,null);j(this,eg,null);j(this,Lv);j(this,gs,null);j(this,Ik,!1);j(this,Mv,!1);j(this,Ak,null);j(this,Nk);j(this,qd,null);j(this,Vl,null);j(this,$v);var r;e?(L(this,Mv,!1),L(this,$v,pn.HIGHLIGHT_COLOR),L(this,Ak,e)):(L(this,Mv,!0),L(this,$v,pn.HIGHLIGHT_DEFAULT_COLOR)),L(this,Vl,(e==null?void 0:e._uiManager)||t),L(this,Nk,x(this,Vl)._eventBus),L(this,Lv,(e==null?void 0:e.color)||((r=x(this,Vl))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),x(wa,_k)||L(wa,_k,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return en(this,"_keyboardManager",new Gk([[["Escape","mac+Escape"],wa.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wa.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wa.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wa.prototype._moveToPrevious],[["Home","mac+Home"],wa.prototype._moveToBeginning],[["End","mac+End"],wa.prototype._moveToEnd]]))}renderButton(){const e=L(this,Bl,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=x(this,Vl)._signal;e.addEventListener("click",U(this,Vn,Bp).bind(this),{signal:t}),e.addEventListener("keydown",U(this,Vn,cM).bind(this),{signal:t});const r=L(this,eg,document.createElement("span"));return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=x(this,Lv),e.append(r),e}renderMainDropdown(){const e=L(this,gs,U(this,Vn,oM).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===x(this,Bl)){U(this,Vn,Bp).call(this,e);return}const t=e.target.getAttribute("data-color");t&&U(this,Vn,lM).call(this,t,e)}_moveToNext(e){var t,r;if(!x(this,Vn,md)){U(this,Vn,Bp).call(this,e);return}if(e.target===x(this,Bl)){(t=x(this,gs).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=x(this,gs))==null?void 0:t.firstChild)||e.target===x(this,Bl)){x(this,Vn,md)&&this._hideDropdownFromKeyboard();return}x(this,Vn,md)||U(this,Vn,Bp).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!x(this,Vn,md)){U(this,Vn,Bp).call(this,e);return}(t=x(this,gs).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!x(this,Vn,md)){U(this,Vn,Bp).call(this,e);return}(t=x(this,gs).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=x(this,gs))==null||e.classList.add("hidden"),(t=x(this,qd))==null||t.abort(),L(this,qd,null)}_hideDropdownFromKeyboard(){var e;if(!x(this,Mv)){if(!x(this,Vn,md)){(e=x(this,Ak))==null||e.unselect();return}this.hideDropdown(),x(this,Bl).focus({preventScroll:!0,focusVisible:x(this,Ik)})}}updateColor(e){if(x(this,eg)&&(x(this,eg).style.backgroundColor=e),!x(this,gs))return;const t=x(this,Vl).highlightColors.values();for(const r of x(this,gs).children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=x(this,Bl))==null||e.remove(),L(this,Bl,null),L(this,eg,null),(t=x(this,gs))==null||t.remove(),L(this,gs,null)}};Bl=new WeakMap,eg=new WeakMap,Lv=new WeakMap,gs=new WeakMap,Ik=new WeakMap,Mv=new WeakMap,Ak=new WeakMap,Nk=new WeakMap,qd=new WeakMap,Vl=new WeakMap,$v=new WeakMap,_k=new WeakMap,Vn=new WeakSet,oM=function(){const e=document.createElement("div"),t=x(this,Vl)._signal;e.addEventListener("contextmenu",oc,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,s]of x(this,Vl).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",x(wa,_k)[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.setAttribute("aria-selected",s===x(this,Lv)),i.addEventListener("click",U(this,Vn,lM).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",U(this,Vn,cM).bind(this),{signal:t}),e},lM=function(e,t){t.stopPropagation(),x(this,Nk).dispatch("switchannotationeditorparams",{source:this,type:x(this,$v),value:e})},cM=function(e){wa._keyboardManager.exec(this,e)},Bp=function(e){if(x(this,Vn,md)){this.hideDropdown();return}if(L(this,Ik,e.detail===0),x(this,qd)||(L(this,qd,new AbortController),window.addEventListener("pointerdown",U(this,Vn,MY).bind(this),{signal:x(this,Vl).combinedSignal(x(this,qd))})),x(this,gs)){x(this,gs).classList.remove("hidden");return}const t=L(this,gs,U(this,Vn,oM).call(this));x(this,Bl).append(t)},MY=function(e){var t;(t=x(this,gs))!=null&&t.contains(e.target)||this.hideDropdown()},md=function(){return x(this,gs)&&!x(this,gs).classList.contains("hidden")},j(wa,_k,null);let hN=wa;var zv,Rk,ch,tg,Bv,Ca,Dk,Fk,ng,Uo,no,ri,Vv,uh,Ii,jv,Wo,Pk,Ut,uM,nA,$Y,zY,BY,hM,Vp,tl,Q0,VY,rA,o1,jY,UY,WY,GY,HY;const An=class An extends Cr{constructor(t){super({...t,name:"highlightEditor"});j(this,Ut);j(this,zv,null);j(this,Rk,0);j(this,ch);j(this,tg,null);j(this,Bv,null);j(this,Ca,null);j(this,Dk,null);j(this,Fk,0);j(this,ng,null);j(this,Uo,null);j(this,no,null);j(this,ri,!1);j(this,Vv,null);j(this,uh);j(this,Ii,null);j(this,jv,"");j(this,Wo);j(this,Pk,"");this.color=t.color||An._defaultColor,L(this,Wo,t.thickness||An._defaultThickness),L(this,uh,t.opacity||An._defaultOpacity),L(this,ch,t.boxes||null),L(this,Pk,t.methodOfCreation||""),L(this,jv,t.text||""),this._isDraggable=!1,t.highlightId>-1?(L(this,ri,!0),U(this,Ut,nA).call(this,t),U(this,Ut,Vp).call(this)):x(this,ch)&&(L(this,zv,t.anchorNode),L(this,Rk,t.anchorOffset),L(this,Dk,t.focusNode),L(this,Fk,t.focusOffset),U(this,Ut,uM).call(this),U(this,Ut,Vp).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=An.prototype;return en(this,"_keyboardManager",new Gk([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:x(this,ri)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:x(this,Wo),methodOfCreation:x(this,Pk)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;Cr.initialize(t,r),An._defaultColor||(An._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case pn.HIGHLIGHT_DEFAULT_COLOR:An._defaultColor=r;break;case pn.HIGHLIGHT_THICKNESS:An._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return x(this,Vv)}updateParams(t,r){switch(t){case pn.HIGHLIGHT_COLOR:U(this,Ut,$Y).call(this,r);break;case pn.HIGHLIGHT_THICKNESS:U(this,Ut,zY).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pn.HIGHLIGHT_DEFAULT_COLOR,An._defaultColor],[pn.HIGHLIGHT_THICKNESS,An._defaultThickness]]}get propertiesToUpdate(){return[[pn.HIGHLIGHT_COLOR,this.color||An._defaultColor],[pn.HIGHLIGHT_THICKNESS,x(this,Wo)||An._defaultThickness],[pn.HIGHLIGHT_FREE,x(this,ri)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(L(this,Bv,new hN({editor:this})),t.addColorPicker(x(this,Bv))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(U(this,Ut,o1).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,U(this,Ut,o1).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){U(this,Ut,hM).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(U(this,Ut,Vp).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?U(this,Ut,hM).call(this):t&&(U(this,Ut,Vp).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,a,o;const{drawLayer:r}=this.parent;let s;x(this,ri)?(t=(t-this.rotation+360)%360,s=U(i=An,tl,Q0).call(i,x(this,Uo).box,t)):s=U(a=An,tl,Q0).call(a,[this.x,this.y,this.width,this.height],t),r.updateProperties(x(this,no),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(x(this,Ii),{bbox:U(o=An,tl,Q0).call(o,x(this,Ca).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();x(this,jv)&&(t.setAttribute("aria-label",x(this,jv)),t.setAttribute("role","mark")),x(this,ri)?t.classList.add("free"):this.div.addEventListener("keydown",U(this,Ut,VY).bind(this),{signal:this._uiManager._signal});const r=L(this,ng,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=x(this,tg);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),oN(this,x(this,ng),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(x(this,Ii),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(x(this,Ii),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:U(this,Ut,rA).call(this,!0);break;case 1:case 3:U(this,Ut,rA).call(this,!1);break}}select(){var t;super.select(),x(this,Ii)&&((t=this.parent)==null||t.drawLayer.updateProperties(x(this,Ii),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),x(this,Ii)&&((t=this.parent)==null||t.drawLayer.updateProperties(x(this,Ii),{rootClass:{selected:!1}}),x(this,ri)||U(this,Ut,rA).call(this,!1))}get _mustFixPosition(){return!x(this,ri)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(x(this,no),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(x(this,Ii),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:a}){const{x:o,y:l,width:c,height:u}=s.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),f=p=>{h.abort(),U(this,tl,GY).call(this,t,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",uo,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",oc,{signal:d}),s.addEventListener("pointermove",U(this,tl,WY).bind(this,t),{signal:d}),this._freeHighlight=new aM({x:i,y:a},[o,l,c,u],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var m,y,g,v;let i=null;if(t instanceof vY){const{data:{quadPoints:b,rect:w,rotation:C,id:I,color:T,opacity:E,popupRef:A},parent:{page:{pageNumber:N}}}=t;i=t={annotationType:Gt.HIGHLIGHT,color:Array.from(T),opacity:E,quadPoints:b,boxes:null,pageIndex:N-1,rect:w.slice(0),rotation:C,id:I,deleted:!1,popupRef:A}}else if(t instanceof k5){const{data:{inkLists:b,rect:w,rotation:C,id:I,color:T,borderStyle:{rawWidth:E},popupRef:A},parent:{page:{pageNumber:N}}}=t;i=t={annotationType:Gt.HIGHLIGHT,color:Array.from(T),thickness:E,inkLists:b,boxes:null,pageIndex:N-1,rect:w.slice(0),rotation:C,id:I,deleted:!1,popupRef:A}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=t,u=await super.deserialize(t,r,s);u.color=pt.makeHexColor(...a),L(u,uh,c||1),l&&L(u,Wo,t.thickness),u.annotationElementId=t.id||null,u._initialData=i;const[h,d]=u.pageDimensions,[f,p]=u.pageTranslation;if(o){const b=L(u,ch,[]);for(let w=0;w<o.length;w+=8)b.push({x:(o[w]-f)/h,y:1-(o[w+1]-p)/d,width:(o[w+2]-o[w])/h,height:(o[w+1]-o[w+5])/d});U(m=u,Ut,uM).call(m),U(y=u,Ut,Vp).call(y),u.rotate(u.rotation)}else if(l){L(u,ri,!0);const b=l[0],w={x:b[0]-f,y:d-(b[1]-p)},C=new aM(w,[0,0,h,d],1,x(u,Wo)/2,!0,.001);for(let E=0,A=b.length;E<A;E+=2)w.x=b[E]-f,w.y=d-(b[E+1]-p),C.add(w);const{id:I,clipPathId:T}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);U(g=u,Ut,nA).call(g,{highlightOutlines:C.getOutlines(),highlightId:I,clipPathId:T}),U(v=u,Ut,Vp).call(v)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),s=Cr._colorManager.convert(this.color),i={annotationType:Gt.HIGHLIGHT,color:s,opacity:x(this,uh),thickness:x(this,Wo),quadPoints:U(this,Ut,jY).call(this),outlines:U(this,Ut,UY).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:U(this,Ut,o1).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!U(this,Ut,HY).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};zv=new WeakMap,Rk=new WeakMap,ch=new WeakMap,tg=new WeakMap,Bv=new WeakMap,Ca=new WeakMap,Dk=new WeakMap,Fk=new WeakMap,ng=new WeakMap,Uo=new WeakMap,no=new WeakMap,ri=new WeakMap,Vv=new WeakMap,uh=new WeakMap,Ii=new WeakMap,jv=new WeakMap,Wo=new WeakMap,Pk=new WeakMap,Ut=new WeakSet,uM=function(){const t=new sM(x(this,ch),.001);L(this,Uo,t.getOutlines()),[this.x,this.y,this.width,this.height]=x(this,Uo).box;const r=new sM(x(this,ch),.0025,.001,this._uiManager.direction==="ltr");L(this,Ca,r.getOutlines());const{lastPoint:s}=x(this,Ca);L(this,Vv,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},nA=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var h,d;if(L(this,Uo,t),L(this,Ca,t.getNewOutline(x(this,Wo)/2+1.5,.0025)),r>=0)L(this,no,r),L(this,tg,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),L(this,Ii,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:x(this,Ca).box,path:{d:x(this,Ca).toSVGPath()}},!0));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(x(this,no),{bbox:U(h=An,tl,Q0).call(h,x(this,Uo).box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(x(this,Ii),{bbox:U(d=An,tl,Q0).call(d,x(this,Ca).box,f),path:{d:x(this,Ca).toSVGPath()}})}const[a,o,l,c]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[f,p]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*p/f,this.height=c*f/p;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[f,p]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*p/f,this.height=c*f/p;break}}const{lastPoint:u}=x(this,Ca);L(this,Vv,[(u[0]-a)/l,(u[1]-o)/c])},$Y=function(t){const r=(a,o)=>{var l,c;this.color=a,L(this,uh,o),(l=this.parent)==null||l.drawLayer.updateProperties(x(this,no),{root:{fill:a,"fill-opacity":o}}),(c=x(this,Bv))==null||c.updateColor(a)},s=this.color,i=x(this,uh);this.addCommands({cmd:r.bind(this,t,An._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},zY=function(t){const r=x(this,Wo),s=i=>{L(this,Wo,i),U(this,Ut,BY).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},BY=function(t){if(!x(this,ri))return;U(this,Ut,nA).call(this,{highlightOutlines:x(this,Uo).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},hM=function(){x(this,no)===null||!this.parent||(this.parent.drawLayer.remove(x(this,no)),L(this,no,null),this.parent.drawLayer.remove(x(this,Ii)),L(this,Ii,null))},Vp=function(t=this.parent){x(this,no)===null&&({id:Gi(this,no)._,clipPathId:Gi(this,tg)._}=t.drawLayer.draw({bbox:x(this,Uo).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":x(this,uh)},rootClass:{highlight:!0,free:x(this,ri)},path:{d:x(this,Uo).toSVGPath()}},!1,!0),L(this,Ii,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:x(this,ri)},bbox:x(this,Ca).box,path:{d:x(this,Ca).toSVGPath()}},x(this,ri))),x(this,ng)&&(x(this,ng).style.clipPath=x(this,tg)))},tl=new WeakSet,Q0=function([t,r,s,i],a){switch(a){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},VY=function(t){An._keyboardManager.exec(this,t)},rA=function(t){if(!x(this,zv))return;const r=window.getSelection();t?r.setPosition(x(this,zv),x(this,Rk)):r.setPosition(x(this,Dk),x(this,Fk))},o1=function(){return x(this,ri)?this.rotation:0},jY=function(){if(x(this,ri))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,a=x(this,ch),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:u,width:h,height:d}of a){const f=c*t+s,p=(1-u)*r+i;o[l]=o[l+4]=f,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=f+h*t,o[l+5]=o[l+7]=p-d*r,l+=8}return o},UY=function(t){return x(this,Uo).serialize(t,U(this,Ut,o1).call(this))},WY=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},GY=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},HY=function(t){const{color:r}=this._initialData;return t.color.some((s,i)=>s!==r[i])},j(An,tl),yt(An,"_defaultColor",null),yt(An,"_defaultOpacity",1),yt(An,"_defaultThickness",12),yt(An,"_type","highlight"),yt(An,"_editorType",Gt.HIGHLIGHT),yt(An,"_freeHighlightId",-1),yt(An,"_freeHighlight",null),yt(An,"_freeHighlightClipId","");let dN=An;var rg;class dge{constructor(){j(this,rg,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))this.updateProperty(t,r)}updateSVGProperty(e,t){x(this,rg)[e]=t}toSVGProperties(){const e=x(this,rg);return L(this,rg,Object.create(null)),{root:e}}reset(){L(this,rg,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){qn("Not implemented")}}rg=new WeakMap;var ro,Uv,$s,sg,ig,Kd,Xd,Yd,ag,Tn,fM,pM,mM,l1,qY,sA,c1,J0;const st=class st extends Cr{constructor(t){super(t);j(this,Tn);j(this,ro,null);j(this,Uv);yt(this,"_drawId",null);L(this,Uv,t.mustBeCommitted||!1),t.drawOutlines&&(U(this,Tn,fM).call(this,t),U(this,Tn,l1).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,a]of Object.entries(r))s.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){qn("Not implemented")}static get typesMap(){qn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(x(st,$s).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,a=i[r],o=l=>{var u;i.updateProperty(r,l);const c=x(this,ro).updateProperty(r,l);c&&U(this,Tn,c1).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties(x(this,ro).getPathResizingSVGProperties(U(this,Tn,sA).call(this)),{bbox:U(this,Tn,J0).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties(x(this,ro).getPathResizedSVGProperties(U(this,Tn,sA).call(this)),{bbox:U(this,Tn,J0).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:U(this,Tn,J0).call(this,t,r)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties(x(this,ro).getPathTranslatedSVGProperties(U(this,Tn,sA).call(this),this.parentDimensions),{bbox:U(this,Tn,J0).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,x(this,Uv)&&(L(this,Uv,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){U(this,Tn,mM).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(U(this,Tn,l1).call(this),U(this,Tn,c1).call(this,x(this,ro).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),U(this,Tn,mM).call(this)):t&&(this._uiManager.addShouldRescale(this),U(this,Tn,l1).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties({bbox:U(this,Tn,J0).call(this)},x(this,ro).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&U(this,Tn,c1).call(this,x(this,ro).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const r=document.createElement("div");t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,r,s,i,a){qn("Not implemented")}static startDrawing(t,r,s,i){var y;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=i;if(x(st,Xd)&&x(st,Xd)!==u)return;const{viewport:{rotation:h}}=t,{width:d,height:f}=a.getBoundingClientRect(),p=L(st,sg,new AbortController),m=t.combinedSignal(p);if(x(st,Kd)||L(st,Kd,c),x(st,Xd)??L(st,Xd,u),window.addEventListener("pointerup",g=>{var v;x(st,Kd)===g.pointerId?this._endDraw(g):(v=x(st,Yd))==null||v.delete(g.pointerId)},{signal:m}),window.addEventListener("pointercancel",g=>{var v;x(st,Kd)===g.pointerId?this._currentParent.endDrawingSession():(v=x(st,Yd))==null||v.delete(g.pointerId)},{signal:m}),window.addEventListener("pointerdown",g=>{x(st,Xd)===g.pointerType&&((x(st,Yd)||L(st,Yd,new Set)).add(g.pointerId),x(st,$s).isCancellable()&&(x(st,$s).removeLastElement(),x(st,$s).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",oc,{signal:m}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),a.addEventListener("touchmove",g=>{g.timeStamp===x(st,ag)&&uo(g)},{signal:m}),t.toggleDrawing(),(y=r._editorUndoBar)==null||y.hide(),x(st,$s)){t.drawLayer.updateProperties(this._currentDrawId,x(st,$s).startNew(o,l,d,f,h));return}r.updateUIForDefaultProperties(this),L(st,$s,this.createDrawerInstance(o,l,d,f,h)),L(st,ig,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(x(st,ig).toSVGProperties(),x(st,$s).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(L(st,ag,-1),!x(st,$s))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(x(st,Kd)===i){if(((a=x(st,Yd))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,x(st,$s).add(r,s)),L(st,ag,t.timeStamp),uo(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,L(st,$s,null),L(st,ig,null),L(st,Xd,null),L(st,ag,NaN)),x(st,sg)&&(x(st,sg).abort(),L(st,sg,null),L(st,Kd,NaN),L(st,Yd,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),t&&r.drawLayer.updateProperties(this._currentDrawId,x(st,$s).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=x(st,$s),i=this._currentDrawId,a=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:pn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(pn.DRAW_STEP),!x(st,$s).isEmpty()){const{pageDimensions:[s,i],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:x(st,$s).getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:x(st,ig),mustBeCommitted:!t});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,a,o){qn("Not implemented")}static async deserialize(t,r,s){var h,d;const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=r.viewport,c=this.deserializeDraw(o,l,i,a,this._INNER_MARGIN,t),u=await super.deserialize(t,r,s);return u.createDrawingOptions(t),U(h=u,Tn,fM).call(h,{drawOutlines:c}),U(d=u,Tn,l1).call(d),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[r,s]=this.pageTranslation,[i,a]=this.pageDimensions;return x(this,ro).serialize([r,s,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ro=new WeakMap,Uv=new WeakMap,$s=new WeakMap,sg=new WeakMap,ig=new WeakMap,Kd=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,ag=new WeakMap,Tn=new WeakSet,fM=function({drawOutlines:t,drawId:r,drawingOptions:s}){L(this,ro,t),this._drawingOptions||(this._drawingOptions=s),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=U(this,Tn,pM).call(this,t,this.parent),U(this,Tn,c1).call(this,t.box)},pM=function(t,r){const{id:s}=r.drawLayer.draw(st._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},mM=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},l1=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=U(this,Tn,pM).call(this,x(this,ro),t)}},qY=function([t,r,s,i]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},sA=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},c1=function(t){if([this.x,this.y,this.width,this.height]=U(this,Tn,qY).call(this,t),this.div){this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}this._onResized()},J0=function(){const{x:t,y:r,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(l/c),i*(c/l),s*(l/c)];case 5:return[1-r,t,s*(l/c),i*(c/l)];case 6:return[1-t-i*(c/l),1-r,i*(c/l),s*(l/c)];case 7:return[r-s*(l/c),1-t-i*(c/l),s*(l/c),i*(c/l)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(c/l),r,i*(c/l),s*(l/c)];case 13:return[1-r-s*(l/c),t-i*(c/l),s*(l/c),i*(c/l)];case 14:return[1-t,1-r-s*(l/c),i*(c/l),s*(l/c)];case 15:return[r,1-t,s*(l/c),i*(c/l)];default:return[t,r,s,i]}},yt(st,"_currentDrawId",-1),yt(st,"_currentParent",null),j(st,$s,null),j(st,sg,null),j(st,ig,null),j(st,Kd,NaN),j(st,Xd,null),j(st,Yd,null),j(st,ag,NaN),yt(st,"_INNER_MARGIN",3);let dM=st;var Wc,zs,Bs,og,Wv,Ki,si,Go,lg,cg,ug,Gv,iA;class fge{constructor(e,t,r,s,i,a){j(this,Gv);j(this,Wc,new Float64Array(6));j(this,zs);j(this,Bs);j(this,og);j(this,Wv);j(this,Ki);j(this,si,"");j(this,Go,0);j(this,lg,new fN);j(this,cg);j(this,ug);L(this,cg,r),L(this,ug,s),L(this,og,i),L(this,Wv,a),[e,t]=U(this,Gv,iA).call(this,e,t);const o=L(this,zs,[NaN,NaN,NaN,NaN,e,t]);L(this,Ki,[e,t]),L(this,Bs,[{line:o,points:x(this,Ki)}]),x(this,Wc).set(o,0)}updateProperty(e,t){e==="stroke-width"&&L(this,Wv,t)}isEmpty(){return!x(this,Bs)||x(this,Bs).length===0}isCancellable(){return x(this,Ki).length<=10}add(e,t){[e,t]=U(this,Gv,iA).call(this,e,t);const[r,s,i,a]=x(this,Wc).subarray(2,6),o=e-i,l=t-a;return Math.hypot(x(this,cg)*o,x(this,ug)*l)<=2?null:(x(this,Ki).push(e,t),isNaN(r)?(x(this,Wc).set([i,a,e,t],2),x(this,zs).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(x(this,Wc)[0])&&x(this,zs).splice(6,6),x(this,Wc).set([r,s,i,a,e,t],0),x(this,zs).push(...tt.createBezierPoints(r,s,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(x(this,Ki).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){L(this,cg,r),L(this,ug,s),L(this,og,i),[e,t]=U(this,Gv,iA).call(this,e,t);const a=L(this,zs,[NaN,NaN,NaN,NaN,e,t]);L(this,Ki,[e,t]);const o=x(this,Bs).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),x(this,Bs).push({line:a,points:x(this,Ki)}),x(this,Wc).set(a,0),L(this,Go,0),this.toSVGPath(),null}getLastElement(){return x(this,Bs).at(-1)}setLastElement(e){return x(this,Bs)?(x(this,Bs).push(e),L(this,zs,e.line),L(this,Ki,e.points),L(this,Go,0),{path:{d:this.toSVGPath()}}):x(this,lg).setLastElement(e)}removeLastElement(){if(!x(this,Bs))return x(this,lg).removeLastElement();x(this,Bs).pop(),L(this,si,"");for(let e=0,t=x(this,Bs).length;e<t;e++){const{line:r,points:s}=x(this,Bs)[e];L(this,zs,r),L(this,Ki,s),L(this,Go,0),this.toSVGPath()}return{path:{d:x(this,si)}}}toSVGPath(){const e=tt.svgRound(x(this,zs)[4]),t=tt.svgRound(x(this,zs)[5]);if(x(this,Ki).length===2)return L(this,si,`${x(this,si)} M ${e} ${t} Z`),x(this,si);if(x(this,Ki).length<=6){const s=x(this,si).lastIndexOf("M");L(this,si,`${x(this,si).slice(0,s)} M ${e} ${t}`),L(this,Go,6)}if(x(this,Ki).length===4){const s=tt.svgRound(x(this,zs)[10]),i=tt.svgRound(x(this,zs)[11]);return L(this,si,`${x(this,si)} L ${s} ${i}`),L(this,Go,12),x(this,si)}const r=[];x(this,Go)===0&&(r.push(`M ${e} ${t}`),L(this,Go,6));for(let s=x(this,Go),i=x(this,zs).length;s<i;s+=6){const[a,o,l,c,u,h]=x(this,zs).slice(s,s+6).map(tt.svgRound);r.push(`C${a} ${o} ${l} ${c} ${u} ${h}`)}return L(this,si,x(this,si)+r.join(" ")),L(this,Go,x(this,zs).length),x(this,si)}getOutlines(e,t,r,s){const i=x(this,Bs).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),x(this,lg).build(x(this,Bs),e,t,r,x(this,og),x(this,Wv),s),L(this,Wc,null),L(this,zs,null),L(this,Bs,null),L(this,si,null),x(this,lg)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Wc=new WeakMap,zs=new WeakMap,Bs=new WeakMap,og=new WeakMap,Wv=new WeakMap,Ki=new WeakMap,si=new WeakMap,Go=new WeakMap,lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,Gv=new WeakSet,iA=function(e,t){return tt._normalizePoint(e,t,x(this,cg),x(this,ug),x(this,og))};var Xi,Ok,Lk,so,Gc,Hc,Hv,qv,Kv,li,Pu,KY,XY,YY;const qj=class qj extends tt{constructor(){super(...arguments);j(this,li);j(this,Xi);j(this,Ok,0);j(this,Lk);j(this,so);j(this,Gc);j(this,Hc);j(this,Hv);j(this,qv);j(this,Kv)}build(t,r,s,i,a,o,l){L(this,Gc,r),L(this,Hc,s),L(this,Hv,i),L(this,qv,a),L(this,Kv,o),L(this,Lk,l??0),L(this,so,t),U(this,li,XY).call(this)}setLastElement(t){return x(this,so).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return x(this,so).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of x(this,so)){if(t.push(`M${tt.svgRound(r[4])} ${tt.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12){t.push(`L${tt.svgRound(r[10])} ${tt.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[a,o,l,c,u,h]=r.subarray(s,s+6).map(tt.svgRound);t.push(`C${a} ${o} ${l} ${c} ${u} ${h}`)}}return t.join("")}serialize([t,r,s,i],a){const o=[],l=[],[c,u,h,d]=U(this,li,KY).call(this);let f,p,m,y,g,v,b,w,C;switch(x(this,qv)){case 0:C=tt._rescale,f=t,p=r+i,m=s,y=-i,g=t+c*s,v=r+(1-u-d)*i,b=t+(c+h)*s,w=r+(1-u)*i;break;case 90:C=tt._rescaleAndSwap,f=t,p=r,m=s,y=i,g=t+u*s,v=r+c*i,b=t+(u+d)*s,w=r+(c+h)*i;break;case 180:C=tt._rescale,f=t+s,p=r,m=-s,y=i,g=t+(1-c-h)*s,v=r+u*i,b=t+(1-c)*s,w=r+(u+d)*i;break;case 270:C=tt._rescaleAndSwap,f=t+s,p=r+i,m=-s,y=-i,g=t+(1-u-d)*s,v=r+(1-c-h)*i,b=t+(1-u)*s,w=r+(1-c)*i;break}for(const{line:I,points:T}of x(this,so))o.push(C(I,f,p,m,y,a?new Array(I.length):null)),l.push(C(T,f,p,m,y,a?new Array(T.length):null));return{lines:o,points:l,rect:[g,v,b,w]}}static deserialize(t,r,s,i,a,{paths:{lines:o,points:l},rotation:c,thickness:u}){const h=[];let d,f,p,m,y;switch(c){case 0:y=tt._rescale,d=-t/s,f=r/i+1,p=1/s,m=-1/i;break;case 90:y=tt._rescaleAndSwap,d=-r/i,f=-t/s,p=1/i,m=1/s;break;case 180:y=tt._rescale,d=t/s+1,f=-r/i,p=-1/s,m=1/i;break;case 270:y=tt._rescaleAndSwap,d=r/i+1,f=t/s+1,p=-1/i,m=-1/s;break}if(!o){o=[];for(const v of l){const b=v.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const w=new Float32Array(3*(b-2));o.push(w);let[C,I,T,E]=v.subarray(0,4);w.set([NaN,NaN,NaN,NaN,C,I],0);for(let A=4;A<b;A+=2){const N=v[A],F=v[A+1];w.set(tt.createBezierPoints(C,I,T,E,N,F),(A-2)*3),[C,I,T,E]=[T,E,N,F]}}}for(let v=0,b=o.length;v<b;v++)h.push({line:y(o[v].map(w=>w??NaN),d,f,p,m),points:y(l[v].map(w=>w??NaN),d,f,p,m)});const g=new qj;return g.build(h,s,i,1,c,u,a),g}get box(){return x(this,Xi)}updateProperty(t,r){return t==="stroke-width"?U(this,li,YY).call(this,r):null}updateParentDimensions([t,r],s){const[i,a]=U(this,li,Pu).call(this);L(this,Gc,t),L(this,Hc,r),L(this,Hv,s);const[o,l]=U(this,li,Pu).call(this),c=o-i,u=l-a,h=x(this,Xi);return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateRotation(t){return L(this,Ok,t),{path:{transform:this.rotationTransform}}}get viewBox(){return x(this,Xi).map(tt.svgRound).join(" ")}get defaultProperties(){const[t,r]=x(this,Xi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${tt.svgRound(t)} ${tt.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=x(this,Xi);let s=0,i=0,a=0,o=0,l=0,c=0;switch(x(this,Ok)){case 90:i=r/t,a=-t/r,l=t;break;case 180:s=-1,o=-1,l=t,c=r;break;case 270:i=-r/t,a=t/r,c=r;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${tt.svgRound(l)} ${tt.svgRound(c)})`}getPathResizingSVGProperties([t,r,s,i]){const[a,o]=U(this,li,Pu).call(this),[l,c,u,h]=x(this,Xi);if(Math.abs(u-a)<=tt.PRECISION||Math.abs(h-o)<=tt.PRECISION){const y=t+s/2-(l+u/2),g=r+i/2-(c+h/2);return{path:{"transform-origin":`${tt.svgRound(t)} ${tt.svgRound(r)}`,transform:`${this.rotationTransform} translate(${y} ${g})`}}}const d=(s-2*a)/(u-2*a),f=(i-2*o)/(h-2*o),p=u/s,m=h/i;return{path:{"transform-origin":`${tt.svgRound(l)} ${tt.svgRound(c)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${tt.svgRound(a)} ${tt.svgRound(o)}) scale(${d} ${f}) translate(${tt.svgRound(-a)} ${tt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[a,o]=U(this,li,Pu).call(this),l=x(this,Xi),[c,u,h,d]=l;if(l[0]=t,l[1]=r,l[2]=s,l[3]=i,Math.abs(h-a)<=tt.PRECISION||Math.abs(d-o)<=tt.PRECISION){const g=t+s/2-(c+h/2),v=r+i/2-(u+d/2);for(const{line:b,points:w}of x(this,so))tt._translate(b,g,v,b),tt._translate(w,g,v,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${tt.svgRound(t)} ${tt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(s-2*a)/(h-2*a),p=(i-2*o)/(d-2*o),m=-f*(c+a)+t+a,y=-p*(u+o)+r+o;if(f!==1||p!==1||m!==0||y!==0)for(const{line:g,points:v}of x(this,so))tt._rescale(g,m,y,f,p,g),tt._rescale(v,m,y,f,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${tt.svgRound(t)} ${tt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,a]=s,o=x(this,Xi),l=t-o[0],c=r-o[1];if(x(this,Gc)===i&&x(this,Hc)===a)for(const{line:u,points:h}of x(this,so))tt._translate(u,l,c,u),tt._translate(h,l,c,h);else{const u=x(this,Gc)/i,h=x(this,Hc)/a;L(this,Gc,i),L(this,Hc,a);for(const{line:d,points:f}of x(this,so))tt._rescale(d,l,c,u,h,d),tt._rescale(f,l,c,u,h,f);o[2]*=u,o[3]*=h}return o[0]=t,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${tt.svgRound(t)} ${tt.svgRound(r)}`}}}get defaultSVGProperties(){const t=x(this,Xi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${tt.svgRound(t[0])} ${tt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Xi=new WeakMap,Ok=new WeakMap,Lk=new WeakMap,so=new WeakMap,Gc=new WeakMap,Hc=new WeakMap,Hv=new WeakMap,qv=new WeakMap,Kv=new WeakMap,li=new WeakSet,Pu=function(t=x(this,Kv)){const r=x(this,Lk)+t/2*x(this,Hv);return x(this,qv)%180===0?[r/x(this,Gc),r/x(this,Hc)]:[r/x(this,Hc),r/x(this,Gc)]},KY=function(){const[t,r,s,i]=x(this,Xi),[a,o]=U(this,li,Pu).call(this,0);return[t+a,r+o,s-2*a,i-2*o]},XY=function(){const t=L(this,Xi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of x(this,so)){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6){const[u,h]=i.subarray(l,l+2);t[0]=Math.min(t[0],u),t[1]=Math.min(t[1],h),t[2]=Math.max(t[2],u),t[3]=Math.max(t[3],h)}continue}let a=i[4],o=i[5];for(let l=6,c=i.length;l<c;l+=6){const[u,h,d,f,p,m]=i.subarray(l,l+6);pt.bezierBoundingBox(a,o,u,h,d,f,p,m,t),a=p,o=m}}const[r,s]=U(this,li,Pu).call(this);t[0]=Math.min(1,Math.max(0,t[0]-r)),t[1]=Math.min(1,Math.max(0,t[1]-s)),t[2]=Math.min(1,Math.max(0,t[2]+r)),t[3]=Math.min(1,Math.max(0,t[3]+s)),t[2]-=t[0],t[3]-=t[1]},YY=function(t){const[r,s]=U(this,li,Pu).call(this);L(this,Kv,t);const[i,a]=U(this,li,Pu).call(this),[o,l]=[i-r,a-s],c=x(this,Xi);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c};let fN=qj;var Xv;const Kj=class Kj extends dge{constructor(t){super();j(this,Xv);L(this,Xv,t),super.updateProperties({fill:"none",stroke:Cr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,r){t==="stroke-width"&&(r??(r=this["stroke-width"]),r*=x(this,Xv).realScale),super.updateSVGProperty(t,r)}clone(){const t=new Kj(x(this,Xv));return t.updateAll(this),t}};Xv=new WeakMap;let gM=Kj;var $_,ZY;const Cy=class Cy extends dM{constructor(t){super({...t,name:"inkEditor"});j(this,$_);this._willKeepAspectRatio=!0}static initialize(t,r){Cr.initialize(t,r),this._defaultDrawingOptions=new gM(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return en(this,"typesMap",new Map([[pn.INK_THICKNESS,"stroke-width"],[pn.INK_COLOR,"stroke"],[pn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,a){return new fge(t,r,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,a,o){return fN.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){let i=null;if(t instanceof k5){const{data:{inkLists:o,rect:l,rotation:c,id:u,color:h,opacity:d,borderStyle:{rawWidth:f},popupRef:p},parent:{page:{pageNumber:m}}}=t;i=t={annotationType:Gt.INK,color:Array.from(h),thickness:f,opacity:d,paths:{points:o},boxes:null,pageIndex:m-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:p}}const a=await super.deserialize(t,r,s);return a.annotationElementId=t.id||null,a._initialData=i,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Cy.getDefaultDrawingOptions({stroke:pt.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c={annotationType:Gt.INK,color:Cr._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:r,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?c:this.annotationElementId&&!U(this,$_,ZY).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:r,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r}),null}};$_=new WeakSet,ZY=function(t){const{color:r,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==r[l])||t.thickness!==s||t.opacity!==i||t.pageIndex!==a},yt(Cy,"_type","ink"),yt(Cy,"_editorType",Gt.INK),yt(Cy,"_defaultDrawingOptions",null);let yM=Cy;var wr,ii,Zd,hh,Qd,Yv,qc,Kc,io,Zv,In,u1,h1,aA,xM,oA,bM,lA,QY;const rS=class rS extends Cr{constructor(t){super({...t,name:"stampEditor"});j(this,In);j(this,wr,null);j(this,ii,null);j(this,Zd,null);j(this,hh,null);j(this,Qd,null);j(this,Yv,"");j(this,qc,null);j(this,Kc,null);j(this,io,!1);j(this,Zv,!1);L(this,hh,t.bitmapUrl),L(this,Qd,t.bitmapFile)}static initialize(t,r){Cr.initialize(t,r)}static get supportedTypes(){return en(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(r=>`image/${r}`))}static get supportedTypesStr(){return en(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,r){r.pasteEditor(Gt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;x(this,ii)&&(L(this,wr,null),this._uiManager.imageManager.deleteId(x(this,ii)),(t=x(this,qc))==null||t.remove(),L(this,qc,null),x(this,Kc)&&(clearTimeout(x(this,Kc)),L(this,Kc,null))),super.remove()}rebuild(){if(!this.parent){x(this,ii)&&U(this,In,aA).call(this);return}super.rebuild(),this.div!==null&&(x(this,ii)&&x(this,qc)===null&&U(this,In,aA).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(x(this,Zd)||x(this,wr)||x(this,hh)||x(this,Qd)||x(this,ii))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;if(this.width&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),x(this,wr)?U(this,In,xM).call(this):U(this,In,aA).call(this),this.width&&!this.annotationElementId){const[s,i]=this.parentDimensions;this.setAt(t*s,r*i,this.width*s,this.height*i)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;x(this,Kc)!==null&&clearTimeout(x(this,Kc)),L(this,Kc,setTimeout(()=>{L(this,Kc,null),U(this,In,bM).call(this)},200))}copyCanvas(t,r,s=!1){var f;t||(t=224);const{width:i,height:a}=x(this,wr),o=new gL;let l=x(this,wr),c=i,u=a,h=null;if(r){if(i>r||a>r){const E=Math.min(r/i,r/a);c=Math.floor(i*E),u=Math.floor(a*E)}h=document.createElement("canvas");const p=h.width=Math.ceil(c*o.sx),m=h.height=Math.ceil(u*o.sy);x(this,io)||(l=U(this,In,oA).call(this,p,m));const y=h.getContext("2d");y.filter=this._uiManager.hcmFilter;let g="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":(f=window.matchMedia)!=null&&f.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",v="#42414d");const b=15,w=b*o.sx,C=b*o.sy,I=new OffscreenCanvas(w*2,C*2),T=I.getContext("2d");T.fillStyle=g,T.fillRect(0,0,w*2,C*2),T.fillStyle=v,T.fillRect(0,0,w,C),T.fillRect(w,C,w,C),y.fillStyle=y.createPattern(I,"repeat"),y.fillRect(0,0,p,m),y.drawImage(l,0,0,l.width,l.height,0,0,p,m)}let d=null;if(s){let p,m;if(o.symmetric&&l.width<t&&l.height<t)p=l.width,m=l.height;else if(l=x(this,wr),i>t||a>t){const v=Math.min(t/i,t/a);p=Math.floor(i*v),m=Math.floor(a*v),x(this,io)||(l=U(this,In,oA).call(this,p,m))}const g=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});g.drawImage(l,0,0,l.width,l.height,0,0,p,m),d={width:p,height:m,data:g.getImageData(0,0,p,m).data}}return{canvas:h,width:c,height:u,imageData:d}}getImageForAltText(){return x(this,qc)}static async deserialize(t,r,s){var m;let i=null;if(t instanceof xY){const{data:{rect:y,rotation:g,id:v,structParent:b,popupRef:w},container:C,parent:{page:{pageNumber:I}}}=t,T=C.querySelector("canvas"),E=s.imageManager.getFromCanvas(C.id,T);T.remove();const A=((m=await r._structTree.getAriaAttributes(`${m5}${v}`))==null?void 0:m.get("aria-label"))||"";i=t={annotationType:Gt.STAMP,bitmapId:E.id,bitmap:E.bitmap,pageIndex:I-1,rect:y.slice(0),rotation:g,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:A},isSvg:!1,structParent:b,popupRef:w}}const a=await super.deserialize(t,r,s),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=t;u&&s.imageManager.isValidId(u)?(L(a,ii,u),l&&L(a,wr,l)):L(a,hh,c),L(a,io,h);const[f,p]=a.pageDimensions;return a.width=(o[2]-o[0])/f,a.height=(o[3]-o[1])/p,a.annotationElementId=t.id||null,d&&(a.altTextData=d),a._initialData=i,L(a,Zv,!!i),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Gt.STAMP,bitmapId:x(this,ii),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:x(this,io),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=U(this,In,lA).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=U(this,In,QY).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,r===null)return s;r.stamps||(r.stamps=new Map);const o=x(this,io)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(x(this,ii)))r.stamps.set(x(this,ii),{area:o,serialized:s}),s.bitmap=U(this,In,lA).call(this,!1);else if(x(this,io)){const l=r.stamps.get(x(this,ii));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=U(this,In,lA).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};wr=new WeakMap,ii=new WeakMap,Zd=new WeakMap,hh=new WeakMap,Qd=new WeakMap,Yv=new WeakMap,qc=new WeakMap,Kc=new WeakMap,io=new WeakMap,Zv=new WeakMap,In=new WeakSet,u1=function(t,r=!1){if(!t){this.remove();return}L(this,wr,t.bitmap),r||(L(this,ii,t.id),L(this,io,t.isSvg)),t.file&&L(this,Yv,t.file.name),U(this,In,xM).call(this)},h1=function(){if(L(this,Zd,null),this._uiManager.enableWaiting(!1),!!x(this,qc)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,wr)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,wr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},aA=function(){if(x(this,ii)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(x(this,ii)).then(s=>U(this,In,u1).call(this,s,!0)).finally(()=>U(this,In,h1).call(this));return}if(x(this,hh)){const s=x(this,hh);L(this,hh,null),this._uiManager.enableWaiting(!0),L(this,Zd,this._uiManager.imageManager.getFromUrl(s).then(i=>U(this,In,u1).call(this,i)).finally(()=>U(this,In,h1).call(this)));return}if(x(this,Qd)){const s=x(this,Qd);L(this,Qd,null),this._uiManager.enableWaiting(!0),L(this,Zd,this._uiManager.imageManager.getFromFile(s).then(i=>U(this,In,u1).call(this,i)).finally(()=>U(this,In,h1).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=rS.supportedTypesStr;const r=this._uiManager._signal;L(this,Zd,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),U(this,In,u1).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>U(this,In,h1).call(this))),t.click()},xM=function(){var h;const{div:t}=this;let{width:r,height:s}=x(this,wr);const[i,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*i,s=this.height*a;else if(r>o*i||s>o*a){const d=Math.min(o*i/r,o*a/s);r*=d,s*=d}const[l,c]=this.parentDimensions;this.setDims(r*l/i,s*c/a),this._uiManager.enableWaiting(!1);const u=L(this,qc,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=r/i,this.height=s/a,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),U(this,In,bM).call(this),x(this,Zv)||(this.parent.addUndoableEditor(this),L(this,Zv,!0)),this._reportTelemetry({action:"inserted_image"}),x(this,Yv)&&u.setAttribute("aria-label",x(this,Yv))},oA=function(t,r){const{width:s,height:i}=x(this,wr);let a=s,o=i,l=x(this,wr);for(;a>2*t||o>2*r;){const c=a,u=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,c,u,0,0,a,o),l=h.transferToImageBitmap()}return l},bM=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,a=new gL,o=Math.ceil(s*t*a.sx),l=Math.ceil(i*r*a.sy),c=x(this,qc);if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const u=x(this,io)?x(this,wr):U(this,In,oA).call(this,o,l),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(u,0,0,u.width,u.height,0,0,o,l)},lA=function(t){if(t){if(x(this,io)){const i=this._uiManager.imageManager.getSvgUrl(x(this,ii));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=x(this,wr),r.getContext("2d").drawImage(x(this,wr),0,0),r.toDataURL()}if(x(this,io)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Mf.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Mf.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(x(this,wr),0,0,x(this,wr).width,x(this,wr).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(x(this,wr))},QY=function(t){var o;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},yt(rS,"_type","stamp"),yt(rS,"_editorType",Gt.STAMP);let vM=rS;var hg,Qv,Xc,Jd,dh,Ho,ef,Jv,dg,jl,fh,Ai,ph,ut,tf,fr,JY,Nc,SM,kM,cA;const Nl=class Nl{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}){j(this,fr);j(this,hg);j(this,Qv,!1);j(this,Xc,null);j(this,Jd,null);j(this,dh,null);j(this,Ho,new Map);j(this,ef,!1);j(this,Jv,!1);j(this,dg,!1);j(this,jl,null);j(this,fh,null);j(this,Ai,null);j(this,ph,null);j(this,ut);const h=[...x(Nl,tf).values()];if(!Nl._initialized){Nl._initialized=!0;for(const d of h)d.initialize(u,e)}e.registerEditorTypes(h),L(this,ut,e),this.pageIndex=t,this.div=r,L(this,hg,i),L(this,Xc,a),this.viewport=c,L(this,Ai,l),this.drawLayer=o,this._structTree=s,x(this,ut).addLayer(this)}get isEmpty(){return x(this,Ho).size===0}get isInvisible(){return this.isEmpty&&x(this,ut).getMode()===Gt.NONE}updateToolbar(e){x(this,ut).updateToolbar(e)}updateMode(e=x(this,ut).getMode()){switch(U(this,fr,cA).call(this),e){case Gt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Gt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Gt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of x(Nl,tf).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=x(this,Ai))==null?void 0:t.div)}setEditingState(e){x(this,ut).setEditingState(e)}addCommands(e){x(this,ut).addCommands(e)}cleanUndoStack(e){x(this,ut).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=x(this,Xc))==null||t.div.classList.toggle("disabled",!e)}async enable(){L(this,dg,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of x(this,Ho).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(x(this,ut).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!x(this,Xc)){L(this,dg,!1);return}const t=x(this,Xc).getEditableAnnotations();for(const r of t){if(r.hide(),x(this,ut).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}L(this,dg,!1)}disable(){var s;L(this,Jv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of x(this,Ho).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(x(this,Xc)){const i=x(this,Xc).getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(x(this,ut).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(x(this,ut).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}U(this,fr,cA).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of x(Nl,tf).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),L(this,Jv,!1)}getEditableAnnotation(e){var t;return((t=x(this,Xc))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){x(this,ut).getActive()!==e&&x(this,ut).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=x(this,Ai))!=null&&e.div&&!x(this,ph)){L(this,ph,new AbortController);const t=x(this,ut).combinedSignal(x(this,ph));x(this,Ai).div.addEventListener("pointerdown",U(this,fr,JY).bind(this),{signal:t}),x(this,Ai).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=x(this,Ai))!=null&&e.div&&x(this,ph)&&(x(this,ph).abort(),L(this,ph,null),x(this,Ai).div.classList.remove("highlighting"))}enableClick(){if(x(this,Jd))return;L(this,Jd,new AbortController);const e=x(this,ut).combinedSignal(x(this,Jd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=x(this,Jd))==null||e.abort(),L(this,Jd,null)}attach(e){x(this,Ho).set(e.id,e);const{annotationElementId:t}=e;t&&x(this,ut).isDeletedAnnotationElement(t)&&x(this,ut).removeDeletedAnnotationElement(e)}detach(e){var t;x(this,Ho).delete(e.id),(t=x(this,hg))==null||t.removePointerInTextLayer(e.contentDiv),!x(this,Jv)&&e.annotationElementId&&x(this,ut).addDeletedAnnotationElement(e)}remove(e){this.detach(e),x(this,ut).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(x(this,ut).addDeletedAnnotationElement(e.annotationElementId),Cr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),x(this,ut).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!x(this,dg)),x(this,ut).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!x(this,dh)&&(e._focusEventsAllowed=!1,L(this,dh,setTimeout(()=>{L(this,dh,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:x(this,ut)._signal}),t.focus())},0))),e._structTreeParentId=(r=x(this,hg))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return x(this,ut).getId()}combinedSignal(e){return x(this,ut).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=x(this,fr,Nc))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){x(this,ut).updateToolbar(e),x(this,ut).updateMode(e);const{offsetX:r,offsetY:s}=U(this,fr,kM).call(this),i=this.getNextId(),a=U(this,fr,SM).call(this,{parent:this,id:i,x:r,y:s,uiManager:x(this,ut),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=x(Nl,tf).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,x(this,ut)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=U(this,fr,SM).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:x(this,ut),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(U(this,fr,kM).call(this),!0)}setSelected(e){x(this,ut).setSelected(e)}toggleSelected(e){x(this,ut).toggleSelected(e)}unselect(e){x(this,ut).unselect(e)}pointerup(e){var r;const{isMac:t}=na.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&x(this,ef)&&(L(this,ef,!1),!((r=x(this,fr,Nc))!=null&&r.isDrawer&&x(this,fr,Nc).supportMultipleDrawings))){if(!x(this,Qv)){L(this,Qv,!0);return}if(x(this,ut).getMode()===Gt.STAMP){x(this,ut).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var s;if(x(this,ut).getMode()===Gt.HIGHLIGHT&&this.enableTextSelection(),x(this,ef)){L(this,ef,!1);return}const{isMac:t}=na.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(L(this,ef,!0),(s=x(this,fr,Nc))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=x(this,ut).getActive();L(this,Qv,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus(),x(this,jl)){x(this,fr,Nc).startDrawing(this,x(this,ut),!1,e);return}x(this,ut).setCurrentDrawingSession(this),L(this,jl,new AbortController);const t=x(this,ut).combinedSignal(x(this,jl));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(L(this,fh,null),this.commitOrRemove())},{signal:t}),x(this,fr,Nc).startDrawing(this,x(this,ut),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&L(this,fh,t);return}x(this,fh)&&setTimeout(()=>{var t;(t=x(this,fh))==null||t.focus(),L(this,fh,null)},0)}endDrawingSession(e=!1){return x(this,jl)?(x(this,ut).setCurrentDrawingSession(null),x(this,jl).abort(),L(this,jl,null),L(this,fh,null),x(this,fr,Nc).endDrawing(e)):null}findNewParent(e,t,r){const s=x(this,ut).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return x(this,jl)?(this.endDrawingSession(),!0):!1}onScaleChanging(){x(this,jl)&&x(this,fr,Nc).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=x(this,ut).getActive())==null?void 0:e.parent)===this&&(x(this,ut).commitOrRemove(),x(this,ut).setActiveEditor(null)),x(this,dh)&&(clearTimeout(x(this,dh)),L(this,dh,null));for(const r of x(this,Ho).values())(t=x(this,hg))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,x(this,Ho).clear(),x(this,ut).removeLayer(this)}render({viewport:e}){this.viewport=e,Ag(this.div,e);for(const t of x(this,ut).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){x(this,ut).commitOrRemove(),U(this,fr,cA).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Ag(this.div,{rotation:r}),t!==r)for(const s of x(this,Ho).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return x(this,ut).viewParameters.realScale}};hg=new WeakMap,Qv=new WeakMap,Xc=new WeakMap,Jd=new WeakMap,dh=new WeakMap,Ho=new WeakMap,ef=new WeakMap,Jv=new WeakMap,dg=new WeakMap,jl=new WeakMap,fh=new WeakMap,Ai=new WeakMap,ph=new WeakMap,ut=new WeakMap,tf=new WeakMap,fr=new WeakSet,JY=function(e){x(this,ut).unselectAll();const{target:t}=e;if(t===x(this,Ai).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&x(this,Ai).div.contains(t)){const{isMac:r}=na.platform;if(e.button!==0||e.ctrlKey&&r)return;x(this,ut).showAllEditors("highlight",!0,!0),x(this,Ai).div.classList.add("free"),this.toggleDrawing(),dN.startHighlighting(this,x(this,ut).direction==="ltr",{target:x(this,Ai).div,x:e.x,y:e.y}),x(this,Ai).div.addEventListener("pointerup",()=>{x(this,Ai).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:x(this,ut)._signal}),e.preventDefault()}},Nc=function(){return x(Nl,tf).get(x(this,ut).getMode())},SM=function(e){const t=x(this,fr,Nc);return t?new t.prototype.constructor(e):null},kM=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),c=(i+o)/2-e,u=(a+l)/2-t,[h,d]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:h,offsetY:d}},cA=function(){for(const e of x(this,Ho).values())e.isEmpty()&&e.remove()},yt(Nl,"_initialized",!1),j(Nl,tf,new Map([nM,yM,vM,dN].map(e=>[e._editorType,e])));let wM=Nl;var Ul,Mk,Yi,fg,z_,eZ,Tu,TM,tZ,EM;const Ci=class Ci{constructor({pageIndex:e}){j(this,Tu);j(this,Ul,null);j(this,Mk,0);j(this,Yi,new Map);j(this,fg,new Map);this.pageIndex=e}setParent(e){if(!x(this,Ul)){L(this,Ul,e);return}if(x(this,Ul)!==e){if(x(this,Yi).size>0)for(const t of x(this,Yi).values())t.remove(),e.append(t);L(this,Ul,e)}}static get _svgFactory(){return en(this,"_svgFactory",new S5)}draw(e,t=!1,r=!1){const s=Gi(this,Mk)._++,i=U(this,Tu,TM).call(this),a=Ci._svgFactory.createElement("defs");i.append(a);const o=Ci._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&x(this,fg).set(s,o);const c=r?U(this,Tu,tZ).call(this,a,l):null,u=Ci._svgFactory.createElement("use");return i.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(i,e),x(this,Yi).set(s,i),{id:s,clipPathId:`url(#${c})`}}drawOutline(e,t){const r=Gi(this,Mk)._++,s=U(this,Tu,TM).call(this),i=Ci._svgFactory.createElement("defs");s.append(i);const a=Ci._svgFactory.createElement("path");i.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Ci._svgFactory.createElement("mask");i.append(h),l=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const d=Ci._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Ci._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=Ci._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return s.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,e),x(this,Yi).set(r,s),r}finalizeDraw(e,t){x(this,fg).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:s,rootClass:i,path:a}=t,o=typeof e=="number"?x(this,Yi).get(e):e;if(o){if(r&&U(this,Tu,EM).call(this,o,r),s&&U(l=Ci,z_,eZ).call(l,o,s),i){const{classList:c}=o;for(const[u,h]of Object.entries(i))c.toggle(u,h)}if(a){const u=o.firstChild.firstChild;U(this,Tu,EM).call(this,u,a)}}}updateParent(e,t){if(t===this)return;const r=x(this,Yi).get(e);r&&(x(t,Ul).append(r),x(this,Yi).delete(e),x(t,Yi).set(e,r))}remove(e){x(this,fg).delete(e),x(this,Ul)!==null&&(x(this,Yi).get(e).remove(),x(this,Yi).delete(e))}destroy(){L(this,Ul,null);for(const e of x(this,Yi).values())e.remove();x(this,Yi).clear(),x(this,fg).clear()}};Ul=new WeakMap,Mk=new WeakMap,Yi=new WeakMap,fg=new WeakMap,z_=new WeakSet,eZ=function(e,[t,r,s,i]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},Tu=new WeakSet,TM=function(){const e=Ci._svgFactory.create(1,1,!0);return x(this,Ul).append(e),e.setAttribute("aria-hidden",!0),e},tZ=function(e,t){const r=Ci._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Ci._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},EM=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},j(Ci,z_);let CM=Ci;globalThis.pdfjsTestingUtils={HighlightOutliner:sM};var pge=_t.AbortException,mge=_t.AnnotationEditorLayer,gge=_t.AnnotationEditorParamsType,yge=_t.AnnotationEditorType,vge=_t.AnnotationEditorUIManager,xge=_t.AnnotationLayer,bge=_t.AnnotationMode,wge=_t.ColorPicker,Sge=_t.DOMSVGFactory,kge=_t.DrawLayer,Cge=_t.FeatureTest,Tge=_t.GlobalWorkerOptions,Ege=_t.ImageKind,Ige=_t.InvalidPDFException,Age=_t.MissingPDFException,Nge=_t.OPS,_ge=_t.OutputScale,Rge=_t.PDFDataRangeTransport,Dge=_t.PDFDateString,Fge=_t.PDFWorker,Pge=_t.PasswordResponses,Oge=_t.PermissionFlag,Lge=_t.PixelsPerInch,Mge=_t.RenderingCancelledException,$ge=_t.TextLayer,zge=_t.TouchManager,Bge=_t.UnexpectedResponseException,Vge=_t.Util,jge=_t.VerbosityLevel,Uge=_t.XfaLayer,Wge=_t.build,Gge=_t.createValidAbsoluteUrl,Hge=_t.fetchData,qge=_t.getDocument,Kge=_t.getFilenameFromUrl,Xge=_t.getPdfFilenameFromUrl,Yge=_t.getXfaPageViewport,Zge=_t.isDataScheme,Qge=_t.isPdfFile,Jge=_t.noContextMenu,e0e=_t.normalizeUnicode,t0e=_t.setLayerDimensions,n0e=_t.shadow,r0e=_t.stopEvent,s0e=_t.version;const i0e=Object.freeze(Object.defineProperty({__proto__:null,AbortException:pge,AnnotationEditorLayer:mge,AnnotationEditorParamsType:gge,AnnotationEditorType:yge,AnnotationEditorUIManager:vge,AnnotationLayer:xge,AnnotationMode:bge,ColorPicker:wge,DOMSVGFactory:Sge,DrawLayer:kge,FeatureTest:Cge,GlobalWorkerOptions:Tge,ImageKind:Ege,InvalidPDFException:Ige,MissingPDFException:Age,OPS:Nge,OutputScale:_ge,PDFDataRangeTransport:Rge,PDFDateString:Dge,PDFWorker:Fge,PasswordResponses:Pge,PermissionFlag:Oge,PixelsPerInch:Lge,RenderingCancelledException:Mge,TextLayer:$ge,TouchManager:zge,UnexpectedResponseException:Bge,Util:Vge,VerbosityLevel:jge,XfaLayer:Uge,build:Wge,createValidAbsoluteUrl:Gge,fetchData:Hge,getDocument:qge,getFilenameFromUrl:Kge,getPdfFilenameFromUrl:Xge,getXfaPageViewport:Yge,isDataScheme:Zge,isPdfFile:Qge,noContextMenu:Jge,normalizeUnicode:e0e,setLayerDimensions:t0e,shadow:n0e,stopEvent:r0e,version:s0e},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var IM=function(n,e){return IM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},IM(n,e)};function Ve(n,e){IM(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var At=function(){return At=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},At.apply(this,arguments)};function a0e(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Mt(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((r=r.apply(n,[])).next())})}function $t(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function mn(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)r[s]=i[a];return r}var xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d1=new Uint8Array(256);for(var AE=0;AE<xy.length;AE++)d1[xy.charCodeAt(AE)]=AE;var o0e=function(n){for(var e="",t=n.length,r=0;r<t;r+=3)e+=xy[n[r]>>2],e+=xy[(n[r]&3)<<4|n[r+1]>>4],e+=xy[(n[r+1]&15)<<2|n[r+2]>>6],e+=xy[n[r+2]&63];return t%3===2?e=e.substring(0,e.length-1)+"=":t%3===1&&(e=e.substring(0,e.length-2)+"=="),e},R8=function(n){var e=n.length*.75,t=n.length,r,s=0,i,a,o,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var c=new Uint8Array(e);for(r=0;r<t;r+=4)i=d1[n.charCodeAt(r)],a=d1[n.charCodeAt(r+1)],o=d1[n.charCodeAt(r+2)],l=d1[n.charCodeAt(r+3)],c[s++]=i<<2|a>>4,c[s++]=(a&15)<<4|o>>2,c[s++]=(o&3)<<6|l&63;return c},l0e=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,c0e=function(n){var e=n.trim(),t=e.substring(0,100),r=t.match(l0e);if(!r)return R8(e);var s=r[0],i=e.substring(s.length);return R8(i)},It=function(n){return n.charCodeAt(0)},u0e=function(n){return n.codePointAt(0)},qk=function(n,e){return Hl(n.toString(16),e,"0").toUpperCase()},fR=function(n){return qk(n,2)},wh=function(n){return String.fromCharCode(n)},h0e=function(n){return wh(parseInt(n,16))},Hl=function(n,e,t){for(var r="",s=0,i=e-n.length;s<i;s++)r+=t;return r+n},ui=function(n,e,t){for(var r=n.length,s=0;s<r;s++)e[t++]=n.charCodeAt(s);return r},d0e=function(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Kk=function(n){return n.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},f0e=["\\n","\\f","\\r","\\u000B"],nZ=function(n){return/^[\n\f\r\u000B]$/.test(n)},rZ=function(n){return n.split(/[\n\f\r\u000B]/)},sZ=function(n){return n.replace(/[\n\f\r\u000B]/g," ")},iZ=function(n,e){var t=n.charCodeAt(e),r,s=e+1,i=1;return t>=55296&&t<=56319&&n.length>s&&(r=n.charCodeAt(s),r>=56320&&r<=57343&&(i=2)),[n.slice(e,e+i),i]},p0e=function(n){for(var e=[],t=0,r=n.length;t<r;){var s=iZ(n,t),i=s[0],a=s[1];e.push(i),t+=a}return e},m0e=function(n){for(var e=f0e.join("|"),t=["$"],r=0,s=n.length;r<s;r++){var i=n[r];if(nZ(i))throw new TypeError("`wordBreak` must not include "+e);t.push(i===""?".":d0e(i))}var a=t.join("|");return new RegExp("("+e+")|((.*?)("+a+"))","gm")},g0e=function(n,e,t,r){for(var s=m0e(e),i=Kk(n).match(s),a="",o=0,l=[],c=function(){a!==""&&l.push(a),a="",o=0},u=0,h=i.length;u<h;u++){var d=i[u];if(nZ(d))c();else{var f=r(d);o+f>t&&c(),a+=d,o+=f}}return c(),l},y0e=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,aZ=function(n){var e=n.match(y0e);if(e){var t=e[1],r=e[2],s=r===void 0?"01":r,i=e[3],a=i===void 0?"01":i,o=e[4],l=o===void 0?"00":o,c=e[5],u=c===void 0?"00":c,h=e[6],d=h===void 0?"00":h,f=e[7],p=f===void 0?"Z":f,m=e[8],y=m===void 0?"00":m,g=e[9],v=g===void 0?"00":g,b=p==="Z"?"Z":""+p+y+":"+v,w=new Date(t+"-"+s+"-"+a+"T"+l+":"+u+":"+d+b);return w}},C5=function(n,e){for(var t,r=0,s;r<n.length;){var i=n.substring(r).match(e);if(!i)return{match:s,pos:r};s=i,r+=((t=i.index)!==null&&t!==void 0?t:0)+i[0].length}return{match:s,pos:r}},pN=function(n){return n[n.length-1]},AM=function(n){if(n instanceof Uint8Array)return n;for(var e=n.length,t=new Uint8Array(e),r=0;r<e;r++)t[r]=n.charCodeAt(r);return t},v0e=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=n.length,r=[],s=0;s<t;s++){var i=n[s];r[s]=i instanceof Uint8Array?i:AM(i)}for(var a=0,s=0;s<t;s++)a+=n[s].length;for(var o=new Uint8Array(a),l=0,c=0;c<t;c++)for(var u=r[c],h=0,d=u.length;h<d;h++)o[l++]=u[h];return o},x0e=function(n){for(var e=0,t=0,r=n.length;t<r;t++)e+=n[t].length;for(var s=new Uint8Array(e),i=0,t=0,r=n.length;t<r;t++){var a=n[t];s.set(a,i),i+=a.length}return s},oZ=function(n){for(var e="",t=0,r=n.length;t<r;t++)e+=wh(n[t]);return e},b0e=function(n,e){return n.id-e.id},w0e=function(n,e){for(var t=[],r=0,s=n.length;r<s;r++){var i=n[r],a=n[r-1];(r===0||e(i)!==e(a))&&t.push(i)}return t},M0=function(n){for(var e=n.length,t=0,r=Math.floor(e/2);t<r;t++){var s=t,i=e-t-1,a=n[t];n[s]=n[i],n[i]=a}return n},S0e=function(n){for(var e=0,t=0,r=n.length;t<r;t++)e+=n[t];return e},k0e=function(n,e){for(var t=new Array(e-n),r=0,s=t.length;r<s;r++)t[r]=n+r;return t},C0e=function(n,e){for(var t=new Array(e.length),r=0,s=e.length;r<s;r++)t[r]=n[e[r]];return t},T0e=function(n){return n instanceof Uint8Array||n instanceof ArrayBuffer||typeof n=="string"},Dw=function(n){if(typeof n=="string")return c0e(n);if(n instanceof ArrayBuffer)return new Uint8Array(n);if(n instanceof Uint8Array)return n;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},cx=function(){return new Promise(function(n){setTimeout(function(){return n()},0)})},E0e=function(n,e){e===void 0&&(e=!0);var t=[];e&&t.push(65279);for(var r=0,s=n.length;r<s;){var i=n.codePointAt(r);if(i<65536)t.push(i),r+=1;else if(i<1114112)t.push(lZ(i),cZ(i)),r+=2;else throw new Error("Invalid code point: 0x"+fR(i))}return new Uint16Array(t)},I0e=function(n){return n>=0&&n<=65535},A0e=function(n){return n>=65536&&n<=1114111},lZ=function(n){return Math.floor((n-65536)/1024)+55296},cZ=function(n){return(n-65536)%1024+56320},Sf;(function(n){n.BigEndian="BigEndian",n.LittleEndian="LittleEndian"})(Sf||(Sf={}));var Fw="".codePointAt(0),uZ=function(n,e){if(e===void 0&&(e=!0),n.length<=1)return String.fromCodePoint(Fw);for(var t=e?_0e(n):Sf.BigEndian,r=e?2:0,s=[];n.length-r>=2;){var i=F8(n[r++],n[r++],t);if(N0e(i))if(n.length-r<2)s.push(Fw);else{var a=F8(n[r++],n[r++],t);D8(a)?s.push(i,a):s.push(Fw)}else D8(i)?(r+=2,s.push(Fw)):s.push(i)}return r<n.length&&s.push(Fw),String.fromCodePoint.apply(String,s)},N0e=function(n){return n>=55296&&n<=56319},D8=function(n){return n>=56320&&n<=57343},F8=function(n,e,t){if(t===Sf.LittleEndian)return e<<8|n;if(t===Sf.BigEndian)return n<<8|e;throw new Error("Invalid byteOrder: "+t)},_0e=function(n){return hZ(n)?Sf.BigEndian:dZ(n)?Sf.LittleEndian:Sf.BigEndian},hZ=function(n){return n[0]===254&&n[1]===255},dZ=function(n){return n[0]===255&&n[1]===254},fZ=function(n){return hZ(n)||dZ(n)},R0e=function(n){var e=String(n);if(Math.abs(n)<1){var t=parseInt(n.toString().split("e-")[1]);if(t){var r=n<0;r&&(n*=-1),n*=Math.pow(10,t-1),e="0."+new Array(t).join("0")+n.toString().substring(2),r&&(e="-"+e)}}else{var t=parseInt(n.toString().split("+")[1]);t>20&&(t-=20,n/=Math.pow(10,t),e=n.toString()+new Array(t+1).join("0"))}return e},uA=function(n){return Math.ceil(n.toString(2).length/8)},$0=function(n){for(var e=new Uint8Array(uA(n)),t=1;t<=e.length;t++)e[t-1]=n>>(e.length-t)*8;return e},Xk=function(n){throw new Error(n)},Hh={};(function(n){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(i,a){return Object.prototype.hasOwnProperty.call(i,a)}n.assign=function(i){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)t(o,l)&&(i[l]=o[l])}}return i},n.shrinkBuf=function(i,a){return i.length===a?i:i.subarray?i.subarray(0,a):(i.length=a,i)};var r={arraySet:function(i,a,o,l,c){if(a.subarray&&i.subarray){i.set(a.subarray(o,o+l),c);return}for(var u=0;u<l;u++)i[c+u]=a[o+u]},flattenChunks:function(i){var a,o,l,c,u,h;for(l=0,a=0,o=i.length;a<o;a++)l+=i[a].length;for(h=new Uint8Array(l),c=0,a=0,o=i.length;a<o;a++)u=i[a],h.set(u,c),c+=u.length;return h}},s={arraySet:function(i,a,o,l,c){for(var u=0;u<l;u++)i[c+u]=a[o+u]},flattenChunks:function(i){return[].concat.apply([],i)}};n.setTyped=function(i){i?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(e)})(Hh);var Yk={},Eu={},Ox={},D0e=Hh,F0e=4,P8=0,O8=1,P0e=2;function Lx(n){for(var e=n.length;--e>=0;)n[e]=0}var O0e=0,pZ=1,L0e=2,M0e=3,$0e=258,T5=29,Zk=256,ES=Zk+1+T5,Oy=30,E5=19,mZ=2*ES+1,rm=15,hO=16,z0e=7,I5=256,gZ=16,yZ=17,vZ=18,NM=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],hA=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B0e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],xZ=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V0e=512,Bu=new Array((ES+2)*2);Lx(Bu);var B1=new Array(Oy*2);Lx(B1);var IS=new Array(V0e);Lx(IS);var AS=new Array($0e-M0e+1);Lx(AS);var A5=new Array(T5);Lx(A5);var mN=new Array(Oy);Lx(mN);function dO(n,e,t,r,s){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=s,this.has_stree=n&&n.length}var bZ,wZ,SZ;function fO(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}function kZ(n){return n<256?IS[n]:IS[256+(n>>>7)]}function NS(n,e){n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255}function Da(n,e,t){n.bi_valid>hO-t?(n.bi_buf|=e<<n.bi_valid&65535,NS(n,n.bi_buf),n.bi_buf=e>>hO-n.bi_valid,n.bi_valid+=t-hO):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)}function eu(n,e,t){Da(n,t[e*2],t[e*2+1])}function CZ(n,e){var t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1}function j0e(n){n.bi_valid===16?(NS(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)}function U0e(n,e){var t=e.dyn_tree,r=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,h,d,f,p,m=0;for(d=0;d<=rm;d++)n.bl_count[d]=0;for(t[n.heap[n.heap_max]*2+1]=0,c=n.heap_max+1;c<mZ;c++)u=n.heap[c],d=t[t[u*2+1]*2+1]+1,d>l&&(d=l,m++),t[u*2+1]=d,!(u>r)&&(n.bl_count[d]++,f=0,u>=o&&(f=a[u-o]),p=t[u*2],n.opt_len+=p*(d+f),i&&(n.static_len+=p*(s[u*2+1]+f)));if(m!==0){do{for(d=l-1;n.bl_count[d]===0;)d--;n.bl_count[d]--,n.bl_count[d+1]+=2,n.bl_count[l]--,m-=2}while(m>0);for(d=l;d!==0;d--)for(u=n.bl_count[d];u!==0;)h=n.heap[--c],!(h>r)&&(t[h*2+1]!==d&&(n.opt_len+=(d-t[h*2+1])*t[h*2],t[h*2+1]=d),u--)}}function TZ(n,e,t){var r=new Array(rm+1),s=0,i,a;for(i=1;i<=rm;i++)r[i]=s=s+t[i-1]<<1;for(a=0;a<=e;a++){var o=n[a*2+1];o!==0&&(n[a*2]=CZ(r[o]++,o))}}function W0e(){var n,e,t,r,s,i=new Array(rm+1);for(t=0,r=0;r<T5-1;r++)for(A5[r]=t,n=0;n<1<<NM[r];n++)AS[t++]=r;for(AS[t-1]=r,s=0,r=0;r<16;r++)for(mN[r]=s,n=0;n<1<<hA[r];n++)IS[s++]=r;for(s>>=7;r<Oy;r++)for(mN[r]=s<<7,n=0;n<1<<hA[r]-7;n++)IS[256+s++]=r;for(e=0;e<=rm;e++)i[e]=0;for(n=0;n<=143;)Bu[n*2+1]=8,n++,i[8]++;for(;n<=255;)Bu[n*2+1]=9,n++,i[9]++;for(;n<=279;)Bu[n*2+1]=7,n++,i[7]++;for(;n<=287;)Bu[n*2+1]=8,n++,i[8]++;for(TZ(Bu,ES+1,i),n=0;n<Oy;n++)B1[n*2+1]=5,B1[n*2]=CZ(n,5);bZ=new dO(Bu,NM,Zk+1,ES,rm),wZ=new dO(B1,hA,0,Oy,rm),SZ=new dO(new Array(0),B0e,0,E5,z0e)}function EZ(n){var e;for(e=0;e<ES;e++)n.dyn_ltree[e*2]=0;for(e=0;e<Oy;e++)n.dyn_dtree[e*2]=0;for(e=0;e<E5;e++)n.bl_tree[e*2]=0;n.dyn_ltree[I5*2]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0}function IZ(n){n.bi_valid>8?NS(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0}function G0e(n,e,t,r){IZ(n),NS(n,t),NS(n,~t),D0e.arraySet(n.pending_buf,n.window,e,t,n.pending),n.pending+=t}function L8(n,e,t,r){var s=e*2,i=t*2;return n[s]<n[i]||n[s]===n[i]&&r[e]<=r[t]}function pO(n,e,t){for(var r=n.heap[t],s=t<<1;s<=n.heap_len&&(s<n.heap_len&&L8(e,n.heap[s+1],n.heap[s],n.depth)&&s++,!L8(e,r,n.heap[s],n.depth));)n.heap[t]=n.heap[s],t=s,s<<=1;n.heap[t]=r}function M8(n,e,t){var r,s,i=0,a,o;if(n.last_lit!==0)do r=n.pending_buf[n.d_buf+i*2]<<8|n.pending_buf[n.d_buf+i*2+1],s=n.pending_buf[n.l_buf+i],i++,r===0?eu(n,s,e):(a=AS[s],eu(n,a+Zk+1,e),o=NM[a],o!==0&&(s-=A5[a],Da(n,s,o)),r--,a=kZ(r),eu(n,a,t),o=hA[a],o!==0&&(r-=mN[a],Da(n,r,o)));while(i<n.last_lit);eu(n,I5,e)}function _M(n,e){var t=e.dyn_tree,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems,a,o,l=-1,c;for(n.heap_len=0,n.heap_max=mZ,a=0;a<i;a++)t[a*2]!==0?(n.heap[++n.heap_len]=l=a,n.depth[a]=0):t[a*2+1]=0;for(;n.heap_len<2;)c=n.heap[++n.heap_len]=l<2?++l:0,t[c*2]=1,n.depth[c]=0,n.opt_len--,s&&(n.static_len-=r[c*2+1]);for(e.max_code=l,a=n.heap_len>>1;a>=1;a--)pO(n,t,a);c=i;do a=n.heap[1],n.heap[1]=n.heap[n.heap_len--],pO(n,t,1),o=n.heap[1],n.heap[--n.heap_max]=a,n.heap[--n.heap_max]=o,t[c*2]=t[a*2]+t[o*2],n.depth[c]=(n.depth[a]>=n.depth[o]?n.depth[a]:n.depth[o])+1,t[a*2+1]=t[o*2+1]=c,n.heap[1]=c++,pO(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],U0e(n,e),TZ(t,l,n.bl_count)}function $8(n,e,t){var r,s=-1,i,a=e[0*2+1],o=0,l=7,c=4;for(a===0&&(l=138,c=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)i=a,a=e[(r+1)*2+1],!(++o<l&&i===a)&&(o<c?n.bl_tree[i*2]+=o:i!==0?(i!==s&&n.bl_tree[i*2]++,n.bl_tree[gZ*2]++):o<=10?n.bl_tree[yZ*2]++:n.bl_tree[vZ*2]++,o=0,s=i,a===0?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4))}function z8(n,e,t){var r,s=-1,i,a=e[0*2+1],o=0,l=7,c=4;for(a===0&&(l=138,c=3),r=0;r<=t;r++)if(i=a,a=e[(r+1)*2+1],!(++o<l&&i===a)){if(o<c)do eu(n,i,n.bl_tree);while(--o!==0);else i!==0?(i!==s&&(eu(n,i,n.bl_tree),o--),eu(n,gZ,n.bl_tree),Da(n,o-3,2)):o<=10?(eu(n,yZ,n.bl_tree),Da(n,o-3,3)):(eu(n,vZ,n.bl_tree),Da(n,o-11,7));o=0,s=i,a===0?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4)}}function H0e(n){var e;for($8(n,n.dyn_ltree,n.l_desc.max_code),$8(n,n.dyn_dtree,n.d_desc.max_code),_M(n,n.bl_desc),e=E5-1;e>=3&&n.bl_tree[xZ[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e}function q0e(n,e,t,r){var s;for(Da(n,e-257,5),Da(n,t-1,5),Da(n,r-4,4),s=0;s<r;s++)Da(n,n.bl_tree[xZ[s]*2+1],3);z8(n,n.dyn_ltree,e-1),z8(n,n.dyn_dtree,t-1)}function K0e(n){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return P8;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return O8;for(t=32;t<Zk;t++)if(n.dyn_ltree[t*2]!==0)return O8;return P8}var B8=!1;function X0e(n){B8||(W0e(),B8=!0),n.l_desc=new fO(n.dyn_ltree,bZ),n.d_desc=new fO(n.dyn_dtree,wZ),n.bl_desc=new fO(n.bl_tree,SZ),n.bi_buf=0,n.bi_valid=0,EZ(n)}function AZ(n,e,t,r){Da(n,(O0e<<1)+(r?1:0),3),G0e(n,e,t)}function Y0e(n){Da(n,pZ<<1,3),eu(n,I5,Bu),j0e(n)}function Z0e(n,e,t,r){var s,i,a=0;n.level>0?(n.strm.data_type===P0e&&(n.strm.data_type=K0e(n)),_M(n,n.l_desc),_M(n,n.d_desc),a=H0e(n),s=n.opt_len+3+7>>>3,i=n.static_len+3+7>>>3,i<=s&&(s=i)):s=i=t+5,t+4<=s&&e!==-1?AZ(n,e,t,r):n.strategy===F0e||i===s?(Da(n,(pZ<<1)+(r?1:0),3),M8(n,Bu,B1)):(Da(n,(L0e<<1)+(r?1:0),3),q0e(n,n.l_desc.max_code+1,n.d_desc.max_code+1,a+1),M8(n,n.dyn_ltree,n.dyn_dtree)),EZ(n),r&&IZ(n)}function Q0e(n,e,t){return n.pending_buf[n.d_buf+n.last_lit*2]=e>>>8&255,n.pending_buf[n.d_buf+n.last_lit*2+1]=e&255,n.pending_buf[n.l_buf+n.last_lit]=t&255,n.last_lit++,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(AS[t]+Zk+1)*2]++,n.dyn_dtree[kZ(e)*2]++),n.last_lit===n.lit_bufsize-1}Ox._tr_init=X0e;Ox._tr_stored_block=AZ;Ox._tr_flush_block=Z0e;Ox._tr_tally=Q0e;Ox._tr_align=Y0e;function J0e(n,e,t,r){for(var s=n&65535|0,i=n>>>16&65535|0,a=0;t!==0;){a=t>2e3?2e3:t,t-=a;do s=s+e[r++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0}var NZ=J0e;function eye(){for(var n,e=[],t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}var tye=eye();function nye(n,e,t,r){var s=tye,i=r+t;n^=-1;for(var a=r;a<i;a++)n=n>>>8^s[(n^e[a])&255];return n^-1}var _Z=nye,N5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Qi=Hh,dl=Ox,RZ=NZ,gd=_Z,rye=N5,i0=0,sye=1,iye=3,kf=4,V8=5,tu=0,j8=1,fl=-2,aye=-3,mO=-5,oye=-1,lye=1,NE=2,cye=3,uye=4,hye=0,dye=2,pR=8,fye=9,pye=15,mye=8,gye=29,yye=256,RM=yye+1+gye,vye=30,xye=19,bye=2*RM+1,wye=15,fn=3,sf=258,tc=sf+fn+1,Sye=32,mR=42,DM=69,dA=73,fA=91,pA=103,sm=113,f1=666,Ss=1,Qk=2,Rg=3,Mx=4,kye=3;function af(n,e){return n.msg=rye[e],e}function U8(n){return(n<<1)-(n>4?9:0)}function Td(n){for(var e=n.length;--e>=0;)n[e]=0}function yd(n){var e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(Qi.arraySet(n.output,e.pending_buf,e.pending_out,t,n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function hi(n,e){dl._tr_flush_block(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,yd(n.strm)}function En(n,e){n.pending_buf[n.pending++]=e}function Pw(n,e){n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255}function Cye(n,e,t,r){var s=n.avail_in;return s>r&&(s=r),s===0?0:(n.avail_in-=s,Qi.arraySet(e,n.input,n.next_in,s,t),n.state.wrap===1?n.adler=RZ(n.adler,e,s,t):n.state.wrap===2&&(n.adler=gd(n.adler,e,s,t)),n.next_in+=s,n.total_in+=s,s)}function DZ(n,e){var t=n.max_chain_length,r=n.strstart,s,i,a=n.prev_length,o=n.nice_match,l=n.strstart>n.w_size-tc?n.strstart-(n.w_size-tc):0,c=n.window,u=n.w_mask,h=n.prev,d=n.strstart+sf,f=c[r+a-1],p=c[r+a];n.prev_length>=n.good_match&&(t>>=2),o>n.lookahead&&(o=n.lookahead);do if(s=e,!(c[s+a]!==p||c[s+a-1]!==f||c[s]!==c[r]||c[++s]!==c[r+1])){r+=2,s++;do;while(c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&r<d);if(i=sf-(d-r),r=d-sf,i>a){if(n.match_start=e,a=i,i>=o)break;f=c[r+a-1],p=c[r+a]}}while((e=h[e&u])>l&&--t!==0);return a<=n.lookahead?a:n.lookahead}function Dg(n){var e=n.w_size,t,r,s,i,a;do{if(i=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-tc)){Qi.arraySet(n.window,n.window,e,e,0),n.match_start-=e,n.strstart-=e,n.block_start-=e,r=n.hash_size,t=r;do s=n.head[--t],n.head[t]=s>=e?s-e:0;while(--r);r=e,t=r;do s=n.prev[--t],n.prev[t]=s>=e?s-e:0;while(--r);i+=e}if(n.strm.avail_in===0)break;if(r=Cye(n.strm,n.window,n.strstart+n.lookahead,i),n.lookahead+=r,n.lookahead+n.insert>=fn)for(a=n.strstart-n.insert,n.ins_h=n.window[a],n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+fn-1])&n.hash_mask,n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++,n.insert--,!(n.lookahead+n.insert<fn)););}while(n.lookahead<tc&&n.strm.avail_in!==0)}function Tye(n,e){var t=65535;for(t>n.pending_buf_size-5&&(t=n.pending_buf_size-5);;){if(n.lookahead<=1){if(Dg(n),n.lookahead===0&&e===i0)return Ss;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var r=n.block_start+t;if((n.strstart===0||n.strstart>=r)&&(n.lookahead=n.strstart-r,n.strstart=r,hi(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-tc&&(hi(n,!1),n.strm.avail_out===0))return Ss}return n.insert=0,e===kf?(hi(n,!0),n.strm.avail_out===0?Rg:Mx):(n.strstart>n.block_start&&(hi(n,!1),n.strm.avail_out===0),Ss)}function gO(n,e){for(var t,r;;){if(n.lookahead<tc){if(Dg(n),n.lookahead<tc&&e===i0)return Ss;if(n.lookahead===0)break}if(t=0,n.lookahead>=fn&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-tc&&(n.match_length=DZ(n,t)),n.match_length>=fn)if(r=dl._tr_tally(n,n.strstart-n.match_start,n.match_length-fn),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=fn){n.match_length--;do n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else r=dl._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(hi(n,!1),n.strm.avail_out===0))return Ss}return n.insert=n.strstart<fn-1?n.strstart:fn-1,e===kf?(hi(n,!0),n.strm.avail_out===0?Rg:Mx):n.last_lit&&(hi(n,!1),n.strm.avail_out===0)?Ss:Qk}function z0(n,e){for(var t,r,s;;){if(n.lookahead<tc){if(Dg(n),n.lookahead<tc&&e===i0)return Ss;if(n.lookahead===0)break}if(t=0,n.lookahead>=fn&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=fn-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-tc&&(n.match_length=DZ(n,t),n.match_length<=5&&(n.strategy===lye||n.match_length===fn&&n.strstart-n.match_start>4096)&&(n.match_length=fn-1)),n.prev_length>=fn&&n.match_length<=n.prev_length){s=n.strstart+n.lookahead-fn,r=dl._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-fn),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=s&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=fn-1,n.strstart++,r&&(hi(n,!1),n.strm.avail_out===0))return Ss}else if(n.match_available){if(r=dl._tr_tally(n,0,n.window[n.strstart-1]),r&&hi(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Ss}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=dl._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<fn-1?n.strstart:fn-1,e===kf?(hi(n,!0),n.strm.avail_out===0?Rg:Mx):n.last_lit&&(hi(n,!1),n.strm.avail_out===0)?Ss:Qk}function Eye(n,e){for(var t,r,s,i,a=n.window;;){if(n.lookahead<=sf){if(Dg(n),n.lookahead<=sf&&e===i0)return Ss;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=fn&&n.strstart>0&&(s=n.strstart-1,r=a[s],r===a[++s]&&r===a[++s]&&r===a[++s])){i=n.strstart+sf;do;while(r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&s<i);n.match_length=sf-(i-s),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=fn?(t=dl._tr_tally(n,1,n.match_length-fn),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=dl._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(hi(n,!1),n.strm.avail_out===0))return Ss}return n.insert=0,e===kf?(hi(n,!0),n.strm.avail_out===0?Rg:Mx):n.last_lit&&(hi(n,!1),n.strm.avail_out===0)?Ss:Qk}function Iye(n,e){for(var t;;){if(n.lookahead===0&&(Dg(n),n.lookahead===0)){if(e===i0)return Ss;break}if(n.match_length=0,t=dl._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(hi(n,!1),n.strm.avail_out===0))return Ss}return n.insert=0,e===kf?(hi(n,!0),n.strm.avail_out===0?Rg:Mx):n.last_lit&&(hi(n,!1),n.strm.avail_out===0)?Ss:Qk}function Ec(n,e,t,r,s){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=s}var by;by=[new Ec(0,0,0,0,Tye),new Ec(4,4,8,4,gO),new Ec(4,5,16,8,gO),new Ec(4,6,32,32,gO),new Ec(4,4,16,16,z0),new Ec(8,16,32,32,z0),new Ec(8,16,128,128,z0),new Ec(8,32,128,256,z0),new Ec(32,128,258,1024,z0),new Ec(32,258,258,4096,z0)];function Aye(n){n.window_size=2*n.w_size,Td(n.head),n.max_lazy_match=by[n.level].max_lazy,n.good_match=by[n.level].good_length,n.nice_match=by[n.level].nice_length,n.max_chain_length=by[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=fn-1,n.match_available=0,n.ins_h=0}function Nye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pR,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Qi.Buf16(bye*2),this.dyn_dtree=new Qi.Buf16((2*vye+1)*2),this.bl_tree=new Qi.Buf16((2*xye+1)*2),Td(this.dyn_ltree),Td(this.dyn_dtree),Td(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Qi.Buf16(wye+1),this.heap=new Qi.Buf16(2*RM+1),Td(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Qi.Buf16(2*RM+1),Td(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function FZ(n){var e;return!n||!n.state?af(n,fl):(n.total_in=n.total_out=0,n.data_type=dye,e=n.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?mR:sm,n.adler=e.wrap===2?0:1,e.last_flush=i0,dl._tr_init(e),tu)}function PZ(n){var e=FZ(n);return e===tu&&Aye(n.state),e}function _ye(n,e){return!n||!n.state||n.state.wrap!==2?fl:(n.state.gzhead=e,tu)}function OZ(n,e,t,r,s,i){if(!n)return fl;var a=1;if(e===oye&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>fye||t!==pR||r<8||r>15||e<0||e>9||i<0||i>uye)return af(n,fl);r===8&&(r=9);var o=new Nye;return n.state=o,o.strm=n,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+fn-1)/fn),o.window=new Qi.Buf8(o.w_size*2),o.head=new Qi.Buf16(o.hash_size),o.prev=new Qi.Buf16(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Qi.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=i,o.method=t,PZ(n)}function Rye(n,e){return OZ(n,e,pR,pye,mye,hye)}function Dye(n,e){var t,r,s,i;if(!n||!n.state||e>V8||e<0)return n?af(n,fl):fl;if(r=n.state,!n.output||!n.input&&n.avail_in!==0||r.status===f1&&e!==kf)return af(n,n.avail_out===0?mO:fl);if(r.strm=n,t=r.last_flush,r.last_flush=e,r.status===mR)if(r.wrap===2)n.adler=0,En(r,31),En(r,139),En(r,8),r.gzhead?(En(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),En(r,r.gzhead.time&255),En(r,r.gzhead.time>>8&255),En(r,r.gzhead.time>>16&255),En(r,r.gzhead.time>>24&255),En(r,r.level===9?2:r.strategy>=NE||r.level<2?4:0),En(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(En(r,r.gzhead.extra.length&255),En(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(n.adler=gd(n.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=DM):(En(r,0),En(r,0),En(r,0),En(r,0),En(r,0),En(r,r.level===9?2:r.strategy>=NE||r.level<2?4:0),En(r,kye),r.status=sm);else{var a=pR+(r.w_bits-8<<4)<<8,o=-1;r.strategy>=NE||r.level<2?o=0:r.level<6?o=1:r.level===6?o=2:o=3,a|=o<<6,r.strstart!==0&&(a|=Sye),a+=31-a%31,r.status=sm,Pw(r,a),r.strstart!==0&&(Pw(r,n.adler>>>16),Pw(r,n.adler&65535)),n.adler=1}if(r.status===DM)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(n.adler=gd(n.adler,r.pending_buf,r.pending-s,s)),yd(n),s=r.pending,r.pending===r.pending_buf_size));)En(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(n.adler=gd(n.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=dA)}else r.status=dA;if(r.status===dA)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(n.adler=gd(n.adler,r.pending_buf,r.pending-s,s)),yd(n),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,En(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(n.adler=gd(n.adler,r.pending_buf,r.pending-s,s)),i===0&&(r.gzindex=0,r.status=fA)}else r.status=fA;if(r.status===fA)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(n.adler=gd(n.adler,r.pending_buf,r.pending-s,s)),yd(n),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,En(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(n.adler=gd(n.adler,r.pending_buf,r.pending-s,s)),i===0&&(r.status=pA)}else r.status=pA;if(r.status===pA&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&yd(n),r.pending+2<=r.pending_buf_size&&(En(r,n.adler&255),En(r,n.adler>>8&255),n.adler=0,r.status=sm)):r.status=sm),r.pending!==0){if(yd(n),n.avail_out===0)return r.last_flush=-1,tu}else if(n.avail_in===0&&U8(e)<=U8(t)&&e!==kf)return af(n,mO);if(r.status===f1&&n.avail_in!==0)return af(n,mO);if(n.avail_in!==0||r.lookahead!==0||e!==i0&&r.status!==f1){var l=r.strategy===NE?Iye(r,e):r.strategy===cye?Eye(r,e):by[r.level].func(r,e);if((l===Rg||l===Mx)&&(r.status=f1),l===Ss||l===Rg)return n.avail_out===0&&(r.last_flush=-1),tu;if(l===Qk&&(e===sye?dl._tr_align(r):e!==V8&&(dl._tr_stored_block(r,0,0,!1),e===iye&&(Td(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),yd(n),n.avail_out===0))return r.last_flush=-1,tu}return e!==kf?tu:r.wrap<=0?j8:(r.wrap===2?(En(r,n.adler&255),En(r,n.adler>>8&255),En(r,n.adler>>16&255),En(r,n.adler>>24&255),En(r,n.total_in&255),En(r,n.total_in>>8&255),En(r,n.total_in>>16&255),En(r,n.total_in>>24&255)):(Pw(r,n.adler>>>16),Pw(r,n.adler&65535)),yd(n),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?tu:j8)}function Fye(n){var e;return!n||!n.state?fl:(e=n.state.status,e!==mR&&e!==DM&&e!==dA&&e!==fA&&e!==pA&&e!==sm&&e!==f1?af(n,fl):(n.state=null,e===sm?af(n,aye):tu))}function Pye(n,e){var t=e.length,r,s,i,a,o,l,c,u;if(!n||!n.state||(r=n.state,a=r.wrap,a===2||a===1&&r.status!==mR||r.lookahead))return fl;for(a===1&&(n.adler=RZ(n.adler,e,t,0)),r.wrap=0,t>=r.w_size&&(a===0&&(Td(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new Qi.Buf8(r.w_size),Qi.arraySet(u,e,t-r.w_size,r.w_size,0),e=u,t=r.w_size),o=n.avail_in,l=n.next_in,c=n.input,n.avail_in=t,n.next_in=0,n.input=e,Dg(r);r.lookahead>=fn;){s=r.strstart,i=r.lookahead-(fn-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[s+fn-1])&r.hash_mask,r.prev[s&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=s,s++;while(--i);r.strstart=s,r.lookahead=fn-1,Dg(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=fn-1,r.match_available=0,n.next_in=l,n.input=c,n.avail_in=o,r.wrap=a,tu}Eu.deflateInit=Rye;Eu.deflateInit2=OZ;Eu.deflateReset=PZ;Eu.deflateResetKeep=FZ;Eu.deflateSetHeader=_ye;Eu.deflate=Dye;Eu.deflateEnd=Fye;Eu.deflateSetDictionary=Pye;Eu.deflateInfo="pako deflate (from Nodeca project)";var a0={},gR=Hh,LZ=!0,MZ=!0;try{String.fromCharCode.apply(null,[0])}catch{LZ=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{MZ=!1}var _S=new gR.Buf8(256);for(var fd=0;fd<256;fd++)_S[fd]=fd>=252?6:fd>=248?5:fd>=240?4:fd>=224?3:fd>=192?2:1;_S[254]=_S[254]=1;a0.string2buf=function(n){var e,t,r,s,i,a=n.length,o=0;for(s=0;s<a;s++)t=n.charCodeAt(s),(t&64512)===55296&&s+1<a&&(r=n.charCodeAt(s+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),s++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new gR.Buf8(o),i=0,s=0;i<o;s++)t=n.charCodeAt(s),(t&64512)===55296&&s+1<a&&(r=n.charCodeAt(s+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),s++)),t<128?e[i++]=t:t<2048?(e[i++]=192|t>>>6,e[i++]=128|t&63):t<65536?(e[i++]=224|t>>>12,e[i++]=128|t>>>6&63,e[i++]=128|t&63):(e[i++]=240|t>>>18,e[i++]=128|t>>>12&63,e[i++]=128|t>>>6&63,e[i++]=128|t&63);return e};function $Z(n,e){if(e<65534&&(n.subarray&&MZ||!n.subarray&&LZ))return String.fromCharCode.apply(null,gR.shrinkBuf(n,e));for(var t="",r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t}a0.buf2binstring=function(n){return $Z(n,n.length)};a0.binstring2buf=function(n){for(var e=new gR.Buf8(n.length),t=0,r=e.length;t<r;t++)e[t]=n.charCodeAt(t);return e};a0.buf2string=function(n,e){var t,r,s,i,a=e||n.length,o=new Array(a*2);for(r=0,t=0;t<a;){if(s=n[t++],s<128){o[r++]=s;continue}if(i=_S[s],i>4){o[r++]=65533,t+=i-1;continue}for(s&=i===2?31:i===3?15:7;i>1&&t<a;)s=s<<6|n[t++]&63,i--;if(i>1){o[r++]=65533;continue}s<65536?o[r++]=s:(s-=65536,o[r++]=55296|s>>10&1023,o[r++]=56320|s&1023)}return $Z(o,r)};a0.utf8border=function(n,e){var t;for(e=e||n.length,e>n.length&&(e=n.length),t=e-1;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+_S[n[t]]>e?t:e};function Oye(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zZ=Oye,V1=Eu,j1=Hh,FM=a0,PM=N5,Lye=zZ,BZ=Object.prototype.toString,Mye=0,yO=4,Ly=0,W8=1,G8=2,$ye=-1,zye=0,Bye=8;function Fg(n){if(!(this instanceof Fg))return new Fg(n);this.options=j1.assign({level:$ye,method:Bye,chunkSize:16384,windowBits:15,memLevel:8,strategy:zye,to:""},n||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Lye,this.strm.avail_out=0;var t=V1.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Ly)throw new Error(PM[t]);if(e.header&&V1.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(typeof e.dictionary=="string"?r=FM.string2buf(e.dictionary):BZ.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=V1.deflateSetDictionary(this.strm,r),t!==Ly)throw new Error(PM[t]);this._dict_set=!0}}Fg.prototype.push=function(n,e){var t=this.strm,r=this.options.chunkSize,s,i;if(this.ended)return!1;i=e===~~e?e:e===!0?yO:Mye,typeof n=="string"?t.input=FM.string2buf(n):BZ.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new j1.Buf8(r),t.next_out=0,t.avail_out=r),s=V1.deflate(t,i),s!==W8&&s!==Ly)return this.onEnd(s),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(i===yO||i===G8))&&(this.options.to==="string"?this.onData(FM.buf2binstring(j1.shrinkBuf(t.output,t.next_out))):this.onData(j1.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&s!==W8);return i===yO?(s=V1.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Ly):(i===G8&&(this.onEnd(Ly),t.avail_out=0),!0)};Fg.prototype.onData=function(n){this.chunks.push(n)};Fg.prototype.onEnd=function(n){n===Ly&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j1.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function _5(n,e){var t=new Fg(e);if(t.push(n,!0),t.err)throw t.msg||PM[t.err];return t.result}function Vye(n,e){return e=e||{},e.raw=!0,_5(n,e)}function jye(n,e){return e=e||{},e.gzip=!0,_5(n,e)}Yk.Deflate=Fg;Yk.deflate=_5;Yk.deflateRaw=Vye;Yk.gzip=jye;var Jk={},pc={},_E=30,Uye=12,Wye=function(e,t){var r,s,i,a,o,l,c,u,h,d,f,p,m,y,g,v,b,w,C,I,T,E,A,N,F;r=e.state,s=e.next_in,N=e.input,i=s+(e.avail_in-5),a=e.next_out,F=e.output,o=a-(t-e.avail_out),l=a+(e.avail_out-257),c=r.dmax,u=r.wsize,h=r.whave,d=r.wnext,f=r.window,p=r.hold,m=r.bits,y=r.lencode,g=r.distcode,v=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{m<15&&(p+=N[s++]<<m,m+=8,p+=N[s++]<<m,m+=8),w=y[p&v];t:for(;;){if(C=w>>>24,p>>>=C,m-=C,C=w>>>16&255,C===0)F[a++]=w&65535;else if(C&16){I=w&65535,C&=15,C&&(m<C&&(p+=N[s++]<<m,m+=8),I+=p&(1<<C)-1,p>>>=C,m-=C),m<15&&(p+=N[s++]<<m,m+=8,p+=N[s++]<<m,m+=8),w=g[p&b];n:for(;;){if(C=w>>>24,p>>>=C,m-=C,C=w>>>16&255,C&16){if(T=w&65535,C&=15,m<C&&(p+=N[s++]<<m,m+=8,m<C&&(p+=N[s++]<<m,m+=8)),T+=p&(1<<C)-1,T>c){e.msg="invalid distance too far back",r.mode=_E;break e}if(p>>>=C,m-=C,C=a-o,T>C){if(C=T-C,C>h&&r.sane){e.msg="invalid distance too far back",r.mode=_E;break e}if(E=0,A=f,d===0){if(E+=u-C,C<I){I-=C;do F[a++]=f[E++];while(--C);E=a-T,A=F}}else if(d<C){if(E+=u+d-C,C-=d,C<I){I-=C;do F[a++]=f[E++];while(--C);if(E=0,d<I){C=d,I-=C;do F[a++]=f[E++];while(--C);E=a-T,A=F}}}else if(E+=d-C,C<I){I-=C;do F[a++]=f[E++];while(--C);E=a-T,A=F}for(;I>2;)F[a++]=A[E++],F[a++]=A[E++],F[a++]=A[E++],I-=3;I&&(F[a++]=A[E++],I>1&&(F[a++]=A[E++]))}else{E=a-T;do F[a++]=F[E++],F[a++]=F[E++],F[a++]=F[E++],I-=3;while(I>2);I&&(F[a++]=F[E++],I>1&&(F[a++]=F[E++]))}}else if(C&64){e.msg="invalid distance code",r.mode=_E;break e}else{w=g[(w&65535)+(p&(1<<C)-1)];continue n}break}}else if(C&64)if(C&32){r.mode=Uye;break e}else{e.msg="invalid literal/length code",r.mode=_E;break e}else{w=y[(w&65535)+(p&(1<<C)-1)];continue t}break}}while(s<i&&a<l);I=m>>3,s-=I,m-=I<<3,p&=(1<<m)-1,e.next_in=s,e.next_out=a,e.avail_in=s<i?5+(i-s):5-(s-i),e.avail_out=a<l?257+(l-a):257-(a-l),r.hold=p,r.bits=m},H8=Hh,B0=15,q8=852,K8=592,X8=0,vO=1,Y8=2,Gye=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Hye=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],qye=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Kye=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Xye=function(e,t,r,s,i,a,o,l){var c=l.bits,u=0,h=0,d=0,f=0,p=0,m=0,y=0,g=0,v=0,b=0,w,C,I,T,E,A=null,N=0,F,_=new H8.Buf16(B0+1),D=new H8.Buf16(B0+1),R=null,B=0,z,W,K;for(u=0;u<=B0;u++)_[u]=0;for(h=0;h<s;h++)_[t[r+h]]++;for(p=c,f=B0;f>=1&&_[f]===0;f--);if(p>f&&(p=f),f===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<f&&_[d]===0;d++);for(p<d&&(p=d),g=1,u=1;u<=B0;u++)if(g<<=1,g-=_[u],g<0)return-1;if(g>0&&(e===X8||f!==1))return-1;for(D[1]=0,u=1;u<B0;u++)D[u+1]=D[u]+_[u];for(h=0;h<s;h++)t[r+h]!==0&&(o[D[t[r+h]]++]=h);if(e===X8?(A=R=o,F=19):e===vO?(A=Gye,N-=257,R=Hye,B-=257,F=256):(A=qye,R=Kye,F=-1),b=0,h=0,u=d,E=a,m=p,y=0,I=-1,v=1<<p,T=v-1,e===vO&&v>q8||e===Y8&&v>K8)return 1;for(;;){z=u-y,o[h]<F?(W=0,K=o[h]):o[h]>F?(W=R[B+o[h]],K=A[N+o[h]]):(W=96,K=0),w=1<<u-y,C=1<<m,d=C;do C-=w,i[E+(b>>y)+C]=z<<24|W<<16|K|0;while(C!==0);for(w=1<<u-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,h++,--_[u]===0){if(u===f)break;u=t[r+o[h]]}if(u>p&&(b&T)!==I){for(y===0&&(y=p),E+=d,m=u-y,g=1<<m;m+y<f&&(g-=_[m+y],!(g<=0));)m++,g<<=1;if(v+=1<<m,e===vO&&v>q8||e===Y8&&v>K8)return 1;I=b&T,i[I]=p<<24|m<<16|E-a|0}}return b!==0&&(i[E+b]=u-y<<24|64<<16|0),l.bits=p,0},mo=Hh,OM=NZ,Ic=_Z,Yye=Wye,U1=Xye,Zye=0,VZ=1,jZ=2,Z8=4,Qye=5,RE=6,Pg=0,Jye=1,eve=2,yl=-2,UZ=-3,WZ=-4,tve=-5,Q8=8,GZ=1,J8=2,eW=3,tW=4,nW=5,rW=6,sW=7,iW=8,aW=9,oW=10,gN=11,Ru=12,xO=13,lW=14,bO=15,cW=16,uW=17,hW=18,dW=19,DE=20,FE=21,fW=22,pW=23,mW=24,gW=25,yW=26,wO=27,vW=28,xW=29,cr=30,HZ=31,nve=32,rve=852,sve=592,ive=15,ave=ive;function bW(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function ove(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new mo.Buf16(320),this.work=new mo.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function qZ(n){var e;return!n||!n.state?yl:(e=n.state,n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=GZ,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new mo.Buf32(rve),e.distcode=e.distdyn=new mo.Buf32(sve),e.sane=1,e.back=-1,Pg)}function KZ(n){var e;return!n||!n.state?yl:(e=n.state,e.wsize=0,e.whave=0,e.wnext=0,qZ(n))}function XZ(n,e){var t,r;return!n||!n.state||(r=n.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?yl:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,KZ(n))}function YZ(n,e){var t,r;return n?(r=new ove,n.state=r,r.window=null,t=XZ(n,e),t!==Pg&&(n.state=null),t):yl}function lve(n){return YZ(n,ave)}var wW=!0,SO,kO;function cve(n){if(wW){var e;for(SO=new mo.Buf32(512),kO=new mo.Buf32(32),e=0;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(U1(VZ,n.lens,0,288,SO,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;U1(jZ,n.lens,0,32,kO,0,n.work,{bits:5}),wW=!1}n.lencode=SO,n.lenbits=9,n.distcode=kO,n.distbits=5}function ZZ(n,e,t,r){var s,i=n.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new mo.Buf8(i.wsize)),r>=i.wsize?(mo.arraySet(i.window,e,t-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),mo.arraySet(i.window,e,t-r,s,i.wnext),r-=s,r?(mo.arraySet(i.window,e,t-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0}function uve(n,e){var t,r,s,i,a,o,l,c,u,h,d,f,p,m,y=0,g,v,b,w,C,I,T,E,A=new mo.Buf8(4),N,F,_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return yl;t=n.state,t.mode===Ru&&(t.mode=xO),a=n.next_out,s=n.output,l=n.avail_out,i=n.next_in,r=n.input,o=n.avail_in,c=t.hold,u=t.bits,h=o,d=l,E=Pg;e:for(;;)switch(t.mode){case GZ:if(t.wrap===0){t.mode=xO;break}for(;u<16;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(t.wrap&2&&c===35615){t.check=0,A[0]=c&255,A[1]=c>>>8&255,t.check=Ic(t.check,A,2,0),c=0,u=0,t.mode=J8;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",t.mode=cr;break}if((c&15)!==Q8){n.msg="unknown compression method",t.mode=cr;break}if(c>>>=4,u-=4,T=(c&15)+8,t.wbits===0)t.wbits=T;else if(T>t.wbits){n.msg="invalid window size",t.mode=cr;break}t.dmax=1<<T,n.adler=t.check=1,t.mode=c&512?oW:Ru,c=0,u=0;break;case J8:for(;u<16;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(t.flags=c,(t.flags&255)!==Q8){n.msg="unknown compression method",t.mode=cr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=cr;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,t.check=Ic(t.check,A,2,0)),c=0,u=0,t.mode=eW;case eW:for(;u<32;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}t.head&&(t.head.time=c),t.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,t.check=Ic(t.check,A,4,0)),c=0,u=0,t.mode=tW;case tW:for(;u<16;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,t.check=Ic(t.check,A,2,0)),c=0,u=0,t.mode=nW;case nW:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,t.check=Ic(t.check,A,2,0)),c=0,u=0}else t.head&&(t.head.extra=null);t.mode=rW;case rW:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(T=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),mo.arraySet(t.head.extra,r,i,f,T)),t.flags&512&&(t.check=Ic(t.check,r,f,i)),o-=f,i+=f,t.length-=f),t.length))break e;t.length=0,t.mode=sW;case sW:if(t.flags&2048){if(o===0)break e;f=0;do T=r[i+f++],t.head&&T&&t.length<65536&&(t.head.name+=String.fromCharCode(T));while(T&&f<o);if(t.flags&512&&(t.check=Ic(t.check,r,f,i)),o-=f,i+=f,T)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=iW;case iW:if(t.flags&4096){if(o===0)break e;f=0;do T=r[i+f++],t.head&&T&&t.length<65536&&(t.head.comment+=String.fromCharCode(T));while(T&&f<o);if(t.flags&512&&(t.check=Ic(t.check,r,f,i)),o-=f,i+=f,T)break e}else t.head&&(t.head.comment=null);t.mode=aW;case aW:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(c!==(t.check&65535)){n.msg="header crc mismatch",t.mode=cr;break}c=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Ru;break;case oW:for(;u<32;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}n.adler=t.check=bW(c),c=0,u=0,t.mode=gN;case gN:if(t.havedict===0)return n.next_out=a,n.avail_out=l,n.next_in=i,n.avail_in=o,t.hold=c,t.bits=u,eve;n.adler=t.check=1,t.mode=Ru;case Ru:if(e===Qye||e===RE)break e;case xO:if(t.last){c>>>=u&7,u-=u&7,t.mode=wO;break}for(;u<3;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}switch(t.last=c&1,c>>>=1,u-=1,c&3){case 0:t.mode=lW;break;case 1:if(cve(t),t.mode=DE,e===RE){c>>>=2,u-=2;break e}break;case 2:t.mode=uW;break;case 3:n.msg="invalid block type",t.mode=cr}c>>>=2,u-=2;break;case lW:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",t.mode=cr;break}if(t.length=c&65535,c=0,u=0,t.mode=bO,e===RE)break e;case bO:t.mode=cW;case cW:if(f=t.length,f){if(f>o&&(f=o),f>l&&(f=l),f===0)break e;mo.arraySet(s,r,i,f,a),o-=f,i+=f,l-=f,a+=f,t.length-=f;break}t.mode=Ru;break;case uW:for(;u<14;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(t.nlen=(c&31)+257,c>>>=5,u-=5,t.ndist=(c&31)+1,c>>>=5,u-=5,t.ncode=(c&15)+4,c>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=cr;break}t.have=0,t.mode=hW;case hW:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}t.lens[_[t.have++]]=c&7,c>>>=3,u-=3}for(;t.have<19;)t.lens[_[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,N={bits:t.lenbits},E=U1(Zye,t.lens,0,19,t.lencode,0,t.work,N),t.lenbits=N.bits,E){n.msg="invalid code lengths set",t.mode=cr;break}t.have=0,t.mode=dW;case dW:for(;t.have<t.nlen+t.ndist;){for(;y=t.lencode[c&(1<<t.lenbits)-1],g=y>>>24,v=y>>>16&255,b=y&65535,!(g<=u);){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(b<16)c>>>=g,u-=g,t.lens[t.have++]=b;else{if(b===16){for(F=g+2;u<F;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(c>>>=g,u-=g,t.have===0){n.msg="invalid bit length repeat",t.mode=cr;break}T=t.lens[t.have-1],f=3+(c&3),c>>>=2,u-=2}else if(b===17){for(F=g+3;u<F;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}c>>>=g,u-=g,T=0,f=3+(c&7),c>>>=3,u-=3}else{for(F=g+7;u<F;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}c>>>=g,u-=g,T=0,f=11+(c&127),c>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=cr;break}for(;f--;)t.lens[t.have++]=T}}if(t.mode===cr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=cr;break}if(t.lenbits=9,N={bits:t.lenbits},E=U1(VZ,t.lens,0,t.nlen,t.lencode,0,t.work,N),t.lenbits=N.bits,E){n.msg="invalid literal/lengths set",t.mode=cr;break}if(t.distbits=6,t.distcode=t.distdyn,N={bits:t.distbits},E=U1(jZ,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,N),t.distbits=N.bits,E){n.msg="invalid distances set",t.mode=cr;break}if(t.mode=DE,e===RE)break e;case DE:t.mode=FE;case FE:if(o>=6&&l>=258){n.next_out=a,n.avail_out=l,n.next_in=i,n.avail_in=o,t.hold=c,t.bits=u,Yye(n,d),a=n.next_out,s=n.output,l=n.avail_out,i=n.next_in,r=n.input,o=n.avail_in,c=t.hold,u=t.bits,t.mode===Ru&&(t.back=-1);break}for(t.back=0;y=t.lencode[c&(1<<t.lenbits)-1],g=y>>>24,v=y>>>16&255,b=y&65535,!(g<=u);){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(v&&!(v&240)){for(w=g,C=v,I=b;y=t.lencode[I+((c&(1<<w+C)-1)>>w)],g=y>>>24,v=y>>>16&255,b=y&65535,!(w+g<=u);){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}c>>>=w,u-=w,t.back+=w}if(c>>>=g,u-=g,t.back+=g,t.length=b,v===0){t.mode=yW;break}if(v&32){t.back=-1,t.mode=Ru;break}if(v&64){n.msg="invalid literal/length code",t.mode=cr;break}t.extra=v&15,t.mode=fW;case fW:if(t.extra){for(F=t.extra;u<F;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=pW;case pW:for(;y=t.distcode[c&(1<<t.distbits)-1],g=y>>>24,v=y>>>16&255,b=y&65535,!(g<=u);){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(!(v&240)){for(w=g,C=v,I=b;y=t.distcode[I+((c&(1<<w+C)-1)>>w)],g=y>>>24,v=y>>>16&255,b=y&65535,!(w+g<=u);){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}c>>>=w,u-=w,t.back+=w}if(c>>>=g,u-=g,t.back+=g,v&64){n.msg="invalid distance code",t.mode=cr;break}t.offset=b,t.extra=v&15,t.mode=mW;case mW:if(t.extra){for(F=t.extra;u<F;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=cr;break}t.mode=gW;case gW:if(l===0)break e;if(f=d-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=cr;break}f>t.wnext?(f-=t.wnext,p=t.wsize-f):p=t.wnext-f,f>t.length&&(f=t.length),m=t.window}else m=s,p=a-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do s[a++]=m[p++];while(--f);t.length===0&&(t.mode=FE);break;case yW:if(l===0)break e;s[a++]=t.length,l--,t.mode=FE;break;case wO:if(t.wrap){for(;u<32;){if(o===0)break e;o--,c|=r[i++]<<u,u+=8}if(d-=l,n.total_out+=d,t.total+=d,d&&(n.adler=t.check=t.flags?Ic(t.check,s,d,a-d):OM(t.check,s,d,a-d)),d=l,(t.flags?c:bW(c))!==t.check){n.msg="incorrect data check",t.mode=cr;break}c=0,u=0}t.mode=vW;case vW:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,c+=r[i++]<<u,u+=8}if(c!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=cr;break}c=0,u=0}t.mode=xW;case xW:E=Jye;break e;case cr:E=UZ;break e;case HZ:return WZ;case nve:default:return yl}return n.next_out=a,n.avail_out=l,n.next_in=i,n.avail_in=o,t.hold=c,t.bits=u,(t.wsize||d!==n.avail_out&&t.mode<cr&&(t.mode<wO||e!==Z8))&&ZZ(n,n.output,n.next_out,d-n.avail_out),h-=n.avail_in,d-=n.avail_out,n.total_in+=h,n.total_out+=d,t.total+=d,t.wrap&&d&&(n.adler=t.check=t.flags?Ic(t.check,s,d,n.next_out-d):OM(t.check,s,d,n.next_out-d)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Ru?128:0)+(t.mode===DE||t.mode===bO?256:0),(h===0&&d===0||e===Z8)&&E===Pg&&(E=tve),E}function hve(n){if(!n||!n.state)return yl;var e=n.state;return e.window&&(e.window=null),n.state=null,Pg}function dve(n,e){var t;return!n||!n.state||(t=n.state,!(t.wrap&2))?yl:(t.head=e,e.done=!1,Pg)}function fve(n,e){var t=e.length,r,s,i;return!n||!n.state||(r=n.state,r.wrap!==0&&r.mode!==gN)?yl:r.mode===gN&&(s=1,s=OM(s,e,t,0),s!==r.check)?UZ:(i=ZZ(n,e,t,t),i?(r.mode=HZ,WZ):(r.havedict=1,Pg))}pc.inflateReset=KZ;pc.inflateReset2=XZ;pc.inflateResetKeep=qZ;pc.inflateInit=lve;pc.inflateInit2=YZ;pc.inflate=uve;pc.inflateEnd=hve;pc.inflateGetHeader=dve;pc.inflateSetDictionary=fve;pc.inflateInfo="pako inflate (from Nodeca project)";var QZ={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function pve(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var mve=pve,My=pc,W1=Hh,mA=a0,Br=QZ,LM=N5,gve=zZ,yve=mve,JZ=Object.prototype.toString;function Og(n){if(!(this instanceof Og))return new Og(n);this.options=W1.assign({chunkSize:16384,windowBits:0,to:""},n||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gve,this.strm.avail_out=0;var t=My.inflateInit2(this.strm,e.windowBits);if(t!==Br.Z_OK)throw new Error(LM[t]);if(this.header=new yve,My.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=mA.string2buf(e.dictionary):JZ.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=My.inflateSetDictionary(this.strm,e.dictionary),t!==Br.Z_OK)))throw new Error(LM[t])}Og.prototype.push=function(n,e){var t=this.strm,r=this.options.chunkSize,s=this.options.dictionary,i,a,o,l,c,u=!1;if(this.ended)return!1;a=e===~~e?e:e===!0?Br.Z_FINISH:Br.Z_NO_FLUSH,typeof n=="string"?t.input=mA.binstring2buf(n):JZ.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new W1.Buf8(r),t.next_out=0,t.avail_out=r),i=My.inflate(t,Br.Z_NO_FLUSH),i===Br.Z_NEED_DICT&&s&&(i=My.inflateSetDictionary(this.strm,s)),i===Br.Z_BUF_ERROR&&u===!0&&(i=Br.Z_OK,u=!1),i!==Br.Z_STREAM_END&&i!==Br.Z_OK)return this.onEnd(i),this.ended=!0,!1;t.next_out&&(t.avail_out===0||i===Br.Z_STREAM_END||t.avail_in===0&&(a===Br.Z_FINISH||a===Br.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=mA.utf8border(t.output,t.next_out),l=t.next_out-o,c=mA.buf2string(t.output,o),t.next_out=l,t.avail_out=r-l,l&&W1.arraySet(t.output,t.output,o,l,0),this.onData(c)):this.onData(W1.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(u=!0)}while((t.avail_in>0||t.avail_out===0)&&i!==Br.Z_STREAM_END);return i===Br.Z_STREAM_END&&(a=Br.Z_FINISH),a===Br.Z_FINISH?(i=My.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Br.Z_OK):(a===Br.Z_SYNC_FLUSH&&(this.onEnd(Br.Z_OK),t.avail_out=0),!0)};Og.prototype.onData=function(n){this.chunks.push(n)};Og.prototype.onEnd=function(n){n===Br.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=W1.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function R5(n,e){var t=new Og(e);if(t.push(n,!0),t.err)throw t.msg||LM[t.err];return t.result}function vve(n,e){return e=e||{},e.raw=!0,R5(n,e)}Jk.Inflate=Og;Jk.inflate=R5;Jk.inflateRaw=vve;Jk.ungzip=R5;var xve=Hh.assign,bve=Yk,wve=Jk,Sve=QZ,eQ={};xve(eQ,bve,wve,Sve);var kve=eQ;const yR=$k(kve);var SW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p1=new Uint8Array(256);for(var PE=0;PE<SW.length;PE++)p1[SW.charCodeAt(PE)]=PE;var Cve=function(n){var e=n.length*.75,t=n.length,r,s=0,i,a,o,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var c=new Uint8Array(e);for(r=0;r<t;r+=4)i=p1[n.charCodeAt(r)],a=p1[n.charCodeAt(r+1)],o=p1[n.charCodeAt(r+2)],l=p1[n.charCodeAt(r+3)],c[s++]=i<<2|a>>4,c[s++]=(a&15)<<4|o>>2,c[s++]=(o&3)<<6|l&63;return c},Tve=function(n){for(var e="",t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},tQ=function(n){return Tve(yR.inflate(Cve(n)))},Eve=function(n,e,t){for(var r="",s=0,i=e-n.length;s<i;s++)r+=t;return r+n};const Ive="eJyFWdtyGjkQ/RVqnnar8Bb4lpg3jEnCxgEvGDtxKg9iphm01oyILrZxKv++mrGd3az6KC8UnNa0+nrUGr5lI11VVLtskF198FaU1Dns9w9OOkf7/ePDrJu90bWbiorCgpH2RpLZO9WqaCReqZ8lnReJqKTa/SwL8DXJctPs9Lxs4oSS+bAuVVjXC7/tG/lAxYV0+SYbOOOpm402wojckVlQ8+T4wVFdUDHXlaifrTs91Q/Z4PNeMLu7t3/U6746POm+7vW/dLNlWGuUrOlCW+mkrrPBXr/X+4/gciPz25qszQbhyeyKjG2XZb3ewR+9Xi/sMdVO5k+ebHemcaHzW/57p3/y+qQbPk967We//TxoP191hoVeUWexs44q25nUuTZbbYSj4o9OZ6hUZ97osZ05WTJ3AQ37jMOqQtblIt9QG7lWycKJuhCmeJGGhSOxffccyqPj/W728eXX4cFJNxvavAmRyQbH++HnGf34vdc/etXNFq54d50NXh+2X6/C137v+CnQH8gZmYdQfP6WXX8MCppQTYMlditCBL53/wfTQ65EFeNfvQ6erlQsqX21akJc1rGs0EoJE+NbMnlToZFAVEFkQ3iABW2uGH3CUK1ojUTgMWEbjfaWeUp5G6N5aCwRw5vddkOM98EVqRlPrBJ2E8OPZHSM6prJkrtnVrqNIWbtOjQrg8o7Zq2VDwxId5x3xMe0lpzBuVaa0WGpkkCkmgaON/3qBVODpaHQiIybXz3ZliTi3DO2D2PoNIZGMXQWQ+MYehNDb2PoXQxNYujPGHofQ+cx9CGGpjE0i6GLGPorhuYxtIihyxhaxtBVDF3H0McY+hRDNzG0CqfQLTmeNlZBBvr0+TnIKbmUuTS5Z1jUN6xtw8nBtEjLb7wxDOesmB5j+JfpIIYLmIZiWC6GZAz9HUMMvTItzESL6VqG9rZMKGOI4QaGXpjY+xi6i6H7GGKYdMeQPl9foBBW3GHark9Vo5OqgEd9oe+ZOPOnc3NcqmZgiUuomehYnt1xZ8daaSPZ8wBoyb0Jx3jOBLBtGyvbiRNOLXw0Sy+DpNKAAhpxq/gXYhD6NdMda6bwwyTH0kwhypI70p5wdhR7Gjia3JEhpvfDLCRKI7YcqYXJnxgv/g3vSthEhNNSEKIfCQByUkpurWQaNXjqNtqjSfHp0OdLOwSAG31E7h03uLRMvlbEtDPoq0rkhqvhlSFu40I7kfP9VoRLFrH+G7YLcypCQLkJ1delML5SwjPb6DIMmQxL54L1gyq+YIfMyKNNsQ4zHj8UnoMDdoZwfoMqkJxX7A6Cj3czWzLdqcC+GuGM9tCa4RobSp5J2gTnk0D5CVA0Pp1RAqn7hC0o5J3kqvkTsGyY6gwBHlqmHtqBh2x77UI9QimVS75PljgMAjXDEljn0QNjvMlZIAju/pF0NH95VcFshSgnB3Ug+LhMkwYoVKOAUS+T2kZIG2DVcYInLXDTQkKUYHelH6kuGcEcbPE26aRPNklKOEQpNcCQHPp6k4jc5UYbRtkM7T4HcVsAvADWLtEGnq/M9t2G9e2Aw8xEM1CCQ4QDWq28cnKrmDHTAwcvgYNh1HJSqEKumdvVDlPDFOwjU8UyTpZZ4tTBohzYUSMaRAmdggBNgKLmzVsYGLjXbyujb6lm70CGSmnB1PsWJHuSYhQfupq/ioxBTRngkEaRuQEP3ICIPb/kAq/Axo6ZUEaQFFSStxwa/eDpiARDND4kqhIE+BG1Btp7hjKCjh6UKYt2xk7MkmMJ8PCMlGNy5XiSdvc6wYjYtIp5pSGBRTo9Z45R6Asw4bQ8HgrYhEJmTFsk6pWvyPfJOj4HiXNGFFQJw1hOCVaYgChNUOGcA6tD0DZCMSdDczMBDa5TFVWDqWn5i/yB+BByqARcGhx6ziqXVD4Ii2TqZmnLi8AS3L8dGqRoBIzwkM0LmXNpOAOKTNKbKciPBvg8XdZJ6RDoHEKO5meuGdDzmOiQMTrt0d63SVfAIDBJtgIwwaUvN7ps8l1r7v0I5lKPRUEV+rcqfaHlDvJH4FSdVBVCjk8IiXp87Jv/Ib90s/dk6gshTfPv8Zfv/wDUfBK2",Ave="eJyFWdtyGjkQ/RVqnnarcAo7vuE3jEnCxgEvGDtxKg9iRgxaa0ZEF9s4lX/fnrGdTVZ9lBcKTmvU96PW8C0bmqqStc9OsqsPwYlSdnaPDvb6naP+3v5+1s3emNpPRCVpwdAEq6TdOTW6mC61+hpksyBo/euCTrOg89MKUSm9/XUNwddSletGcbOcfo+90Cof1KWmdTu7e4S4N+pBFhfK5+vsxNsgu9lwLazIvbRz2Tw7evCyLmQxM5Won809PTUP2cnnnYOj7s7eQa97fNjvHvd2v3SzBS21WtXywjjllakbRb3eT4LLtcpva+lcdkJPZlfSunZZ1uu9ftXr9UjFxHiVP7my2drGh84f+Z+d3f5xv0uf/V77udt+vm4/jzqDwixlZ751XlauM65zYzfGCi+LV53OQOvOrNnHdWbSSXtHKOkZ0apC1eU8X8s2dO0mcy/qQtjiRUoLh2Lz7jmWB4cUto8vv/Zf97vZwOVNhGx2crhHP8/kj987uxShbO6Ld9fZyfF++/WKvu72Dp/i/EF6q3IKxedv2fVH2qAJ1YQscRtBEfje/R8sH3Itqhj/Ggx5utSxpA7VsglxWceywmgtbIxvpM2bio0EoiKRo/AAC9pcMfsJK2stV0gEHhOu2dHdMk/p4GI0p0YTMbzebtaS8Z5cUYbxxGnh1jH8KK2JUVMzWfL3zEq/tpJZu6JuZVB1x6x16oEB5R3nneRjWivO4Nxow+zhZKWASDcNHCv9GgRTg6WV1IiMm8ReriWJOPeM7YMYOo2hYQydxdAoht7E0NsYehdD4xj6K4bex9B5DH2IoUkMTWPoIob+jqFZDM1j6DKGFjF0FUPXMfQxhj7F0E0MLekQupWep40lyUCfPj8HOSVXKlc2DwyLhoa1HZ0cTIu0/MYbw3DOkukxhn+ZDmK4gGkohuViSMXQPzHE0CvTwky0mK5laG/DhDKGGG5g6IWJfYihuxi6jyGGSbcM6fP1BQphyR2m7fpUNXqlC3jUF+aeiTN/OjfHpW4GlriEmoGO5dktd3astLGKPQ/ALnmwdIznTADbtnGqHTnh1MJHswyKJJUBFNCI241/IwahXzHdsWIKnyY5lmYKUZbckfaEs6PY08DR5E5ayfQ+zUKitGLDkRpdASTjxX/hXQqXiHBaCkL0IwFALrVWG6eYRiVP/doENCk+Hfp8aVMAuNFH5MFzg0vL5CstmXYGfVWJ3HI1vLSSU1wYL3K+3wq6ZUnWf8t2YS4LCig3oYa6FDZUWgRGjSlpyGRYOhesH7LiC3bAjDzGFiua8fih8BwcsFOE8woqIrmgWQ2Cj3czWzLdqYFeg3Bmd2pNusVSyTNJG+N8SlB+AhRNSGdUgtR9whYU6k5x1fwJWDZIdYYADy1SD23BQ669dqEekaktF3yfLHAYBGqGBbAuoAdGWMkZEQR3/0g6mr+8qmBUIcrJQR0IPi6TpAEa1Shg1MvkbkO0G2DVUYInHXDTQUJUQLs2j7IuGcEMqHibdDIkmyQlHKCUWmBIDn29SUTucm0ss9kUaZ+BuM0BXgBrF0hB4CuzfbfhQjvgMDPRFJTgAOGAVqugvdpoZswMwMFL4CCNWl4JXagVc7vaYmqYAD0qVSyjZJklTh0syoEdNaJBlNAJCNAYbNS8eaOBgXv9trTmVtbsHcjKUjkw9b4FyR6nGCVQV/NXkRGoKQscMigyN+CBGxCx55dc4BXYyDMTyhCSgk7ylkejHzwdkWCAxodEVYIAP6LWQLqnKCPo6EGZckgzdmKaHEuAh2dSeyZXnidpf28SjIhNq5hXGgpYZNJz5giFvgATTsvjVMCWCpkxbZ6oV74i3yfr+BwkzltRyEpYxnKZYIUxiNIYFc45sJqCthaaORmamwlocJOqqBpMTYvf5A/ERyKHSsCl5NBzVrmk8kGYJ1M3TVteEEtw/3YYkKIhMCJANi9UzqXhDGxkk95MQH4MwGfpsk5KB2DPAeRofuaagn0eEx0yQqc90n2bdAUMAuNkKwATfPpyY8om37Xh3o9gLg1YRFuhf6vSF1ruIH8ETtXJrSjk+IRQqMdHofkf8ks3ey9tfSGUbf49/vL9XxrnGMA=",Nve="eJyFWVtT2zgU/isZP+3OhE5Iy/UtDaHNFhI2IdDS4UGxFUeLbKW6AKHT/77Hhnbb1fnUFw98x9K5fzpyvmZDU1Wy9tlxdnUenChlZ3e//+awc7B32D/Kutmpqf1EVJJeGJpglbQ706VWX4JshEHrX4Wdn4SiUnr7q5jga6nKdaPvXBYqVISMvdAqH9Slpjd3dvuEuFP1KIsL5fN1duxtkN1suBZW5F7auWxWjx69rAtZzEwl6hc73741j9nx553+QXenv9frHr456h729m672YJetVrV8sI45ZWpG0W93k+Cy7XK72rpXHZMK7MraV37WtbrvX7V6/VIxcR4lT87s9naxovOH/mfnd2jw6MuPY967XO3ffbb5+v2edAZFGYpO/Ot87JynXGdG7sxVnhZvOp0Blp3Zs1urjOTTtp7QknbiN4qVF3O87VsQ9huMveiLoQtvkvpxaHYvH+J6d4+Be/j9//e9Pe72cDlTZxsdrzfP+pmJ/LH/zu7ewfdbO6L99e0crf98+rlzybY59JblVM8Pn/Nrj/S+iZeEzLEbQSF4Vv3f7B8zLWoYvxLMOToUseSOlTLJs5lHcsKo7WwMb6RNm/qNRKIikSOogMsaBPG7CesrLVcIRFYJlyzo7tjVungYjSnNhMxvN5u1pLxnlxRhvHEaeHWMfwkrYlRUzNZ8g/Mm35tJfPuipqWQdU9865Tjwwo7znvJB/TWnEG50YbZg8nKwVEuuniWOmXIJgaLK2kPmTcJBJzLVPEuWdsH8TQ2xgaxtBJDI1i6DSG3sXQ+xgax9BfMfQhhs5i6DyGJjE0jaGLGPo7hmYxNI+hyxhaxNBVDF3H0McY+hRDNzG0pJPoTnqeNpYkA336sg5ySq5UrmweGBYNDWk7OjiYFmn5jTeG4Zwl02MM/zIdxHAB01AMy8WQiqF/YoihV6aFmWgxXcvQ3oYJZQwx3MDQCxP7EEP3MfQQQwyTbhnS5+sLFMKSO0zb91PV6JUu4FFfmAcmzvzp3ByXuplX4hJqpjqWZ7fc2bHSxir2PAC75MHSMZ4zAWzbxql27oRTCx/NMiiSVAZQQCNuN/6NGIR+xXTHiil8GuRYmilEWXJH2jPOjmLPA0eTO2kl0/s0C4nSig1HanQJkIwX/4V3KVwiwmkpCNGPBAC51FptnGIalTz1axPQpPh86POlTQHgRh+RB88NLi2Tr7Rk2hn0VSVyy9Xw0kpOcWG8yPl+K+iyJVn/LduFOV3GaOBmuDvUpbCh0iIwakxJQybD0rlg/ZAVX7ADZuQxtljRjMcPhWfggJ0inFdQEckFzWoQfLyb2ZLpTg30GoQzu1Nr0lWWSp5J2hjnU4LyE6BoQjqjEqTuE7agUPeKq+ZPwLJBqjMEWLRILdqCRa69dqEekaktF3yfLHAYBGqGBbAuoAUjrOSECIK7fyQdzb9/r2BUIcrJQR0IPi6TpAEa1Shg1MvkbkO0G2DVUYInHXDTQUJUQLs2T7IuGcEMqHiXdDIkmyQlHKCUWmBIDn29SUTucm0ss9kUaZ+BuM0BXgBrF0hB4Cuz/bbhQjvgMDPRFJTgAOGAVqugvdpoZswMwMFL4CCNWl4JXagVc7vaYmqYAD0qVSyjZJklTh0syoEdNaJBlNAJCNAYbNR8eaOBgfv8trTmTtbsHcjKUjkw9b4DyR6nGCVQV/NXkRGoKQscMigyN2DBDYjYy0cu8Als5JkJZQhJQSd5y6PRD56OSDBA40OiKkGAn1BrIN1TlBF09KBMOaQZOzFNjiXAwxOpPZMrz5O0fzAJRsSmVcwnDQUsMuk5c4RCX4AJp+VxKmBLhcyYNk/UK1+RH5J1fAYS560oZCUsY7lMsMIYRGmMCucMWE1BWwvNnAzNzQQ0uElVVA2mpsVv8gfiI5FDJeBScuglq1xS+SDMk6mbpi0viCW4XzsMSNEQGBEgmxcq59JwAjaySW8mID8G4LN0WSelA7DnAHI0P3NNwT5PiQ4ZodMe6b5LugIGgXGyFYAJPn25MWWT79pw30cwlwYsoq3Qr1XpCy13kD8Bp+rkVhRyfEIo1OOj0PwOedvNPkhbXwhlm1+Pb7/9C/NFF2U=",_ve="eJyFWdtSGzkQ/RXXPO1WmZSBEAJvjnESb8AmGENCKg+ypj3Wohk5ugAmlX9fzUCyW6s+ysuUfVqXvh61Zr4XI1PX1PjiuLg6C05U1Ns/Ojx42TsYHB4eFf3irWn8VNQUB4xMsIpsCwatU1DUSm8T+JpUtW7XP6NShToiEy+0ksOm0nHkIP53b9UDlefKy3Vx7G2gfjFaCyukJzundu74wVNTUnlhatE8a/XmjXkojr/s7O33d/YOBv3D3YP+68HB136xiEOtVg2dG6e8Mk1xvLM7GPxHcLlW8rYh54rjOLO4Iuu6YcVgsP9iMBjELabGK/lkymZrWxt6f8g/e7tHr4/68Xk06J673XOve+53z8PesDRL6s23zlPtepNGGrsxVngqX/R6Q617F+1qrndBjuxdRONu4ziqVE01l2vqHNgtMveiKYUtf0rjwJHYvH/26MGrvX7x6ee/l3uv+sXQydZPtjh+tXfUL07o1/+d3YPDfjH35fvrOHO3+3n1/LN19hl5q2T0x5fvxfWnOL/11zQq4jYiuuFH/38wPUgt6hT/Fkw0dKlTSRPqZevnqkllpdFa2BTfkJVtdiYCUUeRi94BGnQBY9YTlhpNKyQC04RrV3S3zCwdXIrKWFQihdfbzZoY66MpyjCWOC3cOoUfyZoUNQ0TJX/PjPRrS8zYVSxZBlV3zFinHhiQ7jjriPdpoziFpdGGWcNRrYBIt1WcbvotCCYHK0uxDhkzvwVyHVOksWd0H6bQmxQapdBJCo1T6G0KvUuh9yk0SaG/UuhDCp2m0FkKTVNolkLnKfQxhS5SaJ5Clym0SKGrFLpOoU8p9DmFblJoGU+iW/I8bSyjDNTp8zzIKVIpqawMDIuGlrRdPDiYEun4jVeG4ZwlU2MM/zIVxHABU1AMy6WQSqG/U4ihV6aEGW8xVcvQ3oZxZQox3MDQC+P7kEJ3KXSfQgyTbhnS5/MLJMKSO0y78bls9EqX8KgvzT3jZ/50bo9L3fYraQq1XR3Ls1vu7FhpYxV7HoBVZLDxGJeMA7uycarrOmHXwnuzCipKagMooBV3C/9GDFy/YqpjxSR+bORYmilFVXFH2hPOtmJPDUcbO7LE1H7shURlxYYjtdj6E2PFv+5dCpfxcF4KXPQrAEBOWquNU0yhRkv92gTUKT4d+nxqRwdwrY+QwXONS8fkK01MOYO6qoW0XA4vLXEbl8YLyddbGa9axNpv2SqU8SoWG26Gu0NTCRtqLQKzjalik8mwtBSsHVTzCTtkWh5jy1Xs8fim8BQcsDOE8xvUkeSCZncQvL/b3pKpTg32NQhnVo+lGa+yMeWZoE1wPAmknwBJE/IRJRC6z1iDUt0pLps/A82GucoQYNIiN2kLJrnu2oVqhHJLLvg6WWA3CFQMC6BdQBPGeJOTSBDc/SNrqPz5voLZClGOBHkgeL9MswpolKOAUS+zq43QaoBVxxmedMBMBwlRgd21eaSmYgQXYIt3WSNDtkhywiEKqQWKSGjrTcZzl2tjmcVmaPcL4Lc5wEug7QJtEPjM7N5tuNA1OExPNAMpOEQ4oNU6aK82mmkzAzDwEhgYWy2vhC7VirldbTE1TME+Kpcs42yaZU4dLJJAjwbRIAroFDhoAhZq37zFhoF7/ba05pYa9g5kqVIOdL3vQLAnOUYJsar5q8gY5JQFBhnkmRsw4QZ47PklF3gFNvZMhzKCpKCzvOVR6wdPRyQYovYhk5XAwY+oNNDeMxQRdPSgSDm0MzZilm1LgIUnpD0TK8+TtL83GUbEqtXMKw0FNDL5PnOMXF+CDqfj8ZjANiYyo9o8k698Rn7I5vEpCJy3oqRaWEZzyrDCBHhpghLnFGgdnbYWmjkZ2psJKHCTy6gGdE2L38QP+IeQQRXg0mjQc1S5oPJOmGdDN8trXkaW4L52GBCiEVAiQDYvleTCcAIWsllrpiA+BuAX+bTOSodgzSHkaL7nmoF1HjMVMkanPdr7NmsKaAQm2VIAKvj85cZUbbwbw70fwVwasCguhb5W5S+03EH+CIxqsktFl+MTQqEaH4f2O+TXfvGBbHMulG2/Hn/98Q/b2xEO",Rve="eJyNnVtzG0eyrf8KA0/7RMhzJJK6+U2+zMX2mJYsEuJMzANEtihsgYQMEITaO/Z/P41CV+bKlaug86JQf6uArsrKXNVX8H8m3y9vb7u7+8m3k4t/btazm+7o5PmTZy+PTl88eXk6eTT56/Lu/tfZbTc0+Hu3eOju51ezb75bLq532maxYO2oarPb+aJndRCm3fzm425/Y8N/3M8W86tXdzeLoeXjYXv91/mX7vq3+f3Vx8m396tN92jy/cfZanZ1361+73af/PHLfXd33V2/Wd7O7sY+fvfd8svk239/8+T540ffHB+/ePTk8eOTRy+fHf/n0eR8aLxazO+635br+f18eTf59ptBBuHtx/nVp7tuvZ58+3TgF91qXZpNHj8+/svjx4+Hnfy6HAawG8z3y8/9ajeGo/+6+j9HT16+ePpo9+/z8u/L3b8vH5d/nx+9ul6+745+79f33e366B93V8vV5+Vqdt9d/+Xo6NVicfRm9z3rozfduls9DNTDOF8fzY7uV7Pr7na2+nS0/HD0y/xued9/7r4ZGi2OXv3taHZ3/X+Xq6P58AXrzfv1/Ho+W8279V+Gzv447Op6fnfz+9XHrsxA6cnv98NHZqvrqg4Nv599/vs4Ic+fvHg0eVe3np4cP5q8Wl/tAr0axR862/7m+PHzR5Pf76//Pp18+2QnDv+/2P3/9PF+vv7Z3a/mV0NA//0/k+m7ybfHz4dGvw5dWX+eDXH830d7fHJyssfdl6vF7Nb46fPTPf9jsxzi9X5hytOnz/bK3eb2/W6ibu6ydr1cLGYr4y+GiSn8c7e62qV7FZ4fH++F2e0grYf4mGQdLj0oM557/Xm26u4W3YeWRB+r3Zitd9+4/uQdfzEO9/Nis85duBqqdJZ38bH//LG7y82HocyXYiTrxWz9MQfrz261zHR512V4vxUt7z+uOtH2w3KzEnT+INqu518E7B46MbddiKmnw/xOpNXVcrG8y3jd3c6jZDOw2NlAot0fm9ki45tVN5SzD/PZkyc1abp1sZqqvHz+dJx7kX2vMvouo+8z+sH3/Oz5Hv2YO/NX/2BNhb/l7/p7Tph/5DD/lD/4c97jL156NeT/zB/8NffrLA/ot9zqdf6uN/mDv+d+vc0fPM8fvPBZOx0neppbvcvoMu/xXzn53g+L2afuPtiGhfz9oMU65c9FT7FUnK2v5vOr+epqc5tnbbOz7fWw/nR5j8XfQmfsY7M8nve51VVudZ1bieL8kD94k9HH3OV5Rv+d9/gpt/IStiXhNu/xLqNlRp9F1WerFxa4zpG4z9+1yR98yJWwza2Ek/aOdsc9xfRzV3f5FRPh+MXjmpWrRvtD2Xg/X1w3l/rr5VaYe1idPWL35TjNk+NJrbgPuwND9Fkfs1o7PiyWq7ng667xLVeb1bCMX3kAj0+wbNbzcuCaoluPWnRZ3Wzmg3K7vNdHDju5fPFX5Bh6S5wPc8HE8dNwKCcPB65nNzedSNs9x0MxOuDYzV236kTtD8dCs5vV7DOY2tOaWcNJRCd80MP7frY+EOHD6kofK9gERH04KRg/Pxxizz+v52shDWO9/7jchGPFtOyH5PaZW80eRD3Mrjb36tClePmHRfcla43Kup1drdThzvtVp3Z8vbyfXYWKc2k+zCQGwJQV1qF3trseQqqOUTd3N7PV5nYx24jdLG+Gw8xP4utmOA6Yl9uQsy688sOek+cjW66uPwzHeeHA0I9Q4iLrByCR+x7OYA/Pntoebgen2yxwF7ayzMRie70r+vVaLGCLuGNfeSK3I5KlGNRQn8Mp8ZD34hziH2lK3QliBvryH/PGlyY5qf51cfb86Cj3oC4X1/OHOSS0fyT2zA+YRXF4txsfOj/0ob4Rg3U596IygaHmr/T9hVJx3J6IGdWDfyb2zmeCPuBnAWknfs4weASchBxXJ1YDfX7yvIrjVQ+xK3IdXztjHvgodVx+VR3w8mjlaDRVP9KXw7FTqda3RWOFcCarhAzRw1yzJ/rha9z76ct66rn8s7u7EZn7Ju7Cz+LUID05DhbJocx9xQuJHc02xnrFY/Xznxw5i+rbj8uVGNUZ7d3DQFVgJ3pU8Kd1EaOwWTXRDjxienErFzjWm3KUsxL9jSnoUWzxaKtmgrebxf3886IX/WqU/9s4QEuk4Xjrfj5bXM8/fMhz1bet4de4H09YkSxeGwfT7MCq05auGuO9a9lgK2N+jQHyxZDqHy+/DUcMeA3OToFWy0/dHZ4ImTmuupv5Oh76eonGyYblONdFPdRYb4aqDucjHmw6hrTCbERm2Ur1fzU+8C+q8NOX9di1XOmK18Eszj/ef8zw+6YBLpRv2VjuGybTNVfHlvCqdfhwICtjgP18uVUavG9zhdaMtJae1jK6bu0517Ht++BhCa+Y9bigW9wLA78PJu2euF0ecMTUNfu6240YSWMNX8rjTK8FPvixq0/xCOfFySn4+JDAqyGR1/n7fud8Pa2Tv2gsJD8fXH9/iRPnpxJ2X0eZYrIFt4wYJuetGv8ldtviMETt42wBS0Mt8t2pSaxwnwu1BJgvx8MmT7WvTGCjFLrWgG6imeKAxmlVs6rPRn6XB4iWwbLnlhDXg010KmMbS/731AlbuMhtTs3Or+dXymh/iF8EB2aHDnd/pcNa625j3t4czuuD+3rV+M5XTZOOpwM2A/F73IgPHFD+2Fruad9+iVie3dkBWTwSsG87WAo0QeaXB/e0WN7s5vtuKcK9bJvpJq9jNYOGr2pU8s3Bye1gJfeYN9L3Tq7jdnHnLh80u+e3lrsfN7u7kf95NPm5W939NpuvdveQ/z15tbtbPXn0zenj/zwat/buEdC+nxGNpo7wb8PWU9/au0pAODAUzsL3nOUu4NIbuE1VoPv6Dyg4T1DGkAW2vzoU0L5wEL0OW2+HrZe+VWOGKIzehfMQi/M6ekBh9MBh9EDr6AHR6EGx0QMb6zqwYidILoatF7Y1Hbae2dblsPXkiW/WISGDvgPeDJsnvlU/CCjEAjh8H9AaC0AUC1AsFsAsFsDGWDh5CJmwDVoft/KI+tzzsRGWpiEqDuNUpM65UqsC5WqIata4LNyqnuXv5hI2rurYxFzMJlFFG9dlbTLXtglU4Mapyit/nRHUuyEqeueq8qt6niPKHmBcGYGJ2Q1MIkswrn3BZDYHE9ghTIg2UTF4RUVgGBWhaxhj6zBB+EfVwEQMUd0ZV3ZiYrsy2ViMa3cxmS3GBPYZE6LZVPyQE3KbW/UCNQIhXGg0A3QhQ1TfxsmFnLMLVQVcyBC5kHHpQlU9y9/NLmRcuZCJ2YVMIhcyrl3IZHYhE8iFjJMLVf46I3AhQ+RCzpULVfU8R5RdyLhyIROzC5lELmRcu5DJ7EImsAuZEF2oYnChisCFKkIXMsYuZIJwoaqBCxmi4jOuXMjEdmWyCxnXLmQyu5AJ7EImRBeq+CEn5Da36gVqBEK4EIYGrShyqvQokimRyM4UZLCnyMmjoiiNKjQ5a+yPLSuKyrdii2xeUScHi6K2sdiGvSyqZGhRJFcL4usGB3+LnEyOROV0ocl5Y17Y86KojC+2yO4XdbLAKGofjG3YDKPKjhjVaItBA28MHAwycHTJKLBVRlX4ZWgAphk5GUYUlX3GFl/xFTbSKGo3jW3YUqPKvhrVaK5Be2jUxbbRvm/xQ/ETrusEPRcpGRVK5LdBYrcFEbwWKTktStJnocGZ3A97LErKYVHP/ooquStK2luxBTsrauSrKJGrgvRaUnBUpOSnQVJuCg3OZezZSVFSPop6dlFUyUNR0g6KLdg/UWP3RC16JyjgnEDBN4GiayJmz0RNOCbI4JdIqdpRUl6J+kEvYJ9ESbsktmCPRI0dErXoj6A8yAzfyra9pu1ICVccR4+WaIhMxTiZoXN2wqqADRoiDzQuDbCqZ/m72fqMK98zMZueSeR4xrXdmcxeZwIZnXFyucpfZwT+ZojMzblytqqe54iypxlXhmZidjOTyMqMax8zmU3MBHYwE6J9VQzeVREYV0XoWsbYskwQflU1MCtDVH/GlU2Z2K5MNijj2p1MZmsygX3JhGhKFT/khNzmVr1AjUAIF6p9RRtyRhXuAhkRCOxEJoEVOSMvckGakcln4vvZjlxQfuRqNiTXyJFc0JbkOnuSK2RKLpArmfBaMPAlZ2RMIChnMvlcxJe9yQVlTq5md3KN7MkF7U+us0G5wg7lSrQo4+BRxsCkjKFLOWSbckX4lIlgVM6oQF1QVuXqgfpls3JBu5XrbFeusF+5Eg3L+IPI1a1o1yvWiolwrdoxdC1nZAQukGuBwK5lEriWM3ItF6RrmXwmvp9dywXlWq5m13KNXMsF7Vqus2u5Qq7lArmWCa8FA9dyRq4FgnItk89FfNm1XFCu5Wp2LdfItVzQruU6u5Yr7FquRNcyDq5lDFzLGLqWQ3YtV4RrmQiu5Ywq1AXlWq4eqF92LRe0a7nOruUKu5Yr0bWMP4hc3Yp2vWKtmAjXWo2/6OG7q4RMoGLyK8PsVqMAXlUJOVXF0qdG8Sx9L3tUxcqhqpb9qSrkThVrb6oqO1Pl5EsVkyuN+HUi4EiVkB8ZVm40iucphuxEFSsfqlp2oaqQB1WsHaiq7D+Vs/tUHr1npOA8IwHfGQm6TkXsOZULxxkl8JtKqLIqVl5TtWbNsc9UrF2mquwxlbPDVB79ZaQPKeu2qU2fiR69cJUx19FWDFHhGidjcc7OUhWwFkPkLcaluVT1LH8324tx5S8mZoMxiRzGuLYYk9ljTCCTMU4uU/nrjMBnDJHROFdOU9XzHFH2GuPKbEzMbmMS2Y1x7Tcms+GYwI5jQrScisFzKgLTqQhdxxjbjgnCd6oGxmOIas+4sh4T25XJ5mNcu4/JbD8msP+YEA2o4oeckNvcqheoEYjsQt8N9FXcip8tqDoGIBHSwvUeYiALoiAVRvEpLISmkFq+jnbV9cS3LJ0che4CxwRzWrsLiKYcFBsIMBsIsHEge/LDGPdT34pu+gPGHZDw1h8o7kCjo/4Q4g7Mugts7C6QaJs/jCXvW9OwtSv0575VRwcIuux0/3tsdXJ3ZPzJNUOj/2L4DFEMjVMgjatomphDahLF1TgH1wSOsAkxzIYp1pVfZDTNCEJviOJvPE9ClWgmKk7TUV4IjNNREU9H5TwdlcvpqKKYjirxdFSepqMKaTqqQNNRMU/HyC8ymmaE01ERT0flYjpGiadjxDQdfx1n4oVv1V0BqvEHFEIPHDoEtAYckMUamIUZ2BhhIDW4jnbjPPatOgJAdQSAwgiAwwiA1hEAshEAsxEAG0cApI7AUZ2tJ48N2UyN7Kdxqo59Kw70J5wqQGKgP9FUAY0D/SlMFTAa6E8wVUDiQH+CgTqxcTraxK08zE1jTBs5pk0eEx+SgSJGuxGj3YTR/jzZn/Kc+FY8LipIHAQVng6CCo0HQQXJA8mi0OFRYfV8BlA8Ftqhctzy1LbsWMhRPYFBFA6PnOPhEVB7TTRgO2py5MdGzvzYyNhyNwLfskg7ipF2jpF2apF2xJF2xSPtzCLtyCJtaBPivsn5oc47fp6oU46fJ+ls42eR1aCI/ODTi58nfGaxI70tUGUrLtEFpYU2vIsf6oIECgGpKhrUJAeGGlCMSNXhokYcOZKpyEileosqJD8JVIWkUkGyKmqTmuQy5Qa5YqkFFS+pXMckc0lHGaqbBCp0UlXNU5Nc/tSAnIBUbQrUiP2BZLIKUsk1orppJRJ7CalfLyThMNTgYCE1fIcaHS6k5EYkR2OKIngUCWRXpCbn+mWC1/DKVrx8t0fiyt1O2B3ej5eddptTO0bdbZULWce+aSUODOvScfwFzUE6jZLgfo3nl0m6vPPLRF3Z+SW/o+qIgnDwHVVTMRz4BueLiDAw+Q1OFkSIqtaKU9BbYp8DwWFrv/X4S8wriCAJFEdWVTRjG4xpVCCyUcD4ksJRJlnEOrZoRVy0Otykb4WS56BdwGOD0V5xDgxR9J2ruFcVI14ZxLoijLIxjq8JIrJVa8U06C2xz4HgCBpPsRuO08oJ5lPfirccCop3gwoSNyAKT/ceCo23HQqiWwqF0d2EwsKNhELqeunorZn5Gc45ojDdLlyE75mGrXdhy6/QnE3SxZmzibous6P13Nd3aee+I6oWA9NgiObCOE2IcTUrJuapMYnmxzhPkgk8UybE6TJMc4brDoWBZ6+x7pB6kb97mtG7jGBa00LEPE9wlWiWK+apDi9TwXxHTpMeRZr5KKrpjy1yDkSdEiGKnA1R5ZSIasyLqFFypPc6VfQ4TQ6916maXDT2N23wdw0O+aNfb5RizqSgUzoFjXMKXkSBjEJK+YQSZRNKKpdQz5mEKuURSpxFqHEOoRYzCBXKH3qHLceJc6f9DltucCH3M5X0naSQMerVLiHlbAGVcgUUzpT6pgCkiSHKEeOUIMZVdpiYU8MkygvjnBQmcEaYENPBMOUCvuxDYeAsaLzsQ+pF/u5pRu8ygmlP78YwzxNeJZrtinmq47k5zjgrNPEs0/yzrNKA2+Rs4BaUFCxzbrDOKcJ6zBRWKWFIftuMKadPklUWUaOL5n6nTeVdU4EMY4USjeWcb9SC0o5Uzj57uh/yzhllnAuUay6oLHM155drlFkucE65wtnkSswj55RB4UUejghnTetFHpYvxPdPBXsnGORFft8lCTkXTKMsMM7zX083YfoN0ewbp8k3rubexDz1JtHMG+eJN4Hn3YQ47YZp1vEaBIWB57xxDYLUi/zd04zeZQTTnS5KMM+TXSWa64p5qutTYzDVhmiqjdNUG1dTbWKeapNoqo3zVJvAU21CnGrDNNX44CeFgae68eAnqRf5u6cZvcsIpjo9J8k8T3WVaKorpqn+bZzl8cmE33CGkdXZRUZP1rkQHq1z7M/WOYNH6BzCM3QO7SE6R3UGgflzMmUrXjErKD7RWJC4q1J4uq5WaLx/UhDdDymMboIUFu58FBLvKv4G8zZeTdyh2KDLg7L7iIj0oDo5qHCbEHAeayfG2omxLkOK2f0+QOKRr8LTrZxC44NeBcmHw4tCT38VFh8JLyg+2/UbVscY/dcTfMS0bMVHTAsSj5gWnh4xLTQ+YlqQfMS0KPSIaWH0iGlh4RHT155GPow6tD15M9nfzYet+GxOQeLZnMLTszmFxmdzCpLP5hSFns0prE4RoPjY0ZvRn2GrZj6i4MounMetPN7zxnjP5XjP83h5IkER4z2nZ5HewEQ68WXkzQQfMnwzrhSuXcal+Q2tDyOtVzFh9g1RSIyruJiYg2MSRci4DpPJHCsTKEGMU5bgdWhGlC+N69CkngvUiJXMIRPbseJsMn44VimvTODkMiFmWL7UbghyDa+rUyvOOnVdfZTqg8SQeoYonMZVOE3M4TSJwmlch9NkDqcJlHrGKfUqfysQpZ5zlXpVPReoESuZeia2Y8WpZ/xwrFLqmcCpZ0JMPXy0nTIEUg8fbadWnHrq0fYqpefYjqXAoT3wHJtuIsKsn2PTaiPkjefYtMypqp9jk+rbpsDJe+h5B9nmvCkcjLlO6tjkazFPCR7V/5+Y52SPckr5KFPipwdBZJZiEaTnQOQnUkE0nwLZNximu5z9vfSt+g2A6hkToDApwGEPQGv4AVk4gVkMgY2BA1Lz15G/oPoWSxiQONV4S8UKNJ5qvBVlCQqdarzFAgQUTzV2aHeO98K34rsaBcV3NQoS72oUnt7VKDS+q1EQvatRGL2rUVh4V6OQ+K7GDl0tFzTyeu7qbXafeOZbdZSAqrEgwlECh1EihVNXwHXwgGzwwGzwzj72nz925Zzr2NgyjGqZZ2vZmJqlnJplnho+nQVFTJqdzgLKM2Sns45WcSsPZBW93IV1dzvPU74JpbjJ9rFpeMVGesUmewU/kgqKcJGNcJFNcpFtmPA+buUk7XPm4buILwlRENK7iMxVhNS7iCxRrPK7iCxwbPhdRMbktXj8fkqIXFcfv7OY/TcdvzPXTpyP31kgT07H78TBxQxRrRgnnzauHMHEbAsmkTcYZxswgQ3chOjihsko/LXPhQodmXrFXa4Ftnfj5PHOhdGb2K45Zfmmke8bZ/M3gVeAKqRloArLHAxeEIwfygGxNJjUyIHGImFyK0V4uTDeSAVeOCpfCdQYul5HqioWkyrBimKo4ahybTGx7Zy8yhjXS43JLWNNi44J2li3Odt6gRrlpFajcKCPa1IUOI5R5fUpqjLWsYmIeGzAcY9qCm+UU5CjTKGOIq9k6XLAqRR4VTtwOUA3ESucvhyg1cZq17gcoGVe+fTlAKmi7UeBiz6qvCJGVXpibCKcMTZgf4xqssEop/UyyrRqRpENM6jsaCTGdTS+SNeq5bSmRpVXVlLV+hqbfM1L5FobW/CKG9W07kY5rb5BzmtwfMmuFc60Hkf16xmo1ubY4GAGttbp2OhwmqY1O6oHEzGt30FdNYWDYWus6KGNWtdDA1zdo3BwbdIrfWzytdUnrfpRbaz9sdHhJSofB0T50BK1bdVA3xQOWkM+Sjif4BM953g8ACg+x3OeVn7g6XriOa7xgOiZnfOwmgMLT+qc47rtqNroiRH6IZR6PRnH2nj1xjmN+tCrNy7m8TdevXHOkWi9euNCjEnj1RvjFJ30ysrIG6+sEKdgHXplhUQVtq+8skI6BfDgKyukcigPvLJCGgVVvr2hIsjhlW9vBEqhbb+9ESQV1oNvbwSVQnrg7Y2gcTibb28EhUIpXm3IseIw5lcbHFEAG682OFeha7/a4BIFrfVqgwscLv1qg2MKFL8SQKHgEDVfCUgKBezwKwFJVuH76isBqQUF8yuvBCSdQ3vwlYCkUqAbz8LruHLYxbPwwCjUrWfhQVDhPfAsPGgU0uaz8KBwGBvPwgOn0KVHxzkqHC77iW0IlzMKlwsULhdUuFzN4XKNwuUCh8sVDpcrMVzOKVwmULiMc7jGXw6GYFVCoaqYAlWxClPVcpCqQiGqmANUOYen8hicSik0I6bAjJTCcjGG5IVvxdOVCwwFIHG2d0EhABrP6y7C0IHRNYQLGDKQeJK2Q/6zzGUrzlxB8SzLhbO4FVOhIDHfhae5LjTOc0Hy94KLQrNfWD0/BRSnd4d20/rMt+IpS0E1BIDEdYvC0ylNofH6Q0F00aEwutJQ2DhjQOoIHMXT2YtJekR7h+Kguzw5dqUGkZ6vTs5XuBADOE9jJyarozLdMbu44tm5u6Dy0rfiKXlB4jy88HTyXWg84y5InmYXhc6tC6s5Biheyr2Y5Ke2dyxfiNjRTZjZTc7GTSP1NjL1Njn1+DICKCIpNyIpNyEpp6PrwVbs9RRdD5AYyJRcD2gcyDS4HjDq7hRcD0isoekEH7iboncBEo95Tcm7gMYHuqbCu0ChR7em6F2A4oNx09G7Tn0r3gyYoncBEjcFpuRdQOPl/2nwLmD0q7VT8C4g8Vr+FLzrCRC8Cj0drWv/I2VTtC5A9nYJoPwLbVOyLqT4donj+BNt02BdwPztEmNmXT7UZUi4ZS6SZaMilrIilrki2LpAEbVi1gUoFwZdqJ2Sc/m87Zzr1MZvzgUoJp5zTDynlniO+GaTK56SzjwlndWUNNKHeupz3fepvi9Hwxt/qekSHQ+ZvZEGLL6IAwK+iQPYXsUB5m/cAPRXbgDWd24A2RtpznbW99y34ot8l8n6gKd3+y7R+gDRxIFigwFW8xJQ7bajmS2wl2h9gOLN4stkfcDTscElWh8gOgK4DNYHLFxHv0Trc1RL6CmQW/xl5svR+174VjyfuETvQ5TPJy7J+5CC9wGOpxmXwfuA0WnG5Wh0MARzOmTq1cxL8jrE9GrmpXA7lPitzUv0O2T0hublJP8Y9iVZns/XJjbaiIFuWgPd6IFuxEDZ91BSA3XnQxhfT7206/RgBukmRBLY0/RtiKQKd0s3IpKQfC7fikgKOV66GcECeF96x4y5ckH1jhlL5Ietd8xYZmdM75gxJ4+sHIzSELmlcbJM48o3TczmaRI5qHG2URPYS02IhmqYXNVvMoVS5XtPXANgc4bIaY2T3ToXnmtiNl6XsvuaRhZsnH3YBDbjKizFoJMtmyAty1ThW6axeZnQcDDTk42ZwqZtAjt3upPIgvDwKm1E8+TmJhyMj/J101rxaTm86c34ZK83hQyfbvlVJ1T3/JTGzt+866caCP9X9/2UllYBeedPibQWqHt/QoMVASktCiipdQH1vDSgSqsDSnqBwBa8RqBGywRKtFKABIsFUlovUKIlAyW1aqCeFw5Uae1AiZcP1HgFQS0uIqjQOhJuBgfHELeJRYGBaSOlNQUlWlaCJFYW1PPiEtS8vqBMSwxKvMqgxgsNaEsdkrTcoCYdFRsIU0WZfRW1hrVik+SuKPIChBqvQepRAaGJlQjUjf5QWo9Q+1oA1aqE8oEAttYmbHIogHmFQjEuUkM5TfxXQsqW/66PoXj/yYXd3yTc/5WH3dY2bPl1nrIVr/MUlK7zVNfDHhmibhmXfasqdLCibUZ97gH313ju9Ngx7LQh6rRx2emqQqcr2mbU5x5wp43nTodnlaDnkVP3oyjHEJrAQALfNnjf6B+PK4p5cJDuMDSkNDCU5LCgAQwK6FbSXvaJh4NSHkx9zAdGYoiGYVyOoaowgIq2GfW5B9xv47nT9tgH9NoZddsF2W+ToePGtoL1oh/cdxdy5+0hDOi8M+q8C7Lz4c/Tjx0Nf56eWS/6wZ2Xf55+1MYHJaDrlVDHK5bdhr96PXYQ/up1JH3aN3dX/NXrUam/QAe9NUTdNS77i38kd+we/pFcQn3uAfdZ/ZHcvfR+oAvbc9ny4wRDqpdF8IObijbhq+nv4b1PxxrAZd/o7+G9FwcUoNCN0Pfh8AFY+LWK92OkfauPW3kMOY5XA/VA7LY+Be2T+gGRqzH4sBX3dZWDD0K8xXs1dtx70MeZvKKOj7QeC3zMCIZgSPamqguBaETGD38RjQ2PbaiTPEp1bDNK9uJrRjBUQ7KHVV0IREM1fviLaKj4viR1koeq3pes0nBat1jMaLAGcbgOdT9NX0jIg3bla1/HAzelV11Og3clD39/cjRZf55d7T5yOtJywp3/bM1xlhta/MLh9GxybTstW1f7v10LyE38Ovj3dR2ob9kIHeHQ9nTcA+7YEO298of86W1GvUDUI+OpW7uKG4O03zleSj028hA+sA1bX8JWH7diR1J97yldpx87whd2jyN+yJ/fZvQlo14g6qb0or1EPz4w9pVfTz+O+CF/fpvRl4x6gaiv0kxGSbwmUjus3hI5FtpD4+u2Df6lwfsW5+G0zqpGPV+IG0ckrsEcJ+VBftFW0i+S9prSKBonU1X1a3M8CFB4FCA96O/aavxF476BeSio5bHQayHjOPitkOOIH/Lntxl9yagXiPqrzgdHiV8PGDub3g44Jv4gvmIr2BfBesWoy/I0cNT4Gf2xz+kR/WPiD+IrtoJ9EaxXjPosz/722ocJXiSvpItb8aigoHotHFH+AePC05HDnuKflHUcf9e4IPr14sLo14t3bGlHOWUrHjIVJE6KCk8nGoXGk6KC5ElRUeikqLB46FVQfDr0wyRcgq6IDp1OohDozX6unvjGOGwg40whgTgA9jAg9GkCOsYGSA0AoDpHjvykXVxeaF5aqO1gpEbicA3HMTvOAzctjd6VFAKTYhwMUzCMU0TyZeCbxmXgm4OXgSOEMOkfgdBiDNmBn4DQLVL42j8AoRvEUDZ+/kGrFNao3rTCxCEmVQW6/knNY9+KNsN/SHNPP43utHfcT+hOgKJ9Ok+W/QndCRDfA3LFHdSZXVVyZHfK9ij/SoYWaCyHfiVDN8kjbPxKhlb1uFu/kqFlikbjVzL26iKszouwBi/y6ruQ6+4inwct8knPonHSs2if9MQrAvj1+QchtEC7av8gxNig/v2XbUa9QPT16u/P7qXbCV7pLFux2goSi3rhqQoLjYt6QXJRLwot6oXRlc7CwpXO2wn+2d1bHDEg6N2e3k3qTWXbikddd2mwwNMh1t0k3DA2JP9GxN0k3h42RkdZdxO8GVzJ7uD11LbcHsU9FH335C4+4RURBaH1fFcUczjE012R68CoZ7uiwCHKT3YFDMHKt5LvUrUzz7HD37t7Qohip3/vjsUcu/R7d8x17PLv3bHAsePfuyMMscNLLhQIjp265FKl9JtCT6TAcTzwm0K6iYip/k0hrTbi2/hNIS2nWMvfFJIixj0tITKUaQ6aS8jYoN47gzkwRNE3ruJuYo64SRRr4zrKJnN8TeDImhBjivcbTyPqcyA4gu2bi8sJ3llbhnV4t+V/uGkZdrXMe1nqHaB3EYJd4UXck9iqzx/kPbcdbpmucCoOHUlXOE9E+77xPdyvrzw3Aoeu2DV5uRIpdEs++xEodengsx9LvGpHCLqCV+1OYqs+f5B70H6Kg47FsRekQGdIgT6R0je/jXvIcu5ouF7IDDoXrheeULtefJa7cuCxkXrWgX3IB9OGoAd4fE0f5P2r4+tRQksiBLuvCHafjWvZMK5l27g+T/D84DN+FlA6K6gXzFp3GKPeEuM9RvoqU1+4uug+3Ncv3f//m9NnptYPXscPGa73DIXmN3wjjnGMmrrpG1vEa49BC3ERY1jFsBiuHVJavRostdBZ0WI3t88ErjtUWvzFUtLqTWuthu6oFnnyq+SFMgRp96wHbsUJK6j2EpF1DuB4/f2ZkeugW/o4urF6KFt2KcsRXb8ywV569y9bxq08EHXlvPBU1IXGk+yC5El2Uegku7CYvQXFK+c7ZFfOPWx/hAbrMO51NJcVZhEimx+EjVje11s5ZSO0cv5QL0yu9oYHG+GC7Cra3QjtdrsPzRBNlHFKO+ece3Qvv0ay4uvcklPRnqn2uBiipDQuo2lPSFF6Vr4UqDF+ma0m5pQ1ifLWuE5ekzmDTaA0Nk65zM9O8DT8kZuuc+A4v41TkjvnTHfl0AR5bhtRiQ8nDZTJfSaxDsS5wKjY8xweEUOUDMapGJxzMfBfqngW8XVuycVQORSDISoG4zLW6Y9H0A6WAjXGL4tB/e0IlqgYWn87gmUuhvS3I5hTMaS/HUHT8Eduus6B42IwTsXgnIvBlUMT5PluRBUDXMGiTO4zicUgLl9VJVxUwZKIAidGVLk8SE1FEnUqlSBetz6Vyibfr3uqBC6hg/frVJtUTukGlxYORlAXWPMGl27AxXbwBpdulApP3+DSKhdhUFMpBvWP1sfWrWlIxRlVLlFSU6GS/vU0gLqMXJYuXwqV1de3OBVz6zroXo/Xi2qYEOUHEj0gATbuAcJLjXQKPG6Vv905vuhnyJ/1IU63yIN6YadQlUwT2f0JyvHM3JAlB3G8EBClevY+npa/yOKo7PN3mMOJO1rZigVeUDUbQKLQC0/VXWgs6YKoRAuj+4mFhfuJhcT6fADrfWFk518nvhVvOj4kpwKebkY+oCcBIiMCxX9xzVm1HEB1HI7op8u2MLRTI27N2+zH24YJb6XzbrPdbpseuxXGus1uus0WusWh7Qeyu4Ls9x3KVry1UVB8rm6P8o2OwtM9jj1Nz9UVHO96FER3NAqjmxn9WCsnvhXzqsdaASRSradaARpTrQ+1Asx/ws/ZWCtAYo71qVb6MA99noc+z0PfmIdezkOv56HP89CLeegb81CK4KltWRE4ikXgHIvAqRWBIy4CV7wInFkROLIiMET1XRdEzCpDlFrGKb+MqyQzMWeaSZRuxjnnTODEMyFmn2FKQb7MQqGAdDBEGWmc0tK5yE0Tc4K6lLPUNEpV45yvJnDShms3TyOi9G1cuyExJ3K+dkNcp7S4dkMCJXe+dhM5pzncpINMR0rJjhLlO0oq5VHPWY8qJT5KnPuocfqjFisAFSqC/C6IiBWkG1KqBpSoIIIkagL1XBZBzZWBMhUHSlwfqHGJgAZVgpQKBSVVK6jnckGVKgYlXTTYgusGNSodlKh6xGtAY1L8OYHnmP+EHAASnlj+k2ccMJ9n/UnzCzQ8hfwnziag+Lzxn+DjTGKn2cUTzt0XHp6UNBB2cMY0pOTfI68nm10mcVyG47gc53GZlsblShqXSXFchmlcxmlc+JJUp2kcX5DiGKOUxxn0NNaopvEGOY45SDTuoMHY//O//w/7Vd1G",Dve="eJyNnVtzG0eyrf8KA0/7RMhzRIq6+U2+zMX2mJYsEuJMzANEtihsgYQMEITaO/Z/P41CV+bKlaug86JQf6uArsrKXNVX8H8m3y9vb7u7+8m3k4t/btazm+7o+PT0xcnRsxdPXzybPJr8dXl3/+vsthsa/L1bPHT386vZN98tF9dn7xfzPzbdrslmseAmR7smR9Bmdjtf9NxqEKbd/Objbve7Dwzb/7ifLeZXr+5uFkPLb45PBrL+6/xLd/3b/P7q4+Tb+9WmezT5/uNsNbu671a/d7vP/vjlvru77q7fLG9nd2Onv/tu+WXy7b+/OX5++uibk5MXj46Pj08fvXx28p9Hk/Oh8Woxv+t+W67n9/Pl3W5Xjx+D8Pbj/OrTXbdeT759OvCLbrUuzSaPH5/85fHjx8NOfl0OQ9gN5/vl5361G8XRf139n6Pjly+ePtr9+7z8+3L378vH5d/nR6+ul++7o9/79X13uz76x93VcvV5uZrdd9d/OTp6tVgcvdl9z/roTbfuVg8D9YDO10ezo/vV7Lq7na0+HS0/HP0yv1ve95+7b4ZGi6NXfzua3V3/3+XqaD58wXrzfj2/ns9W8279l6GzPw67up7f3fx+9bErc1B68vv98JHZ6rqqQ8PvZ5//Pk7J8+MXjybv6tbTJ8NcvFpf7QK9GsUfOtv+5uTx80eT3++v/z6dfHu8E4f/X+z+f/p4P1//7O5X86shoP/+n8n03eTbk+dDo1+Hrqw/z4Y4/u+jPX7y5Mked1+uFrNb46fDPBb+x2Y5xOv9wpSnT5/tlbvN7fvdRN3cZe16uVjMVsZfDBNT+OdudbXL/yo8PznZC7PbQVoP8THJOlx6UGY89/rzbNXdLboPLYk+VrsxW+++cf3JO/5iHO7nxWadu3A1lO0s7+Jj//ljd5ebD0OZL8VI1ovZ+mMO1p/dapnp8q7L8H4rWt5/XHWi7YflZiXo/EG0Xc+/CNg9dGJuuxBTT4f5nUirq+VieZfxurudR8lmYLGzgUS7PzazRcY3q24oZx/ms+PjmjTdulhNVV4+fzrOvci+Vxl9l9H3Gf3ge372fI9+zJ35q3+wpsLf8nf9PSfMP3KYf8of/Dnv8RcvvRryf+YP/pr7dZYH9Ftu9Tp/15v8wd9zv97mD57nD174rJ2OEz3Nrd5ldJn3+K+cfO+HxexTdx9sw0L+ftBinfLnoqdYKs7WV/P51Xx1tbnNs7bZ2fZ6WH+6vMfib6Ez9rFZHs/73Ooqt7rOrURxfsgfvMnoY+7yPKP/znv8lFt5CduScJv3eJfRMqPPouqz1QsLXOdI3Ofv2uQPPuRK2OZWwkl7R7vjnmL6uau7/IqJcPLicc3KVaP9oWy8ny+um0v99XIrzD2szh6x+3Kc5slxXCvuw+7AEH3Wx6zWjg+L5Wou+LprfMvVZjUs41cewJMnWDbreTl0TdGtRy26rG4280G5Xd7rI4edXL74K3IMvSXOh7lg4vhpOJSThwPXs5ubTqTtnuOhGB1w7OauW3Wi9odjodnNavYZTO1pzazhdKITPujhfT9bH4jwYXWljxVsAqI+nBSMnx8Oseef1/O1kIax3n9cbsKxYlr2Q3L7zK1mD6IeZlebe3XoUrz8w6L7krVGZd3OrlbqcOf9qlM7vl7ez65Cxbk0H2YSA2DKCuvQO9tdDyFVx6ibu5vZanO7mG3EbpY3w2HmJ/F1MxwHzMttyFkXXvlhz5PnI1uurj8Mx3nhwNCPUOIi6wcgkfsezmAPz57aHm4Hp9sscBe2sszEYnu9K/r1Wixgi7hjX3kityOSpRjUUJ/DKfGQ9+Ic4h9pSt0JYgb68h/zxpcmOan+dXH2/Ogo96AuF9fzhzkktH8k9swPmEVxeLcbHzo/9KG+EYN1OfeiMoGh5q/0/YVScdyeiBnVg38m9s5ngj7gZwFpJ37OMHgEnIScVCdWA33+5HkVx6seYlfkOr52xjzwUeq4/Ko64OXRytFoqn6kL4djp1Ktb4vGCuFMVgkZooe5Zk/0w9e499OX9dRz+Wd3dyMy903chZ/FqUF6chwskkOZ+4oXEjuabYz1isfq5z85chbVtx+XKzGqM9q7h4GqwE70qOBP6yJGYbNqoh14xPTiVi5wrDflKGcl+htT0KPY4tFWzQRvN4v7+edFL/rVKP+3cYCWSMPx1v18trief/iQ56pvW8OvcT+esCJZvDYOptmBVactXTXGe9eywVbG/BoD5Ish1T9efhuOGPAanJ0CrZafujs8ETJzXHU383U89PUSjZMNy3Gui3qosd4MVR3ORzzYdAxphdmIzLKV6v9qfOBfVOGnL+uxa7nSFa+DWZx/vP+Y4fdNA1wo37Kx3DdMpmuuji3hVevw4UBWxgD7+XKrNHjf5gqtGWktPa1ldN3ac65j2/fBwxJeMetxQbe4FwZ+H0zaPXG7POCIqWv2dbcbMZLGGr6Ux5leC3zwY1ef4hHOiyen4ONDAq+GRF7n7/ud8/W0Tv6isZD8fHD9/SVOnJ9K2H0dZYrJFtwyYpict2r8l9hti8MQtY+zBSwNtch3pyaxwn0u1BJgvhwPmzzVvjKBjVLoWgO6iWaKAxqnVc2qPhv5XR4gWgbLnltCXA820amMbSz531MnbOEitzk1O7+eXymj/SF+ERyYHTrc/ZUOa627jXl7czivD+7rVeM7XzVNOp4O2AzE73EjPnBA+WNruad9+yVieXZnB2TxSMC+7WAp0ASZXx7c02J5s5vvu6UI97Jtppu8jtUMGr6qUck3Bye3g5XcY95I3zu5jtvFnbt80Oye31ruftzs7kb+59Hk525199tsvtrdQ/735NXubvXk0Tenj//zaNzau0dA+35GNJo6wr8NW099a+8qAeHAUDgL33OWu4BLb+A2VYHu6z+g4DxBGUMW2P7qUED7wkH0Omy9HbZe+laNGaIwehfOQyzO6+gBhdEDh9EDraMHRKMHxUYPbKzrwIqdILkYtl7Y1nTYemZbl8PW8bFv1iEhg74D3gybT3yrfhBQiAVw+D6gNRaAKBagWCyAWSyAjbFw8hAyYRu0Pm7lEfW552MjLE1DVBzGqUidc6VWBcrVENWscVm4VT3L380lbFzVsYm5mE2iijauy9pkrm0TqMCNU5VX/jojqHdDVPTOVeVX9TxHlD3AuDICE7MbmESWYFz7gslsDiawQ5gQbaJi8IqKwDAqQtcwxtZhgvCPqoGJGKK6M67sxMR2ZbKxGNfuYjJbjAnsMyZEs6n4ISfkNrfqBWoEQrjQaAboQoaovo2TCzlnF6oKuJAhciHj0oWqepa/m13IuHIhE7MLmUQuZFy7kMnsQiaQCxknF6r8dUbgQobIhZwrF6rqeY4ou5Bx5UImZhcyiVzIuHYhk9mFTGAXMiG6UMXgQhWBC1WELmSMXcgE4UJVAxcyRMVnXLmQie3KZBcyrl3IZHYhE9iFTIguVPFDTshtbtUL1AiEcCEMDVpR5FTpUSRTIpGdKchgT5GTR0VRGlVoctbYH1tWFJVvxRbZvKJODhZFbWOxDXtZVMnQokiuFsTXDQ7+FjmZHInK6UKT88a8sOdFURlfbJHdL+pkgVHUPhjbsBlGlR0xqtEWgwbeGDgYZODoklFgq4yq8MvQAEwzcjKMKCr7jC2+4itspFHUbhrbsKVGlX01qtFcg/bQqItto33f4ofiJ1zXCXouUjIqlMhvg8RuCyJ4LVJyWpSkz0KDM7kf9liUlMOinv0VVXJXlLS3Ygt2VtTIV1EiVwXptaTgqEjJT4Ok3BQanMvYs5OipHwU9eyiqJKHoqQdFFuwf6LG7ola9E5QwDmBgm8CRddEzJ6JmnBMkMEvkVK1o6S8EvWDXsA+iZJ2SWzBHokaOyRq0R9BeZAZvpVte03bkRKuOI4eLdEQmYpxMkPn7IRVARs0RB5oXBpgVc/yd7P1GVe+Z2I2PZPI8YxruzOZvc4EMjrj5HKVv84I/M0QmZtz5WxVPc8RZU8zrgzNxOxmJpGVGdc+ZjKbmAnsYCZE+6oYvKsiMK6K0LWMsWWZIPyqamBWhqj+jCubMrFdmWxQxrU7mczWZAL7kgnRlCp+yAm5za16gRqBEC5U+4o25Iwq3AUyIhDYiUwCK3JGXuSCNCOTz8T3sx25oPzI1WxIrpEjuaAtyXX2JFfIlFwgVzLhtWDgS87ImEBQzmTyuYgve5MLypxcze7kGtmTC9qfXGeDcoUdypVoUcbBo4yBSRlDl3LINuWK8CkTwaicUYG6oKzK1QP1y2blgnYr19muXGG/ciUalvEHkatb0a5XrBUT4Vq1Y+hazsgIXCDXAoFdyyRwLWfkWi5I1zL5THw/u5YLyrVcza7lGrmWC9q1XGfXcoVcywVyLRNeCwau5YxcCwTlWiafi/iya7mgXMvV7FqukWu5oF3LdXYtV9i1XImuZRxcyxi4ljF0LYfsWq4I1zIRXMsZVagLyrVcPVC/7FouaNdynV3LFXYtV6JrGX8QuboV7XrFWjERrrUaf9HDd1cJmUDF5FeG2a1GAbyqEnKqiqVPjeJZ+l72qIqVQ1Ut+1NVyJ0q1t5UVXamysmXKiZXGvHrRMCRKiE/MqzcaBTPUwzZiSpWPlS17EJVIQ+qWDtQVdl/Kmf3qTx6z0jBeUYCvjMSdJ2K2HMqF44zSuA3lVBlVay8pmrNmmOfqVi7TFXZYypnh6k8+stIH1LWbVObPhM9euEqY66jrRiiwjVOxuKcnaUqYC2GyFuMS3Op6ln+brYX48pfTMwGYxI5jHFtMSazx5hAJmOcXKby1xmBzxgio3GunKaq5zmi7DXGldmYmN3GJLIb49pvTGbDMYEdx4RoORWD51QEplMRuo4xth0ThO9UDYzHENWecWU9JrYrk83HuHYfk9l+TGD/MSEaUMUPOSG3uVUvUCMQ2YW+G+iruBU/W1B1DEAipIXrPcRAFkRBKoziU1gITSG1fB3tquvYtyydHIXuAscEc1q7C4imHBQbCDAbCLBxIHvywxj3U9+KbvoDxh2Q8NYfKO5Ao6P+EOIOzLoLbOwukGibP4wl71vTsLUr9Oe+VUcHCLrsdP97bHVyd2T8yTVDo/9i+AxRDI1TII2raJqYQ2oSxdU4B9cEjrAJMcyGKdaVX2Q0zQhCb4jibzxPQpVoJipO01FeCIzTURFPR+U8HZXL6aiimI4q8XRUnqajCmk6qkDTUTFPx8gvMppmhNNREU9H5WI6RomnY8Q0HX8dZ+KFb9VdAarxBxRCDxw6BLQGHJDFGpiFGdgYYSA1uI524zzxrToCQHUEgMIIgMMIgNYRALIRALMRABtHAKSOwFGdrePHhmymRvbTOFUnvhUH+hNOFSAx0J9oqoDGgf4UpgoYDfQnmCogcaA/wUCd2DgdbeJWHuamMaaNHNMmj4kPyUARo92I0W7CaH+e7E95nvhWPC4qSBwEFZ4OggqNB0EFyQPJotDhUWH1fAZQPBbaoXLc8tS27FjIUT2BQRQOj5zj4RFQe000YDtqcuTHRs782MjYcjcC37JIO4qRdo6RdmqRdsSRdsUj7cwi7cgibWgT4r7J+aHOO36eqFOOnyfpbONnkdWgiPzg04ufJ3xmsSO9LVBlKy7RBaWFNryLH+qCBAoBqSoa1CQHhhpQjEjV4aJGHDmSqchIpXqLKiQ/CVSFpFJBsipqk5rkMuUGuWKpBRUvqVzHJHNJRxmqmwQqdFJVzVOTXP7UgJyAVG0K1Ij9gWSyClLJNaK6aSUSewmpXy8k4TDU4GAhNXyHGh0upORGJEdjiiJ4FAlkV6Qm5/plgtfwyla8fLdH4srdTtgd3o+XnXabUztG3W2VC1knvmklDgzr0nH8Bc1BOo2S4H6N55dJurzzy0Rd2fklv6PqiIJw8B1VUzEc+Abni4gwMPkNThZEiKrWilPQW2KfA8Fha7/1+EvMK4ggCRRHVlU0YxuMaVQgslHA+JLCUSZZxDq2aEVctDrcpG+FkuegXcBjg9FecQ4MUfSdq7hXFSNeGcS6IoyyMY6vCSKyVWvFNOgtsc+B4AgaT7EbjtPKCeZT34q3HAqKd4MKEjcgCk/3HgqNtx0KolsKhdHdhMLCjYRC6nrp6K2Z+RnOOaIw3S5chO+Zhq13Ycuv0JxN0sWZs4m6LrOj9dzXd2nnviOqFgPTYIjmwjhNiHE1KybmqTGJ5sc4T5IJPFMmxOkyTHOG6w6FgWevse6QepG/e5rRu4xgWtNCxDxPcJVolivmqQ4vU8F8R06THkWa+Siq6Y8tcg5EnRIhipwNUeWUiGrMi6hRcqT3OlX0OE0Ovdepmlw09jdt8HcNDvmjX2+UYs6koFM6BY1zCl5EgYxCSvmEEmUTSiqXUM+ZhCrlEUqcRahxDqEWMwgVyh96hy3HiXOn/Q5bbnAh9zOV9J2kkDHq1S4h5WwBlXIFFM6U+qYApIkhyhHjlCDGVXaYmFPDJMoL45wUJnBGmBDTwTDlAr7sQ2HgLGi87EPqRf7uaUbvMoJpT+/GMM8TXiWa7Yp5quO5Oc44KzTxLNP8s6zSgNvkbOAWlBQsc26wzinCeswUVilhSH7bjCmnT5JVFlGji+Z+p03lXVOBDGOFEo3lnG/UgtKOVM4+e7of8s4ZZZwLlGsuqCxzNeeXa5RZLnBOucLZ5ErMI+eUQeFFHo4IZ03rRR6WL8T3TwV7JxjkRX7fJQk5F0yjLDDO819PN2H6DdHsG6fJN67m3sQ89SbRzBvniTeB592EOO2GadbxGgSFgee8cQ2C1Iv83dOM3mUE050uSjDPk10lmuuKearrU2Mw1YZoqo3TVBtXU21inmqTaKqN81SbwFNtQpxqwzTV+OAnhYGnuvHgJ6kX+bunGb3LCKY6PSfJPE91lWiqK6ap/m2c5fHJhN9whpHV2UVGT9a5EB6tc+zP1jmDR+gcwjN0Du0hOkd1BoH5czJlK14xKyg+0ViQuKtSeLquVmi8f1IQ3Q8pjG6CFBbufBQS7yr+BvM2Xk3codigy4Oy+4iI9KA6OahwmxBwHmsnxtqJsS5Ditn9PkDika/C062cQuODXgXJh8OLQk9/FRYfCS8oPtv1G1bHGP3XE3zEtGzFR0wLEo+YFp4eMS00PmJakHzEtCj0iGlh9IhpYeER09eeRj6MOrQ9eTPZ382HrfhsTkHi2ZzC07M5hcZncwqSz+YUhZ7NKaxOEaD42NGb0Z9hq2Y+ouDKLpzHrTze88Z4z+V4z/N4eSJBEeM9p2eR3sBEOvFl5M0EHzJ8M64Url3GpfkNrQ8jrVcxYfYNUUiMq7iYmINjEkXIuA6TyRwrEyhBjFOW4HVoRpQvjevQpJ4L1IiVzCET27HibDJ+OFYpr0zg5DIhZli+1G4Icg2vq1Mrzjp1XX2U6oPEkHqGKJzGVThNzOE0icJpXIfTZA6nCZR6xin1Kn8rEKWec5V6VT0XqBErmXomtmPFqWf8cKxS6pnAqWdCTD18tJ0yBFIPH22nVpx66tH2KqXn2E6kwKE98BybbiLCrJ9j02oj5I3n2LTMqaqfY5Pq26bAyXvoeQfZ5rwpHIy5TurY5GsxTwke1f+fmOdkj3JK+ShT4qcHQWSWYhGk50DkJ1JBNJ8C2TcYpruc/b30rfoNgOoZE6AwKcBhD0Br+AFZOIFZDIGNgQNS89eRv6D6FksYkDjVeEvFCjSearwVZQkKnWq8xQIEFE81dmh3jvfCt+K7GgXFdzUKEu9qFJ7e1Sg0vqtREL2rURi9q1FYeFejkPiuxg5dLRc08nru6m12n3jmW3WUgKqxIMJRAodRIoVTV8B18IBs8MBs8M4+9p8/duWc68TYMoxqmWdr2ZiapZyaZZ4aPp0FRUyanc4CyjNkp7OOVnErD2QVvdyFdXc7z1O+CaW4yfaxaXjFRnrFJnsFP5IKinCRjXCRTXKRbZjwPm7lJO1z5uG7iC8JURDSu4jMVYTUu4gsUazyu4gscGz4XUTG5LV4/H5KiFxXH7+zmP03Hb8z106cj99ZIE9Ox+/EwcUMUa0YJ582rhzBxGwLJpE3GGcbMIEN3ITo4obJKPy1z4UKHZl6xV2uBbZ34+TxzoXRm9iuOWX5ppHvG2fzN4FXgCqkZaAKyxwMXhCMH8oBsTSY1MiBxiJhcitFeLkw3kgFXjgqXwnUGLpeR6oqFpMqwYpiqOGocm0xse2cvMoY10uNyS1jTYuOCdpYtznbeoEa5aRWo3Cgj2tSFDiOUeX1Kaoy1rGJiHhswHGPagpvlFOQo0yhjiKvZOlywKkUeFU7cDlANxErnL4coNXGate4HKBlXvn05QCpou1HgYs+qrwiRlV6YmwinDE2YH+MarLBKKf1Msq0akaRDTOo7GgkxnU0vkjXquW0pkaVV1ZS1foam3zNS+RaG1vwihvVtO5GOa2+Qc5rcHzJrhXOtB5H9esZqNbm2OBgBrbW6djocJqmNTuqBxMxrd9BXTWFg2FrrOihjVrXQwNc3aNwcG3SK31s8rXVJ636UW2s/bHR4SUqHwdE+dAStW3VQN8UDlpDPko4n+ATPed4PAAoPsdznlZ+4Ol64jmu8YDomZ3zsJoDC0/qnOO67aja6BMj9EMo9XoyjrXx6o1zGvWhV29czONvvHrjnCPRevXGhRiTxqs3xik66ZWVkTdeWSFOwTr0ygqJKmxfeWWFdArgwVdWSOVQHnhlhTQKqnx7Q0WQwyvf3giUQtt+eyNIKqwH394IKoX0wNsbQeNwNt/eCAqFUrzakGPFYcyvNjiiADZebXCuQtd+tcElClrr1QYXOFz61QbHFCh+JYBCwSFqvhKQFArY4VcCkqzC99VXAlILCuZXXglIOof24CsBSaVAN56F13HlsItn4YFRqFvPwoOgwnvgWXjQKKTNZ+FB4TA2noUHTqFLj45zVDhc9hPbEC5nFC4XKFwuqHC5msPlGoXLBQ6XKxwuV2K4nFO4TKBwGedwjb8cDMGqhEJVMQWqYhWmquUgVYVCVDEHqHIOT+UxOJVSaEZMgRkpheViDMkL34qnKxcYCkDibO+CQgA0ntddhKEDo2sIFzBkIPEkbYf8Z5nLVpy5guJZlgtncSumQkFivgtPc11onOeC5O8FF4Vmv7B6fgooTu8O7ab1mW/FU5aCaggAiesWhadTmkLj9YeC6KJDYXSlobBxxoDUETiKp7MXk/SI9g7FQXd5cuxKDSI9X52cr3AhBnCexk5MVkdlumN2ccWzc3dB5aVvxVPygsR5eOHp5LvQeMZdkDzNLgqdWxdWcwxQvJR7MclPbe9YvhCxo5sws5ucjZtG6m1k6m1y6vFlBFBEUm5EUm5CUk5H14Ot2Ospuh4gMZApuR7QOJBpcD1g1N0puB6QWEPTCT5wN0XvAiQe85qSdwGND3RNhXeBQo9uTdG7AMUH46ajd536VrwZMEXvAiRuCkzJu4DGy//T4F3A6Fdrp+BdQOK1/Cl41zEQvAo9Ha1r/yNlU7QuQPZ2CaD8C21Tsi6k+HaJ4/gTbdNgXcD87RJjZl0+1GVIuGUukmWjIpayIpa5Iti6QBG1YtYFKBcGXaidknP5vO2c69TGb84FKCaec0w8p5Z4jvhmkyueks48JZ3VlDTSh3rqc933qb4vR8Mbf6npEh0Pmb2RBiy+iAMCvokD2F7FAeZv3AD0V24A1nduANkbac521vfct+KLfJfJ+oCnd/su0foA0cSBYoMBVvMSUO22o5ktsJdofYDizeLLZH3A07HBJVofIDoCuAzWByxcR79E63NUS+gpkFv8ZebL0fte+FY8n7hE70OUzycuyfuQgvcBjqcZl8H7gNFpxuVodDAEczpk6tXMS/I6xPRq5qVwO5T4rc1L9Dtk9Ibm5ST/GPYlWZ7P1yY22oiBbloD3eiBbsRA2fdQUgN150MYX0+9tOv0YAbpJkQS2NP0bYikCndLNyKSkHwu34pICjleuhnBAnhfeseMuXJB9Y4ZS+SHrXfMWGZnTO+YMSePrByM0hC5pXGyTOPKN03M5mkSOahxtlET2EtNiIZqmFzVbzKFUuV7T1wDYHOGyGmNk906F55rYjZel7L7mkYWbJx92AQ24yosxaCTLZsgLctU4VumsXmZ0HAw05ONmcKmbQI7d7qTyILw8CptRPPk5iYcjI/yddNa8Wk5vOnN+GSvN4UMn275VSdU9/yUxs7fvOunGgj/V/f9lJZWAXnnT4m0Fqh7f0KDFQEpLQooqXUB9bw0oEqrA0p6gcAWvEagRssESrRSgASLBVJaL1CiJQMltWqgnhcOVGntQImXD9R4BUEtLiKo0DoSbgYHxxC3iUWBgWkjpTUFJVpWgiRWFtTz4hLUvL6gTEsMSrzKoMYLDWhLHZK03KAmHRUbCFNFmX0VtYa1YpPkrijyAoQar0HqUQGhiZUI1I3+UFqPUPtaANWqhPKBALbWJmxyKIB5hUIxLlJDOU38V0LKlv+uj6F4/8mF3d8k3P+Vh93WNmz5dZ6yFa/zFJSu81TXwx4Zom4Zl32rKnSwom1Gfe4B99d47vTYMey0Ieq0cdnpqkKnK9pm1OcecKeN506HZ5Wg55FT96MoxxCawEAC3zZ43+gfjyuKeXCQ7jA0pDQwlOSwoAEMCuhW0l72iYeDUh5MfcwHRmKIhmFcjqGqMICKthn1uQfcb+O50/bYB/TaGXXbBdlvk6HjxraC9aIf3HcXcuftIQzovDPqvAuy8+HP048dDX+enlkv+sGdl3+eftTGByWg65VQxyuW3Ya/ej12EP7qdSR92jd3V/zV61Gpv0AHvTVE3TUu+4t/JHfsHv6RXEJ97gH3Wf2R3L30fqAL23PZ8uMEQ6qXRfCDm4o24avp7+G9T8cawGXf6O/hvRcHFKDQjdD34fABWPi1ivdjpH2rj1t5DDmOVwP1QOy2PgXtk/oBkasx+LAV93WVgw9CvMV7NXbce9DHmbyijo+0Hgt8zAiGYEj2pqoLgWhExg9/EY0Nj22okzxKdWwzSvbia0YwVEOyh1VdCERDNX74i2io+L4kdZKHqt6XrNJwWrdYzGiwBnG4DnU/TV9IyIN25WtfxwM3pVddToN3JQ9/f3I0WX+eXe0+cjrScsKd/2zNSZYbWvzC4fRscm07LVtX+79dC8hN/Dr493UdqG/ZCB3h0PZ03APu2BDtvfKH/OltRr1A1CPjqVu7ihuDtN85Xko9MfIQPrANW1/CVh+3YkdSfe8pXacfO8IXdk8ifsif32b0JaNeIOqm9KK9RD8+MPaVX08/ifghf36b0ZeMeoGor9JMRkm8JlI7rN4SORHaQ+Prtg3+pcH7FufhtM6qRj1fiBtHJK7BnCTlQX7RVtIvkvaa0igaJ1NV9WtzPAhQeBQgPejv2mr8ReO+gXkoqOWx0Gsh4zj4rZCTiB/y57cZfcmoF4j6q84HR4lfDxg7m94OOCH+IL5iK9gXwXrFqMvyNHDU+Bn9sc/pEf0T4g/iK7aCfRGsV4z6LM/+9tqHCV4kr6SLW/GooKB6LRxR/gHjwtORw57in5R1HH/XuCD69eLC6NeLd2xpRzllKx4yFSROigpPJxqFxpOiguRJUVHopKiweOhVUHw69MMkXIKuiA6dnkQh0Jv9XB37xjhsIONMIYE4APYwIPRpAjrGBkgNAKA6R478pF1cXmheWqjtYKRG4nANxzE7zgM3LY3elRQCk2IcDFMwjFNE8mXgm8Zl4JuDl4EjhDDpH4HQYgzZgZ+A0C1S+No/AKEbxFA2fv5BqxTWqN60wsQhJlUFuv5JzRPfijbDf0hzTz+N7rR33E/oToCifTpPlv0J3QkQ3wNyxR3UmV1VcmR3yvYo/0qGFmgsh34lQzfJI2z8SoZW9bhbv5KhZYpG41cy9uoirM6LsAYv8uq7kOvuIp8HLfJJz6Jx0rNon/TEKwL49fkHIbRAu2r/IMTYoP79l21GvUD09ervz+6l2wle6SxbsdoKEot64akKC42LekFyUS8KLeqF0ZXOwsKVztsJ/tndWxwxIOjdnt5N6k1l24pHXXdpsMDTIdbdJNwwNiT/RsTdJN4eNkZHWXcTvBlcye7g9dS23B7FPRR99+QuPuEVEQWh9XxXFHM4xNNdkevAqGe7osAhyk92BQzByreS71K1M8+xw9+7OyZEsdO/d8dijl36vTvmOnb59+5Y4Njx790RhtjhJRcKBMdOXXKpUvpNoWMpcBwP/KaQbiJiqn9TSKuN+DZ+U0jLKdbyN4WkiHFPS4gMZZqD5hIyNqj3zmAODFH0jau4m5gjbhLF2riOsskcXxM4sibEmOL9xtOI+hwIjmD75uJygnfWlmEd3m35H25ahl0t816WegfoXYRgV3gR90ls1ecP8p7bDrdMVzgVh46kK5xPRPu+8T3cr688NwKHrtg1ebkSKXRLPvsRKHXp4LMfS7xqRwi6glftnsRWff4g96D9FAcdi2MvSIHOkAJ9IqVvfhv3kOXc0XC9kBl0LlwvfELtevFZ7sqBx0bqWQf2IR9MG4Ie4PE1fZD3r46vRwktiRDsviLYfTauZcO4lm3j+jzB84PP+FlA6aygXjBr3WGMekuM9xjpq0x94eqi+3Bfv3T//29On5laP3gdP2S43jMUmt/wjTjGMWrqpm9sEa89Bi3ERYxhFcNiuHZIafVqsNRCZ0WL3dw+E7juUGnxF0tJqzettRq6o1rkya+SF8oQpN2zHrgVJ6yg2ktE1jmA4/X3Z0aug27p4+jG6qFs2aUsR3T9ygR76d2/bBm38kDUlfPCU1EXGk+yC5In2UWhk+zCYvYWFK+c75BdOfew/REarMO419FcVphFiGx+EDZieV9v5ZSN0Mr5Q70wudobHmyEC7KraHcjtNvtPjRDNFHGKe2cc+7RvfwayYqvc0tORXum2uNiiJLSuIymPSFF6Vn5UqDG+GW2mphT1iTKW+M6eU3mDDaB0tg45TI/O8HT8Eduus6B4/w2TknunDPdlUMT5LltRCU+nDRQJveZxDoQ5wKjYs9zeEQMUTIYp2JwzsXAf6niWcTXuSUXQ+VQDIaoGIzLWKc/HkE7WArUGL8sBvW3I1iiYmj97QiWuRjS345gTsWQ/nYETcMfuek6B46LwTgVg3MuBlcOTZDnuxFVDHAFizK5zyQWg7h8VZVwUQVLIgqcGFHl8iA1FUnUqVSCeN36VCqbfL/uqRK4hA7er1NtUjmlG1xaOBhBXWDNG1y6ARfbwRtculEqPH2DS6tchEFNpRjUP1ofW7emIRVnVLlESU2FSvrX0wDqMnJZunwpVFZf3+JUzK3roHs9Xi+qYUKUH0j0gATYuAcILzXSKfC4Vf525/iinyF/1oc43SIP6oWdQlUyTWT3JyjHM3NDlhzE8UJAlOrZ+3ha/iKLo7LP32EOJ+5oZSsWeEHVbACJQi88VXehsaQLohItjO4nFhbuJxYS6/MBrPeFkZ1/PfGteNPxITkV8HQz8gE9CRAZESj+i2vOquUAquNwRD9dtoWhnRpxa95mP942THgrnXeb7Xbb9NitMNZtdtNtttAtDm0/kN0VZL/vULbirY2C4nN1e5RvdBSe7nHsaXquruB416MguqNRGN3M6MdaeeJbMa96rBVAItV6qhWgMdX6UCvA/Cf8nI21AiTmWJ9qpQ/z0Od56PM89I156OU89Hoe+jwPvZiHvjEPpQie2pYVgaNYBM6xCJxaETjiInDFi8CZFYEjKwJDVN91QcSsMkSpZZzyy7hKMhNzpplE6Wacc84ETjwTYvYZphTkyywUCkgHQ5SRxiktnYvcNDEnqEs5S02jVDXO+WoCJ224dvM0IkrfxrUbEnMi52s3xHVKi2s3JFBy52s3kXOaw006yHSklOwoUb6jpFIe9Zz1qFLio8S5jxqnP2qxAlChIsjvgohYQbohpWpAiQoiSKImUM9lEdRcGShTcaDE9YEalwhoUCVIqVBQUrWCei4XVKliUNJFgy24blCj0kGJqke8BjQmxZ8TeI75T8gBIOGJ5T95xgHzedafNL9Aw1PIf+JsAorPG/8JPs4kdppdPOHcfeHhSUkDYQdnTENK/j3yerLZZRLHZTiOy3Eel2lpXK6kcZkUx2WYxmWcxoUvSXWaxvEFKY4xSnmcQU9jjWoab5DjmINE4w4ajP0///v/AGoZ428=",Fve="eJyNnVtzG8mxrf+KAk/nRGh8eBWleZPnItsaD0dXWNvhB5BsUdgC0TLAFgjt2P/9AI2uzJUrV7X8olB/q4CuyspaVX0p8H8mP7V3d83yfvLj5P3fu/Xstnl0fPbsydGjJ89Oz55MHk9+bZf3v8/uml2BvzSLr839/Hr2w+XVYv7vrtnL3WLB8iOQZ3fzxZYL7IRpM7/9tD/r35ubeXe3I3+9ny3m18+Xt4td2R+OT3Zk/ev8obn5Y35//Wny4/2qax5Pfvo0W82u75vVm2b/6V8e7pvlTXPzur2bLYfa/vnP7cPkx3/+cHxx9PiHk5Pzx8fHx08ePzs9/tfjybtd4dVivmz+aNfz+3m73J/q6AiEt5/m15+XzXo9+fF8x983q3VfbHJ0dPKno6Oj3Ul+b3eN2Dfop/bLdrVvx6P/c/1/Hx0/e3r+eP/vRf/vs/2/z476fy8ePb9pr5pHb7br++Zu/eivy+t29aVdze6bmz89evR8sXj0ev8960evm3Wz+rqjHs35+tHs0f1qdtPczVafH7UfH/02X7b32y/ND7tCi0fPXzyaLW/+X7t6NN99wbq7Ws9v5rPVvFn/aVfZX3anupkvb99cf2r6Xuhr8uZ+95HZ6qaou4I/zb78ZeiUi+Onjyf/KEfnJ6ePJ8/X1/tArwbx58aOfzg5ung8eXN/85fpTnzS//f97r9Pnx566+/N/Wp+vQvnP/9nMv3H5MeTi53w+64i6y+zXRT/9zHh5uF6Mbszfnp+fuD/7tpdtK4WppyfPzkoy+7uat9Nt8us3bSLxWxl/OmuW3r+pVld79O+CE+eXByE2d1OWu+i4zU7OYEa9P3ttTs9Hb5vtmqWi+ZjTaKPlWrM1vtvXH/2ij89Gz616NY5ONe70TrLp/i0/fKpWebiu6bM25vM14vZ+lMO1rdm1WbaLpsM7zei5P2nVSPKfmy7laDzr6Lsev4gYPO1EX3bhJh6OsyXIq2u20UrIrRu7uZRsh5Y7E0g0ebf3WyR8e2q2Q1m0cydD657oynK8dHxkNEzkX7PM/qzoYuSiT9l9HP+4C+Ojo8P6Ff/YInAi/xdf8lx+qu3bG+Xe/S3fMaXuf2/+dgr2fr3fMbfc70u89f/kUu9yt/1On/wTY7E2/zBd/mD7w09Oxt6eppL/SOjD/mM/5WjerWbyz4398E3XNxpcaDy56KpnD0xU7mez6/nq+vuLvdHt3ft9W76gTESDC5Uxj42y+gqp8S1MGAxbnODPuZStxl9ylWeZ/TfuV6fc6lFzksRLeE6wve+iGGfTXqV6yUcXsS+yx/8mrN3k0s9ZLTN6BtU9czzKybCyZOjkpWrSvmYjeaMfTbezxc3TQ7JYa6/aTcizmF69qngvl+meXIclxH3cb8uRKO1z2zV5PFx0a7mgq+byrdcd6vdPH7tATx+dgzDZj3vV66piWXZoofVbTffKXftvV467OX+i78jU+hLz36cCyYWULuVnFwP3Mxub9WcduC4FqMVx77vmlUDY//0whZDs9vV7Iuf7fS8ZNbuUqKBjAuu1DfzarYeifC4utKLBeuAqO+uCYZa7VbY8y/r+VpIu7bef2q7sFg0ty/zfkhu77nV7Kuo7Oy6uxf44OUfF81D1ioj6252vWrFia9WjTrxTXs/uw4jzqX5ricxAG5oOA69srsLut2aWyxSu+XtbNXdLWadOE17u1tnfhZfN1uFxZP1y13IWRee+7Ln9GJg7erm426hF1aGvkKJk6wvQCL3M1zCGZ6c2xnudk7XLfAUdrUxE1PezX7Qr9diAlvEE1tKtZHbiqRtctnd+NxdEe/yXkwxf01d6k4QM9Cn/5g3PjXJTvWvi73nq6NcgzJd3My/ziGh/SOxZr5gFoPDqx0/5Cs99SGbIikGNln3F180TKCp+Sv9fGGoOK53xIzGg3+m0kMdfcCvAtJJ/Jph5xFwEXJSnFg19KI4+HW56SFORa7j68KYB95KHZffVQV8eNRyNJqqr/Rlc+xSqvZt0VghnMkqIUNmsvlr9kQbivN49rOLoc6L9luzvBWZ+zqewq/iRpOzGx0kQvThVZtIVpW2XnNb/fonR85O8/ZTuxKtuqSzexgqbvCG+FmZxChsNpo4Yy1ienLr73Csu36VsxL1pRS0KNY42WoxwbtucT//stiKelEDPclDA88uyqXJbHU/ny1u5h8/5r7a1q3h93geT9ixZPllNM1GZp0sWTpVhueyZoO1jPk9BsgnQ/oivP+2WzHgTTi7BFq1n5slXgiZOa6a2/k6Ln19iMbOhuk4jwtzjm43qsP1iAe7soZcVSLTUmR8XFZS6r9ohJ89K2vX/lZXvBFmcf7l/lOGPyUDNDNXvnV6PLTxvjJvNNXZsTYLPq8tH0ayMgbYr5dpaNitCK6UuUKtR2pTT20aXdcGZR7Hdu7RZQnPmGVd0CzuxQ2f+2DS7ombdsQR6/G960RLKOYWKrnO9LFAofcr1bjCeVpuWPQ+vkvg1S6R1/n73qR8ffas5Kte0b4cnX9/ix3nlxL2WEeZYrIFt4wYJue16ey3WG2Lwy5qn2YLmBrKIN9fmtCtbuuLMZdfxmWTp9p3OrAyFJpag26jmWKDhm5Vvar77o1cIFoGy5qflR682dmEeujRxi4CK9SW1sXyZ+dm5zfza2W0P8cvgoXZ2HL399g/Xt1Kv70ez2ulurdWltDPqyYdLwesB6jOZsQjC8pfatM9O4XdIpYNtQVZXAnYt40OhUoV7kfPtGhv9/29bEW427qZdlkqQ3n3VZWRfDt+RQszuce8kr5LOY/bzZ1lXjS759fG+C/d/nHkvx5PXjar5R+z+Wr/EPmfk+f7h9WTxz+cHv3r8XB0cI+ADvWMaDB1hC/i0cFVAsKGoXAZj3IVcOoN3Loq0MP4Dyg4T1CGkAV2uDsU0GHgIHoVjt7ujo5P/LAELbDQflDe7Q7P/agEAFAIAHAIANASAEAUAFAsAMCGoR1Y7yhI3u+OLuxoGrQP+wYe+WFpEjKoO+AuhLXLydBVkqGTydDlZOiqydCJZOgsFsCGWDj5ujs6s6NNONrGo9IiQFDzgQ6FcHQaopAYp3HqnAdrUV4IRMPWuBy7Rb0UqFJLOZRNzF1oEvWjcd2ZJnOPmkBj3DgN9MJfZYRD3hiPexfk4C8yOIAhsgHjygtMzIZgErmCcW0NJrM/mMAmYUJ0ioLBLgqa5lJoHMbYPUwQFlK0LncYm4nxsZwUtmJSJScrBmNyLSeT1ZgQ/aZgMJ2CNhltBSIPMp6NaPADNCJDFE7jZETO2YiK8kIgMiLj0oiKeilQpZbSiEzMnW4Sdbpx3ekmc6ebQEZknIyo8FcZoREZYyNyQRpRkcGIDJERGVdGZGI2IpPIiIxrIzKZjcgENiITohEVDEZU0DSXQiMyxkZkgjCionW5w9iIjI/lpDAikyo5WTEik2s5mYzIhGhEBYMRFbTJaCsQGZHxbEQYGnSjyCmwUSRfIpHNKcgvapxsKorSq0KRyxofa4i0rlgi50rUKWGiqLMmluHUiSp5WhTJ2IL4qsLR4qLAPkeqNLtQBhwvcrK9KCrviyWyAUadXDCK2gpjGfbDqLIpRjU6Y9DAHgOfVsqjUUaB3TKqwjJDga6SCmyeUfzu0BA2GvWxoVEx1FhmdGgka41q9NeggckGvqnwbY2T50YxG68TtF2k1CEokeUGiQ0XxBeaktmiJK0WClxqWq+6NFnUcx6hSlmEks4hLMEZhBpZK0pkrCC9khRNFTFbatCkoUIJsFOkZKYoKStFPRspqmSjKGkTxRJsoaixgaIW7RMUME+gU1kWjRMx2yZqwjRB7mQ3s2Gi9J0kF2aJaj3JK0aJJUaSPJkkatEiQQGDBLqRdKspWSNK2RiH1qMrGqKQGyc/dM5mWJQXApENGpceWNRLgSq1lNZnYk4JkygfjOtkMJkzwQTyOuNkdIW/yggtzhj7mwvS3IoMzmaIbM248jQTs6GZRG5mXFuZyexjJrCJmRAdrGCwr4KmuRQalzF2LROEZRWtyx3GZmV8LCeFTZlUycmKQZlcy8lkTSZEXyoYTKmgTUZbgciLjGcjKnVFJ3JGAXWBvAgENiOTXihGduSC9COTLxWrVVZakqu5/12jBHBBZ4DrnAKukC+5QMZkwivB0JocsjeBIs3JdHAnZ2RPLih/cjUblGvkUC5oi3KdPcoVNilXoksZB5syNhXl0KgcslO5IqzKxE50IZuVC6PpKuzKtVq6VgzL9Wq6JstyJXqWcTAtYxvBtoqRb7mQjatUDI3LGQXXBTIuENi4THqhGBmXC9K4TL5UrFZZaVyu5kxwjTLBBZ0JrnMmuELG5QIZlwmvBEPjcsjGBYo0LtPBuJyRcbmgjMvVbFyukXG5oI3LdTYuV9i4XInGZRyMy9hUlEPjcsjG5YowLhM70YVsXC6MpqswLtdq6VoxLter6ZqMy5VoXMbBuIxtBNsqRsblQjau1fBDH16FQiiwBZNlGWbDGoQXmZBZFSytahAvM9HVkyZVtNznRaEeL1j3d1G5twsnayqYjGnArxJBUyqILcm4NKRBBTsqhMyoYGVFRctGVBSyoYK1CRWVLahwNqDCo/0MFMxnINNUBo2nILadwoXpDFKXuocNp+CRxBNmUxSdeBWjKWol8ZLJFB4tZqBgMAPZJLLNhKyl4GwsQ7qjsxiiEBonb3HO5lKUFwKRvRiX/lLUS4EqtZQWY2LuapOor43rzjaZe9sE8hnjZDSFv8oIrcYYe40L0myKDG5jiOzGuPIbE7PhmESOY1xbjsnsOSaw6ZgQXadgsJ2CprkUGo8xdh4ThPUUrcsdxuZjfCwnhf2YVMnJigGZXMvJZEEmRA8qGEyooE1GW4HIh4wnI/rzkJvHfuSdYSjED3joHqMlaoAoYKBYrIBZmIANEXJy+F2vxz+cGBl+uqugn6DQqRErNKDyShyVLJiLD8OfixecihdrTh8wgT7y8w49t+7pj2Jn9qi4OKDQR8BTl/e09BEg6wlg1hPAhp4AUizVkXvBz4MNuLZ3gGd+VFoHCKrstATQv9YiN6DSCRA+QxRD4xRI4yqaJuaQmkRxNc7BNYEjbEIMs2GKdeHvcximuRSE3hDF33juBM59Ol/qjn4fYeyOgrg7CufuKFx2RxFFdxSJu6Pw1B1FSN1RBOqOgrk7Bv4+h2GaS2F3FMTdUbjojkHi7hgwdcevQ0889aNyKkAl/oBC6IFDhYCWgAOyWAOzMAMbIgykBNfRzBYU/VFcQfWotACQWE/1PC2lehpXUT2iFVLPaHHUs7Au6klpgaPSW8eOfIXRH8VFTI/iyv+A8pKm52k1c6C27S/guL7pEa1dekbLlj1r41Guc1upYCsr2OaatHKR1Suijm1c7vcorvR/xTEB0V/tx+W5HZkzOSrRRxQW+wfhb8MIO6w+/oYjDFDJT0AhUsAhUkBLpABZPIBZnwEb8hNICZGjWTzKLZjlFswqLZjJFsxyC2aiBTPRgllqwSy3IK60/paXWHvUhY90uZldpU2dbFOX28QXCaCI1naitV1o7cvJ4Tr83I+i/fVIeF3Pk9f1NHpdj+TFYq+QC/asjDpA0fJeDv525kdx7n+J/oYoz/gvyd+Qgr8BjtP/y+BvwGjSfzn4GxzlOreVCraygm2uCfsbKKKO5m+A4trj5QSviV9O0uXwy5TVwJMrv5yk69+XIqtBIVd+OckXvC8nfK27J9uQLduc1ducvcGAcVyQQF9GqhotVOS7p6YxRKoeTlSIRxbJNMhIpfEWVUgPEiijSaUByapIfSqSRwEXyCOWStCQIZXHCMk8pKPcVoXRsMgxT0W+13B2AlK1KVCh8bazVZBKrhFVMBASyEtIVbZCRbLDUAEyG1K171AhtiCS2Y1IjsYUxW1thLFdkZrs47fJcGP52A/tnjKyeDvZlffxcH9ZeWFH/d3VMz+0e3nA8Kad4/ijr1ky/sT41oL1GwYCUOrz38Ke6mNiHIfanmqS3wsGYQk7js+IcYDkjmPSaqEKOscLd+lSLDhyapfuIJV7LRg+Yxw+F2T48NYRMwgf3jsqLU03j5Igwle0WviCzuEr4jbHgsNnXIQvDM4QxKikUJKsAxoKva8qGNwghBBHJQU6yircoUQ16LlUCn0yQhnN1A1VIxwKDNNU6AZj3AEuyNAX+b1gEO6CMNDGOMQmiOAWrRbWoHNAi7jNseAgGk/h2y154W5DfxQvYnsUr9V7JK5re56ua3sar2t7RFevPaOr156Fq9eexGv1y6Hvz/woLjsvc3+78N5m1Muhjz0u/9gdPbGjD9b/l9jNgKDpTsttBD+l3UYYUPFp6AZD1BfGqUOMq14xMXeNSdQ/xrmTTOCeMiF2l2HqM5y/KQzce5XZm1ToR5y7TyOCHsXp/IIQ9a2azEmiXk6P/QYe9k5Cf0dOnR5F6vkoqu6PJXIORJ0SIYqcDVHllIhqzIuoUXKkndwqepwmY/u4VRFImLRt+VRwSJ20nflCcUqi6mZmpVM6BY1zCjadQUYhpXxCibIJJZVLqOdMQpXyCCXOItQ4h1CLGYQK5Q9tWc1x4typb1jNBSBvaMfmaaKQM7SP8yJTypfKLs6sUq6AwplStgRBmhiiHDFOCWJcZYeJOTVMorwwzklhAmeECTEdDFMu4MY+CgNnQWVbH6nQ/7jl7TQi6HncBXdBiPpc7YEjiXq7YO7qeJsDe5wV6niWqf9ZVmnAZXI2cAlKCpY5N1jnFGE9ZgqrlDAkv63GlNMnySqLqBAkEymQU6RAapECGcYKJRrLOd+oBKUdqZx9tocH8s4ZZZwLlGsuqCxzNeeXa5RZLnBOucLZ5ErMI+eUQWHHHkeEs6a2X49lyJSwhe2UGGRH2NZ2wYwyQm5qY42ywDj3f7nchO43RL1vnDrfuOp7E3PXm0Q9b5w73gTudxNitxumXsfbEBQG7vPKTQhSocfxFsRpRNDfeFfighD1tronQRL1dcHc1eWVUOhqQ9TVxqmrjauuNjF3tUnU1ca5q03grjYhdrVh6mp8sZvCwF1dea2bVOhqfOX5NCLoanwL+oIQdbV6B5ok6uqCqav/GHp5eCX9D+xhZKV3kcUXf0HAe2KA7dVfYP6GL0B/xRdgeccXUOlBYLPQMntDBVB8i7BH4sldz9Pjup7GZ3Q9omduPaOHjD0L7wn2JD5w+wP67fipocYyqT+KD5V6VBIUUX583fP00OlA4Ykr4Pj8ukf0PLpn9L7bnrXxKNe5rVSwlRVsc034cSgooo724BNQfDr+B46OIfqvJvgGfH8U34DvkXgDvufpDfiexjfgeyTfgO8VegO+Z/QGfM/CG/CvJ4e3Hk78KLp2j4Qx9zx5ck+jHfdIvsPUK+TRPSvxBxQd+PVgvqd+FF9tfJ0t14V3NoheYy8BEqP8NfUS0DjKX4teAoXG/+vQS8DC+H8d5ojXYXp4PUwDrn2II+g1mf9Ayy1K6H1DlALGVR6YmJPBJMoI4zotTObcMIESxDhlCd5kPiVE+VK5yUwqZI4hSh/jKodMzIlkEmWTcZ1SJnNemcDJZULMsHwf3dA0B+JDLsVZp26aD1J5sgqpZ4hSz7hKPRNz6plEqWdcp57JnHomUOoZp9TDB+ynhCj1Ko/XSYXUM0SpZ1ylnok59Uyi1DOuU89kTj0TOPVMiKmHLxBQhkxzID7kUpx66u2BIqX3/U6kwGk48r6fLiJSUr/vp9VKelbe99Myp6p+30+qmLb6jYaKKlM4lMFEjgKnc1RlUsciIrVjAU7wqFbSPBZKyR7llPJRpsRPL3rILJ3WQvmh9ok0IKpveRwKvJnwPsg3k7QP8g0/6yTMxXmbF+FUPG1xTEL6SGgWfyyI9NFdfuO1bH9I17I9o2vZnqlr2V7I17I9pmvZnvG1bA/5WraH8Vq2R3Qt+3YwsjM/iiPpbbIs4GnMvEVzAiRHx9tgQ8Diu6Nv0XAczWIjZqIH7Br8iaNaB8x0B8xEB/hlOHyviv8sx98uxP2j1+0CfPgtJCN8jqrQiNbaxXlgleY2urnh+hx5CYNXuxFRaFQUPm2/fGr6ennntbFIK5rT1qre6qq3oqf40h0lUX27dsdyucP84t2LrehQNGgl+of2cIGybu7mOTO6WKgTp+lqcet03DoRN37RGSURt051e5eTfxMPt3QoGoOvnA3nww3WpWTaYZ0E9mK9xzqpImRpl3USkj/nfdZJoWClndYsgGenqx/myr3V1Q9L5OO1qx+W2dHT1Q9z8vbCZ6LZyeVNIKs3Ptq/yvRNq/Vvsn8Tqt3LE4FxMhdf9YSBz4sh/hpVyzRDmMA25MJYqNSE4ZqYNUykqcN4LYx5EilKmkmK0IrCaU4xYbSdanYxrZYStXnG9Fpb04xjQiUz0txThJVitRCkqcgFOR8VWUxKRepE8TQ9mTDaBWqiMq3WBbUpy/RaF+TJy5TKqN0ItlWs1nw1q4ULjjC3RSV9Z5TTPBdlHfdYRkU/lkh9EOU8/0U9BzzqHPaophkx3ZQ5kwLPjiM3ZXQRMVPqmzJarcyalZsyWuYZVN+UkeqsGrI8p0aZZ9ao/gcZJWfZWGI8o/KMG+XvJFSafaPKTkv3BaLbyZsG+ovr7clzc5STO5P8/ZDL2ZpKqDk7FuGZO6rjnSJm8aDnuTzIbfWDeV6P8n8QHTnHxxLjCVmd72Op8QjluT/Ko3mZ1wFBXtWV8fDllQHJen0QCqlVQijQVT+aVwxR/g86V64eYonxzq2uJGKp8c4Vq4qoj3rSpqps68p46PKa492w0DjzozhHvsMFBSAxV76jhQPQOCu+CwsEYHTv+x0sBIDEKe7dhF8/ejdJbx6VJwPY1rRDijm1Wu+QYjG3P+2QYs6RyDukWIgxSTukiFN0KjuLwuMRjJPeWSRFitjIziJZIsdO7yySIkexsrNIqjGeemeREimyY5ts4NESBldtshESBba6yUboOahqk42QOKByk43QYjDVJpssUSDrO1DKAziMYdqBwpyip3egsJjjlnagMOeI5R0oLMRYpR0oxClKlZ0b73h7Ql2hgNV2blRkFb6RnRuVEhTM6s6Nis6hrezcqKgU6NEtC6xy2MOWhcQo1HnLQhJUeOWWhaRRSMWWhaRwGNOWhcQpdJU3/J1zuOyPHTxXjMLlAoXLBRUuV3O4XKNwucDhcoXD5UoMl3MKlwkULuMcruEH3J9nQqEqmAJVsApT0XKQikIhKpgDVDiHp/AYnEIpNAOmwAyUwvJ+CMlTPyrhABR/S/R9CgPw9Fui77H5gOi3RN+HZgMLvyX6Hpvr6EVoz4vYcz2KV1wuXMajmAo9Ev3d89TXPY393CN5y6pXqPd7Fm9O9Sh27x75b8T2R3G7QY9KCACFhgBPmxJ6WhoCyKoLzHoM2NBjQEoLHJUr2zMg5TbQeUGxk5ucmHaPB5FOzEYmZrh/AzjnayPytRH5andkHLXxKDejrdS5lXVuc+X4Tgoootp2ywRQHlNwb8Q6BO9JeM91oWe7nI1dJfU6mXpdTj2+mQCKSMpOJGUXknI6uN65H8XXtaboeoDELogpuR7QuAtiGlwPGO3HmILrAYnbH6YTfHVyit4FSLwkOSXvAhpfh5wK7wKFXnyconcBiq84Tie452eK3gUo2vc0eRfwZMJT9C5AZLXT4F3AwgQ7Re9yVJzqqZG9fupHpU2A4jub02RUwNPvA03ZqADHX9qbBqMCRj+XN0Wj8oa1oUCbm6F+CXpKRgU0V07/EvQ0GBWw+EvQUzQqR2ZU3h9dKNDlhqhfOZySIwHNDdE/YjgNjgRMxD/+RuGebMM42ebxvE3j9sNgZMMPZX1AJ0NmDzSBxbvAIOCtX8B2vxeYP6QE6DdtAZY7tYDsGaSzvaU9PbcjmyodxanSOU6VTm2qdMRTpSs+VTqzqdKRTZWG+mXLmTXCHwUCiwuyD8nUsGz+lbIPaGvIaPr7EHwNC5b4A7L4OyuT+xMgw7LMC9FnGtFcf/iGrNLeRrc3PlsDLuLQiDg0Kg78wGzP5mE4zeO46xFtVv4weCV8RyuC0NYa3OoGt6Jh6RkZSD74ANrjMGCio3115wxXd54AXRyhnbCXrmYlnbaSTlhJel4EknKZTrlMRy6DDy0S44akxxZJkM1UDy6Sxg3Ojy6SktrHDy8SZz/F7YWDWaXthcyVvarthSyR0da2F7LMlpu2FzIn8y0cHcoYD0kTyIuNy/Fqqhi0pvHINYF9yYRkTqaQUxuPF9HGacTyMyv+GlXL5OAmsI27MBYqZeiuCVc3sRbH5O8mVOOYnL4IYPeGyPONs/EXoRXfm6YAE0aDpSYD02rxqE0LptfileYHE3iSSE85WRDTRZFwzjBW81s9e5g6YqtpHjGhMpmYXrXdPK2YQrZLjyMV5harB5JKkwGpPJJUModFPpRUYmq8eCypJJ55QIPJBynNPyipKQj1PAuhShMRSnouwhI8HaFGMxJKNCmBhA6MmK0CNZqdUJJGggWEl6DMdoIaOwZqyWRRpPkKJZqywvPqYBziSbb4vkrV0/SFGs9gQftOONU8FmQxlaE+Eu40oaE2Fu40rYEGMxtSmtxQ4vkNtFafI81yqH0voGquQ3kkYLUZD4ukCyIUeeJDjec+9fqE0MQMCCpOgohHZgU9FWKBcedPEyJqlTkRi4xNDnlmRDFODvudwl8tq/ZHm3DkP5feH8X7cz1K9+GKZeL3FrTJaJs/yKcxns81WDCeq6BNRtv8QT6X8Xyu8M4TnDDwTYVvK9/D549irgR0JVQB6EbSrfwGPjlK+dTlJRw4b0GbjLb5g3w64/lc9i4FnMzYRrCt+Cyfz4V8QnsbAU5obCPYVnyWT+hCPiH8zfuTQDaJbNOn+ETib94PCv5Z65OINhlt8wf5VOrPWh+kqx292luLHcUXG/ZkYefsj+KE16P4/B+E+MzqapLekLia4J8YvEIHBySetF2RXwONT9quhDuDQk/aroIXAws/nHgVOudqgk8XrjD+gFJdr3E5dl7I56B/VpG9TnchzgP+nEvq70l7Ns8D/pxLVr4n/bJF+SYTPqvS+tsOU/5k/WV2vQ/h+UD7L85/R+Qoy6TlSMULb0NfbVTEkbY/egjaNmjU2zzQBqo7zTDXByfk0/gNm/ylD7nUNpfiiqo5epB0ahjm2hYOtcWdiPSlD7nUNpfi2qqdiUVSbz2Xqsm3npWIldfLg8gfKuW3lfKpQbVlw6Cry7ZzVrhFtNY4TV+1kSd4kGW3siy3o7ICKapfxqVmgJTaARo2BPBGn+RBl97q0qkxqOXW8LvOQ23Tu87EoQV5+WXoIZfa5lJcY7UiG6T01utQrfzWKwtQYbGEc/Ygym1FOa60XNYNWnr5dKhcfvmUBai1WAc6exDltqIc11quDQ/ax8nhftSpH8VFWI/K3SdA4l2JnqelWk/juxI9ojciekZvRPQsvBHRk/i2x0eIuJPdeFg063V/8+NpgfFDTW4ovZFzQLqh+Y2cA01v5PQ4t5/fyOmZaH8bj3Kd1es3PZcVbHNN9Os3vSLqSK/f9Ch3CP1F7o95CfQkCgM9rJr21xf9Nks/svsjjuwmHqC4hfIglMvslUD0tcbpu52rE4j9oVKgk9V2h2pVnDj+jTnx5+X0X5b7PIyEEz+KfvEZRwKifDnzmUYCUhgJgONVzucwEoDRtcznYSTAUa5zW6lgKyvY5prwSABF1LGNV4mfcSQMKO9a1wK1pbJnvaKKRtd3rFcK5L6q7FfXKkentl9dym1VGA2L7O36ZnRdYLRZlXSo7UTXMiVJZSP6Qb2bDDeI/Sh6Ro/ET5X3HO8CO40/Vd4j+VPlvUI/Vd4z+qnynoWfKr8bbOiwqrlDGwKEtevpMjR2mRu7rDR2KRu7zI1dVhu7FI1disYuU2PjfcJlaPoyN52XigMNj8SPIqIgVB6Ik5jDkR+HE9eBEQ/DSeAQpUfhEUOw8BKfAsFhU5f4gxR+FekoIopd5TeRSMyxy7+IRFzHLv8eEgscu/RzSBFD7MKPIcVAcOzUDYci5d+KOFICx3HslyJkERHTyu9ESLUS38qvRGg5xVr/SIQSMe75JyJUKFMfVH8gYihQbm1DHxii6BtXcTcxR9wkirVxHWWTOb4mcGRNiDHNjwOWeO+fAsERVPf+D9JuvUB3+/eEbtC3w4n9I5tw5NdKbVhFt3kV3cpVdFmccFXSjVHiUCm8MUroIZ9nKxBVtP7wspW3Gs+ExvVOtxqHmqZbjYo/VCqwrXFq0HeeUML6jtukbjVmCdpDtxozfZCn3WpK7Rh92NnyzbmziLn+eHNuqCbenCP0kM+zFYgqXH9c2o7u5meV604yNIGUTVV5qFZlW1eoeSznVlY23rf5FiQL0KZwC5LZgzjZVjGq+8iT5XKx0d/ROz+PqHwNc9vQSDzuaiQRTs2S7W8k7pscSfCdjiSU7Y6Ebc9j5FcZXQtUCUN5VJh5eeyXlCExnkV8k0ve7Bo+u89cVKOpVK+pVK8Z66Wm3kvxj4WRVunBptaDTa0HP2YkOvS2koHxFhirnzKaC1SJ53wsbvN63OaV2MxrsZnXYvPfGYlSn0djsBCo0uDF+BfZX1aL/C4j0cZl5ZzLStIuR+uyrIzvVqDKidux3m3rvdtWejf9mTqSa53fVsLaVpr4RaAyzZDN/DsXXQlUCdCq0jOr0Z4REVtXTrCunGBdtdP16KkVGv1AJ1Clrt1YtnT1bOkq2cLXVSzXsqWrWUWnJ8L9QuMizvubjPx9eUPbXMoWGcyh+SR9yzX6Vonwt0o2fBOzkP7bp4Z52YUXmcfxGzYZwZorv4bWVl5Da+uvoX2Bip6eF+IPvwxtw0foBF/0dw/fUnt3KOo1sbyOdHjcRl9l6pmri+bjffnSw/9/OL8wtXywX+UcZWwrnayFaoqvXOmPuYUJzfJKadEecol1BY+ccD1yQrQ2pX63OkNfHIbZaljFH/tRvC20wrU7IHGTaEUrdqDx1tAqrNOB0R2fFazOgdgL84aGl+JOARwGy7mR3aLtMEhXsFwDgu0B7M0BOLQGSGkMoNIWR/EgdJTzRThI9VzUPjZ4nZPdmurEDpbhYPhWIEO+IcHzAB+C7+QLxt0syQMP+xS83O47z/wgnMt5h83pUig63WWd6rIudRnNniDkvuxyXw5zpYOv2LxtOBhqDsSrOMByRw2GoiEaj8ZpUBpXI9PEPDxNojFqnAeqCTxaTYhD1jCNW7+xicnBtzvPI/ZhbCQmhmGRHaalFDEl5olhygnjlBjwijETNW6LuMhEN0qOfhOjBRTsPlDIMpPoCIajLTgW3mBiNAi7TZ06mK2i8OwXRXFzMKKcAx56Uig6HVVlJOKJJys6VbSvpMedzCuJFG0G7u1TaLaZRNcRt+wHJfytJkJkPekvNTFX1iP/UBNJZD35zzSxwNaT/koTYbIe+iNNp0yD9RTs1mMk5pNhkU+mpXwyJeaTYcoY45QxsCuBiTKNIi4y0Y2S1mNitJ6C3XoKWWYSrcdwtB7HwnpMjNZjL+OnDmbrEX8biT7h7mJEWQ+8M0Ch6HRUlfWIFwZY0amirSe9LcC8kkjReuBVAQrNNpNoPeI9gaKEp9doQFFgG4oqm1FUpSXFIsKYYgG2p6gmk4pysqook2FFkW0rqJSppEULCyIYWeSUo1FUmRpL5HyNOmVtFDk7o8o5GtQql5YViixqfCwU2gpjETLEIIItBr6scbLIKJJRkqjsMhYh0wzil0p6JQMNqrDRoINfRi4tlV8lkiFle62/SKRLfCd12XDH3iLSZUbTO1mweoVIal8rId7WOFlz7fWhg563VoktVeVNhuEjfP02FEqrfuLwDXpv3TpN3sTxGyobLtfiT4knBb9Hemr5hB4RUoXv9LFBWziHo/3fzGUS7wY6Frf6ivg+kandfy1k/+fjn0VSZlrCMENGpdzoHe7gnmZxUA73hb8O0/zBbL7i3A6oTOiA4jvYzvHFa6f2trUjf3vamb8u7qzsY3Zir04bKonw1NoU9Sa3yd+tB6Tb1Mg2xVfnHeemNqKpjWhqG49yndtKBVtZwTbXJL3X7oqoo7/B7ijHnn5vd1PWjed2FN/v24QVoqO4LHSe3gLchAWgI1/1OfOlnrOyvnNiizpDJaGeWJt80bfBhAIUt/FsUkIBT+vbDScU4LjW3YSEAkar2s2QUHCU69xWKtjKCra5JulneFwRdfQf3XEUF9QbTKhD8B8muH3vAYMPKG7fe0jBB56etz1w8AHHTXMPIfjAaPvetriqH9lodmSu6kjsbNmyqzqNe1i20VWd0SacLbqqk7ghZYvT65GhWKDJjaItS9tsq85lo8SOpG2wVUeirbzhaFts1Y9yndV+oi3bqtNcE71daBtt1VncGLQNtmrIly9D9PGBxAkhalN6IMFcNVg9kGCJmp4fSLDA3cEPJBhTHNLSlWIhinJOGqfEdD4SC5GiLuU8Na0Sp5SxJtTi1ApUaaDMYhPrDeF8Nq6T2uRaWzi9jVf6NiU6vDINuY6UIoASZTxKKj6o5xChSlFCiSOBGncsanEMoEKhUr+rkYOlP8DjASUaEkEaD5YYGEHNYwPleizTCEFtJJatpvW2y9GC+mgDecygpIcNlhhpIw8elOpJwUPoW1mvnttRXIN/C+tVQHkN/o3Xq0Bxveo4Ls2/xfWqM1qafyvrVT/KdW4rFWxlBdtck7RedUXU0derjuK1wjeciRhR/dNMlLhonJqJkpT7Ic1EzLm1eSYioRWo0kDZS2omYqlS2Uqn5ZmIBeq+NBMNvNyvUoiaaJz60Llouom56S7lPjSNwmKc220C92ERWoEqDZR9aGK9IdyHxnUfmlxrC/ehcepD/BWkGqamBo36M2oiFKFADkeUc98GnUIWNI5LELmfUWwreCQIss9DgfGGct8HTfd/KDLWVs6DoEEu/Ot//z8nhUqv",Pve="eJyNnVtzG8mxrf+KAk/nRGh8eBWleZPnItsaj0ZXWNvhB5BsUdgE0TLAFgjt2P/9AI2uzJUrV7X8olB/q4CuyspaVX0p8H8mP7V3d83yfvLj5MPfu/Xspnl0enH05Nmjs6dHz84mjye/tsv732d3za7AX5rF1+Z+fjXb426xUHh2N19shTBt5jef92f5e3M97+525K/3s8X86vnyZrEre7Q7Xv86f2iu/5jfX32e/Hi/6prHk58+z1azq/tm9bbZf/aXh/tmed1cv2nvZsuhbn/+c/sw+fGfPxw/efL4h5OT88fHR0dHj5+dHv/r8eT9rvBqMV82f7Tr+f28XU5+/GEng/Du8/zqdtms15Mfz3f8Q7Na98UmR0cnf9p90e4kv7e7Juyb81P7Zbvat+LR/7n6v4+Onz09f7z/96L/99n+32dH/b8Xj55ft5fNo7fb9X1zt3701+VVu/rSrmb3zfWfHj16vlg8erP/nvWjN826WX3dUQvVo/n60ezR/Wp23dzNVreP2k+Pfpsv2/vtl+aHXaHFo+cvHs2W1/+vXT2a775g3V2u59fz2WrerP+0q+wvu1Ndz5c3b68+N30f9DV5e7/7yGx1XdRdwZ9mX/4ydMnF8dPHk3+Uo/OT08eT5+urfaBXg/hzY8c/nBxdPJ68vb/+y3QnPun/+2H336dPD7319+Z+Nb/ahfOf/zOZ/mPy48nFTvh9V5H1l9kuiv/7mHDzcLWY3Rk/PT8/8H937S5alwtTzs+fHJRld3e576abZdau28VitjL+dNctPf/SrK72SV6EJ08uDsLsbietd9Hxmp2cQA36/vbanZ4O3zdbNctF86km0cdKNWbr/Teub73iT8+GTy26dQ7O1W5szvIpPm+/fG6WufiuKfP2OvP1Yrb+nIP1rVm1mbbLJsP7jSh5/3nViLKf2m4l6PyrKLuePwjYfG1E3zYhpp4O86VIq6t20YoIrZu7eZSsBxZ7E0i0+Xc3W2R8s2p2g1k0899ds+6NpijHR8dDRs9E+j3P6M+GLkom/pTRz/mDvzg6Pj6gX/2DJQIv8nf9Jcfpr96yvV3u0d/yGV/m9v/mY69k69/zGX/P9XqVv/6PXOp1/q43+YNvcyTe5Q++zx/8YOjZ2dDT01zqHxl9zGf8rxzVy91cdtvcB99wcafFgcqfi6Zy9sRM5Wo+v5qvrrq73B/d3rXXu+kHxkgwuFAZ+9gso8ucElfCgMW4zQ36lEvdZPQ5V3me0X/net3mUouclyJawnWE730Rwz6b9CrXSzi8iH2XP/g1Z+8ml3rIaJvRN6jqmedXTISTJ0clK1eV8jEbzRn7bLyfL66bHJLDXH/dbkScw/TsU8F9v0zz5DguI+7Tfl2IRmuf2arJ49OiXc0FXzeVb7nqVrt5/MoDePzsGIbNet6vW1MTy7JFD6ubbr5T7tp7vXTYy/0Xf0em0Jee/TQXTCygdis5uR64nt3cqDntwHEtRiuOfd81qwbG/umFLYZmN6vZFz/b6XnJrN0FRAMZF1ypb+blbD0S4XF1pRcL1gFR7y8ZDrFZLOZf1vO1kHZtvf/cdmGxaG5f5v2Q3N5zq9lXUdnZVXcv8MHLPy2ah6xVRtbd7GrVihNfrhp14uv2fnYVRpxL811PYgDc0HAcemV3l3O7NbdYpHbLm9mqu1vMOnGa9ma3zrwVXzdbhcWT9ctdyFkXnvuyZ3fdOnz56vrTbqEXVoa+QomTrC9AIvczvIIzPDm3M9ztnK5b4CnsamMmprzr/aBfr8UEtogntpRqI7cVSdvksrvxubsi3uW9mGL+mrrUnSBmoE//MW98apKd6l8Xe89XR7kGZbq4nn+dQ0L7R2LNfMEsBodXO37IV3rqQzZFUgxssu4vvmiYQFPzV/r5wlBxXO+IGY0H/0ylhzr6gF8FpJP4NcPOI+Ai5KQ4sWroRXHwq3LTQ5yKXMfXhTEPvJU6Lr+rCvjwqOVoNFVf6cvm2KVU7duisUI4k1VChsxk89fsiTYU5/HsZxdDnRftt2Z5IzL3TTyFX8WNJmc3OkiE6MOrNpGsKm294rb69U+OnJ3m3ed2JVr1is7uYai4wVviZ2USo7DZaOKMtYjpya2/w7Hu+lXOStSXUtCiWONkq8UE77rF/fzLYivqRQ30JA8NPLsolyaz1f18trief/qU+2pbt4bf43k8YceS5ZfRNBuZdbJk6VQZnsuaDdYy5vcYIJ8M6Yvw/ttuxYA34ewSaNXeNku8EDJzXDU383Vc+voQjZ0N03EeF+Yc3W5Uh+sRD3ZlDbmqRKalyPi4rKTUf9EIP3tW1q79ra54I8zi/Mv95wx/SgZoZq586/R4aON9Zd5oqrNjbRZ8Xls+jGRlDLBfL9PQsFsRXClzhVqP1Kae2jS6rg3KPI7t3KPLEp4xy7qgWdyLGz73waTdEzftiCPW43vXiZZQzC1Ucp3pY4FC71eqcYXztNyw6H18l8CrXSKv8/e9Tfn67FnJV72ifTk6//4WO84vJeyxjjLFZAtuGTFMzmvT2W+x2haHXdQ+zxYwNZRBvr80oVvd1hdjLr+MyyZPte90YGUoNLUG3UQzxQYN3ap6VffdW7lAtAyWNT8rPXi9swn10KONXQRWqC2ti+XPzs3Or+dXymh/jl8EC7Ox5e7vsX+8upV+ezOe10p1b60soZ9XTTpeDlgPUJ3NiEcWlL/Upnt2CrtFLBtqC7K4ErBvGx0KlSrcj55p0d7s+3vZinC3dTPtslSG8u6rKiP5ZvyKFmZyj3klfZdyHrebO8u8aHbPr43xX7r948h/PZ68bFbLP2bz1f4h8j8nz/cPqyePfzg9+tfj4ejgHgEd6hnRYOoIX8Sjg6sEhA1D4VU8ylXAqTdw66pAD+M/oOA8QRlCFtjh7lBAh4GD6HU4erc7Oj7xwxK0wEL7QXm/Ozz3oxIAQCEAwCEAQEsAAFEAQLEAABuGdmC9oyD5sDu6sKNp0D7uG3jkh6VJyKDugLsQ1i4nQ1dJhk4mQ5eToasmQyeSobNYABti4eTr7ujMjjbhaBuPSosAQc0HOhTC0WmIQmKcxqlzHqxFeSEQDVvjcuwW9ZVAlVrKoWxi7kKTqB+N6840mXvUBBrjxmmgF/46IxzyxnjcuyAHf5HBAQyRDRhXXmBiNgSTyBWMa2swmf3BBDYJE6JTFAx2UdA0l0LjMMbuYYKwkKJ1ucPYTIyP5aSwFZMqOVkxGJNrOZmsxoToNwWD6RS0yWgrEHmQ8WxEgx+gERmicBonI3LORlSUFwKRERmXRlTUVwJVaimNyMTc6SZRpxvXnW4yd7oJZETGyYgKf50RGpExNiIXpBEVGYzIEBmRcWVEJmYjMomMyLg2IpPZiExgIzIhGlHBYEQFTXMpNCJjbEQmCCMqWpc7jI3I+FhOCiMyqZKTFSMyuZaTyYhMiEZUMBhRQZuMtgKRERnPRoShQTeKnAIbRfIlEtmcgvyixsmmoii9KhR5VeNjDZHWFUvkXIk6JUwUddbEMpw6USVPiyIZWxBfVzhaXBTY50iVZhfKgONFTrYXReV9sUQ2wKiTC0ZRW2Esw34YVTbFqEZnDBrYY+DTSnk0yiiwW0ZVWGYo0FVSgc0zit8dGsJGoz42NCqGGsuMDo1krVGN/ho0MNnANxW+rXHy3Chm43WCtouUOgQlstwgseGC+EJTMluUpNVCgVea1qsuTRb1nEeoUhahpHMIS3AGoUbWihIZK0ivJUVTRcyWGjRpqFAC7BQpmSlKykpRz0aKKtkoStpEsQRbKGpsoKhF+wQFzBPoVJZF40TMtomaME2QO9nNbJgofSfJhVmiWk/yilFiiZEkTyaJWrRIUMAggW4k3WpK1ohSNsah9eiKhijkxskPnbMZFuWFQGSDxqUHFvWVQJVaSuszMaeESZQPxnUymMyZYAJ5nXEyusJfZ4QWZ4z9zQVpbkUGZzNEtmZceZqJ2dBMIjczrq3MZPYxE9jETIgOVjDYV0HTXAqNyxi7lgnCsorW5Q5jszI+lpPCpkyq5GTFoEyu5WSyJhOiLxUMplTQJqOtQORFxrMRlbqiEzmjgLpAXgQCm5FJLxQjO3JB+pHJrxSrVVZakqu5/12jBHBBZ4DrnAKukC+5QMZkwmvB0JocsjeBIs3JdHAnZ2RPLih/cjUblGvkUC5oi3KdPcoVNilXoksZB5syNhXl0KgcslO5IqzKxE50IZuVC6PpKuzKtVq6VgzL9Wq6JstyJXqWcTAtYxvBtoqRb7mQjatUDI3LGQXXBTIuENi4THqhGBmXC9K4TH6lWK2y0rhczZngGmWCCzoTXOdMcIWMywUyLhNeC4bG5ZCNCxRpXKaDcTkj43JBGZer2bhcI+NyQRuX62xcrrBxuRKNyzgYl7GpKIfG5ZCNyxVhXCZ2ogvZuFwYTVdhXK7V0rViXK5X0zUZlyvRuIyDcRnbCLZVjIzLhWxcq+GHPrwKhVBgCybLMsyGNQgvMiGzKlha1SC+ykRXT5pU0XKfF4V6vGDd30Xl3i6crKlgMqYBv04ETakgtiTj0pAGFeyoEDKjgpUVFS0bUVHIhgrWJlRUtqDC2YAKj/YzUDCfgUxTGTSegth2ChemM0hd6h42nIJHEk+YTVF04lWMpqiVxEsmU3i0mIGCwQxkk8g2E7KWgrOxDOmOzmKIQmicvMU5m0tRXghE9mJc+ktRXwlUqaW0GBNzV5tEfW1cd7bJ3NsmkM8YJ6Mp/HVGaDXG2GtckGZTZHAbQ2Q3xpXfmJgNxyRyHOPackxmzzGBTceE6DoFg+0UNM2l0HiMsfOYIKynaF3uMDYf42M5KezHpEpOVgzI5FpOJgsyIXpQwWBCBW0y2gpEPmQ8GdGfh9w89iPvDEMhfsBD9xgtUQNEAQPFYgXMwgRsiJCTw+96Pf7hxMjw010F/QSFTo1YoQGVV+KoZMFcfBj+XLzgVLxYc/qACfSRn3fouXVPfxQ7s0fFxQGFPgKeurynpY8AWU8As54ANvQEkGKpjtwLfh5swLW9Azzzo9I6QFBlpyWA/rUWuQGVToDwGaIYGqdAGlfRNDGH1CSKq3EOrgkcYRNimA1TrAv/kMMwzaUg9IYo/sZzJ3Du0/lSd/T7CGN3FMTdUTh3R+GyO4oouqNI3B2Fp+4oQuqOIlB3FMzdMfAPOQzTXAq7oyDujsJFdwwSd8eAqTt+HXriqR+VUwEq8QcUQg8cKgS0BByQxRqYhRnYEGEgJbiOZrag6I/iCqpHpQWAxHqq52kp1dO4iuoRrZB6RoujnoV1UU9KCxyV3jp25CuM/iguYnoUV/4HlJc0PU+rmQO1bX8Bx/VNj2jt0jNatuxZG49yndtKBVtZwTbXpJWLrF4RdWzjcr9HcaX/K44JiP5qPy7P7cicyVGJPqKw2D8IfxtG2GH18TccYYBKfgIKkQIOkQJaIgXI4gHM+gzYkJ9ASogczeJRbsEst2BWacFMtmCWWzATLZiJFsxSC2a5BXGl9be8xNqjLnyky83sKm3qZJu63Ca+SABFtLYTre1Ca19ODtfh534U7a9Hwut6nryup9HreiQvFnuFXLBnZdQBipb3cvC3Mz+Kc/9L9DdEecZ/Sf6GFPwNcJz+XwZ/A0aT/svB3+Ao17mtVLCVFWxzTdjfQBF1NH8DFNceLyd4Tfxyki6HX6asBp5c+eUkXf++FFkNCrnyy0m+4H054WvdPdmGbNnmrN7m7A0GjOOCBPoyUtVooSLfPTWNIVL1cKJCPLJIpkFGKo23qEJ6kEAZTSoNSFZF6lORPAq4QB6xVIKGDKk8RkjmIR3ltiqMhkWOeSryvYazE5CqTYEKjbedrYJUco2ogoGQQF5CqrIVKpIdhgqQ2ZCqfYcKsQWRzG5EcjSmKG5rI4ztitRkH79NhhvLx35o95SRxdvJrnyIh/vLygs76u+unvmh3csDhjftHMcffc2S8SfGtxas3zAQgFKf/xb2VB8T4zjU9lST/EEwCEvYcXxGjAMkdxyTVgtV0DleuEuXYsGRU7t0B6nca8HwGePwuSDDh7eOmEH48N5RaWm6eZQEEb6i1cIXdA5fEbc5Fhw+4yJ8YXCGIEYlhZJkHdBQ6ENVweAGIYQ4KinQUVbhDiWqQc+lUuiTEcpopm6oGuFQYJimQjcY4w5wQYa+yB8Eg3AXhIE2xiE2QQS3aLWwBp0DWsRtjgUH0XgK327JC3cb+qN4EdujeK3eI3Fd2/N0XdvTeF3bI7p67RldvfYsXL32JF6rvxr6/syP4rLzVe5vFz7YjPpq6GOPyz92R0/s6KP1/yvsZkDQdKflNoKf0m4jDKj4NHSDIeoL49QhxlWvmJi7xiTqH+PcSSZwT5kQu8sw9RnO3xQG7r3K7E0q9CPO3acRQY/idH5BiPpWTeYkUS+nx34DD3snob8jp06PIvV8FFX3xxI5B6JOiRBFzoaockpENeZF1Cg50k5uFT1Ok7F93KoIJEzatnwqOKRO2s58oTglUXUzs9IpnYLGOQWbziCjkFI+oUTZhJLKJdRzJqFKeYQSZxFqnEOoxQxChfKHtqzmOHHu1Des5gKQN7Rj8zRRyBnax3mRKeVLZRdnVilXQOFMKVuCIE0MUY4YpwQxrrLDxJwaJlFeGOekMIEzwoSYDoYpF3BjH4WBs6CyrY9U6H/c8nYaEfQ87oK7IER9rvbAkUS9XTB3dbzNgT3OCnU8y9T/LKs04DI5G7gEJQXLnBusc4qwHjOFVUoYkt9VY8rpk2SVRVQIkokUyClSILVIgQxjhRKN5ZxvVILSjlTOPtvDA3nnjDLOBco1F1SWuZrzyzXKLBc4p1zhbHIl5pFzyqCwY48jwllT26/HMmRK2MJ2SgyyI2xru2BGGSE3tbFGWWCc+79cbkL3G6LeN06db1z1vYm5602injfOHW8C97sJsdsNU6/jbQgKA/d55SYEqdDjeAviNCLob7wrcUGIelvdkyCJ+rpg7urySih0tSHqauPU1cZVV5uYu9ok6mrj3NUmcFebELvaMHU1vthNYeCurrzWTSp0Nb7yfBoRdDW+BX1BiLpavQNNEnV1wdTVfwy9PLyS/gf2MLLSu8jii78g4D0xwPbqLzB/wxegv+ILsLzjC6j0ILBZaJm9oQIovkXYI/HkrufpcV1P4zO6HtEzt57RQ8aehfcEexIfuP0B/Xb81FBjmdQfxYdKPSoJiig/vu55euh0oPDEFXB8ft0jeh7dM3rfbc/aeJTr3FYq2MoKtrkm/DgUFFFHe/AJKD4d/wNHxxD91xN8A74/im/A90i8Ad/z9AZ8T+Mb8D2Sb8D3Cr0B3zN6A75n4Q34N5PDWw8nfhRdu0fCmHuePLmn0Y57JN9h6hXy6J6V+AOKDvxmMN9TP4qvNr7JluvCextEb7CXAIlR/oZ6CWgc5W9EL4FC4/9N6CVgYfy/CXPEmzA9vBmmAdc+xhH0hsx/oOUWJfS+IUoB4yoPTMzJYBJlhHGdFiZzbphACWKcsgRvMp8Sonyp3GQmFTLHEKWPcZVDJuZEMomyybhOKZM5r0zg5DIhZli+j25omgPxMZfirFM3zQepPFmF1DNEqWdcpZ6JOfVMotQzrlPPZE49Eyj1jFPq4QP2U0KUepXH66RC6hmi1DOuUs/EnHomUeoZ16lnMqeeCZx6JsTUwxcIKEOmORAfcylOPfX2QJHS+34nUuA0HHnfTxcRKanf99NqJT0r7/tpmVNVv+8nVUxb/UZDRZUpHMpgIkeB0zmqMqljEZHasQAneFQraR4LpWSPckr5KFPipxc9ZJZOa6H8WPtEGhDVtzwOBd5OeB/k20naB/mWn3US5uK8zYtwKp62OCYhfSQ0iz8WRProLr/xWrY/pGvZntG1bM/UtWwv5GvZHtO1bM/4WraHfC3bw3gt2yO6ln03GNmZH8WR9C5ZFvA0Zt6hOQGSo+NdsCFg8d3Rd2g4jmaxETPRA3YN/sRRrQNmugNmogP8Mhy+V8V/luNvF+L+0at2AT78DpIRPkdVaERr7eI8sEpzG93ccH2OvITBq92IKDQqCp+3Xz43fb2889pYpBXNaWtVb3XVW9FTfOmOkqi+XbtjudxhfvHuxVZ0KBq0Ev1De7hAWTd385wZXSzUidN0tbh1Om6diBu/6IySiFunur3Lyb+Jh1s6FI3BV86G8+EG61Iy7bBOAnux3mOdVBGytMs6Ccmf8z7rpFCw0k5rFsCz09UPc+Xe6uqHJfLx2tUPy+zo6eqHOXl74TPR7OTyJpDVGx/tX2X6ptX6N9m/CdXu5YnAOJmLr3rCwOfFEH+NqmWaIUxgG3JhLFRqwnBNzBom0tRhvBbGPIkUJc0kRWhF4TSnmDDaTjW7mFZLido8Y3qtrWnGMaGSGWnuKcJKsVoI0lTkgpyPiiwmpSJ1oniankwY7QI1UZlW64LalGV6rQvy5GVKZdRuBNsqVmu+mtXCBUeY26KSvjPKaZ6Lso57LKOiH0ukPohynv+ingMedQ57VNOMmG7KnEmBZ8eRmzK6iJgp9U0ZrVZmzcpNGS3zDKpvykh1Vg1ZnlOjzDNrVP+DjJKzbCwxnlF5xo3ydxIqzb5RZael+wLR7eRNA/3F9fbkuTnKyZ1J/n7I5WxNJdScHYvwzB3V8U4Rs3jQ81we5Lb6wTyvR/k/iI6c42OJ8YSszvex1HiE8twf5dG8zOuAIK/qynj48sqAZL0+CIXUKiEU6KofzSuGKP8HnStXD7HEeOdWVxKx1HjnilVF1Ec9aVNVtnVlPHR5zfF+WGic+VGcI9/jggKQmCvf08IBaJwV34cFAjC69/0eFgJA4hT3fsKvH72fpDePypMBbGvaIcWcWq13SLGY2592SDHnSOQdUizEmKQdUsQpOpWdReHxCMZJ7yySIkVsZGeRLJFjp3cWSZGjWNlZJNUYT72zSIkU2bFNNvBoCYOrNtkIiQJb3WQj9BxUtclGSBxQuclGaDGYapNNliiQ9R0o5QEcxjDtQGFO0dM7UFjMcUs7UJhzxPIOFBZirNIOFOIUpcrOjfe8PaGuUMBqOzcqsgrfyM6NSgkKZnXnRkXn0FZ2blRUCvTolgVWOexhy0JiFOq8ZSEJKrxyy0LSKKRiy0JSOIxpy0LiFLrKG/7OOVz2xw6eK0bhcoHC5YIKl6s5XK5RuFzgcLnC4XIlhss5hcsECpdxDtfwA+7PM6FQFUyBKliFqWg5SEWhEBXMASqcw1N4DE6hFJoBU2AGSmH5MITkqR+VcACKvyX6IYUBePot0Q/YfED0W6IfQrOBhd8S/YDNdfQitOdF7LkexSsuF17Fo5gKPRL93fPU1z2N/dwjecuqV6j3exZvTvUodu8e+W/E9kdxu0GPSggAhYYAT5sSeloaAsiqC8x6DNjQY0BKCxyVK9szIOU20HlBsZObnJh2jweRTsxGJma4fwM452sj8rUR+Wp3ZBy18Sg3o63UuZV1bnPl+E4KKKLadssEUB5TcG/EOgTvSXjPdaFnu5yNXSX1Opl6XU49vpkAikjKTiRlF5JyOrjeuR/F17Wm6HqAxC6IKbke0LgLYhpcDxjtx5iC6wGJ2x+mE3x1coreBUi8JDkl7wIaX4ecCu8ChV58nKJ3AYqvOE4nuOdnit4FKNr3NHkX8GTCU/QuQGS10+BdwMIEO0XvclSc6qmRvX7qR6VNgOI7m9NkVMDT7wNN2agAx1/amwajAkY/lzdFo/KGtaFAm5uhfgl6SkYFNFdO/xL0NBgVsPhL0FM0KkdmVN4fXSjQ5YaoXzmckiMBzQ3RP2I4DY4ETMQ//kbhnmzDONnm8bxN4/bjYGTDD2V9RCdDZg80gcW7wCDgrV/Adr8XmD+kBOg3bQGWO7WA7Bmks72lPT23I5sqHcWp0jlOlU5tqnTEU6UrPlU6s6nSkU2Vhvply5k1wh8FAosLso/J1LBs/pWyj2hryGj6+xh8DQuW+AOy+Dsrk/sTIMOyzAvRZxrRXH/4hqzS3ka3Nz5bAy7i0Ig4NCoO/MBsz+ZhOM3juOsRbVb+OHglfEcrgtDWGtzqBreiYekZGUg++ADa4zBgoqN9decMV3eeAF0coZ2wl65mJZ22kk5YSXpeBJJymU65TEcugw8tEuOGpMcWSZDNVA8uksYNzo8ukpLaxw8vEmc/xe2Fg1ml7YXMlb2q7YUskdHWtheyzJabthcyJ/MtHB3KGA9JE8iLjcvxaqoYtKbxyDWBfcmEZE6mkFMbjxfRxmnE8jMr/hpVy+TgJrCNuzAWKmXorglXN7EWx+TvJlTjmJy+CGD3hsjzjbPxF6EV35umABNGg6UmA9Nq8ahNC6bX4pXmBxN4kkhPOVkQ00WRcM4wVvNbPXuYOmKraR4xoTKZmF613TytmEK2S48jFeYWqweSSpMBqTySVDKHRT6UVGJqvHgsqSSeeUCDyQcpzT8oqSkI9TwLoUoTEUp6LsISPB2hRjMSSjQpgYQOjJitAjWanVCSRoIFhJegzHaCGjsGaslkUaT5CiWassLz6mAc4km2+L5K1dP0hRrPYEH7TjjVPBZkMZWhPhLuNKGhNhbuNK2BBjMbUprcUOL5DbRWnyPNcqh9L6BqrkN5JGC1GQ+LpAsiFHniQ43nPvX6hNDEDAgqToKIR2YFPRVigXHnTxMiapU5EYuMTQ55ZkQxTg77ncJfLav2R5tw5D+X3h/F+3M9SvfhimXi9xa0yWibP8inMZ7PNVgwnqugTUbb/EE+l/F8rvDOE5ww8E2Fbyvfw+ePYq4EdCVUAehG0q38Bj45SvnU5SUcOG9Bm4y2+YN8OuP5XPYuBZzM2Eawrfgsn8+FfEJ7GwFOaGwj2FZ8lk/oQj4h/M37k0A2iWzTp/hE4m/eDwr+WeuTiDYZbfMH+VTqz1ofpMsdvdxbix3FFxv2ZGHn7I/ihNej+PwfhPjM6nKS3pC4nOCfGLxEBwcknrRdkl8DjU/aLoU7g0JP2i6DFwMLP5x4GTrncoJPFy4x/oBSXa9wOXZeyG3Qb1Vkr9JdiPOAb3NJ/T1pz+Z5wLe5ZOV70i9blG8y4VaV1t92mPIn6y+zq30Izwfaf3H+OyJHWSYtRypeeBv6aqMijrT90UPQtkGj3uaBNlDdaYa5Pjghn8Zv2OQvfciltrkUV1TN0YOkU8Mw17ZwqC3uRKQvfciltrkU11btTCySeuu5VE2+9axErLxeHkT+UCm/rZRPDaotGwZdXbads8ItorXGafqqjTzBgyy7lWW5HZUVSFH9Mi41A6TUDtCwIYA3+iQPuvRWl06NQS23ht91Hmqb3nUmDi3Iyy9DD7nUNpfiGqsV2SClt16HauW3XlmACoslnLMHUW4rynGl5bJu0NLLp0Pl8sunLECtxTrQ2YMotxXluNZybXjQPk0O96NO/SguwnpU7j4BEu9K9Dwt1Xoa35XoEb0R0TN6I6Jn4Y2InsS3PT5BxJ3sxsOiWa/7mx9PC4wfanJD6Y2cA9INzW/kHGh6I6fHuf38Rk7PRPvbeJTrrF6/6bmsYJtrol+/6RVRR3r9pke5Q+gvcn/KS6AnURjoYdW0v77ot1n6kd0fcWQ38QDFLZQHoVxmrwSirzVO3+1cnUDsD5UCnay2O1Sr4sTxb8yJPy+n/7Lc7TASTvwo+sUtjgRE+XLmlkYCUhgJgONVzm0YCcDoWuZ2GAlwlOvcVirYygq2uSY8EkARdWzjVeItjoQB5V3rWqC2VPasV1TR6PqO9UqB3FeV/epa5ejU9qtLua0Ko2GRvV3fjK4LjDarkg61nehapiSpbEQ/qHeT4QaxH0XP6JH4qfKe411gp/Gnynskf6q8V+inyntGP1Xes/BT5XeDDR1WNXdoQ4Cwdj1dhsYuc2OXlcYuZWOXubHLamOXorFL0dhlamy8T7gMTV/mpvNScaDhkfhRRBSEygNxEnM48uNw4jow4mE4CRyi9Cg8YggWXuJTIDhs6hJ/kMKvIh1FRLGr/CYSiTl2+ReRiOvY5d9DYoFjl34OKWKIXfgxpBgIjp264VCk/FsRR0rgOI79UoQsImJa+Z0IqVbiW/mVCC2nWOsfiVAixj3/RIQKZeqD6g9EDAXKrW3oA0MUfeMq7ibmiJtEsTauo2wyx9cEjqwJMab5ccAS7/1TIDiC6t7/QdqtF+hu/57QDfp2OLF/ZBOO/FqpDavoNq+iW7mKLosTrkq6MUocKoU3Rgk95PNsBaKK1h9etvJW45nQuN7pVuNQ03SrUfGHSgW2NU4N+s4TSljfcZvUrcYsQXvoVmOmD/K0W02pHaMPO1u+OXcWMdcfb84N1cSbc4Qe8nm2AlGF649L29Hd/Kxy3UmGJpCyqSoP1aps6wo1j+XcysrG+zbfgmQB2hRuQTJ7ECfbKkZ1H3myXC42+jt65+cRla9hbhsaicddjSTCqVmy/Y3EfZMjCb7TkYSy3ZGw7XmM/DKjK4EqYSiPCjMvj/2SMiTGs4ivc8nrXcNn95mLajSV6jWV6jVjvdTUeyn+sTDSKj3Y1HqwqfXgp4xEh95UMjDeAmP1c0ZzgSrxnI/FbV6P27wSm3ktNvNabP47I1HqdjQGC4EqDV6Mf5H9ZbXI7zISbVxWzrmsJO1ytC7LyvhuBaqcuB3r3bbeu22ld9OfqSO51vltJaxtpYlfBCrTDNnMv3PRlUCVAK0qPbMa7RkRsXXlBOvKCdZVO12Pnlqh0Q90AlXq2o1lS1fPlq6SLXxdxXItW7qaVXR6ItwvNC7ivL/JyN+XN7TNpWyRwRyaT9K3XKNvlQh/q2TDNzEL6b99apiXXXiReRy/YZMRrLnya2ht5TW0tv4a2heo6Ol5If7wy9A2fIRO8EV/9/AttXeHol4Ty+tIh8dt9FWmnrm6aD7dly89/P+H8wtTywf7Vc5RxrbSyVqopvjKlf6YW5jQLK+UFu0hl1hX8MgJ1yMnRGtT6nerM/TFYZithlX8sR/F20IrXLsDEjeJVrRiBxpvDa3COh0Y3fFZweociL0wb2h4Ke4UwGGwnBvZLdoOg3QFyzUg2B7A3hyAQ2uAlMYAKm1xFA9CRzlfhINUz0XtY4PXOdmtqU7sYBkOhm8FMuQbEjwP8CH4Tr5g3M2SPPCwT8HL7b7zzA/CuZx32JwuhaLTXdapLutSl9HsCULuyy735TBXOviKzduGg6HmQLyKAyx31GAoGqLxaJwGpXE1Mk3Mw9MkGqPGeaCawKPVhDhkDdO49RubmBx8u/M8Yh/GRmJiGBbZYVpKEVNinhimnDBOiQGvGDNR47aIi0x0o+ToNzFaQMHuA4UsM4mOYDjagmPhDSZGg7Db1KmD2SoKz35RFDcHI8o54KEnhaLTUVVGIp54sqJTRftKetzJvJJI0Wbg3j6FZptJdB1xy35Qwt9qIkTWk/5SE3NlPfIPNZFE1pP/TBMLbD3przQRJuuhP9J0yjRYT8FuPUZiPhkW+WRayidTYj4ZpowxThkDuxKYKNMo4iIT3ShpPSZG6ynYraeQZSbRegxH63EsrMfEaD32Mn7qYLYe8beR6BPuLkaU9cA7AxSKTkdVWY94YYAVnSraetLbAswriRStB14VoNBsM4nWI94TKEp4eo0GFAW2oaiyGUVVWlIsIowpFmB7imoyqSgnq4oyGVYU2baCSplKWrSwIIKRRU45GkWVqbFEzteoU9ZGkbMzqpyjQa1yaVmhyKLGx0KhrTAWIUMMIthi4MsaJ4uMIhklicouYxEyzSB+qaRXMtCgChsNOvhl5NJS+VUiGVK21/qLRLrEd1KXDXfsLSJdZjS9kwWrV4ik9rUS4m2NkzXXXh866HlrldhSVd5kGD7C129DobTqJw7foPfWrdPkTRy/obLhci3+lHhS8Hukp5ZP6BEhVfhOHxu0hXM42v/NXCbxbqBjcauviB8Smdr910L2fz7+WSRlpiUMM2RUyo3e4Q7uaRYH5XBf+OswzR/M5ivO7YDKhA4ovoPtHF+8dmpvWzvyt6ed+evizso+Zif26rShkghPrU1Rb3Kb/N16QLpNjWxTfHXecW5qI5raiKa28SjXua1UsJUVbHNN0nvtrog6+hvsjnLs6fd2N2XdeG5H8f2+TVghOorLQufpLcBNWAA68lWfM1/qOSvrOye2qDNUEuqJtckXfRtMKEBxG88mJRTwtL7dcEIBjmvdTUgoYLSq3QwJBUe5zm2lgq2sYJtrkn6GxxVRR//RHUdxQb3BhDoE/2GC2/ceMPiA4va9hxR84Ol52wMHH3DcNPcQgg+Mtu9ti6v6kY1mR+aqjsTOli27qtO4h2UbXdUZbcLZoqs6iRtStji9HhmKBZrcKNqytM226lw2SuxI2gZbdSTayhuOtsVW/SjXWe0n2rKtOs010duFttFWncWNQdtgq4Z8+TJEHx9InBCiNqUHEsxVg9UDCZao6fmBBAvcHfxAgjHFIS1dKRaiKOekcUpM5yOxECnqUs5T0ypxShlrQi1OrUCVBsosNrHeEM5n4zqpTa61hdPbeKVvU6LDK9OQ60gpAihRxqOk4oN6DhGqFCWUOBKocceiFscAKhQq9bsaOVj6AzweUKIhEaTxYImBEdQ8NlCuxzKNENRGYtlqWm+7HC2ojzaQxwxKethgiZE28uBBqZ4UPIS+lfXquR3FNfi3sF4FlNfg33i9ChTXq47j0vxbXK86o6X5t7Je9aNc57ZSwVZWsM01SetVV0Qdfb3qKF4rfMOZiBHVP81EiYvGqZkoSbkf0kzEnFubZyISWoEqDZS9pGYiliqVrXRanolYoO5LM9HAy/0qhaiJxqkPnYumm5ib7lLuQ9MoLMa53SZwHxahFajSQNmHJtYbwn1oXPehybW2cB8apz7EX0GqYWpq0Kg/oyZCEQrkcEQ5923QKWRB47gEkfsZxbaCR4Ig+zwUGG8o933QdP+HImNt5TwIGuTCv/73/wO+9kRf",Ove="eJyFnVtzG0eShf8KA0+7EfKseJXkN9nj0Vj0yNaNEHZiHkCySWEJsmmAIA1PzH/fRqMr8+TJU9CLQv2dYqMrK/NU9Q349+jH9va2uXsYfT86+8dqOb1u9o72Tw5P9o4PTk72R89Gf2vvHt5Nb5uuwafZbbP87od2frnhq/kc+V7h09vZfI1KB8fN7Prr5jOGRj8/TOezi9d31/Ou1fNue/m32R/N5W+zh4uvo+8fFqvm2ejHr9PF9OKhWXxsNn/50x8Pzd1lc/mhvZ3eDcf1ww/tH6Pv//nd/snLZ98d7L98tv/8+fNnrw6P//Vs9LlrvJjP7prf2uXsYdbejb7/rpNB+PR1dnFz1yyXo++PO37WLJZ9s9Hz5wd/6XbUfci79mF2senIj+39erHpw95/Xfz33v6rl8fPNv++6P99tfn31fP+38P+3xd7ry/b82bv43r50Nwu936+u2gX9+1i+tBc/mVv7/V8vvdhs7fl3odm2SweO7oN4my5N917WEwvm9vp4mavvdr7ZXbXPqzvm+/+3nR/9frN3vTu8n/axd6s++Pl6nw5u5xNF7Nm+ZfucH/qPuZydnf98eJr08e/P4qPD92fTBeXRe0a/ji9//swJCcvTp6NvpSto5P9Z6PXy4tNqBed+PLw2eivjW13QX7xbPTx4fLv467tUf/fs+6/+4evtgP2j+ZhMbvoIvrPf4/GX0bfH2wi+647kuX9tAvkf55t8eHh4RY3f1zMp7fGj4+Pt/z3VduF6nzuyvNhR3er2/PNSF3fZe2ync+nC+N9NvTCfbO42CR5UV6Wz5/edtKyi08+tP4Q+jHP2v100dzNm6uaFP/Mjm+63OxxeePKi3KA89XSqAXtoqvNaf6Ir+v7r81dbt51ZdZ6Tw5evBxiP58uv+aj+bNZtJm2d02GD0+i5cPXRSPaXrWrhaCzR9F2OftDwOaxEYPb6Jjeze5EXl208/Yu42VzO4uSjcB8YwSJNr+vpvOMrxdNV8qim7+vmmVvNkV5dVjG3o/9xcHBlr02dHLyYot+yK1+zOiv+Q9/crS/v0V/8z8sqfAmo797mDon69HPuWNv8x+e5oP4xfu9cYcN+kc++nd5X7/mo/8tt3qf9/UBvONkiz7m4/qU//BzRmfCOca52ZeMJvkj/zdn33k3n900D8E3rEjPOy0WKv8dmcrL/WIqF7PZxWxxsbrNw7ba+Paym3xEjfQGFw7GjSpH9dzQURnai9zqMrcSn3yVP/E67+trDtIs7+v/8h/e5D/0Gjbrv81/KFynza3uM/o9d9vNwcpqmY/+Ie9rlQ/iMWfcU24lrHSdj+tPP4hXR55fMREODp6XrFxU2lM2HjyHbHyYzS+rk/1l+yTiHKZnnwoe+qWaJ8d+Ka+rzdoQjdb7rCaPq3m7mAm+bCp7uVgtunn8Yp1TqS+b5axfuwr/365bdFldr2adcts+6KXDRu53/A2ZQl8S52ommFhBdWs5uR64nF5fqzlty3ExRiuOzdg1i8Zr//io6N0S/noxvQdTK3963p0/NKKXHt7z6XJHhHerlQWYDUDU3e67NfbsfjlbCqnr68PXdhUWi2neD8ntI7eYPop6mF6sHtTapffyq3nzR9YqlXU7vVio9c75olEffNk+TC9Cxbk060YSA2DKAuvQD7a57EKqFqmru+vpYnU7n67Ex7TX3TrzRuxuiv2AcbkNOevCa1/3HJpnLy6vuoVeWBn6EiVOsr4Cidw/4Vf4hEP/hNvO6VZz/Ajz5qkzc43LTdEvl7OszCvL85YOtOy9hbQvZd7VZ3dW3OU9jJst5tKQ+tQcM9Cn/5g3PjXJQfXdxdHz1VE6AltIX84eZ5cihJN4ZL5iFsXhh135o8+7/mhNVWiTdX/yRWUCXc279M8LpeI4h8GOnOrB/4ZGyEaC/sBPA9KH+ElD5xFwFhLPMqmjL45eFHG48CE+ilzH14UxD7yXOi7v1AF4edRyNJqqL/Vld+xcqra3aKwQzmyVniGhm8DJE335Gj/9qCyo5u2fzd21yNwPVFF2Gqc66cmxs0h2Ze7r2pAu4oHAUFNf/fwnR85O7T59bReiV7/Sp3sYKlXwMfKTF0P7y4oRfaYP8IjFyS1c4Viu+lXOQhxvTEGPYo2TrRYTvF3NH2b387U4LuqgJ3kcjpJI3XrrYTadX86uxCnWum4N7+LneMKKZPHa2JlmO2adunRRGei7mg3WMuZdpTZ/ph3h9bduxYAX4ewUaNHeNHd4ImTmuGiuZ8u49PUSpbWXT8e5LuxsZNVVdTgf8WDHnPLCrBhaS5Hxuqyk1P+SaR+9KmvX/lJXvBBmcf7pQaxQfqwa4FxOqvvDaD5UTKapzo414XVt+bAjKysB/rNWGvzZ5gq1EalNPbx4t3mk9sm5ju2zdy5LaMbcL+uCZv4gLvg8BJN2T3xqdzhiXuKU3d2uRE/iEXmo5DrTa4FC71ef4grnxTH6eJfAiy6RxaF9TCcxNjFX5t9Tlcd+ihEHzk8l7MaOMsX6QuNnOn80XqvxX+iwSxy6qH2dzmFqKEW+OTWhS902FsrlzZfjsslT7RsDSOsgCwLPz3beHs0UOzQMqxrVqZzrP8oFomWwPsWxayGdTaibHm1lyv+xchAryvwyEF2CzC6U0f614o2Lncvdd3F8/HAr4/Zhd17v/KzXlX2+rpp0PB2wEYj7cSMWE6cvRSrTfc0pbuQC2hZkYSXge9tZCnQIdsVm5yfN2+vNeN+14mJVWzfTVZZKBnW7qlTytTwSu8ICM7nHvJK+d2pXfv3lLi+a3fNrNf7TanM78l/PRqfN4u636WyxuYv8z9Hrze3q0bPvjo//9WzY2rpHQNvjjGgwdYRv4tbWVQLCjqHwa7d15FvlEABBcgRuQxXotv4DCs4TlCFkgW2vDgW0LRxE78PWp27rlW+VmCEKvXfh8yYWz23LBsBR6D1w6D3Q0ntA1HtQrPfAhroOrLcTJGfd1r53f7zZPDR1stl87pulU8jg6AHfd5sHtlt4TuDZdy+OCl6FQ1nlkK0qIVvJkK1yyFbVkK1EyFYiZKsUssfY06dNFtjWOnRwXboECA59oEMjLGFDVMfGqZidc0UX5Y1AVNvGZYEXFarcEJW6cVXvJuaiN4kq37guf5PZA0wgIzBOblD4+4zAFwyROThXDlFUsAlDlPjGVfabmEvAJKoD47oYTOaKMIHLwoRYGwWjpxSGxlIYuosxthgThM8UDcymIOU4RVvlQ2bvMb5rCIQLmVQZgoofmVwbguRMJugheBRRAqMqaJ2Dw5ZlPPvWYB/oW4bIt4yTbzln3yrKG4HIt4xL3yoq+JYh8i3jyrdMzL5lEvmWce1bJrNvmUC+ZZx8q/D3GYFvGSLfcq58q6jgW4aoaIyrojExF41JVDTGddGYzEVjAheNCbFoCkbfKgx9qzD0LWPsWyYI3yoa+FZByreKtsqHzL5lfNcQCN8yqTIEFd8yuTYEybdM0EPwKKIEvlXQOgeHfct49i2MDZpX5ORgUSQbI5G9LMhvapxcLYrS2kIT8LfIyeSiqJwutsh2F3XyvChq44tt2P2iShYYRfLBIL6vcHDEyMkWSVTeGJqAQUZOJRpFVaexRS7WqFPFRlGXbWzDtRtVLuCoxioOGrppENBSg4C+GgU216gKhw0NwGYDV14bGqwqXWPXjeI3h1T4b9R3DWnFiWObnUOaPDmqO4b0sRZhsOjA15XAsllHMTu2E/RrpOTWKJFXB4mdGsQ3mpJLoyQ9GhqAQyMlf0ZJuTPq2ZtRJWdGSfsytmBXRo08GSVyZJDeSwpujJS8OEjKiaEB+DBSKlmUVMGinssVVSpWlHSpYgsuVNS4TFGLRQoKui5g9FzA6LiI2W9RE24LMngtUOW0IK9kV9hlUfrGkAmHRbU+ZBV3xRY7hiw5K2rVIXvUkQRPBbqWAWQ/RSm76dB9tFJD5KPGyUSds4MW5Y1A5J3GpXEWFVzTEFmmceWXJmazNImc0ri2SZPZI00ggzRO7lj4+4zAFw2RKTpXjlhUsENDVFjGVVWZmEvKJKon47qYTOZKMoHLyIRYQwWj5xWGhlcYup0xtjoThM8VDUyuIOVwRVvlQ2ZvM75rCISrmVQZgoqfmVwbguRkJugheBRRAgMraJ2Dw9ZlPPtWOVg0LmfkXC6QdYHA3mXSG8XIvVyQ9mUy+JczMjAXlIO5mi3MNfIwF7SJuc4u5grZmAvkYya8FwyczBlZGQjKy0wGM3NGpeSCqiVXczG5RtXkgi4n17meXOGCciVWlHF0NYNoawbR1xyysbkinM1EsDZjyttMXIlDZ3dzYeeQCH9zrTYkFYdzvTokyeNcqQzJo4oY2JyxtQgUG50L2enKkaHTOSOnc4GcDgR2OpPeKEZO54J0OpPB6ZyR07mgnM7V7HSukdO5oJ3OdXY6V8jpXCCnM+G9YOB0zsjpQFBOZzI4nTMqKxdUWbmay8o1KisXdFm5zmXlCpeVK7GsjKPTGUSnM4hO55CdzhXhdCaC0xlTTmfiShw6O50LO4dEOJ1rtSGpOJ3r1SFJTudKZUgeVcTA6YxtnO6QAmVOlwTo9qAthi9bcTsphFyuYPI4w+xwg/AmE3K3gqW3DSI4WyHkawUrVyta9rSikKMVrP2sqOxmhZOXFUxONuD3iYCLFUIeZlg52CCCfxVCpVKwKpSi5TIpChVJwbpEisoFUjiXR+GxOAaKbjUg9KoBoVMVxD5VuHCpQQKPGohyqEFapUNldyp4R8iFMxVFh7ziSkWthDw5UuEy5I85MuBFA1mngPCKq+C83hpqA23IEPmQcTIi5+xERXkjEHmRcWlGRQU3MkR2ZFz5kYnZkEwiRzKuLclk9iQTyJSMkysV/j4j8CVDZEzOlTMVFazJEBWKcVUpJuZSMYlqxbguFpO5WkzgcjEh1kvB6FGFoUkVhi5ljG3KBOFTRQOjKkg5VdFW+ZDZq4zvGgLhViZVhqDiVybXhiA5lgl6CB5FlMC0Clrn4LBtGU++9UNHX2/WUs9ty5ZejorHAAoxBY7rM6clkoAsSsAsQMCG2AApBe/ocx8p2/L0MxQOF3hISKPlcAHRmINiHQFmHQE2dGRL/lrifmxbFndHFndHMe7OMe5OLe6OPO7OPO7OStydWNwNbUziyPozDluTuGWziyOcO4wO367XecEWDf6MwTJEETNOYTOuYmdiDqBJFEXjHEoTOJ4mxKAapsgWDuEtaJzRRCCKtvEc8iKluPfveMa4F8RxL5zjXriMexFF3IvEcS88xb0IKe5FoLgXzHEfOMZ9QOOMJgJx3AsXcR8kivvfhpC/8q2yT0Al0IBCjIHDJwMtkQVkQQVm8QQ2hBJIiaKjqc3l/VbpAaDSA0ChB8ChB0BLDwBZD4BZD4ANPQBSeuBo+52gXZ8OCol6k/vUlKUkIt2nRvYJXk4OOHe1EV1tRFfbuJWPua0cYCsPsM1H0tK8CIo4xras4QHl2FtJ7G/nyrdhjfI2r1He5jXK28oa5a1co7zNa5S3Yo3yVqxR3qY1ytu8Rnk71MT+sW3ZGsVR6QGguGxxjssWp7ZsceSLE2e+OHFWFidOSg8c0VbugVUAIt2DRvYgVADg3LFGdKwRHWvjVj7mtnKArTzANh8JVwAo4hitAgDlSNOksEGr0GCVO7KqdGQlO7LKHeHTGlBER1Yi2KuQRaej7XWGbQn0W7FseyRqtOepRnsaa7RHdNSgUPX2rIQfUCzV02D1p9nqT7PVn1as/lRa/am2+tNs9afC6k+F1Z8Gqz/NVn9asfpTafWn2epPq1Z/Kqz+NFv9abb605DVpzmrTytZfSqz+jRn9Wk1q09FVp+KrD6VWb054z7yrXjhrEfpslj4KpNQFyRQiZCqqoWa5MKhBlRDpOpyokZcWSRTkZFK9RZVSA8SKKNJpYJkVaQ+NclVwA1yxVILKhlSuUZI5pKOclsVdoZF1jw1+VbH2QlI1aZAjXb3na2CVHKNqIKBkEBeQqqyFWqSHYYakNmQqn2HGrEFkcxuRHI0piiCR5FAdkVqcq5fRsOF8wPbsmvmgOLlchPOwtY4bE3ilp3nOsKTV6Pxy4fLGsmUgoeTh1+GWBxbZywAgPAi8JaGt/YPIqL+197aj+pZRuOMJgJRYNTr7CRVQiTfbC9xwhe6KQYcMfVC9yDFbILgkUAhZFUFMrY5qwnjmjCpChRgUnOYY4NKsEUjDnmuWBlFDn+9YocGg59i+A1R4J2rkBf1LKNxRhOBKLTGc1CLVAlnkDmQRVznGHDwjKewvRttLzNsP7DfssnVkV24chQnWec4szq16dSRT4/OfD3grFy4cmJz4xaVwnwtEPXFOHXIuOqViblrJlH/jHMnTeCemhC7a5j6jDcIGFGf0w0C5qrP6gYBS9TnfIOABe4z3yBgzH0ODvC6KnD/o8pRiKqMRWwiIhIbcFyimqIT5RSjKFOkokjxKvc/XwtEMTJO0TGu4mJijohJFAvjHAUTuP8mxJ4bjn3+dejukW/FmxO/YicBxcc9nKdbGL9irwD5AxzOrC/Ahm4AsSc5DH2KW2XyQhTmLRc2U9axbY3D1pfQchI0m7EApUcEfkWjPSJEYU5Gy1wFXBktSxT6bLQs8CCw0TKm4cAVMSMamMqKmNSzHM9xRl/yH05yKx42tUgepPCmOAxg5DSKUaShjKIaz9giD2rUaWSjyMMbVR7jqMaBjhqNdvrCC8lp3Hd94YVqclYZlXGFf6nsZ1Jpz1lR/dKHQYeXXiExkFJaoERJgZJKCdRzQqBK6YASJwNqnAqoxURAhdKA3rMXlFKg/p59bnAmIz+W9Ivcw0S25WGvvHs+qOV1QRhxQzTcxmmsjauBNjGPskk0xMZ5fE3gwTUhjqxhGlZ8R5gRDWjlHWFSz3I8xxl9yX84ya14+NT7tIMUL7LhELJCI8kyDSjLaly5TR5ebkGjzDIPNus85qzHoWeVMoDkT3WF8iHJKi2o0Vl1xMZV5Ut1b5Pq33DmsJwTyF6hg9RxRknjAqWLCypRXM0p4holhwucFq5wQrgSU8E5JUF4wzYxGvjaG7Ysn4nojgX7Iv52ItrxoMq3UAetXN2B0TREg2mcxtK4GkoT80iaRANpnMfRBB5GE+IoGqZBxKt9jGgIK1f7SD3L8Rxn9CX/4SS34sFTFwAHCU/SjwjR2KWTdOZq7NRJOks0dvkknQUeOz5JZ0xjh28mMKKxq7yZQOpZjuc4oy/5Dye5FY+deop/K/02DNv2mfLfcMQAlcECFMYJeHpO/TccHUA2MMBsTIANwwGkjISj/gkt648/oeXIntByJB4s73l6sLyn8cHyHtHj4z2jx8d7Fh4f74k9N2QoPrW4IX5BqN+KF7t6ZHfOAeVLXD1PV7e2FG+MO47Xu3pEl7p6Rle5NqyNW/mY28oBtvIA23wk6a61K+IY/f60o3ixbYP4qcX3I3wvod+KGdUjkT49T+nT05g+PZLvJfQKJVbPKLF6FhLr/Sg9ffZhhM+r9FvxIZUeiSdTep4eR+lpfAalR/LBk16hp016Fh8x6VF8ruRDcNUP2VA/1Lz0wzBwvp/Pub+fK/39LPv7OfeXBw4U0d/P9NTpBxg4J735H5etje8f2tYkbsVH+D+Qqw+0XESD0TdEITGu4mJiDo5JFCHjOkwmc6xMoAQxTlmSL2o6onzZeVHT1M9535w+xnfFSiSSSZVYVVLK5FqsUnKZEDMsXLeNGTLOSTMRiLJOXaQdpHLnC1LPEIXTuAqniTmcJlE4jetwmszhNIFSzzilXuGQeoYo9Zyr1Cvq57xvTj3ju2IlUs+kSqwqqWdyLVYp9UyIqYdvRB3HDBnnpJkIRKmn3ogqUuVJTRY4tN98UpObiDDvelKT1UrIdz6pyTKn6q4nNUnFtNXP9lRUmcKhzefaZ6Z0juq3Y65SOzbYGfNamsdGu2OeUz7KlPjpoadjlaXjWvpOqgIXRPWhp22DbrjhxbR+y57tcRRfTOuReDGt5+nFtJ7GF9N6RC+m9YxeTOtZeDGtJ/HFtE9DNe+/tC1bkDuKC3LnuCB3agtyR7wgd8UX5M7sdRBHdlpnyE/p+q34TFWP7EsgHMWX3p3jybtTe9Xdkb/G7szj7qzE3Unpgf/hRTuHs/Qt2Z6qOoldanIv7VQVUcgu57KX4VQVGufON6Lzjej81/X91yYe0iwM3Syn2MxPwoy1YRdt7ntb6Sie8gK1MnJEeQmKF5izkpeArJoM2YmiF9giDOkiXgXqURlERGFKcGHZ3M5y5qzCMaxyrFaVWK1krFY5VvzsNigiViuRF6tUFE+hD/6dV/2WebGj9D1XZVpFF04PujEnP9YPurGYnTk96MacPTo/6MZCdOv0oBtx8O10GsBcObg6DWCJvLx2GsAyu3o6DWBO/l44mLwhym3jZPfGleebmC3RJDJA4+yCJnDKmxDz3jDNCIVTcTsOc0PBIhI8SxinqcK5sAYT6xFSM4dpleilOcSEWvR4Nil8lrOF5xXjPLkUoc275WnG+K4giQnHJHJS49pOTWZPNYEmIeM0ExXO01Hhi5xKPDEZp9nJuZqiiirmqSKt8mHyjGV8V9jF3GVSJeyVWczkWtjTfGaCLu6n3GuY3gzRHGdcTHTp6eYyoPrpZq3y1Lfj6WbdREyD+ulmraYpsfJ0s5ZpetRPN0sVp0p9wUKrctqsXrDQDXgK3XnBQjdK06m+YKFVnlqDihNsFLggo8qTbVTllBubiGklNuAJJKppGolyqtYoU81GkafloLKjkRin6Pgya+0D03QdVZ60SVX2GJt8K9JyGo8tdo5FntKjvHss0vQe1Fktb9NUH9U04Qe5rX1cmvyj+u1gq4VAbMDzUlQrs1NslOaoKPMCIaq8TAhqWiwEdVFL7bRwiCovH0iVi4jQRi0lQoNVrUNpWRHVbw+oWmLEBjsHtLbciI12D2heekR5l5k91SKGi5Eo8JIkqmlh8nlYjZw8t62yB0BlugAUYg8cPgFoiTIgixowCxWwIT5ASg04Ks59bMRKYUD4cssJIepwermFueq6ermFJQpCfrmFBQ4Hv9zCmAJTOEWnYA5ReofkRHEKln6HRIoqbNV3SKROAay8QyJVDqV8h0RqFNQgUmSDxuGl9zBOMqXQqvcwhKTCWnkPQ6gUUvkehtA4nOI9DKFQKEGiQILCYcQ3G04IUQDTmw3MVejUmw0sUdDymw0scLj4zQbGFKjCKUoFc4jECwQnWqGA1V4gqMgqfDteIKi0oGBWXyCo6BzaygsEFZUCTTLFm1QOe3js/oQZhTo/dp8EFV752H3SKKTisfukcBjTY/eJU+hMoKAZ53DZz19AuJxRuFygcLmgwuVqDpdrFC4XOFyucLhcieFyTuEygcLlv8NC4Rq+pR+CVQiFqmAKVMEqTEXLQSoKhahgDlDhHJ7CY3AKpdAMmAJTfvohhuVsCMn+9ob+GcYDmT3kDCxeHAIBLwkBtgtBwPzKDkA/ewVYnkgFZFd2nG1+DOHQema/gwAonm+54L9+0G/ZywWOxG8e9Dx9O1JP4y8d9Ej+yEGv0O8b9Cz+tEGP4q8abJBfv+q34ulej+ySpyNx2tfzdK7X03iC1yM6YesZnaX1LJya9SSefp+N/IoSkm3i7h+8Kqgf5ec2Vv41o8DKaXZg8UlqF8Kj1IDxq0aB+zPWzuBRaofwLLVBu8SzPRPdoM11ncMXtmXnnI7iY0vO8QTUqT2g5MgfOHLmTxkZa+OxtiKybS2KrY5iK6KVvhAVJBVI/0pUYP5ugzF/wN5rAi+XeFat4lauFHU1pOeyLFa5LPTFjl4RBcOXNXoWCmZcvHn7yP04eDMw82ZgcchAwCEDbEMGzMcFoCc4wOLNgGysnPU3IXwrvvgwTg4LPL34MEaHBSRffBgHhwXmOWYovj4zHhz25Ni2bLHgyBYKjuIiwTkuEJza4sCRLwyc+aLAWVkQOLHFgKFSC8dA8JWg8WCw/hdN7qXZKyLdy0b2Mngr4Nz5RnS+EZ03X9262XiE18vHo3SRfDzKV8bHgwW+sL2aAwKKb6Q5xzfSnNobaY4oL0Hxd9WclbwEZC+mGfJr1TaIaHw+2P6jOGM0PkDip3DGZHxA4w/gjIXxgUI/ezMOxgcs/NjNhmwu0J74Vlyj9ygttifFL/d90zIAmPklsOg8IKD1ADbvAeYWA9DzDWDxS0BmPM76p8yPbSs+mztJfgk8Pag7Qb8ExI8uu0I/pzFBvwQUfyxjMvjlS98qRw2oxB9Q6Ahw6AjQ0hFAdrjALPTAhsgDKT1wFNcOk+SXk8Ev9/f3bdPzzJktSJHFPHMBrQQorkehtVmMIzcSZ5B8BumG42SEq9HJKK1GJ6O8cJwMrgm7bUUE2lpvw8IRsFeVM57SQYKCc2iTOjAvLmNkn5ORWjdORrhunIzSunGS7BN4WjdORmndOBH2CQqtGyejvG6cjHjdOLH7GeAn6WZNEtgW9e2apAqDTDdskpCsMt+ySQqZZrppwwLYZ35BkbgyUvmCIklkqdUXFElmc80vKBInmy0cvNYQGa5xcl3jynpNzP5rEpmwcXZiE9iOTYiebJiM2W/GhQrle3SEseqNsVWZwI7tgjIyU7N3uyQM3ERyceNs5SYkPy8Km3rh4OyGyN6Ns8cXoRWfl9zehJ2RUr5vGpu/CZUZwPQ0DZjCc4EJPCGkW7oURzE1FGklEE0SxtVMYWKeLkyiOcO4njhM5tnDBJ5CTIjzCN1xLQarbrkqjSeU6k1X1UBMK+q2q9LS5CJvvCqRphh161VoMNEgpbkGJTXdoJ5nHFRp0kFJzzvYgqce1Gj2QYkmIJBgDkJK0xBKNBOhpCYj1PN8hCpNSSjxrIQaT0yoxbkJFZqewr34YBTiLn1W0IwQs8+ixrNV0JQNY4M8ZwVVTFuo08yFEk9eqKX5C0SewkCCWQwpTWQo8VwGWqs/Ps1oqH0rmmpeQ5mnNtQqsxs2SRMcijzHocbTnHosJIdbTHagrjSlKQ8lNeuhnic+VGnuQ0lPf9iCZ0DUeBJELcyDXcX2P7u8/a2Z4myIBkdDFB5lAg6fArQ8iQLI7vsDs5vbwOC37AeCPxW9Refd1vmoXNU+x+E/MrQZ2APfKgMKSHzD0jkNIND4DUvnYsBAoW9YOg8DBCx8zfn50Mntb90M5pp+K+Ioq0XaXiTtwtA/KLrdzeXF8COsjprwOQ0mwIDKiyuIOAEGTglQqBsuYsyLAYW8GFjIiy27gunGSfcx82a5nNlMfjXY64FttXHL0sCR+P2oKzJBoPGXoq6E5YFCvwl1hQYHKP760xXms/eV8mB7afmKUmCbAdd5D9elpplXnhjfquX3RmDL5hVHOFv0dFaGrj/GWUiwLcrZtOWcTVsa0maLYtpsWUybnt2UtYhvxft0N2HlASjfuruhdQbScJ/dcLyjdxOWE8DoC8tuyqx+bFsx6Dd5DneeBuMmzNiO5G933cT52Vn8Sc+bMBsbWsetfNQ5VW7yWzVDFCpv1WiVRnDXWzW6SR7XHW/V6BY02rW3arTMOZDfcJHx4szY9YaLbvKtEeHU2f2Gi27ECVV5w0WrlGb5vQct7AxMzsNiJdv1wx1a1oBwTiwo7BQEXLJsURtsqS3z8XYrG6QhaFXxzMihvfRSpNA2O6whaEUPvD5WFfgbYdTOoF350tzHjKAVBpaQtyqTWFo6bWfHKEet/MW8uSqPSm/3yUK0I1bjd6iyKuyImyQ74gbRbFgls2GZzIbl8GWZLMYnSnpVB2tHpHaE6Vsx2h2gHdHZFZpdcakH5dsRgf9/d3Jo6pByI//60YiHFbvSQsqKXS70ny3i2U/UytwptfB0qWjhD+5FHC9mRK18oNS6mXg+n9bU+LCraHE/vegv5Bwl6dE60AVpdLEZsJe2FZ+s6ZEtKQDZwQEM18AWZQ1jepN33eRd0xLFOeY5UFyMOI6vpi/issMZPTO0YZ7a/VYszB7F0LtATy1tkM/0/VaciXtkAQAU9+9CnP8XZTVkh97mALeVaLYymm0OW1rWuCIC2sYX9hdh1WLoPoTNT7SeG/s9tPcprlQvJq0h6r1xyjHnnMP6jqNhsW9O6Xy/kbkYDnW3MUk5zdPNRuY8PuJmYxSuc5w5/43LIkg3LYdKKBwS3RDVhHEqDOeqOkylEgl3OmNnuVgq9zlJrA8R1071JifJtVHiUsp3OCO/z8OQKqsIv+c/hxqz72XyVoYoaMYp351zjfGXPg01hl/6RC25xtKXPiUuBlB96VOSco2lL31izqOXv/SJhOscZ64x47LG0rdHDTVWONSMIaox41RjzlWNmUo1hl85RZ3lGtNfOcVifYi4xmpfOcVybZS4xtJXThG/z8OQaqwIv+c/xxqLX68CbaPAAYwqVwCpqfbkd7qUCsxXn9RfpWqsXH3Sqhr2+tUn3UBUaeXqk1RTLtSuPin5ujaCqYajqitZf11MqeegYpVGgWs7qlzhpMo6j2242vPVOBWoVPm7rsbJJt9KhOQFu6/GyUa7cyG5Q+VqnFLva8Oc/SLIv9d26N4xnNj1Fxm2l2qMlKATtq+0iji+HBA1fEEgKvaSQMT+OkDk/kpA5OW1gEjtG6oC/jQqr3MasRNnwuIV0CJuvk37KOx3nNpM0mdPdEwnKUDdAMFPCvVb8XpPj6JN9Ehc3+l5uq7T03g9p0d0HadndP2mZ+G6TU/i9ZpHmBS8T1Fvcp/ojsNjNnrnsk/ihsJj8HFHoqt8v+Cx2JJv5WPmFx+NywNs85Hktx5NEcfYxvfRHoN9GDJreNGjpzQcT6FrT7lrT5WuPcmuPeWuPVW79iS69pS79pS79pS7tk5dW4dMW+dMW+dMW1cybS0zba0zbZ0zbS0ybS0ybT3Ce+prHA5A4p76moYDaLynvhbDAQrdU1/jcACK99TXYjj4wscwJuHCR2zJo5MvfDAX4yQvfLCURyxf+CDOYycufEQBRjFdHmCuxlNdHmCJRrZ2eYBlHuN0eYA5jXa6FjAMuXh2cRh1fnYxteexl08uCklkQOW5RaXmPFCPLQqJs0E/tpg0yAn1MKGQVGZUHiUUKuXHjgcJRQvOEvUYoZAoV9RDhF26/Os//w8s8zdF",Lve="eJyFnV9TG0myxb8K0U/3RjC7NgZj5o0ZZnYGz5pZGyH3bsyDEA3oImhWfxCajf3ut1Xqyjx5Mkt+cbh/p9RdlZV1qrrVJf5T/dg+PjZPi+r76urvy/nortk7PPpwfLh39P7DyUm1X/3cPi0+jR6brsDl5LGZf/dDO735dTGaTsYbdTmdorq3UfdUHj1Opmss0MFhM7m731xwU7Y73pY+fbqbdqW+e3vUkfnPk9fm5vfJYnxffb+YLZv96sf70Ww0XjSzL83msz+9Lpqnm+bmc/s4euqr+cMP7Wv1/b++O3jzZv+7g7cf9k9O3u+fHLz9Y78adGVn08lT83s7nywm7dPmSl0xFS7vJ+OHp2Y+r74/6vhVM5unYtWbNwd/efPmTXeNT+1iMt605Mf2eT3bNGLvf8b/u/f25MPR/ubf4/Tvyebfkzfp33fp3+O905v2utn7sp4vmsf53q9P43b23M5Gi+bmL3t7p9Pp3ufN2eZ7n5t5M3vp6DaYk/neaG8xG900j6PZw157u/fb5KldrJ+b735puk+d/m1v9HTz13a2N+k+PF9ezyc3k9Fs0sz/0lX3p+4yN5Onuy/j+yZ1QKrFl0X3kdHsJqtdwR9Hz7/0ffL+/cl+9TUfHb4/2K9O5+NNpGed+OHdfnXWyHEX4+P96svi5pdhV/Yg/feq++/bg7fb/vp7s5hNxl1E//Wfavi1+v5gE9lPXU3mz6MukP/d3+J3XcwSbl7H09Gj8KOjoy3/97LtQnU9VeVNf6Kn5eP1pqfunrx2006no5nwD+/ebflzMxtvMj4Lx8cftsLosZPmXXi0ZvkzqQapy732PJo1T9PmtiTZj0n1RvPNGecPqhz3yvN0ORcqMRt3A3XkL3G/fr5vnnzxrimTVltykBs5n47m9742fzaz1tP2qfFwsQpKLu5nTVD2tl3OAjp5CcrOJ68BbF6aoG+bOKZPE6iwhGjcTtsnj+fN48RK0gPTjQ842vx7OZp6fDdrupEcNPPfy2aevEZT8KDve637+/fHW3bq0Q8e/ahpe9Cf7MyX+smjn/0H/+aHwC9+UP7qG3buT/9R0du3W/Sbtjuf6+++Ep88uvDn+t2X+oevxGewjvdb9MWf69Kfa+DPdeVrP/SlvvrT1x790yffdTeZPTQLYxsyRq87zY5T/hx5yrF4yngyGU9m4+Wj77XlxrXn3dQTDJHkb6Yy6lMeXQs6PDzsx1jgv75UcOVb/8E73433PkgTj/7Pn+vBl9IhLGn/6K8YmE5ge8/BqPdDaObR3Ndr4Sux9CF88Um48pV49R9c+0r8qejwg+aXTYSDg9zrMJna8ruycTGZ3hSn+pt2FcTZzM46EyzSQk2T421u/+1mYYg+K59ZR3PH7bSdTQI+bwpnGS9n3TQ+XvsuS8NmPklL18D+t6uWeFjdLSed8tgu4pXDRk4n/oZMoc+JczsJWLB+6lZy4XLgZnR3F01pW45LMVpwbPqumTU3/qPdWmh0Nxs9g6nlj153dxFN0EoN7/VoviPCu9XC+ks6wOrdXUGOzXQ6eZ5P5oHUtXVx3y7NWtFN+ya5tedmo5fABkfj5SJauiQvv502r16jkZXx42g8i5Y717MmuvBNuxiNzYhTadL1JAZAlBmOQ61sc9OFNFqjLp/uRrPl43S0DC7T3nXLzIfgdCNsB/TLo8nZk2xwp7rqOXjf53w7u7ntlnlmXagLFDvH6vrDcrnAhV7gncwJs5vHzueWU7yCnGmkTDzjZjPk5/Ng+poW1uZtoZ5tkPTd6OxuiLush16TlZzrUJ2Ybf7p5G+zRiemsEv1dLbvdG3kaiCTxc3kZXITdFJta6bL5WBoaLXth3SdF3xIJ0gagzJVpzsvGiTQVH9KvZ4ZKIp9GKTmNBr0M9RD0hP0Ab0HcBfRO4bOIeAWxN5iUkOPD4+z2D/0CC5FnqOrQpsH2so4Lp+iCujwKOWotVRd50dn0xup0tmsrUI4vVFqhphmAidH1MWrvfrhSR+waftn83QXXP6zvYTew0WN1OTYOUgCUYcXTyOylrUVga6mturdj4+c9tF9OwtadUFX1zAURsEXcok32WwLYRvQBTRidmozjzfmy7TGmQX1pRSUKJY42Wo2wcfldDF5nq6DelEDNcltd+RE6lZbi8loejO5vfV9tS5bwyd7HU3YXcny08402zHrlKVxoaOfSjZIHQqeEo/NX+lE+PCtWzDgEzi5AZq1D80T3gaJOc6au8ncLnx1iNLKS6djPy7kXmTZjWpzN6LBphWkDMyCobU8lmRcFlLqn2Tahyd55Zqec9mnYNLKnxb3vq4/Fg1wGvnWu7xsWxRMpinOjqVZ8LS0fNiRlYUA/1kaGqVKXZR6pDT1lDx3XrpyeRxf7FyW8IyZ1wXNdBE87lkYk1ZPXLU7HDFY6b3PJhe0xNZIQxWuM3UsUOj1PtWucI6P0Me7BJ51iQxVk2nE3cJ8OMj5OgonpI/hIkPuMGzH6T2MfKkTmWJ5ofFrITV/LY3x32j+y3HoonY/msKztzzIN7cm9Jxb+iJyefFlu2zSVPtGB9I6SILA87Pc31gzxQb13Rr16iic67+E613J4PgWRzKss4noG4+2MOX/WKjEkjL/UOz8ZjKOjPasMKHNdrbmk+0frW5huft5d17vXFqfFs55WjTp+HbgovDs8M9g4tSlSGG6LznFQ9iUN9mrzEpAz7ZzKNgq6PPdnVeatneb/n5qg0dVrTdTSR8v5QzqTlUYyXfhTYM8X4GZXGNeSN+ncB6H7w/dFKGeXxrjPy0330X+sV99bGZPv48ms803yP+qTjdfVVf7370/+mO/P9q6h0HbelrUmzrCv22O3sjR1lUMwoahcNEdHelRrgIgSA7DpasM3Y5/g4zzGKUPmWHbp0MGbQcOon9sjqT1l/YoxwyRab0KA3PWgW/9oND6Qdj6gW/9oNj6QdD6vPAzLNkJkqvu6ETaMOyOuqk4H9bd4bEe5SYBgqorhVcCOnyY8bI7eieFlvlsgEyAgMNVgOYAAaIAgSIBAiYBAtYHSMmLacPKHK3tkcRHEcZnS/tCOF4F0aAVTiNXOQ/frMAYFkQDWXg4mrMKQ1oQZbbwKL1F9DkuEiW68DjbReaUF4FGvXAa+pnD+M/oMkDkBMojO8jqwF+OjUH4rvAFFiFSIXwFsxC5FD5nGyJY78gYDCQjdJHMwEoEkZ8I96aSpchZsgb2Iog8RnhkNCJ6txGJLEd47Dsis/mIwA4kgrWhjF98q1cerQNE1iTc+1NvE+hPgsifhJM/KWd/ygr4kyDyJ+GhP2UV/EkQDTDh0QAT0Q8wkWiACY8HmMg8wEQgfxJO/pQ5+FNGlwEif1Ie+VNWB/5y7E/Cd4Uv8CeRCuEr+JPIpfA5fxLB+lPG4E8ZoT9lBv4kiPxJuPenLEX+lDXwJ0HkT8IjfxLR+5NI5E/CY38Smf1JBPYnEaw/ZfziW73yaB0g8ifh3p8wNGhSlpNTWZHsikT2LCODcVlO7mXF0MJMEfAxy2k0WjEakraEH5dWp8FpxXiE2jI8TK1KVmdF8jsjgukZflniZH8kRh5oigwK9WA3tOI34x/4otV3xb/gkLbMzvg7r7SqNUyjgWsajtZpBPBPy8lEreid1OiRnZoC4KmWk7FaMXJXW8JbrNXJZ60Ym60tw45rVbZdq1rvNdpLIU6rAl+XOPmxFb0pK0FLRkqGjBLZsZHYjEEEK0ZKRoxSaMNQAEwYKVkASpEBoO6HP6o0+FGKhz6W4IGPGtkuSmS6IIHlAr2MKdmtkSKzhQKD8OpstCh9I8qByaJajnLBYLHEjig7c0XNWisoYKxA0VYBg6kiJUtFyRsqqJGdggxmipSsFKXISFH3NooqmShKsYViCTZQ1Ng+UbPmCcpLGJNVSNcxJdNEyVtm33r0S0FklsLJKZWzTWYFPFIQGaTw0B2zCtYoiEas8Gi4iujHqkg0UIXHo1RkHqIikAsKJwvMHPwvo8sAkfMpj2wvqwN/OTY84bvCF1idSIXwFUxO5FL4nL2JYL0tYzC2jNDVMgNLE0R+JtybWZYiJ8sa2Jgg8jDhkYGJ6N1LJLIu4bFvicymJQI7lgjWrjJ+8a1eebQOEFmUcO9Pua5oUMrIoVQgiwKBPUokMCll5FIqhDYlMviUMhppKkRDTVU/1lSjwaZCPNpU5+GmCtmVCuRXIoBhCbuMGFkWCJFniTwIrsmupcLOWAa+pVoplgXnUr0YS+ddqljzEg7uJQztSyD4lzIyMBW8g4kWWZiI4GHKyMRUiFxMVW9jqpGPqRAbmersZKqwlalivUz4S9D+VcDWESM/U8EbWq4YGpoyMjQVyNBAYEMTCQxNGRmaCqGhiQyGpowGoQrRIFTVD0LVaBCqEA9C1XkQqkKGpgIZmghgaMIuI0aGBkJkaCIPgmuyoamwM5aBoalWimXB0FQvxtIZmirW0ISDoQlDQxMIhqaMDE0Fb2iiRYYmIhiaMjI0FSJDU9UbmmpkaCrEhqY6G5oqbGiqWEMT/hK0fxWwjaG9YyYxYQFbvdVm/W+UqANlQmaWMVmZYDayXgAby4RMLOPQwnoRDCwTGnIZRwMua364ZYUGW8bxUMsqD7TMybIyJsPqMdhVTy49IasSHBlVLw7cldikMt4RscCgshJHrGBOWS1EzBlT5taWegqm1BO0pB6BIWVCdpSxN6Neiayol8CIMiEbyjgyoax5C8oKGVDGsf1klc0nc7aezK3x9PTFtXXlyNoTWkFl7NdP/SBAvxFEhiOcHEc5W05WwHMEkekID10nq2A7gmgUCY+GkYh+HIlEA0l4PJJE5qEkArmPcLKfzMF/MroMEDmQ8siCsjrwl2MTEr4rfIENiVQIX8GIRC6Fz1mRCNaLMgYzygjdKDOwI0HkR8K9IWUpcqSsgSUJIk8SHpmSiN6VRCJbEh77kshsTCKwM4lgrSnjF9/qlUfrAJE9CXf+9ENHT7ujgyM5yp8FlL0EkAkpcLgC0BxIQBIkYBIfYH1ogOSBrWiQMlCOcgsAmeoCh+oCzdUFRF0OijQEmDQEWN+QLTkzcT/zcT/zcT8rxP0sjPuZj/tZEPezIO5nLu5nPu5nvRkcSXs2PnAoR7XRamuDZzTue9qbLkZGEIVHOMVIeBQoEX20RKKQCee4icDBE8FGUDCFMfMrHwYIaEa1L8WhFR7EN21itPHNiOObOcc38zC+WQzimyWOb+Yuvllw8c0CxTdjjm/Pr3wYML49qn0pF9/MXXx/7kPbT4Y/Y1iR5ZAiI4NSwTiUYrUoZeBECsGKFIoXKcphAzaSuT4d5aYAyi0BZBoCHNoBNDcDkLQCmDQCWN8GILkJira/cdk16uAkI2pjE3RQkxd/hhU6qIk7CHbdWh50XBN1XBN13EQyNh3lugMy1QQOtQSaKwNI6gJMqqKsldVaOrJru4RMTYC75V6iuSaAaMoFReoILN8GAMr5oKj/EVOTEDMzfmd2tCck9wKA7G1AEs6Ns557Uz33fnpesNLz0EXPvYGeB955HtjmuXPMc2+W5/2gP5T2jGyKneOgBxRk3TkNeqA2687NoAdGWXcOgx5IboEiGfRCrN74NsmIRxS3qQnbZIY7YN/UJmhqEzS1tUe+zm2hgm1YwdbXhAcYKEEdZYAB8rHXASZoaQosfUOWhYYsw4YsfUP4fgyUoCHLINhLk1cfq+2TkHd6ZO8sEwpuKhN395OJ2lvJhMK7yKTQDWRiOfyAcvgV6VD+iIkOKCc6Im8/HynRkUKiA7au9NEkOjBypY99osORr3NbqGAbVrD1NeFEByWooyQ6IGuTH/usPpC4S1YDsrVWjrVWKrVWxLVWRWutTCOrLPu9kLU98rVe+9qZqQ7HBQk0REiNRgsV8QOHCtAYIjUeTlSIRxbJNMhIpfFmVUgPEiijSaUByWqQ+lTEjwIu4EcslaAhQyqPEZJ5SFu5LQo7wxKOeSryrYazE5AamwIV2t12tgpSyTWsuiyNMPYSUiNboSLfGsNsNqTGvkOF2IJIZjci2RqTFddFYWdgvHP9Vm0f7b/9IEdyYwfIrORV2DwveHecj4bmqLZH4nyK0MuEmsfZ268OfusbrIXW/mxrfzbcc9/X2e25dzxqKW5Ip3MPPaoDRPWN9qOTFMUBt2FTcY5ItA27l2xKQHBIoBCxGgXKlrkqXXNYEuqiQM0j9VuNjILpB1T4UQ5seUD1BXq7w8AKopAqj4KZ1St/7qFHdYCo6sLLlY4ClbW1L87BEe6u8Kna3vdvlwXpyK6FEsp3zYCCNVHibiGUqF39JESrmcToO6bEzNdLidilzKc8pE4DRG0RTg0SHrVKRN80kah9wrmRInBLRbDNFUxtxi8bGFGb3ZcNzKM2R182sERt9l82sMBt5i8bGHObzQg/LQrcfqtyFKwaxsIWCSJiC3BcrOqiY2UXIytTpKxI8cpfnJ4GiGIknKIjPIqLiD4iIlEshHMUROD2i2BbLti2+aJv7qEe2Uc2F9hIQMFTnAtqGlD7FOfCNAgYPau5gGYAsc+hLvoZCo7s470LPy+poN8TXfSzkR59NSVro9HXRBdV9A3RBRrtISEKszNa5lHAI6NliULvjZYF7gQ2WsbUHbhWZUQdU1irknrl4zn06Kv/YO1LcbdFy9deMtu5oQMtp160InWlFaP+tCV8p1qdetaK3L1W5T62qu1oq1Fvux+eCDn1+64fnoiKXBV6ZVjgXwvnqQvlOSuKv7/Q67BpFRIDKaUFSpQUKEUpgbpPCFQpHVDiZECNUwE1mwioUBrQZviAUgqUN8P7Aldh5Ich/RqeoQ7LcrcX9oj3at4GCD0uiLpbOPW18KijRfS9LBJ1sXDuXxG4c0WwPSuYuhX3+DKiDi3s8SX1ysdz6NFX/8Hal+Lui7bE9pJ9xoVdyAr1JMvUoSxH/cplfPdyCepllrmzWec+Z912PauUASRflhXKBydHaUGFroo9NiwqX4tnq4uf4cxh2SeQ7JmD1FFGSaMCpYsKUaKo6lNENUoOFTgtVOGEUMWmgnJKArNz1jHq+NLOWZavgugOA/Y1+GwdlONODTeY9lp+ugO9KYg6Uzj1pfCoK0X0PSkSdaRw7kcRuBtFsL0omDoRn+Yxoi4sPM0j9crHc+jRV//B2pfizose8PUS3qQfEqK+czfpzKO+i27SWaK+8zfpLHDf8U06Y+o73LrAiPqusHWB1Csfz6FHX/0Ha1+K+y56038r/d5324cjOcqfBZQ7C5DpJ+BwBaC5dwBJxwCTPgHWdweQ3BOK9JWpdGRzLiGbbgkFmZa4S7JEbX4lRKmVGGVVYiahErG5tEH0nuQGNaaTGtulCdnX4rbIb2pJPOx488U0YLvDJSHavZIYbVzZsM2XzUfSLfINMyBbQeVYQaVSE0W8zUYVraMy2ZukSLYlCeKXEv9R4Y6GdGR3NCQU7GhI3O1oSNTuaEgo3NGQFNrRkBjtaEjM7Gj4XG1fDjnUIzsQEgqyPnGX9YnarE8ofNUrKTQeErPvrCVkk/9z76Hv9CinNSLjnCoMzHkGvr2DQnsHYXsHvr3cS6AE7R3Q+P8MvaRkY/Xb7+E+9y6vR7U9krxThPm1pfmRGfS+IAqJ8CguIvrgiEQREh6HSWSOlQiUIMIpS/AR5jtClC+FR5ikDvy5OX2E74pVkEgiFWJVSCmRS7FyySWCzTB8SksZMvSoDhBlXfRItpfy91yQeoIonMKjcIrowykShVN4HE6ROZwiUOoJp9TLHFJPEKWe8ij1sjrw5+bUE74rVkHqiVSIVSH1RC7FyqWeCDb1cC8VZcjQozpAlHrRXqosudcicyXi1yJjNQxw8bXIuAAHe+drkXEhF/j4tchY5YR17+C8CwVO3l3v4IRlBqVrunS26rdjHqW2LbAz5qU0t4V2x9ynvJUp8d3LSWGWDktCXRR4QBRfTtoW6Lo73dBtV7fpyK7CE8q3Q4CChXnibmGeqF2YJ0TL78T0FkFZ3tauxK7IL/vRrO25sDG4dOMWeBgQGaGAePWtiq6+leUBCEj26wlK2/UO5CjXGpBs11Nkt+spx+16SmW7niLdrqdMt+spy9v1lMh2PUHjdrrd1nWoZHtjqmXsJxrfSrkvRRS30tyXAoX7UigsSadIk05Z0Pj79fN9Y6u02cm3fX0sHdmXzRLS1ziEbe5vTyRL5f4WULD7MnG3+zJRu/syIcpLUGhfZmI5LwHZTZgbJPe32vqZadbMt1723CGyU4II8+Zx4jNnacos/SXoVyGUuxf8EpXXcBTxjgNV9N0cZUF/yu8+CFmZo7U98m3wLyPmaRVd2L3Wxpz8OH6tjUXvzO61Nubs0f61NhasW7vX2oiDb7vbAOaRg0e3ASyRl5duA1hmV3e3AczJ3zMHMxREHiic7F545IYieuMXidxfOE8BIrAVimAnA8E0I2ROg1uxmRsyDk7As4RwmiqU74hQMGmo5GcO0Wj6EM5ziAil6PFskjlMKYLIMoSzGWUBZhhBNM0Ij+YaEf2EIxLNOsLjqUdknn9EoElIOM1EmfN0lPnMR4MnJuE0OymPpqisBvNUlpa+NM9YwqNpS8TyfMATmPB4FhOZpzIRSilEk1rGK4/WASq0Opro3LvMeTaI32WOVZ76drzLHBcJpsH4XeZYdVNi4V3mWKbpMX6XOVRxqowfWMRqOG0WH1jEBXgK3fnAIi7kptP4gUWs8tRqVJxRrMCTiFV5srVqOKHYIsHEawvw9GtVNwlb2U0mVqYJ2Yo8LRuVHY1EO0XbnaNFYWek3aRN6jcjHU3gVCCYxm0Jnsyt6qZ0K+/uCze9GxUneSuwc1rVubXdqgrTpBV48rdquASwRYKFgC3AywGrFhYFtpBbGliZFwhW5WWCUd1iwaizUjzdwsGqvHwgNVxEmDLRUsIUWJY+6ZYVVg0XF7bIt2Zit9CwamG5YQu5RYeVdyczL0CMuCoJ66KwM2J+YTLoVyOHR3Ikz6MVyRshiuxzaeX4MFqpPIFWpE+UleljZGX52bESeYS/RWaXCiFqi9+lQjxqVbhLhSRqX7BLhQRuqdulQpja7Hd3RJxaX9jdEYlRHMq7OyKdIlLa3RGpHJt4d0ekUZR4o4OnFKFwo4OXouiUNjp4lSITb3TwGkcl2ujgFYqI2QVAiGLhdwEQj6IQ7gIgidof7AIggVvudgEQpjZHb8/HCkWg+PZ8LEfx2PX2fFyColN+ez7WOValt+djlSJnXxtnRtEKXhtnIYpQ/No4axSV6LVxVjgS/rVx5tR6+bsMpxGj1qtArVchar2qvvWqUetV4Narwq1XxbZeObW+/5H4U0+o5RlTuzOOWp013+asUIsz5vZmzq3N3LY1U9vSq76VH/TIvtV7ha0DFLzVe0WtAmrf6r0yrQFGb/VeQSuA2Ld6N2jzo/rbVxvTkf5oqyC7UFdBfyMrHdmN4gkFe8ETd9vAE7U7wBMKf+wqKbQtPDH7s1YJ2U3fG5Te/337Vg7lORAwCQIw+0QIBHwOBFie/gDTxzkA9ZVTgPmdU0DyOEeZvTfaEvOG8wbRZ5qgwfpLsMgKDcbnCsdA8YdgobT84qki/V1TZVEU5BHBsfTe5rnAkeTuxD70TIgeJW5Ya0/bBhFoS61t4+5tg+7lm3iUop6XG3ZkQS/zi9Mb5u+MN3Rpmr300VkGT3oTd493E7XPdBMKXwxPCj3iTSzojKV5mDvsPXTbhiF6KKA8HgHZn91VjsmpVJJQkSahMqkusL66QOT3dgWlp8zSHn20rMiml3LMLqWSXIo4t1TR1FImmaVIEkvQSOaBIRohIDt3DZ0NAndz1xBNEBDNXUNjgcDM3DVEA1SUR8ARkK3/ad+kZ15v5Ege9CmSB62AzAM/5W6Dx5CtDwrbDR5D43zA9DGpMDE+LaYPRIeVewo6rPyjz2FvfB/kFOJ7gGx3KsfuVCrdqYjyEhTtaGU5LwFJrwoSv9NORLvTzl7aI2t3w4LdDUO7G3q7GxbtbhjY3TCwu2Fod2t75Gu9drWrjUvW3iVr75J1wSXr0CVr75J14JJ14JK1c8nau2Tdu+SBtEdcElDwa5g1uSRQ+7uXdeCSoNAvXNbokoDsb1nWFX5RVlfu27G6cl+J1c4lgbsvv+rKfeNVV/5rrrry323VFX+hVVfuW6waXBIJfl9VV2aRWFd+kVhXfpFYO6M8Vu7WiDUbJZ7FrhHryq8R6ypYI9aV+xqprnCNWFdujVhXfo1YV2aNWFd+jVg7s0TBrxHryq8R68AvUeI1Yl35NWJd+TVi7T2zJs/U4CztkU/nZSF3l2HuLn3usmeCEmT1Msjqpc1qfEzfN889pmdOXhg/pmfRu6J7TM+c/dE/pmfBOqV7TE8cPNNtNmMeuWe02Ywl8tHSZjOW2VHdZjPm5K2Zj3xPs8sKJ6sVHuWsiD5xRaLsFc6JKgJnqwhxyrIbZ07jUrHx5YxxrAtjgxKBbVqFwKtF9IatUuDaIpJ1C2f/FsGZeFbYyTMHOxdEni6cjT0LbXA9Z/EihD4vamD2orHji1CwfdGd94vCE4AIPAtkgaeCzIP5IEvLABWGYDg9iFgeajxRCI9nC5FLI9HNGyLYkUjf5PUxib7JCySaRYrf5AW6n0uib/ICiWeU8Ju8QLPzSvRNnpdgdkFKEwxK0RyDup9mUKWZBqV4ssESPN+gRlMOSjTrgDQKs4TnHpRo+kEpGhao+5GBKg0OlHgAoMZjALXiMOA5CSSyB6OYmQkUtCDE7K6o8RRltGCWQt1PVEYN5irUabpCiWcs1NykBSLPWyDB1IWUZi+UeAIDrY0v76Yx1MKZDAsEkxnKPJ+hVpjSsIib1VDkiQ01nttA4+kNpGCGA3UZ0/JwD6c61HeOaZ7wUIrnPCyxY9S7mQ81M+qvO3Jd5a/srjF4h4L0D3RcYzgABX+K45qaD9T+0Y3roLmg0J/XuDbNA2b+kMZ4M+ikWZujB3sUfWE5lmWmRw8BCs8hW1M8eghQfI78183NWQQ+hDA809aStz/4f3M9zb/5v33B06hWakxaZKNGlFuACF+XAg7Jh1RtGHF+0QaQvEQBTF4tUHZb8R+825DuMtNmPk/PxgU2pgj84UtB9m9WCqbf/tmw2yq/Pn+bHVi01p+Z/Fa5/V2i28g+VRFjVKR/tTQj+gt0t9TV2+njoQ/HNjgPGA5A9hcKHtwkDNx9cf/A8QRsv89/MHMsMPod9wcT6Acf6IdCoB94PlNqw/9QDP+DnbSU2S558F1iRygGvfDOf6xSV+x65z8u4jtoxzv/cQnqttI7/7HMnenfvw/jxV286/37uIjv+ML797Eap0Pp/ftYpiQpvH+/VTeO9yLz8FP2YEDZgxGZM4KQf3lQUdsfbb/t3Rxt3gg/kCMN5OZobY9sZyTkwttilfurZASXyujVf3AdILqycH95Mx9BHQyHihj+WjjPusSpXlb0lYNJEaoGFCoG9DU8wzqmVCWUfIXyxAu1yQiqktGr/+A6QFQD4f7y9LYo1IIUqAwpr8WzrcsK1ZBlX1FZjUAVhUHlhL0Gn11HjKqigq9E/g1YqENGUIWMXv0H1wGi60d/5qmX0Ez6y2cEl8/o1X9wHSC6vHB3+byuKSxrrWy1hKbN7SLL2//3N4r4gepG2mbxePtH7yPNXDA45Sz+mGyRijR5DhJpdsnvS8zjeszt80yr5QuGWr7diFVTnajE82hcuKxugLI42gFmSmgKdtGV9f97IbII7hF/j0KYi/MvLBB2xcM9n6FIH+1js/37SseG2Bd5BMtfV7I42LcmGi79rGJ3qgmm3WfC6UUi4Wa/mVB5w9bgzW9zbd/azGToSO2J5K7F+MwvKS/QAdsLv/Sr7m26vOBSG5AdcC9uUQ3cvZn3wstnwPaFvRezUAamd5jCWnvk69wWKtiGFWx9TdzaVpWgjq19dfDFLF0FSX5vg9/NC5Xemacja/gJ2VfLEwoW9om7aSFRu4RPiJbkidF9fGLmN3wTsevxlUuoVYWPElaVe5SwMgkFKG5TE7YpeBaxMgmlKGgqP7JYmYRa+YRaFRJqFSbUyifUqphQqyChVj6hVj6hVj6hXk3wX33wX33wXwvBfw2D/xoH/9UH/zUI/msQ/LVLobVv2JqnKMJcPPgKxiv4oT/++/9jjgIE",Mve="eJyNnV1320aWtf+KF6/mXcvpsWTJsnPnTtLdsdNx7ESGMb36gpZgmSNKcEhRCjNr/vsLgqhz9tlnFz03XsaziwDqVNWuDxSg/5l919/cdLd3s29n7/+5Wc+vukcnZ2fHZ49On5+dHs8ez/7W3979PL/phgS/LW669Tc/3s2Xi4udslkuUXnkyvxmsdyiNsCmW1x93l3nn93lYnMzkH36l7dXyyHdN0enfzkd2Ppviz+6y18WdxefZ9/erTbd49l3n+er+cVdt/q12/3+hz/uutvL7vJdfzO/ne7wr3/t/5h9+69vjp69ePzN8dHZ46MnR08eP3/+9N+PZ+dD4tVycdv90q8Xd4v+dnexJ09A+O3z4uL6tluvZ9+eDvx9t1qPyWZPnhz/5cmTJ8NFfu7vFhe77HzXf9mudjl59B8X/+/R0Yvnp493/56N/77Y/fviyfjv0/Hfs0cvL/uP3aNft+u77maI0e1Fv/rSr+Z33eVfHj16uVw+erc72/rRu27dre4Hug/mYv1o/uhuNb/sbuar60f9p0c/LW77u+2X7pt/dMOvXv790fz28j/71aPF8OP15uN6cbmYrxbd+i/D7f4wXOZycXv168XnbiyF8S5+vRt+Ml9dFnVI+N38yz+mgnl2+vTx7EM5Ojk5ejx7ub7YhXo1iM8H8fvOjscgz369u/xHM/v26fH43/fDf8+e7cvrn93danExBPRf/zNrPsy+Pd4F9ufhRtZf5kMc//fxHj99+nSPuz8ulvMb4yfHU/LfN/0QqY9LU06fTMrt5ubjrqCubrN22S+X85Xx5+UqX7rVxa6yF+Hs7PlemN8M0nqITr6z8Q7GEs/al/mqu112n2pS/Jnd3ny9O+P62pRnZ6fTr5abtVGL2cXQRuf5Ep+3Xz53tzn5kJVF7zk5LplcL+frz/lu/uxWfab9bZfh3YNIefd51Ym0n/rNStDFvUi7XvwhYHffibLtdExvF7eiWl30y/4243V3s4iSlcByZwOJdr9v5suMr1bd0JBFNn/fdOvRaoryolToud/7s6OjPXuZ0V8dPTvbo++82h4f79H3+Yc/ZPS3/MO/Z/SPHKYfvT2enOzRq3xfrz37p8/26Kfc9P6Zf/hzvok3+e5/yane5lTvchn8mu/rt3yu83yu9/num5zqQz59m9F/eVSH3mFEH4fO7Lq7C7ZhbfTjoMV2yr+LnnJS8jFfXywWF4vVxeYmh2KzM+310POIJjL6W7gZ96mMPuYqcSH8N6fqcl4/5R9eZfQ5/3CR0X/nK17nVMtc/iJawnSE7X0RrT4X2iqjdb4vEftNztB9bkIPOdUfGW3zTfzpqaxoh/rVUa08LbVyVUlPPdzJEdTGu8XyssuX3nf1l/2DiHPonb0nuBvHaV45jkr+P+0Ghuiz9put6js+LfvVQvB1VznLxWY1dOMXHsDjoxNoNuvFOHhNrb6MWnSzutosBuWmv9Mjh508nvgrcmVw8Wmh8i360WEoqIYDl/OrK9Wl7TkOxWjAsSu7btV52z899rHQ/Go1/wKmVn76cZhEdCKXHt6P8/WBCB9WKyGyAoj6c6uhy+Xiy3rhDXWYLnhW7z73mzBUTL1+qNtecKv5vfDf+cXmTo1cRiv/tOz+yBo1rIJv5hcrNdr5uOrUhS/7u/lFaHAuLYaCxACYssJm6Dc7TOmGEbcYom5ur+arzc1yvhGX6a+GUea1ON0c8+HFchNqrPGXPuY5PptqQL+6/DQM8sKo0IcnsYf10UfkL4p/vvELPD16Yhe4GVxus8QrmC/PRXd3uWvw67XovJaVkXkfuZ29F0PooW0O0+GhzotC+zGVp3fLsfp51x8rjXdLskT9dLHofGSU7sDG0JeL+8WlKKQ23pkPlkXL8NuOP/JRnviRd4/UBK2jHudd1EYgq/mUfr3QThynMPidU2Pw31RKaEM/8BlAuojPFwaDgAlInGBSRs+emTiteIhLkeX4mJDqgeUyxMVnAuoGvHnU6mh0VB/lq7P5NKp2tuiqEM7sk15DQjaBkyH60DVe/eRsusqy/7O7vRKXfxcv4TM4lUmvHAcbiRC9eXEvYiPZeCNQ1JRXn/vkyNllfvvcr0Su3tDVPQyVUvuVeLmry0rYzukCHrHYs4XFjfVmHOGsxP3GKuhRrPFoq2aCN5vl3eLLcivuizLolTwWR+n4hrHW3WK+vFx8+pTLaptt2JpgvI5X2EOV5YeD1exAr1OXLioFfVuzQa4x7ilzORr6kfoVXHobBgy4/mbTn1V/3d3iJMjMcdVdLdZx2OtNtDLw+lG0C5uJbIZWHeYiHmwaQFrDrESm56pu7bJSpf6LTPvkRRm4jqtccQ3McvnDnRihfFc1wKXyLW9uFZPpqr1jrRd8WRs+HKiVlQD/WWsatZt6UyuRWtdT89x17cr1Lv7NwWEJ21IZF3TLO7HYcxdM2gvpoT/giPUhzs1G5IT6cAuVHGd6W6DQ+yw1jnDOTtHHhwq8GiqyuLVf0wymKMtYI33VU/a/NsOIBffiebmN8kBHeWJ9PvZjZe74Y627/Im6vxKGIWif50tYeCttfDcziQ3ci+KQyd/GUZPXtK+UHw2DLAi17vkqeilmaCpVVah6EPqrHO5aBdYzHKtgg0uoxx09NS13Qn0Tm5j+5LRMsIdu80L57PeVsebq4Gj351g+fruV0e67w9VaXsustXLOl1WP1rOkN5WFwz8PjCd/qPX2dG1fHZZZsfFYGAj42Q42hXgLvrh78ErL/mpX3re9GMX3dS/dZKk05eFUlZZ8dXDO0N2Jhw5/Vqrv7cFufAh56iHc8mtt/IfN7kHkvx/PXner21/mi9Xu8fG/Zi93j6lnj795+uTfj6ejvXsEtL/PiCZPR/j33dGpHe1dJSDMGApvhqMTO8+bcguAoHIEbkUV6L79BxScJyhTyALbLw4FtG84iN6Go992OTqzI4sZoJh7E86Ho1M7z3nJPaCQe+CQe6Al94Ao96BY7oFN7Tqw0U6QvB+Ojp5YETbD4Qs7andJ/ciy5Ahv3SjsB8AAbYajY7vwppwNUAgQcLgK0BIgQBQgUCxAwCxAwKYAObkPWXsIR9t4lOOzzfGZEmF7NUSN1ji1XOfcfIsCbdgQNWTjsjUXFZq0IWrXxlXjNjG3cJOomRvXbd1kbvAmUKs3Tk2/8LcZgQkYIidwruygqOAJhsgYjCt3MDFbhEnkE8a1WZjMjmEC24YJ0TsKRgMpDFykoDa3APYT4/VGo5ylaGAvhshjjCujMTG7jUlkOca175jM5mMCO5AJ0YYKvs8RechoK1Al1MKfJptAfzJE/mSc/Mk5+1NRwJ8MkT8Zl/5UVPAnQ+RPxpU/mZj9ySTyJ+Pan0xmfzKB/Mk4+VPhbzMCfzJE/uRc+VNRwZ8MkT8ZV/5kYvYnk8ifjGt/Mpn9yQT2JxOiPxWM/lQY+FNBbW4B7E/G641G+VPRwJ8MkT8ZV/5kYvYnk8ifjGt/Mpn9yQT2JxOiPxV8nyPykNFWoEqohT9haNCkIieniiLZFYnsWUEG44qc3CuK0sJCEvCxyMnMoqgcLabIthZ18rYoaoOLadjlokpWF0XyuyC+rXBwvsjJ/khUHhiSgBFGTm4YRWWJMUX2xaiTOUZRO2RMwzYZVfbKqEbDDBq6ZhDAOgNvKy2UTTSKX2neyk5DAvDUyMlYo6jcNabIFht18tkoarONadhxo8q2G9XovUG7rwTyocK3NX6o1IQpO0FLRkqGjBLZcZDYjEEEK0ZKRoyStGFIACaMlCwYJWXAqGf7RZXMFyVtvZiCjRc1sl2UyHRBeispGC5SstsgKbOFBGC1SMloUVI2i3o2WVTJYlHSBosp2F5RY3NFLVorKGisgMFWgbayhbGlonSwaSo7BRnMFClZKUrKSFHPNooqmShK2kIxBRsoamyfqEXzBOVehuxB0q2m9XIRljnlHv3SEJmlcXJK52yTRQGPNEQGaVy6Y1HBGg2RLxpXpmhidkSTyA6Nay80mY3QBHJB42SBhb/NCMzPEDmfc2V7RQXPM0SGZ1y5nYnZ6kwinzOuTc5kdjgT2N5MiN5WMBpbYeBqBbW5BbCfGa83GuVkRQMbM0QeZlwZmInZvUwi6zKufctkNi0T2LFMiHZV8H2OyENGW4EqoRb+VO4VDcoZOZQLZFEgsEeZBCbljFzKBWlTJoNPOSOjckE5lavZqlwjr3JBm5Xr7FaukF25QH5lwlvBwLGckWWBoDzLZDAtZ+RaLijbcjX7lmtkXC5o53KdrcsV9i5XonkZR/cyCPZlrBUthA3MhQPNSlmYieBhzsjEXFAu5mq2MdfIx1zQRuY6O5krbGWuRC8zfi+C8yDYVrFa5IWhlRtDQ3NGhuYCGRoIbGgmgaE5I0NzQRqayWBozsjQXFCG5mo2NNfI0FzQhuY6G5orZGgukKGZ8FYwMDRnZGggKEMzGQzNGRmaC8rQXM2G5hoZmgva0FxnQ3OFDc2VaGjG0dAMgqEZa0ULYUNz4UCzUoZmIhiaMzI0F5ShuZoNzTUyNBe0obnOhuYKG5or0dCM34vgPAi2VawWeWFoq+n7JO5AhZCZFUxWZpiNbBLAxgohEytYWtgkgoEVQvZVsDKvomXrKgoZV8HatorKplU4WVbBZFgTfpsImFUhZFWGlVFNIthUIWRSBSuLKlo2qKKQPRWszamobE2FszEVHm1pomhKEwJLmkibajjbUcHVJqGsaJLAiAohGypYmVDRsgUVhQyoYG0/RWXzKZytp/BoPBO9T2F4SGSbiY6tsJupEaDfGCLDMU6O45wtpyjgOYbIdIxL1ykq2I4h8h3jynhMzM5jElmPce09JrP5mEDuY5zsp/C3GYEBGSIHcq4sqKjgQYbIhIwrFzIx25BJ5EPGtRGZzE5kAluRCdGLCkYzKgzcqKA2twD2I+P1RqMcqWhgSYbIk4wrUzIxu5JJZEvGtS+ZzMZkAjuTCdGaCr7PEXnIaCtQJdTZn/460Je7K/uRBdFR8RJAMaTOMZpOLZCOPEjOPD7OSmiclIbt6HyslHZUcgAo3C5wuF2g5XYBUZGDYhkBZhkBNmVkT76f4r733+8x7oCih3+f4g4cMgK0ZASQ3S4wu11g0+0CKXF39N689PvJBvyojUexF/me2v1EJ9PFyBii8BinGBlXgTIxR8skCplxjpsJHDwTYgQNUxgLf5/D0GTUCkShNS7iO77DGONbEMe3cI5v4TK+RRTxLRLHt/AU3yKk+BaB4lswx3fi73MYmoxagTi+haf4/m0K7dHRqR2aFwErIUUWDQoEdCjAZlHA3IkAuhUBLF4EqIQN2G6keeZHJSuASk4AhYwAh3wALdkAZLkAZpkANuUBSMmCo/0HLodMPTUUE3Q5U10Z+iHSmepkpuCF24BzXjuR107kdbGrYn5kFdJRHIw7xzrq1Ibgjnx47czuxFnvw7/x0LtaZ9TXuhA6W8fe2zpL3a1L0N86LJMAZFajnU1fMA0VYmWDofEoDp1GVCoEojAN2Auvpua/N4NX2PoBlSYDSMykXlHTBxrnT69CwwfmhedsajJA4iTp1dTon1p+5rFbeIWNHpDoDF5Rowcau4BXodEDI+N/BY0eSLT7V9Doj4108SiOcF9hm0eUR7ivqM0jhTYPOA58X4U2D4wGvq+mlgZH+Z77yg328gb7fCfcyEAR92hNDFAcib/CBuZoEwpnkyvUplJ7NrL2bHLt4fkYKKJebUS92oR69Xq2XwnZT33HoziLH5GYwI88zd1HGqftI5Iz9lGhyfrISvgBlfA76kIeuhjr11jREeXwv6aKjhQqOuBYKq9DRQdGsX89VfQTy0EfLfN1qujAkz++xooOSC4tvQ4VHVhcUHqNFd3RJh7lu95U7noj73qT75prNSjirjfk96+hVjvZxqN819t8d6Grw3ZBAjURUlVroSS54VACakOk6uZEibhlkUyNjFRqb1GFyk8CtUJSqUGyKtomJcnNlBPkFkspqPGSyu2YZG7SUe5rFYkbOqmq9VCSr1VVdgJSdfOiRNzSSCarIJVcI6qbqnAwMNJWKMnXAsNmQ+r/JTDJgkhmNyI5GlMUt1XhYGCyc/002y/tH/uRDfMAhZG8C7v1gv24fnfUhKM2pGzjsvOI0qLyjorl7J+mDD+1RJZLQNjE9xTfuT8mRJmsvHNPKmQX30cn1OYfcu7V++gkqTjga9iUR46Ieg17kmKVgOCQQCFiVQUqpoFwRaGpCW3tVBxAUnMYYwIVzNygZHw4sPUGNSWY7A4Da4hC6lwFs6gQxoKajNr8Qw6a8RyuIqlAFW2b88jBMZ7C8vNseoZyZkd2d47sGYqjOIFzjnlwahM4Rz5Nc+ZTSWflGYoTm7ntUWlSLwWivBinDBlXuTIxZ80kyp9xzqQJnFMTYnYNU57xYQMjynN62MBc5Vk9bGCJ8pwfNrDAeeaHDYw5z6GFv6wKnP+ochSiKmMRk4iIxAQcl6im6EQ5xSjKFKkoUrzKg9OXAlGMjFN0jKu4mJgjYhLFwjhHwQTOvwkx54Zjnt9M2d178BvMKaCSSUBxhuc8PXN+g7kC5HMzZ747wVnZmODEJmaGfrNR4BvsnBCFfsmFsUuyoyYcfQgp26D59gZHaUb7Bo12uttktMwp1tpoWcxRT0bLnOOfjZaFWBLJaIlDmaSxauKqdMJYNaImow/5h21OxcWmhq+TFF7nhgKMnEoxilSUUVTlGVPkQo06lWwUuXijymUc1VjQUaPSTh+eOBHR43I/9OEJleR9pVSaCv9QOU9bSc+1ov79hb0OL61CxUBK1QIlqhQoqSqBeq4QqFJ1QIkrA2pcFVCLFQEVqgb0MvxJihNXgfrL8DnBexn5RtIP8gytTMvFXntHfK+W1wChxA1RcRunsjauCtrEXMomUREb5/I1gQvXhFiyhqlY8R3fkxgGLtDKO76kvs/xbDL6kH/Y5lRcfPKV2L0U17iwCFmhkmSZCpRlVa6cJhcvp6BSZpkLm3Uuc9Zj0bNKNYBkqAisUH1IsqoWlOh9tcSaqvKhera2+huuOSznCmTvzEHVcUaVxgWqLi6oiuJqriKuUeVwgauFK1whXIlVwTlVgvDm7AlFhAu+9uYsy+9FdBvBPojftiIdF6p+wXSvldUdKE1DVJjGqSyNq6I0MZekSVSQxrkcTeBiNCGWomEqRFzNO4lh4CKsrOaR+j7Hs8noQ/5hm1Nx4akFvknCSfqUtTRJZ05lpyfpLOayS5N05lx2eZLOQiy7NEknDmWXXl1IXJUd7uuneDYZfcg/bHMqLju503+UfpmK7YUfld8CKoUFKJQTcLgC0FI6gKxggFmZAJuKA0gpCUe7zUbP/ajkAFDJAaCQA+CQA6AlB4AsB8AsB8CmHAApOXBE+yR3KCbocqbsyTUinalOZio8mAac89qJvHYir308yvfcV26wlzfY5zvhp8agiHu058OAcvB5U+LbGb7RMB7FNxpGJN5oGHl6o2Gk8Y2GEck3GkaF3mgYGb3RMLLwRsO7Gb4+Nh7F57UjEk+vR54e3o40PqcekXw4PSr0RHpk8fn8iOJD+XdTrOEo3/V55a7P5V2f57vmWIMi7vqcHp6/g1g7GV/Eel6OmnDUxiOrPY6wluxpWfiCMjREITGu4mJiDo5JFCHjOkwmc6xMoGI2TmVd+LlAlSzKojexnkWuBMYPZzFVBxO4TpgQKwYukVLBNhm1AlFlUeuhk1QeMkGNMUThNK7CaWIOp0kUTuM6nCZzOE2gGmOcakzh5wJVsihrjIn1LHKNMX44i6nGmMA1xoRYY/D9IyrYJqNWIKox6v2jIqWthOUm9FZCrcoAV7cS6gQc7INbCXWiFHi9lVCrXM+Cel4VDgZG17yY5GuBSbUwqv+XwOQaGeVUL6NMtTPtupFVqakJbVXgWlvddbNPMEy09hPMJ3YUZzkjsmmlI7HxdeRpLjTSuMV1RLRldWT00vbIwvvaI4n7VX+bmpzn502MwW+pcQGXAbFmBIiHla74sNKZvbfjyF7bMbSbmbw4tiObITqyGaKjOEN0jjNEpzZDdOQzRGc+Q3RWZohObIZo6KJfwirAnuxnXGcnhcRfdDmXNuFCFGqXc6xdQGHCBSexSufIK50zkfnP2y+fu9uQjUXIpr2rBoiWPnasD2ftc977SnH2sjj7XJw8cQNFFLRN3ADlUrWJm+d+FbK1yrmnl8n2SLxMthPW3c2i1JxnRjchzSZfYiMWsUae1q9GGpeuRsRb6V2h9ayRifLchFWsHXkIYdrGo5IHQLjLbk9xv9bkaGm/FnPyY71fi8XszGm/FnP26Lxfi4Xo1mm/FnHw7TTEZq4cXA2xWSIvrw2xWWZXT0Ns5uTvhYPJGyIfME52b1yZhInZKUwiuzDOzmACW6EJsTMwTN5ROHULjkPfULA4AfcSxqmrcC76CxNzp+FS7jlMo+7DOPchJtSix71J4YscIu5XjLMZFaHPl+NuxvihaiQ6HJMq1ajS9Zhcq2XcCRmv1Cbujgpf5Whwx2SceifnqosqquinirTJqbnHMq66LRNz32USdWDGdS9mMndlJtSqEHVqBT/kiG8Foj7OuOjo0ibd0hvoTbpa5a7vwCZdnUR0g3qTrlZTl1jZpKtl6h71Jl2pYlepVxW0KrvN6qqCTsBd6MFVBZ0odad6VUGr3LUGFTvYKLAPRpU726hKr4xJhGPGBOybUU32GOXUmUSZOuQospEGlTtnEmMXnV4FladM3bV+FbSiqq67+ipoJYHoxvWroPr3qUuvvAoqz52696AuaqFOXX1Uk1vHdzBrN5M6/6h+vVqrgUBMcLBa1wYFMdHhup8GCFE9WLvTYCGoq1o808Ahqjx8IFUOIkIaNZSIr47WfpmGFVGVg4uYRAwxYgIeaES1MtyIidKgI8qHKzMPQIL4UCvLbVXgIUn99b8xwfk0GtkvzZ7jEARQ/L7NeRpsAE+L0ec4rABEK8rnYQABLKwdn+NQwVFx7v0HSs5n6ZslZZEd85re0WBOudbvaLCY85/e0WDOkcjvaLAQY5Le0SBO0SmYQ5RehZhOo1+FkCJF7MCrEDJFjp1+FUKKHMXKqxBSjfHUr0IokSIbNA4vvU4wnU69TiAkCmz1dQKh56Cq1wmExAGVrxMILQZTvU6QJQokKBxG3KA/nSdt0GdO0dMb9FnMcUsb9JlzxPIGfRZirNIGfeIUpYI5RGIf/HSi2j74ikxxO7gPvpImR7G2D74ic0yr++AreoxwbR+8linepHLYw+7x6YR593gSKMiV3eNJzYHNu8eTwMEUu8eTEgOYd4+zQEEzzuGyv+cA4XJG4XKBwuWCCperOVyuUbhc4HC5wuFyJYbLOYXLBAqXcQ7X9DV6CFYhFKqCKVAFqzAVLQepKBSigjlAhXN4Co/BKZRCM2EKzEQpLO+nkDx7YkclHIBKKACFMACHEAAt2QdkWQdm2QY2ZRlIya6j3fLWUz8qOQAUPxnlPH23YqT26SdH/DU9V/xLUM7KHBSQfZLR0Li3+OjIDm0pDph/FdcZfRXXBVyKA+xfxXUGX8V1CF/FdWhfxXXkX8U1Fqen76H6HR2/KIh+04kM23JPYJUMhy/NAoX1HExtn5p15J+adaaiYKs0p5a/3dLMfo44HsVp44hinXOe5pAjtTrnyGuWM/8QrrE+3msvwtrXQtjrOtOLOpM+PwuSqk7++Vlgour4Tm+vKbji4RndxKMc8rigARwrilOrEI4oj6B4VXEmCqMsR+xJE+y1yfbaZHttKvbaSHttsr02wl4bYa9Nstcm22sz2eu+u2jQXgGJr642ZK9A41dXG2GvoNBXVxu0V0Dxq6vNDJf2m1laz29maRG/Sd4KPK1rNrO0Rt/M8sJ8M8ur8c2Ml+CbWVp3b5KpNmCqnib+osu5pAX0Jhkq8LRU3rCfQuK4KN7M8kp4M8vL3w266f6DU80MF7qbWVrdbmZ5SbuZ4Tp2M0uL102yPeCyOPtcnHpBupnlVehmlpaem1lab27Q7xzlBd5mhqu6zSwt5TbJ7oCnRdtmllZqG2F3oNCabDPLC7HNjFdfd2RcWTXr8OVUR2jGI21n+ES3RZcEFJ/dtsklgaentC26JCB6HtsGlwQWnry26JKOxmesp3ZkvbCj2Ak7xz7YqXXBjrgHdsU7YGfW/zqy7teQu0mbXbLNLtlWXLKVLtlml2yFS7bCJdvkkm12yTa5ZJtcsg0u2WaXbLNLthWXbKVLttol2+ySrXDJVrhkO0tPBtsZjjnbWRpzjkiMOUeexpwjjWPOEdGYs53lMWcbrLfN1ttWrLeV1ttm622r1tsK622z9bbZettsva203nayXk+zydnbVLK3kdnb5Oyx9YIisrcR9WMTGwc+oJlMKT2gYU6Wqh/QsJjNNT2gYc42mx/QsBANNz2gIQ7Wm17PY65MWL2exxLZce31PJbZmNPreczJoguf55JmszZOjm1c1VkTc8U1iWqvca6oJnBtNUFXWTZ1f+4W2iU/jqPU4gRs9MbJ7Z0fiJDwfZey+ZtGPYBx7gZMqEWPO4TCFwJR12Bc9Q8m5k7CJOopjHN3YQL3GUXoc7649zB+qDREP2JSpb5WehSTa9WZ+xbjlWrLvUzhoqsp0ian5k7H+KGoiO7HpEpUKh2RybWopC7JhNjI+StwTxKl3kl+BS5Lqo+qfQUuq9RT6a/AZY37K/UVuKxQrwUSdFxIqe9CSXVfqOceDFXqxFDS/Rim4K4MNerNUKIODaS5rCXcraFEPRtKqlmgnlsGqtQ4UOIGgBq3AdSqzYC7u/AYP9iDeMCff6PPxF0fStT7BelwFEUfGNTcDaJMPSFK3BmidiDI3CWCtNCUOkaUVN+Ieu4eUaUeEiXuJFHjfhK0XmaZe0uUvlJ6os9Etd4GKj0npjjQSrj/RKneFLgXBUl0pKBu5G+4O0XpK2ETnSqq9bBVulZMcSBsqYNFLZjL4Asz/+bMeGTPDR3FjaaTUDrtK4HoHMbliabEeCJDdCLj8kRhD9hVjdMpoyjPC9G70pTOiZI8Y9k+dCUQncu4PJFt8bhSjE7lgjyX7X+4UozO5YI817Rl4CoTOk/B8izlQ2dXAtF5jKsTfURTODHkf/L8IzZzQPHhlHN8OOXUHk45kn/Z/GNovsDo75l/hOa6Jxe7jssGRLuj66Bdx9xPgs0C/ZcFXedU+hz2TqGfo6DrnKpyjmEMsFzO6SwGr1VKfab9iGb/J0guPy7LXyE5OskyabgKcGTEd8aEugUo3oYL/gj6tKD7cPQQjrwe7Y78z6SMR3HzyYjSJpMyOONMoBufEKLsVNyYVM5Y4fcZPWQE+Sxom/PAOTaes83v8h5FDNk2RNk2LrOdXvqcMlT4fUYPGUG28d1FygNnW767OElqy/OR0DAAsruTog6F3EpdcorifYU/VDiGB/m2kuEUqCDmaIlJz1FSIFKqCxeSjJIab055Bule0gdJITpAtzJ7HBmURFx8cpUCAxJGBjGHBjUdG0iRggPavcYPGmN8AG91PlOEUMsh4n3eRxFDaNJAjbkMSdowPmWw8PuMHjKCEBS0zXngrBvP2U5bh4+IQ8bzuDIJMut5G/KUKxPuBXsQDLJvbCsywwFwIUcg7QY+Ig4RyKPhJMgI5J3FU85MuBfsQTCIgLGtyAxHwIUUgU8p7zsyNJdlt17vlkKeGfw0K+9C744Wdi/jEQ1eP+XsfqIx2X4KepWuvyNdPLJlTUe23RNQ/obryHFlEyhu9nQcP+06IvqA68joA65xtiNmOtVZzlUOVPkpx6XgTiCKkHEKk3MRKxNzwFzKUTONQmec42cCBzEvBVxVlgKuDi4FmMqB1W+dTz/Kb51rgUJdeeu8ooqw1986ryTIRVB561yrXBy1t86lfFUVqIBIlcVUeYd6X1jXoRCuc+Svc7ivKzG+loG91tG8ziG8FnG7FsHasT4e5XvuKzfYyxvs852k/dSuiHv03dSO7MmKoW08yne9zXdXazAs0MkONpikilh9rcGkBLmIDzYYVjmohxsMyX1VOBgWWUnqn0zQCQ5mq1KLap9M0DLVrconE6S6rQoHA5PrYRlC7kdbt7hSMSGcxRcUTgpCWUl01Afb67PX9TWD68vQbn+Ul8z7tEjDXJ42LMbsUWXxuz+0+N1/ffG7zxP+PZeL4r2aUQtJXomnzXual8r7ylJ5f3CpvA8zrT2it0qv6gpdiWV5QUoE1xWr9n1t1b4/vGrfx0nUnpU/7nIlEJ3duDx5UeHceU2+r6zJ9wfX5HtsZ3tU+v/aum7USRzZsvt0V/T9/8vrQviTmb/EGPEQyfmd1uIlxTlX+nf2gRellZ5PanHdO6dYmz9FXC6otHJBqZU1d62KeW1M8WV+0VVis/vJ0/yTu3hSkcLrxhDe/VuPp3YUt7qMyCqgI7HrZeRpt8tI4y6XEdHelZF5j++svO3oJG5f2aGLWXlzZTyySbqjUkKIrGAAlpnLPtqrqVJ7AqvLjuKVunzxLl88Dr+A4zICUBhoAbYNDo58Y4Mzi6qzq3hUyhcQ1SETbH/HsdWf3UjsxMrChl+A4hvaziG3QO3NbEf8QXdX/H1tZ/ZNe0f2QrYhnxV5Wf8esuojoRUaAKA4xF7F5o5QGHVxMGx+aR8xc2qIeh8xi7lJpn3EzLlx5n3ELMRmmvYRE4cGa4gajnFqPc65/aZHeFPBFn6Zk3Jzxp3LjCr3x61b71xmMbdzuXOZNWrxeecyC9z2cajMiFygMlQmlf0AdxWfxEJnZ9C7ilnMHpF2FTPXbpF3FbNAvpF2FRNPDlKE33OYwEsMkaEYJ1dxztbiivIX/GL11PzSF6uZk7/oL1azmP0lfbGaOftL/mI1C9Ff0heriYO/GKL2a5zar3P2l/SsfCr2wi9zUvYX/EY2o8r9sb/ob2SzmP1FfiObNfKX/I1sFthfcOMAI/KXysYBUtlf8EPZJ7HQ2V/0h7JZzP6SPpTNXPtL/lA2C+Qv6UPZxJO/FOH3HCbwF0PkL8bJX5yzv7gi/SWs9KDLRIG9JqrsOFGVvhOTCPeJCdiDopqcKMrJj6JMrhRF9qb4jATKMArsA1FlNyA1eZZ+MFMqVFAvaz9LLpbWp7VwMCfJ1w6sT+skwuPq69M6BftdZX1ay8n70gMdLbAPHnqgI9MkT0wL4yeqyiV/PLAwrpMIr9QL41qt+GZlYVzL7KF6YVyq2U+D/Hst3OitUWCHjSr7LKnJbUkXnjstBo2vbe03DBixW4nY7DVi8RV509BQoxK/G2+YvgVv3L0z8mKakcaPwhf8WyYWVsIxXkHc/UG2/R+tLWT3l9hOQkx3f4LtLKSxv71GGAK0V+7BWvcvjdxjddujh5ToISfaQqL9Bzy2mGhCPNElzMnF9r2s4I/+/b//H63X5Vs=",$ve="eJyFnVtzG0mOhf+Kgk+7Ee5ZSdbN/aa+ebzuMdvupmjORD9QUlnmmmJpSMoSZ2L++9YNwMEBkn5xuL6TdUkkgLxUFvXv0Y/1/X212o6+H1397XEzv6sOTl6+Onx1cHry6uXJ6MXol3q1fTe/r5oCfyzuq813H+r7+aoVHpdLFA5UmN8vljuUGjitFnef27tIqTfb+XJxc7m6WzbFDpvjzS+L5+r2t8X25vPo++36sXox+vHzfD2/2Vbr36v21J+ft9XqtrrVGzWP9sMP9fPo+398d3R28eK746OLF0eHh4cvLl5d/PliNGkKr5eLVfVbvVlsF/Vq9P13jQzCH58XN19W1WYz+v604VfVetMVGx0eHv+luVBzk3f1dnHT1uTH+mG3bitx8F83/31w9Ori9EX773n376v231eH3b8vu3/PDy5v6+vq4PfdZlvdbw7erG7q9UO9nm+r278cHFwulwcf2qs1dqs21fprQ3szLjYH84Pten5b3c/XXw7qTwe/Llb1dvdQfffXqjnr8vXBfHX7P/X6YNGcvHm83ixuF/P1otr8pXncn5vb3C5Wd7/ffK66Buie4vdtc8p8fStqU/DH+cNfhzY5Ozt+MfooRyetJS43N62p14148fLF6KdKjxsjn78Y/b69/et09P3xRfffq+a/Fyd9e/2t2q4XN41B//Hv0fRjU6S93LvmQTYP88aO/3nR45cvX/a4er5Zzu+Vnxxe9Pyfj3VjqeulKqeHw4VWj/fXbUPdraJ2Wy+X87XyC7nLQ7W+ab1chPPz4Tbz+0baNNaJT9Y9QdfiUXuYr6vVsvpUkvxp+njzTXvFzRdTzk6Gs5aPG6Vqs5smOOfxFp93D5+rVSzeVGVRW02OpZKb5XzzOT7Nv6p1HWm9qiLcPiUlt5/XVVL2U/24Tujia1J2s3hOYPW1Stq2ym26WsADa5Vv6mW9SixR3S+8pC2wbNNAoNU/H+fLiO/WVRPIVs2TkxNxmmrTpRpRXh0fDW0P3nd83LNLRWdn5z36IaIf44k/Wamj4fo/21OenvXol3ji64j+Gh3sjaEmtXXof+OJb+ND/GqhJyf+LZ74LqJxfPrfYqn30Tgf4om/x+f6I15rEtGVtZq05zSW+hjRLN7x79Gq101n9qXaurShnnndaD5O+TyfU07OXklOuVksbhbrm0fLohocj23S3jQ9T5J5u/zmHka9eB6vdB1L3ST5N5ZK7vwpnngX0edopEVE/xdP/BJLWQhr5k+slSSdJO09RPTPWEfLDRpCm/hcST57jOhr9LinWCrJpLvYHP8ydHFo/uUd4VhbHTpTX556uJMj8MbtYnlb7Opv66fEzq53tp5g243TzDmOJOw/tQNDzLNW56zv+LSs14uEb6rCVW4e1003fmMGPJLad2GzWXQD1yT996MWZ01z8sdFo9zX23zk0Mrdhb8hk+kl7X1aJCwZPzUDuXQ4cDu/u6uSnrvnOBSjAUfbdtW6gtg/tbHQ/G49f4CkJqdeN9OHKqmlmfd6vtlj4f1qYfylDeD1bs7Q22a5XDxsFptEauq6/Vw/urFi6Padc1vLredfk3iY3zxuE9zn8k/L6jlqhci6n9+s6+TG1+squ/FtvZ3fuIgzadG0JBrAEhrGoT1sdduYNBujPq7u5uvH++X8MblNfdcMM78kl5tjPaBd7p3P6uDi0kY9x+eDz9fr20/NMM+NC22A4vtYG394rjcY2w1eHh3qDe6bPPe4dHeQzDRPRqO3bchvNkn3tSyMzevCc9bJILqJzmZC3Hh90mpvQoNax+z9zzp/7zXWMaVNapfzbWdjo/AEOoq+XXxdgDvbKf7JbLichIY9duGkSXKSdRYUg9pVdzMvChKoaryk3c8FiuFyQ8wpGuwc/3TWEnSCzQHCTWzG0GQImIL4KSZV9PxMxWHNI7kV5RwbFXo/sFrmdnmXPYCFR8lHfUq1cX52NZtIla7m0yqYMyZK8xBXTeCUEW3wSnc/H+6yrP9Vre6STPKhEFGvs0qac+wNkn2ee1nqRtaFJr3hutrsJ1pOxyR/fK7XSa3GdHczA0WBTvOIX0iyLZhtQjcwi/muzS1vbB67Mc46eV7vgmbFEqe0Kknw/nG5XTwsd8lz+QqCk/vmkI6vGW1tF/Pl7eJTMsHalVPDO38fc9jEWSw29rrZnl6nLN0U0t2qlAapQSGnzFM/fkMXwsW3ZsCAK3A6AVrXX6oVToM0Oa6ru8XGD3wtRAsjrzcxLs50LvLYRLWbjZixCyPIdcEyNceSxmXBpf7uLXZ68kpGrt06l18F01r+vLURiiXZYgJcZnnr5fHgvdtCkqmKvWNJuCwNH/Z4pTewzZZLoVG697jUIqWuh3Ou9iOlO5fjeLx3WMI9powLquU2We7ZuiRtOfGp3pMR40hPzrt/TGrin8hMlY4zLRbI9DZP9SOc81PM440DrxtHhkfTbiRMYaRtloWO5G06yNAZhm+4V7JuoK90spxYnpC9KYT+m1KI/0pPLWZojPZ5voSeQWK8nZnQMrc2xb6x88qPmszTvtF+hUioSt3znc+lWKGhVbNG9fnMeDbcVQfOZzjqYE2WyF541BRalgnn+XiDks2pZvPbxU2WZ38q9GfrvbV559vHHpdGuzbc3OvWe+91WfCFy2KOzmcDY38dy8NJv2kjkUJvX0oUX9Lxs47H3EDArrY3FPwj2PLu3jst67u2vVd1Moqvy7n0MUoSys2lCpF8t3fOUEFHbjYvuO8q7cbh9WHoISzll2L858f2VeSfL0Zvq/Xqt/li3b5A/sfosn1RPXrx3cnhny+Goz57ONQ/p0dDTkf42h/1WcUhrBgK4+bo9FSP5BEAgXM4rk3laB//DrnM45TBZI71i0MO9YGD6L07+qM5Ojo60kMxmmOu/qBM3KUm0QCTggEmqQEm0QCTogEmiQFk6OdYl1GQXLWVeKmH0+bwlbbprBUPVZxJnZDBwwOGfQHOSF+bw/MTOXpq73YsRzt/JDcDBPca6FAIA0ARRYFyCgXjHA+ivE4QRYbyNDxEhRhRRH6iPHMWFaPHqERuozz3HZXZgVSgMFJOsST8fUQYVco4tExI40vkSbw8R5ryfRZMYk6lggUL0adyyYIhDlXwwSgYI1IYhKUgjE1lHKAqJFEqWhqqIkK8CoKgFbRLEIWv8hjDQyhhDCuiGFZOMWycY1iU1wmiGFaexrCoEMOKyAOVZx6oYvRAlcgDleceqDJ7oAoUw8ophoW/jwhjWBnHsAlpDIs8iZfnGFa+z4JJDKtUsGAhhlUuWTDEsAo+hgVjDAuDGBaEMayMY1iFJIZFS2NYRIhhQRDDgnYJohhWHmMY2wkD2XOKZi9SSJPIce3k1yVOEe7FNMxdEYh1z8ldvZj5rC8RHdfr5L1ezF3Yl2E/9iqlAy9STnDi+wLH7OAFThGkpnnClZkUbskZw4vfbIIkd3h9XxMUsogvs7cJQj7xqk8qTsPM4gRIL45jjvECJxqvJtnGFUhTjisBecdxSD6O70qc0pAXYy4ygpkIKeUhlCgLOYlzEIivc0r5B6U0+0AByD1Iye1Rypwe9ejyqJLDo5S7O5ZgZ0eNsg1KlGtAep9SzDOIOcs4Lc0xUGKS3orzC0rfMHSSW1AtG7qQV7DEHkOHnIKazyigYD4BDNkEKOYSxJxJUEvyCMhpFgEdcghQyCBAdzml7IFSzB1D42DiUERZQzmlDOOcL0R5nSDKFMrTNCEq5AhF5LfKM6dVMXqsSuSuynNfVZkdVQVKB8opFwh/HxFmAWWcAkxI41/kSbw8R77yfRZMYl6lggUL0a5yyYIhzlXwQS4YI1wYhLcgjG1lHNgqJFEtWhrSIkI8C4JgFrRLEIWx8hjDYjgMYmMUxSZQGIPAcazS64xRJJuQhrLKEMvGyBVNyHzR1OiMppE3mpC7o+nsj6ZQSJtAMa3C+4RhVBvksAYljWvVJ8ktOLJN2GvOJLZNK5mzEN2mF80Z4tsUH+DKMcIVQogrwxg3yEFuShLlKqZhrirEuTIIdGW7jFGomxBjXWyFsW6MYt0EinUQONZVep0xinUT0lhXGWLdGDmnCZlzmhqd0zRyThNy5zSdndMUinUTKNZVeJ8wjHWDHOugpLGu+iS5Bce6CXvNmcS6aSVzFmLd9KI5Q6yb4mNdOca6Qoh1ZRjrBjnWTUliXcU01lWFWFfWxvopheguY9pMLGBD9Np6+CjbAkoIxblginLFHOOD8DoSim/BaXQPIsS2EHJFwZkjihbdUBRyQsG5C4rKDiicolkwxfKA3weCcSyIo1h5GsODOgmX5vgVvMdoSeyKkhutELeiFowWYla4j9iBYrwOCKJ1IBirgjhShSdxOkhplA4axOhAoDceyC4S6okFx3548BgMTkUUncopPI1zfIryOkEUocrTEBUVYlQR+ZvyzOFUjB6nErmc8tznVGanU4FCVTnFqvD3EWG0KuNwNSGNV5En8fIcscr3WTCJWZUKFixErcolC4a4VcEHrmCMXGEQuoIwdpVx8KqQRK9oafiKCPErCAJY0C5BFMLKQwz/0NDL5qivcnck5wKSeAPk2hc43AGotCogbTFg2ljAhnYCIs5vaNJZVo+sIRS5xwXumkapPC4g8j9QtCLAtCLAhor05KfB7id25DPmT2h3QK4iwKEiQKUigPRxgenjAhseF4jY3dCVO2rj5KUezTS4fsLgABSywLCb11lGEZlHOdlIeWYoFaO1VCKTKWe7qcDGU8FbUDGZUfhVRGBQQbNoLDat8sS+3XcA3r6C2L7C2b7CU/uKmNhXJLav8GBfEYJ9RSD7Cmb7DvwqIrTvgGbRWMG+woN9fxlM2+fsX9CqgMSggJwtgcMdgIoFAanxgKndgA0mAyLWMtSOwY60PnNNpoakBoB8fjWO+dWo5ldDlkWNWRY1JlnUiNTAUP/jUC++uzgUUju9jnWqCxWo0wrUsQI1dxCmJFWrZWAHKNZj+NUqqcj/Du51ZkdSEUDSOIBc3YBD3YBK3QBpDYBp4wAbGgeIVKpHb0f9MPylHelow5AfWhjHoYVRHVoYoqYAxQYdxqQpAOkIQ1F7dHyqR/LUgGRMjQgrAhwqglQ/5HBY6gdIawFMm8NYrWOkt+j0gJJB3FtyeqB+EPc2cXpQaHj3Fp0ekB/LtehRQ6A78qHaoSRUOx5CtaM+VDuUhmqnUKh2jLJQx1wWasnOWX4X/WMXG91NtjAuSKAQITWLFioSA4cKUAyRmocTFeLIIpmCjFSKN69WJYtxFJJKAclqEptU5FstlkUslaDgJZXjmGQOaS9DdJNAgU5qFvNUJIY/FaBMQGqeFKgQ5weSKVWQSlnDq5BASKBcQmqWVqhIzDBUgJINqXneoUKcgkjmbESyT0xe3JVcidMVqSEOfh3160r9EkJ3JMGGyK0lmdAtsRweyuFUB5+/jmRhRUVYUzHm5uyK3UqK3a17/6BPvfNj+V+pegPFb1iGK4VPWALPauu+7hgeFb/uGOrtv+7wxYIF8q87vJbZAj/boHqyVbLPNgZJJpfZHUTbxeJ8B+XJHZzzQROQQA3BatYcvgw2ilegabwwK54SmonkpLF8idSgIXxTGwXjFsN3KDAkVzSuIjKr8cygoqIphYERBc2SYsFwKiQmEy0zlmi7WE82kPJgmncjXA7tjnxv2iG/HNqhpFfteOhKO+r7zw5Rf9gxWg7tmFsO7YjvDN9J8F4miOqinCqkPKuVirFqKlH9lHMlVeCaquCrq5jqjOuGjKjOYd2QeVbnbN2QJapzXDdkgevM64aMuc4uyi+LAtffq2wFr6a28EUSi/gCbBevBut4OdjIy2QpL5K95B3IZYLIRsrJOsozu6gYLaIS2UI5W0EFrr8KvuaKfZ3HrrrjWNNxrOS4UL9xWrVxrNU4qdA4qcs4VGOc16DtpfqF2zF2UIiS177joVs61aOpu+pHV3LmStqKryHsKnoaE+24kGjHhUQ73pdox+VEOy4k2nEp0Y5LiXacJ9pxIdEqhzYJI+PAs9bBkTHZcxpv9zGeOIsncrNlI+VBcl8TQQN6Tq3oRWpKL2bt6UvERvU6tawXuXm9ym3sVd/QXqPWDp/7nSTW43bf97FfVuSq0CrTwnN8LFxnVrgOe0Xxg7dBh09FwDGQklugRE6BUuYSqEeHQJXcASV2BtTYFVDzjoAKuQF9i3US7MQuUP4SKxa4Si0/Te/+Mb3CLL0CN3vh66RBlQ8LoMUVUXMrp7ZWnjW0irGVVaImVs7tqwI3rgq+ZRVTs+KXNSfeDNyghe9qSL2K9pzG232MJ87iidx82Tcog+RX1bAJWaGWZJkalOWsXblMbF4uQa3MMjc269zmrPumZ5U8gGRwBFbIH4KcuQUVuiq22LT4RB+LV5sVr8aew3J0IP3UAFzHGDmNCeQuJmSOYmp0EdPIOUxgtzCFHcIU7wrGyQnctzgnZBFu+NKXOCxfJdadJvf8mJw7S87lRk2/Vhk0Wd2B1lREjamc2lJ51pQqxpZUiRpSObejCtyMKvhWVEyNiCt6J94M3ISFFT1Sr6I9p/F2H+OJs3giN162wjdIcZI+LkzSx4VJ+njfJH1cnqSPC5P0cWmSPi5N0sf5JH1cmqTjTt0TbwZuu8I+XVKvoj2n8XYf44mzeCK3XbantZd+G5qtX479DVsMkDQWINdOwMNe1d+wdQBpwwDTNgE2NAcQaQlDtvmpO/JvDDvkNz91KHlz2PHwurCj/h1hh+idX8foRV/H3Nu9jvhNQy2SzU/DZuIW6T6igb0f4ZbZ7shvme1QsmW242HLbEf9ltkOpVtmO4W2zHaMtsx2zG2Z/TDqN0mc2JHfs9ihZFtix8OOxI76zYgdoqcGhXYodkzeUwPy+w8/DJF9ZkcS1IhcPJswcdeZxPpOCvWdpPWdxPpyK4GS1HdCmzE/QCsZaRPQhR61uad/u/JhyDFndqQb2AzhrrSeykIOtL4iMonyzC4qRuOoRBZSnptJZbaVCuQgyslLcGHtjBD5S2FhjdRJvDa7j/J9tkocSaWCrQoupXLJVsG5VPAehmuHFx6Br+FCIfkRe122UDhI8vYFXE8RmVN5Zk4VozlVInMqz82pMptTBXI95eR6wsH1FJHrGc9cT9RJvDa7nvJ9tkpcT6WCrQqup3LJVsH1VPCuh5v1LzwC18PN+uRH7HrZZn2RwvZAeYh8e2CupgYubg/MC7Cx924PzAsFw+fbA3OVHTbsEDlLBXbefTtE0jKT0j2DO3v12zbPXNsX2Gvzkpv7QvttHl3ey+T4YevMRSZgEISdM6lfh4Ao7pvpC/wxGqYZL/VIpxmGdJphyE8zjOM0w6hOMwzZNMOYTTOMyTTDiE4zFLXRfHShRzr6NuRH38Zx9G1UR9+GePRtio2+jen3CIZ0aqHIvqnojuSpAYndAbmKAA8R0FHv9h0iN+6Y2h0uONgdiM8bLer/wrVMWXvST5f6rUotac84V103GQOSxILIfcFjPGy97ilsHIbC+mGPIdpW3TH7sEfZ8HfPZSbbosVIpvzdkV896RCtW7SsdgasYwvXhebEPcNApUaAyC9B0boCE78EJK1qSOe31ohrV611rP1aGhGR6xJMsL+NLtmtpe0+4xM70i7BkO8HjKPrG1XXN8Rp3hQLCmOW0I1JFlfy5Cy380exvXexXXGz1ZDRwmYr5pSP881WLMbMHDZbMeccHTdbseCzddhsRRzydpgGMM8yeDYNYIlyeWkawDJn9TANYE75Xfg8tjRneuWU7pVnSULFmPhVouyvnLsAFbgfUMF3BoqpRxBO3YJh1zcIhhStiHoJ5dRVGI9f7ZgYOw2TYs+hGnUfyrkPUYE7EhG4NxEOXYoiyqzKuXMRoY6twt2M8n1ulHQ4KlGvozzvelTm/kcF6oSUU08knLsj4etoDe6YlFPvZDzrokRN+imRoLNSRD2W8qzbUjH2XSpRB6Y878VU5q5MBe7PVPCdmuCn2BK7BBWcLevowg5b6Q3yHba5yl3fnh22eZGkG8x32OZq6BILO2xzmbrHfIdtqmJXmS9Y5GrabRYXLPIC3IXuXbDIC4XuNF+wyFXuWp06L3lY6Ga9yp2tV9Nc6YskHa8vwN2vV0Mn7OXQFXuZOmQvcrfsVO6cSfRdtP+CEro2L3B37VXutEnNum5fJOnAqUDSjfsS/pNcVu33HlI5dOxODt27U7GT9wL3VV4NHb7/ZLPU9qHz9+q33TobCPgCPBzwamFQ4AuFoYGXeYDgVR4mODUMFpy6LtkzDBy8ysMHUtNBhCuTDSVcARxQeIGHFV5NBxe+SDLE8AV4oOHVwnDDFwqDDi+HoYeXaQDixKdSS++Kwt4QiAOTyTAaObEjvx49wXEHoGRdekIjDKC+N5i4sQQwWkaewKgBiM/wsn6O1QjfTjCnCuXfTrAYqxa+nWDOlYzfTrDgqxu+nRh4+OYg5VT7/JuDVMzsUPzmINXJIoVvDlKVbZN+c5BqZCXafp9QslC2/T6RMusUtt8nKlkm3X6faGyVZPt9opBFcG86I7JF2JvOPLNCtjedJap/3JvOAtec96Yzpjone7oLClmgtKe7IGf22LOnu1CCrFPc013Q2VaFPd0FlSznNjMHRtaKm5mDkFko3cwcNLJKspk5KGyJsJk5cKq9/pL0Zcao9iZQ7U3Iam9qrL1pVHsTuPamcO1N8bU3TrUffqn3MhKquWCqt+Cs1qLFOotCNRbM9RXOtRXu6yrU1/RqqOXwS61XWEVkulcTmF9fAAFXFQDrWgIwWxwAaBsYAcoORkC6OGCs/Y3jIzvyW0w75IfsJoydTWgvSIeSxux4aMiO+kbsULrXoFOoaTvmd3J0KLYd7E/tDrXtgKkRgPm3rMbxdxKN6nq4IZs3G7N2gztJuwHSX0pUJBOkfurWk2Hz7fErQVSHKqmrLTgAyqtapVV16wl44WiCKjFBlZlAVwmGH99oWbs2cGZHunXDkP9ZLeP4G0JG9eexDNlvYhmjnxpsWe2NbL/oCMxHOgg4ozKqywSGeKUQrmErAsZ0URDK6eRfke3GtmI43TZvaufY5xrqOrEG5L3EOHqJUfUGQ1RDUMxPjNm6kjH5SdGOTCUx9603dYkZmAY3MGouEzAxA9bEDMwSM0DzboAS4IA0MRvrFrHtyO+Sn4b0Cjzskp9iegWU7pKfuvQKTF3MkD62Ilthno7CsvJ0FNaSpyG3Ag/LD1PMrYBojWw6iovC0xGvBE8xsxqSWHh5bqTPrP2a5XRIrHZGFWupaRVRXssq9IZTTqtQ2HeSU5dVgSWV16R6puGycCctfA8+denPWO2uWse6ZwunU859RmNz5uui01FcDJ2OwgrodBSWPaeY+awRMfFZY7eJ71RP08QHyP95AePhs6QpJj5A/PcETLE/JWDM/oqAMfkDAkraBb7zl3qk6doQpuWOzny+nCX5cpbky1kpX87yfDlL8uUsy5ezLF/OYr6cJflyNsIfMZ1hvgSUvD2ZUb4E6t+CzJJ8CQrtc5hhvgTkf2x0NuTLYZQzw4SJTFsAGOV+E3DXqlH/w8ozlzOBwYdQBvVLKEP+p5VnkDX78JqNwnh0NqRNuEyVVFYTp2OFylZpZf2IFEpHI1SJEarMCDYi7UepsyF79u8nZpg9AdEfAJkN2fPoSK9rg0dgvrogYAwb9XtvZkkCxWvQ67sZZlAsp1MORTx4nFEOtaZ/9IZ6pHnHLGRRFMIsY4ZpFFCopEk00Zi5PIoF/VxrpuvnkFrCy4EgcIbMXw8ENcmV4QVBEELWjK8IgkL5M7wkYAEyafjWjXmWU7Nv3Vii7Fr61o1lzrPhWzfmlHGFY9pVxulIBU7AKqSJSdWYnVSiVKSc85EKISmpQulZOeVo4RSthn22Fp5VO+RtFTh5m7DPUEkaNynJ5SoWrBiyugpFK4b8LgIkeUWU6ZVzuhcBc74yTvwqpNlf1dgFqET9gPJCZ6A69wgqcLegAvUNwkMHIULSS4j0mNg89BcqpJ2GqrHnUIm6D+WFPkR17khUCL2JKtSl0EtFybXZW8VM476l+F4xK5D0MNmbxUwL/Uz6bjETqbfJ3i4mGvQ5SKnbQSnreVCPnQ+q1P+glHdBWIJ7IdSoI0KJ+iKQsDtCzIkWNe6UUEvTLRaIGRdVyqsocWpFLWRXFKmbQslWkYJGWcMpvsMCqXCt0G2hxj2X075hzaT/cmrShaFetnboyFDbZ+3QnYEGPRpS6tRQ4n4NNOzaEHPvhlrawWGB2MehSt0cSoWeDotwZ4ca93eoUZcHUuj1QEs6PlAf8wYK3R9qaQ+IBWIniCr1gygVukIswr0haqFDRNH3iU3Ydn9fsu8F2qN241r/YlFSHhYQBKWG5IelBEEpt9sHijoO5eGRoTRQKCvbR6CgICiluwWgmDIo5/629VDO/W3roRz8dd2hFPx13aEM/gnPoRD+Cc++1DV6br+4ez245LEdiScCSt6yXZPfAfVv2a4TPwOF3r9dO7cCNniTka9arZtRvxYKRxpNhnBc1FNxsV2C6ALK41Xw2w9GdJXs2w+R5M8Ru+sY5CuZEq/Vd5L9Hy24vV7K3y3os5hTvdRW0H7uqTvyOwM6lO0MUM/Toyd39OxK7vyRr1puZenG8fkU0UMqT5/UpRqPniJ6jifuEkRVKHuLDDmwHoqoHsrTeogK9cAPkwg9xxN3CaJ6lP3VDY9cZRznGjkxr1bI3gl/KvDnwnV2Jc71dWKsNHQKdzmlCqOUVpc7n0CfUvqcXmGXU6okSkkVbdzq6oiYK4laXksogdUE/JTj5/wiuwLmqqIW6ypd912CqI7K0/q5YYFHTxE9xxN3CaK6KI/10LHFXcaoJiakVfFjF2JPCXtOzt1ljOpjQqyQDoLuMkYVMiGtkB9kEXtK2HNy7i5jVCETQoU+jWS2r0d+Z0eHbG6vKNns0fGw2aOjfrNHh2hLR8fohw875n74sCN+l0eLmmhaVptNN5VU+Ekt2B4tdITWHfmR5CcadfQTy7vBNnagk1IlYhkj/nW8Ynwbr1BfxiuxN+6KbLqrSN63KxCT9ESmHvNIfA0U+2ooTuqiWqiQKr5Wiqlqyql+yl0llfqaxs9JU+5rXfiYNBUTC5Q/JU11b43Sh6SpSpbJPyNNNWcl/VNgeuDsEf78VwsXLi0t4tB0URgOLdJxwyL2Q4skny+SlNgeWbR3Rz5DdcjWywzFDNXxkKF66lbFFPvE1SFKXB2jxNWy2h/FZ64LD1inD1jHJwnrS6Ykz1j7/XId8pnUdydJR5J3IV/il8bD9QpfGucqteC+L43zItFse740zkuQjUtfGucy+0D86jcX9poldZLyV795gb3VKnhR6avfXCbfKnz1m6q7kiOx85W/Be0LLIdRU3+XpVul61H8OnUQ5GfYDUleOtEje85kzJiPFleYNocrxbn6qjBXX5Xn6iucYg8XjpPnVWHyvCpPnlfeRHj5QqOxwLf6RqOtcHVwuJWgXSzFl1ceLlyPcB2udiPqWi5+qEc+CGu+ZE+xOYfrxgWa2rWwP5Fvk7ZwL4XudbhhYbWhjqsKyXX4/uVVhV6nvnx4hHQNoObZfrgC37w02+9VHDAM940T19rNUv2JfLt0ltpL9B0h3JIUuDMpu+LV+DlYjo/jBkbDgyQT3dpPaulcvm0+qe01SX9wP8yIxx7t4ol8s+yvyg4SxvtwL3wbcOzRLp7I90pTQCc9uAs8xHMf8tOG1xCFVWove03OWFaf5Fvdi1SQ58hV/0kCq8l2di4CdcoL+E3urNKudpZpMz/L7qMGFv1O+E7NjbXHUnvM9C0b7TfQHuvsM80+u5SN8m2LwP+HL6HQ5Ubtm7LTw4ibB5xvc22pTu6xDwuv0dJVUsIP/pzmYyTWYZ0/p/6kS6bJRCHV3MMmJboJ7mnEfruB1/SGmSZvu3LVP05S4mF+U+Wm6ax9ETG1RyzxVWveWFf3pZwoudPTuiNd2zOU3aIVdBvHsV5M39n2lZOG49u6d2QXHtEDlN6ReZUfJez5G56Hf79yeB73ruvCI3qe0rsur/LzhB9AlOdJf7JLnsqJ+Gxe4Cf0av6c+c9eHWc3pmcefLRL0ER81CjWFTWP/Vqa13D9ySu6fuaxrZx5TpuDlMtqmae6TubwH2o3Jbo6QTixtYj2t6eEdH96ypH2t+BfeSI2JQwG6pUmzLsFz37E1B3porYhaQpAfseEcdwxYVR3TBiyfRHGbF+EMdkXYUTMbUgi4EyJze66Iz/h65C2BaD4Z6c6HqaFPcWFIMP+r1F1iP4aVcfor1G1rNZQ6o78y4UOJdtUOh62qXTUb1PpULpNpVNom0rHpEsGpLZXpHHeG/9phK+CntChAPlXQU/BoYCHkfUTOhQgWlx6cg4FzL0KekKHMuQd6mmEK29Po7Dc9hQaB3hagTpWIF9CexrFdbOnUVgsexqFFbKn2DjPLjKeY2Q8x8h4LkTGcxoZz3lkPMfIeE4i4zmJjF1ojl2s2I5HDIS5eLLlNip40p//+X+DG1I7",zve="eJx9WFlv2zgQ/iuGnnYBt5DkS85bmk13g27SoEkPbNEHWqIlIhSpklSuov99R7JIkSLtFyGZjxzN8c0h/4oueF1jpqKz6Mt1K1GJZ4s4S+PZYrvdbqJ59J4zdYNqDAfuXuodp52spdSToZrQl6n0KyZl1Sm/xgVpa5BcKURJfs5KCgdj+F++J8+4uCUqr6IzJVo8jy4qJFCusLjD3d27BucE0cGYd+/4c3T2/U2SxfM36XYxT+JtDI8k/jGPPrMCC0oYvuWSKMJZdPYmiWMLuK9I/sCwlNHZCuRfsJD9sSiOk7dxnMFbbrgieefGBW9eROfA7I/8z1myzVbz7rnpn9vuCW/unpvZecF3eHb3IhWu5eyK5Vw0XCCFi7ezc0pnvRo5E1hi8QhCeM0lHCoIK+/yCvdR67zrfd2THPA7VfzzNTrbpv2fX+BPeH8fm2usBMnBg++/oq/forO08+QGNMgGgeG/5wfxYrE4iPFzTlFt5JtkkLeMPIL/EFoNreJBE2vrXReako3YcqvVEXCTKWJdzPS7Gizyjk/mZZvsAKC66d7FCgMtF4NC2eaVqpDyLW+QwIzi/TGoD6tvPQL7BJEPNVKVb39DW2mkJnY5FALyD9eEhU6DL4SPrqTaS0mRrHyDXrHgvpQz7AvVU+CkqgQOnN3zVgSkkFVfKslzQIgfMfPFOBxWRiyDjcs5p5wFIoFr4kImprQrP59WP1ubiVpcCgxlNLq5XC4PwM8Wy77EvSs5ZyU0EpuFaXqAzmlTjVlerzcH8TuskH/4oiLj0WQQ/oWpdXadJAfxZSOJ7exmPfD01lYSD8K/kU0288JLS7Mh+hW337dINCPA5MRX8QE1jXU8Wx/E/6J6V4zyLBtCdd36Km4Cso+QTOG4N6T5dvRusxxsu6/scK5Wgw2fKovZ20HxHSnrQDjv0WjEejvw7/MkxmMD6ZQkvnEfa1xayperg/ibZfN2kN1K4lvxHw4lZAfD6QErpy1lOt2QF4H3XATa8HDP7VnrVWY6SoNZQfKWokBRt90Ak7mt2GACwTVE8bNPE+Tw3VTIzkmQqRuLqsvtUGaFw3cTcjzJxSod3tjYSnQgS4fvpgyc8KaDZuLwXR8FtYlv8YPD9rHBuGxfbQYG1q1vL2v9+3zC9nF0EF+BqoLBFBbbjRfSYbsJprLYboxtpx1Fj23esXoMhqlx7rB9uR2OPxP/aCMDmX61/Vhm8cha7HA91bzbWUR1z0/m8tLUKSyJ1qWNHqeXrTUf16lb76Or6XIzTmWFA4mHyeLOkUS3+H23UpJQPAnbE0bUS2CSUi6IdWM13Mhpu/OlBUE1t/YbA1QYCeWLYVsrRh+SeDm0RCQEf9pxa3Xpds4RcpJhqNVDbXPkzqTpOJcK/mT1VO17gUtn57C3J3cpMlUucW77Px3hRwZ83VJFGvriJ6YRHJboLmnWPUNXWAC7FbQg+/0IrjUL4RMFBxhYkEdSBLxiXB0xD8TkEZorywPXoP0I/jxhXGzWKEoJUFgeiTvs3srq2eO9Hq2Aeq92S9eDIgeYwIeawKoVY+KyVOumuBmpY0r+CgrgQVn7ohl9n6aIoc4TJjB0lEDWvmaGa05ETrGfPRd3lm1jI64b9SKtBJlbhAFTgEhuqWoUvlhCFdwRBW613cNWqnGYyDAdj+OQfdnugpBWHUa14jAKbbN2tlDrfR6mXUT9p7F3peyGvHNBb0UCl933GHgmyN6Hc/0R6+KZxiG7Ba6ReJjg6RiAos0DpTRsHWNz1s284Mr58DI+UF52N8B7vyIGzP4+nGJcWLXiNMtiR0/0S0BPtExAj3ZNwE42zh11e6duTZS/YlZaK6DebfrkOsb4aURMnsqiA+viHpPowDrwsoX1y6moRTZ20cMXtmpOgFYf8sGd8kFrRw4ptuCQagu2lJvwmpXEUu2DNSlOoEf12vY4aXOZkG6WY8OC4hzrwHRcjVhWepjd4KdYKK7jrx5H89WjRxPWoycydlS3jZ/I2VS/G9yp9gB6PG1T1aY4YAp3LfPHPPqABbtFRHS/jf34/T82FAfb",Bve="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var Vve={Courier:_ve,"Courier-Bold":Ive,"Courier-Oblique":Nve,"Courier-BoldOblique":Ave,Helvetica:Pve,"Helvetica-Bold":Rve,"Helvetica-Oblique":Fve,"Helvetica-BoldOblique":Dve,"Times-Roman":$ve,"Times-Bold":Ove,"Times-Italic":Mve,"Times-BoldItalic":Lve,Symbol:zve,ZapfDingbats:Bve},RS;(function(n){n.Courier="Courier",n.CourierBold="Courier-Bold",n.CourierOblique="Courier-Oblique",n.CourierBoldOblique="Courier-BoldOblique",n.Helvetica="Helvetica",n.HelveticaBold="Helvetica-Bold",n.HelveticaOblique="Helvetica-Oblique",n.HelveticaBoldOblique="Helvetica-BoldOblique",n.TimesRoman="Times-Roman",n.TimesRomanBold="Times-Bold",n.TimesRomanItalic="Times-Italic",n.TimesRomanBoldItalic="Times-BoldItalic",n.Symbol="Symbol",n.ZapfDingbats="ZapfDingbats"})(RS||(RS={}));var kW={},jve=function(){function n(){var e=this;this.getWidthOfGlyph=function(t){return e.CharWidths[t]},this.getXAxisKerningForPair=function(t,r){return(e.KernPairXAmounts[t]||{})[r]}}return n.load=function(e){var t=kW[e];if(t)return t;var r=tQ(Vve[e]),s=Object.assign(new n,JSON.parse(r));return s.CharWidths=s.CharMetrics.reduce(function(i,a){return i[a.N]=a.WX,i},{}),s.KernPairXAmounts=s.KernPairs.reduce(function(i,a){var o=a[0],l=a[1],c=a[2];return i[o]||(i[o]={}),i[o][l]=c,i},{}),kW[e]=s,s},n}();const Uve="eJztWsuy48iN/Ret74KZfHtX47meqfGjPHaXx4/wgpJ4JbooUU1JVXXb0f9u4JwESF13R7TD29koIpFi8gCJBHDA/Pvm+nraTuPmZ3/f5HHzs7/k8WlzvXS7fvPXp02eqyR/2vRfd2N3gqhUUfm0Od9P236+DoczxLWK66fNpZ93/fkGWaOy5mnTnUR67c57lRaZSItM/tnN/XnsX/DfIqg0JOk8HI4UK4BCAFzG+xWCQgXF02Y3nU4dJJVKKrx5mPgKBVMImOvYXY+QKJRCoHzXzxMErQrap810hqaloioF1e0L5kvFUwqe23Hu+Q+1TinWeZnuMwSKrRRsL8Nn/kOxlYLtOnzFWE1Viqmu/eceVioVaylYe1OwVKilQD0PCYgiLRtVcJz4kEItW13mNLi0UsCVAB77KyxTKeJKEPff3rsREkVcCeLD3He3HqArBV0J6G/v/fU2cK1WH23l0e3c7T71N9uUVv/c5i73bWlVs1Y0u5/3srO7aQb2EPUB+eUTva0TYgG5mGbbzZSUkJTpn75ygF4PThhq1SMGMds4HYZdN54n/rdWc8rv02bfH9I2hbqGsKbPnIYzHSc0qmTIxI6nuwpiAIQmU8F4Gy7jK8RwntAI1v3wedj39FmFECp508s4zUOyGmwpKrwbL8eOIlVU//Yf/S1J9C212Pa/uuSwbVDYlWzxf/aj/UtfWgm258t1GG1X1BVawfdnX0xdoRbjPCdBVGs1svo3R/tPVD1r2YL3k0kUfC04f9ldLkmk0NVwv+pO232SKXa126/vHAO5wPxNGivsRsZ/HDhWzLVg/iBuOSfMUTGrTX+b/qSIG0H8u+NEl1J4jcD7/XBI9kDcUYN/0/FNCDuNAP64skYOeLrykUsjElWC9+cmAEAB9NtrEijCplaE/YHvKuC5Iup8zxBAWtFrayakC2QC8uCbhggSskx9zXYNQSRkeuZWQBFKQowabNIfS/qeqOgSOFTINcC4DKcnE70H2zqElJAJ3k++dwgrIRPA47J5iCwr724RWELINFBTAAWiCL7SOogrIQj6abWBOH8hCPoL/4a4EoJgn9MWIq40lcY52cJAGbCHMgkpA3g9t7e0sRWgB1HnvjJYRez6yrSTlYJvRZmdCQhe80Pa24roNYL75uLo10WyKYHVeFLjYnImilM0qPDOJOKWNGlFCJsIrw/qsNv7OPY3SnNYSQ9DP46DLHylvGCcEFU08Nz6JIVx9Chd+93ENNhEWroSuC8SAi0WNznNpqH9+c5k1RQ0nIbi9/LnTzdmoKZAaAwaib/0g0Ti29wxG8gUgLey/O8eHmmqt4eiKTNYo416LPrLkcIWa2u06eZ5+mLBXCaoTp4m7pckBm41P8Qe0mUG6DUCYWY/fTmnCQbwkCa2043vrhA2gqakncwM3aGfe9GAj1Vw9qiuzPW2o4Or4PcxhmUu4atwAGKMy8wCscJhiDFfJh1lhY2K6mo250DrTJXOC82EUgVIkTMmOd0moqC5Dd24H15e0hRKJS0Cvg7Xm9RKgz9ErdWrTpfb6zV5Wx2ytwlDZLplUQ/8Ye72Qyq5RI5kqY4t6fe0iHOItdCYbo8zKOi0vLjvjrdjZ2IYRAPUZZ72910SI7vEiL9LaHSvrZFkipKOf02y8gc9vEbmKHQjRP95uH6ShZI9c9pao41otTPLICMETXSC5jLNupbP8bxo2Dy/DOfh9prk8BKNk935MPIo1jiKUSNQqiVSVSozBWYan5nmNMGz1+r6AleO8KJJwXdk2H8XwgVVP31AticBhdvqIZPwNPcvqWhqah74iIB6GsYuvbdGeYFS93yY775hPNh6giUlzNNXr/eaJmNYKrnLKznOt4ZsEQ6f5ZCfWVvJFK2Xs5BcP8ND23r5uJqDyaPmM90Oscl9a87aIC3HLCxz+uOzNFgOhA+P4XRq8hPTjP3Xhzn4oiYIm1svybSpOX03zDuJX4kqyAx3rrKZdZ3XNMggGh9lsUt/Fm+7m+1bGCxqOttPN/fOFiExKh+xnb1d0gz8qiiXmS0r5YxLaaULN/TaOsu4WEgTS3Fd1TCvlsvj9F1/PvQpPzHAZqiN9yZEntcyaDfet0mGOKLl5LGX6EMhU5ZGkf3QnVIWqvJA5FoG7KbLK1BcBcyLTfNYZGr7g8ar+WEWm63VgmSefX/q5k+r6Rplrdo/Heb+q00gKzcWUiVy3pY5RkGL7kept7/zSRS8Uc+Kw+nOV5ukqeu1KqtZ2Ds2a6yrWZghX/NS7q3OwQZ5WM0tgGCBPK7muPM6B2fP8wditayKMKG5YzW7rIvzkJcPs8vKOBGaRJxo+boMocrFfe407G0SJlJS7pO+KOrwqKkAcw4lp28Xi28vU7AM2Lfz9gUITKM8fJlcnoRtlJIvkwsSRtD2kXkuC8M2ytbX08vSME4ZHqd9cTQgojL5hXr60uhDxDJfTy7WQ3kXy2I9q+t+L7V+d3nZD+fDtrtdf7iZ8gPUNhVNSLOdFKmrqgg5UGR5ktUWkERW4ETnYSnQpK5PsqU2k3I5yZbCTGhJki0lmbJ2ypxOd8rYKXM23Slnp6yxclZkVZK1li1EVlMWmY0yyJokC5bIRdYm6sDCW/9X54knZEYnurpKJCEzNtHVdYqTmdGJrm6SiJRMsdWJmTS1MYWuSZwAHg3D5dSJO6tnpqPiNXIHapSQHkL9WNCyDwEZymTtQzyGcfx/rQVukWUP4RgGS29oG5RieEMSVKm67GISoHZUs0g6TKImlZMdbde2cDMFUCZBSBWevKlNIlRrBNQkEVpt0CXUSYTWGvzG1q5TldeFIklgFfiMvQ6tNXgMtk5IM+qSAjbJSpOh4wdUtYnQYgOqxkRosgFVayK02SJsYCJ02tRw9HkVodUG00UTodcG4+UmQrdN0dPhVYR2m8KPBhX1t/bkumgaofzWplwXDT2Oo9K2Lhp6dogUvT+HBpGC98fQxlDs/lSVCr/OVGZ7CGY3lXEIKyD3fylyrQS63P4VjTl0uRkGJxB+l5th2CBS5LkZhg0iRZ6bYdgPUqC5aYMEh8CSmzrsCinU3PRBKkNYyQ0qTgSiSmFQcSAQVAqDimSFmFIYVPaKFGphUNktUqiFQUVaUvLVFbaHSEZK47vC0LNfpOgLQ8+OkaIvDD2SjZbOXWHokWBQgJeGHkmlwaEz9EglKHFKQ48og8qmNPQgJEp0u9LQg4mAjJeGnm0rRV8aeratFH1p6EE8tBnQlYYebSutwLrS0KNrhRZYZegRbpV3dpWhR8tKSU9XGXr2rJTsdJXBTz0ruLjhT00rVaAyBVLTSjWoTIPUs1IVKlOBbSulAV1lOrBzpZS2q0wJNq8yhH7TovIOb1cb5tSXUny14Ut9KUYQUyS1phRgbaDZmEIiFrKThCnpIMMYGrZh0JBo7M01e+H65sZeUpPp6ZsbX4+dcH1xa1YgxYsIAWYF9rXBI1p/L9tiiL6ZmYGtrYpZybaz8caUCA1iA4iIPcEN0ZAQIuq70g2ZPCOQ7R+yE5riIjTojfMRESbsge1zHMhgsSlk5PR4u0WnQDraMOdEE7JTj7dbhAqpw4K3W4wKGZv3eHtempBkA+nHQldgrwXHM1jwCgj0pB7BwlcIbI7BnhbAAmsvHNJgISyw+MIxDRbEAqsvHNRgYSyw/GqZSE0j1l84rMFCWWABhuMaLJgFVmA4sMHCWUi8CRpZQAvkSzizwUJaIE/CoQ0W1ALpEU5tsLDGDzqg6yI0jaKzfxGaRuRBOLjBglsgAcpYHZhG5D04usECXCDdQd0WLMQFshwc6GBBLqQOETSyMBdIa3DMgwW6QD6Dcx4s1AXyDpSRYmoTsrpmzWKQyDJw0GWjTci2GCBZIAtkFDj+wSJZIJPA+Q8WygIJRCQkw8meFCJAsGAWCu8BiNAsjzTAXkKwEBfYg2IQqM3y7EFFauT/ZAcUGlk0DAU7nyzETPeSHBIa1aZmSe4IjWpTsyRphEa1qVmSTFMjU7Mki4ZGreEsSZ+hUWO6s7+bc4/8cdJlaNSYQdjTRbEbM3+c5BgaWTgOSA7stkSLiqFiCwbgLUiHinQX4C1Kh4pEl+BN94oEl+DNdBWJLcH74yS0AG8RPeCjRmRZ3JiR0ZWKrItbW7MmZWVlbG+vSVWxHY2tyW+lJTUy0yEVgdTKmmYlNplKagSDCMFlTIaH8GmVMWkpIj6sMsQv+Ae3UmUIX3AP6q0yRC94x/IOBC84B4+VyhC7yHTIELQRhGgM32hchmAM14hMRCpEMIZrNC6DJvAMWkxl0ASOQYOpDJqACrX+EmgCX9EQ8f3T5stwlggXf/otCfss8O19uvX7LfqmP3Z1AiRPP2JPY2pA/vTbFIhHqhFedB2s0/2v3bIAG1z14yH8CVcvwJFFoePr5cgbDv9/G+Pfvo2BUIP6ix0r8EO9ZYARuKFeMMAIvFA/gWMESqifiTACG9QrBTpCBFGK9wuMQKz0UgJGoH+C7L8xAvPTL40Y4au7gPkfjEAB9SYBRmB/eokAIxA/vT6AETifXh7ACHRPrwroqAFX0i/5GIEmCZb/xQj8Tu8LYARqp5cFMAKr03sCGIHQ6SUBjMDlBMsfMLIP//+HERicXlzACORNsPxJR2iW4I4FRj92EQa8TTuGInY3/vHrMSBwuoPX3TDot4c7osKPXJtBm0XLvsPc0XfRZkHNhxE4nLZsMQJ902/jDOQIkriXkAL7JhEyNh1ZemtZ98IxCZvebeCYZE3AHjkmUdMPGRyTpAm6v3FMgqY3EjgmOdPPZhyTmOlFBIwZxHEPgWNeJ9BbBxyz+af9c45J2PRMcEyyph8EOSZP03PMMTmaXjLgmN0+vWLAMfBpFfeZY7838AVjNilxLYJj4NOy7ZVjUju9zcHxv3/FiVcKULCpf9yGcb9qEOPL/6pp7GyO2cU+S7N2AaOzDMHKBXxO4/goyYBiZ3S7+yxxf0fNKud0r31a0gnddp4+9WfTpHJOt/r4yfIlfVDq5z7dgWABg8amf4SBnLxZQ9A0718keFqMZSGDNurhPoxjf5r84LGeQY/77d0vb3QvyYc1DTrd9nWo56movd196uyqy792faz2prfkJHyAHPiBONTe+kZ2ephrlhb4Ll0HSRfRNOLxqk5onB1LWu4kCPAGRmicIDOZ6j67Ro0T5V2/F6t1lDpTlkz6iMTpspj/JI53H83+jZNmt/+ybY2TZ1lRctmcUldonEDLxLEbGV5aZ9AwRnqAJmydSFu6c2dunU6/8yDIL5Og0+8W67VOp98xsL6kr1H8FglO/W45Uq1z6ncPXto6rX432zlpnVW/e6bAGfXPV0aOmXPqZwcbM+fUzw42Zs6pnx/BxsyJ9fMaV8ycW79fre3c+v1qbefW79+u7QT7/ePazrGf+UE7Zk6wf+Mmi8EJ9ocFQnCC/WGBEJxgf3gDgddNNIp/WC3Mb12i24cHXIEfkcs3FzGDM/UPnnJjcKb+cQXOmfrHFThn6h/fgItO1z8+4IjO2P+0LBOdsX9znHgBKUYn7Id+Pkklvh3TCgtpX9DFhbSvll1I+1t0C3NfTBcX5v4IeSHv5sYxX7g7H86dt+/Wbpw7c+8XsLkz934Bmztz79+AzZ2+9w+4cmfww2ptZ/DDam1n8MPbtZ3GDw9rs9ui3KZPblw4tz8vJiuc208LhMK5/bRAKJzbT28gFE7wp9XCTvCnR1zO8ZeLw7Fwjj8tTlw4x78v0Ern+PcFWukc//4GWulE//6AonSu/7paxrn+zZ2YnRclRK/rBXJsCAjxh2cKEAWVJ02ku/wOoFv2+12XkmnODwHgW4uQGVbZ0uM7mAJ1b/68/JlpUMnWdy5MF6/Vd5eL19YYSPd6FqPwBkNQo/h2NQxdQQ3bn/dpCxrGrqCW7U8rKZl/mfi0Xytk3Am66ZhYbg4y+KAVslDwbXdNL2d5qU5hnYBlTZaa6hs2t1qWdaeeTptcLco+hl5R7w4H5uOGcQbtEkpT18GusOI2xT9dYcVJf7zCSjmbD+Iud2s1NPRb9E+0UICmizb8ZK/+5JOLOulSqwaw5VJr2vB8dSFn89fvv/8H0oq1dA==";var Wve=tQ(Uve),CO=JSON.parse(Wve),TO=function(){function n(e,t){var r=this;this.canEncodeUnicodeCodePoint=function(s){return s in r.unicodeMappings},this.encodeUnicodeCodePoint=function(s){var i=r.unicodeMappings[s];if(!i){var a=String.fromCharCode(s),o="0x"+Eve(s.toString(16),4,"0"),l=r.name+' cannot encode "'+a+'" ('+o+")";throw new Error(l)}return{code:i[0],name:i[1]}},this.name=e,this.supportedCodePoints=Object.keys(t).map(Number).sort(function(s,i){return s-i}),this.unicodeMappings=t}return n}(),OE={Symbol:new TO("Symbol",CO.symbol),ZapfDingbats:new TO("ZapfDingbats",CO.zapfdingbats),WinAnsi:new TO("WinAnsi",CO.win1252)},vR=function(n){return Object.keys(n).map(function(e){return n[e]})},Gve=vR(RS),CW=function(n){return Gve.includes(n)},LE=function(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height},ys=function(n){return"`"+n+"`"},Hve=function(n){return"'"+n+"'"},TW=function(n){var e=typeof n;return e==="string"?Hve(n):e==="undefined"?ys(n):n},qve=function(n,e,t){for(var r=new Array(t.length),s=0,i=t.length;s<i;s++){var a=t[s];r[s]=TW(a)}var o=r.join(" or ");return ys(e)+" must be one of "+o+", but was actually "+TW(n)},of=function(n,e,t){Array.isArray(t)||(t=vR(t));for(var r=0,s=t.length;r<s;r++)if(n===t[r])return;throw new TypeError(qve(n,e,t))},$o=function(n,e,t){Array.isArray(t)||(t=vR(t)),of(n,e,t.concat(void 0))},Kve=function(n,e,t){Array.isArray(t)||(t=vR(t));for(var r=0,s=n.length;r<s;r++)of(n[r],e,t)},Xve=function(n){return n===null?"null":n===void 0?"undefined":typeof n=="string"?"string":isNaN(n)?"NaN":typeof n=="number"?"number":typeof n=="boolean"?"boolean":typeof n=="symbol"?"symbol":typeof n=="bigint"?"bigint":n.constructor&&n.constructor.name?n.constructor.name:n.name?n.name:n.constructor?String(n.constructor):String(n)},Yve=function(n,e){return e==="null"?n===null:e==="undefined"?n===void 0:e==="string"?typeof n=="string":e==="number"?typeof n=="number"&&!isNaN(n):e==="boolean"?typeof n=="boolean":e==="symbol"?typeof n=="symbol":e==="bigint"?typeof n=="bigint":e===Date?n instanceof Date:e===Array?n instanceof Array:e===Uint8Array?n instanceof Uint8Array:e===ArrayBuffer?n instanceof ArrayBuffer:e===Function?n instanceof Function:n instanceof e[0]},Zve=function(n,e,t){for(var r=new Array(t.length),s=0,i=t.length;s<i;s++){var a=t[s];a==="null"&&(r[s]=ys("null")),a==="undefined"&&(r[s]=ys("undefined")),a==="string"?r[s]=ys("string"):a==="number"?r[s]=ys("number"):a==="boolean"?r[s]=ys("boolean"):a==="symbol"?r[s]=ys("symbol"):a==="bigint"?r[s]=ys("bigint"):a===Array?r[s]=ys("Array"):a===Uint8Array?r[s]=ys("Uint8Array"):a===ArrayBuffer?r[s]=ys("ArrayBuffer"):r[s]=ys(a[1])}var o=r.join(" or ");return ys(e)+" must be of type "+o+", but was actually of type "+ys(Xve(n))},ge=function(n,e,t){for(var r=0,s=t.length;r<s;r++)if(Yve(n,t[r]))return;throw new TypeError(Zve(n,e,t))},ze=function(n,e,t){ge(n,e,t.concat("undefined"))},nQ=function(n,e,t){for(var r=0,s=n.length;r<s;r++)ge(n[r],e,t)},go=function(n,e,t,r){if(ge(n,e,["number"]),ge(t,"min",["number"]),ge(r,"max",["number"]),r=Math.max(t,r),n<t||n>r)throw new Error(ys(e)+" must be at least "+t+" and at most "+r+", but was actually "+n)},El=function(n,e,t,r){ge(n,e,["number","undefined"]),typeof n=="number"&&go(n,e,t,r)},rQ=function(n,e,t){if(ge(n,e,["number"]),n%t!==0)throw new Error(ys(e)+" must be a multiple of "+t+", but was actually "+n)},Qve=function(n,e){if(!Number.isInteger(n))throw new Error(ys(e)+" must be an integer, but was actually "+n)},xR=function(n,e){if(![1,0].includes(Math.sign(n)))throw new Error(ys(e)+" must be a positive number or 0, but was actually "+n)},Rt=new Uint16Array(256);for(var ME=0;ME<256;ME++)Rt[ME]=ME;Rt[22]=It("");Rt[24]=It("");Rt[25]=It("");Rt[26]=It("");Rt[27]=It("");Rt[28]=It("");Rt[29]=It("");Rt[30]=It("");Rt[31]=It("");Rt[127]=It("");Rt[128]=It("");Rt[129]=It("");Rt[130]=It("");Rt[131]=It("");Rt[132]=It("");Rt[133]=It("");Rt[134]=It("");Rt[135]=It("");Rt[136]=It("");Rt[137]=It("");Rt[138]=It("");Rt[139]=It("");Rt[140]=It("");Rt[141]=It("");Rt[142]=It("");Rt[143]=It("");Rt[144]=It("");Rt[145]=It("");Rt[146]=It("");Rt[147]=It("");Rt[148]=It("");Rt[149]=It("");Rt[150]=It("");Rt[151]=It("");Rt[152]=It("");Rt[153]=It("");Rt[154]=It("");Rt[155]=It("");Rt[156]=It("");Rt[157]=It("");Rt[158]=It("");Rt[159]=It("");Rt[160]=It("");Rt[173]=It("");var sQ=function(n){for(var e=new Array(n.length),t=0,r=n.length;t<r;t++)e[t]=Rt[n[t]];return String.fromCodePoint.apply(String,e)},Sh=function(){function n(e){this.populate=e,this.value=void 0}return n.prototype.getValue=function(){return this.value},n.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},n.prototype.invalidate=function(){this.value=void 0},n.populatedBy=function(e){return new n(e)},n}(),sl=function(n){Ve(e,n);function e(t,r){var s=this,i="Method "+t+"."+r+"() not implemented";return s=n.call(this,i)||this,s}return e}(Error),D5=function(n){Ve(e,n);function e(t){var r=this,s="Cannot construct "+t+" - it has a private constructor";return r=n.call(this,s)||this,r}return e}(Error),yN=function(n){Ve(e,n);function e(t,r){var s=this,i=function(l){var c,u;return(c=l==null?void 0:l.name)!==null&&c!==void 0?c:(u=l==null?void 0:l.constructor)===null||u===void 0?void 0:u.name},a=Array.isArray(t)?t.map(i):[i(t)],o="Expected instance of "+a.join(" or ")+", "+("but got instance of "+(r&&i(r)));return s=n.call(this,o)||this,s}return e}(Error),Jve=function(n){Ve(e,n);function e(t){var r=this,s=t+" stream encoding not supported";return r=n.call(this,s)||this,r}return e}(Error),F5=function(n){Ve(e,n);function e(t,r){var s=this,i="Cannot call "+t+"."+r+"() more than once";return s=n.call(this,i)||this,s}return e}(Error);(function(n){Ve(e,n);function e(t){var r=this,s="Missing catalog (ref="+t+")";return r=n.call(this,s)||this,r}return e})(Error);var exe=function(n){Ve(e,n);function e(){var t=this,r="Can't embed page with missing Contents";return t=n.call(this,r)||this,t}return e}(Error),txe=function(n){Ve(e,n);function e(t){var r,s,i,a=this,o=(i=(s=(r=t==null?void 0:t.contructor)===null||r===void 0?void 0:r.name)!==null&&s!==void 0?s:t==null?void 0:t.name)!==null&&i!==void 0?i:t,l="Unrecognized stream type: "+o;return a=n.call(this,l)||this,a}return e}(Error),nxe=function(n){Ve(e,n);function e(){var t=this,r="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return t=n.call(this,r)||this,t}return e}(Error),rxe=function(n){Ve(e,n);function e(t){var r=this,s="Attempted to convert PDFArray with "+t+" elements to rectangle, but must have exactly 4 elements.";return r=n.call(this,s)||this,r}return e}(Error),iQ=function(n){Ve(e,n);function e(t){var r=this,s='Attempted to convert "'+t+'" to a date, but it does not match the PDF date string format.';return r=n.call(this,s)||this,r}return e}(Error),EW=function(n){Ve(e,n);function e(t,r){var s=this,i="Invalid targetIndex specified: targetIndex="+t+" must be less than Count="+r;return s=n.call(this,i)||this,s}return e}(Error),IW=function(n){Ve(e,n);function e(t,r){var s=this,i="Failed to "+r+" at targetIndex="+t+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return s=n.call(this,i)||this,s}return e}(Error),vN=function(n){Ve(e,n);function e(t,r,s){var i=this,a="index should be at least "+r+" and at most "+s+", but was actually "+t;return i=n.call(this,a)||this,i}return e}(Error),P5=function(n){Ve(e,n);function e(){var t=this,r="Attempted to set invalid field value";return t=n.call(this,r)||this,t}return e}(Error),sxe=function(n){Ve(e,n);function e(){var t=this,r="Attempted to select multiple values for single-select field";return t=n.call(this,r)||this,t}return e}(Error),ixe=function(n){Ve(e,n);function e(t){var r=this,s="No /DA (default appearance) entry found for field: "+t;return r=n.call(this,s)||this,r}return e}(Error),axe=function(n){Ve(e,n);function e(t){var r=this,s="No Tf operator found for DA of field: "+t;return r=n.call(this,s)||this,r}return e}(Error),AW=function(n){Ve(e,n);function e(t,r){var s=this,i="Failed to parse number "+("(line:"+t.line+" col:"+t.column+" offset="+t.offset+'): "'+r+'"');return s=n.call(this,i)||this,s}return e}(Error),fp=function(n){Ve(e,n);function e(t,r){var s=this,i="Failed to parse PDF document "+("(line:"+t.line+" col:"+t.column+" offset="+t.offset+"): "+r);return s=n.call(this,i)||this,s}return e}(Error),oxe=function(n){Ve(e,n);function e(t,r,s){var i=this,a="Expected next byte to be "+r+" but it was actually "+s;return i=n.call(this,t,a)||this,i}return e}(fp),lxe=function(n){Ve(e,n);function e(t,r){var s=this,i="Failed to parse PDF object starting with the following byte: "+r;return s=n.call(this,t,i)||this,s}return e}(fp),cxe=function(n){Ve(e,n);function e(t){var r=this,s="Failed to parse invalid PDF object";return r=n.call(this,t,s)||this,r}return e}(fp),uxe=function(n){Ve(e,n);function e(t){var r=this,s="Failed to parse PDF stream";return r=n.call(this,t,s)||this,r}return e}(fp),hxe=function(n){Ve(e,n);function e(t){var r=this,s="Failed to parse PDF literal string due to unbalanced parenthesis";return r=n.call(this,t,s)||this,r}return e}(fp),dxe=function(n){Ve(e,n);function e(t){var r=this,s="Parser stalled";return r=n.call(this,t,s)||this,r}return e}(fp),fxe=function(n){Ve(e,n);function e(t){var r=this,s="No PDF header found";return r=n.call(this,t,s)||this,r}return e}(fp),pxe=function(n){Ve(e,n);function e(t,r){var s=this,i="Did not find expected keyword '"+oZ(r)+"'";return s=n.call(this,t,i)||this,s}return e}(fp),MM;(function(n){n[n.Null=0]="Null",n[n.Backspace=8]="Backspace",n[n.Tab=9]="Tab",n[n.Newline=10]="Newline",n[n.FormFeed=12]="FormFeed",n[n.CarriageReturn=13]="CarriageReturn",n[n.Space=32]="Space",n[n.ExclamationPoint=33]="ExclamationPoint",n[n.Hash=35]="Hash",n[n.Percent=37]="Percent",n[n.LeftParen=40]="LeftParen",n[n.RightParen=41]="RightParen",n[n.Plus=43]="Plus",n[n.Minus=45]="Minus",n[n.Dash=45]="Dash",n[n.Period=46]="Period",n[n.ForwardSlash=47]="ForwardSlash",n[n.Zero=48]="Zero",n[n.One=49]="One",n[n.Two=50]="Two",n[n.Three=51]="Three",n[n.Four=52]="Four",n[n.Five=53]="Five",n[n.Six=54]="Six",n[n.Seven=55]="Seven",n[n.Eight=56]="Eight",n[n.Nine=57]="Nine",n[n.LessThan=60]="LessThan",n[n.GreaterThan=62]="GreaterThan",n[n.A=65]="A",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.O=79]="O",n[n.P=80]="P",n[n.R=82]="R",n[n.LeftSquareBracket=91]="LeftSquareBracket",n[n.BackSlash=92]="BackSlash",n[n.RightSquareBracket=93]="RightSquareBracket",n[n.a=97]="a",n[n.b=98]="b",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.i=105]="i",n[n.j=106]="j",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.x=120]="x",n[n.LeftCurly=123]="LeftCurly",n[n.RightCurly=125]="RightCurly",n[n.Tilde=126]="Tilde"})(MM||(MM={}));const ee=MM;var bR=function(){function n(e,t){this.major=String(e),this.minor=String(t)}return n.prototype.toString=function(){var e=wh(129);return"%PDF-"+this.major+"."+this.minor+`
%`+e+e+e+e},n.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ee.Percent,e[t++]=ee.P,e[t++]=ee.D,e[t++]=ee.F,e[t++]=ee.Dash,t+=ui(this.major,e,t),e[t++]=ee.Period,t+=ui(this.minor,e,t),e[t++]=ee.Newline,e[t++]=ee.Percent,e[t++]=129,e[t++]=129,e[t++]=129,e[t++]=129,t-r},n.forVersion=function(e,t){return new n(e,t)},n}(),ra=function(){function n(){}return n.prototype.clone=function(e){throw new sl(this.constructor.name,"clone")},n.prototype.toString=function(){throw new sl(this.constructor.name,"toString")},n.prototype.sizeInBytes=function(){throw new sl(this.constructor.name,"sizeInBytes")},n.prototype.copyBytesInto=function(e,t){throw new sl(this.constructor.name,"copyBytesInto")},n}(),Tt=function(n){Ve(e,n);function e(t){var r=n.call(this)||this;return r.numberValue=t,r.stringValue=R0e(t),r}return e.prototype.asNumber=function(){return this.numberValue},e.prototype.value=function(){return this.numberValue},e.prototype.clone=function(){return e.of(this.numberValue)},e.prototype.toString=function(){return this.stringValue},e.prototype.sizeInBytes=function(){return this.stringValue.length},e.prototype.copyBytesInto=function(t,r){return r+=ui(this.stringValue,t,r),this.stringValue.length},e.of=function(t){return new e(t)},e}(ra),wn=function(n){Ve(e,n);function e(t){var r=n.call(this)||this;return r.array=[],r.context=t,r}return e.prototype.size=function(){return this.array.length},e.prototype.push=function(t){this.array.push(t)},e.prototype.insert=function(t,r){this.array.splice(t,0,r)},e.prototype.indexOf=function(t){var r=this.array.indexOf(t);return r===-1?void 0:r},e.prototype.remove=function(t){this.array.splice(t,1)},e.prototype.set=function(t,r){this.array[t]=r},e.prototype.get=function(t){return this.array[t]},e.prototype.lookupMaybe=function(t){for(var r,s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];return(r=this.context).lookupMaybe.apply(r,mn([this.get(t)],s))},e.prototype.lookup=function(t){for(var r,s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];return(r=this.context).lookup.apply(r,mn([this.get(t)],s))},e.prototype.asRectangle=function(){if(this.size()!==4)throw new rxe(this.size());var t=this.lookup(0,Tt).asNumber(),r=this.lookup(1,Tt).asNumber(),s=this.lookup(2,Tt).asNumber(),i=this.lookup(3,Tt).asNumber(),a=t,o=r,l=s-t,c=i-r;return{x:a,y:o,width:l,height:c}},e.prototype.asArray=function(){return this.array.slice()},e.prototype.clone=function(t){for(var r=e.withContext(t||this.context),s=0,i=this.size();s<i;s++)r.push(this.array[s]);return r},e.prototype.toString=function(){for(var t="[ ",r=0,s=this.size();r<s;r++)t+=this.get(r).toString(),t+=" ";return t+="]",t},e.prototype.sizeInBytes=function(){for(var t=3,r=0,s=this.size();r<s;r++)t+=this.get(r).sizeInBytes()+1;return t},e.prototype.copyBytesInto=function(t,r){var s=r;t[r++]=ee.LeftSquareBracket,t[r++]=ee.Space;for(var i=0,a=this.size();i<a;i++)r+=this.get(i).copyBytesInto(t,r),t[r++]=ee.Space;return t[r++]=ee.RightSquareBracket,r-s},e.prototype.scalePDFNumbers=function(t,r){for(var s=0,i=this.size();s<i;s++){var a=this.lookup(s);if(a instanceof Tt){var o=s%2===0?t:r;this.set(s,Tt.of(a.asNumber()*o))}}},e.withContext=function(t){return new e(t)},e}(ra),EO={},DS=function(n){Ve(e,n);function e(t,r){var s=this;if(t!==EO)throw new D5("PDFBool");return s=n.call(this)||this,s.value=r,s}return e.prototype.asBoolean=function(){return this.value},e.prototype.clone=function(){return this},e.prototype.toString=function(){return String(this.value)},e.prototype.sizeInBytes=function(){return this.value?4:5},e.prototype.copyBytesInto=function(t,r){return this.value?(t[r++]=ee.t,t[r++]=ee.r,t[r++]=ee.u,t[r++]=ee.e,4):(t[r++]=ee.f,t[r++]=ee.a,t[r++]=ee.l,t[r++]=ee.s,t[r++]=ee.e,5)},e.True=new e(EO,!0),e.False=new e(EO,!1),e}(ra),bl=new Uint8Array(256);bl[ee.LeftParen]=1;bl[ee.RightParen]=1;bl[ee.LessThan]=1;bl[ee.GreaterThan]=1;bl[ee.LeftSquareBracket]=1;bl[ee.RightSquareBracket]=1;bl[ee.LeftCurly]=1;bl[ee.RightCurly]=1;bl[ee.ForwardSlash]=1;bl[ee.Percent]=1;var qh=new Uint8Array(256);qh[ee.Null]=1;qh[ee.Tab]=1;qh[ee.Newline]=1;qh[ee.FormFeed]=1;qh[ee.CarriageReturn]=1;qh[ee.Space]=1;var O5=new Uint8Array(256);for(var Ow=0,mxe=256;Ow<mxe;Ow++)O5[Ow]=qh[Ow]||bl[Ow]?1:0;O5[ee.Hash]=1;var gxe=function(n){return n.replace(/#([\dABCDEF]{2})/g,function(e,t){return h0e(t)})},yxe=function(n){return n>=ee.ExclamationPoint&&n<=ee.Tilde&&!O5[n]},NW={},_W=new Map,Q=function(n){Ve(e,n);function e(t,r){var s=this;if(t!==NW)throw new D5("PDFName");s=n.call(this)||this;for(var i="/",a=0,o=r.length;a<o;a++){var l=r[a],c=It(l);i+=yxe(c)?l:"#"+fR(c)}return s.encodedName=i,s}return e.prototype.asBytes=function(){for(var t=[],r="",s=!1,i=function(h){h!==void 0&&t.push(h),s=!1},a=1,o=this.encodedName.length;a<o;a++){var l=this.encodedName[a],c=It(l),u=this.encodedName[a+1];s?c>=ee.Zero&&c<=ee.Nine||c>=ee.a&&c<=ee.f||c>=ee.A&&c<=ee.F?(r+=l,(r.length===2||!(u>="0"&&u<="9"||u>="a"&&u<="f"||u>="A"&&u<="F"))&&(i(parseInt(r,16)),r="")):i(c):c===ee.Hash?s=!0:i(c)}return new Uint8Array(t)},e.prototype.decodeText=function(){var t=this.asBytes();return String.fromCharCode.apply(String,Array.from(t))},e.prototype.asString=function(){return this.encodedName},e.prototype.value=function(){return this.encodedName},e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.encodedName},e.prototype.sizeInBytes=function(){return this.encodedName.length},e.prototype.copyBytesInto=function(t,r){return r+=ui(this.encodedName,t,r),this.encodedName.length},e.of=function(t){var r=gxe(t),s=_W.get(r);return s||(s=new e(NW,r),_W.set(r,s)),s},e.Length=e.of("Length"),e.FlateDecode=e.of("FlateDecode"),e.Resources=e.of("Resources"),e.Font=e.of("Font"),e.XObject=e.of("XObject"),e.ExtGState=e.of("ExtGState"),e.Contents=e.of("Contents"),e.Type=e.of("Type"),e.Parent=e.of("Parent"),e.MediaBox=e.of("MediaBox"),e.Page=e.of("Page"),e.Annots=e.of("Annots"),e.TrimBox=e.of("TrimBox"),e.ArtBox=e.of("ArtBox"),e.BleedBox=e.of("BleedBox"),e.CropBox=e.of("CropBox"),e.Rotate=e.of("Rotate"),e.Title=e.of("Title"),e.Author=e.of("Author"),e.Subject=e.of("Subject"),e.Creator=e.of("Creator"),e.Keywords=e.of("Keywords"),e.Producer=e.of("Producer"),e.CreationDate=e.of("CreationDate"),e.ModDate=e.of("ModDate"),e}(ra),vxe=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.asNull=function(){return null},e.prototype.clone=function(){return this},e.prototype.toString=function(){return"null"},e.prototype.sizeInBytes=function(){return 4},e.prototype.copyBytesInto=function(t,r){return t[r++]=ee.n,t[r++]=ee.u,t[r++]=ee.l,t[r++]=ee.l,4},e}(ra);const Aa=new vxe;var Pt=function(n){Ve(e,n);function e(t,r){var s=n.call(this)||this;return s.dict=t,s.context=r,s}return e.prototype.keys=function(){return Array.from(this.dict.keys())},e.prototype.values=function(){return Array.from(this.dict.values())},e.prototype.entries=function(){return Array.from(this.dict.entries())},e.prototype.set=function(t,r){this.dict.set(t,r)},e.prototype.get=function(t,r){r===void 0&&(r=!1);var s=this.dict.get(t);if(!(s===Aa&&!r))return s},e.prototype.has=function(t){var r=this.dict.get(t);return r!==void 0&&r!==Aa},e.prototype.lookupMaybe=function(t){for(var r,s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];var a=s.includes(Aa),o=(r=this.context).lookupMaybe.apply(r,mn([this.get(t,a)],s));if(!(o===Aa&&!a))return o},e.prototype.lookup=function(t){for(var r,s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];var a=s.includes(Aa),o=(r=this.context).lookup.apply(r,mn([this.get(t,a)],s));if(!(o===Aa&&!a))return o},e.prototype.delete=function(t){return this.dict.delete(t)},e.prototype.asMap=function(){return new Map(this.dict)},e.prototype.uniqueKey=function(t){t===void 0&&(t="");for(var r=this.keys(),s=Q.of(this.context.addRandomSuffix(t,10));r.includes(s);)s=Q.of(this.context.addRandomSuffix(t,10));return s},e.prototype.clone=function(t){for(var r=e.withContext(t||this.context),s=this.entries(),i=0,a=s.length;i<a;i++){var o=s[i],l=o[0],c=o[1];r.set(l,c)}return r},e.prototype.toString=function(){for(var t=`<<
`,r=this.entries(),s=0,i=r.length;s<i;s++){var a=r[s],o=a[0],l=a[1];t+=o.toString()+" "+l.toString()+`
`}return t+=">>",t},e.prototype.sizeInBytes=function(){for(var t=5,r=this.entries(),s=0,i=r.length;s<i;s++){var a=r[s],o=a[0],l=a[1];t+=o.sizeInBytes()+l.sizeInBytes()+2}return t},e.prototype.copyBytesInto=function(t,r){var s=r;t[r++]=ee.LessThan,t[r++]=ee.LessThan,t[r++]=ee.Newline;for(var i=this.entries(),a=0,o=i.length;a<o;a++){var l=i[a],c=l[0],u=l[1];r+=c.copyBytesInto(t,r),t[r++]=ee.Space,r+=u.copyBytesInto(t,r),t[r++]=ee.Newline}return t[r++]=ee.GreaterThan,t[r++]=ee.GreaterThan,r-s},e.withContext=function(t){return new e(new Map,t)},e.fromMapWithContext=function(t,r){return new e(t,r)},e}(ra),wo=function(n){Ve(e,n);function e(t){var r=n.call(this)||this;return r.dict=t,r}return e.prototype.clone=function(t){throw new sl(this.constructor.name,"clone")},e.prototype.getContentsString=function(){throw new sl(this.constructor.name,"getContentsString")},e.prototype.getContents=function(){throw new sl(this.constructor.name,"getContents")},e.prototype.getContentsSize=function(){throw new sl(this.constructor.name,"getContentsSize")},e.prototype.updateDict=function(){var t=this.getContentsSize();this.dict.set(Q.Length,Tt.of(t))},e.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},e.prototype.toString=function(){this.updateDict();var t=this.dict.toString();return t+=`
stream
`,t+=this.getContentsString(),t+=`
endstream`,t},e.prototype.copyBytesInto=function(t,r){this.updateDict();var s=r;r+=this.dict.copyBytesInto(t,r),t[r++]=ee.Newline,t[r++]=ee.s,t[r++]=ee.t,t[r++]=ee.r,t[r++]=ee.e,t[r++]=ee.a,t[r++]=ee.m,t[r++]=ee.Newline;for(var i=this.getContents(),a=0,o=i.length;a<o;a++)t[r++]=i[a];return t[r++]=ee.Newline,t[r++]=ee.e,t[r++]=ee.n,t[r++]=ee.d,t[r++]=ee.s,t[r++]=ee.t,t[r++]=ee.r,t[r++]=ee.e,t[r++]=ee.a,t[r++]=ee.m,r-s},e}(ra),FS=function(n){Ve(e,n);function e(t,r){var s=n.call(this,t)||this;return s.contents=r,s}return e.prototype.asUint8Array=function(){return this.contents.slice()},e.prototype.clone=function(t){return e.of(this.dict.clone(t),this.contents.slice())},e.prototype.getContentsString=function(){return oZ(this.contents)},e.prototype.getContents=function(){return this.contents},e.prototype.getContentsSize=function(){return this.contents.length},e.of=function(t,r){return new e(t,r)},e}(wo),RW={},DW=new Map,Rn=function(n){Ve(e,n);function e(t,r,s){var i=this;if(t!==RW)throw new D5("PDFRef");return i=n.call(this)||this,i.objectNumber=r,i.generationNumber=s,i.tag=r+" "+s+" R",i}return e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.tag},e.prototype.sizeInBytes=function(){return this.tag.length},e.prototype.copyBytesInto=function(t,r){return r+=ui(this.tag,t,r),this.tag.length},e.of=function(t,r){r===void 0&&(r=0);var s=t+" "+r+" R",i=DW.get(s);return i||(i=new e(RW,t,r),DW.set(s,i)),i},e}(ra),hn=function(){function n(e,t){this.name=e,this.args=t||[]}return n.prototype.clone=function(e){for(var t=new Array(this.args.length),r=0,s=t.length;r<s;r++){var i=this.args[r];t[r]=i instanceof ra?i.clone(e):i}return n.of(this.name,t)},n.prototype.toString=function(){for(var e="",t=0,r=this.args.length;t<r;t++)e+=String(this.args[t])+" ";return e+=this.name,e},n.prototype.sizeInBytes=function(){for(var e=0,t=0,r=this.args.length;t<r;t++){var s=this.args[t];e+=(s instanceof ra?s.sizeInBytes():s.length)+1}return e+=this.name.length,e},n.prototype.copyBytesInto=function(e,t){for(var r=t,s=0,i=this.args.length;s<i;s++){var a=this.args[s];a instanceof ra?t+=a.copyBytesInto(e,t):t+=ui(a,e,t),e[t++]=ee.Space}return t+=ui(this.name,e,t),t-r},n.of=function(e,t){return new n(e,t)},n}(),$M;(function(n){n.NonStrokingColor="sc",n.NonStrokingColorN="scn",n.NonStrokingColorRgb="rg",n.NonStrokingColorGray="g",n.NonStrokingColorCmyk="k",n.NonStrokingColorspace="cs",n.StrokingColor="SC",n.StrokingColorN="SCN",n.StrokingColorRgb="RG",n.StrokingColorGray="G",n.StrokingColorCmyk="K",n.StrokingColorspace="CS",n.BeginMarkedContentSequence="BDC",n.BeginMarkedContent="BMC",n.EndMarkedContent="EMC",n.MarkedContentPointWithProps="DP",n.MarkedContentPoint="MP",n.DrawObject="Do",n.ConcatTransformationMatrix="cm",n.PopGraphicsState="Q",n.PushGraphicsState="q",n.SetFlatness="i",n.SetGraphicsStateParams="gs",n.SetLineCapStyle="J",n.SetLineDashPattern="d",n.SetLineJoinStyle="j",n.SetLineMiterLimit="M",n.SetLineWidth="w",n.SetTextMatrix="Tm",n.SetRenderingIntent="ri",n.AppendRectangle="re",n.BeginInlineImage="BI",n.BeginInlineImageData="ID",n.EndInlineImage="EI",n.ClipEvenOdd="W*",n.ClipNonZero="W",n.CloseAndStroke="s",n.CloseFillEvenOddAndStroke="b*",n.CloseFillNonZeroAndStroke="b",n.ClosePath="h",n.AppendBezierCurve="c",n.CurveToReplicateFinalPoint="y",n.CurveToReplicateInitialPoint="v",n.EndPath="n",n.FillEvenOddAndStroke="B*",n.FillEvenOdd="f*",n.FillNonZeroAndStroke="B",n.FillNonZero="f",n.LegacyFillNonZero="F",n.LineTo="l",n.MoveTo="m",n.ShadingFill="sh",n.StrokePath="S",n.BeginText="BT",n.EndText="ET",n.MoveText="Td",n.MoveTextSetLeading="TD",n.NextLine="T*",n.SetCharacterSpacing="Tc",n.SetFontAndSize="Tf",n.SetTextHorizontalScaling="Tz",n.SetTextLineHeight="TL",n.SetTextRenderingMode="Tr",n.SetTextRise="Ts",n.SetWordSpacing="Tw",n.ShowText="Tj",n.ShowTextAdjusted="TJ",n.ShowTextLine="'",n.ShowTextLineAndSpace='"',n.Type3D0="d0",n.Type3D1="d1",n.BeginCompatibilitySection="BX",n.EndCompatibilitySection="EX"})($M||($M={}));const gn=$M;var L5=function(n){Ve(e,n);function e(t,r){var s=n.call(this,t)||this;return s.computeContents=function(){var i=s.getUnencodedContents();return s.encode?yR.deflate(i):i},s.encode=r,r&&t.set(Q.of("Filter"),Q.of("FlateDecode")),s.contentsCache=Sh.populatedBy(s.computeContents),s}return e.prototype.getContents=function(){return this.contentsCache.access()},e.prototype.getContentsSize=function(){return this.contentsCache.access().length},e.prototype.getUnencodedContents=function(){throw new sl(this.constructor.name,"getUnencodedContents")},e}(wo),G1=function(n){Ve(e,n);function e(t,r,s){s===void 0&&(s=!0);var i=n.call(this,t,s)||this;return i.operators=r,i}return e.prototype.push=function(){for(var t,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];(t=this.operators).push.apply(t,r)},e.prototype.clone=function(t){for(var r=new Array(this.operators.length),s=0,i=this.operators.length;s<i;s++)r[s]=this.operators[s].clone(t);var a=this,o=a.dict,l=a.encode;return e.of(o.clone(t),r,l)},e.prototype.getContentsString=function(){for(var t="",r=0,s=this.operators.length;r<s;r++)t+=this.operators[r]+`
`;return t},e.prototype.getUnencodedContents=function(){for(var t=new Uint8Array(this.getUnencodedContentsSize()),r=0,s=0,i=this.operators.length;s<i;s++)r+=this.operators[s].copyBytesInto(t,r),t[r++]=ee.Newline;return t},e.prototype.getUnencodedContentsSize=function(){for(var t=0,r=0,s=this.operators.length;r<s;r++)t+=this.operators[r].sizeInBytes()+1;return t},e.of=function(t,r,s){return s===void 0&&(s=!0),new e(t,r,s)},e}(L5),xxe=function(){function n(e){this.seed=e}return n.prototype.nextInt=function(){var e=Math.sin(this.seed++)*1e4;return e-Math.floor(e)},n.withSeed=function(e){return new n(e)},n}(),bxe=function(n,e){var t=n[0],r=e[0];return t.objectNumber-r.objectNumber},zM=function(){function n(){this.largestObjectNumber=0,this.header=bR.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=xxe.withSeed(1)}return n.prototype.assign=function(e,t){this.indirectObjects.set(e,t),e.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=e.objectNumber)},n.prototype.nextRef=function(){return this.largestObjectNumber+=1,Rn.of(this.largestObjectNumber)},n.prototype.register=function(e){var t=this.nextRef();return this.assign(t,e),t},n.prototype.delete=function(e){return this.indirectObjects.delete(e)},n.prototype.lookupMaybe=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var s=t.includes(Aa),i=e instanceof Rn?this.indirectObjects.get(e):e;if(!(!i||i===Aa&&!s)){for(var a=0,o=t.length;a<o;a++){var l=t[a];if(l===Aa){if(i===Aa)return i}else if(i instanceof l)return i}throw new yN(t,i)}},n.prototype.lookup=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var s=e instanceof Rn?this.indirectObjects.get(e):e;if(t.length===0)return s;for(var i=0,a=t.length;i<a;i++){var o=t[i];if(o===Aa){if(s===Aa)return s}else if(s instanceof o)return s}throw new yN(t,s)},n.prototype.getObjectRef=function(e){for(var t=Array.from(this.indirectObjects.entries()),r=0,s=t.length;r<s;r++){var i=t[r],a=i[0],o=i[1];if(o===e)return a}},n.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(bxe)},n.prototype.obj=function(e){if(e instanceof ra)return e;if(e==null)return Aa;if(typeof e=="string")return Q.of(e);if(typeof e=="number")return Tt.of(e);if(typeof e=="boolean")return e?DS.True:DS.False;if(Array.isArray(e)){for(var t=wn.withContext(this),r=0,s=e.length;r<s;r++)t.push(this.obj(e[r]));return t}else{for(var i=Pt.withContext(this),a=Object.keys(e),r=0,s=a.length;r<s;r++){var o=a[r],l=e[o];l!==void 0&&i.set(Q.of(o),this.obj(l))}return i}},n.prototype.stream=function(e,t){return t===void 0&&(t={}),FS.of(this.obj(t),AM(e))},n.prototype.flateStream=function(e,t){return t===void 0&&(t={}),this.stream(yR.deflate(AM(e)),At(At({},t),{Filter:"FlateDecode"}))},n.prototype.contentStream=function(e,t){return t===void 0&&(t={}),G1.of(this.obj(t),e)},n.prototype.formXObject=function(e,t){return t===void 0&&(t={}),this.contentStream(e,At(At({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},t),{Type:"XObject",Subtype:"Form"}))},n.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var e=this.obj({}),t=hn.of(gn.PushGraphicsState),r=G1.of(e,[t]);return this.pushGraphicsStateContentStreamRef=this.register(r),this.pushGraphicsStateContentStreamRef},n.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var e=this.obj({}),t=hn.of(gn.PopGraphicsState),r=G1.of(e,[t]);return this.popGraphicsStateContentStreamRef=this.register(r),this.popGraphicsStateContentStreamRef},n.prototype.addRandomSuffix=function(e,t){return t===void 0&&(t=4),e+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,t))},n.create=function(){return new n},n}(),kh=function(n){Ve(e,n);function e(t,r,s){s===void 0&&(s=!0);var i=n.call(this,t,r)||this;return i.normalized=!1,i.autoNormalizeCTM=s,i}return e.prototype.clone=function(t){for(var r=e.fromMapWithContext(new Map,t||this.context,this.autoNormalizeCTM),s=this.entries(),i=0,a=s.length;i<a;i++){var o=s[i],l=o[0],c=o[1];r.set(l,c)}return r},e.prototype.Parent=function(){return this.lookupMaybe(Q.Parent,Pt)},e.prototype.Contents=function(){return this.lookup(Q.of("Contents"))},e.prototype.Annots=function(){return this.lookupMaybe(Q.Annots,wn)},e.prototype.BleedBox=function(){return this.lookupMaybe(Q.BleedBox,wn)},e.prototype.TrimBox=function(){return this.lookupMaybe(Q.TrimBox,wn)},e.prototype.ArtBox=function(){return this.lookupMaybe(Q.ArtBox,wn)},e.prototype.Resources=function(){var t=this.getInheritableAttribute(Q.Resources);return this.context.lookupMaybe(t,Pt)},e.prototype.MediaBox=function(){var t=this.getInheritableAttribute(Q.MediaBox);return this.context.lookup(t,wn)},e.prototype.CropBox=function(){var t=this.getInheritableAttribute(Q.CropBox);return this.context.lookupMaybe(t,wn)},e.prototype.Rotate=function(){var t=this.getInheritableAttribute(Q.Rotate);return this.context.lookupMaybe(t,Tt)},e.prototype.getInheritableAttribute=function(t){var r;return this.ascend(function(s){r||(r=s.get(t))}),r},e.prototype.setParent=function(t){this.set(Q.Parent,t)},e.prototype.addContentStream=function(t){var r=this.normalizedEntries().Contents||this.context.obj([]);this.set(Q.Contents,r),r.push(t)},e.prototype.wrapContentStreams=function(t,r){var s=this.Contents();return s instanceof wn?(s.insert(0,t),s.push(r),!0):!1},e.prototype.addAnnot=function(t){var r=this.normalizedEntries().Annots;r.push(t)},e.prototype.removeAnnot=function(t){var r=this.normalizedEntries().Annots,s=r.indexOf(t);s!==void 0&&r.remove(s)},e.prototype.setFontDictionary=function(t,r){var s=this.normalizedEntries().Font;s.set(t,r)},e.prototype.newFontDictionaryKey=function(t){var r=this.normalizedEntries().Font;return r.uniqueKey(t)},e.prototype.newFontDictionary=function(t,r){var s=this.newFontDictionaryKey(t);return this.setFontDictionary(s,r),s},e.prototype.setXObject=function(t,r){var s=this.normalizedEntries().XObject;s.set(t,r)},e.prototype.newXObjectKey=function(t){var r=this.normalizedEntries().XObject;return r.uniqueKey(t)},e.prototype.newXObject=function(t,r){var s=this.newXObjectKey(t);return this.setXObject(s,r),s},e.prototype.setExtGState=function(t,r){var s=this.normalizedEntries().ExtGState;s.set(t,r)},e.prototype.newExtGStateKey=function(t){var r=this.normalizedEntries().ExtGState;return r.uniqueKey(t)},e.prototype.newExtGState=function(t,r){var s=this.newExtGStateKey(t);return this.setExtGState(s,r),s},e.prototype.ascend=function(t){t(this);var r=this.Parent();r&&r.ascend(t)},e.prototype.normalize=function(){if(!this.normalized){var t=this.context,r=this.get(Q.Contents),s=this.context.lookup(r);s instanceof wo&&this.set(Q.Contents,t.obj([r])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var i=this.getInheritableAttribute(Q.Resources),a=t.lookupMaybe(i,Pt)||t.obj({});this.set(Q.Resources,a);var o=a.lookupMaybe(Q.Font,Pt)||t.obj({});a.set(Q.Font,o);var l=a.lookupMaybe(Q.XObject,Pt)||t.obj({});a.set(Q.XObject,l);var c=a.lookupMaybe(Q.ExtGState,Pt)||t.obj({});a.set(Q.ExtGState,c);var u=this.Annots()||t.obj([]);this.set(Q.Annots,u),this.normalized=!0}},e.prototype.normalizedEntries=function(){this.normalize();var t=this.Annots(),r=this.Resources(),s=this.Contents();return{Annots:t,Resources:r,Contents:s,Font:r.lookup(Q.Font,Pt),XObject:r.lookup(Q.XObject,Pt),ExtGState:r.lookup(Q.ExtGState,Pt)}},e.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],e.withContextAndParent=function(t,r){var s=new Map;return s.set(Q.Type,Q.Page),s.set(Q.Parent,r),s.set(Q.Resources,t.obj({})),s.set(Q.MediaBox,t.obj([0,0,612,792])),new e(s,t,!1)},e.fromMapWithContext=function(t,r,s){return s===void 0&&(s=!0),new e(t,r,s)},e}(Pt),FW=function(){function n(e,t){var r=this;this.traversedObjects=new Map,this.copy=function(s){return s instanceof kh?r.copyPDFPage(s):s instanceof Pt?r.copyPDFDict(s):s instanceof wn?r.copyPDFArray(s):s instanceof wo?r.copyPDFStream(s):s instanceof Rn?r.copyPDFIndirectObject(s):s.clone()},this.copyPDFPage=function(s){for(var i=s.clone(),a=kh.InheritableEntries,o=0,l=a.length;o<l;o++){var c=Q.of(a[o]),u=i.getInheritableAttribute(c);!i.get(c)&&u&&i.set(c,u)}return i.delete(Q.of("Parent")),r.copyPDFDict(i)},this.copyPDFDict=function(s){if(r.traversedObjects.has(s))return r.traversedObjects.get(s);var i=s.clone(r.dest);r.traversedObjects.set(s,i);for(var a=s.entries(),o=0,l=a.length;o<l;o++){var c=a[o],u=c[0],h=c[1];i.set(u,r.copy(h))}return i},this.copyPDFArray=function(s){if(r.traversedObjects.has(s))return r.traversedObjects.get(s);var i=s.clone(r.dest);r.traversedObjects.set(s,i);for(var a=0,o=s.size();a<o;a++){var l=s.get(a);i.set(a,r.copy(l))}return i},this.copyPDFStream=function(s){if(r.traversedObjects.has(s))return r.traversedObjects.get(s);var i=s.clone(r.dest);r.traversedObjects.set(s,i);for(var a=s.dict.entries(),o=0,l=a.length;o<l;o++){var c=a[o],u=c[0],h=c[1];i.dict.set(u,r.copy(h))}return i},this.copyPDFIndirectObject=function(s){var i=r.traversedObjects.has(s);if(!i){var a=r.dest.nextRef();r.traversedObjects.set(s,a);var o=r.src.lookup(s);if(o){var l=r.copy(o);r.dest.assign(a,l)}}return r.traversedObjects.get(s)},this.src=e,this.dest=t}return n.for=function(e,t){return new n(e,t)},n}(),aQ=function(){function n(e){this.subsections=e?[[e]]:[],this.chunkIdx=0,this.chunkLength=e?1:0}return n.prototype.addEntry=function(e,t){this.append({ref:e,offset:t,deleted:!1})},n.prototype.addDeletedEntry=function(e,t){this.append({ref:e,offset:t,deleted:!0})},n.prototype.toString=function(){for(var e=`xref
`,t=0,r=this.subsections.length;t<r;t++){var s=this.subsections[t];e+=s[0].ref.objectNumber+" "+s.length+`
`;for(var i=0,a=s.length;i<a;i++){var o=s[i];e+=Hl(String(o.offset),10,"0"),e+=" ",e+=Hl(String(o.ref.generationNumber),5,"0"),e+=" ",e+=o.deleted?"f":"n",e+=` 
`}}return e},n.prototype.sizeInBytes=function(){for(var e=5,t=0,r=this.subsections.length;t<r;t++){var s=this.subsections[t],i=s.length,a=s[0];e+=2,e+=String(a.ref.objectNumber).length,e+=String(i).length,e+=20*i}return e},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ee.x,e[t++]=ee.r,e[t++]=ee.e,e[t++]=ee.f,e[t++]=ee.Newline,t+=this.copySubsectionsIntoBuffer(this.subsections,e,t),t-r},n.prototype.copySubsectionsIntoBuffer=function(e,t,r){for(var s=r,i=e.length,a=0;a<i;a++){var o=this.subsections[a],l=String(o[0].ref.objectNumber);r+=ui(l,t,r),t[r++]=ee.Space;var c=String(o.length);r+=ui(c,t,r),t[r++]=ee.Newline,r+=this.copyEntriesIntoBuffer(o,t,r)}return r-s},n.prototype.copyEntriesIntoBuffer=function(e,t,r){for(var s=e.length,i=0;i<s;i++){var a=e[i],o=Hl(String(a.offset),10,"0");r+=ui(o,t,r),t[r++]=ee.Space;var l=Hl(String(a.ref.generationNumber),5,"0");r+=ui(l,t,r),t[r++]=ee.Space,t[r++]=a.deleted?ee.f:ee.n,t[r++]=ee.Space,t[r++]=ee.Newline}return 20*s},n.prototype.append=function(e){if(this.chunkLength===0){this.subsections.push([e]),this.chunkIdx=0,this.chunkLength=1;return}var t=this.subsections[this.chunkIdx],r=t[this.chunkLength-1];e.ref.objectNumber-r.ref.objectNumber>1?(this.subsections.push([e]),this.chunkIdx+=1,this.chunkLength=1):(t.push(e),this.chunkLength+=1)},n.create=function(){return new n({ref:Rn.of(0,65535),offset:0,deleted:!0})},n.createEmpty=function(){return new n},n}(),M5=function(){function n(e){this.lastXRefOffset=String(e)}return n.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},n.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ee.s,e[t++]=ee.t,e[t++]=ee.a,e[t++]=ee.r,e[t++]=ee.t,e[t++]=ee.x,e[t++]=ee.r,e[t++]=ee.e,e[t++]=ee.f,e[t++]=ee.Newline,t+=ui(this.lastXRefOffset,e,t),e[t++]=ee.Newline,e[t++]=ee.Percent,e[t++]=ee.Percent,e[t++]=ee.E,e[t++]=ee.O,e[t++]=ee.F,t-r},n.forLastCrossRefSectionOffset=function(e){return new n(e)},n}(),wxe=function(){function n(e){this.dict=e}return n.prototype.toString=function(){return`trailer
`+this.dict.toString()},n.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ee.t,e[t++]=ee.r,e[t++]=ee.a,e[t++]=ee.i,e[t++]=ee.l,e[t++]=ee.e,e[t++]=ee.r,e[t++]=ee.Newline,t+=this.dict.copyBytesInto(e,t),t-r},n.of=function(e){return new n(e)},n}(),oQ=function(n){Ve(e,n);function e(t,r,s){s===void 0&&(s=!0);var i=n.call(this,t.obj({}),s)||this;return i.objects=r,i.offsets=i.computeObjectOffsets(),i.offsetsString=i.computeOffsetsString(),i.dict.set(Q.of("Type"),Q.of("ObjStm")),i.dict.set(Q.of("N"),Tt.of(i.objects.length)),i.dict.set(Q.of("First"),Tt.of(i.offsetsString.length)),i}return e.prototype.getObjectsCount=function(){return this.objects.length},e.prototype.clone=function(t){return e.withContextAndObjects(t||this.dict.context,this.objects.slice(),this.encode)},e.prototype.getContentsString=function(){for(var t=this.offsetsString,r=0,s=this.objects.length;r<s;r++){var i=this.objects[r],a=i[1];t+=a+`
`}return t},e.prototype.getUnencodedContents=function(){for(var t=new Uint8Array(this.getUnencodedContentsSize()),r=ui(this.offsetsString,t,0),s=0,i=this.objects.length;s<i;s++){var a=this.objects[s],o=a[1];r+=o.copyBytesInto(t,r),t[r++]=ee.Newline}return t},e.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+pN(this.offsets)[1]+pN(this.objects)[1].sizeInBytes()+1},e.prototype.computeOffsetsString=function(){for(var t="",r=0,s=this.offsets.length;r<s;r++){var i=this.offsets[r],a=i[0],o=i[1];t+=a+" "+o+" "}return t},e.prototype.computeObjectOffsets=function(){for(var t=0,r=new Array(this.objects.length),s=0,i=this.objects.length;s<i;s++){var a=this.objects[s],o=a[0],l=a[1];r[s]=[o.objectNumber,t],t+=l.sizeInBytes()+1}return r},e.withContextAndObjects=function(t,r,s){return s===void 0&&(s=!0),new e(t,r,s)},e}(L5),lQ=function(){function n(e,t){var r=this;this.parsedObjects=0,this.shouldWaitForTick=function(s){return r.parsedObjects+=s,r.parsedObjects%r.objectsPerTick===0},this.context=e,this.objectsPerTick=t}return n.prototype.serializeToBuffer=function(){return Mt(this,void 0,void 0,function(){var e,t,r,s,i,a,o,l,c,u,h,d,f,p,m,y,g;return $t(this,function(v){switch(v.label){case 0:return[4,this.computeBufferSize()];case 1:e=v.sent(),t=e.size,r=e.header,s=e.indirectObjects,i=e.xref,a=e.trailerDict,o=e.trailer,l=0,c=new Uint8Array(t),l+=r.copyBytesInto(c,l),c[l++]=ee.Newline,c[l++]=ee.Newline,u=0,h=s.length,v.label=2;case 2:return u<h?(d=s[u],f=d[0],p=d[1],m=String(f.objectNumber),l+=ui(m,c,l),c[l++]=ee.Space,y=String(f.generationNumber),l+=ui(y,c,l),c[l++]=ee.Space,c[l++]=ee.o,c[l++]=ee.b,c[l++]=ee.j,c[l++]=ee.Newline,l+=p.copyBytesInto(c,l),c[l++]=ee.Newline,c[l++]=ee.e,c[l++]=ee.n,c[l++]=ee.d,c[l++]=ee.o,c[l++]=ee.b,c[l++]=ee.j,c[l++]=ee.Newline,c[l++]=ee.Newline,g=p instanceof oQ?p.getObjectsCount():1,this.shouldWaitForTick(g)?[4,cx()]:[3,4]):[3,5];case 3:v.sent(),v.label=4;case 4:return u++,[3,2];case 5:return i&&(l+=i.copyBytesInto(c,l),c[l++]=ee.Newline),a&&(l+=a.copyBytesInto(c,l),c[l++]=ee.Newline,c[l++]=ee.Newline),l+=o.copyBytesInto(c,l),[2,c]}})})},n.prototype.computeIndirectObjectSize=function(e){var t=e[0],r=e[1],s=t.sizeInBytes()+3,i=r.sizeInBytes()+9;return s+i},n.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},n.prototype.computeBufferSize=function(){return Mt(this,void 0,void 0,function(){var e,t,r,s,i,a,o,l,c,u,h;return $t(this,function(d){switch(d.label){case 0:e=bR.forVersion(1,7),t=e.sizeInBytes()+2,r=aQ.create(),s=this.context.enumerateIndirectObjects(),i=0,a=s.length,d.label=1;case 1:return i<a?(o=s[i],l=o[0],r.addEntry(l,t),t+=this.computeIndirectObjectSize(o),this.shouldWaitForTick(1)?[4,cx()]:[3,3]):[3,4];case 2:d.sent(),d.label=3;case 3:return i++,[3,1];case 4:return c=t,t+=r.sizeInBytes()+1,u=wxe.of(this.createTrailerDict()),t+=u.sizeInBytes()+2,h=M5.forLastCrossRefSectionOffset(c),t+=h.sizeInBytes(),[2,{size:t,header:e,indirectObjects:s,xref:r,trailerDict:u,trailer:h}]}})})},n.forContext=function(e,t){return new n(e,t)},n}(),cQ=function(n){Ve(e,n);function e(t){var r=n.call(this)||this;return r.data=t,r}return e.prototype.clone=function(){return e.of(this.data.slice())},e.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},e.prototype.sizeInBytes=function(){return this.data.length},e.prototype.copyBytesInto=function(t,r){for(var s=this.data.length,i=0;i<s;i++)t[r++]=this.data[i];return s},e.of=function(t){return new e(t)},e}(ra),bd;(function(n){n[n.Deleted=0]="Deleted",n[n.Uncompressed=1]="Uncompressed",n[n.Compressed=2]="Compressed"})(bd||(bd={}));var Sxe=function(n){Ve(e,n);function e(t,r,s){s===void 0&&(s=!0);var i=n.call(this,t,s)||this;return i.computeIndex=function(){for(var a=[],o=0,l=0,c=i.entries.length;l<c;l++){var u=i.entries[l],h=i.entries[l-1];l===0?a.push(u.ref.objectNumber):u.ref.objectNumber-h.ref.objectNumber>1&&(a.push(o),a.push(u.ref.objectNumber),o=0),o+=1}return a.push(o),a},i.computeEntryTuples=function(){for(var a=new Array(i.entries.length),o=0,l=i.entries.length;o<l;o++){var c=i.entries[o];if(c.type===bd.Deleted){var u=c.type,h=c.nextFreeObjectNumber,d=c.ref;a[o]=[u,h,d.generationNumber]}if(c.type===bd.Uncompressed){var u=c.type,f=c.offset,d=c.ref;a[o]=[u,f,d.generationNumber]}if(c.type===bd.Compressed){var u=c.type,p=c.objectStreamRef,m=c.index;a[o]=[u,p.objectNumber,m]}}return a},i.computeMaxEntryByteWidths=function(){for(var a=i.entryTuplesCache.access(),o=[0,0,0],l=0,c=a.length;l<c;l++){var u=a[l],h=u[0],d=u[1],f=u[2],p=uA(h),m=uA(d),y=uA(f);p>o[0]&&(o[0]=p),m>o[1]&&(o[1]=m),y>o[2]&&(o[2]=y)}return o},i.entries=r||[],i.entryTuplesCache=Sh.populatedBy(i.computeEntryTuples),i.maxByteWidthsCache=Sh.populatedBy(i.computeMaxEntryByteWidths),i.indexCache=Sh.populatedBy(i.computeIndex),t.set(Q.of("Type"),Q.of("XRef")),i}return e.prototype.addDeletedEntry=function(t,r){var s=bd.Deleted;this.entries.push({type:s,ref:t,nextFreeObjectNumber:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addUncompressedEntry=function(t,r){var s=bd.Uncompressed;this.entries.push({type:s,ref:t,offset:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addCompressedEntry=function(t,r,s){var i=bd.Compressed;this.entries.push({type:i,ref:t,objectStreamRef:r,index:s}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.clone=function(t){var r=this,s=r.dict,i=r.entries,a=r.encode;return e.of(s.clone(t),i.slice(),a)},e.prototype.getContentsString=function(){for(var t=this.entryTuplesCache.access(),r=this.maxByteWidthsCache.access(),s="",i=0,a=t.length;i<a;i++){for(var o=t[i],l=o[0],c=o[1],u=o[2],h=M0($0(l)),d=M0($0(c)),f=M0($0(u)),p=r[0]-1;p>=0;p--)s+=(h[p]||0).toString(2);for(var p=r[1]-1;p>=0;p--)s+=(d[p]||0).toString(2);for(var p=r[2]-1;p>=0;p--)s+=(f[p]||0).toString(2)}return s},e.prototype.getUnencodedContents=function(){for(var t=this.entryTuplesCache.access(),r=this.maxByteWidthsCache.access(),s=new Uint8Array(this.getUnencodedContentsSize()),i=0,a=0,o=t.length;a<o;a++){for(var l=t[a],c=l[0],u=l[1],h=l[2],d=M0($0(c)),f=M0($0(u)),p=M0($0(h)),m=r[0]-1;m>=0;m--)s[i++]=d[m]||0;for(var m=r[1]-1;m>=0;m--)s[i++]=f[m]||0;for(var m=r[2]-1;m>=0;m--)s[i++]=p[m]||0}return s},e.prototype.getUnencodedContentsSize=function(){var t=this.maxByteWidthsCache.access(),r=S0e(t);return r*this.entries.length},e.prototype.updateDict=function(){n.prototype.updateDict.call(this);var t=this.maxByteWidthsCache.access(),r=this.indexCache.access(),s=this.dict.context;this.dict.set(Q.of("W"),s.obj(t)),this.dict.set(Q.of("Index"),s.obj(r))},e.create=function(t,r){r===void 0&&(r=!0);var s=new e(t,[],r);return s.addDeletedEntry(Rn.of(0,65535),0),s},e.of=function(t,r,s){return s===void 0&&(s=!0),new e(t,r,s)},e}(L5),kxe=function(n){Ve(e,n);function e(t,r,s,i){var a=n.call(this,t,r)||this;return a.encodeStreams=s,a.objectsPerStream=i,a}return e.prototype.computeBufferSize=function(){return Mt(this,void 0,void 0,function(){var t,r,s,i,a,o,l,c,p,m,u,g,h,d,y,f,p,m,y,g,v,b,w,C;return $t(this,function(I){switch(I.label){case 0:t=this.context.largestObjectNumber+1,r=bR.forVersion(1,7),s=r.sizeInBytes()+2,i=Sxe.create(this.createTrailerDict(),this.encodeStreams),a=[],o=[],l=[],c=this.context.enumerateIndirectObjects(),p=0,m=c.length,I.label=1;case 1:return p<m?(u=c[p],g=u[0],h=u[1],d=g===this.context.trailerInfo.Encrypt||h instanceof wo||h instanceof cQ||g.generationNumber!==0,d?(a.push(u),i.addUncompressedEntry(g,s),s+=this.computeIndirectObjectSize(u),this.shouldWaitForTick(1)?[4,cx()]:[3,3]):[3,4]):[3,6];case 2:I.sent(),I.label=3;case 3:return[3,5];case 4:y=pN(o),f=pN(l),(!y||y.length%this.objectsPerStream===0)&&(y=[],o.push(y),f=Rn.of(t++),l.push(f)),i.addCompressedEntry(g,f,y.length),y.push(u),I.label=5;case 5:return p++,[3,1];case 6:p=0,m=o.length,I.label=7;case 7:return p<m?(y=o[p],g=l[p],v=oQ.withContextAndObjects(this.context,y,this.encodeStreams),i.addUncompressedEntry(g,s),s+=this.computeIndirectObjectSize([g,v]),a.push([g,v]),this.shouldWaitForTick(y.length)?[4,cx()]:[3,9]):[3,10];case 8:I.sent(),I.label=9;case 9:return p++,[3,7];case 10:return b=Rn.of(t++),i.dict.set(Q.of("Size"),Tt.of(t)),i.addUncompressedEntry(b,s),w=s,s+=this.computeIndirectObjectSize([b,i]),a.push([b,i]),C=M5.forLastCrossRefSectionOffset(w),s+=C.sizeInBytes(),[2,{size:s,header:r,indirectObjects:a,trailer:C}]}})})},e.forContext=function(t,r,s,i){return s===void 0&&(s=!0),i===void 0&&(i=50),new e(t,r,s,i)},e}(lQ),bt=function(n){Ve(e,n);function e(t){var r=n.call(this)||this;return r.value=t,r}return e.prototype.asBytes=function(){for(var t=this.value+(this.value.length%2===1?"0":""),r=t.length,s=new Uint8Array(t.length/2),i=0,a=0;i<r;){var o=parseInt(t.substring(i,i+2),16);s[a]=o,i+=2,a+=1}return s},e.prototype.decodeText=function(){var t=this.asBytes();return fZ(t)?uZ(t):sQ(t)},e.prototype.decodeDate=function(){var t=this.decodeText(),r=aZ(t);if(!r)throw new iQ(t);return r},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"<"+this.value+">"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(t,r){return t[r++]=ee.LessThan,r+=ui(this.value,t,r),t[r++]=ee.GreaterThan,this.value.length+2},e.of=function(t){return new e(t)},e.fromText=function(t){for(var r=E0e(t),s="",i=0,a=r.length;i<a;i++)s+=qk(r[i],4);return new e(s)},e}(ra),xN=function(){function n(e,t){this.encoding=e===RS.ZapfDingbats?OE.ZapfDingbats:e===RS.Symbol?OE.Symbol:OE.WinAnsi,this.font=jve.load(e),this.fontName=this.font.FontName,this.customName=t}return n.prototype.encodeText=function(e){for(var t=this.encodeTextAsGlyphs(e),r=new Array(t.length),s=0,i=t.length;s<i;s++)r[s]=fR(t[s].code);return bt.of(r.join(""))},n.prototype.widthOfTextAtSize=function(e,t){for(var r=this.encodeTextAsGlyphs(e),s=0,i=0,a=r.length;i<a;i++){var o=r[i].name,l=(r[i+1]||{}).name,c=this.font.getXAxisKerningForPair(o,l)||0;s+=this.widthOfGlyph(o)+c}var u=t/1e3;return s*u},n.prototype.heightOfFontAtSize=function(e,t){t===void 0&&(t={});var r=t.descender,s=r===void 0?!0:r,i=this.font,a=i.Ascender,o=i.Descender,l=i.FontBBox,c=a||l[3],u=o||l[1],h=c-u;return s||(h+=o||0),h/1e3*e},n.prototype.sizeOfFontAtHeight=function(e){var t=this.font,r=t.Ascender,s=t.Descender,i=t.FontBBox,a=r||i[3],o=s||i[1];return 1e3*e/(a-o)},n.prototype.embedIntoContext=function(e,t){var r=e.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===OE.WinAnsi?"WinAnsiEncoding":void 0});return t?(e.assign(t,r),t):e.register(r)},n.prototype.widthOfGlyph=function(e){return this.font.getWidthOfGlyph(e)||250},n.prototype.encodeTextAsGlyphs=function(e){for(var t=Array.from(e),r=new Array(t.length),s=0,i=t.length;s<i;s++){var a=u0e(t[s]);r[s]=this.encoding.encodeUnicodeCodePoint(a)}return r},n.for=function(e,t){return new n(e,t)},n}(),Cxe=function(n,e){for(var t=new Array(n.length),r=0,s=n.length;r<s;r++){var i=n[r],a=PW(gA(e(i))),o=PW.apply(void 0,i.codePoints.map(Exe));t[r]=[a,o]}return Txe(t)},Txe=function(n){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+n.length+` beginbfchar
`+n.map(function(e){var t=e[0],r=e[1];return t+" "+r}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},PW=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return"<"+n.join("")+">"},gA=function(n){return qk(n,4)},Exe=function(n){if(I0e(n))return gA(n);if(A0e(n)){var e=lZ(n),t=cZ(n);return""+gA(e)+gA(t)}var r=fR(n),s="0x"+r+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(s)},Ixe=function(n){var e=0,t=function(r){e|=1<<r-1};return n.fixedPitch&&t(1),n.serif&&t(2),t(3),n.script&&t(4),n.nonsymbolic&&t(6),n.italic&&t(7),n.allCap&&t(17),n.smallCap&&t(18),n.forceBold&&t(19),e},Axe=function(n){var e=n["OS/2"]?n["OS/2"].sFamilyClass:0,t=Ixe({fixedPitch:n.post.isFixedPitch,serif:1<=e&&e<=7,script:e===10,italic:n.head.macStyle.italic});return t},_n=function(n){Ve(e,n);function e(t){var r=n.call(this)||this;return r.value=t,r}return e.prototype.asBytes=function(){for(var t=[],r="",s=!1,i=function(h){h!==void 0&&t.push(h),s=!1},a=0,o=this.value.length;a<o;a++){var l=this.value[a],c=It(l),u=this.value[a+1];s?c===ee.Newline||c===ee.CarriageReturn?i():c===ee.n?i(ee.Newline):c===ee.r?i(ee.CarriageReturn):c===ee.t?i(ee.Tab):c===ee.b?i(ee.Backspace):c===ee.f?i(ee.FormFeed):c===ee.LeftParen?i(ee.LeftParen):c===ee.RightParen?i(ee.RightParen):c===ee.Backspace?i(ee.BackSlash):c>=ee.Zero&&c<=ee.Seven?(r+=l,(r.length===3||!(u>="0"&&u<="7"))&&(i(parseInt(r,8)),r="")):i(c):c===ee.BackSlash?s=!0:i(c)}return new Uint8Array(t)},e.prototype.decodeText=function(){var t=this.asBytes();return fZ(t)?uZ(t):sQ(t)},e.prototype.decodeDate=function(){var t=this.decodeText(),r=aZ(t);if(!r)throw new iQ(t);return r},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"("+this.value+")"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(t,r){return t[r++]=ee.LeftParen,r+=ui(this.value,t,r),t[r++]=ee.RightParen,this.value.length+2},e.of=function(t){return new e(t)},e.fromDate=function(t){var r=Hl(String(t.getUTCFullYear()),4,"0"),s=Hl(String(t.getUTCMonth()+1),2,"0"),i=Hl(String(t.getUTCDate()),2,"0"),a=Hl(String(t.getUTCHours()),2,"0"),o=Hl(String(t.getUTCMinutes()),2,"0"),l=Hl(String(t.getUTCSeconds()),2,"0");return new e("D:"+r+s+i+a+o+l+"Z")},e}(ra),$5=function(){function n(e,t,r,s){var i=this;this.allGlyphsInFontSortedById=function(){for(var a=new Array(i.font.characterSet.length),o=0,l=a.length;o<l;o++){var c=i.font.characterSet[o];a[o]=i.font.glyphForCodePoint(c)}return w0e(a.sort(b0e),function(u){return u.id})},this.font=e,this.scale=1e3/this.font.unitsPerEm,this.fontData=t,this.fontName=this.font.postscriptName||"Font",this.customName=r,this.fontFeatures=s,this.baseFontName="",this.glyphCache=Sh.populatedBy(this.allGlyphsInFontSortedById)}return n.for=function(e,t,r,s){return Mt(this,void 0,void 0,function(){var i;return $t(this,function(a){switch(a.label){case 0:return[4,e.create(t)];case 1:return i=a.sent(),[2,new n(i,t,r,s)]}})})},n.prototype.encodeText=function(e){for(var t=this.font.layout(e,this.fontFeatures).glyphs,r=new Array(t.length),s=0,i=t.length;s<i;s++)r[s]=qk(t[s].id,4);return bt.of(r.join(""))},n.prototype.widthOfTextAtSize=function(e,t){for(var r=this.font.layout(e,this.fontFeatures).glyphs,s=0,i=0,a=r.length;i<a;i++)s+=r[i].advanceWidth*this.scale;var o=t/1e3;return s*o},n.prototype.heightOfFontAtSize=function(e,t){t===void 0&&(t={});var r=t.descender,s=r===void 0?!0:r,i=this.font,a=i.ascent,o=i.descent,l=i.bbox,c=(a||l.maxY)*this.scale,u=(o||l.minY)*this.scale,h=c-u;return s||(h-=Math.abs(o)||0),h/1e3*e},n.prototype.sizeOfFontAtHeight=function(e){var t=this.font,r=t.ascent,s=t.descent,i=t.bbox,a=(r||i.maxY)*this.scale,o=(s||i.minY)*this.scale;return 1e3*e/(a-o)},n.prototype.embedIntoContext=function(e,t){return this.baseFontName=this.customName||e.addRandomSuffix(this.fontName),this.embedFontDict(e,t)},n.prototype.embedFontDict=function(e,t){return Mt(this,void 0,void 0,function(){var r,s,i;return $t(this,function(a){switch(a.label){case 0:return[4,this.embedCIDFontDict(e)];case 1:return r=a.sent(),s=this.embedUnicodeCmap(e),i=e.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[r],ToUnicode:s}),t?(e.assign(t,i),[2,t]):[2,e.register(i)]}})})},n.prototype.isCFF=function(){return this.font.cff},n.prototype.embedCIDFontDict=function(e){return Mt(this,void 0,void 0,function(){var t,r;return $t(this,function(s){switch(s.label){case 0:return[4,this.embedFontDescriptor(e)];case 1:return t=s.sent(),r=e.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:_n.of("Adobe"),Ordering:_n.of("Identity"),Supplement:0},FontDescriptor:t,W:this.computeWidths()}),[2,e.register(r)]}})})},n.prototype.embedFontDescriptor=function(e){return Mt(this,void 0,void 0,function(){var t,r,s,i,a,o,l,c,u,h,d,f,p,m,y;return $t(this,function(g){switch(g.label){case 0:return[4,this.embedFontStream(e)];case 1:return t=g.sent(),r=this.scale,s=this.font,i=s.italicAngle,a=s.ascent,o=s.descent,l=s.capHeight,c=s.xHeight,u=this.font.bbox,h=u.minX,d=u.minY,f=u.maxX,p=u.maxY,m=e.obj((y={Type:"FontDescriptor",FontName:this.baseFontName,Flags:Axe(this.font),FontBBox:[h*r,d*r,f*r,p*r],ItalicAngle:i,Ascent:a*r,Descent:o*r,CapHeight:(l||a)*r,XHeight:(c||0)*r,StemV:0},y[this.isCFF()?"FontFile3":"FontFile2"]=t,y)),[2,e.register(m)]}})})},n.prototype.serializeFont=function(){return Mt(this,void 0,void 0,function(){return $t(this,function(e){return[2,this.fontData]})})},n.prototype.embedFontStream=function(e){return Mt(this,void 0,void 0,function(){var t,r,s;return $t(this,function(i){switch(i.label){case 0:return s=(r=e).flateStream,[4,this.serializeFont()];case 1:return t=s.apply(r,[i.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,e.register(t)]}})})},n.prototype.embedUnicodeCmap=function(e){var t=Cxe(this.glyphCache.access(),this.glyphId.bind(this)),r=e.flateStream(t);return e.register(r)},n.prototype.glyphId=function(e){return e?e.id:-1},n.prototype.computeWidths=function(){for(var e=this.glyphCache.access(),t=[],r=[],s=0,i=e.length;s<i;s++){var a=e[s],o=e[s-1],l=this.glyphId(a),c=this.glyphId(o);s===0?t.push(l):l-c!==1&&(t.push(r),t.push(l),r=[]),r.push(a.advanceWidth*this.scale)}return t.push(r),t},n}(),Nxe=function(n){Ve(e,n);function e(t,r,s,i){var a=n.call(this,t,r,s,i)||this;return a.subset=a.font.createSubset(),a.glyphs=[],a.glyphCache=Sh.populatedBy(function(){return a.glyphs}),a.glyphIdMap=new Map,a}return e.for=function(t,r,s,i){return Mt(this,void 0,void 0,function(){var a;return $t(this,function(o){switch(o.label){case 0:return[4,t.create(r)];case 1:return a=o.sent(),[2,new e(a,r,s,i)]}})})},e.prototype.encodeText=function(t){for(var r=this.font.layout(t,this.fontFeatures).glyphs,s=new Array(r.length),i=0,a=r.length;i<a;i++){var o=r[i],l=this.subset.includeGlyph(o);this.glyphs[l-1]=o,this.glyphIdMap.set(o.id,l),s[i]=qk(l,4)}return this.glyphCache.invalidate(),bt.of(s.join(""))},e.prototype.isCFF=function(){return this.subset.cff},e.prototype.glyphId=function(t){return t?this.glyphIdMap.get(t.id):-1},e.prototype.serializeFont=function(){var t=this;return new Promise(function(r,s){var i=[];t.subset.encodeStream().on("data",function(a){return i.push(a)}).on("end",function(){return r(x0e(i))}).on("error",function(a){return s(a)})})},e}($5),BM;(function(n){n.Source="Source",n.Data="Data",n.Alternative="Alternative",n.Supplement="Supplement",n.EncryptedPayload="EncryptedPayload",n.FormData="EncryptedPayload",n.Schema="Schema",n.Unspecified="Unspecified"})(BM||(BM={}));var _xe=function(){function n(e,t,r){r===void 0&&(r={}),this.fileData=e,this.fileName=t,this.options=r}return n.for=function(e,t,r){return r===void 0&&(r={}),new n(e,t,r)},n.prototype.embedIntoContext=function(e,t){return Mt(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h;return $t(this,function(d){return r=this.options,s=r.mimeType,i=r.description,a=r.creationDate,o=r.modificationDate,l=r.afRelationship,c=e.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:s??void 0,Params:{Size:this.fileData.length,CreationDate:a?_n.fromDate(a):void 0,ModDate:o?_n.fromDate(o):void 0}}),u=e.register(c),h=e.obj({Type:"Filespec",F:_n.of(this.fileName),UF:bt.fromText(this.fileName),EF:{F:u},Desc:i?bt.fromText(i):void 0,AFRelationship:l??void 0}),t?(e.assign(t,h),[2,t]):[2,e.register(h)]})})},n}(),OW=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],$y;(function(n){n.DeviceGray="DeviceGray",n.DeviceRGB="DeviceRGB",n.DeviceCMYK="DeviceCMYK"})($y||($y={}));var Rxe={1:$y.DeviceGray,3:$y.DeviceRGB,4:$y.DeviceCMYK},uQ=function(){function n(e,t,r,s,i){this.imageData=e,this.bitsPerComponent=t,this.width=r,this.height=s,this.colorSpace=i}return n.for=function(e){return Mt(this,void 0,void 0,function(){var t,r,s,i,a,o,l,c,u,h;return $t(this,function(d){if(t=new DataView(e.buffer),r=t.getUint16(0),r!==65496)throw new Error("SOI not found in JPEG");for(s=2;s<t.byteLength&&(i=t.getUint16(s),s+=2,!OW.includes(i));)s+=t.getUint16(s);if(!OW.includes(i))throw new Error("Invalid JPEG");if(s+=2,a=t.getUint8(s++),o=t.getUint16(s),s+=2,l=t.getUint16(s),s+=2,c=t.getUint8(s++),u=Rxe[c],!u)throw new Error("Unknown JPEG channel.");return h=u,[2,new n(e,a,l,o,h)]})})},n.prototype.embedIntoContext=function(e,t){return Mt(this,void 0,void 0,function(){var r;return $t(this,function(s){return r=e.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===$y.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),t?(e.assign(t,r),[2,t]):[2,e.register(r)]})})},n}(),Oe={};Oe.toRGBA8=function(n){var e=n.width,t=n.height;if(n.tabs.acTL==null)return[Oe.toRGBA8.decodeImage(n.data,e,t,n).buffer];var r=[];n.frames[0].data==null&&(n.frames[0].data=n.data);for(var s=e*t*4,i=new Uint8Array(s),a=new Uint8Array(s),o=new Uint8Array(s),l=0;l<n.frames.length;l++){var c=n.frames[l],u=c.rect.x,h=c.rect.y,d=c.rect.width,f=c.rect.height,p=Oe.toRGBA8.decodeImage(c.data,d,f,n);if(l!=0)for(var m=0;m<s;m++)o[m]=i[m];if(c.blend==0?Oe._copyTile(p,d,f,i,e,t,u,h,0):c.blend==1&&Oe._copyTile(p,d,f,i,e,t,u,h,1),r.push(i.buffer.slice(0)),c.dispose!=0){if(c.dispose==1)Oe._copyTile(a,d,f,i,e,t,u,h,0);else if(c.dispose==2)for(var m=0;m<s;m++)i[m]=o[m]}}return r};Oe.toRGBA8.decodeImage=function(n,e,t,r){var s=e*t,i=Oe.decode._getBPP(r),a=Math.ceil(e*i/8),o=new Uint8Array(s*4),l=new Uint32Array(o.buffer),c=r.ctype,u=r.depth,h=Oe._bin.readUshort;if(c==6){var d=s<<2;if(u==8)for(var f=0;f<d;f+=4)o[f]=n[f],o[f+1]=n[f+1],o[f+2]=n[f+2],o[f+3]=n[f+3];if(u==16)for(var f=0;f<d;f++)o[f]=n[f<<1]}else if(c==2){var p=r.tabs.tRNS;if(p==null){if(u==8)for(var f=0;f<s;f++){var m=f*3;l[f]=255<<24|n[m+2]<<16|n[m+1]<<8|n[m]}if(u==16)for(var f=0;f<s;f++){var m=f*6;l[f]=255<<24|n[m+4]<<16|n[m+2]<<8|n[m]}}else{var y=p[0],g=p[1],v=p[2];if(u==8)for(var f=0;f<s;f++){var b=f<<2,m=f*3;l[f]=255<<24|n[m+2]<<16|n[m+1]<<8|n[m],n[m]==y&&n[m+1]==g&&n[m+2]==v&&(o[b+3]=0)}if(u==16)for(var f=0;f<s;f++){var b=f<<2,m=f*6;l[f]=255<<24|n[m+4]<<16|n[m+2]<<8|n[m],h(n,m)==y&&h(n,m+2)==g&&h(n,m+4)==v&&(o[b+3]=0)}}}else if(c==3){var w=r.tabs.PLTE,C=r.tabs.tRNS,I=C?C.length:0;if(u==1)for(var T=0;T<t;T++)for(var E=T*a,A=T*e,f=0;f<e;f++){var b=A+f<<2,N=n[E+(f>>3)]>>7-((f&7)<<0)&1,F=3*N;o[b]=w[F],o[b+1]=w[F+1],o[b+2]=w[F+2],o[b+3]=N<I?C[N]:255}if(u==2)for(var T=0;T<t;T++)for(var E=T*a,A=T*e,f=0;f<e;f++){var b=A+f<<2,N=n[E+(f>>2)]>>6-((f&3)<<1)&3,F=3*N;o[b]=w[F],o[b+1]=w[F+1],o[b+2]=w[F+2],o[b+3]=N<I?C[N]:255}if(u==4)for(var T=0;T<t;T++)for(var E=T*a,A=T*e,f=0;f<e;f++){var b=A+f<<2,N=n[E+(f>>1)]>>4-((f&1)<<2)&15,F=3*N;o[b]=w[F],o[b+1]=w[F+1],o[b+2]=w[F+2],o[b+3]=N<I?C[N]:255}if(u==8)for(var f=0;f<s;f++){var b=f<<2,N=n[f],F=3*N;o[b]=w[F],o[b+1]=w[F+1],o[b+2]=w[F+2],o[b+3]=N<I?C[N]:255}}else if(c==4){if(u==8)for(var f=0;f<s;f++){var b=f<<2,_=f<<1,D=n[_];o[b]=D,o[b+1]=D,o[b+2]=D,o[b+3]=n[_+1]}if(u==16)for(var f=0;f<s;f++){var b=f<<2,_=f<<2,D=n[_];o[b]=D,o[b+1]=D,o[b+2]=D,o[b+3]=n[_+2]}}else if(c==0)for(var y=r.tabs.tRNS?r.tabs.tRNS:-1,T=0;T<t;T++){var R=T*a,B=T*e;if(u==1)for(var z=0;z<e;z++){var D=255*(n[R+(z>>>3)]>>>7-(z&7)&1),W=D==y*255?0:255;l[B+z]=W<<24|D<<16|D<<8|D}else if(u==2)for(var z=0;z<e;z++){var D=85*(n[R+(z>>>2)]>>>6-((z&3)<<1)&3),W=D==y*85?0:255;l[B+z]=W<<24|D<<16|D<<8|D}else if(u==4)for(var z=0;z<e;z++){var D=17*(n[R+(z>>>1)]>>>4-((z&1)<<2)&15),W=D==y*17?0:255;l[B+z]=W<<24|D<<16|D<<8|D}else if(u==8)for(var z=0;z<e;z++){var D=n[R+z],W=D==y?0:255;l[B+z]=W<<24|D<<16|D<<8|D}else if(u==16)for(var z=0;z<e;z++){var D=n[R+(z<<1)],W=h(n,R+(z<<f))==y?0:255;l[B+z]=W<<24|D<<16|D<<8|D}}return o};Oe.decode=function(n){for(var e=new Uint8Array(n),t=8,r=Oe._bin,s=r.readUshort,i=r.readUint,a={tabs:{},frames:[]},o=new Uint8Array(e.length),l=0,c,u=0,h=[137,80,78,71,13,10,26,10],d=0;d<8;d++)if(e[d]!=h[d])throw"The input is not a PNG file!";for(;t<e.length;){var f=r.readUint(e,t);t+=4;var p=r.readASCII(e,t,4);if(t+=4,p=="IHDR")Oe.decode._IHDR(e,t,a);else if(p=="IDAT"){for(var d=0;d<f;d++)o[l+d]=e[t+d];l+=f}else if(p=="acTL")a.tabs[p]={num_frames:i(e,t),num_plays:i(e,t+4)},c=new Uint8Array(e.length);else if(p=="fcTL"){if(u!=0){var m=a.frames[a.frames.length-1];m.data=Oe.decode._decompress(a,c.slice(0,u),m.rect.width,m.rect.height),u=0}var y={x:i(e,t+12),y:i(e,t+16),width:i(e,t+4),height:i(e,t+8)},g=s(e,t+22);g=s(e,t+20)/(g==0?100:g);var v={rect:y,delay:Math.round(g*1e3),dispose:e[t+24],blend:e[t+25]};a.frames.push(v)}else if(p=="fdAT"){for(var d=0;d<f-4;d++)c[u+d]=e[t+d+4];u+=f-4}else if(p=="pHYs")a.tabs[p]=[r.readUint(e,t),r.readUint(e,t+4),e[t+8]];else if(p=="cHRM"){a.tabs[p]=[];for(var d=0;d<8;d++)a.tabs[p].push(r.readUint(e,t+d*4))}else if(p=="tEXt"){a.tabs[p]==null&&(a.tabs[p]={});var b=r.nextZero(e,t),w=r.readASCII(e,t,b-t),C=r.readASCII(e,b+1,t+f-b-1);a.tabs[p][w]=C}else if(p=="iTXt"){a.tabs[p]==null&&(a.tabs[p]={});var b=0,I=t;b=r.nextZero(e,I);var w=r.readASCII(e,I,b-I);I=b+1,e[I],e[I+1],I+=2,b=r.nextZero(e,I),r.readASCII(e,I,b-I),I=b+1,b=r.nextZero(e,I),r.readUTF8(e,I,b-I),I=b+1;var C=r.readUTF8(e,I,f-(I-t));a.tabs[p][w]=C}else if(p=="PLTE")a.tabs[p]=r.readBytes(e,t,f);else if(p=="hIST"){var T=a.tabs.PLTE.length/3;a.tabs[p]=[];for(var d=0;d<T;d++)a.tabs[p].push(s(e,t+d*2))}else if(p=="tRNS")a.ctype==3?a.tabs[p]=r.readBytes(e,t,f):a.ctype==0?a.tabs[p]=s(e,t):a.ctype==2&&(a.tabs[p]=[s(e,t),s(e,t+2),s(e,t+4)]);else if(p=="gAMA")a.tabs[p]=r.readUint(e,t)/1e5;else if(p=="sRGB")a.tabs[p]=e[t];else if(p=="bKGD")a.ctype==0||a.ctype==4?a.tabs[p]=[s(e,t)]:a.ctype==2||a.ctype==6?a.tabs[p]=[s(e,t),s(e,t+2),s(e,t+4)]:a.ctype==3&&(a.tabs[p]=e[t]);else if(p=="IEND")break;t+=f,r.readUint(e,t),t+=4}if(u!=0){var m=a.frames[a.frames.length-1];m.data=Oe.decode._decompress(a,c.slice(0,u),m.rect.width,m.rect.height),u=0}return a.data=Oe.decode._decompress(a,o,a.width,a.height),delete a.compress,delete a.interlace,delete a.filter,a};Oe.decode._decompress=function(n,e,t,r){var s=Oe.decode._getBPP(n),i=Math.ceil(t*s/8),a=new Uint8Array((i+1+n.interlace)*r);return e=Oe.decode._inflate(e,a),n.interlace==0?e=Oe.decode._filterZero(e,n,0,t,r):n.interlace==1&&(e=Oe.decode._readInterlace(e,n)),e};Oe.decode._inflate=function(n,e){var t=Oe.inflateRaw(new Uint8Array(n.buffer,2,n.length-6),e);return t};Oe.inflateRaw=function(){var n={};return n.H={},n.H.N=function(e,t){var r=Uint8Array,s=0,i=0,a=0,o=0,l=0,c=0,u=0,h=0,d=0,f,p;if(e[0]==3&&e[1]==0)return t||new r(0);var m=n.H,y=m.b,g=m.e,v=m.R,b=m.n,w=m.A,C=m.Z,I=m.m,T=t==null;for(T&&(t=new r(e.length>>>2<<3));s==0;){if(s=y(e,d,1),i=y(e,d+1,2),d+=3,i==0){d&7&&(d+=8-(d&7));var E=(d>>>3)+4,A=e[E-4]|e[E-3]<<8;T&&(t=n.H.W(t,h+A)),t.set(new r(e.buffer,e.byteOffset+E,A),h),d=E+A<<3,h+=A;continue}if(T&&(t=n.H.W(t,h+(1<<17))),i==1&&(f=I.J,p=I.h,c=511,u=31),i==2){a=g(e,d,5)+257,o=g(e,d+5,5)+1,l=g(e,d+10,4)+4,d+=14;for(var N=1,F=0;F<38;F+=2)I.Q[F]=0,I.Q[F+1]=0;for(var F=0;F<l;F++){var _=g(e,d+F*3,3);I.Q[(I.X[F]<<1)+1]=_,_>N&&(N=_)}d+=3*l,b(I.Q,N),w(I.Q,N,I.u),f=I.w,p=I.d,d=v(I.u,(1<<N)-1,a+o,e,d,I.v);var D=m.V(I.v,0,a,I.C);c=(1<<D)-1;var R=m.V(I.v,a,o,I.D);u=(1<<R)-1,b(I.C,D),w(I.C,D,f),b(I.D,R),w(I.D,R,p)}for(;;){var B=f[C(e,d)&c];d+=B&15;var z=B>>>4;if(!(z>>>8))t[h++]=z;else{if(z==256)break;var W=h+z-254;if(z>264){var K=I.q[z-257];W=h+(K>>>3)+g(e,d,K&7),d+=K&7}var H=p[C(e,d)&u];d+=H&15;var se=H>>>4,q=I.c[se],X=(q>>>4)+y(e,d,q&15);for(d+=q&15;h<W;)t[h]=t[h++-X],t[h]=t[h++-X],t[h]=t[h++-X],t[h]=t[h++-X];h=W}}}return t.length==h?t:t.slice(0,h)},n.H.W=function(e,t){var r=e.length;if(t<=r)return e;var s=new Uint8Array(r<<1);return s.set(e,0),s},n.H.R=function(e,t,r,s,i,a){for(var o=n.H.e,l=n.H.Z,c=0;c<r;){var u=e[l(s,i)&t];i+=u&15;var h=u>>>4;if(h<=15)a[c]=h,c++;else{var d=0,f=0;h==16?(f=3+o(s,i,2),i+=2,d=a[c-1]):h==17?(f=3+o(s,i,3),i+=3):h==18&&(f=11+o(s,i,7),i+=7);for(var p=c+f;c<p;)a[c]=d,c++}}return i},n.H.V=function(e,t,r,s){for(var i=0,a=0,o=s.length>>>1;a<r;){var l=e[a+t];s[a<<1]=0,s[(a<<1)+1]=l,l>i&&(i=l),a++}for(;a<o;)s[a<<1]=0,s[(a<<1)+1]=0,a++;return i},n.H.n=function(e,t){for(var r=n.H.m,s=e.length,i,a,o,l,c,u=r.j,l=0;l<=t;l++)u[l]=0;for(l=1;l<s;l+=2)u[e[l]]++;var h=r.K;for(i=0,u[0]=0,a=1;a<=t;a++)i=i+u[a-1]<<1,h[a]=i;for(o=0;o<s;o+=2)c=e[o+1],c!=0&&(e[o]=h[c],h[c]++)},n.H.A=function(e,t,r){for(var s=e.length,i=n.H.m,a=i.r,o=0;o<s;o+=2)if(e[o+1]!=0)for(var l=o>>1,c=e[o+1],u=l<<4|c,h=t-c,d=e[o]<<h,f=d+(1<<h);d!=f;){var p=a[d]>>>15-t;r[p]=u,d++}},n.H.l=function(e,t){for(var r=n.H.m.r,s=15-t,i=0;i<e.length;i+=2){var a=e[i]<<t-e[i+1];e[i]=r[a]>>>s}},n.H.M=function(e,t,r){r=r<<(t&7);var s=t>>>3;e[s]|=r,e[s+1]|=r>>>8},n.H.I=function(e,t,r){r=r<<(t&7);var s=t>>>3;e[s]|=r,e[s+1]|=r>>>8,e[s+2]|=r>>>16},n.H.e=function(e,t,r){return(e[t>>>3]|e[(t>>>3)+1]<<8)>>>(t&7)&(1<<r)-1},n.H.b=function(e,t,r){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)&(1<<r)-1},n.H.Z=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)},n.H.i=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16|e[(t>>>3)+3]<<24)>>>(t&7)},n.H.m=function(){var e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){for(var e=n.H.m,t=32768,r=0;r<t;r++){var s=r;s=(s&2863311530)>>>1|(s&1431655765)<<1,s=(s&3435973836)>>>2|(s&858993459)<<2,s=(s&4042322160)>>>4|(s&252645135)<<4,s=(s&4278255360)>>>8|(s&16711935)<<8,e.r[r]=(s>>>16|s<<16)>>>17}function i(a,o,l){for(;o--!=0;)a.push(0,l)}for(var r=0;r<32;r++)e.q[r]=e.S[r]<<3|e.T[r],e.c[r]=e.p[r]<<4|e.z[r];i(e._,144,8),i(e._,112,9),i(e._,24,7),i(e._,8,8),n.H.n(e._,9),n.H.A(e._,9,e.J),n.H.l(e._,9),i(e.$,32,5),n.H.n(e.$,5),n.H.A(e.$,5,e.h),n.H.l(e.$,5),i(e.Q,19,0),i(e.C,286,0),i(e.D,30,0),i(e.v,320,0)}(),n.H.N}();Oe.decode._readInterlace=function(n,e){for(var t=e.width,r=e.height,s=Oe.decode._getBPP(e),i=s>>3,a=Math.ceil(t*s/8),o=new Uint8Array(r*a),l=0,c=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],f=0;f<7;){for(var p=h[f],m=d[f],y=0,g=0,v=c[f];v<r;)v+=p,g++;for(var b=u[f];b<t;)b+=m,y++;var w=Math.ceil(y*s/8);Oe.decode._filterZero(n,e,l,y,g);for(var C=0,I=c[f];I<r;){for(var T=u[f],E=l+C*w<<3;T<t;){if(s==1){var A=n[E>>3];A=A>>7-(E&7)&1,o[I*a+(T>>3)]|=A<<7-((T&7)<<0)}if(s==2){var A=n[E>>3];A=A>>6-(E&7)&3,o[I*a+(T>>2)]|=A<<6-((T&3)<<1)}if(s==4){var A=n[E>>3];A=A>>4-(E&7)&15,o[I*a+(T>>1)]|=A<<4-((T&1)<<2)}if(s>=8)for(var N=I*a+T*i,F=0;F<i;F++)o[N+F]=n[(E>>3)+F];E+=s,T+=m}C++,I+=p}y*g!=0&&(l+=g*(1+w)),f=f+1}return o};Oe.decode._getBPP=function(n){var e=[1,null,3,1,2,null,4][n.ctype];return e*n.depth};Oe.decode._filterZero=function(n,e,t,r,s){var i=Oe.decode._getBPP(e),a=Math.ceil(r*i/8),o=Oe.decode._paeth;i=Math.ceil(i/8);var l=0,c=1,u=n[t],h=0;if(u>1&&(n[t]=[0,0,1][u-2]),u==3)for(h=i;h<a;h++)n[h+1]=n[h+1]+(n[h+1-i]>>>1)&255;for(var d=0;d<s;d++)if(l=t+d*a,c=l+d+1,u=n[c-1],h=0,u==0)for(;h<a;h++)n[l+h]=n[c+h];else if(u==1){for(;h<i;h++)n[l+h]=n[c+h];for(;h<a;h++)n[l+h]=n[c+h]+n[l+h-i]}else if(u==2)for(;h<a;h++)n[l+h]=n[c+h]+n[l+h-a];else if(u==3){for(;h<i;h++)n[l+h]=n[c+h]+(n[l+h-a]>>>1);for(;h<a;h++)n[l+h]=n[c+h]+(n[l+h-a]+n[l+h-i]>>>1)}else{for(;h<i;h++)n[l+h]=n[c+h]+o(0,n[l+h-a],0);for(;h<a;h++)n[l+h]=n[c+h]+o(n[l+h-i],n[l+h-a],n[l+h-i-a])}return n};Oe.decode._paeth=function(n,e,t){var r=n+e-t,s=r-n,i=r-e,a=r-t;return s*s<=i*i&&s*s<=a*a?n:i*i<=a*a?e:t};Oe.decode._IHDR=function(n,e,t){var r=Oe._bin;t.width=r.readUint(n,e),e+=4,t.height=r.readUint(n,e),e+=4,t.depth=n[e],e++,t.ctype=n[e],e++,t.compress=n[e],e++,t.filter=n[e],e++,t.interlace=n[e],e++};Oe._bin={nextZero:function(n,e){for(;n[e]!=0;)e++;return e},readUshort:function(n,e){return n[e]<<8|n[e+1]},writeUshort:function(n,e,t){n[e]=t>>8&255,n[e+1]=t&255},readUint:function(n,e){return n[e]*(256*256*256)+(n[e+1]<<16|n[e+2]<<8|n[e+3])},writeUint:function(n,e,t){n[e]=t>>24&255,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255},readASCII:function(n,e,t){for(var r="",s=0;s<t;s++)r+=String.fromCharCode(n[e+s]);return r},writeASCII:function(n,e,t){for(var r=0;r<t.length;r++)n[e+r]=t.charCodeAt(r)},readBytes:function(n,e,t){for(var r=[],s=0;s<t;s++)r.push(n[e+s]);return r},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,e,t){for(var r="",s,i=0;i<t;i++)r+="%"+Oe._bin.pad(n[e+i].toString(16));try{s=decodeURIComponent(r)}catch{return Oe._bin.readASCII(n,e,t)}return s}};Oe._copyTile=function(n,e,t,r,s,i,a,o,l){for(var c=Math.min(e,s),u=Math.min(t,i),h=0,d=0,f=0;f<u;f++)for(var p=0;p<c;p++)if(a>=0&&o>=0?(h=f*e+p<<2,d=(o+f)*s+a+p<<2):(h=(-o+f)*e-a+p<<2,d=f*s+p<<2),l==0)r[d]=n[h],r[d+1]=n[h+1],r[d+2]=n[h+2],r[d+3]=n[h+3];else if(l==1){var m=n[h+3]*.00392156862745098,y=n[h]*m,g=n[h+1]*m,v=n[h+2]*m,b=r[d+3]*(1/255),w=r[d]*b,C=r[d+1]*b,I=r[d+2]*b,T=1-m,E=m+b*T,A=E==0?0:1/E;r[d+3]=255*E,r[d+0]=(y+w*T)*A,r[d+1]=(g+C*T)*A,r[d+2]=(v+I*T)*A}else if(l==2){var m=n[h+3],y=n[h],g=n[h+1],v=n[h+2],b=r[d+3],w=r[d],C=r[d+1],I=r[d+2];m==b&&y==w&&g==C&&v==I?(r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=0):(r[d]=y,r[d+1]=g,r[d+2]=v,r[d+3]=m)}else if(l==3){var m=n[h+3],y=n[h],g=n[h+1],v=n[h+2],b=r[d+3],w=r[d],C=r[d+1],I=r[d+2];if(m==b&&y==w&&g==C&&v==I)continue;if(m<220&&b>20)return!1}return!0};Oe.encode=function(n,e,t,r,s,i,a){r==null&&(r=0),a==null&&(a=!1);var o=Oe.encode.compress(n,e,t,r,[!1,!1,!1,0,a]);return Oe.encode.compressPNG(o,-1),Oe.encode._main(o,e,t,s,i)};Oe.encodeLL=function(n,e,t,r,s,i,a,o){for(var l={ctype:0+(r==1?0:2)+(s==0?0:4),depth:i,frames:[]},c=(r+s)*i,u=c*e,h=0;h<n.length;h++)l.frames.push({rect:{x:0,y:0,width:e,height:t},img:new Uint8Array(n[h]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(u/8)});Oe.encode.compressPNG(l,0,!0);var d=Oe.encode._main(l,e,t,a,o);return d};Oe.encode._main=function(n,e,t,r,s){s==null&&(s={});var i=Oe.crc.crc,a=Oe._bin.writeUint,o=Oe._bin.writeUshort,l=Oe._bin.writeASCII,c=8,u=n.frames.length>1,h=!1,d=33+(u?20:0);if(s.sRGB!=null&&(d+=13),s.pHYs!=null&&(d+=21),n.ctype==3){for(var f=n.plte.length,p=0;p<f;p++)n.plte[p]>>>24!=255&&(h=!0);d+=8+f*3+4+(h?8+f*1+4:0)}for(var m=0;m<n.frames.length;m++){var y=n.frames[m];u&&(d+=38),d+=y.cimg.length+12,m!=0&&(d+=4)}d+=12;for(var g=new Uint8Array(d),v=[137,80,78,71,13,10,26,10],p=0;p<8;p++)g[p]=v[p];if(a(g,c,13),c+=4,l(g,c,"IHDR"),c+=4,a(g,c,e),c+=4,a(g,c,t),c+=4,g[c]=n.depth,c++,g[c]=n.ctype,c++,g[c]=0,c++,g[c]=0,c++,g[c]=0,c++,a(g,c,i(g,c-17,17)),c+=4,s.sRGB!=null&&(a(g,c,1),c+=4,l(g,c,"sRGB"),c+=4,g[c]=s.sRGB,c++,a(g,c,i(g,c-5,5)),c+=4),s.pHYs!=null&&(a(g,c,9),c+=4,l(g,c,"pHYs"),c+=4,a(g,c,s.pHYs[0]),c+=4,a(g,c,s.pHYs[1]),c+=4,g[c]=s.pHYs[2],c++,a(g,c,i(g,c-13,13)),c+=4),u&&(a(g,c,8),c+=4,l(g,c,"acTL"),c+=4,a(g,c,n.frames.length),c+=4,a(g,c,s.loop!=null?s.loop:0),c+=4,a(g,c,i(g,c-12,12)),c+=4),n.ctype==3){var f=n.plte.length;a(g,c,f*3),c+=4,l(g,c,"PLTE"),c+=4;for(var p=0;p<f;p++){var b=p*3,w=n.plte[p],C=w&255,I=w>>>8&255,T=w>>>16&255;g[c+b+0]=C,g[c+b+1]=I,g[c+b+2]=T}if(c+=f*3,a(g,c,i(g,c-f*3-4,f*3+4)),c+=4,h){a(g,c,f),c+=4,l(g,c,"tRNS"),c+=4;for(var p=0;p<f;p++)g[c+p]=n.plte[p]>>>24&255;c+=f,a(g,c,i(g,c-f-4,f+4)),c+=4}}for(var E=0,m=0;m<n.frames.length;m++){var y=n.frames[m];u&&(a(g,c,26),c+=4,l(g,c,"fcTL"),c+=4,a(g,c,E++),c+=4,a(g,c,y.rect.width),c+=4,a(g,c,y.rect.height),c+=4,a(g,c,y.rect.x),c+=4,a(g,c,y.rect.y),c+=4,o(g,c,r[m]),c+=2,o(g,c,1e3),c+=2,g[c]=y.dispose,c++,g[c]=y.blend,c++,a(g,c,i(g,c-30,30)),c+=4);var A=y.cimg,f=A.length;a(g,c,f+(m==0?0:4)),c+=4;var N=c;l(g,c,m==0?"IDAT":"fdAT"),c+=4,m!=0&&(a(g,c,E++),c+=4),g.set(A,c),c+=f,a(g,c,i(g,N,c-N)),c+=4}return a(g,c,0),c+=4,l(g,c,"IEND"),c+=4,a(g,c,i(g,c-4,4)),c+=4,g.buffer};Oe.encode.compressPNG=function(n,e,t){for(var r=0;r<n.frames.length;r++){var s=n.frames[r];s.rect.width;var i=s.rect.height,a=new Uint8Array(i*s.bpl+i);s.cimg=Oe.encode._filterZero(s.img,i,s.bpp,s.bpl,a,e,t)}};Oe.encode.compress=function(n,e,t,r,s){for(var i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=6,h=8,d=255,f=0;f<n.length;f++)for(var p=new Uint8Array(n[f]),m=p.length,y=0;y<m;y+=4)d&=p[y+3];var g=d!=255,v=Oe.encode.framize(n,e,t,i,a,o),b={},w=[],C=[];if(r!=0){for(var I=[],y=0;y<v.length;y++)I.push(v[y].img.buffer);for(var T=Oe.encode.concatRGBA(I),E=Oe.quantize(T,r),A=0,N=new Uint8Array(E.abuf),y=0;y<v.length;y++){var F=v[y].img,_=F.length;C.push(new Uint8Array(E.inds.buffer,A>>2,_>>2));for(var f=0;f<_;f+=4)F[f]=N[A+f],F[f+1]=N[A+f+1],F[f+2]=N[A+f+2],F[f+3]=N[A+f+3];A+=_}for(var y=0;y<E.plte.length;y++)w.push(E.plte[y].est.rgba)}else for(var f=0;f<v.length;f++){var D=v[f],R=new Uint32Array(D.img.buffer),B=D.rect.width,m=R.length,z=new Uint8Array(m);C.push(z);for(var y=0;y<m;y++){var W=R[y];if(y!=0&&W==R[y-1])z[y]=z[y-1];else if(y>B&&W==R[y-B])z[y]=z[y-B];else{var K=b[W];if(K==null&&(b[W]=K=w.length,w.push(W),w.length>=300))break;z[y]=K}}}var H=w.length;H<=256&&c==!1&&(H<=2?h=1:H<=4?h=2:H<=16?h=4:h=8,h=Math.max(h,l));for(var f=0;f<v.length;f++){var D=v[f];D.rect.x,D.rect.y;var B=D.rect.width,se=D.rect.height,q=D.img;new Uint32Array(q.buffer);var X=4*B,fe=4;if(H<=256&&c==!1){X=Math.ceil(h*B/8);for(var de=new Uint8Array(X*se),ue=C[f],Ce=0;Ce<se;Ce++){var y=Ce*X,Ae=Ce*B;if(h==8)for(var Ee=0;Ee<B;Ee++)de[y+Ee]=ue[Ae+Ee];else if(h==4)for(var Ee=0;Ee<B;Ee++)de[y+(Ee>>1)]|=ue[Ae+Ee]<<4-(Ee&1)*4;else if(h==2)for(var Ee=0;Ee<B;Ee++)de[y+(Ee>>2)]|=ue[Ae+Ee]<<6-(Ee&3)*2;else if(h==1)for(var Ee=0;Ee<B;Ee++)de[y+(Ee>>3)]|=ue[Ae+Ee]<<7-(Ee&7)*1}q=de,u=3,fe=1}else if(g==!1&&v.length==1){for(var de=new Uint8Array(B*se*3),Le=B*se,y=0;y<Le;y++){var F=y*3,Ke=y*4;de[F]=q[Ke],de[F+1]=q[Ke+1],de[F+2]=q[Ke+2]}q=de,u=2,fe=3,X=3*B}D.img=q,D.bpl=X,D.bpp=fe}return{ctype:u,depth:h,plte:w,frames:v}};Oe.encode.framize=function(n,e,t,r,s,i){for(var a=[],o=0;o<n.length;o++){var l=new Uint8Array(n[o]),c=new Uint32Array(l.buffer),u,h=0,d=0,f=e,p=t,m=r?1:0;if(o!=0){for(var y=i||r||o==1||a[o-2].dispose!=0?1:2,g=0,v=1e9,b=0;b<y;b++){for(var D=new Uint8Array(n[o-1-b]),w=new Uint32Array(n[o-1-b]),C=e,I=t,T=-1,E=-1,A=0;A<t;A++)for(var N=0;N<e;N++){var F=A*e+N;c[F]!=w[F]&&(N<C&&(C=N),N>T&&(T=N),A<I&&(I=A),A>E&&(E=A))}T==-1&&(C=I=T=E=0),s&&((C&1)==1&&C--,(I&1)==1&&I--);var _=(T-C+1)*(E-I+1);_<v&&(v=_,g=b,h=C,d=I,f=T-C+1,p=E-I+1)}var D=new Uint8Array(n[o-1-g]);g==1&&(a[o-1].dispose=2),u=new Uint8Array(f*p*4),Oe._copyTile(D,e,t,u,f,p,-h,-d,0),m=Oe._copyTile(l,e,t,u,f,p,-h,-d,3)?1:0,m==1?Oe.encode._prepareDiff(l,e,t,u,{x:h,y:d,width:f,height:p}):Oe._copyTile(l,e,t,u,f,p,-h,-d,0)}else u=l.slice(0);a.push({rect:{x:h,y:d,width:f,height:p},img:u,blend:m,dispose:0})}if(r)for(var o=0;o<a.length;o++){var R=a[o];if(R.blend!=1){var B=R.rect,z=a[o-1].rect,W=Math.min(B.x,z.x),K=Math.min(B.y,z.y),H=Math.max(B.x+B.width,z.x+z.width),se=Math.max(B.y+B.height,z.y+z.height),q={x:W,y:K,width:H-W,height:se-K};a[o-1].dispose=1,o-1!=0&&Oe.encode._updateFrame(n,e,t,a,o-1,q,s),Oe.encode._updateFrame(n,e,t,a,o,q,s)}}var X=0;if(n.length!=1)for(var F=0;F<a.length;F++){var R=a[F];X+=R.rect.width*R.rect.height}return a};Oe.encode._updateFrame=function(n,e,t,r,s,i,a){for(var o=Uint8Array,l=Uint32Array,c=new o(n[s-1]),u=new l(n[s-1]),h=s+1<n.length?new o(n[s+1]):null,d=new o(n[s]),f=new l(d.buffer),p=e,m=t,y=-1,g=-1,v=0;v<i.height;v++)for(var b=0;b<i.width;b++){var w=i.x+b,C=i.y+v,I=C*e+w,T=f[I];T==0||r[s-1].dispose==0&&u[I]==T&&(h==null||h[I*4+3]!=0)||(w<p&&(p=w),w>y&&(y=w),C<m&&(m=C),C>g&&(g=C))}y==-1&&(p=m=y=g=0),a&&((p&1)==1&&p--,(m&1)==1&&m--),i={x:p,y:m,width:y-p+1,height:g-m+1};var E=r[s];E.rect=i,E.blend=1,E.img=new Uint8Array(i.width*i.height*4),r[s-1].dispose==0?(Oe._copyTile(c,e,t,E.img,i.width,i.height,-i.x,-i.y,0),Oe.encode._prepareDiff(d,e,t,E.img,i)):Oe._copyTile(d,e,t,E.img,i.width,i.height,-i.x,-i.y,0)};Oe.encode._prepareDiff=function(n,e,t,r,s){Oe._copyTile(n,e,t,r,s.width,s.height,-s.x,-s.y,2)};Oe.encode._filterZero=function(n,e,t,r,s,i,a){var o=[],l=[0,1,2,3,4];i!=-1?l=[i]:(e*r>5e5||t==1)&&(l=[0]);var c;a&&(c={level:0});for(var u=a&&UZIP!=null?UZIP:yR,h=0;h<l.length;h++){for(var d=0;d<e;d++)Oe.encode._filterLine(s,n,d,r,t,l[h]);o.push(u.deflate(s,c))}for(var f,p=1e9,h=0;h<o.length;h++)o[h].length<p&&(f=h,p=o[h].length);return o[f]};Oe.encode._filterLine=function(n,e,t,r,s,i){var a=t*r,o=a+t,l=Oe.decode._paeth;if(n[o]=i,o++,i==0)if(r<500)for(var c=0;c<r;c++)n[o+c]=e[a+c];else n.set(new Uint8Array(e.buffer,a,r),o);else if(i==1){for(var c=0;c<s;c++)n[o+c]=e[a+c];for(var c=s;c<r;c++)n[o+c]=e[a+c]-e[a+c-s]+256&255}else if(t==0){for(var c=0;c<s;c++)n[o+c]=e[a+c];if(i==2)for(var c=s;c<r;c++)n[o+c]=e[a+c];if(i==3)for(var c=s;c<r;c++)n[o+c]=e[a+c]-(e[a+c-s]>>1)+256&255;if(i==4)for(var c=s;c<r;c++)n[o+c]=e[a+c]-l(e[a+c-s],0,0)+256&255}else{if(i==2)for(var c=0;c<r;c++)n[o+c]=e[a+c]+256-e[a+c-r]&255;if(i==3){for(var c=0;c<s;c++)n[o+c]=e[a+c]+256-(e[a+c-r]>>1)&255;for(var c=s;c<r;c++)n[o+c]=e[a+c]+256-(e[a+c-r]+e[a+c-s]>>1)&255}if(i==4){for(var c=0;c<s;c++)n[o+c]=e[a+c]+256-l(0,e[a+c-r],0)&255;for(var c=s;c<r;c++)n[o+c]=e[a+c]+256-l(e[a+c-s],e[a+c-r],e[a+c-s-r])&255}}};Oe.crc={table:function(){for(var n=new Uint32Array(256),e=0;e<256;e++){for(var t=e,r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;n[e]=t}return n}(),update:function(n,e,t,r){for(var s=0;s<r;s++)n=Oe.crc.table[(n^e[t+s])&255]^n>>>8;return n},crc:function(n,e,t){return Oe.crc.update(4294967295,n,e,t)^4294967295}};Oe.quantize=function(n,e){var t=new Uint8Array(n),r=t.slice(0),s=new Uint32Array(r.buffer),i=Oe.quantize.getKDtree(r,e),a=i[0],o=i[1];Oe.quantize.planeDst;for(var l=t,c=s,u=l.length,h=new Uint8Array(t.length>>2),d=0;d<u;d+=4){var f=l[d]*.00392156862745098,p=l[d+1]*(1/255),m=l[d+2]*(1/255),y=l[d+3]*(1/255),g=Oe.quantize.getNearest(a,f,p,m,y);h[d>>2]=g.ind,c[d>>2]=g.est.rgba}return{abuf:r.buffer,inds:h,plte:o}};Oe.quantize.getKDtree=function(n,e,t){t==null&&(t=1e-4);var r=new Uint32Array(n.buffer),s={i0:0,i1:n.length,bst:null,est:null,tdst:0,left:null,right:null};s.bst=Oe.quantize.stats(n,s.i0,s.i1),s.est=Oe.quantize.estats(s.bst);for(var i=[s];i.length<e;){for(var a=0,o=0,l=0;l<i.length;l++)i[l].est.L>a&&(a=i[l].est.L,o=l);if(a<t)break;var c=i[o],u=Oe.quantize.splitPixels(n,r,c.i0,c.i1,c.est.e,c.est.eMq255),h=c.i0>=u||c.i1<=u;if(h){c.est.L=0;continue}var d={i0:c.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};d.bst=Oe.quantize.stats(n,d.i0,d.i1),d.est=Oe.quantize.estats(d.bst);var f={i0:u,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};f.bst={R:[],m:[],N:c.bst.N-d.bst.N};for(var l=0;l<16;l++)f.bst.R[l]=c.bst.R[l]-d.bst.R[l];for(var l=0;l<4;l++)f.bst.m[l]=c.bst.m[l]-d.bst.m[l];f.est=Oe.quantize.estats(f.bst),c.left=d,c.right=f,i[o]=d,i.push(f)}i.sort(function(p,m){return m.bst.N-p.bst.N});for(var l=0;l<i.length;l++)i[l].ind=l;return[s,i]};Oe.quantize.getNearest=function(n,e,t,r,s){if(n.left==null)return n.tdst=Oe.quantize.dist(n.est.q,e,t,r,s),n;var i=Oe.quantize.planeDst(n.est,e,t,r,s),a=n.left,o=n.right;i>0&&(a=n.right,o=n.left);var l=Oe.quantize.getNearest(a,e,t,r,s);if(l.tdst<=i*i)return l;var c=Oe.quantize.getNearest(o,e,t,r,s);return c.tdst<l.tdst?c:l};Oe.quantize.planeDst=function(n,e,t,r,s){var i=n.e;return i[0]*e+i[1]*t+i[2]*r+i[3]*s-n.eMq};Oe.quantize.dist=function(n,e,t,r,s){var i=e-n[0],a=t-n[1],o=r-n[2],l=s-n[3];return i*i+a*a+o*o+l*l};Oe.quantize.splitPixels=function(n,e,t,r,s,i){var a=Oe.quantize.vecDot;for(r-=4;t<r;){for(;a(n,t,s)<=i;)t+=4;for(;a(n,r,s)>i;)r-=4;if(t>=r)break;var o=e[t>>2];e[t>>2]=e[r>>2],e[r>>2]=o,t+=4,r-=4}for(;a(n,t,s)>i;)t-=4;return t+4};Oe.quantize.vecDot=function(n,e,t){return n[e]*t[0]+n[e+1]*t[1]+n[e+2]*t[2]+n[e+3]*t[3]};Oe.quantize.stats=function(n,e,t){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0],i=t-e>>2,a=e;a<t;a+=4){var o=n[a]*.00392156862745098,l=n[a+1]*(1/255),c=n[a+2]*(1/255),u=n[a+3]*(1/255);s[0]+=o,s[1]+=l,s[2]+=c,s[3]+=u,r[0]+=o*o,r[1]+=o*l,r[2]+=o*c,r[3]+=o*u,r[5]+=l*l,r[6]+=l*c,r[7]+=l*u,r[10]+=c*c,r[11]+=c*u,r[15]+=u*u}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:s,N:i}};Oe.quantize.estats=function(n){var e=n.R,t=n.m,r=n.N,s=t[0],i=t[1],a=t[2],o=t[3],l=r==0?0:1/r,c=[e[0]-s*s*l,e[1]-s*i*l,e[2]-s*a*l,e[3]-s*o*l,e[4]-i*s*l,e[5]-i*i*l,e[6]-i*a*l,e[7]-i*o*l,e[8]-a*s*l,e[9]-a*i*l,e[10]-a*a*l,e[11]-a*o*l,e[12]-o*s*l,e[13]-o*i*l,e[14]-o*a*l,e[15]-o*o*l],u=c,h=Oe.M4,d=[.5,.5,.5,.5],f=0,p=0;if(r!=0)for(var m=0;m<10&&(d=h.multVec(u,d),p=Math.sqrt(h.dot(d,d)),d=h.sml(1/p,d),!(Math.abs(p-f)<1e-9));m++)f=p;var y=[s*l,i*l,a*l,o*l],g=h.dot(h.sml(255,y),d);return{Cov:c,q:y,e:d,L:f,eMq255:g,eMq:h.dot(d,y),rgba:(Math.round(255*y[3])<<24|Math.round(255*y[2])<<16|Math.round(255*y[1])<<8|Math.round(255*y[0])<<0)>>>0}};Oe.M4={multVec:function(n,e){return[n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3],n[4]*e[0]+n[5]*e[1]+n[6]*e[2]+n[7]*e[3],n[8]*e[0]+n[9]*e[1]+n[10]*e[2]+n[11]*e[3],n[12]*e[0]+n[13]*e[1]+n[14]*e[2]+n[15]*e[3]]},dot:function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]},sml:function(n,e){return[n*e[0],n*e[1],n*e[2],n*e[3]]}};Oe.encode.concatRGBA=function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t].byteLength;for(var r=new Uint8Array(e),s=0,t=0;t<n.length;t++){for(var i=new Uint8Array(n[t]),a=i.length,o=0;o<a;o+=4){var l=i[o],c=i[o+1],u=i[o+2],h=i[o+3];h==0&&(l=c=u=0),r[s+o]=l,r[s+o+1]=c,r[s+o+2]=u,r[s+o+3]=h}s+=a}return r.buffer};var Dxe=function(n){if(n===0)return Hp.Greyscale;if(n===2)return Hp.Truecolour;if(n===3)return Hp.IndexedColour;if(n===4)return Hp.GreyscaleWithAlpha;if(n===6)return Hp.TruecolourWithAlpha;throw new Error("Unknown color type: "+n)},Fxe=function(n){for(var e=Math.floor(n.length/4),t=new Uint8Array(e*3),r=new Uint8Array(e*1),s=0,i=0,a=0;s<n.length;)t[i++]=n[s++],t[i++]=n[s++],t[i++]=n[s++],r[a++]=n[s++];return{rgbChannel:t,alphaChannel:r}},Hp;(function(n){n.Greyscale="Greyscale",n.Truecolour="Truecolour",n.IndexedColour="IndexedColour",n.GreyscaleWithAlpha="GreyscaleWithAlpha",n.TruecolourWithAlpha="TruecolourWithAlpha"})(Hp||(Hp={}));var Pxe=function(){function n(e){var t=Oe.decode(e),r=Oe.toRGBA8(t);if(r.length>1)throw new Error("Animated PNGs are not supported");var s=new Uint8Array(r[0]),i=Fxe(s),a=i.rgbChannel,o=i.alphaChannel;this.rgbChannel=a;var l=o.some(function(c){return c<255});l&&(this.alphaChannel=o),this.type=Dxe(t.ctype),this.width=t.width,this.height=t.height,this.bitsPerComponent=8}return n.load=function(e){return new n(e)},n}(),hQ=function(){function n(e){this.image=e,this.bitsPerComponent=e.bitsPerComponent,this.width=e.width,this.height=e.height,this.colorSpace="DeviceRGB"}return n.for=function(e){return Mt(this,void 0,void 0,function(){var t;return $t(this,function(r){return t=Pxe.load(e),[2,new n(t)]})})},n.prototype.embedIntoContext=function(e,t){return Mt(this,void 0,void 0,function(){var r,s;return $t(this,function(i){return r=this.embedAlphaChannel(e),s=e.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:r}),t?(e.assign(t,s),[2,t]):[2,e.register(s)]})})},n.prototype.embedAlphaChannel=function(e){if(this.image.alphaChannel){var t=e.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return e.register(t)}},n}(),dQ=function(){function n(e,t,r){this.bytes=e,this.start=t||0,this.pos=this.start,this.end=t&&r?t+r:this.bytes.length}return Object.defineProperty(n.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),n.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},n.prototype.getUint16=function(){var e=this.getByte(),t=this.getByte();return e===-1||t===-1?-1:(e<<8)+t},n.prototype.getInt32=function(){var e=this.getByte(),t=this.getByte(),r=this.getByte(),s=this.getByte();return(e<<24)+(t<<16)+(r<<8)+s},n.prototype.getBytes=function(e,t){t===void 0&&(t=!1);var r=this.bytes,s=this.pos,i=this.end;if(e){var o=s+e;o>i&&(o=i),this.pos=o;var a=r.subarray(s,o);return t?new Uint8ClampedArray(a):a}else{var a=r.subarray(s,i);return t?new Uint8ClampedArray(a):a}},n.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},n.prototype.peekBytes=function(e,t){t===void 0&&(t=!1);var r=this.getBytes(e,t);return this.pos-=r.length,r},n.prototype.skip=function(e){e||(e=1),this.pos+=e},n.prototype.reset=function(){this.pos=this.start},n.prototype.moveStart=function(){this.start=this.pos},n.prototype.makeSubStream=function(e,t){return new n(this.bytes,e,t)},n.prototype.decode=function(){return this.bytes},n}(),Oxe=new Uint8Array(0),eC=function(){function n(e){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=Oxe,this.minBufferLength=512,e)for(;this.minBufferLength<e;)this.minBufferLength*=2}return Object.defineProperty(n.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),n.prototype.getByte=function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},n.prototype.getUint16=function(){var e=this.getByte(),t=this.getByte();return e===-1||t===-1?-1:(e<<8)+t},n.prototype.getInt32=function(){var e=this.getByte(),t=this.getByte(),r=this.getByte(),s=this.getByte();return(e<<24)+(t<<16)+(r<<8)+s},n.prototype.getBytes=function(e,t){t===void 0&&(t=!1);var r,s=this.pos;if(e){for(this.ensureBuffer(s+e),r=s+e;!this.eof&&this.bufferLength<r;)this.readBlock();var i=this.bufferLength;r>i&&(r=i)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}this.pos=r;var a=this.buffer.subarray(s,r);return t&&!(a instanceof Uint8ClampedArray)?new Uint8ClampedArray(a):a},n.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},n.prototype.peekBytes=function(e,t){t===void 0&&(t=!1);var r=this.getBytes(e,t);return this.pos-=r.length,r},n.prototype.skip=function(e){e||(e=1),this.pos+=e},n.prototype.reset=function(){this.pos=0},n.prototype.makeSubStream=function(e,t){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new dQ(this.buffer,e,t)},n.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},n.prototype.readBlock=function(){throw new sl(this.constructor.name,"readBlock")},n.prototype.ensureBuffer=function(e){var t=this.buffer;if(e<=t.byteLength)return t;for(var r=this.minBufferLength;r<e;)r*=2;var s=new Uint8Array(r);return s.set(t),this.buffer=s},n}(),LW=function(n){return n===32||n===9||n===13||n===10},Lxe=function(n){Ve(e,n);function e(t,r){var s=n.call(this,r)||this;return s.stream=t,s.input=new Uint8Array(5),r&&(r=.8*r),s}return e.prototype.readBlock=function(){for(var t=126,r=122,s=-1,i=this.stream,a=i.getByte();LW(a);)a=i.getByte();if(a===s||a===t){this.eof=!0;return}var o=this.bufferLength,l,c;if(a===r){for(l=this.ensureBuffer(o+4),c=0;c<4;++c)l[o+c]=0;this.bufferLength+=4}else{var u=this.input;for(u[0]=a,c=1;c<5;++c){for(a=i.getByte();LW(a);)a=i.getByte();if(u[c]=a,a===s||a===t)break}if(l=this.ensureBuffer(o+c-1),this.bufferLength+=c-1,c<5){for(;c<5;++c)u[c]=117;this.eof=!0}var h=0;for(c=0;c<5;++c)h=h*85+(u[c]-33);for(c=3;c>=0;--c)l[o+c]=h&255,h>>=8}},e}(eC),Mxe=function(n){Ve(e,n);function e(t,r){var s=n.call(this,r)||this;return s.stream=t,s.firstDigit=-1,r&&(r=.5*r),s}return e.prototype.readBlock=function(){var t=8e3,r=this.stream.getBytes(t);if(!r.length){this.eof=!0;return}for(var s=r.length+1>>1,i=this.ensureBuffer(this.bufferLength+s),a=this.bufferLength,o=this.firstDigit,l=0,c=r.length;l<c;l++){var u=r[l],h=void 0;if(u>=48&&u<=57)h=u&15;else if(u>=65&&u<=70||u>=97&&u<=102)h=(u&15)+9;else if(u===62){this.eof=!0;break}else continue;o<0?o=h:(i[a++]=o<<4|h,o=-1)}o>=0&&this.eof&&(i[a++]=o<<4,o=-1),this.firstDigit=o,this.bufferLength=a},e}(eC),MW=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$xe=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),zxe=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),Bxe=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],Vxe=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],jxe=function(n){Ve(e,n);function e(t,r){var s=n.call(this,r)||this;s.stream=t;var i=t.getByte(),a=t.getByte();if(i===-1||a===-1)throw new Error("Invalid header in flate stream: "+i+", "+a);if((i&15)!==8)throw new Error("Unknown compression method in flate stream: "+i+", "+a);if(((i<<8)+a)%31!==0)throw new Error("Bad FCHECK in flate stream: "+i+", "+a);if(a&32)throw new Error("FDICT bit set in flate stream: "+i+", "+a);return s.codeSize=0,s.codeBuf=0,s}return e.prototype.readBlock=function(){var t,r,s=this.stream,i=this.getBits(3);if(i&1&&(this.eof=!0),i>>=1,i===0){var a=void 0;if((a=s.getByte())===-1)throw new Error("Bad block header in flate stream");var o=a;if((a=s.getByte())===-1)throw new Error("Bad block header in flate stream");if(o|=a<<8,(a=s.getByte())===-1)throw new Error("Bad block header in flate stream");var l=a;if((a=s.getByte())===-1)throw new Error("Bad block header in flate stream");if(l|=a<<8,l!==(~o&65535)&&(o!==0||l!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var c=this.bufferLength;t=this.ensureBuffer(c+o);var u=c+o;if(this.bufferLength=u,o===0)s.peekByte()===-1&&(this.eof=!0);else for(var h=c;h<u;++h){if((a=s.getByte())===-1){this.eof=!0;break}t[h]=a}return}var d,f;if(i===1)d=Bxe,f=Vxe;else if(i===2){var p=this.getBits(5)+257,m=this.getBits(5)+1,y=this.getBits(4)+4,g=new Uint8Array(MW.length),v=void 0;for(v=0;v<y;++v)g[MW[v]]=this.getBits(3);var b=this.generateHuffmanTable(g);r=0,v=0;for(var w=p+m,C=new Uint8Array(w),I=void 0,T=void 0,E=void 0;v<w;){var A=this.getCode(b);if(A===16)I=2,T=3,E=r;else if(A===17)I=3,T=3,E=r=0;else if(A===18)I=7,T=11,E=r=0;else{C[v++]=r=A;continue}for(var N=this.getBits(I)+T;N-- >0;)C[v++]=E}d=this.generateHuffmanTable(C.subarray(0,p)),f=this.generateHuffmanTable(C.subarray(p,w))}else throw new Error("Unknown block type in flate stream");t=this.buffer;for(var F=t?t.length:0,_=this.bufferLength;;){var D=this.getCode(d);if(D<256){_+1>=F&&(t=this.ensureBuffer(_+1),F=t.length),t[_++]=D;continue}if(D===256){this.bufferLength=_;return}D-=257,D=$xe[D];var R=D>>16;R>0&&(R=this.getBits(R)),r=(D&65535)+R,D=this.getCode(f),D=zxe[D],R=D>>16,R>0&&(R=this.getBits(R));var B=(D&65535)+R;_+r>=F&&(t=this.ensureBuffer(_+r),F=t.length);for(var z=0;z<r;++z,++_)t[_]=t[_-B]}},e.prototype.getBits=function(t){for(var r=this.stream,s=this.codeSize,i=this.codeBuf,a;s<t;){if((a=r.getByte())===-1)throw new Error("Bad encoding in flate stream");i|=a<<s,s+=8}return a=i&(1<<t)-1,this.codeBuf=i>>t,this.codeSize=s-=t,a},e.prototype.getCode=function(t){for(var r=this.stream,s=t[0],i=t[1],a=this.codeSize,o=this.codeBuf,l;a<i&&(l=r.getByte())!==-1;)o|=l<<a,a+=8;var c=s[o&(1<<i)-1];typeof s=="number"&&console.log("FLATE:",c);var u=c>>16,h=c&65535;if(u<1||a<u)throw new Error("Bad encoding in flate stream");return this.codeBuf=o>>u,this.codeSize=a-u,h},e.prototype.generateHuffmanTable=function(t){var r=t.length,s=0,i;for(i=0;i<r;++i)t[i]>s&&(s=t[i]);for(var a=1<<s,o=new Int32Array(a),l=1,c=0,u=2;l<=s;++l,c<<=1,u<<=1)for(var h=0;h<r;++h)if(t[h]===l){var d=0,f=c;for(i=0;i<l;++i)d=d<<1|f&1,f>>=1;for(i=d;i<a;i+=u)o[i]=l<<16|h;++c}return[o,s]},e}(eC),Uxe=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,r)||this;i.stream=t,i.cachedData=0,i.bitsCached=0;for(var a=4096,o={earlyChange:s,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(a),dictionaryLengths:new Uint16Array(a),dictionaryPrevCodes:new Uint16Array(a),currentSequence:new Uint8Array(a),currentSequenceLength:0},l=0;l<256;++l)o.dictionaryValues[l]=l,o.dictionaryLengths[l]=1;return i.lzwState=o,i}return e.prototype.readBlock=function(){var t=512,r=t*2,s=t,i,a,o,l=this.lzwState;if(l){var c=l.earlyChange,u=l.nextCode,h=l.dictionaryValues,d=l.dictionaryLengths,f=l.dictionaryPrevCodes,p=l.codeLength,m=l.prevCode,y=l.currentSequence,g=l.currentSequenceLength,v=0,b=this.bufferLength,w=this.ensureBuffer(this.bufferLength+r);for(i=0;i<t;i++){var C=this.readBits(p),I=g>0;if(!C||C<256)y[0]=C,g=1;else if(C>=258)if(C<u)for(g=d[C],a=g-1,o=C;a>=0;a--)y[a]=h[o],o=f[o];else y[g++]=y[0];else if(C===256){p=9,u=258,g=0;continue}else{this.eof=!0,delete this.lzwState;break}if(I&&(f[u]=m,d[u]=d[m]+1,h[u]=y[0],u++,p=u+c&u+c-1?p:Math.min(Math.log(u+c)/.6931471805599453+1,12)|0),m=C,v+=g,r<v){do r+=s;while(r<v);w=this.ensureBuffer(this.bufferLength+r)}for(a=0;a<g;a++)w[b++]=y[a]}l.nextCode=u,l.codeLength=p,l.prevCode=m,l.currentSequenceLength=g,this.bufferLength=b}},e.prototype.readBits=function(t){for(var r=this.bitsCached,s=this.cachedData;r<t;){var i=this.stream.getByte();if(i===-1)return this.eof=!0,null;s=s<<8|i,r+=8}return this.bitsCached=r-=t,this.cachedData=s,s>>>r&(1<<t)-1},e}(eC),Wxe=function(n){Ve(e,n);function e(t,r){var s=n.call(this,r)||this;return s.stream=t,s}return e.prototype.readBlock=function(){var t=this.stream.getBytes(2);if(!t||t.length<2||t[0]===128){this.eof=!0;return}var r,s=this.bufferLength,i=t[0];if(i<128){if(r=this.ensureBuffer(s+i+1),r[s++]=t[1],i>0){var a=this.stream.getBytes(i);r.set(a,s),s+=i}}else{i=257-i;var o=t[1];r=this.ensureBuffer(s+i+1);for(var l=0;l<i;l++)r[s++]=o}this.bufferLength=s},e}(eC),$W=function(n,e,t){if(e===Q.of("FlateDecode"))return new jxe(n);if(e===Q.of("LZWDecode")){var r=1;if(t instanceof Pt){var s=t.lookup(Q.of("EarlyChange"));s instanceof Tt&&(r=s.asNumber())}return new Uxe(n,void 0,r)}if(e===Q.of("ASCII85Decode"))return new Lxe(n);if(e===Q.of("ASCIIHexDecode"))return new Mxe(n);if(e===Q.of("RunLengthDecode"))return new Wxe(n);throw new Jve(e.asString())},fQ=function(n){var e=n.dict,t=n.contents,r=new dQ(t),s=e.lookup(Q.of("Filter")),i=e.lookup(Q.of("DecodeParms"));if(s instanceof Q)r=$W(r,s,i);else if(s instanceof wn)for(var a=0,o=s.size();a<o;a++)r=$W(r,s.lookup(a,Q),i&&i.lookupMaybe(a,Pt));else if(s)throw new yN([Q,wn],s);return r},Gxe=function(n){var e=n.MediaBox(),t=e.lookup(2,Tt).asNumber()-e.lookup(0,Tt).asNumber(),r=e.lookup(3,Tt).asNumber()-e.lookup(1,Tt).asNumber();return{left:0,bottom:0,right:t,top:r}},Hxe=function(n){return[1,0,0,1,-n.left,-n.bottom]},pQ=function(){function n(e,t,r){this.page=e;var s=t??Gxe(e);this.width=s.right-s.left,this.height=s.top-s.bottom,this.boundingBox=s,this.transformationMatrix=r??Hxe(s)}return n.for=function(e,t,r){return Mt(this,void 0,void 0,function(){return $t(this,function(s){return[2,new n(e,t,r)]})})},n.prototype.embedIntoContext=function(e,t){return Mt(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h,d;return $t(this,function(f){if(r=this.page.normalizedEntries(),s=r.Contents,i=r.Resources,!s)throw new exe;return a=this.decodeContents(s),o=this.boundingBox,l=o.left,c=o.bottom,u=o.right,h=o.top,d=e.flateStream(a,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[l,c,u,h],Matrix:this.transformationMatrix,Resources:i}),t?(e.assign(t,d),[2,t]):[2,e.register(d)]})})},n.prototype.decodeContents=function(e){for(var t=Uint8Array.of(ee.Newline),r=[],s=0,i=e.size();s<i;s++){var a=e.lookup(s,wo),o=void 0;if(a instanceof FS)o=fQ(a).decode();else if(a instanceof G1)o=a.getUnencodedContents();else throw new txe(a);r.push(o,t)}return v0e.apply(void 0,r)},n}(),$E=function(n,e){if(n!==void 0)return e[n]},H1;(function(n){n.UseNone="UseNone",n.UseOutlines="UseOutlines",n.UseThumbs="UseThumbs",n.UseOC="UseOC"})(H1||(H1={}));var q1;(function(n){n.L2R="L2R",n.R2L="R2L"})(q1||(q1={}));var K1;(function(n){n.None="None",n.AppDefault="AppDefault"})(K1||(K1={}));var bN;(function(n){n.Simplex="Simplex",n.DuplexFlipShortEdge="DuplexFlipShortEdge",n.DuplexFlipLongEdge="DuplexFlipLongEdge"})(bN||(bN={}));var zW=function(){function n(e){this.dict=e}return n.prototype.lookupBool=function(e){var t=this.dict.lookup(Q.of(e));if(t instanceof DS)return t},n.prototype.lookupName=function(e){var t=this.dict.lookup(Q.of(e));if(t instanceof Q)return t},n.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},n.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},n.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},n.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},n.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},n.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},n.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},n.prototype.Direction=function(){return this.lookupName("Direction")},n.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},n.prototype.Duplex=function(){return this.lookupName("Duplex")},n.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},n.prototype.PrintPageRange=function(){var e=this.dict.lookup(Q.of("PrintPageRange"));if(e instanceof wn)return e},n.prototype.NumCopies=function(){var e=this.dict.lookup(Q.of("NumCopies"));if(e instanceof Tt)return e},n.prototype.getHideToolbar=function(){var e,t;return(t=(e=this.HideToolbar())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getHideMenubar=function(){var e,t;return(t=(e=this.HideMenubar())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getHideWindowUI=function(){var e,t;return(t=(e=this.HideWindowUI())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getFitWindow=function(){var e,t;return(t=(e=this.FitWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getCenterWindow=function(){var e,t;return(t=(e=this.CenterWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getDisplayDocTitle=function(){var e,t;return(t=(e=this.DisplayDocTitle())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getNonFullScreenPageMode=function(){var e,t,r=(e=this.NonFullScreenPageMode())===null||e===void 0?void 0:e.decodeText();return(t=$E(r,H1))!==null&&t!==void 0?t:H1.UseNone},n.prototype.getReadingDirection=function(){var e,t,r=(e=this.Direction())===null||e===void 0?void 0:e.decodeText();return(t=$E(r,q1))!==null&&t!==void 0?t:q1.L2R},n.prototype.getPrintScaling=function(){var e,t,r=(e=this.PrintScaling())===null||e===void 0?void 0:e.decodeText();return(t=$E(r,K1))!==null&&t!==void 0?t:K1.AppDefault},n.prototype.getDuplex=function(){var e,t=(e=this.Duplex())===null||e===void 0?void 0:e.decodeText();return $E(t,bN)},n.prototype.getPickTrayByPDFSize=function(){var e;return(e=this.PickTrayByPDFSize())===null||e===void 0?void 0:e.asBoolean()},n.prototype.getPrintPageRange=function(){var e=this.PrintPageRange();if(!e)return[];for(var t=[],r=0;r<e.size();r+=2){var s=e.lookup(r,Tt).asNumber(),i=e.lookup(r+1,Tt).asNumber();t.push({start:s,end:i})}return t},n.prototype.getNumCopies=function(){var e,t;return(t=(e=this.NumCopies())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:1},n.prototype.setHideToolbar=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("HideToolbar"),t)},n.prototype.setHideMenubar=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("HideMenubar"),t)},n.prototype.setHideWindowUI=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("HideWindowUI"),t)},n.prototype.setFitWindow=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("FitWindow"),t)},n.prototype.setCenterWindow=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("CenterWindow"),t)},n.prototype.setDisplayDocTitle=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("DisplayDocTitle"),t)},n.prototype.setNonFullScreenPageMode=function(e){of(e,"nonFullScreenPageMode",H1);var t=Q.of(e);this.dict.set(Q.of("NonFullScreenPageMode"),t)},n.prototype.setReadingDirection=function(e){of(e,"readingDirection",q1);var t=Q.of(e);this.dict.set(Q.of("Direction"),t)},n.prototype.setPrintScaling=function(e){of(e,"printScaling",K1);var t=Q.of(e);this.dict.set(Q.of("PrintScaling"),t)},n.prototype.setDuplex=function(e){of(e,"duplex",bN);var t=Q.of(e);this.dict.set(Q.of("Duplex"),t)},n.prototype.setPickTrayByPDFSize=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("PickTrayByPDFSize"),t)},n.prototype.setPrintPageRange=function(e){Array.isArray(e)||(e=[e]);for(var t=[],r=0,s=e.length;r<s;r++)t.push(e[r].start),t.push(e[r].end);nQ(t,"printPageRange",["number"]);var i=this.dict.context.obj(t);this.dict.set(Q.of("PrintPageRange"),i)},n.prototype.setNumCopies=function(e){go(e,"numCopies",1,Number.MAX_VALUE),Qve(e,"numCopies");var t=this.dict.context.obj(e);this.dict.set(Q.of("NumCopies"),t)},n.fromDict=function(e){return new n(e)},n.create=function(e){var t=e.obj({});return new n(t)},n}(),qxe=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,mQ=function(){function n(e,t){this.dict=e,this.ref=t}return n.prototype.T=function(){return this.dict.lookupMaybe(Q.of("T"),_n,bt)},n.prototype.Ff=function(){var e=this.getInheritableAttribute(Q.of("Ff"));return this.dict.context.lookupMaybe(e,Tt)},n.prototype.V=function(){var e=this.getInheritableAttribute(Q.of("V"));return this.dict.context.lookup(e)},n.prototype.Kids=function(){return this.dict.lookupMaybe(Q.of("Kids"),wn)},n.prototype.DA=function(){var e=this.dict.lookup(Q.of("DA"));if(e instanceof _n||e instanceof bt)return e},n.prototype.setKids=function(e){this.dict.set(Q.of("Kids"),this.dict.context.obj(e))},n.prototype.getParent=function(){var e=this.dict.get(Q.of("Parent"));if(e instanceof Rn){var t=this.dict.lookup(Q.of("Parent"),Pt);return new n(t,e)}},n.prototype.setParent=function(e){e?this.dict.set(Q.of("Parent"),e):this.dict.delete(Q.of("Parent"))},n.prototype.getFullyQualifiedName=function(){var e=this.getParent();return e?e.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},n.prototype.getPartialName=function(){var e;return(e=this.T())===null||e===void 0?void 0:e.decodeText()},n.prototype.setPartialName=function(e){e?this.dict.set(Q.of("T"),bt.fromText(e)):this.dict.delete(Q.of("T"))},n.prototype.setDefaultAppearance=function(e){this.dict.set(Q.of("DA"),_n.of(e))},n.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof bt?e.decodeText():e==null?void 0:e.asString()},n.prototype.setFontSize=function(e){var t,r=(t=this.getFullyQualifiedName())!==null&&t!==void 0?t:"",s=this.getDefaultAppearance();if(!s)throw new ixe(r);var i=C5(s,qxe);if(!i.match)throw new axe(r);var a=s.slice(0,i.pos-i.match[0].length),o=i.pos<=s.length?s.slice(i.pos):"",l=i.match[1],c=a+" /"+l+" "+e+" Tf "+o;this.setDefaultAppearance(c)},n.prototype.getFlags=function(){var e,t;return(t=(e=this.Ff())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:0},n.prototype.setFlags=function(e){this.dict.set(Q.of("Ff"),Tt.of(e))},n.prototype.hasFlag=function(e){var t=this.getFlags();return(t&e)!==0},n.prototype.setFlag=function(e){var t=this.getFlags();this.setFlags(t|e)},n.prototype.clearFlag=function(e){var t=this.getFlags();this.setFlags(t&~e)},n.prototype.setFlagTo=function(e,t){t?this.setFlag(e):this.clearFlag(e)},n.prototype.getInheritableAttribute=function(e){var t;return this.ascend(function(r){t||(t=r.dict.get(e))}),t},n.prototype.ascend=function(e){e(this);var t=this.getParent();t&&t.ascend(e)},n}(),IO=function(){function n(e){this.dict=e}return n.prototype.W=function(){var e=this.dict.lookup(Q.of("W"));if(e instanceof Tt)return e},n.prototype.getWidth=function(){var e,t;return(t=(e=this.W())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:1},n.prototype.setWidth=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("W"),t)},n.fromDict=function(e){return new n(e)},n}(),Kxe=function(){function n(e){this.dict=e}return n.prototype.Rect=function(){return this.dict.lookup(Q.of("Rect"),wn)},n.prototype.AP=function(){return this.dict.lookupMaybe(Q.of("AP"),Pt)},n.prototype.F=function(){var e=this.dict.lookup(Q.of("F"));return this.dict.context.lookupMaybe(e,Tt)},n.prototype.getRectangle=function(){var e,t=this.Rect();return(e=t==null?void 0:t.asRectangle())!==null&&e!==void 0?e:{x:0,y:0,width:0,height:0}},n.prototype.setRectangle=function(e){var t=e.x,r=e.y,s=e.width,i=e.height,a=this.dict.context.obj([t,r,t+s,r+i]);this.dict.set(Q.of("Rect"),a)},n.prototype.getAppearanceState=function(){var e=this.dict.lookup(Q.of("AS"));if(e instanceof Q)return e},n.prototype.setAppearanceState=function(e){this.dict.set(Q.of("AS"),e)},n.prototype.setAppearances=function(e){this.dict.set(Q.of("AP"),e)},n.prototype.ensureAP=function(){var e=this.AP();return e||(e=this.dict.context.obj({}),this.dict.set(Q.of("AP"),e)),e},n.prototype.getNormalAppearance=function(){var e=this.ensureAP(),t=e.get(Q.of("N"));if(t instanceof Rn||t instanceof Pt)return t;throw new Error("Unexpected N type: "+(t==null?void 0:t.constructor.name))},n.prototype.setNormalAppearance=function(e){var t=this.ensureAP();t.set(Q.of("N"),e)},n.prototype.setRolloverAppearance=function(e){var t=this.ensureAP();t.set(Q.of("R"),e)},n.prototype.setDownAppearance=function(e){var t=this.ensureAP();t.set(Q.of("D"),e)},n.prototype.removeRolloverAppearance=function(){var e=this.AP();e==null||e.delete(Q.of("R"))},n.prototype.removeDownAppearance=function(){var e=this.AP();e==null||e.delete(Q.of("D"))},n.prototype.getAppearances=function(){var e=this.AP();if(e){var t=e.lookup(Q.of("N"),Pt,wo),r=e.lookupMaybe(Q.of("R"),Pt,wo),s=e.lookupMaybe(Q.of("D"),Pt,wo);return{normal:t,rollover:r,down:s}}},n.prototype.getFlags=function(){var e,t;return(t=(e=this.F())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:0},n.prototype.setFlags=function(e){this.dict.set(Q.of("F"),Tt.of(e))},n.prototype.hasFlag=function(e){var t=this.getFlags();return(t&e)!==0},n.prototype.setFlag=function(e){var t=this.getFlags();this.setFlags(t|e)},n.prototype.clearFlag=function(e){var t=this.getFlags();this.setFlags(t&~e)},n.prototype.setFlagTo=function(e,t){t?this.setFlag(e):this.clearFlag(e)},n.fromDict=function(e){return new n(e)},n}(),AO=function(){function n(e){this.dict=e}return n.prototype.R=function(){var e=this.dict.lookup(Q.of("R"));if(e instanceof Tt)return e},n.prototype.BC=function(){var e=this.dict.lookup(Q.of("BC"));if(e instanceof wn)return e},n.prototype.BG=function(){var e=this.dict.lookup(Q.of("BG"));if(e instanceof wn)return e},n.prototype.CA=function(){var e=this.dict.lookup(Q.of("CA"));if(e instanceof bt||e instanceof _n)return e},n.prototype.RC=function(){var e=this.dict.lookup(Q.of("RC"));if(e instanceof bt||e instanceof _n)return e},n.prototype.AC=function(){var e=this.dict.lookup(Q.of("AC"));if(e instanceof bt||e instanceof _n)return e},n.prototype.getRotation=function(){var e;return(e=this.R())===null||e===void 0?void 0:e.asNumber()},n.prototype.getBorderColor=function(){var e=this.BC();if(e){for(var t=[],r=0,s=e==null?void 0:e.size();r<s;r++){var i=e.get(r);i instanceof Tt&&t.push(i.asNumber())}return t}},n.prototype.getBackgroundColor=function(){var e=this.BG();if(e){for(var t=[],r=0,s=e==null?void 0:e.size();r<s;r++){var i=e.get(r);i instanceof Tt&&t.push(i.asNumber())}return t}},n.prototype.getCaptions=function(){var e=this.CA(),t=this.RC(),r=this.AC();return{normal:e==null?void 0:e.decodeText(),rollover:t==null?void 0:t.decodeText(),down:r==null?void 0:r.decodeText()}},n.prototype.setRotation=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("R"),t)},n.prototype.setBorderColor=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("BC"),t)},n.prototype.setBackgroundColor=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("BG"),t)},n.prototype.setCaptions=function(e){var t=bt.fromText(e.normal);if(this.dict.set(Q.of("CA"),t),e.rollover){var r=bt.fromText(e.rollover);this.dict.set(Q.of("RC"),r)}else this.dict.delete(Q.of("RC"));if(e.down){var s=bt.fromText(e.down);this.dict.set(Q.of("AC"),s)}else this.dict.delete(Q.of("AC"))},n.fromDict=function(e){return new n(e)},n}(),VM=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.MK=function(){var t=this.dict.lookup(Q.of("MK"));if(t instanceof Pt)return t},e.prototype.BS=function(){var t=this.dict.lookup(Q.of("BS"));if(t instanceof Pt)return t},e.prototype.DA=function(){var t=this.dict.lookup(Q.of("DA"));if(t instanceof _n||t instanceof bt)return t},e.prototype.P=function(){var t=this.dict.get(Q.of("P"));if(t instanceof Rn)return t},e.prototype.setP=function(t){this.dict.set(Q.of("P"),t)},e.prototype.setDefaultAppearance=function(t){this.dict.set(Q.of("DA"),_n.of(t))},e.prototype.getDefaultAppearance=function(){var t=this.DA();return t instanceof bt?t.decodeText():t==null?void 0:t.asString()},e.prototype.getAppearanceCharacteristics=function(){var t=this.MK();if(t)return AO.fromDict(t)},e.prototype.getOrCreateAppearanceCharacteristics=function(){var t=this.MK();if(t)return AO.fromDict(t);var r=AO.fromDict(this.dict.context.obj({}));return this.dict.set(Q.of("MK"),r.dict),r},e.prototype.getBorderStyle=function(){var t=this.BS();if(t)return IO.fromDict(t)},e.prototype.getOrCreateBorderStyle=function(){var t=this.BS();if(t)return IO.fromDict(t);var r=IO.fromDict(this.dict.context.obj({}));return this.dict.set(Q.of("BS"),r.dict),r},e.prototype.getOnValue=function(){var t,r=(t=this.getAppearances())===null||t===void 0?void 0:t.normal;if(r instanceof Pt)for(var s=r.keys(),i=0,a=s.length;i<a;i++){var o=s[i];if(o!==Q.of("Off"))return o}},e.fromDict=function(t){return new e(t)},e.create=function(t,r){var s=t.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:r});return new e(s)},e}(Kxe),$x=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.FT=function(){var t=this.getInheritableAttribute(Q.of("FT"));return this.dict.context.lookup(t,Q)},e.prototype.getWidgets=function(){var t=this.Kids();if(!t)return[VM.fromDict(this.dict)];for(var r=new Array(t.size()),s=0,i=t.size();s<i;s++){var a=t.lookup(s,Pt);r[s]=VM.fromDict(a)}return r},e.prototype.addWidget=function(t){var r=this.normalizedEntries().Kids;r.push(t)},e.prototype.removeWidget=function(t){var r=this.Kids();if(r){if(t<0||t>r.size())throw new vN(t,0,r.size());r.remove(t)}else{if(t!==0)throw new vN(t,0,0);this.setKids([])}},e.prototype.normalizedEntries=function(){var t=this.Kids();return t||(t=this.dict.context.obj([this.ref]),this.dict.set(Q.of("Kids"),t)),{Kids:t}},e.fromDict=function(t,r){return new e(t,r)},e}(mQ),z5=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.Opt=function(){return this.dict.lookupMaybe(Q.of("Opt"),_n,bt,wn)},e.prototype.setOpt=function(t){this.dict.set(Q.of("Opt"),this.dict.context.obj(t))},e.prototype.getExportValues=function(){var t=this.Opt();if(t){if(t instanceof _n||t instanceof bt)return[t];for(var r=[],s=0,i=t.size();s<i;s++){var a=t.lookup(s);(a instanceof _n||a instanceof bt)&&r.push(a)}return r}},e.prototype.removeExportValue=function(t){var r=this.Opt();if(r)if(r instanceof _n||r instanceof bt){if(t!==0)throw new vN(t,0,0);this.setOpt([])}else{if(t<0||t>r.size())throw new vN(t,0,r.size());r.remove(t)}},e.prototype.normalizeExportValues=function(){for(var t,r,s,i,a=(t=this.getExportValues())!==null&&t!==void 0?t:[],o=[],l=this.getWidgets(),c=0,u=l.length;c<u;c++){var h=l[c],d=(r=a[c])!==null&&r!==void 0?r:bt.fromText((i=(s=h.getOnValue())===null||s===void 0?void 0:s.decodeText())!==null&&i!==void 0?i:"");o.push(d)}this.setOpt(o)},e.prototype.addOpt=function(t,r){var s;this.normalizeExportValues();var i=t.decodeText(),a;if(r)for(var o=(s=this.getExportValues())!==null&&s!==void 0?s:[],l=0,c=o.length;l<c;l++){var u=o[l];u.decodeText()===i&&(a=l)}var h=this.Opt();return h.push(t),a??h.size()-1},e.prototype.addWidgetWithOpt=function(t,r,s){var i=this.addOpt(r,s),a=Q.of(String(i));return this.addWidget(t),a},e}($x),wR=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setValue=function(t){var r,s=(r=this.getOnValue())!==null&&r!==void 0?r:Q.of("Yes");if(t!==s&&t!==Q.of("Off"))throw new P5;this.dict.set(Q.of("V"),t);for(var i=this.getWidgets(),a=0,o=i.length;a<o;a++){var l=i[a],c=l.getOnValue()===t?t:Q.of("Off");l.setAppearanceState(c)}},e.prototype.getValue=function(){var t=this.V();return t instanceof Q?t:Q.of("Off")},e.prototype.getOnValue=function(){var t=this.getWidgets()[0];return t==null?void 0:t.getOnValue()},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Btn",Kids:[]}),s=t.register(r);return new e(r,s)},e}(z5),es=function(n){return 1<<n},Il;(function(n){n[n.ReadOnly=es(0)]="ReadOnly",n[n.Required=es(1)]="Required",n[n.NoExport=es(2)]="NoExport"})(Il||(Il={}));var Yo;(function(n){n[n.NoToggleToOff=es(14)]="NoToggleToOff",n[n.Radio=es(15)]="Radio",n[n.PushButton=es(16)]="PushButton",n[n.RadiosInUnison=es(25)]="RadiosInUnison"})(Yo||(Yo={}));var xr;(function(n){n[n.Multiline=es(12)]="Multiline",n[n.Password=es(13)]="Password",n[n.FileSelect=es(20)]="FileSelect",n[n.DoNotSpellCheck=es(22)]="DoNotSpellCheck",n[n.DoNotScroll=es(23)]="DoNotScroll",n[n.Comb=es(24)]="Comb",n[n.RichText=es(25)]="RichText"})(xr||(xr={}));var Nn;(function(n){n[n.Combo=es(17)]="Combo",n[n.Edit=es(18)]="Edit",n[n.Sort=es(19)]="Sort",n[n.MultiSelect=es(21)]="MultiSelect",n[n.DoNotSpellCheck=es(22)]="DoNotSpellCheck",n[n.CommitOnSelChange=es(26)]="CommitOnSelChange"})(Nn||(Nn={}));var gQ=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setValues=function(t){if(this.hasFlag(Nn.Combo)&&!this.hasFlag(Nn.Edit)&&!this.valuesAreValid(t))throw new P5;if(t.length===0&&this.dict.delete(Q.of("V")),t.length===1&&this.dict.set(Q.of("V"),t[0]),t.length>1){if(!this.hasFlag(Nn.MultiSelect))throw new sxe;this.dict.set(Q.of("V"),this.dict.context.obj(t))}this.updateSelectedIndices(t)},e.prototype.valuesAreValid=function(t){for(var r=this.getOptions(),s=function(l,c){var u=t[l].decodeText();if(!r.find(function(h){return u===(h.display||h.value).decodeText()}))return{value:!1}},i=0,a=t.length;i<a;i++){var o=s(i);if(typeof o=="object")return o.value}return!0},e.prototype.updateSelectedIndices=function(t){if(t.length>1){for(var r=new Array(t.length),s=this.getOptions(),i=function(l,c){var u=t[l].decodeText();r[l]=s.findIndex(function(h){return u===(h.display||h.value).decodeText()})},a=0,o=t.length;a<o;a++)i(a,o);this.dict.set(Q.of("I"),this.dict.context.obj(r.sort()))}else this.dict.delete(Q.of("I"))},e.prototype.getValues=function(){var t=this.V();if(t instanceof _n||t instanceof bt)return[t];if(t instanceof wn){for(var r=[],s=0,i=t.size();s<i;s++){var a=t.lookup(s);(a instanceof _n||a instanceof bt)&&r.push(a)}return r}return[]},e.prototype.Opt=function(){return this.dict.lookupMaybe(Q.of("Opt"),_n,bt,wn)},e.prototype.setOptions=function(t){for(var r=new Array(t.length),s=0,i=t.length;s<i;s++){var a=t[s],o=a.value,l=a.display;r[s]=this.dict.context.obj([o,l||o])}this.dict.set(Q.of("Opt"),this.dict.context.obj(r))},e.prototype.getOptions=function(){var t=this.Opt();if(t instanceof _n||t instanceof bt)return[{value:t,display:t}];if(t instanceof wn){for(var r=[],s=0,i=t.size();s<i;s++){var a=t.lookup(s);if((a instanceof _n||a instanceof bt)&&r.push({value:a,display:a}),a instanceof wn&&a.size()>0){var o=a.lookup(0,_n,bt),l=a.lookupMaybe(1,_n,bt);r.push({value:o,display:l||o})}}return r}return[]},e}($x),SR=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Ch",Ff:Nn.Combo,Kids:[]}),s=t.register(r);return new e(r,s)},e}(gQ),wN=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.addField=function(t){var r=this.normalizedEntries().Kids;r==null||r.push(t)},e.prototype.normalizedEntries=function(){var t=this.Kids();return t||(t=this.dict.context.obj([]),this.dict.set(Q.of("Kids"),t)),{Kids:t}},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({}),s=t.register(r);return new e(r,s)},e}(mQ),B5=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e}($x),kR=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.MaxLen=function(){var t=this.dict.lookup(Q.of("MaxLen"));if(t instanceof Tt)return t},e.prototype.Q=function(){var t=this.dict.lookup(Q.of("Q"));if(t instanceof Tt)return t},e.prototype.setMaxLength=function(t){this.dict.set(Q.of("MaxLen"),Tt.of(t))},e.prototype.removeMaxLength=function(){this.dict.delete(Q.of("MaxLen"))},e.prototype.getMaxLength=function(){var t;return(t=this.MaxLen())===null||t===void 0?void 0:t.asNumber()},e.prototype.setQuadding=function(t){this.dict.set(Q.of("Q"),Tt.of(t))},e.prototype.getQuadding=function(){var t;return(t=this.Q())===null||t===void 0?void 0:t.asNumber()},e.prototype.setValue=function(t){this.dict.set(Q.of("V"),t)},e.prototype.removeValue=function(){this.dict.delete(Q.of("V"))},e.prototype.getValue=function(){var t=this.V();if(t instanceof _n||t instanceof bt)return t},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Tx",Kids:[]}),s=t.register(r);return new e(r,s)},e}($x),CR=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Btn",Ff:Yo.PushButton,Kids:[]}),s=t.register(r);return new e(r,s)},e}(z5),TR=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setValue=function(t){var r=this.getOnValues();if(!r.includes(t)&&t!==Q.of("Off"))throw new P5;this.dict.set(Q.of("V"),t);for(var s=this.getWidgets(),i=0,a=s.length;i<a;i++){var o=s[i],l=o.getOnValue()===t?t:Q.of("Off");o.setAppearanceState(l)}},e.prototype.getValue=function(){var t=this.V();return t instanceof Q?t:Q.of("Off")},e.prototype.getOnValues=function(){for(var t=this.getWidgets(),r=[],s=0,i=t.length;s<i;s++){var a=t[s].getOnValue();a&&r.push(a)}return r},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Btn",Ff:Yo.Radio,Kids:[]}),s=t.register(r);return new e(r,s)},e}(z5),ER=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Ch",Kids:[]}),s=t.register(r);return new e(r,s)},e}(gQ),V5=function(n){if(!n)return[];for(var e=[],t=0,r=n.size();t<r;t++){var s=n.get(t),i=n.lookup(t);s instanceof Rn&&i instanceof Pt&&e.push([yQ(i,s),s])}return e},yQ=function(n,e){var t=Xxe(n);return t?wN.fromDict(n,e):Yxe(n,e)},Xxe=function(n){var e=n.lookup(Q.of("Kids"));if(e instanceof wn)for(var t=0,r=e.size();t<r;t++){var s=e.lookup(t),i=s instanceof Pt&&s.has(Q.of("T"));if(i)return!0}return!1},Yxe=function(n,e){var t=j5(n,Q.of("FT")),r=n.context.lookup(t,Q);return r===Q.of("Btn")?Zxe(n,e):r===Q.of("Ch")?Qxe(n,e):r===Q.of("Tx")?kR.fromDict(n,e):r===Q.of("Sig")?B5.fromDict(n,e):$x.fromDict(n,e)},Zxe=function(n,e){var t,r=j5(n,Q.of("Ff")),s=n.context.lookupMaybe(r,Tt),i=(t=s==null?void 0:s.asNumber())!==null&&t!==void 0?t:0;return jM(i,Yo.PushButton)?CR.fromDict(n,e):jM(i,Yo.Radio)?TR.fromDict(n,e):wR.fromDict(n,e)},Qxe=function(n,e){var t,r=j5(n,Q.of("Ff")),s=n.context.lookupMaybe(r,Tt),i=(t=s==null?void 0:s.asNumber())!==null&&t!==void 0?t:0;return jM(i,Nn.Combo)?SR.fromDict(n,e):ER.fromDict(n,e)},jM=function(n,e){return(n&e)!==0},j5=function(n,e){var t;return vQ(n,function(r){t||(t=r.get(e))}),t},vQ=function(n,e){e(n);var t=n.lookupMaybe(Q.of("Parent"),Pt);t&&vQ(t,e)},SN=function(){function n(e){this.dict=e}return n.prototype.Fields=function(){var e=this.dict.lookup(Q.of("Fields"));if(e instanceof wn)return e},n.prototype.getFields=function(){for(var e=this.normalizedEntries().Fields,t=new Array(e.size()),r=0,s=e.size();r<s;r++){var i=e.get(r),a=e.lookup(r,Pt);t[r]=[yQ(a,i),i]}return t},n.prototype.getAllFields=function(){var e=[],t=function(r){if(r)for(var s=0,i=r.length;s<i;s++){var a=r[s];e.push(a);var o=a[0];o instanceof wN&&t(V5(o.Kids()))}};return t(this.getFields()),e},n.prototype.addField=function(e){var t=this.normalizedEntries().Fields;t==null||t.push(e)},n.prototype.removeField=function(e){var t=e.getParent(),r=t===void 0?this.normalizedEntries().Fields:t.Kids(),s=r==null?void 0:r.indexOf(e.ref);if(r===void 0||s===void 0)throw new Error("Tried to remove inexistent field "+e.getFullyQualifiedName());r.remove(s),t!==void 0&&r.size()===0&&this.removeField(t)},n.prototype.normalizedEntries=function(){var e=this.Fields();return e||(e=this.dict.context.obj([]),this.dict.set(Q.of("Fields"),e)),{Fields:e}},n.fromDict=function(e){return new n(e)},n.create=function(e){var t=e.obj({Fields:[]});return new n(t)},n}(),xQ=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.Pages=function(){return this.lookup(Q.of("Pages"),Pt)},e.prototype.AcroForm=function(){return this.lookupMaybe(Q.of("AcroForm"),Pt)},e.prototype.getAcroForm=function(){var t=this.AcroForm();if(t)return SN.fromDict(t)},e.prototype.getOrCreateAcroForm=function(){var t=this.getAcroForm();if(!t){t=SN.create(this.context);var r=this.context.register(t.dict);this.set(Q.of("AcroForm"),r)}return t},e.prototype.ViewerPreferences=function(){return this.lookupMaybe(Q.of("ViewerPreferences"),Pt)},e.prototype.getViewerPreferences=function(){var t=this.ViewerPreferences();if(t)return zW.fromDict(t)},e.prototype.getOrCreateViewerPreferences=function(){var t=this.getViewerPreferences();if(!t){t=zW.create(this.context);var r=this.context.register(t.dict);this.set(Q.of("ViewerPreferences"),r)}return t},e.prototype.insertLeafNode=function(t,r){var s=this.get(Q.of("Pages")),i=this.Pages().insertLeafNode(t,r);return i||s},e.prototype.removeLeafNode=function(t){this.Pages().removeLeafNode(t)},e.withContextAndPages=function(t,r){var s=new Map;return s.set(Q.of("Type"),Q.of("Catalog")),s.set(Q.of("Pages"),r),new e(s,t)},e.fromMapWithContext=function(t,r){return new e(t,r)},e}(Pt),bQ=function(n){Ve(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.Parent=function(){return this.lookup(Q.of("Parent"))},e.prototype.Kids=function(){return this.lookup(Q.of("Kids"),wn)},e.prototype.Count=function(){return this.lookup(Q.of("Count"),Tt)},e.prototype.pushTreeNode=function(t){var r=this.Kids();r.push(t)},e.prototype.pushLeafNode=function(t){var r=this.Kids();this.insertLeafKid(r.size(),t)},e.prototype.insertLeafNode=function(t,r){var s=this.Kids(),i=this.Count().asNumber();if(r>i)throw new EW(r,i);for(var a=r,o=0,l=s.size();o<l;o++){if(a===0){this.insertLeafKid(o,t);return}var c=s.get(o),u=this.context.lookup(c);if(u instanceof e){if(u.Count().asNumber()>a)return u.insertLeafNode(t,a)||c;a-=u.Count().asNumber()}u instanceof kh&&(a-=1)}if(a===0){this.insertLeafKid(s.size(),t);return}throw new IW(r,"insertLeafNode")},e.prototype.removeLeafNode=function(t,r){r===void 0&&(r=!0);var s=this.Kids(),i=this.Count().asNumber();if(t>=i)throw new EW(t,i);for(var a=t,o=0,l=s.size();o<l;o++){var c=s.get(o),u=this.context.lookup(c);if(u instanceof e)if(u.Count().asNumber()>a){u.removeLeafNode(a,r),r&&u.Kids().size()===0&&s.remove(o);return}else a-=u.Count().asNumber();if(u instanceof kh)if(a===0){this.removeKid(o);return}else a-=1}throw new IW(t,"removeLeafNode")},e.prototype.ascend=function(t){t(this);var r=this.Parent();r&&r.ascend(t)},e.prototype.traverse=function(t){for(var r=this.Kids(),s=0,i=r.size();s<i;s++){var a=r.get(s),o=this.context.lookup(a);o instanceof e&&o.traverse(t),t(o,a)}},e.prototype.insertLeafKid=function(t,r){var s=this.Kids();this.ascend(function(i){var a=i.Count().asNumber()+1;i.set(Q.of("Count"),Tt.of(a))}),s.insert(t,r)},e.prototype.removeKid=function(t){var r=this.Kids(),s=r.lookup(t);s instanceof kh&&this.ascend(function(i){var a=i.Count().asNumber()-1;i.set(Q.of("Count"),Tt.of(a))}),r.remove(t)},e.withContext=function(t,r){var s=new Map;return s.set(Q.of("Type"),Q.of("Pages")),s.set(Q.of("Kids"),t.obj([])),s.set(Q.of("Count"),t.obj(0)),r&&s.set(Q.of("Parent"),r),new e(s,t)},e.fromMapWithContext=function(t,r){return new e(t,r)},e}(Pt),Bi=new Uint8Array(256);Bi[ee.Zero]=1;Bi[ee.One]=1;Bi[ee.Two]=1;Bi[ee.Three]=1;Bi[ee.Four]=1;Bi[ee.Five]=1;Bi[ee.Six]=1;Bi[ee.Seven]=1;Bi[ee.Eight]=1;Bi[ee.Nine]=1;var IR=new Uint8Array(256);IR[ee.Period]=1;IR[ee.Plus]=1;IR[ee.Minus]=1;var U5=new Uint8Array(256);for(var Lw=0,Jxe=256;Lw<Jxe;Lw++)U5[Lw]=Bi[Lw]||IR[Lw]?1:0;var BW=ee.Newline,VW=ee.CarriageReturn,ebe=function(){function n(e,t){t===void 0&&(t=!1),this.bytes=e,this.capNumbers=t}return n.prototype.parseRawInt=function(){for(var e="";!this.bytes.done();){var t=this.bytes.peek();if(!Bi[t])break;e+=wh(this.bytes.next())}var r=Number(e);if(!e||!isFinite(r))throw new AW(this.bytes.position(),e);return r},n.prototype.parseRawNumber=function(){for(var e="";!this.bytes.done();){var t=this.bytes.peek();if(!U5[t]||(e+=wh(this.bytes.next()),t===ee.Period))break}for(;!this.bytes.done();){var t=this.bytes.peek();if(!Bi[t])break;e+=wh(this.bytes.next())}var r=Number(e);if(!e||!isFinite(r))throw new AW(this.bytes.position(),e);if(r>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var s="Parsed number that is too large for some PDF readers: "+e+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(s),Number.MAX_SAFE_INTEGER}else{var s="Parsed number that is too large for some PDF readers: "+e+", not capping.";console.warn(s)}return r},n.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&qh[this.bytes.peek()];)this.bytes.next()},n.prototype.skipLine=function(){for(;!this.bytes.done();){var e=this.bytes.peek();if(e===BW||e===VW)return;this.bytes.next()}},n.prototype.skipComment=function(){if(this.bytes.peek()!==ee.Percent)return!1;for(;!this.bytes.done();){var e=this.bytes.peek();if(e===BW||e===VW)return!0;this.bytes.next()}return!0},n.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},n.prototype.matchKeyword=function(e){for(var t=this.bytes.offset(),r=0,s=e.length;r<s;r++)if(this.bytes.done()||this.bytes.next()!==e[r])return this.bytes.moveTo(t),!1;return!0},n}(),AR=function(){function n(e){this.idx=0,this.line=0,this.column=0,this.bytes=e,this.length=this.bytes.length}return n.prototype.moveTo=function(e){this.idx=e},n.prototype.next=function(){var e=this.bytes[this.idx++];return e===ee.Newline?(this.line+=1,this.column=0):this.column+=1,e},n.prototype.assertNext=function(e){if(this.peek()!==e)throw new oxe(this.position(),e,this.peek());return this.next()},n.prototype.peek=function(){return this.bytes[this.idx]},n.prototype.peekAhead=function(e){return this.bytes[this.idx+e]},n.prototype.peekAt=function(e){return this.bytes[e]},n.prototype.done=function(){return this.idx>=this.length},n.prototype.offset=function(){return this.idx},n.prototype.slice=function(e,t){return this.bytes.slice(e,t)},n.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},n.of=function(e){return new n(e)},n.fromPDFRawStream=function(e){return n.of(fQ(e).decode())},n}(),tbe=ee.Space,Mw=ee.CarriageReturn,$w=ee.Newline,zw=[ee.s,ee.t,ee.r,ee.e,ee.a,ee.m],zE=[ee.e,ee.n,ee.d,ee.s,ee.t,ee.r,ee.e,ee.a,ee.m],Bn={header:[ee.Percent,ee.P,ee.D,ee.F,ee.Dash],eof:[ee.Percent,ee.Percent,ee.E,ee.O,ee.F],obj:[ee.o,ee.b,ee.j],endobj:[ee.e,ee.n,ee.d,ee.o,ee.b,ee.j],xref:[ee.x,ee.r,ee.e,ee.f],trailer:[ee.t,ee.r,ee.a,ee.i,ee.l,ee.e,ee.r],startxref:[ee.s,ee.t,ee.a,ee.r,ee.t,ee.x,ee.r,ee.e,ee.f],true:[ee.t,ee.r,ee.u,ee.e],false:[ee.f,ee.a,ee.l,ee.s,ee.e],null:[ee.n,ee.u,ee.l,ee.l],stream:zw,streamEOF1:mn(zw,[tbe,Mw,$w]),streamEOF2:mn(zw,[Mw,$w]),streamEOF3:mn(zw,[Mw]),streamEOF4:mn(zw,[$w]),endstream:zE,EOF1endstream:mn([Mw,$w],zE),EOF2endstream:mn([Mw],zE),EOF3endstream:mn([$w],zE)},wQ=function(n){Ve(e,n);function e(t,r,s){s===void 0&&(s=!1);var i=n.call(this,t,s)||this;return i.context=r,i}return e.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Bn.true))return DS.True;if(this.matchKeyword(Bn.false))return DS.False;if(this.matchKeyword(Bn.null))return Aa;var t=this.bytes.peek();if(t===ee.LessThan&&this.bytes.peekAhead(1)===ee.LessThan)return this.parseDictOrStream();if(t===ee.LessThan)return this.parseHexString();if(t===ee.LeftParen)return this.parseString();if(t===ee.ForwardSlash)return this.parseName();if(t===ee.LeftSquareBracket)return this.parseArray();if(U5[t])return this.parseNumberOrRef();throw new lxe(this.bytes.position(),t)},e.prototype.parseNumberOrRef=function(){var t=this.parseRawNumber();this.skipWhitespaceAndComments();var r=this.bytes.offset();if(Bi[this.bytes.peek()]){var s=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===ee.R)return this.bytes.assertNext(ee.R),Rn.of(t,s)}return this.bytes.moveTo(r),Tt.of(t)},e.prototype.parseHexString=function(){var t="";for(this.bytes.assertNext(ee.LessThan);!this.bytes.done()&&this.bytes.peek()!==ee.GreaterThan;)t+=wh(this.bytes.next());return this.bytes.assertNext(ee.GreaterThan),bt.of(t)},e.prototype.parseString=function(){for(var t=0,r=!1,s="";!this.bytes.done();){var i=this.bytes.next();if(s+=wh(i),r||(i===ee.LeftParen&&(t+=1),i===ee.RightParen&&(t-=1)),i===ee.BackSlash?r=!r:r&&(r=!1),t===0)return _n.of(s.substring(1,s.length-1))}throw new hxe(this.bytes.position())},e.prototype.parseName=function(){this.bytes.assertNext(ee.ForwardSlash);for(var t="";!this.bytes.done();){var r=this.bytes.peek();if(qh[r]||bl[r])break;t+=wh(r),this.bytes.next()}return Q.of(t)},e.prototype.parseArray=function(){this.bytes.assertNext(ee.LeftSquareBracket),this.skipWhitespaceAndComments();for(var t=wn.withContext(this.context);this.bytes.peek()!==ee.RightSquareBracket;){var r=this.parseObject();t.push(r),this.skipWhitespaceAndComments()}return this.bytes.assertNext(ee.RightSquareBracket),t},e.prototype.parseDict=function(){this.bytes.assertNext(ee.LessThan),this.bytes.assertNext(ee.LessThan),this.skipWhitespaceAndComments();for(var t=new Map;!this.bytes.done()&&this.bytes.peek()!==ee.GreaterThan&&this.bytes.peekAhead(1)!==ee.GreaterThan;){var r=this.parseName(),s=this.parseObject();t.set(r,s),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(ee.GreaterThan),this.bytes.assertNext(ee.GreaterThan);var i=t.get(Q.of("Type"));return i===Q.of("Catalog")?xQ.fromMapWithContext(t,this.context):i===Q.of("Pages")?bQ.fromMapWithContext(t,this.context):i===Q.of("Page")?kh.fromMapWithContext(t,this.context):Pt.fromMapWithContext(t,this.context)},e.prototype.parseDictOrStream=function(){var t=this.bytes.position(),r=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Bn.streamEOF1)&&!this.matchKeyword(Bn.streamEOF2)&&!this.matchKeyword(Bn.streamEOF3)&&!this.matchKeyword(Bn.streamEOF4)&&!this.matchKeyword(Bn.stream))return r;var s=this.bytes.offset(),i,a=r.get(Q.of("Length"));a instanceof Tt?(i=s+a.asNumber(),this.bytes.moveTo(i),this.skipWhitespaceAndComments(),this.matchKeyword(Bn.endstream)||(this.bytes.moveTo(s),i=this.findEndOfStreamFallback(t))):i=this.findEndOfStreamFallback(t);var o=this.bytes.slice(s,i);return FS.of(r,o)},e.prototype.findEndOfStreamFallback=function(t){for(var r=1,s=this.bytes.offset();!this.bytes.done()&&(s=this.bytes.offset(),this.matchKeyword(Bn.stream)?r+=1:this.matchKeyword(Bn.EOF1endstream)||this.matchKeyword(Bn.EOF2endstream)||this.matchKeyword(Bn.EOF3endstream)||this.matchKeyword(Bn.endstream)?r-=1:this.bytes.next(),r!==0););if(r!==0)throw new uxe(t);return s},e.forBytes=function(t,r,s){return new e(AR.of(t),r,s)},e.forByteStream=function(t,r,s){return s===void 0&&(s=!1),new e(t,r,s)},e}(ebe),nbe=function(n){Ve(e,n);function e(t,r){var s=n.call(this,AR.fromPDFRawStream(t),t.dict.context)||this,i=t.dict;return s.alreadyParsed=!1,s.shouldWaitForTick=r||function(){return!1},s.firstOffset=i.lookup(Q.of("First"),Tt).asNumber(),s.objectCount=i.lookup(Q.of("N"),Tt).asNumber(),s}return e.prototype.parseIntoContext=function(){return Mt(this,void 0,void 0,function(){var t,r,s,i,a,o,l,c;return $t(this,function(u){switch(u.label){case 0:if(this.alreadyParsed)throw new F5("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,t=this.parseOffsetsAndObjectNumbers(),r=0,s=t.length,u.label=1;case 1:return r<s?(i=t[r],a=i.objectNumber,o=i.offset,this.bytes.moveTo(this.firstOffset+o),l=this.parseObject(),c=Rn.of(a,0),this.context.assign(c,l),this.shouldWaitForTick()?[4,cx()]:[3,3]):[3,4];case 2:u.sent(),u.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.parseOffsetsAndObjectNumbers=function(){for(var t=[],r=0,s=this.objectCount;r<s;r++){this.skipWhitespaceAndComments();var i=this.parseRawInt();this.skipWhitespaceAndComments();var a=this.parseRawInt();t.push({objectNumber:i,offset:a})}return t},e.forStream=function(t,r){return new e(t,r)},e}(wQ),rbe=function(){function n(e){this.alreadyParsed=!1,this.dict=e.dict,this.bytes=AR.fromPDFRawStream(e),this.context=this.dict.context;var t=this.dict.lookup(Q.of("Size"),Tt),r=this.dict.lookup(Q.of("Index"));if(r instanceof wn){this.subsections=[];for(var s=0,i=r.size();s<i;s+=2){var a=r.lookup(s+0,Tt).asNumber(),o=r.lookup(s+1,Tt).asNumber();this.subsections.push({firstObjectNumber:a,length:o})}}else this.subsections=[{firstObjectNumber:0,length:t.asNumber()}];var l=this.dict.lookup(Q.of("W"),wn);this.byteWidths=[-1,-1,-1];for(var s=0,i=l.size();s<i;s++)this.byteWidths[s]=l.lookup(s,Tt).asNumber()}return n.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new F5("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(Q.of("Root")),Encrypt:this.dict.get(Q.of("Encrypt")),Info:this.dict.get(Q.of("Info")),ID:this.dict.get(Q.of("ID"))};var e=this.parseEntries();return e},n.prototype.parseEntries=function(){for(var e=[],t=this.byteWidths,r=t[0],s=t[1],i=t[2],a=0,o=this.subsections.length;a<o;a++)for(var l=this.subsections[a],c=l.firstObjectNumber,u=l.length,h=0;h<u;h++){for(var d=0,f=0,p=r;f<p;f++)d=d<<8|this.bytes.next();for(var m=0,f=0,p=s;f<p;f++)m=m<<8|this.bytes.next();for(var y=0,f=0,p=i;f<p;f++)y=y<<8|this.bytes.next();r===0&&(d=1);var g=c+h,v={ref:Rn.of(g,y),offset:m,deleted:d===0,inObjectStream:d===2};e.push(v)}return e},n.forStream=function(e){return new n(e)},n}(),sbe=function(n){Ve(e,n);function e(t,r,s,i){r===void 0&&(r=1/0),s===void 0&&(s=!1),i===void 0&&(i=!1);var a=n.call(this,AR.of(t),zM.create(),i)||this;return a.alreadyParsed=!1,a.parsedObjects=0,a.shouldWaitForTick=function(){return a.parsedObjects+=1,a.parsedObjects%a.objectsPerTick===0},a.objectsPerTick=r,a.throwOnInvalidObject=s,a}return e.prototype.parseDocument=function(){return Mt(this,void 0,void 0,function(){var t,r;return $t(this,function(s){switch(s.label){case 0:if(this.alreadyParsed)throw new F5("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),s.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(s.sent(),r=this.bytes.offset(),r===t)throw new dxe(this.bytes.position());return t=r,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(Rn.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(Rn.of(0))),[2,this.context]}})})},e.prototype.maybeRecoverRoot=function(){var t=function(u){return u instanceof Pt&&u.lookup(Q.of("Type"))===Q.of("Catalog")},r=this.context.lookup(this.context.trailerInfo.Root);if(!t(r))for(var s=this.context.enumerateIndirectObjects(),i=0,a=s.length;i<a;i++){var o=s[i],l=o[0],c=o[1];t(c)&&(this.context.trailerInfo.Root=l)}},e.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Bn.header)){var t=this.parseRawInt();this.bytes.assertNext(ee.Period);var r=this.parseRawInt(),s=bR.forVersion(t,r);return this.skipBinaryHeaderComment(),s}this.bytes.next()}throw new fxe(this.bytes.position())},e.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var t=this.parseRawInt();this.skipWhitespaceAndComments();var r=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Bn.obj))throw new pxe(this.bytes.position(),Bn.obj);return Rn.of(t,r)},e.prototype.matchIndirectObjectHeader=function(){var t=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(t),!1}},e.prototype.parseIndirectObject=function(){return Mt(this,void 0,void 0,function(){var t,r;return $t(this,function(s){switch(s.label){case 0:return t=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),r=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Bn.endobj),r instanceof FS&&r.dict.lookup(Q.of("Type"))===Q.of("ObjStm")?[4,nbe.forStream(r,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return s.sent(),[3,3];case 2:r instanceof FS&&r.dict.lookup(Q.of("Type"))===Q.of("XRef")?rbe.forStream(r).parseIntoContext():this.context.assign(t,r),s.label=3;case 3:return[2,t]}})})},e.prototype.tryToParseInvalidIndirectObject=function(){var t=this.bytes.position(),r="Trying to parse invalid object: "+JSON.stringify(t)+")";if(this.throwOnInvalidObject)throw new Error(r);console.warn(r);var s=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+s),this.skipWhitespaceAndComments();for(var i=this.bytes.offset(),a=!0;!this.bytes.done()&&(this.matchKeyword(Bn.endobj)&&(a=!1),!!a);)this.bytes.next();if(a)throw new cxe(t);var o=this.bytes.offset()-Bn.endobj.length,l=cQ.of(this.bytes.slice(i,o));return this.context.assign(s,l),s},e.prototype.parseIndirectObjects=function(){return Mt(this,void 0,void 0,function(){var t;return $t(this,function(r){switch(r.label){case 0:this.skipWhitespaceAndComments(),r.label=1;case 1:if(!(!this.bytes.done()&&Bi[this.bytes.peek()]))return[3,8];t=this.bytes.offset(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return r.sent(),[3,5];case 4:return r.sent(),this.bytes.moveTo(t),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,cx()]:[3,7];case 6:r.sent(),r.label=7;case 7:return[3,1];case 8:return[2]}})})},e.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Bn.xref)){this.skipWhitespaceAndComments();for(var t=-1,r=aQ.createEmpty();!this.bytes.done()&&Bi[this.bytes.peek()];){var s=this.parseRawInt();this.skipWhitespaceAndComments();var i=this.parseRawInt();this.skipWhitespaceAndComments();var a=this.bytes.peek();if(a===ee.n||a===ee.f){var o=Rn.of(t,i);this.bytes.next()===ee.n?r.addEntry(o,s):r.addDeletedEntry(o,s),t+=1}else t=s;this.skipWhitespaceAndComments()}return r}},e.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Bn.trailer)){this.skipWhitespaceAndComments();var t=this.parseDict(),r=this.context;r.trailerInfo={Root:t.get(Q.of("Root"))||r.trailerInfo.Root,Encrypt:t.get(Q.of("Encrypt"))||r.trailerInfo.Encrypt,Info:t.get(Q.of("Info"))||r.trailerInfo.Info,ID:t.get(Q.of("ID"))||r.trailerInfo.ID}}},e.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Bn.startxref)){this.skipWhitespaceAndComments();var t=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Bn.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Bn.eof),this.skipWhitespaceAndComments(),M5.forLastCrossRefSectionOffset(t)}},e.prototype.parseDocumentSection=function(){return Mt(this,void 0,void 0,function(){return $t(this,function(t){switch(t.label){case 0:return[4,this.parseIndirectObjects()];case 1:return t.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},e.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var t=this.bytes.offset(),r=this.bytes.peek(),s=r>=ee.Space&&r<=ee.Tilde;if(s&&(this.matchKeyword(Bn.xref)||this.matchKeyword(Bn.trailer)||this.matchKeyword(Bn.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(t);break}this.bytes.next()}},e.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var t=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(t)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},e.forBytesWithOptions=function(t,r,s,i){return new e(t,r,s,i)},e}(wQ),Ac=function(n){return 1<<n},X1;(function(n){n[n.Invisible=Ac(0)]="Invisible",n[n.Hidden=Ac(1)]="Hidden",n[n.Print=Ac(2)]="Print",n[n.NoZoom=Ac(3)]="NoZoom",n[n.NoRotate=Ac(4)]="NoRotate",n[n.NoView=Ac(5)]="NoView",n[n.ReadOnly=Ac(6)]="ReadOnly",n[n.Locked=Ac(7)]="Locked",n[n.ToggleNoView=Ac(8)]="ToggleNoView",n[n.LockedContents=Ac(9)]="LockedContents"})(X1||(X1={}));var NR=function(n){return n instanceof Q?n:Q.of(n)},Et=function(n){return n instanceof Tt?n:Tt.of(n)},Bt=function(n){return n instanceof Tt?n.asNumber():n},PS;(function(n){n.Degrees="degrees",n.Radians="radians"})(PS||(PS={}));var St=function(n){return ge(n,"degreeAngle",["number"]),{type:PS.Degrees,angle:n}},SQ=PS.Radians,kQ=PS.Degrees,CQ=function(n){return n*Math.PI/180},ibe=function(n){return n*180/Math.PI},pi=function(n){return n.type===SQ?n.angle:n.type===kQ?CQ(n.angle):Xk("Invalid rotation: "+JSON.stringify(n))},TQ=function(n){return n.type===SQ?ibe(n.angle):n.type===kQ?n.angle:Xk("Invalid rotation: "+JSON.stringify(n))},Kh=function(n){n===void 0&&(n=0);var e=n/90%4;return e===0?0:e===1?90:e===2?180:e===3?270:0},o0=function(n,e){e===void 0&&(e=0);var t=Kh(e);return t===90||t===270?{width:n.height,height:n.width}:{width:n.width,height:n.height}},abe=function(n,e,t){e===void 0&&(e=0),t===void 0&&(t=0);var r=n.x,s=n.y,i=n.width,a=n.height,o=Kh(t),l=e/2;return o===0?{x:r-l,y:s-l,width:i,height:a}:o===90?{x:r-a+l,y:s-l,width:a,height:i}:o===180?{x:r-i+l,y:s-a+l,width:i,height:a}:o===270?{x:r-l,y:s-i+l,width:a,height:i}:{x:r-l,y:s-l,width:i,height:a}},EQ=function(){return hn.of(gn.ClipNonZero)},kN=Math.cos,CN=Math.sin,TN=Math.tan,_R=function(n,e,t,r,s,i){return hn.of(gn.ConcatTransformationMatrix,[Et(n),Et(e),Et(t),Et(r),Et(s),Et(i)])},il=function(n,e){return _R(1,0,0,1,n,e)},OS=function(n,e){return _R(n,0,0,e,0,0)},zx=function(n){return _R(kN(Bt(n)),CN(Bt(n)),-CN(Bt(n)),kN(Bt(n)),0,0)},BE=function(n){return zx(CQ(Bt(n)))},W5=function(n,e){return _R(1,TN(Bt(n)),TN(Bt(e)),1,0,0)},RR=function(n,e){return hn.of(gn.SetLineDashPattern,["["+n.map(Et).join(" ")+"]",Et(e)])},wy;(function(n){n[n.Butt=0]="Butt",n[n.Round=1]="Round",n[n.Projecting=2]="Projecting"})(wy||(wy={}));var DR=function(n){return hn.of(gn.SetLineCapStyle,[Et(n)])},jW;(function(n){n[n.Miter=0]="Miter",n[n.Round=1]="Round",n[n.Bevel=2]="Bevel"})(jW||(jW={}));var l0=function(n){return hn.of(gn.SetGraphicsStateParams,[NR(n)])},As=function(){return hn.of(gn.PushGraphicsState)},Ns=function(){return hn.of(gn.PopGraphicsState)},tC=function(n){return hn.of(gn.SetLineWidth,[Et(n)])},yo=function(n,e,t,r,s,i){return hn.of(gn.AppendBezierCurve,[Et(n),Et(e),Et(t),Et(r),Et(s),Et(i)])},VE=function(n,e,t,r){return hn.of(gn.CurveToReplicateInitialPoint,[Et(n),Et(e),Et(t),Et(r)])},$f=function(){return hn.of(gn.ClosePath)},yu=function(n,e){return hn.of(gn.MoveTo,[Et(n),Et(e)])},Us=function(n,e){return hn.of(gn.LineTo,[Et(n),Et(e)])},nC=function(){return hn.of(gn.StrokePath)},G5=function(){return hn.of(gn.FillNonZero)},H5=function(){return hn.of(gn.FillNonZeroAndStroke)},IQ=function(){return hn.of(gn.EndPath)},obe=function(){return hn.of(gn.NextLine)},AQ=function(n){return hn.of(gn.ShowText,[n])},NQ=function(){return hn.of(gn.BeginText)},_Q=function(){return hn.of(gn.EndText)},q5=function(n,e){return hn.of(gn.SetFontAndSize,[NR(n),Et(e)])},lbe=function(n){return hn.of(gn.SetTextLineHeight,[Et(n)])},UW;(function(n){n[n.Fill=0]="Fill",n[n.Outline=1]="Outline",n[n.FillAndOutline=2]="FillAndOutline",n[n.Invisible=3]="Invisible",n[n.FillAndClip=4]="FillAndClip",n[n.OutlineAndClip=5]="OutlineAndClip",n[n.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",n[n.Clip=7]="Clip"})(UW||(UW={}));var cbe=function(n,e,t,r,s,i){return hn.of(gn.SetTextMatrix,[Et(n),Et(e),Et(t),Et(r),Et(s),Et(i)])},RQ=function(n,e,t,r,s){return cbe(kN(Bt(n)),CN(Bt(n))+TN(Bt(e)),-CN(Bt(n))+TN(Bt(t)),kN(Bt(n)),r,s)},K5=function(n){return hn.of(gn.DrawObject,[NR(n)])},ube=function(n){return hn.of(gn.NonStrokingColorGray,[Et(n)])},hbe=function(n){return hn.of(gn.StrokingColorGray,[Et(n)])},dbe=function(n,e,t){return hn.of(gn.NonStrokingColorRgb,[Et(n),Et(e),Et(t)])},fbe=function(n,e,t){return hn.of(gn.StrokingColorRgb,[Et(n),Et(e),Et(t)])},pbe=function(n,e,t,r){return hn.of(gn.NonStrokingColorCmyk,[Et(n),Et(e),Et(t),Et(r)])},mbe=function(n,e,t,r){return hn.of(gn.StrokingColorCmyk,[Et(n),Et(e),Et(t),Et(r)])},DQ=function(n){return hn.of(gn.BeginMarkedContent,[NR(n)])},FQ=function(){return hn.of(gn.EndMarkedContent)},zf;(function(n){n.Grayscale="Grayscale",n.RGB="RGB",n.CMYK="CMYK"})(zf||(zf={}));var PQ=function(n){return go(n,"gray",0,1),{type:zf.Grayscale,gray:n}},Cn=function(n,e,t){return go(n,"red",0,1),go(e,"green",0,1),go(t,"blue",0,1),{type:zf.RGB,red:n,green:e,blue:t}},OQ=function(n,e,t,r){return go(n,"cyan",0,1),go(e,"magenta",0,1),go(t,"yellow",0,1),go(r,"key",0,1),{type:zf.CMYK,cyan:n,magenta:e,yellow:t,key:r}},X5=zf.Grayscale,Y5=zf.RGB,Z5=zf.CMYK,c0=function(n){return n.type===X5?ube(n.gray):n.type===Y5?dbe(n.red,n.green,n.blue):n.type===Z5?pbe(n.cyan,n.magenta,n.yellow,n.key):Xk("Invalid color: "+JSON.stringify(n))},rC=function(n){return n.type===X5?hbe(n.gray):n.type===Y5?fbe(n.red,n.green,n.blue):n.type===Z5?mbe(n.cyan,n.magenta,n.yellow,n.key):Xk("Invalid color: "+JSON.stringify(n))},sa=function(n,e){return e===void 0&&(e=1),(n==null?void 0:n.length)===1?PQ(n[0]*e):(n==null?void 0:n.length)===3?Cn(n[0]*e,n[1]*e,n[2]*e):(n==null?void 0:n.length)===4?OQ(n[0]*e,n[1]*e,n[2]*e,n[3]*e):void 0},WW=function(n){return n.type===X5?[n.gray]:n.type===Y5?[n.red,n.green,n.blue]:n.type===Z5?[n.cyan,n.magenta,n.yellow,n.key]:Xk("Invalid color: "+JSON.stringify(n))},dt=0,ft=0,an=0,on=0,m1=0,g1=0,GW=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),gbe=function(n){for(var e,t=[],r=[],s="",i=!1,a=0,o=0,l=n;o<l.length;o++){var c=l[o];if(GW.has(c))a=GW.get(c),e&&(s.length>0&&(r[r.length]=+s),t[t.length]={cmd:e,args:r},r=[],s="",i=!1),e=c;else if([" ",","].includes(c)||c==="-"&&s.length>0&&s[s.length-1]!=="e"||c==="."&&i){if(s.length===0)continue;r.length===a?(t[t.length]={cmd:e,args:r},r=[+s],e==="M"&&(e="L"),e==="m"&&(e="l")):r[r.length]=+s,i=c===".",s=["-","."].includes(c)?c:""}else s+=c,c==="."&&(i=!0)}return s.length>0&&(r.length===a?(t[t.length]={cmd:e,args:r},r=[+s],e==="M"&&(e="L"),e==="m"&&(e="l")):r[r.length]=+s),t[t.length]={cmd:e,args:r},t},ybe=function(n){dt=ft=an=on=m1=g1=0;for(var e=[],t=0;t<n.length;t++){var r=n[t];if(r.cmd&&typeof HW[r.cmd]=="function"){var s=HW[r.cmd](r.args);Array.isArray(s)?e=e.concat(s):e.push(s)}}return e},HW={M:function(n){return dt=n[0],ft=n[1],an=on=null,m1=dt,g1=ft,yu(dt,ft)},m:function(n){return dt+=n[0],ft+=n[1],an=on=null,m1=dt,g1=ft,yu(dt,ft)},C:function(n){return dt=n[4],ft=n[5],an=n[2],on=n[3],yo(n[0],n[1],n[2],n[3],n[4],n[5])},c:function(n){var e=yo(n[0]+dt,n[1]+ft,n[2]+dt,n[3]+ft,n[4]+dt,n[5]+ft);return an=dt+n[2],on=ft+n[3],dt+=n[4],ft+=n[5],e},S:function(n){(an===null||on===null)&&(an=dt,on=ft);var e=yo(dt-(an-dt),ft-(on-ft),n[0],n[1],n[2],n[3]);return an=n[0],on=n[1],dt=n[2],ft=n[3],e},s:function(n){(an===null||on===null)&&(an=dt,on=ft);var e=yo(dt-(an-dt),ft-(on-ft),dt+n[0],ft+n[1],dt+n[2],ft+n[3]);return an=dt+n[0],on=ft+n[1],dt+=n[2],ft+=n[3],e},Q:function(n){return an=n[0],on=n[1],dt=n[2],ft=n[3],VE(n[0],n[1],dt,ft)},q:function(n){var e=VE(n[0]+dt,n[1]+ft,n[2]+dt,n[3]+ft);return an=dt+n[0],on=ft+n[1],dt+=n[2],ft+=n[3],e},T:function(n){an===null||on===null?(an=dt,on=ft):(an=dt-(an-dt),on=ft-(on-ft));var e=VE(an,on,n[0],n[1]);return an=dt-(an-dt),on=ft-(on-ft),dt=n[0],ft=n[1],e},t:function(n){an===null||on===null?(an=dt,on=ft):(an=dt-(an-dt),on=ft-(on-ft));var e=VE(an,on,dt+n[0],ft+n[1]);return dt+=n[0],ft+=n[1],e},A:function(n){var e=qW(dt,ft,n);return dt=n[5],ft=n[6],e},a:function(n){n[5]+=dt,n[6]+=ft;var e=qW(dt,ft,n);return dt=n[5],ft=n[6],e},L:function(n){return dt=n[0],ft=n[1],an=on=null,Us(dt,ft)},l:function(n){return dt+=n[0],ft+=n[1],an=on=null,Us(dt,ft)},H:function(n){return dt=n[0],an=on=null,Us(dt,ft)},h:function(n){return dt+=n[0],an=on=null,Us(dt,ft)},V:function(n){return ft=n[0],an=on=null,Us(dt,ft)},v:function(n){return ft+=n[0],an=on=null,Us(dt,ft)},Z:function(){var n=$f();return dt=m1,ft=g1,n},z:function(){var n=$f();return dt=m1,ft=g1,n}},qW=function(n,e,t){for(var r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=vbe(l,c,r,s,a,o,i,n,e),h=[],d=0,f=u;d<f.length;d++){var p=f[d],m=xbe.apply(void 0,p);h.push(yo.apply(void 0,m))}return h},vbe=function(n,e,t,r,s,i,a,o,l){var c=a*(Math.PI/180),u=Math.sin(c),h=Math.cos(c);t=Math.abs(t),r=Math.abs(r),an=h*(o-n)*.5+u*(l-e)*.5,on=h*(l-e)*.5-u*(o-n)*.5;var d=an*an/(t*t)+on*on/(r*r);d>1&&(d=Math.sqrt(d),t*=d,r*=d);var f=h/t,p=u/t,m=-u/r,y=h/r,g=f*o+p*l,v=m*o+y*l,b=f*n+p*e,w=m*n+y*e,C=(b-g)*(b-g)+(w-v)*(w-v),I=1/C-.25;I<0&&(I=0);var T=Math.sqrt(I);i===s&&(T=-T);var E=.5*(g+b)-T*(w-v),A=.5*(v+w)+T*(b-g),N=Math.atan2(v-A,g-E),F=Math.atan2(w-A,b-E),_=F-N;_<0&&i===1?_+=2*Math.PI:_>0&&i===0&&(_-=2*Math.PI);for(var D=Math.ceil(Math.abs(_/(Math.PI*.5+.001))),R=[],B=0;B<D;B++){var z=N+B*_/D,W=N+(B+1)*_/D;R[B]=[E,A,z,W,t,r,u,h]}return R},xbe=function(n,e,t,r,s,i,a,o){var l=o*s,c=-a*i,u=a*s,h=o*i,d=.5*(r-t),f=8/3*Math.sin(d*.5)*Math.sin(d*.5)/Math.sin(d),p=n+Math.cos(t)-f*Math.sin(t),m=e+Math.sin(t)+f*Math.cos(t),y=n+Math.cos(r),g=e+Math.sin(r),v=y+f*Math.sin(r),b=g-f*Math.cos(r),w=[l*p+c*m,u*p+h*m,l*v+c*b,u*v+h*b,l*y+c*g,u*y+h*g];return w},bbe=function(n){return ybe(gbe(n))},wbe=function(n,e){for(var t=[As(),e.graphicsState&&l0(e.graphicsState),NQ(),c0(e.color),q5(e.font,e.size),lbe(e.lineHeight),RQ(pi(e.rotate),pi(e.xSkew),pi(e.ySkew),e.x,e.y)].filter(Boolean),r=0,s=n.length;r<s;r++)t.push(AQ(n[r]),obe());return t.push(_Q(),Ns()),t},LQ=function(n,e){return[As(),e.graphicsState&&l0(e.graphicsState),il(e.x,e.y),zx(pi(e.rotate)),OS(e.width,e.height),W5(pi(e.xSkew),pi(e.ySkew)),K5(n),Ns()].filter(Boolean)},Sbe=function(n,e){return[As(),e.graphicsState&&l0(e.graphicsState),il(e.x,e.y),zx(pi(e.rotate)),OS(e.xScale,e.yScale),W5(pi(e.xSkew),pi(e.ySkew)),K5(n),Ns()].filter(Boolean)},kbe=function(n){var e,t;return[As(),n.graphicsState&&l0(n.graphicsState),n.color&&rC(n.color),tC(n.thickness),RR((e=n.dashArray)!==null&&e!==void 0?e:[],(t=n.dashPhase)!==null&&t!==void 0?t:0),yu(n.start.x,n.start.y),n.lineCap&&DR(n.lineCap),yu(n.start.x,n.start.y),Us(n.end.x,n.end.y),nC(),Ns()].filter(Boolean)},ux=function(n){var e,t;return[As(),n.graphicsState&&l0(n.graphicsState),n.color&&c0(n.color),n.borderColor&&rC(n.borderColor),tC(n.borderWidth),n.borderLineCap&&DR(n.borderLineCap),RR((e=n.borderDashArray)!==null&&e!==void 0?e:[],(t=n.borderDashPhase)!==null&&t!==void 0?t:0),il(n.x,n.y),zx(pi(n.rotate)),W5(pi(n.xSkew),pi(n.ySkew)),yu(0,0),Us(0,n.height),Us(n.width,n.height),Us(n.width,0),$f(),n.color&&n.borderWidth?H5():n.color?G5():n.borderColor?nC():$f(),Ns()].filter(Boolean)},EN=4*((Math.sqrt(2)-1)/3),Cbe=function(n){var e=Bt(n.x),t=Bt(n.y),r=Bt(n.xScale),s=Bt(n.yScale);e-=r,t-=s;var i=r*EN,a=s*EN,o=e+r*2,l=t+s*2,c=e+r,u=t+s;return[As(),yu(e,u),yo(e,u-a,c-i,t,c,t),yo(c+i,t,o,u-a,o,u),yo(o,u+a,c+i,l,c,l),yo(c-i,l,e,u+a,e,u),Ns()]},Tbe=function(n){var e=Bt(n.x),t=Bt(n.y),r=Bt(n.xScale),s=Bt(n.yScale),i=-r,a=-s,o=r*EN,l=s*EN,c=i+r*2,u=a+s*2,h=i+r,d=a+s;return[il(e,t),zx(pi(n.rotate)),yu(i,d),yo(i,d-l,h-o,a,h,a),yo(h+o,a,c,d-l,c,d),yo(c,d+l,h+o,u,h,u),yo(h-o,u,i,d+l,i,d)]},UM=function(n){var e,t,r;return mn([As(),n.graphicsState&&l0(n.graphicsState),n.color&&c0(n.color),n.borderColor&&rC(n.borderColor),tC(n.borderWidth),n.borderLineCap&&DR(n.borderLineCap),RR((e=n.borderDashArray)!==null&&e!==void 0?e:[],(t=n.borderDashPhase)!==null&&t!==void 0?t:0)],n.rotate===void 0?Cbe({x:n.x,y:n.y,xScale:n.xScale,yScale:n.yScale}):Tbe({x:n.x,y:n.y,xScale:n.xScale,yScale:n.yScale,rotate:(r=n.rotate)!==null&&r!==void 0?r:St(0)}),[n.color&&n.borderWidth?H5():n.color?G5():n.borderColor?nC():$f(),Ns()]).filter(Boolean)},Ebe=function(n,e){var t,r,s;return mn([As(),e.graphicsState&&l0(e.graphicsState),il(e.x,e.y),zx(pi((t=e.rotate)!==null&&t!==void 0?t:St(0))),e.scale?OS(e.scale,-e.scale):OS(1,-1),e.color&&c0(e.color),e.borderColor&&rC(e.borderColor),e.borderWidth&&tC(e.borderWidth),e.borderLineCap&&DR(e.borderLineCap),RR((r=e.borderDashArray)!==null&&r!==void 0?r:[],(s=e.borderDashPhase)!==null&&s!==void 0?s:0)],bbe(n),[e.color&&e.borderWidth?H5():e.color?G5():e.borderColor?nC():$f(),Ns()]).filter(Boolean)},Ibe=function(n){var e=Bt(n.size),t=-1+.75,r=-1+.51,s=1-.525,i=1-.31,a=-1+.325,o=.3995/(s-r)+r;return[As(),n.color&&rC(n.color),tC(n.thickness),il(n.x,n.y),yu(a*e,o*e),Us(t*e,r*e),Us(i*e,s*e),nC(),Ns()].filter(Boolean)},pp=function(n){return n.rotation===0?[il(0,0),BE(0)]:n.rotation===90?[il(n.width,0),BE(90)]:n.rotation===180?[il(n.width,n.height),BE(180)]:n.rotation===270?[il(0,n.height),BE(270)]:[]},jE=function(n){var e=ux({x:n.x,y:n.y,width:n.width,height:n.height,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:St(0),xSkew:St(0),ySkew:St(0)});if(!n.filled)return e;var t=Bt(n.width),r=Bt(n.height),s=Math.min(t,r)/2,i=Ibe({x:t/2,y:r/2,size:s,thickness:n.thickness,color:n.markColor});return mn([As()],e,i,[Ns()])},UE=function(n){var e=Bt(n.width),t=Bt(n.height),r=Math.min(e,t)/2,s=UM({x:n.x,y:n.y,xScale:r,yScale:r,color:n.color,borderColor:n.borderColor,borderWidth:n.borderWidth});if(!n.filled)return s;var i=UM({x:n.x,y:n.y,xScale:r*.45,yScale:r*.45,color:n.dotColor,borderColor:void 0,borderWidth:0});return mn([As()],s,i,[Ns()])},KW=function(n){var e=Bt(n.x),t=Bt(n.y),r=Bt(n.width),s=Bt(n.height),i=ux({x:e,y:t,width:r,height:s,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:St(0),xSkew:St(0),ySkew:St(0)}),a=Q5(n.textLines,{color:n.textColor,font:n.font,size:n.fontSize,rotate:St(0),xSkew:St(0),ySkew:St(0)});return mn([As()],i,a,[Ns()])},Q5=function(n,e){for(var t=[NQ(),c0(e.color),q5(e.font,e.size)],r=0,s=n.length;r<s;r++){var i=n[r],a=i.encoded,o=i.x,l=i.y;t.push(RQ(pi(e.rotate),pi(e.xSkew),pi(e.ySkew),o,l),AQ(a))}return t.push(_Q()),t},MQ=function(n){var e=Bt(n.x),t=Bt(n.y),r=Bt(n.width),s=Bt(n.height),i=Bt(n.borderWidth),a=Bt(n.padding),o=e+i/2+a,l=t+i/2+a,c=r-(i/2+a)*2,u=s-(i/2+a)*2,h=[yu(o,l),Us(o,l+u),Us(o+c,l+u),Us(o+c,l),$f(),EQ(),IQ()],d=ux({x:e,y:t,width:r,height:s,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:St(0),xSkew:St(0),ySkew:St(0)}),f=Q5(n.textLines,{color:n.textColor,font:n.font,size:n.fontSize,rotate:St(0),xSkew:St(0),ySkew:St(0)}),p=mn([DQ("Tx"),As()],f,[Ns(),FQ()]);return mn([As()],d,h,p,[Ns()])},Abe=function(n){for(var e=Bt(n.x),t=Bt(n.y),r=Bt(n.width),s=Bt(n.height),i=Bt(n.lineHeight),a=Bt(n.borderWidth),o=Bt(n.padding),l=e+a/2+o,c=t+a/2+o,u=r-(a/2+o)*2,h=s-(a/2+o)*2,d=[yu(l,c),Us(l,c+h),Us(l+u,c+h),Us(l+u,c),$f(),EQ(),IQ()],f=ux({x:e,y:t,width:r,height:s,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:St(0),xSkew:St(0),ySkew:St(0)}),p=[],m=0,y=n.selectedLines.length;m<y;m++){var g=n.textLines[n.selectedLines[m]];p.push.apply(p,ux({x:g.x-o,y:g.y-(i-g.height)/2,width:r-a,height:g.height+(i-g.height)/2,borderWidth:0,color:n.selectedColor,borderColor:void 0,rotate:St(0),xSkew:St(0),ySkew:St(0)}))}var v=Q5(n.textLines,{color:n.textColor,font:n.font,size:n.fontSize,rotate:St(0),xSkew:St(0),ySkew:St(0)}),b=mn([DQ("Tx"),As()],v,[Ns(),FQ()]);return mn([As()],f,p,d,b,[Ns()])},Nbe=function(n){Ve(e,n);function e(){var t=this,r="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return t=n.call(this,r)||this,t}return e}(Error),_be=function(n){Ve(e,n);function e(){var t=this,r="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return t=n.call(this,r)||this,t}return e}(Error),Rbe=function(n){Ve(e,n);function e(){var t=this,r="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return t=n.call(this,r)||this,t}return e}(Error),Dbe=function(n){Ve(e,n);function e(){var t=this,r="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return t=n.call(this,r)||this,t}return e}(Error),Fbe=function(n){Ve(e,n);function e(t){var r=this,s='PDFDocument has no form field with the name "'+t+'"';return r=n.call(this,s)||this,r}return e}(Error),Fp=function(n){Ve(e,n);function e(t,r,s){var i,a,o=this,l=r==null?void 0:r.name,c=(a=(i=s==null?void 0:s.constructor)===null||i===void 0?void 0:i.name)!==null&&a!==void 0?a:s,u='Expected field "'+t+'" to be of type '+l+", "+("but it is actually of type "+c);return o=n.call(this,u)||this,o}return e}(Error);(function(n){Ve(e,n);function e(t){var r=this,s='Failed to select check box due to missing onValue: "'+t+'"';return r=n.call(this,s)||this,r}return e})(Error);var $Q=function(n){Ve(e,n);function e(t){var r=this,s='A field already exists with the specified name: "'+t+'"';return r=n.call(this,s)||this,r}return e}(Error),Pbe=function(n){Ve(e,n);function e(t){var r=this,s='Field name contains invalid component: "'+t+'"';return r=n.call(this,s)||this,r}return e}(Error);(function(n){Ve(e,n);function e(t){var r=this,s='A non-terminal field already exists with the specified name: "'+t+'"';return r=n.call(this,s)||this,r}return e})(Error);var Obe=function(n){Ve(e,n);function e(t){var r=this,s="Reading rich text fields is not supported: Attempted to read rich text field: "+t;return r=n.call(this,s)||this,r}return e}(Error),Lbe=function(n){Ve(e,n);function e(t,r){var s=this,i="Failed to layout combed text as lineLength="+t+" is greater than cellCount="+r;return s=n.call(this,i)||this,s}return e}(Error),Mbe=function(n){Ve(e,n);function e(t,r,s){var i=this,a="Attempted to set text with length="+t+" for TextField with maxLength="+r+" and name="+s;return i=n.call(this,a)||this,i}return e}(Error),$be=function(n){Ve(e,n);function e(t,r,s){var i=this,a="Attempted to set maxLength="+r+", which is less than "+t+", the length of this field's current value (name="+s+")";return i=n.call(this,a)||this,i}return e}(Error),xs;(function(n){n[n.Left=0]="Left",n[n.Center=1]="Center",n[n.Right=2]="Right"})(xs||(xs={}));var zQ=4,BQ=500,VQ=function(n,e,t,r){r===void 0&&(r=!1);for(var s=zQ;s<BQ;){for(var i=0,a=0,o=n.length;a<o;a++){i+=1;for(var l=n[a],c=l.split(" "),u=t.width,h=0,d=c.length;h<d;h++){var f=h===d-1,p=f?c[h]:c[h]+" ",m=e.widthOfTextAtSize(p,s);u-=m,u<=0&&(i+=1,u=t.width-m)}}if(!r&&i>n.length)return s-1;var y=e.heightAtSize(s),g=y+y*.2,v=g*i;if(v>Math.abs(t.height))return s-1;s+=1}return s},zbe=function(n,e,t,r){for(var s=t.width/r,i=t.height,a=zQ,o=p0e(n);a<BQ;){for(var l=0,c=o.length;l<c;l++){var u=o[l],h=e.widthOfTextAtSize(u,a)>s*.75;if(h)return a-1}var d=e.heightAtSize(a,{descender:!1});if(d>i)return a-1;a+=1}return a},Bbe=function(n){for(var e=n.length;e>0;e--)if(/\s/.test(n[e]))return e},Vbe=function(n,e,t,r){for(var s,i=n.length;i>0;){var a=n.substring(0,i),o=t.encodeText(a),l=t.widthOfTextAtSize(a,r);if(l<e){var c=n.substring(i)||void 0;return{line:a,encoded:o,width:l,remainder:c}}i=(s=Bbe(a))!==null&&s!==void 0?s:0}return{line:n,encoded:t.encodeText(n),width:t.widthOfTextAtSize(n,r),remainder:void 0}},jQ=function(n,e){var t=e.alignment,r=e.fontSize,s=e.font,i=e.bounds,a=rZ(Kk(n));(r===void 0||r===0)&&(r=VQ(a,s,i,!0));for(var o=s.heightAtSize(r),l=o+o*.2,c=[],u=i.x,h=i.y,d=i.x+i.width,f=i.y+i.height,p=i.y+i.height,m=0,y=a.length;m<y;m++)for(var g=a[m];g!==void 0;){var v=Vbe(g,i.width,s,r),b=v.line,w=v.encoded,C=v.width,I=v.remainder,T=t===xs.Left?i.x:t===xs.Center?i.x+i.width/2-C/2:t===xs.Right?i.x+i.width-C:i.x;p-=l,T<u&&(u=T),p<h&&(h=p),T+C>d&&(d=T+C),p+o>f&&(f=p+o),c.push({text:b,encoded:w,width:C,height:o,x:T,y:p}),g=I==null?void 0:I.trim()}return{fontSize:r,lineHeight:l,lines:c,bounds:{x:u,y:h,width:d-u,height:f-h}}},jbe=function(n,e){var t=e.fontSize,r=e.font,s=e.bounds,i=e.cellCount,a=sZ(Kk(n));if(a.length>i)throw new Lbe(a.length,i);(t===void 0||t===0)&&(t=zbe(a,r,s,i));for(var o=s.width/i,l=r.heightAtSize(t,{descender:!1}),c=s.y+(s.height/2-l/2),u=[],h=s.x,d=s.y,f=s.x+s.width,p=s.y+s.height,m=0,y=0;m<i;){var g=iZ(a,y),v=g[0],b=g[1],w=r.encodeText(v),C=r.widthOfTextAtSize(v,t),I=s.x+(o*m+o/2),T=I-C/2;T<h&&(h=T),c<d&&(d=c),T+C>f&&(f=T+C),c+l>p&&(p=c+l),u.push({text:a,encoded:w,width:C,height:l,x:T,y:c}),m+=1,y+=b}return{fontSize:t,cells:u,bounds:{x:h,y:d,width:f-h,height:p-d}}},IN=function(n,e){var t=e.alignment,r=e.fontSize,s=e.font,i=e.bounds,a=sZ(Kk(n));(r===void 0||r===0)&&(r=VQ([a],s,i));var o=s.encodeText(a),l=s.widthOfTextAtSize(a,r),c=s.heightAtSize(r,{descender:!1}),u=t===xs.Left?i.x:t===xs.Center?i.x+i.width/2-l/2:t===xs.Right?i.x+i.width-l:i.x,h=i.y+(i.height/2-c/2);return{fontSize:r,line:{text:a,encoded:o,width:l,height:c,x:u,y:h},bounds:{x:u,y:h,width:l,height:c}}},Bx=function(n){return"normal"in n?n:{normal:n}},Ube=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,Bf=function(n){var e,t,r=(e=n.getDefaultAppearance())!==null&&e!==void 0?e:"",s=(t=C5(r,Ube).match)!==null&&t!==void 0?t:[],i=Number(s[2]);return isFinite(i)?i:void 0},Wbe=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,vl=function(n){var e,t=(e=n.getDefaultAppearance())!==null&&e!==void 0?e:"",r=C5(t,Wbe).match,s=r??[],i=s[1],a=s[2],o=s[3],l=s[4],c=s[5];if(c==="g"&&i)return PQ(Number(i));if(c==="rg"&&i&&a&&o)return Cn(Number(i),Number(a),Number(o));if(c==="k"&&i&&a&&o&&l)return OQ(Number(i),Number(a),Number(o),Number(l))},xl=function(n,e,t,r){var s;r===void 0&&(r=0);var i=[c0(e).toString(),q5((s=t==null?void 0:t.name)!==null&&s!==void 0?s:"dummy__noop",r).toString()].join(`
`);n.setDefaultAppearance(i)},Gbe=function(n,e){var t,r,s,i=vl(e),a=vl(n.acroField),o=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(t=c==null?void 0:c.getWidth())!==null&&t!==void 0?t:0,h=Kh(l==null?void 0:l.getRotation()),d=o0(o,h),f=d.width,p=d.height,m=pp(At(At({},o),{rotation:h})),y=Cn(0,0,0),g=(r=sa(l==null?void 0:l.getBorderColor()))!==null&&r!==void 0?r:y,v=sa(l==null?void 0:l.getBackgroundColor()),b=sa(l==null?void 0:l.getBackgroundColor(),.8),w=(s=i??a)!==null&&s!==void 0?s:y;xl(i?e:n.acroField,w);var C={x:0+u/2,y:0+u/2,width:f-u,height:p-u,thickness:1.5,borderWidth:u,borderColor:g,markColor:w};return{normal:{on:mn(m,jE(At(At({},C),{color:v,filled:!0}))),off:mn(m,jE(At(At({},C),{color:v,filled:!1})))},down:{on:mn(m,jE(At(At({},C),{color:b,filled:!0}))),off:mn(m,jE(At(At({},C),{color:b,filled:!1})))}}},Hbe=function(n,e){var t,r,s,i=vl(e),a=vl(n.acroField),o=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(t=c==null?void 0:c.getWidth())!==null&&t!==void 0?t:0,h=Kh(l==null?void 0:l.getRotation()),d=o0(o,h),f=d.width,p=d.height,m=pp(At(At({},o),{rotation:h})),y=Cn(0,0,0),g=(r=sa(l==null?void 0:l.getBorderColor()))!==null&&r!==void 0?r:y,v=sa(l==null?void 0:l.getBackgroundColor()),b=sa(l==null?void 0:l.getBackgroundColor(),.8),w=(s=i??a)!==null&&s!==void 0?s:y;xl(i?e:n.acroField,w);var C={x:f/2,y:p/2,width:f-u,height:p-u,borderWidth:u,borderColor:g,dotColor:w};return{normal:{on:mn(m,UE(At(At({},C),{color:v,filled:!0}))),off:mn(m,UE(At(At({},C),{color:v,filled:!1})))},down:{on:mn(m,UE(At(At({},C),{color:b,filled:!0}))),off:mn(m,UE(At(At({},C),{color:b,filled:!1})))}}},qbe=function(n,e,t){var r,s,i,a,o,l=vl(e),c=vl(n.acroField),u=Bf(e),h=Bf(n.acroField),d=e.getRectangle(),f=e.getAppearanceCharacteristics(),p=e.getBorderStyle(),m=f==null?void 0:f.getCaptions(),y=(r=m==null?void 0:m.normal)!==null&&r!==void 0?r:"",g=(i=(s=m==null?void 0:m.down)!==null&&s!==void 0?s:y)!==null&&i!==void 0?i:"",v=(a=p==null?void 0:p.getWidth())!==null&&a!==void 0?a:0,b=Kh(f==null?void 0:f.getRotation()),w=o0(d,b),C=w.width,I=w.height,T=pp(At(At({},d),{rotation:b})),E=Cn(0,0,0),A=sa(f==null?void 0:f.getBorderColor()),N=sa(f==null?void 0:f.getBackgroundColor()),F=sa(f==null?void 0:f.getBackgroundColor(),.8),_={x:v,y:v,width:C-v*2,height:I-v*2},D=IN(y,{alignment:xs.Center,fontSize:u??h,font:t,bounds:_}),R=IN(g,{alignment:xs.Center,fontSize:u??h,font:t,bounds:_}),B=Math.min(D.fontSize,R.fontSize),z=(o=l??c)!==null&&o!==void 0?o:E;xl(l||u!==void 0?e:n.acroField,z,t,B);var W={x:0+v/2,y:0+v/2,width:C-v,height:I-v,borderWidth:v,borderColor:A,textColor:z,font:t.name,fontSize:B};return{normal:mn(T,KW(At(At({},W),{color:N,textLines:[D.line]}))),down:mn(T,KW(At(At({},W),{color:F,textLines:[R.line]})))}},Kbe=function(n,e,t){var r,s,i,a,o=vl(e),l=vl(n.acroField),c=Bf(e),u=Bf(n.acroField),h=e.getRectangle(),d=e.getAppearanceCharacteristics(),f=e.getBorderStyle(),p=(r=n.getText())!==null&&r!==void 0?r:"",m=(s=f==null?void 0:f.getWidth())!==null&&s!==void 0?s:0,y=Kh(d==null?void 0:d.getRotation()),g=o0(h,y),v=g.width,b=g.height,w=pp(At(At({},h),{rotation:y})),C=Cn(0,0,0),I=sa(d==null?void 0:d.getBorderColor()),T=sa(d==null?void 0:d.getBackgroundColor()),E,A,N=n.isCombed()?0:1,F={x:m+N,y:m+N,width:v-(m+N)*2,height:b-(m+N)*2};if(n.isMultiline()){var _=jQ(p,{alignment:n.getAlignment(),fontSize:c??u,font:t,bounds:F});E=_.lines,A=_.fontSize}else if(n.isCombed()){var _=jbe(p,{fontSize:c??u,font:t,bounds:F,cellCount:(i=n.getMaxLength())!==null&&i!==void 0?i:0});E=_.cells,A=_.fontSize}else{var _=IN(p,{alignment:n.getAlignment(),fontSize:c??u,font:t,bounds:F});E=[_.line],A=_.fontSize}var D=(a=o??l)!==null&&a!==void 0?a:C;xl(o||c!==void 0?e:n.acroField,D,t,A);var R={x:0+m/2,y:0+m/2,width:v-m,height:b-m,borderWidth:m??0,borderColor:I,textColor:D,font:t.name,fontSize:A,color:T,textLines:E,padding:N};return mn(w,MQ(R))},Xbe=function(n,e,t){var r,s,i,a=vl(e),o=vl(n.acroField),l=Bf(e),c=Bf(n.acroField),u=e.getRectangle(),h=e.getAppearanceCharacteristics(),d=e.getBorderStyle(),f=(r=n.getSelected()[0])!==null&&r!==void 0?r:"",p=(s=d==null?void 0:d.getWidth())!==null&&s!==void 0?s:0,m=Kh(h==null?void 0:h.getRotation()),y=o0(u,m),g=y.width,v=y.height,b=pp(At(At({},u),{rotation:m})),w=Cn(0,0,0),C=sa(h==null?void 0:h.getBorderColor()),I=sa(h==null?void 0:h.getBackgroundColor()),T=1,E={x:p+T,y:p+T,width:g-(p+T)*2,height:v-(p+T)*2},A=IN(f,{alignment:xs.Left,fontSize:l??c,font:t,bounds:E}),N=A.line,F=A.fontSize,_=(i=a??o)!==null&&i!==void 0?i:w;xl(a||l!==void 0?e:n.acroField,_,t,F);var D={x:0+p/2,y:0+p/2,width:g-p,height:v-p,borderWidth:p??0,borderColor:C,textColor:_,font:t.name,fontSize:F,color:I,textLines:[N],padding:T};return mn(b,MQ(D))},Ybe=function(n,e,t){var r,s,i=vl(e),a=vl(n.acroField),o=Bf(e),l=Bf(n.acroField),c=e.getRectangle(),u=e.getAppearanceCharacteristics(),h=e.getBorderStyle(),d=(r=h==null?void 0:h.getWidth())!==null&&r!==void 0?r:0,f=Kh(u==null?void 0:u.getRotation()),p=o0(c,f),m=p.width,y=p.height,g=pp(At(At({},c),{rotation:f})),v=Cn(0,0,0),b=sa(u==null?void 0:u.getBorderColor()),w=sa(u==null?void 0:u.getBackgroundColor()),C=n.getOptions(),I=n.getSelected();n.isSorted()&&C.sort();for(var T="",E=0,A=C.length;E<A;E++)T+=C[E],E<A-1&&(T+=`
`);for(var N=1,F={x:d+N,y:d+N,width:m-(d+N)*2,height:y-(d+N)*2},_=jQ(T,{alignment:xs.Left,fontSize:o??l,font:t,bounds:F}),D=_.lines,R=_.fontSize,B=_.lineHeight,z=[],E=0,A=D.length;E<A;E++){var W=D[E];I.includes(W.text)&&z.push(E)}var K=Cn(153/255,193/255,218/255),H=(s=i??a)!==null&&s!==void 0?s:v;return xl(i||o!==void 0?e:n.acroField,H,t,R),mn(g,Abe({x:0+d/2,y:0+d/2,width:m-d,height:y-d,borderWidth:d??0,borderColor:b,textColor:H,font:t.name,fontSize:R,color:w,textLines:D,lineHeight:B,selectedColor:K,selectedLines:z,padding:N}))},UQ=function(){function n(e,t,r){this.alreadyEmbedded=!1,ge(e,"ref",[[Rn,"PDFRef"]]),ge(t,"doc",[[Vf,"PDFDocument"]]),ge(r,"embedder",[[pQ,"PDFPageEmbedder"]]),this.ref=e,this.doc=t,this.width=r.width,this.height=r.height,this.embedder=r}return n.prototype.scale=function(e){return ge(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},n.prototype.size=function(){return this.scale(1)},n.prototype.embed=function(){return Mt(this,void 0,void 0,function(){return $t(this,function(e){switch(e.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.alreadyEmbedded=!0,e.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),No=function(){function n(e,t,r){this.modified=!0,ge(e,"ref",[[Rn,"PDFRef"]]),ge(t,"doc",[[Vf,"PDFDocument"]]),ge(r,"embedder",[[$5,"CustomFontEmbedder"],[xN,"StandardFontEmbedder"]]),this.ref=e,this.doc=t,this.name=r.fontName,this.embedder=r}return n.prototype.encodeText=function(e){return ge(e,"text",["string"]),this.modified=!0,this.embedder.encodeText(e)},n.prototype.widthOfTextAtSize=function(e,t){return ge(e,"text",["string"]),ge(t,"size",["number"]),this.embedder.widthOfTextAtSize(e,t)},n.prototype.heightAtSize=function(e,t){var r;return ge(e,"size",["number"]),ze(t==null?void 0:t.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(e,{descender:(r=t==null?void 0:t.descender)!==null&&r!==void 0?r:!0})},n.prototype.sizeAtHeight=function(e){return ge(e,"height",["number"]),this.embedder.sizeOfFontAtHeight(e)},n.prototype.getCharacterSet=function(){return this.embedder instanceof xN?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},n.prototype.embed=function(){return Mt(this,void 0,void 0,function(){return $t(this,function(e){switch(e.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:e.sent(),this.modified=!1,e.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),WM=function(){function n(e,t,r){ge(e,"ref",[[Rn,"PDFRef"]]),ge(t,"doc",[[Vf,"PDFDocument"]]),ge(r,"embedder",[[uQ,"JpegEmbedder"],[hQ,"PngEmbedder"]]),this.ref=e,this.doc=t,this.width=r.width,this.height=r.height,this.embedder=r}return n.prototype.scale=function(e){return ge(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},n.prototype.scaleToFit=function(e,t){ge(e,"width",["number"]),ge(t,"height",["number"]);var r=e/this.width,s=t/this.height,i=Math.min(r,s);return this.scale(i)},n.prototype.size=function(){return this.scale(1)},n.prototype.embed=function(){return Mt(this,void 0,void 0,function(){var e,t,r;return $t(this,function(s){switch(s.label){case 0:return this.embedder?(this.embedTask||(e=this,t=e.doc,r=e.ref,this.embedTask=this.embedder.embedIntoContext(t.context,r)),[4,this.embedTask]):[2];case 1:return s.sent(),this.embedder=void 0,[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),Cf;(function(n){n[n.Left=0]="Left",n[n.Center=1]="Center",n[n.Right=2]="Right"})(Cf||(Cf={}));var Vx=function(n){ze(n==null?void 0:n.x,"options.x",["number"]),ze(n==null?void 0:n.y,"options.y",["number"]),ze(n==null?void 0:n.width,"options.width",["number"]),ze(n==null?void 0:n.height,"options.height",["number"]),ze(n==null?void 0:n.textColor,"options.textColor",[[Object,"Color"]]),ze(n==null?void 0:n.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),ze(n==null?void 0:n.borderColor,"options.borderColor",[[Object,"Color"]]),ze(n==null?void 0:n.borderWidth,"options.borderWidth",["number"]),ze(n==null?void 0:n.rotate,"options.rotate",[[Object,"Rotation"]])},u0=function(){function n(e,t,r){ge(e,"acroField",[[$x,"PDFAcroTerminal"]]),ge(t,"ref",[[Rn,"PDFRef"]]),ge(r,"doc",[[Vf,"PDFDocument"]]),this.acroField=e,this.ref=t,this.doc=r}return n.prototype.getName=function(){var e;return(e=this.acroField.getFullyQualifiedName())!==null&&e!==void 0?e:""},n.prototype.isReadOnly=function(){return this.acroField.hasFlag(Il.ReadOnly)},n.prototype.enableReadOnly=function(){this.acroField.setFlagTo(Il.ReadOnly,!0)},n.prototype.disableReadOnly=function(){this.acroField.setFlagTo(Il.ReadOnly,!1)},n.prototype.isRequired=function(){return this.acroField.hasFlag(Il.Required)},n.prototype.enableRequired=function(){this.acroField.setFlagTo(Il.Required,!0)},n.prototype.disableRequired=function(){this.acroField.setFlagTo(Il.Required,!1)},n.prototype.isExported=function(){return!this.acroField.hasFlag(Il.NoExport)},n.prototype.enableExporting=function(){this.acroField.setFlagTo(Il.NoExport,!1)},n.prototype.disableExporting=function(){this.acroField.setFlagTo(Il.NoExport,!0)},n.prototype.needsAppearancesUpdate=function(){throw new sl(this.constructor.name,"needsAppearancesUpdate")},n.prototype.defaultUpdateAppearances=function(e){throw new sl(this.constructor.name,"defaultUpdateAppearances")},n.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},n.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},n.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},n.prototype.createWidget=function(e){var t,r=e.textColor,s=e.backgroundColor,i=e.borderColor,a=e.borderWidth,o=TQ(e.rotate),l=e.caption,c=e.x,u=e.y,h=e.width+a,d=e.height+a,f=!!e.hidden,p=e.page;rQ(o,"degreesAngle",90);var m=VM.create(this.doc.context,this.ref),y=abe({x:c,y:u,width:h,height:d},a,o);m.setRectangle(y),p&&m.setP(p);var g=m.getOrCreateAppearanceCharacteristics();s&&g.setBackgroundColor(WW(s)),g.setRotation(o),l&&g.setCaptions({normal:l}),i&&g.setBorderColor(WW(i));var v=m.getOrCreateBorderStyle();if(a!==void 0&&v.setWidth(a),m.setFlagTo(X1.Print,!0),m.setFlagTo(X1.Hidden,f),m.setFlagTo(X1.Invisible,!1),r){var b=(t=this.acroField.getDefaultAppearance())!==null&&t!==void 0?t:"",w=b+`
`+c0(r).toString();this.acroField.setDefaultAppearance(w)}return m},n.prototype.updateWidgetAppearanceWithFont=function(e,t,r){var s=r.normal,i=r.rollover,a=r.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceStream(e,s,t),rollover:i&&this.createAppearanceStream(e,i,t),down:a&&this.createAppearanceStream(e,a,t)})},n.prototype.updateOnOffWidgetAppearance=function(e,t,r){var s=r.normal,i=r.rollover,a=r.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceDict(e,s,t),rollover:i&&this.createAppearanceDict(e,i,t),down:a&&this.createAppearanceDict(e,a,t)})},n.prototype.updateWidgetAppearances=function(e,t){var r=t.normal,s=t.rollover,i=t.down;e.setNormalAppearance(r),s?e.setRolloverAppearance(s):e.removeRolloverAppearance(),i?e.setDownAppearance(i):e.removeDownAppearance()},n.prototype.createAppearanceStream=function(e,t,r){var s,i=this.acroField.dict.context,a=e.getRectangle(),o=a.width,l=a.height,c=r&&{Font:(s={},s[r.name]=r.ref,s)},u=i.formXObject(t,{Resources:c,BBox:i.obj([0,0,o,l]),Matrix:i.obj([1,0,0,1,0,0])}),h=i.register(u);return h},n.prototype.createImageAppearanceStream=function(e,t,r){var s,i,a=this.acroField.dict.context,o=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(i=c==null?void 0:c.getWidth())!==null&&i!==void 0?i:0,h=Kh(l==null?void 0:l.getRotation()),d=pp(At(At({},o),{rotation:h})),f=o0(o,h),p=t.scaleToFit(f.width-u*2,f.height-u*2),m={x:u,y:u,width:p.width,height:p.height,rotate:St(0),xSkew:St(0),ySkew:St(0)};r===Cf.Center?(m.x+=(f.width-u*2)/2-p.width/2,m.y+=(f.height-u*2)/2-p.height/2):r===Cf.Right&&(m.x=f.width-u-p.width,m.y=f.height-u-p.height);var y=this.doc.context.addRandomSuffix("Image",10),g=mn(d,LQ(y,m)),v={XObject:(s={},s[y]=t.ref,s)},b=a.formXObject(g,{Resources:v,BBox:a.obj([0,0,o.width,o.height]),Matrix:a.obj([1,0,0,1,0,0])});return a.register(b)},n.prototype.createAppearanceDict=function(e,t,r){var s=this.acroField.dict.context,i=this.createAppearanceStream(e,t.on),a=this.createAppearanceStream(e,t.off),o=s.obj({});return o.set(r,i),o.set(Q.of("Off"),a),o},n}(),y1=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,t,r,s)||this;return ge(t,"acroCheckBox",[[wR,"PDFAcroCheckBox"]]),i.acroField=t,i}return e.prototype.check=function(){var t,r=(t=this.acroField.getOnValue())!==null&&t!==void 0?t:Q.of("Yes");this.markAsDirty(),this.acroField.setValue(r)},e.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(Q.of("Off"))},e.prototype.isChecked=function(){var t=this.acroField.getOnValue();return!!t&&t===this.acroField.getValue()},e.prototype.addToPage=function(t,r){var s,i,a,o,l,c;ge(t,"page",[[Zo,"PDFPage"]]),Vx(r),r||(r={}),"textColor"in r||(r.textColor=Cn(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Cn(1,1,1)),"borderColor"in r||(r.borderColor=Cn(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var u=this.createWidget({x:(s=r.x)!==null&&s!==void 0?s:0,y:(i=r.y)!==null&&i!==void 0?i:0,width:(a=r.width)!==null&&a!==void 0?a:50,height:(o=r.height)!==null&&o!==void 0?o:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:St(0),hidden:r.hidden,page:t.ref}),h=this.doc.context.register(u.dict);this.acroField.addWidget(h),u.setAppearanceState(Q.of("Off")),this.updateWidgetAppearance(u,Q.of("Yes")),t.node.addAnnot(h)},e.prototype.needsAppearancesUpdate=function(){for(var t,r=this.acroField.getWidgets(),s=0,i=r.length;s<i;s++){var a=r[s],o=a.getAppearanceState(),l=(t=a.getAppearances())===null||t===void 0?void 0:t.normal;if(!(l instanceof Pt)||o&&!l.has(o))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(t){var r;ze(t,"provider",[Function]);for(var s=this.acroField.getWidgets(),i=0,a=s.length;i<a;i++){var o=s[i],l=(r=o.getOnValue())!==null&&r!==void 0?r:Q.of("Yes");l&&this.updateWidgetAppearance(o,l,t)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,s){var i=s??Gbe,a=Bx(i(this,t));this.updateOnOffWidgetAppearance(t,r,a)},e.of=function(t,r,s){return new e(t,r,s)},e}(u0),yA=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,t,r,s)||this;return ge(t,"acroComboBox",[[SR,"PDFAcroComboBox"]]),i.acroField=t,i}return e.prototype.getOptions=function(){for(var t=this.acroField.getOptions(),r=new Array(t.length),s=0,i=r.length;s<i;s++){var a=t[s],o=a.display,l=a.value;r[s]=(o??l).decodeText()}return r},e.prototype.getSelected=function(){for(var t=this.acroField.getValues(),r=new Array(t.length),s=0,i=t.length;s<i;s++)r[s]=t[s].decodeText();return r},e.prototype.setOptions=function(t){ge(t,"options",[Array]);for(var r=new Array(t.length),s=0,i=t.length;s<i;s++)r[s]={value:bt.fromText(t[s])};this.acroField.setOptions(r)},e.prototype.addOptions=function(t){ge(t,"options",["string",Array]);for(var r=Array.isArray(t)?t:[t],s=this.acroField.getOptions(),i=new Array(r.length),a=0,o=r.length;a<o;a++)i[a]={value:bt.fromText(r[a])};this.acroField.setOptions(s.concat(i))},e.prototype.select=function(t,r){r===void 0&&(r=!1),ge(t,"options",["string",Array]),ge(r,"merge",["boolean"]);var s=Array.isArray(t)?t:[t],i=this.getOptions(),a=s.find(function(h){return!i.includes(h)});a&&this.enableEditing(),this.markAsDirty(),(s.length>1||s.length===1&&r)&&this.enableMultiselect();for(var o=new Array(s.length),l=0,c=s.length;l<c;l++)o[l]=bt.fromText(s[l]);if(r){var u=this.acroField.getValues();this.acroField.setValues(u.concat(o))}else this.acroField.setValues(o)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(t){xR(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.isEditable=function(){return this.acroField.hasFlag(Nn.Edit)},e.prototype.enableEditing=function(){this.acroField.setFlagTo(Nn.Edit,!0)},e.prototype.disableEditing=function(){this.acroField.setFlagTo(Nn.Edit,!1)},e.prototype.isSorted=function(){return this.acroField.hasFlag(Nn.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(Nn.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(Nn.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(Nn.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Nn.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Nn.MultiSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Nn.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Nn.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Nn.DoNotSpellCheck,!0)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Nn.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Nn.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Nn.CommitOnSelChange,!1)},e.prototype.addToPage=function(t,r){var s,i,a,o,l,c,u;ge(t,"page",[[Zo,"PDFPage"]]),Vx(r),r||(r={}),"textColor"in r||(r.textColor=Cn(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Cn(1,1,1)),"borderColor"in r||(r.borderColor=Cn(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var h=this.createWidget({x:(s=r.x)!==null&&s!==void 0?s:0,y:(i=r.y)!==null&&i!==void 0?i:0,width:(a=r.width)!==null&&a!==void 0?a:200,height:(o=r.height)!==null&&o!==void 0?o:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:St(0),hidden:r.hidden,page:t.ref}),d=this.doc.context.register(h.dict);this.acroField.addWidget(d);var f=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,f),t.node.addAnnot(d)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),s=0,i=r.length;s<i;s++){var a=r[s],o=((t=a.getAppearances())===null||t===void 0?void 0:t.normal)instanceof wo;if(!o)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){ge(t,"font",[[No,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){ge(t,"font",[[No,"PDFFont"]]),ze(r,"provider",[Function]);for(var s=this.acroField.getWidgets(),i=0,a=s.length;i<a;i++){var o=s[i];this.updateWidgetAppearance(o,t,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,s){var i=s??Xbe,a=Bx(i(this,t,r));this.updateWidgetAppearanceWithFont(t,r,a)},e.of=function(t,r,s){return new e(t,r,s)},e}(u0),vA=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,t,r,s)||this;return ge(t,"acroListBox",[[ER,"PDFAcroListBox"]]),i.acroField=t,i}return e.prototype.getOptions=function(){for(var t=this.acroField.getOptions(),r=new Array(t.length),s=0,i=r.length;s<i;s++){var a=t[s],o=a.display,l=a.value;r[s]=(o??l).decodeText()}return r},e.prototype.getSelected=function(){for(var t=this.acroField.getValues(),r=new Array(t.length),s=0,i=t.length;s<i;s++)r[s]=t[s].decodeText();return r},e.prototype.setOptions=function(t){ge(t,"options",[Array]),this.markAsDirty();for(var r=new Array(t.length),s=0,i=t.length;s<i;s++)r[s]={value:bt.fromText(t[s])};this.acroField.setOptions(r)},e.prototype.addOptions=function(t){ge(t,"options",["string",Array]),this.markAsDirty();for(var r=Array.isArray(t)?t:[t],s=this.acroField.getOptions(),i=new Array(r.length),a=0,o=r.length;a<o;a++)i[a]={value:bt.fromText(r[a])};this.acroField.setOptions(s.concat(i))},e.prototype.select=function(t,r){r===void 0&&(r=!1),ge(t,"options",["string",Array]),ge(r,"merge",["boolean"]);var s=Array.isArray(t)?t:[t],i=this.getOptions();Kve(s,"option",i),this.markAsDirty(),(s.length>1||s.length===1&&r)&&this.enableMultiselect();for(var a=new Array(s.length),o=0,l=s.length;o<l;o++)a[o]=bt.fromText(s[o]);if(r){var c=this.acroField.getValues();this.acroField.setValues(c.concat(a))}else this.acroField.setValues(a)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(t){xR(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.isSorted=function(){return this.acroField.hasFlag(Nn.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(Nn.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(Nn.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(Nn.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Nn.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Nn.MultiSelect,!1)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Nn.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Nn.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Nn.CommitOnSelChange,!1)},e.prototype.addToPage=function(t,r){var s,i,a,o,l,c,u;ge(t,"page",[[Zo,"PDFPage"]]),Vx(r),r||(r={}),"textColor"in r||(r.textColor=Cn(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Cn(1,1,1)),"borderColor"in r||(r.borderColor=Cn(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var h=this.createWidget({x:(s=r.x)!==null&&s!==void 0?s:0,y:(i=r.y)!==null&&i!==void 0?i:0,width:(a=r.width)!==null&&a!==void 0?a:200,height:(o=r.height)!==null&&o!==void 0?o:100,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:St(0),hidden:r.hidden,page:t.ref}),d=this.doc.context.register(h.dict);this.acroField.addWidget(d);var f=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,f),t.node.addAnnot(d)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),s=0,i=r.length;s<i;s++){var a=r[s],o=((t=a.getAppearances())===null||t===void 0?void 0:t.normal)instanceof wo;if(!o)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){ge(t,"font",[[No,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){ge(t,"font",[[No,"PDFFont"]]),ze(r,"provider",[Function]);for(var s=this.acroField.getWidgets(),i=0,a=s.length;i<a;i++){var o=s[i];this.updateWidgetAppearance(o,t,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,s){var i=s??Ybe,a=Bx(i(this,t,r));this.updateWidgetAppearanceWithFont(t,r,a)},e.of=function(t,r,s){return new e(t,r,s)},e}(u0),v1=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,t,r,s)||this;return ge(t,"acroRadioButton",[[TR,"PDFAcroRadioButton"]]),i.acroField=t,i}return e.prototype.getOptions=function(){var t=this.acroField.getExportValues();if(t){for(var r=new Array(t.length),s=0,i=t.length;s<i;s++)r[s]=t[s].decodeText();return r}for(var a=this.acroField.getOnValues(),o=new Array(a.length),s=0,i=o.length;s<i;s++)o[s]=a[s].decodeText();return o},e.prototype.getSelected=function(){var t=this.acroField.getValue();if(t!==Q.of("Off")){var r=this.acroField.getExportValues();if(r){for(var s=this.acroField.getOnValues(),i=0,a=s.length;i<a;i++)if(s[i]===t)return r[i].decodeText()}return t.decodeText()}},e.prototype.select=function(t){ge(t,"option",["string"]);var r=this.getOptions();of(t,"option",r),this.markAsDirty();var s=this.acroField.getOnValues(),i=this.acroField.getExportValues();if(i)for(var a=0,o=i.length;a<o;a++)i[a].decodeText()===t&&this.acroField.setValue(s[a]);else for(var a=0,o=s.length;a<o;a++){var l=s[a];l.decodeText()===t&&this.acroField.setValue(l)}},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(Q.of("Off"))},e.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(Yo.NoToggleToOff)},e.prototype.enableOffToggling=function(){this.acroField.setFlagTo(Yo.NoToggleToOff,!1)},e.prototype.disableOffToggling=function(){this.acroField.setFlagTo(Yo.NoToggleToOff,!0)},e.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(Yo.RadiosInUnison)},e.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(Yo.RadiosInUnison,!1)},e.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(Yo.RadiosInUnison,!0)},e.prototype.addOptionToPage=function(t,r,s){var i,a,o,l,c,u,h,d,f;ge(t,"option",["string"]),ge(r,"page",[[Zo,"PDFPage"]]),Vx(s);var p=this.createWidget({x:(i=s==null?void 0:s.x)!==null&&i!==void 0?i:0,y:(a=s==null?void 0:s.y)!==null&&a!==void 0?a:0,width:(o=s==null?void 0:s.width)!==null&&o!==void 0?o:50,height:(l=s==null?void 0:s.height)!==null&&l!==void 0?l:50,textColor:(c=s==null?void 0:s.textColor)!==null&&c!==void 0?c:Cn(0,0,0),backgroundColor:(u=s==null?void 0:s.backgroundColor)!==null&&u!==void 0?u:Cn(1,1,1),borderColor:(h=s==null?void 0:s.borderColor)!==null&&h!==void 0?h:Cn(0,0,0),borderWidth:(d=s==null?void 0:s.borderWidth)!==null&&d!==void 0?d:1,rotate:(f=s==null?void 0:s.rotate)!==null&&f!==void 0?f:St(0),hidden:s==null?void 0:s.hidden,page:r.ref}),m=this.doc.context.register(p.dict),y=this.acroField.addWidgetWithOpt(m,bt.fromText(t),!this.isMutuallyExclusive());p.setAppearanceState(Q.of("Off")),this.updateWidgetAppearance(p,y),r.node.addAnnot(m)},e.prototype.needsAppearancesUpdate=function(){for(var t,r=this.acroField.getWidgets(),s=0,i=r.length;s<i;s++){var a=r[s],o=a.getAppearanceState(),l=(t=a.getAppearances())===null||t===void 0?void 0:t.normal;if(!(l instanceof Pt)||o&&!l.has(o))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(t){ze(t,"provider",[Function]);for(var r=this.acroField.getWidgets(),s=0,i=r.length;s<i;s++){var a=r[s],o=a.getOnValue();o&&this.updateWidgetAppearance(a,o,t)}},e.prototype.updateWidgetAppearance=function(t,r,s){var i=s??Hbe,a=Bx(i(this,t));this.updateOnOffWidgetAppearance(t,r,a)},e.of=function(t,r,s){return new e(t,r,s)},e}(u0),GM=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,t,r,s)||this;return ge(t,"acroSignature",[[B5,"PDFAcroSignature"]]),i.acroField=t,i}return e.prototype.needsAppearancesUpdate=function(){return!1},e.of=function(t,r,s){return new e(t,r,s)},e}(u0),xA=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,t,r,s)||this;return ge(t,"acroText",[[kR,"PDFAcroText"]]),i.acroField=t,i}return e.prototype.getText=function(){var t=this.acroField.getValue();if(!t&&this.isRichFormatted())throw new Obe(this.getName());return t==null?void 0:t.decodeText()},e.prototype.setText=function(t){ze(t,"text",["string"]);var r=this.getMaxLength();if(r!==void 0&&t&&t.length>r)throw new Mbe(t.length,r,this.getName());this.markAsDirty(),this.disableRichFormatting(),t?this.acroField.setValue(bt.fromText(t)):this.acroField.removeValue()},e.prototype.getAlignment=function(){var t=this.acroField.getQuadding();return t===0?xs.Left:t===1?xs.Center:t===2?xs.Right:xs.Left},e.prototype.setAlignment=function(t){of(t,"alignment",xs),this.markAsDirty(),this.acroField.setQuadding(t)},e.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},e.prototype.setMaxLength=function(t){if(El(t,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),t===void 0)this.acroField.removeMaxLength();else{var r=this.getText();if(r&&r.length>t)throw new $be(r.length,t,this.getName());this.acroField.setMaxLength(t)}},e.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},e.prototype.setImage=function(t){for(var r=this.getAlignment(),s=r===xs.Center?Cf.Center:r===xs.Right?Cf.Right:Cf.Left,i=this.acroField.getWidgets(),a=0,o=i.length;a<o;a++){var l=i[a],c=this.createImageAppearanceStream(l,t,s);this.updateWidgetAppearances(l,{normal:c})}this.markAsClean()},e.prototype.setFontSize=function(t){xR(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.isMultiline=function(){return this.acroField.hasFlag(xr.Multiline)},e.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(xr.Multiline,!0)},e.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(xr.Multiline,!1)},e.prototype.isPassword=function(){return this.acroField.hasFlag(xr.Password)},e.prototype.enablePassword=function(){this.acroField.setFlagTo(xr.Password,!0)},e.prototype.disablePassword=function(){this.acroField.setFlagTo(xr.Password,!1)},e.prototype.isFileSelector=function(){return this.acroField.hasFlag(xr.FileSelect)},e.prototype.enableFileSelection=function(){this.acroField.setFlagTo(xr.FileSelect,!0)},e.prototype.disableFileSelection=function(){this.acroField.setFlagTo(xr.FileSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(xr.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(xr.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(xr.DoNotSpellCheck,!0)},e.prototype.isScrollable=function(){return!this.acroField.hasFlag(xr.DoNotScroll)},e.prototype.enableScrolling=function(){this.acroField.setFlagTo(xr.DoNotScroll,!1)},e.prototype.disableScrolling=function(){this.acroField.setFlagTo(xr.DoNotScroll,!0)},e.prototype.isCombed=function(){return this.acroField.hasFlag(xr.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},e.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var t="PDFTextFields must have a max length in order to be combed";console.warn(t)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(xr.Comb,!0)},e.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(xr.Comb,!1)},e.prototype.isRichFormatted=function(){return this.acroField.hasFlag(xr.RichText)},e.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(xr.RichText,!0)},e.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(xr.RichText,!1)},e.prototype.addToPage=function(t,r){var s,i,a,o,l,c,u;ge(t,"page",[[Zo,"PDFPage"]]),Vx(r),r||(r={}),"textColor"in r||(r.textColor=Cn(0,0,0)),"backgroundColor"in r||(r.backgroundColor=Cn(1,1,1)),"borderColor"in r||(r.borderColor=Cn(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var h=this.createWidget({x:(s=r.x)!==null&&s!==void 0?s:0,y:(i=r.y)!==null&&i!==void 0?i:0,width:(a=r.width)!==null&&a!==void 0?a:200,height:(o=r.height)!==null&&o!==void 0?o:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=r.rotate)!==null&&c!==void 0?c:St(0),hidden:r.hidden,page:t.ref}),d=this.doc.context.register(h.dict);this.acroField.addWidget(d);var f=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,f),t.node.addAnnot(d)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),s=0,i=r.length;s<i;s++){var a=r[s],o=((t=a.getAppearances())===null||t===void 0?void 0:t.normal)instanceof wo;if(!o)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){ge(t,"font",[[No,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){ge(t,"font",[[No,"PDFFont"]]),ze(r,"provider",[Function]);for(var s=this.acroField.getWidgets(),i=0,a=s.length;i<a;i++){var o=s[i];this.updateWidgetAppearance(o,t,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,s){var i=s??Kbe,a=Bx(i(this,t,r));this.updateWidgetAppearanceWithFont(t,r,a)},e.of=function(t,r,s){return new e(t,r,s)},e}(u0),AN;(function(n){n.Courier="Courier",n.CourierBold="Courier-Bold",n.CourierOblique="Courier-Oblique",n.CourierBoldOblique="Courier-BoldOblique",n.Helvetica="Helvetica",n.HelveticaBold="Helvetica-Bold",n.HelveticaOblique="Helvetica-Oblique",n.HelveticaBoldOblique="Helvetica-BoldOblique",n.TimesRoman="Times-Roman",n.TimesRomanBold="Times-Bold",n.TimesRomanItalic="Times-Italic",n.TimesRomanBoldItalic="Times-BoldItalic",n.Symbol="Symbol",n.ZapfDingbats="ZapfDingbats"})(AN||(AN={}));var Zbe=function(){function n(e,t){var r=this;this.embedDefaultFont=function(){return r.doc.embedStandardFont(AN.Helvetica)},ge(e,"acroForm",[[SN,"PDFAcroForm"]]),ge(t,"doc",[[Vf,"PDFDocument"]]),this.acroForm=e,this.doc=t,this.dirtyFields=new Set,this.defaultFontCache=Sh.populatedBy(this.embedDefaultFont)}return n.prototype.hasXFA=function(){return this.acroForm.dict.has(Q.of("XFA"))},n.prototype.deleteXFA=function(){this.acroForm.dict.delete(Q.of("XFA"))},n.prototype.getFields=function(){for(var e=this.acroForm.getAllFields(),t=[],r=0,s=e.length;r<s;r++){var i=e[r],a=i[0],o=i[1],l=Qbe(a,o,this.doc);l&&t.push(l)}return t},n.prototype.getFieldMaybe=function(e){ge(e,"name",["string"]);for(var t=this.getFields(),r=0,s=t.length;r<s;r++){var i=t[r];if(i.getName()===e)return i}},n.prototype.getField=function(e){ge(e,"name",["string"]);var t=this.getFieldMaybe(e);if(t)return t;throw new Fbe(e)},n.prototype.getButton=function(e){ge(e,"name",["string"]);var t=this.getField(e);if(t instanceof bA)return t;throw new Fp(e,bA,t)},n.prototype.getCheckBox=function(e){ge(e,"name",["string"]);var t=this.getField(e);if(t instanceof y1)return t;throw new Fp(e,y1,t)},n.prototype.getDropdown=function(e){ge(e,"name",["string"]);var t=this.getField(e);if(t instanceof yA)return t;throw new Fp(e,yA,t)},n.prototype.getOptionList=function(e){ge(e,"name",["string"]);var t=this.getField(e);if(t instanceof vA)return t;throw new Fp(e,vA,t)},n.prototype.getRadioGroup=function(e){ge(e,"name",["string"]);var t=this.getField(e);if(t instanceof v1)return t;throw new Fp(e,v1,t)},n.prototype.getSignature=function(e){ge(e,"name",["string"]);var t=this.getField(e);if(t instanceof GM)return t;throw new Fp(e,GM,t)},n.prototype.getTextField=function(e){ge(e,"name",["string"]);var t=this.getField(e);if(t instanceof xA)return t;throw new Fp(e,xA,t)},n.prototype.createButton=function(e){ge(e,"name",["string"]);var t=V0(e),r=this.findOrCreateNonTerminals(t.nonTerminal),s=CR.create(this.doc.context);return s.setPartialName(t.terminal),j0(r,[s,s.ref],t.terminal),bA.of(s,s.ref,this.doc)},n.prototype.createCheckBox=function(e){ge(e,"name",["string"]);var t=V0(e),r=this.findOrCreateNonTerminals(t.nonTerminal),s=wR.create(this.doc.context);return s.setPartialName(t.terminal),j0(r,[s,s.ref],t.terminal),y1.of(s,s.ref,this.doc)},n.prototype.createDropdown=function(e){ge(e,"name",["string"]);var t=V0(e),r=this.findOrCreateNonTerminals(t.nonTerminal),s=SR.create(this.doc.context);return s.setPartialName(t.terminal),j0(r,[s,s.ref],t.terminal),yA.of(s,s.ref,this.doc)},n.prototype.createOptionList=function(e){ge(e,"name",["string"]);var t=V0(e),r=this.findOrCreateNonTerminals(t.nonTerminal),s=ER.create(this.doc.context);return s.setPartialName(t.terminal),j0(r,[s,s.ref],t.terminal),vA.of(s,s.ref,this.doc)},n.prototype.createRadioGroup=function(e){ge(e,"name",["string"]);var t=V0(e),r=this.findOrCreateNonTerminals(t.nonTerminal),s=TR.create(this.doc.context);return s.setPartialName(t.terminal),j0(r,[s,s.ref],t.terminal),v1.of(s,s.ref,this.doc)},n.prototype.createTextField=function(e){ge(e,"name",["string"]);var t=V0(e),r=this.findOrCreateNonTerminals(t.nonTerminal),s=kR.create(this.doc.context);return s.setPartialName(t.terminal),j0(r,[s,s.ref],t.terminal),xA.of(s,s.ref,this.doc)},n.prototype.flatten=function(e){e===void 0&&(e={updateFieldAppearances:!0}),e.updateFieldAppearances&&this.updateFieldAppearances();for(var t=this.getFields(),r=0,s=t.length;r<s;r++){for(var i=t[r],a=i.acroField.getWidgets(),o=0,l=a.length;o<l;o++){var c=a[o],u=this.findWidgetPage(c),h=this.findWidgetAppearanceRef(i,c),d=u.node.newXObject("FlatWidget",h),f=c.getRectangle(),p=mn([As(),il(f.x,f.y)],pp(At(At({},f),{rotation:0})),[K5(d),Ns()]).filter(Boolean);u.pushOperators.apply(u,p)}this.removeField(i)}},n.prototype.removeField=function(e){for(var t=e.acroField.getWidgets(),r=new Set,s=0,i=t.length;s<i;s++){var a=t[s],o=this.findWidgetAppearanceRef(e,a),l=this.findWidgetPage(a);r.add(l),l.node.removeAnnot(o)}r.forEach(function(f){return f.node.removeAnnot(e.ref)}),this.acroForm.removeField(e.acroField);for(var c=e.acroField.normalizedEntries().Kids,u=c.size(),h=0;h<u;h++){var d=c.get(h);d instanceof Rn&&this.doc.context.delete(d)}this.doc.context.delete(e.ref)},n.prototype.updateFieldAppearances=function(e){ze(e,"font",[[No,"PDFFont"]]),e=e??this.getDefaultFont();for(var t=this.getFields(),r=0,s=t.length;r<s;r++){var i=t[r];i.needsAppearancesUpdate()&&i.defaultUpdateAppearances(e)}},n.prototype.markFieldAsDirty=function(e){ze(e,"fieldRef",[[Rn,"PDFRef"]]),this.dirtyFields.add(e)},n.prototype.markFieldAsClean=function(e){ze(e,"fieldRef",[[Rn,"PDFRef"]]),this.dirtyFields.delete(e)},n.prototype.fieldIsDirty=function(e){return ze(e,"fieldRef",[[Rn,"PDFRef"]]),this.dirtyFields.has(e)},n.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},n.prototype.findWidgetPage=function(e){var t=e.P(),r=this.doc.getPages().find(function(i){return i.ref===t});if(r===void 0){var s=this.doc.context.getObjectRef(e.dict);if(s===void 0)throw new Error("Could not find PDFRef for PDFObject");if(r=this.doc.findPageForAnnotationRef(s),r===void 0)throw new Error("Could not find page for PDFRef "+s)}return r},n.prototype.findWidgetAppearanceRef=function(e,t){var r,s=t.getNormalAppearance();if(s instanceof Pt&&(e instanceof y1||e instanceof v1)){var i=e.acroField.getValue(),a=(r=s.get(i))!==null&&r!==void 0?r:s.get(Q.of("Off"));a instanceof Rn&&(s=a)}if(!(s instanceof Rn)){var o=e.getName();throw new Error("Failed to extract appearance ref for: "+o)}return s},n.prototype.findOrCreateNonTerminals=function(e){for(var t=[this.acroForm],r=0,s=e.length;r<s;r++){var i=e[r];if(!i)throw new Pbe(i);var a=t[0],o=t[1],l=this.findNonTerminal(i,a);if(l)t=l;else{var c=wN.create(this.doc.context);c.setPartialName(i),c.setParent(o);var u=this.doc.context.register(c.dict);a.addField(u),t=[c,u]}}return t},n.prototype.findNonTerminal=function(e,t){for(var r=t instanceof SN?this.acroForm.getFields():V5(t.Kids()),s=0,i=r.length;s<i;s++){var a=r[s],o=a[0],l=a[1];if(o.getPartialName()===e){if(o instanceof wN)return[o,l];throw new $Q(e)}}},n.of=function(e,t){return new n(e,t)},n}(),Qbe=function(n,e,t){if(n instanceof CR)return bA.of(n,e,t);if(n instanceof wR)return y1.of(n,e,t);if(n instanceof SR)return yA.of(n,e,t);if(n instanceof ER)return vA.of(n,e,t);if(n instanceof kR)return xA.of(n,e,t);if(n instanceof TR)return v1.of(n,e,t);if(n instanceof B5)return GM.of(n,e,t)},V0=function(n){if(n.length===0)throw new Error("PDF field names must not be empty strings");for(var e=n.split("."),t=0,r=e.length;t<r;t++)if(e[t]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+n+'"');return e.length===1?{nonTerminal:[],terminal:e[0]}:{nonTerminal:e.slice(0,e.length-1),terminal:e[e.length-1]}},j0=function(n,e,t){for(var r=n[0],s=n[1],i=e[0],a=e[1],o=r.normalizedEntries(),l=V5("Kids"in o?o.Kids:o.Fields),c=0,u=l.length;c<u;c++)if(l[c][0].getPartialName()===t)throw new $Q(t);r.addField(a),i.setParent(s)},Jbe={A4:[595.28,841.89]},HM;(function(n){n[n.Fastest=1/0]="Fastest",n[n.Fast=1500]="Fast",n[n.Medium=500]="Medium",n[n.Slow=100]="Slow"})(HM||(HM={}));var ewe=function(){function n(e,t,r){this.alreadyEmbedded=!1,this.ref=e,this.doc=t,this.embedder=r}return n.prototype.embed=function(){return Mt(this,void 0,void 0,function(){var e,t,r,s,i;return $t(this,function(a){switch(a.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e=a.sent(),this.doc.catalog.has(Q.of("Names"))||this.doc.catalog.set(Q.of("Names"),this.doc.context.obj({})),t=this.doc.catalog.lookup(Q.of("Names"),Pt),t.has(Q.of("EmbeddedFiles"))||t.set(Q.of("EmbeddedFiles"),this.doc.context.obj({})),r=t.lookup(Q.of("EmbeddedFiles"),Pt),r.has(Q.of("Names"))||r.set(Q.of("Names"),this.doc.context.obj([])),s=r.lookup(Q.of("Names"),wn),s.push(bt.fromText(this.embedder.fileName)),s.push(e),this.doc.catalog.has(Q.of("AF"))||this.doc.catalog.set(Q.of("AF"),this.doc.context.obj([])),i=this.doc.catalog.lookup(Q.of("AF"),wn),i.push(e),this.alreadyEmbedded=!0,a.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),twe=function(){function n(e,t,r){this.alreadyEmbedded=!1,this.ref=e,this.doc=t,this.embedder=r}return n.prototype.embed=function(){return Mt(this,void 0,void 0,function(){var e,t,r,s,i,a,o;return $t(this,function(l){switch(l.label){case 0:return this.alreadyEmbedded?[3,2]:(e=this.doc,t=e.catalog,r=e.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:s=l.sent(),t.has(Q.of("Names"))||t.set(Q.of("Names"),r.obj({})),i=t.lookup(Q.of("Names"),Pt),i.has(Q.of("JavaScript"))||i.set(Q.of("JavaScript"),r.obj({})),a=i.lookup(Q.of("JavaScript"),Pt),a.has(Q.of("Names"))||a.set(Q.of("Names"),r.obj([])),o=a.lookup(Q.of("Names"),wn),o.push(bt.fromText(this.embedder.scriptName)),o.push(s),this.alreadyEmbedded=!0,l.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),nwe=function(){function n(e,t){this.script=e,this.scriptName=t}return n.for=function(e,t){return new n(e,t)},n.prototype.embedIntoContext=function(e,t){return Mt(this,void 0,void 0,function(){var r;return $t(this,function(s){return r=e.obj({Type:"Action",S:"JavaScript",JS:bt.fromText(this.script)}),t?(e.assign(t,r),[2,t]):[2,e.register(r)]})})},n}(),Vf=function(){function n(e,t,r){var s=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var i=[];return s.catalog.Pages().traverse(function(a,o){if(a instanceof kh){var l=s.pageMap.get(a);l||(l=Zo.of(a,o,s),s.pageMap.set(a,l)),i.push(l)}}),i},this.getOrCreateForm=function(){var i=s.catalog.getOrCreateAcroForm();return Zbe.of(i,s)},ge(e,"context",[[zM,"PDFContext"]]),ge(t,"ignoreEncryption",["boolean"]),this.context=e,this.catalog=e.lookup(e.trailerInfo.Root),this.isEncrypted=!!e.lookup(e.trailerInfo.Encrypt),this.pageCache=Sh.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=Sh.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!t&&this.isEncrypted)throw new Nbe;r&&this.updateInfoDict()}return n.load=function(e,t){return t===void 0&&(t={}),Mt(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h,d,f,p;return $t(this,function(m){switch(m.label){case 0:return r=t.ignoreEncryption,s=r===void 0?!1:r,i=t.parseSpeed,a=i===void 0?HM.Slow:i,o=t.throwOnInvalidObject,l=o===void 0?!1:o,c=t.updateMetadata,u=c===void 0?!0:c,h=t.capNumbers,d=h===void 0?!1:h,ge(e,"pdf",["string",Uint8Array,ArrayBuffer]),ge(s,"ignoreEncryption",["boolean"]),ge(a,"parseSpeed",["number"]),ge(l,"throwOnInvalidObject",["boolean"]),f=Dw(e),[4,sbe.forBytesWithOptions(f,a,l,d).parseDocument()];case 1:return p=m.sent(),[2,new n(p,s,u)]}})})},n.create=function(e){return e===void 0&&(e={}),Mt(this,void 0,void 0,function(){var t,r,s,i,a,o;return $t(this,function(l){return t=e.updateMetadata,r=t===void 0?!0:t,s=zM.create(),i=bQ.withContext(s),a=s.register(i),o=xQ.withContextAndPages(s,a),s.trailerInfo.Root=s.register(o),[2,new n(s,!1,r)]})})},n.prototype.registerFontkit=function(e){this.fontkit=e},n.prototype.getForm=function(){var e=this.formCache.access();return e.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),e.deleteXFA()),e},n.prototype.getTitle=function(){var e=this.getInfoDict().lookup(Q.Title);if(e)return pd(e),e.decodeText()},n.prototype.getAuthor=function(){var e=this.getInfoDict().lookup(Q.Author);if(e)return pd(e),e.decodeText()},n.prototype.getSubject=function(){var e=this.getInfoDict().lookup(Q.Subject);if(e)return pd(e),e.decodeText()},n.prototype.getKeywords=function(){var e=this.getInfoDict().lookup(Q.Keywords);if(e)return pd(e),e.decodeText()},n.prototype.getCreator=function(){var e=this.getInfoDict().lookup(Q.Creator);if(e)return pd(e),e.decodeText()},n.prototype.getProducer=function(){var e=this.getInfoDict().lookup(Q.Producer);if(e)return pd(e),e.decodeText()},n.prototype.getCreationDate=function(){var e=this.getInfoDict().lookup(Q.CreationDate);if(e)return pd(e),e.decodeDate()},n.prototype.getModificationDate=function(){var e=this.getInfoDict().lookup(Q.ModDate);if(e)return pd(e),e.decodeDate()},n.prototype.setTitle=function(e,t){ge(e,"title",["string"]);var r=Q.of("Title");if(this.getInfoDict().set(r,bt.fromText(e)),t!=null&&t.showInWindowTitleBar){var s=this.catalog.getOrCreateViewerPreferences();s.setDisplayDocTitle(!0)}},n.prototype.setAuthor=function(e){ge(e,"author",["string"]);var t=Q.of("Author");this.getInfoDict().set(t,bt.fromText(e))},n.prototype.setSubject=function(e){ge(e,"author",["string"]);var t=Q.of("Subject");this.getInfoDict().set(t,bt.fromText(e))},n.prototype.setKeywords=function(e){ge(e,"keywords",[Array]);var t=Q.of("Keywords");this.getInfoDict().set(t,bt.fromText(e.join(" ")))},n.prototype.setCreator=function(e){ge(e,"creator",["string"]);var t=Q.of("Creator");this.getInfoDict().set(t,bt.fromText(e))},n.prototype.setProducer=function(e){ge(e,"creator",["string"]);var t=Q.of("Producer");this.getInfoDict().set(t,bt.fromText(e))},n.prototype.setLanguage=function(e){ge(e,"language",["string"]);var t=Q.of("Lang");this.catalog.set(t,_n.of(e))},n.prototype.setCreationDate=function(e){ge(e,"creationDate",[[Date,"Date"]]);var t=Q.of("CreationDate");this.getInfoDict().set(t,_n.fromDate(e))},n.prototype.setModificationDate=function(e){ge(e,"modificationDate",[[Date,"Date"]]);var t=Q.of("ModDate");this.getInfoDict().set(t,_n.fromDate(e))},n.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},n.prototype.getPages=function(){return this.pageCache.access()},n.prototype.getPage=function(e){var t=this.getPages();return go(e,"index",0,t.length-1),t[e]},n.prototype.getPageIndices=function(){return k0e(0,this.getPageCount())},n.prototype.removePage=function(e){var t=this.getPageCount();if(this.pageCount===0)throw new Dbe;go(e,"index",0,t-1),this.catalog.removeLeafNode(e),this.pageCount=t-1},n.prototype.addPage=function(e){return ge(e,"page",["undefined",[Zo,"PDFPage"],Array]),this.insertPage(this.getPageCount(),e)},n.prototype.insertPage=function(e,t){var r=this.getPageCount();if(go(e,"index",0,r),ge(t,"page",["undefined",[Zo,"PDFPage"],Array]),!t||Array.isArray(t)){var s=Array.isArray(t)?t:Jbe.A4;t=Zo.create(this),t.setSize.apply(t,s)}else if(t.doc!==this)throw new Rbe;var i=this.catalog.insertLeafNode(t.ref,e);return t.node.setParent(i),this.pageMap.set(t.node,t),this.pageCache.invalidate(),this.pageCount=r+1,t},n.prototype.copyPages=function(e,t){return Mt(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u;return $t(this,function(h){switch(h.label){case 0:return ge(e,"srcDoc",[[n,"PDFDocument"]]),ge(t,"indices",[Array]),[4,e.flush()];case 1:for(h.sent(),r=FW.for(e.context,this.context),s=e.getPages(),i=new Array(t.length),a=0,o=t.length;a<o;a++)l=s[t[a]],c=r.copy(l.node),u=this.context.register(c),i[a]=Zo.of(c,u,this);return[2,i]}})})},n.prototype.copy=function(){return Mt(this,void 0,void 0,function(){var e,t,r,s;return $t(this,function(i){switch(i.label){case 0:return[4,n.create()];case 1:return e=i.sent(),[4,e.copyPages(this,this.getPageIndices())];case 2:for(t=i.sent(),r=0,s=t.length;r<s;r++)e.addPage(t[r]);return this.getAuthor()!==void 0&&e.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&e.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&e.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&e.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&e.setProducer(this.getProducer()),this.getSubject()!==void 0&&e.setSubject(this.getSubject()),this.getTitle()!==void 0&&e.setTitle(this.getTitle()),e.defaultWordBreaks=this.defaultWordBreaks,[2,e]}})})},n.prototype.addJavaScript=function(e,t){ge(e,"name",["string"]),ge(t,"script",["string"]);var r=nwe.for(t,e),s=this.context.nextRef(),i=twe.of(s,this,r);this.javaScripts.push(i)},n.prototype.attach=function(e,t,r){return r===void 0&&(r={}),Mt(this,void 0,void 0,function(){var s,i,a,o;return $t(this,function(l){return ge(e,"attachment",["string",Uint8Array,ArrayBuffer]),ge(t,"name",["string"]),ze(r.mimeType,"mimeType",["string"]),ze(r.description,"description",["string"]),ze(r.creationDate,"options.creationDate",[Date]),ze(r.modificationDate,"options.modificationDate",[Date]),$o(r.afRelationship,"options.afRelationship",BM),s=Dw(e),i=_xe.for(s,t,r),a=this.context.nextRef(),o=ewe.of(a,this,i),this.embeddedFiles.push(o),[2]})})},n.prototype.embedFont=function(e,t){return t===void 0&&(t={}),Mt(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h,d;return $t(this,function(f){switch(f.label){case 0:return r=t.subset,s=r===void 0?!1:r,i=t.customName,a=t.features,ge(e,"font",["string",Uint8Array,ArrayBuffer]),ge(s,"subset",["boolean"]),CW(e)?(o=xN.for(e,i),[3,7]):[3,1];case 1:return T0e(e)?(l=Dw(e),c=this.assertFontkit(),s?[4,Nxe.for(c,l,i,a)]:[3,3]):[3,6];case 2:return u=f.sent(),[3,5];case 3:return[4,$5.for(c,l,i,a)];case 4:u=f.sent(),f.label=5;case 5:return o=u,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return h=this.context.nextRef(),d=No.of(h,this,o),this.fonts.push(d),[2,d]}})})},n.prototype.embedStandardFont=function(e,t){if(ge(e,"font",["string"]),!CW(e))throw new TypeError("`font` must be one of type `StandardFonts`");var r=xN.for(e,t),s=this.context.nextRef(),i=No.of(s,this,r);return this.fonts.push(i),i},n.prototype.embedJpg=function(e){return Mt(this,void 0,void 0,function(){var t,r,s,i;return $t(this,function(a){switch(a.label){case 0:return ge(e,"jpg",["string",Uint8Array,ArrayBuffer]),t=Dw(e),[4,uQ.for(t)];case 1:return r=a.sent(),s=this.context.nextRef(),i=WM.of(s,this,r),this.images.push(i),[2,i]}})})},n.prototype.embedPng=function(e){return Mt(this,void 0,void 0,function(){var t,r,s,i;return $t(this,function(a){switch(a.label){case 0:return ge(e,"png",["string",Uint8Array,ArrayBuffer]),t=Dw(e),[4,hQ.for(t)];case 1:return r=a.sent(),s=this.context.nextRef(),i=WM.of(s,this,r),this.images.push(i),[2,i]}})})},n.prototype.embedPdf=function(e,t){return t===void 0&&(t=[0]),Mt(this,void 0,void 0,function(){var r,s,i;return $t(this,function(a){switch(a.label){case 0:return ge(e,"pdf",["string",Uint8Array,ArrayBuffer,[n,"PDFDocument"]]),ge(t,"indices",[Array]),e instanceof n?(s=e,[3,3]):[3,1];case 1:return[4,n.load(e)];case 2:s=a.sent(),a.label=3;case 3:return r=s,i=C0e(r.getPages(),t),[2,this.embedPages(i)]}})})},n.prototype.embedPage=function(e,t,r){return Mt(this,void 0,void 0,function(){var s;return $t(this,function(i){switch(i.label){case 0:return ge(e,"page",[[Zo,"PDFPage"]]),[4,this.embedPages([e],[t],[r])];case 1:return s=i.sent()[0],[2,s]}})})},n.prototype.embedPages=function(e,t,r){return t===void 0&&(t=[]),r===void 0&&(r=[]),Mt(this,void 0,void 0,function(){var c,u,s,i,a,o,l,c,u,h,d,f,p,m,y;return $t(this,function(g){switch(g.label){case 0:if(e.length===0)return[2,[]];for(c=0,u=e.length-1;c<u;c++)if(s=e[c],i=e[c+1],s.node.context!==i.node.context)throw new nxe;a=e[0].node.context,o=a===this.context?function(v){return v}:FW.for(a,this.context).copy,l=new Array(e.length),c=0,u=e.length,g.label=1;case 1:return c<u?(h=o(e[c].node),d=t[c],f=r[c],[4,pQ.for(h,d,f)]):[3,4];case 2:p=g.sent(),m=this.context.nextRef(),l[c]=UQ.of(m,this,p),g.label=3;case 3:return c++,[3,1];case 4:return(y=this.embeddedPages).push.apply(y,l),[2,l]}})})},n.prototype.flush=function(){return Mt(this,void 0,void 0,function(){return $t(this,function(e){switch(e.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return e.sent(),[4,this.embedAll(this.images)];case 2:return e.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return e.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return e.sent(),[4,this.embedAll(this.javaScripts)];case 5:return e.sent(),[2]}})})},n.prototype.save=function(e){return e===void 0&&(e={}),Mt(this,void 0,void 0,function(){var t,r,s,i,a,o,l,c,u,h;return $t(this,function(d){switch(d.label){case 0:return t=e.useObjectStreams,r=t===void 0?!0:t,s=e.addDefaultPage,i=s===void 0?!0:s,a=e.objectsPerTick,o=a===void 0?50:a,l=e.updateFieldAppearances,c=l===void 0?!0:l,ge(r,"useObjectStreams",["boolean"]),ge(i,"addDefaultPage",["boolean"]),ge(o,"objectsPerTick",["number"]),ge(c,"updateFieldAppearances",["boolean"]),i&&this.getPageCount()===0&&this.addPage(),c&&(u=this.formCache.getValue(),u&&u.updateFieldAppearances()),[4,this.flush()];case 1:return d.sent(),h=r?kxe:lQ,[2,h.forContext(this.context,o).serializeToBuffer()]}})})},n.prototype.saveAsBase64=function(e){return e===void 0&&(e={}),Mt(this,void 0,void 0,function(){var t,r,s,i,a;return $t(this,function(o){switch(o.label){case 0:return t=e.dataUri,r=t===void 0?!1:t,s=a0e(e,["dataUri"]),ge(r,"dataUri",["boolean"]),[4,this.save(s)];case 1:return i=o.sent(),a=o0e(i),[2,r?"data:application/pdf;base64,"+a:a]}})})},n.prototype.findPageForAnnotationRef=function(e){for(var t=this.getPages(),r=0,s=t.length;r<s;r++){var i=t[r],a=i.node.Annots();if((a==null?void 0:a.indexOf(e))!==void 0)return i}},n.prototype.embedAll=function(e){return Mt(this,void 0,void 0,function(){var t,r;return $t(this,function(s){switch(s.label){case 0:t=0,r=e.length,s.label=1;case 1:return t<r?[4,e[t].embed()]:[3,4];case 2:s.sent(),s.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n.prototype.updateInfoDict=function(){var e="pdf-lib (https://github.com/Hopding/pdf-lib)",t=new Date,r=this.getInfoDict();this.setProducer(e),this.setModificationDate(t),r.get(Q.of("Creator"))||this.setCreator(e),r.get(Q.of("CreationDate"))||this.setCreationDate(t)},n.prototype.getInfoDict=function(){var e=this.context.lookup(this.context.trailerInfo.Info);if(e instanceof Pt)return e;var t=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(t),t},n.prototype.assertFontkit=function(){if(!this.fontkit)throw new _be;return this.fontkit},n}();function pd(n){if(!(n instanceof bt)&&!(n instanceof _n))throw new yN([bt,_n],n)}var Lu;(function(n){n.Normal="Normal",n.Multiply="Multiply",n.Screen="Screen",n.Overlay="Overlay",n.Darken="Darken",n.Lighten="Lighten",n.ColorDodge="ColorDodge",n.ColorBurn="ColorBurn",n.HardLight="HardLight",n.SoftLight="SoftLight",n.Difference="Difference",n.Exclusion="Exclusion"})(Lu||(Lu={}));var Zo=function(){function n(e,t,r){this.fontSize=24,this.fontColor=Cn(0,0,0),this.lineHeight=24,this.x=0,this.y=0,ge(e,"leafNode",[[kh,"PDFPageLeaf"]]),ge(t,"ref",[[Rn,"PDFRef"]]),ge(r,"doc",[[Vf,"PDFDocument"]]),this.node=e,this.ref=t,this.doc=r}return n.prototype.setRotation=function(e){var t=TQ(e);rQ(t,"degreesAngle",90),this.node.set(Q.of("Rotate"),this.doc.context.obj(t))},n.prototype.getRotation=function(){var e=this.node.Rotate();return St(e?e.asNumber():0)},n.prototype.setSize=function(e,t){ge(e,"width",["number"]),ge(t,"height",["number"]);var r=this.getMediaBox();this.setMediaBox(r.x,r.y,e,t);var s=this.getCropBox(),i=this.getBleedBox(),a=this.getTrimBox(),o=this.getArtBox(),l=this.node.CropBox(),c=this.node.BleedBox(),u=this.node.TrimBox(),h=this.node.ArtBox();l&&LE(s,r)&&this.setCropBox(r.x,r.y,e,t),c&&LE(i,r)&&this.setBleedBox(r.x,r.y,e,t),u&&LE(a,r)&&this.setTrimBox(r.x,r.y,e,t),h&&LE(o,r)&&this.setArtBox(r.x,r.y,e,t)},n.prototype.setWidth=function(e){ge(e,"width",["number"]),this.setSize(e,this.getSize().height)},n.prototype.setHeight=function(e){ge(e,"height",["number"]),this.setSize(this.getSize().width,e)},n.prototype.setMediaBox=function(e,t,r,s){ge(e,"x",["number"]),ge(t,"y",["number"]),ge(r,"width",["number"]),ge(s,"height",["number"]);var i=this.doc.context.obj([e,t,e+r,t+s]);this.node.set(Q.MediaBox,i)},n.prototype.setCropBox=function(e,t,r,s){ge(e,"x",["number"]),ge(t,"y",["number"]),ge(r,"width",["number"]),ge(s,"height",["number"]);var i=this.doc.context.obj([e,t,e+r,t+s]);this.node.set(Q.CropBox,i)},n.prototype.setBleedBox=function(e,t,r,s){ge(e,"x",["number"]),ge(t,"y",["number"]),ge(r,"width",["number"]),ge(s,"height",["number"]);var i=this.doc.context.obj([e,t,e+r,t+s]);this.node.set(Q.BleedBox,i)},n.prototype.setTrimBox=function(e,t,r,s){ge(e,"x",["number"]),ge(t,"y",["number"]),ge(r,"width",["number"]),ge(s,"height",["number"]);var i=this.doc.context.obj([e,t,e+r,t+s]);this.node.set(Q.TrimBox,i)},n.prototype.setArtBox=function(e,t,r,s){ge(e,"x",["number"]),ge(t,"y",["number"]),ge(r,"width",["number"]),ge(s,"height",["number"]);var i=this.doc.context.obj([e,t,e+r,t+s]);this.node.set(Q.ArtBox,i)},n.prototype.getSize=function(){var e=this.getMediaBox(),t=e.width,r=e.height;return{width:t,height:r}},n.prototype.getWidth=function(){return this.getSize().width},n.prototype.getHeight=function(){return this.getSize().height},n.prototype.getMediaBox=function(){var e=this.node.MediaBox();return e.asRectangle()},n.prototype.getCropBox=function(){var e,t=this.node.CropBox();return(e=t==null?void 0:t.asRectangle())!==null&&e!==void 0?e:this.getMediaBox()},n.prototype.getBleedBox=function(){var e,t=this.node.BleedBox();return(e=t==null?void 0:t.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},n.prototype.getTrimBox=function(){var e,t=this.node.TrimBox();return(e=t==null?void 0:t.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},n.prototype.getArtBox=function(){var e,t=this.node.ArtBox();return(e=t==null?void 0:t.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},n.prototype.translateContent=function(e,t){ge(e,"x",["number"]),ge(t,"y",["number"]),this.node.normalize(),this.getContentStream();var r=this.createContentStream(As(),il(e,t)),s=this.doc.context.register(r),i=this.createContentStream(Ns()),a=this.doc.context.register(i);this.node.wrapContentStreams(s,a)},n.prototype.scale=function(e,t){ge(e,"x",["number"]),ge(t,"y",["number"]),this.setSize(this.getWidth()*e,this.getHeight()*t),this.scaleContent(e,t),this.scaleAnnotations(e,t)},n.prototype.scaleContent=function(e,t){ge(e,"x",["number"]),ge(t,"y",["number"]),this.node.normalize(),this.getContentStream();var r=this.createContentStream(As(),OS(e,t)),s=this.doc.context.register(r),i=this.createContentStream(Ns()),a=this.doc.context.register(i);this.node.wrapContentStreams(s,a)},n.prototype.scaleAnnotations=function(e,t){ge(e,"x",["number"]),ge(t,"y",["number"]);var r=this.node.Annots();if(r)for(var s=0;s<r.size();s++){var i=r.lookup(s);i instanceof Pt&&this.scaleAnnot(i,e,t)}},n.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},n.prototype.setFont=function(e){ge(e,"font",[[No,"PDFFont"]]),this.font=e,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},n.prototype.setFontSize=function(e){ge(e,"fontSize",["number"]),this.fontSize=e},n.prototype.setFontColor=function(e){ge(e,"fontColor",[[Object,"Color"]]),this.fontColor=e},n.prototype.setLineHeight=function(e){ge(e,"lineHeight",["number"]),this.lineHeight=e},n.prototype.getPosition=function(){return{x:this.x,y:this.y}},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.moveTo=function(e,t){ge(e,"x",["number"]),ge(t,"y",["number"]),this.x=e,this.y=t},n.prototype.moveDown=function(e){ge(e,"yDecrease",["number"]),this.y-=e},n.prototype.moveUp=function(e){ge(e,"yIncrease",["number"]),this.y+=e},n.prototype.moveLeft=function(e){ge(e,"xDecrease",["number"]),this.x-=e},n.prototype.moveRight=function(e){ge(e,"xIncrease",["number"]),this.x+=e},n.prototype.pushOperators=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];nQ(e,"operator",[[hn,"PDFOperator"]]);var r=this.getContentStream();r.push.apply(r,e)},n.prototype.drawText=function(e,t){var r,s,i,a,o,l,c;t===void 0&&(t={}),ge(e,"text",["string"]),ze(t.color,"options.color",[[Object,"Color"]]),El(t.opacity,"opacity.opacity",0,1),ze(t.font,"options.font",[[No,"PDFFont"]]),ze(t.size,"options.size",["number"]),ze(t.rotate,"options.rotate",[[Object,"Rotation"]]),ze(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),ze(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),ze(t.x,"options.x",["number"]),ze(t.y,"options.y",["number"]),ze(t.lineHeight,"options.lineHeight",["number"]),ze(t.maxWidth,"options.maxWidth",["number"]),ze(t.wordBreaks,"options.wordBreaks",[Array]),$o(t.blendMode,"options.blendMode",Lu);for(var u=this.setOrEmbedFont(t.font),h=u.oldFont,d=u.newFont,f=u.newFontKey,p=t.size||this.fontSize,m=t.wordBreaks||this.doc.defaultWordBreaks,y=function(T){return d.widthOfTextAtSize(T,p)},g=t.maxWidth===void 0?rZ(Kk(e)):g0e(e,m,t.maxWidth,y),v=new Array(g.length),b=0,w=g.length;b<w;b++)v[b]=d.encodeText(g[b]);var C=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),I=this.getContentStream();I.push.apply(I,wbe(v,{color:(r=t.color)!==null&&r!==void 0?r:this.fontColor,font:f,size:p,rotate:(s=t.rotate)!==null&&s!==void 0?s:St(0),xSkew:(i=t.xSkew)!==null&&i!==void 0?i:St(0),ySkew:(a=t.ySkew)!==null&&a!==void 0?a:St(0),x:(o=t.x)!==null&&o!==void 0?o:this.x,y:(l=t.y)!==null&&l!==void 0?l:this.y,lineHeight:(c=t.lineHeight)!==null&&c!==void 0?c:this.lineHeight,graphicsState:C})),t.font&&(h?this.setFont(h):this.resetFont())},n.prototype.drawImage=function(e,t){var r,s,i,a,o,l,c;t===void 0&&(t={}),ge(e,"image",[[WM,"PDFImage"]]),ze(t.x,"options.x",["number"]),ze(t.y,"options.y",["number"]),ze(t.width,"options.width",["number"]),ze(t.height,"options.height",["number"]),ze(t.rotate,"options.rotate",[[Object,"Rotation"]]),ze(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),ze(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),El(t.opacity,"opacity.opacity",0,1),$o(t.blendMode,"options.blendMode",Lu);var u=this.node.newXObject("Image",e.ref),h=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),d=this.getContentStream();d.push.apply(d,LQ(u,{x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(s=t.y)!==null&&s!==void 0?s:this.y,width:(i=t.width)!==null&&i!==void 0?i:e.size().width,height:(a=t.height)!==null&&a!==void 0?a:e.size().height,rotate:(o=t.rotate)!==null&&o!==void 0?o:St(0),xSkew:(l=t.xSkew)!==null&&l!==void 0?l:St(0),ySkew:(c=t.ySkew)!==null&&c!==void 0?c:St(0),graphicsState:h}))},n.prototype.drawPage=function(e,t){var r,s,i,a,o;t===void 0&&(t={}),ge(e,"embeddedPage",[[UQ,"PDFEmbeddedPage"]]),ze(t.x,"options.x",["number"]),ze(t.y,"options.y",["number"]),ze(t.xScale,"options.xScale",["number"]),ze(t.yScale,"options.yScale",["number"]),ze(t.width,"options.width",["number"]),ze(t.height,"options.height",["number"]),ze(t.rotate,"options.rotate",[[Object,"Rotation"]]),ze(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),ze(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),El(t.opacity,"opacity.opacity",0,1),$o(t.blendMode,"options.blendMode",Lu);var l=this.node.newXObject("EmbeddedPdfPage",e.ref),c=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),u=t.width!==void 0?t.width/e.width:t.xScale!==void 0?t.xScale:1,h=t.height!==void 0?t.height/e.height:t.yScale!==void 0?t.yScale:1,d=this.getContentStream();d.push.apply(d,Sbe(l,{x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(s=t.y)!==null&&s!==void 0?s:this.y,xScale:u,yScale:h,rotate:(i=t.rotate)!==null&&i!==void 0?i:St(0),xSkew:(a=t.xSkew)!==null&&a!==void 0?a:St(0),ySkew:(o=t.ySkew)!==null&&o!==void 0?o:St(0),graphicsState:c}))},n.prototype.drawSvgPath=function(e,t){var r,s,i,a,o,l,c,u,h;t===void 0&&(t={}),ge(e,"path",["string"]),ze(t.x,"options.x",["number"]),ze(t.y,"options.y",["number"]),ze(t.scale,"options.scale",["number"]),ze(t.rotate,"options.rotate",[[Object,"Rotation"]]),ze(t.borderWidth,"options.borderWidth",["number"]),ze(t.color,"options.color",[[Object,"Color"]]),El(t.opacity,"opacity.opacity",0,1),ze(t.borderColor,"options.borderColor",[[Object,"Color"]]),ze(t.borderDashArray,"options.borderDashArray",[Array]),ze(t.borderDashPhase,"options.borderDashPhase",["number"]),$o(t.borderLineCap,"options.borderLineCap",wy),El(t.borderOpacity,"options.borderOpacity",0,1),$o(t.blendMode,"options.blendMode",Lu);var d=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.borderColor=Cn(0,0,0));var f=this.getContentStream();f.push.apply(f,Ebe(e,{x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(s=t.y)!==null&&s!==void 0?s:this.y,scale:t.scale,rotate:(i=t.rotate)!==null&&i!==void 0?i:St(0),color:(a=t.color)!==null&&a!==void 0?a:void 0,borderColor:(o=t.borderColor)!==null&&o!==void 0?o:void 0,borderWidth:(l=t.borderWidth)!==null&&l!==void 0?l:0,borderDashArray:(c=t.borderDashArray)!==null&&c!==void 0?c:void 0,borderDashPhase:(u=t.borderDashPhase)!==null&&u!==void 0?u:void 0,borderLineCap:(h=t.borderLineCap)!==null&&h!==void 0?h:void 0,graphicsState:d}))},n.prototype.drawLine=function(e){var t,r,s,i,a;ge(e.start,"options.start",[[Object,"{ x: number, y: number }"]]),ge(e.end,"options.end",[[Object,"{ x: number, y: number }"]]),ge(e.start.x,"options.start.x",["number"]),ge(e.start.y,"options.start.y",["number"]),ge(e.end.x,"options.end.x",["number"]),ge(e.end.y,"options.end.y",["number"]),ze(e.thickness,"options.thickness",["number"]),ze(e.color,"options.color",[[Object,"Color"]]),ze(e.dashArray,"options.dashArray",[Array]),ze(e.dashPhase,"options.dashPhase",["number"]),$o(e.lineCap,"options.lineCap",wy),El(e.opacity,"opacity.opacity",0,1),$o(e.blendMode,"options.blendMode",Lu);var o=this.maybeEmbedGraphicsState({borderOpacity:e.opacity,blendMode:e.blendMode});"color"in e||(e.color=Cn(0,0,0));var l=this.getContentStream();l.push.apply(l,kbe({start:e.start,end:e.end,thickness:(t=e.thickness)!==null&&t!==void 0?t:1,color:(r=e.color)!==null&&r!==void 0?r:void 0,dashArray:(s=e.dashArray)!==null&&s!==void 0?s:void 0,dashPhase:(i=e.dashPhase)!==null&&i!==void 0?i:void 0,lineCap:(a=e.lineCap)!==null&&a!==void 0?a:void 0,graphicsState:o}))},n.prototype.drawRectangle=function(e){var t,r,s,i,a,o,l,c,u,h,d,f,p;e===void 0&&(e={}),ze(e.x,"options.x",["number"]),ze(e.y,"options.y",["number"]),ze(e.width,"options.width",["number"]),ze(e.height,"options.height",["number"]),ze(e.rotate,"options.rotate",[[Object,"Rotation"]]),ze(e.xSkew,"options.xSkew",[[Object,"Rotation"]]),ze(e.ySkew,"options.ySkew",[[Object,"Rotation"]]),ze(e.borderWidth,"options.borderWidth",["number"]),ze(e.color,"options.color",[[Object,"Color"]]),El(e.opacity,"opacity.opacity",0,1),ze(e.borderColor,"options.borderColor",[[Object,"Color"]]),ze(e.borderDashArray,"options.borderDashArray",[Array]),ze(e.borderDashPhase,"options.borderDashPhase",["number"]),$o(e.borderLineCap,"options.borderLineCap",wy),El(e.borderOpacity,"options.borderOpacity",0,1),$o(e.blendMode,"options.blendMode",Lu);var m=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=Cn(0,0,0));var y=this.getContentStream();y.push.apply(y,ux({x:(t=e.x)!==null&&t!==void 0?t:this.x,y:(r=e.y)!==null&&r!==void 0?r:this.y,width:(s=e.width)!==null&&s!==void 0?s:150,height:(i=e.height)!==null&&i!==void 0?i:100,rotate:(a=e.rotate)!==null&&a!==void 0?a:St(0),xSkew:(o=e.xSkew)!==null&&o!==void 0?o:St(0),ySkew:(l=e.ySkew)!==null&&l!==void 0?l:St(0),borderWidth:(c=e.borderWidth)!==null&&c!==void 0?c:0,color:(u=e.color)!==null&&u!==void 0?u:void 0,borderColor:(h=e.borderColor)!==null&&h!==void 0?h:void 0,borderDashArray:(d=e.borderDashArray)!==null&&d!==void 0?d:void 0,borderDashPhase:(f=e.borderDashPhase)!==null&&f!==void 0?f:void 0,graphicsState:m,borderLineCap:(p=e.borderLineCap)!==null&&p!==void 0?p:void 0}))},n.prototype.drawSquare=function(e){e===void 0&&(e={});var t=e.size;ze(t,"size",["number"]),this.drawRectangle(At(At({},e),{width:t,height:t}))},n.prototype.drawEllipse=function(e){var t,r,s,i,a,o,l,c,u,h,d;e===void 0&&(e={}),ze(e.x,"options.x",["number"]),ze(e.y,"options.y",["number"]),ze(e.xScale,"options.xScale",["number"]),ze(e.yScale,"options.yScale",["number"]),ze(e.rotate,"options.rotate",[[Object,"Rotation"]]),ze(e.color,"options.color",[[Object,"Color"]]),El(e.opacity,"opacity.opacity",0,1),ze(e.borderColor,"options.borderColor",[[Object,"Color"]]),El(e.borderOpacity,"options.borderOpacity",0,1),ze(e.borderWidth,"options.borderWidth",["number"]),ze(e.borderDashArray,"options.borderDashArray",[Array]),ze(e.borderDashPhase,"options.borderDashPhase",["number"]),$o(e.borderLineCap,"options.borderLineCap",wy),$o(e.blendMode,"options.blendMode",Lu);var f=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=Cn(0,0,0));var p=this.getContentStream();p.push.apply(p,UM({x:(t=e.x)!==null&&t!==void 0?t:this.x,y:(r=e.y)!==null&&r!==void 0?r:this.y,xScale:(s=e.xScale)!==null&&s!==void 0?s:100,yScale:(i=e.yScale)!==null&&i!==void 0?i:100,rotate:(a=e.rotate)!==null&&a!==void 0?a:void 0,color:(o=e.color)!==null&&o!==void 0?o:void 0,borderColor:(l=e.borderColor)!==null&&l!==void 0?l:void 0,borderWidth:(c=e.borderWidth)!==null&&c!==void 0?c:0,borderDashArray:(u=e.borderDashArray)!==null&&u!==void 0?u:void 0,borderDashPhase:(h=e.borderDashPhase)!==null&&h!==void 0?h:void 0,borderLineCap:(d=e.borderLineCap)!==null&&d!==void 0?d:void 0,graphicsState:f}))},n.prototype.drawCircle=function(e){e===void 0&&(e={});var t=e.size,r=t===void 0?100:t;ze(r,"size",["number"]),this.drawEllipse(At(At({},e),{xScale:r,yScale:r}))},n.prototype.setOrEmbedFont=function(e){var t=this.font,r=this.fontKey;e?this.setFont(e):this.getFont();var s=this.font,i=this.fontKey;return{oldFont:t,oldFontKey:r,newFont:s,newFontKey:i}},n.prototype.getFont=function(){if(!this.font||!this.fontKey){var e=this.doc.embedStandardFont(AN.Helvetica);this.setFont(e)}return[this.font,this.fontKey]},n.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},n.prototype.getContentStream=function(e){return e===void 0&&(e=!0),e&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},n.prototype.createContentStream=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.doc.context.obj({}),s=G1.of(r,e);return s},n.prototype.maybeEmbedGraphicsState=function(e){var t=e.opacity,r=e.borderOpacity,s=e.blendMode;if(!(t===void 0&&r===void 0&&s===void 0)){var i=this.doc.context.obj({Type:"ExtGState",ca:t,CA:r,BM:s}),a=this.node.newExtGState("GS",i);return a}},n.prototype.scaleAnnot=function(e,t,r){for(var s=["RD","CL","Vertices","QuadPoints","L","Rect"],i=0,a=s.length;i<a;i++){var o=e.lookup(Q.of(s[i]));o instanceof wn&&o.scalePDFNumbers(t,r)}var l=e.lookup(Q.of("InkList"));if(l instanceof wn)for(var i=0,a=l.size();i<a;i++){var c=l.lookup(i);c instanceof wn&&c.scalePDFNumbers(t,r)}},n.of=function(e,t,r){return new n(e,t,r)},n.create=function(e){ge(e,"doc",[[Vf,"PDFDocument"]]);var t=Rn.of(-1),r=kh.withContextAndParent(e.context,t),s=e.context.register(r);return new n(r,s,e)},n}(),bA=function(n){Ve(e,n);function e(t,r,s){var i=n.call(this,t,r,s)||this;return ge(t,"acroButton",[[CR,"PDFAcroPushButton"]]),i.acroField=t,i}return e.prototype.setImage=function(t,r){r===void 0&&(r=Cf.Center);for(var s=this.acroField.getWidgets(),i=0,a=s.length;i<a;i++){var o=s[i],l=this.createImageAppearanceStream(o,t,r);this.updateWidgetAppearances(o,{normal:l})}this.markAsClean()},e.prototype.setFontSize=function(t){xR(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.addToPage=function(t,r,s){var i,a,o,l,c,u,h,d,f,p,m;ze(t,"text",["string"]),ze(r,"page",[[Zo,"PDFPage"]]),Vx(s);var y=this.createWidget({x:((i=s==null?void 0:s.x)!==null&&i!==void 0?i:0)-((a=s==null?void 0:s.borderWidth)!==null&&a!==void 0?a:0)/2,y:((o=s==null?void 0:s.y)!==null&&o!==void 0?o:0)-((l=s==null?void 0:s.borderWidth)!==null&&l!==void 0?l:0)/2,width:(c=s==null?void 0:s.width)!==null&&c!==void 0?c:100,height:(u=s==null?void 0:s.height)!==null&&u!==void 0?u:50,textColor:(h=s==null?void 0:s.textColor)!==null&&h!==void 0?h:Cn(0,0,0),backgroundColor:(d=s==null?void 0:s.backgroundColor)!==null&&d!==void 0?d:Cn(.75,.75,.75),borderColor:s==null?void 0:s.borderColor,borderWidth:(f=s==null?void 0:s.borderWidth)!==null&&f!==void 0?f:0,rotate:(p=s==null?void 0:s.rotate)!==null&&p!==void 0?p:St(0),caption:t,hidden:s==null?void 0:s.hidden,page:r.ref}),g=this.doc.context.register(y.dict);this.acroField.addWidget(g);var v=(m=s==null?void 0:s.font)!==null&&m!==void 0?m:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(y,v),r.node.addAnnot(g)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),s=0,i=r.length;s<i;s++){var a=r[s],o=((t=a.getAppearances())===null||t===void 0?void 0:t.normal)instanceof wo;if(!o)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){ge(t,"font",[[No,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){ge(t,"font",[[No,"PDFFont"]]),ze(r,"provider",[Function]);for(var s=this.acroField.getWidgets(),i=0,a=s.length;i<a;i++){var o=s[i];this.updateWidgetAppearance(o,t,r)}},e.prototype.updateWidgetAppearance=function(t,r,s){var i=s??qbe,a=Bx(i(this,t,r));this.updateWidgetAppearanceWithFont(t,r,a)},e.of=function(t,r,s){return new e(t,r,s)},e}(u0);const ey=i0e;ey.version.startsWith("4.")?ey.GlobalWorkerOptions.workerSrc=`https://unpkg.com/pdfjs-dist@${ey.version}/build/pdf.worker.min.mjs`:ey.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${ey.version}/pdf.worker.min.js`;async function XW(n){try{const e=await n.arrayBuffer();return await ey.getDocument(e).promise}catch(e){throw console.error("Error loading PDF:",e),new Error("Failed to parse PDF file. "+e.message)}}async function YW(n,e,t=1.5){const r=await n.getPage(e),s=r.getViewport({scale:t}),i=document.createElement("canvas"),a=i.getContext("2d");return i.height=s.height,i.width=s.width,await r.render({canvasContext:a,viewport:s}).promise,i}function WQ(n){const e=n.data,t={};for(let i=0;i<e.length;i+=40){const a=e[i],o=e[i+1],l=e[i+2],c=Math.floor(a/32)*32,u=Math.floor(o/32)*32,h=Math.floor(l/32)*32,d=`${c},${u},${h}`;t[d]=(t[d]||0)+1}let r=0,s={r:0,g:0,b:0};for(const[i,a]of Object.entries(t))if(a>r){r=a;const[o,l,c]=i.split(",").map(Number);s={r:o,g:l,b:c}}return s}function rwe(n){const e=n.getContext("2d"),t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2];return e.putImageData(t,0,0),n}function swe(n,e=40){const t=n.getContext("2d"),r=t.getImageData(0,0,n.width,n.height),s=r.data,i=WQ(r),o=(i.r+i.g+i.b)/3<128;for(let l=0;l<s.length;l+=4){const c=s[l],u=s[l+1],h=s[l+2],d=Math.abs(c-i.r),f=Math.abs(u-i.g),p=Math.abs(h-i.b);if(Math.sqrt(d*d+f*f+p*p)<e)s[l]=255,s[l+1]=255,s[l+2]=255;else if(o)if((c+u+h)/3<100)s[l]=0,s[l+1]=0,s[l+2]=0;else{const g=Math.max(c,u,h),v=Math.min(c,u,h);g-v>30&&(s[l]=Math.min(255,c*1.2),s[l+1]=Math.min(255,u*1.2),s[l+2]=Math.min(255,h*1.2))}}return t.putImageData(r,0,0),n}function iwe(n){const e=n.getContext("2d"),t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4){const i=.299*r[s]+.587*r[s+1]+.114*r[s+2];r[s]=i,r[s+1]=i,r[s+2]=i}return e.putImageData(t,0,0),n}function awe(n,e=128){const t=n.getContext("2d"),r=t.getImageData(0,0,n.width,n.height),s=r.data;for(let i=0;i<s.length;i+=4){const o=.299*s[i]+.587*s[i+1]+.114*s[i+2]>e?255:0;s[i]=o,s[i+1]=o,s[i+2]=o}return t.putImageData(r,0,0),n}function owe(n,e=.15){const t=n.getContext("2d"),r=t.getImageData(0,0,n.width,n.height),s=r.data,i=n.width,a=n.height,o=WQ(r);(o.r+o.g+o.b)/3;const l={};for(let h=0;h<s.length;h+=4){const d=s[h],f=s[h+1],p=s[h+2],m=(d+f+p)/3;if(m<20||m>235)continue;const y=Math.abs(d-o.r),g=Math.abs(f-o.g),v=Math.abs(p-o.b);if(y<20&&g<20&&v<20)continue;const b=Math.floor(d/16)*16,w=Math.floor(f/16)*16,C=Math.floor(p/16)*16,I=`${b},${w},${C}`;l[I]=(l[I]||0)+1}const c=i*a/4,u=[];for(const[h,d]of Object.entries(l)){const f=d/c;if(f>.03&&f<.4){const[p,m,y]=h.split(",").map(Number),g=Math.max(p,m,y),v=Math.min(p,m,y);(g===0?0:(g-v)/g)<.3&&u.push({r:p,g:m,b:y,count:d})}}for(let h=0;h<s.length;h+=4){const d=s[h],f=s[h+1],p=s[h+2];for(const m of u){const y=Math.abs(d-m.r),g=Math.abs(f-m.g),v=Math.abs(p-m.b);if(y<25&&g<25&&v<25){s[h]=255,s[h+1]=255,s[h+2]=255;break}}}for(let h=0;h<s.length;h+=4){const d=s[h],f=s[h+1],p=s[h+2],m=(d+f+p)/3,y=Math.max(d,f,p),g=Math.min(d,f,p);m>180&&m<250&&y-g<20&&(s[h]=255,s[h+1]=255,s[h+2]=255)}return t.putImageData(r,0,0),n}function lwe(n,e){let t=n;return e.invert&&(t=rwe(t)),e.clearBackground&&(t=swe(t)),e.removeLogo&&(t=owe(t)),e.greyscale&&(t=iwe(t)),e.blackAndWhite&&(t=awe(t)),t}async function cwe(n,e){var b;const t=await Vf.create(),{showBorders:r,addPageNumbers:s,orientation:i,documentSize:a}=e;let o=e.rows||1,l=e.cols||1;const c=o*l,u=e.margin||20,h=e.cellPadding||5;let d,f;if(a==="A4"||!a)d=595.28,f=841.89;else if(a==="Letter")d=612,f=792;else{const w=(b=n[0])==null?void 0:b.canvas;w?(d=w.width*.75,f=w.height*.75):(d=595.28,f=841.89)}i==="landscape"&&([d,f]=[f,d]);const p=(d-u*2)/l,m=(f-u*2)/o;let y=t.addPage([d,f]),g=0;for(let w=0;w<n.length;w++){g>=c&&(y=t.addPage([d,f]),g=0);const{canvas:C}=n[w];let I=.8;e.quality==="high"?I=.95:e.quality==="low"&&(I=.6);const T=C.toDataURL("image/jpeg",I),E=await t.embedJpg(T),A=g%l,N=Math.floor(g/l),F=u+A*p,_=f-u-(N+1)*m,D=E.scaleToFit(p-h*2,m-h*2),R=(p-D.width)/2,B=(m-D.height)/2;y.drawImage(E,{x:F+R,y:_+B,width:D.width,height:D.height}),r&&y.drawRectangle({x:F,y:_,width:p,height:m,borderWidth:.5,borderColor:Cn(.7,.7,.7),opacity:0,borderOpacity:1}),g++}if(s){const w=t.getPages();for(let C=0;C<w.length;C++){const I=w[C],{width:T}=I.getSize();I.drawText(`${C+1} / ${w.length}`,{x:T/2-20,y:15,size:10,color:Cn(.5,.5,.5)})}}return await t.save()}async function ZW(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=s=>{const i=new Image;i.onload=()=>{const a=document.createElement("canvas");a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0),e({canvas:a,width:i.width,height:i.height,name:n.name,dataUrl:a.toDataURL("image/png")})},i.onerror=t,i.src=s.target.result},r.onerror=t,r.readAsDataURL(n)})}function uwe(n,e){const t=n.getContext("2d"),r=t.getImageData(0,0,n.width,n.height),s=r.data;for(let i=0;i<s.length;i+=4){let a=s[i],o=s[i+1],l=s[i+2];e.invert&&(a=255-a,o=255-o,l=255-l),e.greyscale&&(a=o=l=.299*a+.587*o+.114*l),e.blackAndWhite&&(a=o=l=.299*a+.587*o+.114*l>128?255:0),e.clearBackground&&(a+o+l)/3>200&&(a=o=l=255),s[i]=a,s[i+1]=o,s[i+2]=l}return t.putImageData(r,0,0),n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hwe=1e-7,dwe=1e-4;class J5{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class FR{refCount(e){return va("refCount")}incRef(e){return va("incRef")}timerAvailable(){return!0}time(e){return va("time")}read(e){return va("read")}readSync(e){return va("readSync")}readToGPU(e,t){return va("readToGPU")}numDataIds(){return va("numDataIds")}disposeData(e,t){return va("disposeData")}write(e,t,r){return va("write")}move(e,t,r,s,i){return va("move")}createTensorFromGPUData(e,t,r){return va("createTensorFromGPUData")}memory(){return va("memory")}floatPrecision(){return va("floatPrecision")}epsilon(){return this.floatPrecision()===32?hwe:dwe}dispose(){return va("dispose")}}function va(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ez(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,gh(n,e,t)}function fwe(n,e){if(n.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${n.length}Second array length was ${e.length}`);let t=n.length,r=0;for(;t>0;)r=Math.random()*t|0,t--,gh(n,t,r),gh(e,t,r)}function jf(n,e,t){return Math.max(n,Math.min(e,t))}function PR(n){return n%2===0?n:n+1}function gh(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function GQ(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function pwe(n,e){const t=Math.random();return e*t+(1-t)*n}function mwe(n,e){let t=0;for(let r=0;r<n.length;r++){const s=Number(n[r])-Number(e[r]);t+=s*s}return t}function V(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Ys(n,e,t=""){V(Qt(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function h0(n){V(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Se(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function gwe(n){return n.length===0}function HQ(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function Qt(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Lg(n){return n%1===0}function ywe(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;{const e=Math.exp(2*n);return(e-1)/(e+1)}}function NN(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function vwe(n){const e=new Uint32Array(n);for(let t=0;t<n;++t)e[t]=t;return ez(e),e}function gg(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function qM(n,e=s=>0,t,r){return new Promise((s,i)=>{let a=0;const o=()=>{if(n()){s();return}a++;const l=e(a);if(t!=null&&a>=t){i();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function tz(n,e){let t=1,r=-1;for(let i=0;i<n.length;++i)if(n[i]>=0)t*=n[i];else if(n[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(n[i]<0)throw Error(`Shapes can not be < 0. Found ${n[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const s=n.slice();return s[r]=e/t,s}function Kt(n,e){const t=e.length;return n=n==null?e.map((r,s)=>s):[].concat(n),V(n.every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),V(n.every(r=>Lg(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?t+r:r)}function Xh(n,e){const t=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:Kt(e,n).sort();let a=0;for(let o=0;o<n.length;++o){if(i!=null){if(i[a]===o&&n[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${n[o]}' is not 1`);(i[a]==null||i[a]>o)&&n[o]===1&&(t.push(n[o]),r.push(o)),i[a]<=o&&a++}n[o]!==1&&(t.push(n[o]),r.push(o))}return{newShape:t,keptDims:r}}function _s(n,e){return Tr(n,e)}function Tr(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function qQ(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function KQ(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function nz(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function LS(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function XQ(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function nu(n){return typeof n=="string"||n instanceof String}function YQ(n){return typeof n=="boolean"}function _N(n){return typeof n=="number"}function d0(n){return Array.isArray(n)?d0(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":_N(n)?"float32":nu(n)?"string":YQ(n)?"bool":"float32"}function Uf(n){return!!(n&&n.constructor&&n.call&&n.apply)}function RN(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function ht(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function ZQ(n,e,t,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let a=0;a<i;a++)s[a]=t[n+a]}else{const i=e[0],a=e.slice(1),o=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=ZQ(n+l*o,a,t,r)}return s}function So(n,e,t=!1){if(n.length===0)return e[0];const r=n.reduce((s,i)=>s*i)*(t?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return ZQ(0,n,e,t)}function QQ(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function OR(n,e){const t=Xs(n,e);for(let r=0;r<t.length;r++)t[r]=1;return t}function Xs(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function rz(n,e){const t=n.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return So(n,new Float32Array(t));if(e==="int32")return So(n,new Int32Array(t));if(e==="bool")return So(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function Wa(n){n.forEach(e=>{V(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function nc(n,e,t){if(e===0)return 0;if(e===1)return n[0];let r=n[n.length-1];for(let s=0;s<n.length-1;++s)r+=t[s]*n[s];return r}function f0(n,e,t){if(e===0)return[];if(e===1)return[n];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(n/t[s]),n-=r[s]*t[s];return r[r.length-1]=n,r}function Wf(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QW="tfjsflags";class JQ{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=xwe,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Wf(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);QW in e&&e[QW].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=wwe(s,i)})}}function xwe(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(bwe(e,r[0],r[1]),r.join("="))),e}function bwe(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function wwe(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function ye(){return sz}let sz=null;function Swe(n){sz=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let NO;function eJ(){if(NO==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");NO=n}return NO}function kwe(){const n=eJ();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function iz(n,e){const t=kwe();if(t.has(n))return t.get(n);{const r=e();return t.set(n,r),t.get(n)}}const sC="Abs",jx="Acos",Ux="Acosh",p0="Add",iC="AddN",LR="All",MR="Any",aC="ArgMax",oC="ArgMin",Wx="Asin",Gx="Asinh",Hx="Atan",qx="Atanh",Kx="Atan2",lC="AvgPool",$R="AvgPoolGrad",cC="AvgPool3D",zR="AvgPool3DGrad",uC="BatchMatMul",hC="BatchToSpaceND",BR="Bincount",dC="BitwiseAnd",tJ="BroadcastTo",VR="BroadcastArgs",Xx="Cast",Yx="Ceil",Zx="ClipByValue",jR="Complex",fC="ComplexAbs",pC="Concat",mC="Conv2D",UR="Conv2DBackpropFilter",gC="Conv2DBackpropInput",yC="Conv3D",WR="Conv3DBackpropFilterV2",GR="Conv3DBackpropInputV2",Qx="Cos",Jx="Cosh",HR="Cumprod",vC="Cumsum",qR="CropAndResize",KR="DenseBincount",XR="DepthToSpace",xC="DepthwiseConv2dNative",YR="DepthwiseConv2dNativeBackpropFilter",ZR="DepthwiseConv2dNativeBackpropInput",QR="Diag",bC="Dilation2D",DN="Dilation2DBackpropInput",FN="Dilation2DBackpropFilter",JR="Draw",eb="RealDiv",eD="Einsum",tb="Elu",tD="EluGrad",nb="Erf",wC="Equal",rb="Exp",SC="ExpandDims",sb="Expm1",nD="FFT",rD="Fill",sD="FlipLeftRight",ib="Floor",ab="FloorDiv",kC="FusedBatchNorm",CC="GatherV2",iD="GatherNd",TC="Greater",ob="GreaterEqual",lb="Identity",aD="IFFT",oD="Imag",cb="IsFinite",ub="IsInf",hb="IsNan",EC="LeakyRelu",IC="Less",AC="LessEqual",lD="LinSpace",db="Log",fb="Log1p",NC="LogicalAnd",_C="LogicalNot",RC="LogicalOr",Cwe="LogicalXor",nJ="LogSoftmax",Twe="LowerBound",DC="LRN",cD="LRNGrad",Ewe="MatrixBandPart",FC="Max",pb="Maximum",PC="MaxPool",uD="MaxPoolGrad",OC="MaxPool3D",hD="MaxPool3DGrad",dD="MaxPoolWithArgmax",LC="Mean",MC="Min",mb="Minimum",$C="MirrorPad",gb="Mod",fD="Multinomial",yb="Multiply",zC="Neg",BC="NotEqual",pD="NonMaxSuppressionV3",mD="NonMaxSuppressionV4",gD="NonMaxSuppressionV5",VC="OnesLike",jC="OneHot",UC="Pack",WC="PadV2",Iwe="Pool",vb="Pow",GC="Prelu",HC="Prod",yD="RaggedGather",vD="RaggedRange",xD="RaggedTensorToTensor",bD="Range",wD="Real",xb="Reciprocal",bb="Relu",qC="Reshape",KC="ResizeNearestNeighbor",SD="ResizeNearestNeighborGrad",XC="ResizeBilinear",kD="ResizeBilinearGrad",wb="Relu6",YC="Reverse",Sb="Round",kb="Rsqrt",CD="ScatterNd",TD="TensorScatterUpdate",ED="SearchSorted",ZC="Select",Cb="Selu",QC="Slice",Tb="Sin",Eb="Sinh",Ib="Sign",Ab="Sigmoid",Nb="Softplus",_b="Sqrt",JC="Sum",eT="SpaceToBatchND",tT="SplitV",nT="Softmax",ID="SparseFillEmptyRows",AD="SparseReshape",ND="SparseSegmentMean",_D="SparseSegmentSum",RD="SparseToDense",Rb="SquaredDifference",DD="Square",rT="StaticRegexReplace",FD="StridedSlice",PD="StringNGrams",OD="StringSplit",LD="StringToHashBucketFast",Db="Sub",Fb="Tan",Pb="Tanh",Ob="Tile",MD="TopK",$D="Transform",yg="Transpose",zD="Unique",sT="Unpack",iT="UnsortedSegmentSum",Awe="UpperBound",aT="ZerosLike",Lb="Step",PN="FromPixels",BD="RotateWithOffset",MS="_FusedMatMul",$S="FusedConv2D",zS="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ho(...n){ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn(...n)}function Nwe(...n){ye().getBool("IS_TEST")||ye().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hx=iz("kernelRegistry",()=>new Map),BS=iz("gradRegistry",()=>new Map);function VS(n,e){const t=az(n,e);return hx.get(t)}function KM(n){return BS.get(n)}function ON(n){const e=hx.entries(),t=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,a]=s,[o]=i.split("_");o===n&&t.push(a)}return t}function VD(n){const{kernelName:e,backendName:t}=n,r=az(e,t);hx.has(r)&&ho(`The kernel '${e}' for backend '${t}' is already registered`),hx.set(r,n)}function rJ(n){const{kernelName:e}=n;BS.has(e)&&ye().getBool("DEBUG")&&ho(`Overriding the gradient for '${e}'`),BS.set(e,n)}function _we(n,e){const t=az(n,e);if(!hx.has(t))throw new Error(`The kernel '${n}' for backend '${e}' is not registered`);hx.delete(t)}function Rwe(n){if(!BS.has(n))throw new Error(`The gradient '${n}' for backend is not registered`);BS.delete(n)}function Dwe(n,e){ON(n).forEach(r=>{const s=Object.assign({},r,{backendName:e});VD(s)})}function az(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJ(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var iJ=Jn,al=null;try{al=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Jn(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}Jn.prototype.__isLong__;Object.defineProperty(Jn.prototype,"__isLong__",{value:!0});function Ga(n){return(n&&n.__isLong__)===!0}Jn.isLong=Ga;var JW={},eG={};function m0(n,e){var t,r,s;return e?(n>>>=0,(s=0<=n&&n<256)&&(r=eG[n],r)?r:(t=er(n,(n|0)<0?-1:0,!0),s&&(eG[n]=t),t)):(n|=0,(s=-128<=n&&n<128)&&(r=JW[n],r)?r:(t=er(n,n<0?-1:0,!1),s&&(JW[n]=t),t))}Jn.fromInt=m0;function ol(n,e){if(isNaN(n))return e?im:ll;if(e){if(n<0)return im;if(n>=aJ)return cJ}else{if(n<=-nG)return Fa;if(n+1>=nG)return lJ}return n<0?ol(-n,e).neg():er(n%dx|0,n/dx|0,e)}Jn.fromNumber=ol;function er(n,e,t){return new Jn(n,e,t)}Jn.fromBits=er;var LN=Math.pow;function oz(n,e,t){if(n.length===0)throw Error("empty string");if(n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return ll;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return oz(n.substring(1),e,t).neg();for(var s=ol(LN(t,8)),i=ll,a=0;a<n.length;a+=8){var o=Math.min(8,n.length-a),l=parseInt(n.substring(a,a+o),t);if(o<8){var c=ol(LN(t,o));i=i.mul(c).add(ol(l))}else i=i.mul(s),i=i.add(ol(l))}return i.unsigned=e,i}Jn.fromString=oz;function mc(n,e){return typeof n=="number"?ol(n,e):typeof n=="string"?oz(n,e):er(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}Jn.fromValue=mc;var tG=65536,Fwe=1<<24,dx=tG*tG,aJ=dx*dx,nG=aJ/2,rG=m0(Fwe),ll=m0(0);Jn.ZERO=ll;var im=m0(0,!0);Jn.UZERO=im;var Sy=m0(1);Jn.ONE=Sy;var oJ=m0(1,!0);Jn.UONE=oJ;var XM=m0(-1);Jn.NEG_ONE=XM;var lJ=er(-1,2147483647,!1);Jn.MAX_VALUE=lJ;var cJ=er(-1,-1,!0);Jn.MAX_UNSIGNED_VALUE=cJ;var Fa=er(0,-2147483648,!1);Jn.MIN_VALUE=Fa;var He=Jn.prototype;He.toInt=function(){return this.unsigned?this.low>>>0:this.low};He.toNumber=function(){return this.unsigned?(this.high>>>0)*dx+(this.low>>>0):this.high*dx+(this.low>>>0)};He.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Fa)){var t=ol(e),r=this.div(t),s=r.mul(t).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=ol(LN(e,6),this.unsigned),a=this,o="";;){var l=a.div(i),c=a.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(a=l,a.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}};He.getHighBits=function(){return this.high};He.getHighBitsUnsigned=function(){return this.high>>>0};He.getLowBits=function(){return this.low};He.getLowBitsUnsigned=function(){return this.low>>>0};He.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Fa)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};He.isZero=function(){return this.high===0&&this.low===0};He.eqz=He.isZero;He.isNegative=function(){return!this.unsigned&&this.high<0};He.isPositive=function(){return this.unsigned||this.high>=0};He.isOdd=function(){return(this.low&1)===1};He.isEven=function(){return(this.low&1)===0};He.equals=function(e){return Ga(e)||(e=mc(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};He.eq=He.equals;He.notEquals=function(e){return!this.eq(e)};He.neq=He.notEquals;He.ne=He.notEquals;He.lessThan=function(e){return this.comp(e)<0};He.lt=He.lessThan;He.lessThanOrEqual=function(e){return this.comp(e)<=0};He.lte=He.lessThanOrEqual;He.le=He.lessThanOrEqual;He.greaterThan=function(e){return this.comp(e)>0};He.gt=He.greaterThan;He.greaterThanOrEqual=function(e){return this.comp(e)>=0};He.gte=He.greaterThanOrEqual;He.ge=He.greaterThanOrEqual;He.compare=function(e){if(Ga(e)||(e=mc(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};He.comp=He.compare;He.negate=function(){return!this.unsigned&&this.eq(Fa)?Fa:this.not().add(Sy)};He.neg=He.negate;He.add=function(e){Ga(e)||(e=mc(e));var t=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,o=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,h=0,d=0,f=0;return f+=i+c,d+=f>>>16,f&=65535,d+=s+l,h+=d>>>16,d&=65535,h+=r+o,u+=h>>>16,h&=65535,u+=t+a,u&=65535,er(d<<16|f,u<<16|h,this.unsigned)};He.subtract=function(e){return Ga(e)||(e=mc(e)),this.add(e.neg())};He.sub=He.subtract;He.multiply=function(e){if(this.isZero())return ll;if(Ga(e)||(e=mc(e)),al){var t=al.mul(this.low,this.high,e.low,e.high);return er(t,al.get_high(),this.unsigned)}if(e.isZero())return ll;if(this.eq(Fa))return e.isOdd()?Fa:ll;if(e.eq(Fa))return this.isOdd()?Fa:ll;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(rG)&&e.lt(rG))return ol(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,h=0,d=0,f=0,p=0;return p+=a*u,f+=p>>>16,p&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=a*c,d+=f>>>16,f&=65535,d+=s*u,h+=d>>>16,d&=65535,d+=i*c,h+=d>>>16,d&=65535,d+=a*l,h+=d>>>16,d&=65535,h+=r*u+s*c+i*l+a*o,h&=65535,er(f<<16|p,h<<16|d,this.unsigned)};He.mul=He.multiply;He.divide=function(e){if(Ga(e)||(e=mc(e)),e.isZero())throw Error("division by zero");if(al){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?al.div_u:al.div_s)(this.low,this.high,e.low,e.high);return er(t,al.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?im:ll;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return im;if(e.gt(this.shru(1)))return oJ;i=im}else{if(this.eq(Fa)){if(e.eq(Sy)||e.eq(XM))return Fa;if(e.eq(Fa))return Sy;var a=this.shr(1);return r=a.div(e).shl(1),r.eq(ll)?e.isNegative()?Sy:XM:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Fa))return this.unsigned?im:ll;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=ll}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),l=o<=48?1:LN(2,o-48),c=ol(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=ol(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Sy),i=i.add(c),s=s.sub(u)}return i};He.div=He.divide;He.modulo=function(e){if(Ga(e)||(e=mc(e)),al){var t=(this.unsigned?al.rem_u:al.rem_s)(this.low,this.high,e.low,e.high);return er(t,al.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};He.mod=He.modulo;He.rem=He.modulo;He.not=function(){return er(~this.low,~this.high,this.unsigned)};He.and=function(e){return Ga(e)||(e=mc(e)),er(this.low&e.low,this.high&e.high,this.unsigned)};He.or=function(e){return Ga(e)||(e=mc(e)),er(this.low|e.low,this.high|e.high,this.unsigned)};He.xor=function(e){return Ga(e)||(e=mc(e)),er(this.low^e.low,this.high^e.high,this.unsigned)};He.shiftLeft=function(e){return Ga(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?er(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):er(0,this.low<<e-32,this.unsigned)};He.shl=He.shiftLeft;He.shiftRight=function(e){return Ga(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?er(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):er(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};He.shr=He.shiftRight;He.shiftRightUnsigned=function(e){if(Ga(e)&&(e=e.toInt()),e&=63,e===0)return this;var t=this.high;if(e<32){var r=this.low;return er(r>>>e|t<<32-e,t>>>e,this.unsigned)}else return e===32?er(t,0,this.unsigned):er(t>>>e-32,0,this.unsigned)};He.shru=He.shiftRightUnsigned;He.shr_u=He.shiftRightUnsigned;He.toSigned=function(){return this.unsigned?er(this.low,this.high,!1):this};He.toUnsigned=function(){return this.unsigned?this:er(this.low,this.high,!0)};He.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};He.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};He.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Jn.fromBytes=function(e,t,r){return r?Jn.fromBytesLE(e,t):Jn.fromBytesBE(e,t)};Jn.fromBytesLE=function(e,t){return new Jn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Jn.fromBytesBE=function(e,t){return new Jn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const uJ=$k(iJ),Pwe=qle({__proto__:null,default:uJ},[iJ]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qp=uJ||Pwe;function oT(n){return qp.fromString(n,!0,16)}const hJ=oT("c3a5c85c97cb3127"),jp=oT("b492b66fbe98f273"),Pi=oT("9ae16a3b2f90404f");function YM(n){return n.xor(n.shru(47))}function dJ(n,e,t){const r=n.slice(e,e+t);return qp.fromBytes(Array.from(r),!0,!0)}function Hn(n,e){return dJ(n,e,8)}function sG(n,e){return dJ(n,e,4)}function bs(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function Tf(n,e,t=oT("9ddfea08eb382d69")){let r=n.xor(e).mul(t);r=r.xor(r.shru(47));let s=e.xor(r).mul(t);return s=s.xor(s.shru(47)),s=s.mul(t),s}function Owe(n,e,t,r,s,i){s=s.add(n),i=bs(i.add(s).add(r),21);const a=s;return s=s.add(e),s=s.add(t),i=i.add(bs(s,44)),[s.add(r),i.add(a)]}function WE(n,e,t,r){return Owe(Hn(n,e),Hn(n,e+8),Hn(n,e+16),Hn(n,e+24),t,r)}function Lwe(n,e=n.length){if(e>=8){const t=Pi.add(e*2),r=Hn(n,0).add(Pi),s=Hn(n,e-8),i=bs(s,37).mul(t).add(r),a=bs(r,25).add(s).mul(t);return Tf(i,a,t)}if(e>=4){const t=Pi.add(e*2),r=sG(n,0);return Tf(r.shl(3).add(e),sG(n,e-4),t)}if(e>0){const t=n[0],r=n[e>>1],s=n[e-1],i=t+(r<<8),a=e+(s<<2);return YM(Pi.mul(i).xor(hJ.mul(a))).mul(Pi)}return Pi}function Mwe(n,e=n.length){const t=Pi.add(e*2),r=Hn(n,0).mul(jp),s=Hn(n,8),i=Hn(n,e-8).mul(t),a=Hn(n,e-16).mul(Pi);return Tf(bs(r.add(s),43).add(bs(i,30)).add(a),r.add(bs(s.add(Pi),18)).add(i),t)}function $we(n,e=n.length){const t=Pi.add(e*2),r=Hn(n,0).mul(Pi),s=Hn(n,8),i=Hn(n,e-8).mul(t),a=Hn(n,e-16).mul(Pi),o=bs(r.add(s),43).add(bs(i,30)).add(a),l=Tf(o,r.add(bs(s.add(Pi),18)).add(i),t),c=Hn(n,16).mul(t),u=Hn(n,24),h=o.add(Hn(n,e-32)).mul(t),d=l.add(Hn(n,e-24)).mul(t);return Tf(bs(c.add(u),43).add(bs(h,30)).add(d),c.add(bs(u.add(r),18)).add(h),t)}function fJ(n,e=n.length){const t=qp.fromNumber(81,!0);if(e<=32)return e<=16?Lwe(n,e):Mwe(n,e);if(e<=64)return $we(n,e);let r=t,s=t.mul(jp).add(113),i=YM(s.mul(Pi).add(113)).mul(Pi),a=[qp.UZERO,qp.UZERO],o=[qp.UZERO,qp.UZERO];r=r.mul(Pi).add(Hn(n,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=bs(r.add(s).add(a[0]).add(Hn(n,l+8)),37).mul(jp),s=bs(s.add(a[1]).add(Hn(n,l+48)),42).mul(jp),r=r.xor(o[1]),s=s.add(a[0]).add(Hn(n,l+40)),i=bs(i.add(o[0]),33).mul(jp),a=WE(n,l,a[1].mul(jp),r.add(o[0])),o=WE(n,l+32,i.add(o[1]),s.add(Hn(n,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const h=jp.add(i.and(255).shl(1));return l=u,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=bs(r.add(s).add(a[0]).add(Hn(n,l+8)),37).mul(h),s=bs(s.add(a[1]).add(Hn(n,l+48)),42).mul(h),r=r.xor(o[1].mul(9)),s=s.add(a[0].mul(9).add(Hn(n,l+40))),i=bs(i.add(o[0]),33).mul(h),a=WE(n,l,a[1].mul(h),r.add(o[0])),o=WE(n,l+32,i.add(o[1]),s.add(Hn(n,l+16))),[i,r]=[r,i],Tf(Tf(a[0],o[0],h).add(YM(s).mul(hJ)).add(i),Tf(a[1],o[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yh(n,e){return e==="string"?lu(n):mp([n],e)}function zwe(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function mp(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=vu(n)),ye().getBool("DEBUG")&&qQ(n,e),zwe(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let r=0;r<t.length;++r)Math.round(n[r])!==0&&(t[r]=1);return t}else throw new Error(`Unknown data type ${e}`)}function Ri(){return ye().platform.now()}function Bwe(n,e){return ye().platform.fetch(n,e)}function lu(n,e="utf-8"){return e=e||"utf-8",ye().platform.encode(n,e)}function Dh(n,e="utf-8"){return e=e||"utf-8",ye().platform.decode(n,e)}function ws(n){return ye().platform.isTypedArray!=null?ye().platform.isTypedArray(n):sJ(n)}function vu(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||Wf(n)||n==null||ws(n)&&t)e.push(n);else if(Array.isArray(n)||ws(n))for(let r=0;r<n.length;++r)vu(n[r],e,t);else{let r=-1;for(const s of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)vu(n[s],e,t)}return e}const Vwe=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Qt,arraysEqualWithNull:HQ,assert:V,assertNonNegativeIntegerDimensions:Wa,assertNonNull:h0,assertShapesMatch:Ys,bytesFromStringArray:XQ,bytesPerElement:LS,checkConversionForErrors:qQ,clamp:jf,computeStrides:ht,convertBackendValuesAndArrayBuffer:QQ,createScalarValue:Yh,createShuffledIndices:vwe,decodeString:Dh,distSquared:mwe,encodeString:lu,fetch:Bwe,fingerPrint64:fJ,flatten:vu,getArrayFromDType:Tr,getTypedArrayFromDType:_s,hasEncodingLoss:nz,hexToLong:oT,indexToLoc:f0,inferDtype:d0,inferFromImplicitShape:tz,isBoolean:YQ,isFunction:Uf,isInt:Lg,isNumber:_N,isPromise:Wf,isScalarShape:gwe,isString:nu,isTypedArray:ws,isValidDtype:KQ,locToIndex:nc,makeOnesTypedArray:OR,makeZerosNestedTypedArray:rz,makeZerosTypedArray:Xs,nearestDivisor:RN,nearestLargerEven:PR,now:Ri,parseAxisParam:Kt,randUniform:pwe,repeatedTry:qM,rightPad:gg,shuffle:ez,shuffleCombo:fwe,sizeFromShape:Se,sizeToSquarishShape:NN,squeezeShape:Xh,sum:GQ,swap:gh,tanh:ywe,toNestedArray:So,toTypedArray:mp},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jwe{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new Wwe)}profileKernel(e,t,r){let s;const i=()=>{s=r()};let a;const o=Ri();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();a=Promise.resolve({kernelMs:Ri()-o})}if(ye().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(h=>{Uwe(h,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:t,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:s,inputs:i,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),s,a]).then(l=>{this.logger.logKernelProfile(t,o,l[0],l[1],i,l[2])})})}}function Uwe(n,e,t){if(e!=="float32")return!1;for(let r=0;r<n.length;r++){const s=n[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${t}'`),!0}return!1}let Wwe=class{logKernelProfile(e,t,r,s,i,a){const o=typeof s=="number"?gg(`${s}ms`,9):s.error,l=gg(e,25),c=t.rank,u=t.size,h=gg(t.shape.toString(),14);let d="";for(const f in i){const p=i[f];if(p!=null){const m=p.shape||t.shape,y=m.length;d+=`${f}: ${y}D ${y>0?m:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${h}	%c${u}	%c${d}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(n,e,t){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<n.length;l++){const c=n[l],u=c.inputs;for(const h in u){const d=u[h];let f=!1;for(let p=0;p<e.length;p++)if(r[d.id]){c.outputs.forEach(m=>r[m.id]=!0),f=!0,s[c.id]=!0;break}if(f)break}}const i={};i[t.id]=!0;const a={};for(let l=n.length-1;l>=0;l--){const c=n[l],u=c.inputs;for(let h=0;h<c.outputs.length;h++)if(i[c.outputs[h].id]){for(const d in u)i[u[d].id]=!0,a[c.id]=!0;break}}const o=[];for(let l=0;l<n.length;l++){const c=n[l];if(s[c.id]&&a[c.id]){const u={};for(const d in c.inputs){const f=c.inputs[d];r[f.id]&&(u[d]=f)}const h=Object.assign({},c);h.inputs=u,h.outputs=c.outputs,o.push(h)}}return o}function Hwe(n,e,t,r){for(let s=e.length-1;s>=0;s--){const i=e[s],a=[];if(i.outputs.forEach(l=>{const c=n[l.id];c!=null?a.push(c):a.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(a);for(const l in i.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=t(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!Qt(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(n[u.id]==null)n[u.id]=c;else{const h=n[u.id];n[u.id]=r(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iG=20,Bw=3,_O=7;function qwe(n,e,t,r){const s=ht(e),i=Kwe(n,e,t,s),a=e.length,o=wA(n,e,t,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${t}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Kwe(n,e,t,r){const s=Se(e),i=r[r.length-1],a=new Array(i).fill(0),o=e.length,l=t==="complex64"?b1(n):n;if(o>1)for(let c=0;c<s/i;c++){const u=c*i;for(let h=0;h<i;h++)a[h]=Math.max(a[h],x1(l[u+h],0,t).length)}return a}function x1(n,e,t){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(_O))} + ${parseFloat(n[1].toFixed(_O))}j`:nu(n)?r=`'${n}'`:t==="bool"?r=pJ(n):r=parseFloat(n.toFixed(_O)).toString(),gg(r,e)}function pJ(n){return n===0?"false":"true"}function wA(n,e,t,r,s,i=!0){const a=t==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(t==="complex64"){const m=b1(n);return[x1(m[0],0,t)]}return t==="bool"?[pJ(n[0])]:[n[0].toString()]}if(l===1){if(o>iG){const y=Bw*a;let g=Array.from(n.slice(0,y)),v=Array.from(n.slice((o-Bw)*a,o*a));return t==="complex64"&&(g=b1(g),v=b1(v)),["["+g.map((b,w)=>x1(b,s[w],t)).join(", ")+", ..., "+v.map((b,w)=>x1(b,s[o-Bw+w],t)).join(", ")+"]"]}return["["+(t==="complex64"?b1(n):Array.from(n)).map((y,g)=>x1(y,s[g],t)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),h=r[0]*a,d=[];if(o>iG){for(let m=0;m<Bw;m++){const y=m*h,g=y+h;d.push(...wA(n.slice(y,g),c,t,u,s,!1))}d.push("...");for(let m=o-Bw;m<o;m++){const y=m*h,g=y+h;d.push(...wA(n.slice(y,g),c,t,u,s,m===o-1))}}else for(let m=0;m<o;m++){const y=m*h,g=y+h;d.push(...wA(n.slice(y,g),c,t,u,s,m===o-1))}const f=l===2?",":"";d[0]="["+(o>0?d[0]+f:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+f;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":p),d}function b1(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kr{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=Se(e),r!=null){const s=r.length;V(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Tr(t,this.size),this.strides=ht(e)}set(e,...t){t.length===0&&(t=[0]),V(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const s of e){if(s<0||s>=this.shape[t]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}t++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return ql().makeTensor(this.values,this.shape,this.dtype)}}let ql=null,ty=null;function Xwe(n){ql=n}function Ywe(n){ty=n}class Sn{constructor(e,t,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Se(e),this.strides=ht(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return ty.buffer(this.shape,this.dtype,e)}bufferSync(){return ty.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return So(this.shape,e,this.dtype==="complex64")}arraySync(){return So(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ql().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(r=>Dh(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ql().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ql().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>Dh(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ql().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ql().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return ty.print(this,e)}clone(){return this.throwIfDisposed(),ty.clone(this)}toString(e=!1){const t=this.dataSync();return qwe(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),ty.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),ql().makeVariable(this,e,t,r)}}Object.defineProperty(Sn,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function Te(){return iz("Tensor",()=>Sn)}Te();class jS extends Sn{constructor(e,t,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Qt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ql().disposeTensor(this),this.dataId=e.dataId,ql().incRef(this,null)}dispose(){ql().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(jS,Symbol.hasInstance,{value:n=>n instanceof Sn&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ZM;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(ZM||(ZM={}));var QM;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(QM||(QM={}));var JM;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(JM||(JM={}));var e4;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(e4||(e4={}));var t4;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(t4||(t4={}));const Zwe={float32:e4,int32:QM,bool:JM,complex64:t4};function ca(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return Zwe[n][e]}function jD(n){return ca(n,"int32")}function mJ(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function gJ(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yr(n,e){if(n.dtype===e.dtype)return[n,e];const t=ca(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function yJ(n,e){V(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function Qwe(n,e){return e.some(t=>t.id===n.id)}function lz(n){const e=[];return vJ(n,e,new Set),e}function vJ(n,e,t){if(n==null)return;if(n instanceof Sn){e.push(n);return}if(!Jwe(n))return;const r=n;for(const s in r){const i=r[s];t.has(i)||(t.add(i),vJ(i,e,t))}}function Jwe(n){return Array.isArray(n)||typeof n=="object"}const e1e=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:yJ,getTensorsInContainer:lz,isTensorInList:Qwe,makeTypesMatch:yr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RO(n){return n.kernelName!=null}class aG{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class fx{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new aG}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(ho(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new jwe(this.backendInstance),!0}setupRegisteredKernels(){ON(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){ON(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(r&&!(r instanceof FR)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(a=>s<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ho(`Initialization of backend ${e} failed`),ho(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ho(`Initialization of backend ${e} failed`),ho(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),s=r.backend,i=this.readSync(t),a=s.refCount(t);s.disposeData(t,!0),r.backend=e,e.move(t,i,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=t(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,r){e();try{const s=r();return t(),s}catch(s){throw t(),s}}nextTensorId(){return fx.nextTensorId++}nextVariableId(){return fx.nextVariableId++}clone(e){const t=ne.runKernel(lb,{x:e}),r={x:e},s=a=>({x:()=>{const o="float32",l={x:a},c={dtype:o};return ne.runKernel(Xx,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[t],s,i,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,!(VS(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=s-t-i-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const s=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=RO(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(RO(e)){const{kernelName:p,inputs:m,attrs:y}=e;this.backendName==null&&this.backend;const g=VS(p,this.backendName);V(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),o=()=>{const v=this.backend.numDataIds();l=g.kernelFunc({inputs:m,attrs:y,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,b);const w=b.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(s){const C=this.getTensorsForGradient(p,m,w);r=this.saveTensorsForBackwardMode(C)}return w}}else{const{forwardFunc:p}=e,m=y=>{s&&(r=y.map(g=>this.keep(this.clone(g))))};o=()=>{const y=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,y,g),g}}const{inputs:u,attrs:h}=e,d=RO(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=o():(f=this.profiler.profileKernel(c,u,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),t=f.outputs)}),s&&this.addTapeNode(c,u,t,d,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:t.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,t,r){const s=KM(e);if(s!=null){const i=s.inputsToSave||[],a=s.outputsToSave||[];let o;s.saveAllInputs?(V(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(c=>t[c])):o=i.map(c=>t[c]);const l=r.filter((c,u)=>a[u]);return o.concat(l)}return[]}makeTensor(e,t,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&nu(e[0])&&(i=e.map(l=>lu(l)));const a=s.write(i,t,r),o=new Sn(t,r,a,this.nextTensorId());if(this.trackTensor(o,s),r==="string"){const l=this.state.tensorInfo.get(a),c=XQ(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,t,r,s){r=r||"float32";const i={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:s,dtype:i}=e,a=new Sn(s,i,r,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e,t=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new jS(e,t,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*LS(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof jS||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*LS(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,s,i,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:i},l=KM(e);l!=null&&(s=l.gradFunc),s!=null&&(o.gradient=c=>(c=c.map((u,h)=>{if(u==null){const d=r[h],f=Xs(d.size,d.dtype);return this.makeTensor(f,d.shape,d.dtype)}return u}),s(c.length>1?c:c[0],i,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=lz(e),r=new Set(t.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const a=this.state.activeScope.track[i];!a.kept&&!r.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,t,r,s=!1){if(V(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));V(i instanceof Sn,()=>"The result y returned by f() must be a tensor.");const a=Gwe(this.state.activeTape,t,i);if(!s&&a.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[i.id]=r??t1e(i.shape),Hwe(o,a,c=>this.tidy(c),n1e);const l=t.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return V(Uf(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{V(t.every(o=>o instanceof Sn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};t.forEach((o,l)=>{s[l]=o});const i=(o,l)=>(r=e(...t,l),V(r.value instanceof Sn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(Uf(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const c=r.gradFunc(o,l),u=Array.isArray(c)?c:[c];V(u.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(u.every(d=>d instanceof Sn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return u.forEach((d,f)=>{h[f]=()=>d}),h};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Ri(),r=await this.backend.time(e);return r.wallMs=Ri()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new aG;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}fx.nextTensorId=0;fx.nextVariableId=0;function t1e(n){const e=OR(Se(n),"float32");return ne.makeTensor(e,n,"float32")}function xJ(){const n=eJ();if(n._tfengine==null){const e=new JQ(n);n._tfengine=new fx(e)}return Swe(n._tfengine.ENV),Xwe(()=>n._tfengine),n._tfengine}const ne=xJ();function n1e(n,e){const t={a:n,b:e};return ne.runKernel(p0,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1e(){return typeof navigator<"u"&&navigator!=null}let n4;function s1e(n){n4=n}function cz(n){if(n4!==void 0)return n4;if(n||r1e()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function uz(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const i1e=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:uz,isMobile:cz,mockIsMobile:s1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ua=ye();ua.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ua.registerFlag("IS_BROWSER",()=>uz());ua.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ua.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ua.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ua.registerFlag("PROD",()=>!1);ua.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ua.getBool("DEBUG"));ua.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ua.registerFlag("IS_TEST",()=>!1);ua.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ua.getBool("DEBUG"));ua.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ua.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ua.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xu(n,e){let t=n;if(ws(n))return e==="string"?[]:[n.length];if(mJ(n)){const s=n.channels||"RGBA";return[n.height,n.width*s.length]}else if(gJ(n))return[n.buffer.size/(e==null?4:LS(e))];if(!Array.isArray(n))return[];const r=[];for(;Array.isArray(t)||ws(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&ye().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&bJ(n,r,[]),r}function bJ(n,e,t){if(t=t||[],!Array.isArray(n)&&!ws(n)){V(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}V(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),V(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let s=0;s<n.length;++s)bJ(n[s],r,t.concat(s))}function oG(n,e,t,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${r}' must be ${n} tensor, but got ${e} tensor`)}}function G(n,e,t,r="numeric"){if(n instanceof Te())return oG(r,n.dtype,e,t),n;let s=d0(n);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),oG(r,s,e,t),n==null||!ws(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const l=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${l}'`)}const i=xu(n,s);!ws(n)&&!Array.isArray(n)&&(n=[n]);const o=s!=="string"?mp(n,s):vu(n,[],!0);return ne.makeTensor(o,i,s)}function US(n,e,t,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((i,a)=>G(i,`${e}[${a}]`,t,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hz="__op";function re(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+hz;const s=(...i)=>{ne.startScope(t);try{const a=r(...i);return Wf(a)&&console.error("Cannot return a Promise inside of tidy."),ne.endScope(a),a}catch(a){throw ne.endScope(null),a}};return Object.defineProperty(s,"name",{value:t,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(n,e){const t=G(n,"real","complex"),r=G(e,"imag","complex");Ys(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:t,imag:r};return ne.runKernel(jR,s)}const Fh=re({complex_:a1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gp(n,e,t,r){if(r==null)r=d0(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(gJ(n)||mJ(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ne.backend.createTensorFromGPUData(n,e||t,r)}if(!ws(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Wa(e);const s=Se(e),i=Se(t);V(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let a=0;a<t.length;++a){const o=t[a],l=a===t.length-1?o!==Se(e.slice(a)):!0;V(t[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!ws(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=r!=="string"?mp(n,r):vu(n,[],!0),ne.makeTensor(n,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ko(n,e,t){const r=xu(n,t);return gp(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mg={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class gc{static join(e){return new gc(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>ws(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=t+s.byteLength;this.shards.push({buffer:s,start:t,end:i}),t=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=t-e,i=new ArrayBuffer(s),a=new Uint8Array(i);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],h=e+o-c.start,d=o,p=Math.min(t,c.end)-c.start,m=new Uint8Array(c.buffer,h,p-h);if(a.set(m,d),o+=m.length,t<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(s){return e<s.start?-1:e>=s.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=o1e(this.shards,t);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function o1e(n,e){let t=0,r=n.length;for(;t<=r;){const s=Math.floor((r-t)/2)+t,i=e(n[s]);if(i===0)return s;i<0?r=s:t=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(){ye().set("PROD",!0)}function c1e(){ye().set("DEBUG",!0)}function u1e(){ye().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function h1e(n){ye().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function d1e(){ne.disposeVariables()}function lo(){return ne}function r4(){return ne.memory()}function f1e(n){return ne.profile(n)}function he(n,e){return ne.tidy(n,e)}function qt(n){lz(n).forEach(t=>t.dispose())}function ss(n){return ne.keep(n)}function p1e(n){return ne.time(n)}function m1e(n){return ne.setBackend(n)}function g1e(){return ne.ready()}function dz(){return ne.backendName}function y1e(n){ne.removeBackend(n)}function v1e(n){return ne.findBackend(n)}function x1e(n){return ne.findBackendFactory(n)}function fz(n,e,t=1){return ne.registerBackend(n,e,t)}function UD(){return ne.backend}function b1e(n,e){ye().setPlatform(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gf=4;async function s4(n,e){const t=[],r=[],s=Array.isArray(n)?n.map(a=>a.name):Object.keys(n);for(let a=0;a<s.length;++a){const o=s[a],l=Array.isArray(n)?n[a].tensor:n[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async h=>{const d=await l.bytes(),f=d.reduce((y,g)=>y+g.length,0)+Gf*d.length,p=new Uint8Array(f);let m=0;for(let y=0;y<d.length;y++){const g=d[y],v=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(v,m),m+=Gf,p.set(g,m),m+=g.length}h(p)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),t.push(c)}const i=await Promise.all(r);return{data:k1e(i),specs:t}}function wJ(n,e){const t=new gc(n),r={};let s=0;for(const i of e){const a=w1e(i,(o,l)=>t.slice(s+o,s+l));r[i.name]=SJ(i,t.slice(s,s+a)),s+=a}return r}function w1e(n,e){const t=Se(n.shape);let r;if("quantization"in n){const s=n.quantization;r=Mg[s.dtype]}else if(n.dtype==="string"){let s=0;for(let i=0;i<t;i++)s+=Gf+new Uint32Array(e(s,s+Gf))[0];return s}else r=Mg[n.dtype];return t*r}async function S1e(n,e){const t=Se(n.shape);let r;if("quantization"in n){const s=n.quantization;r=Mg[s.dtype]}else if(n.dtype==="string"){let s=0;for(let i=0;i<t;i++)s+=Gf+new Uint32Array(await e(s,s+Gf))[0];return s}else r=Mg[n.dtype];return t*r}function SJ(n,e){const t=n.name,r=n.dtype,s=n.shape,i=Se(s);let a,o=0;if("quantization"in n){const l=n.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${n.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${n.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=Mg[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){a=new Float32Array(u.length);for(let h=0;h<u.length;h++){const d=u[h];a[h]=d*l.scale+l.min}}else if(l.dtype==="float16")a=N1e()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);a=new Int32Array(u.length);for(let h=0;h<u.length;h++){const d=u[h];a[h]=Math.round(d*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);o+=i*c}else if(r==="string"){const l=Se(n.shape);a=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(o,o+Gf))[0];o+=Gf;const h=new Uint8Array(e.slice(o,o+u));a.push(h),o+=u}}else{const l=Mg[r];if(r==="float32")a=new Float32Array(e);else if(r==="int32")a=new Int32Array(e);else if(r==="bool")a=new Uint8Array(e);else if(r==="complex64"){a=new Float32Array(e);const c=new Float32Array(a.length/2),u=new Float32Array(a.length/2);for(let p=0;p<c.length;p++)c[p]=a[p*2],u[p]=a[p*2+1];const h=ko(c,s,"float32"),d=ko(u,s,"float32"),f=Fh(h,d);return h.dispose(),d.dispose(),f}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);o+=i*l}return ko(a,s,r)}async function lG(n,e,t){let r=new Uint8Array(e);for(;r.byteLength<t;){const{done:s,value:i}=await n.read();if(s&&i==null){const o=t-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const a=new Uint8Array(r.length+i.byteLength);a.set(r,0),a.set(new Uint8Array(i),r.length),r=a}return r.buffer}async function kJ(n,e){const t={},r=n.getReader();let s=new ArrayBuffer(0);for(const i of e){const a=await S1e(i,async(c,u)=>(s=await lG(r,s,u),s.slice(c,u)));s=await lG(r,s,a);const o=s.slice(0,a);s=s.slice(a);const l=SJ(i,o);if(t[i.name]=l,dz()==="webgpu"){const c=UD();"uploadToGPU"in c&&Se(l.shape)>=ye().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return t}function k1e(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(i=>{if(e+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return t.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const pz=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function cG(n){return pz?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function C1e(n){if(pz)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function T1e(n){if(pz){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t.set([e.charCodeAt(r)],r);return t.buffer}function CJ(n){return gc.join(n)}function uG(n){const e="/";for(n=n.trim();n.endsWith(e);)n=n.slice(0,n.length-1);const t=n.split(e);return t[t.length-1]}function TJ(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function EJ(n,e,t){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=t}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function mz(n,e){let t,r;return n.weightsManifest!=null&&([t,r]=await e(n.weightsManifest)),EJ(n,t,r)}function lT(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:cG(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:cG(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new gc(n.weightData).byteLength}}function i4(n){const e=[];for(const t of n)e.push(...t.weights);return e}function E1e(){const n=t=>{let r=t<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function I1e(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function A1e(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function N1e(){const n=E1e(),e=I1e(),t=A1e();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let a=0;a<r.length;a++){const o=r[a],l=n[t[o>>10]+(o&1023)]+e[o>>10];i[a]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return dr.instance==null&&(dr.instance=new dr),dr.instance}static registerSaveRouter(e){dr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){dr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return dr.getHandlers(e,"save")}static getLoadHandlers(e,t){return dr.getHandlers(e,"load",t)}static getHandlers(e,t,r){const s=[];return(t==="load"?dr.getInstance().loadRouters:dr.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&s.push(o)}),s}}const _1e=n=>dr.registerSaveRouter(n),R1e=n=>dr.registerLoadRouter(n),IJ=n=>dr.getSaveHandlers(n),D1e=(n,e)=>dr.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4="tensorflowjs",o4=1,am="models_store",lf="model_info_store";function AJ(){if(!ye().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function l4(n){const e=n.result;e.createObjectStore(am,{keyPath:"modelPath"}),e.createObjectStore(lf,{keyPath:"modelPath"})}class $g{constructor(e){if(this.indexedDB=AJ(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,s)=>{const i=this.indexedDB.open(a4,o4);i.onupgradeneeded=()=>l4(i),i.onsuccess=()=>{const a=i.result;if(t==null){const o=a.transaction(am,"readonly"),c=o.objectStore(am).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(a.close(),s(c.error)),o.oncomplete=()=>a.close()}else{t.weightData=gc.join(t.weightData);const o=lT(t),l=a.transaction(lf,"readwrite");let c=l.objectStore(lf),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(d){return s(d)}let h;u.onsuccess=()=>{h=a.transaction(am,"readwrite");const d=h.objectStore(am);let f;try{f=d.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:o})}catch(p){return s(p)}f.onsuccess=()=>r({modelArtifactsInfo:o}),f.onerror=p=>{c=l.objectStore(lf);const m=c.delete(this.modelPath);m.onsuccess=()=>(a.close(),s(f.error)),m.onerror=y=>(a.close(),s(f.error))}},u.onerror=d=>(a.close(),s(u.error)),l.oncomplete=()=>{h==null?a.close():h.oncomplete=()=>a.close()}}},i.onerror=a=>s(i.error)})}}$g.URL_SCHEME="indexeddb://";const NJ=n=>ye().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith($g.URL_SCHEME)?F1e(n.slice($g.URL_SCHEME.length)):null;dr.registerSaveRouter(NJ);dr.registerLoadRouter(NJ);function F1e(n){return new $g(n)}function P1e(n){return n.startsWith($g.URL_SCHEME)?n.slice($g.URL_SCHEME.length):n}class O1e{constructor(){this.indexedDB=AJ()}async listModels(){return new Promise((e,t)=>{const r=this.indexedDB.open(a4,o4);r.onupgradeneeded=()=>l4(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(lf,"readonly"),o=i.objectStore(lf).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(s.close(),t(o.error)),i.oncomplete=()=>s.close()},r.onerror=s=>t(r.error)})}async removeModel(e){return e=P1e(e),new Promise((t,r)=>{const s=this.indexedDB.open(a4,o4);s.onupgradeneeded=()=>l4(s),s.onsuccess=()=>{const i=s.result,a=i.transaction(lf,"readwrite"),o=a.objectStore(lf),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=o.delete(e),h=()=>{c=i.transaction(am,"readwrite");const f=c.objectStore(am).delete(e);f.onsuccess=()=>t(l.result.modelArtifactsInfo),f.onerror=p=>r(l.error)};u.onsuccess=h,u.onerror=d=>(h(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),a.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yh="/",ny="tensorflowjs_models",_J="info",L1e="model_topology",M1e="weight_specs",$1e="weight_data",z1e="model_metadata";function RJ(n){return{info:[ny,n,_J].join(yh),topology:[ny,n,L1e].join(yh),weightSpecs:[ny,n,M1e].join(yh),weightData:[ny,n,$1e].join(yh),modelMetadata:[ny,n,z1e].join(yh)}}function DJ(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function B1e(n){const e=n.split(yh);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(yh)}function V1e(n){return n.startsWith(zg.URL_SCHEME)?n.slice(zg.URL_SCHEME.length):n}class zg{constructor(e){if(!ye().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=RJ(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=lT(e),i=gc.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,C1e(i));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw DJ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const o=JSON.parse(i);t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,o.signature!=null&&(t.signature=o.signature),o.userDefinedMetadata!=null&&(t.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(t.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(t.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(t.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=T1e(a),t}}zg.URL_SCHEME="localstorage://";const FJ=n=>ye().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(zg.URL_SCHEME)?j1e(n.slice(zg.URL_SCHEME.length)):null;dr.registerSaveRouter(FJ);dr.registerLoadRouter(FJ);function j1e(n){return new zg(n)}class U1e{constructor(){V(ye().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=ny+yh,r=yh+_J;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(t)&&i.endsWith(r)){const a=B1e(i);e[a]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=V1e(e);const t=RJ(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(t.info));return DJ(t),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zy="://";class Di{constructor(){this.managers={}}static getInstance(){return Di.instance==null&&(Di.instance=new Di),Di.instance}static registerManager(e,t){V(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(zy)&&(e=e.slice(0,e.indexOf(zy))),V(e.length>0,()=>"scheme must not be an empty string.");const r=Di.getInstance();V(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){const t=Di.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Di.getInstance().managers)}}function SA(n){if(n.indexOf(zy)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Di.getSchemes().join(",")}`);return{scheme:n.split(zy)[0],path:n.split(zy)[1]}}async function PJ(n,e,t=!1){V(n!==e,()=>`Old path and new path are the same: '${n}'`);const r=dr.getLoadHandlers(n);V(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),V(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const s=r[0],i=dr.getSaveHandlers(e);V(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),V(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=i[0],o=SA(n).scheme,l=SA(n).path,c=o===SA(n).scheme,u=await s.load();t&&c&&await Di.getManager(o).removeModel(l);const h=await a.save(u);return t&&!c&&await Di.getManager(o).removeModel(l),h.modelArtifactsInfo}async function W1e(){const n=Di.getSchemes(),e={};for(const t of n){const r=await Di.getManager(t).listModels();for(const s in r){const i=t+zy+s;e[i]=r[s]}}return e}async function G1e(n){const e=SA(n);return Di.getManager(e.scheme).removeModel(e.path)}async function H1e(n,e){return PJ(n,e,!1)}async function q1e(n,e){return PJ(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K1e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!ye().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return sJ(e)}}if(ye().get("IS_BROWSER")){ye().setPlatform("browser",new K1e);try{Di.registerManager(zg.URL_SCHEME,new U1e)}catch{}try{Di.registerManager($g.URL_SCHEME,new O1e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X1e={importFetch:()=>require("node-fetch")};let DO;class Y1e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return ye().global.fetch!=null?ye().global.fetch(e,t):(DO==null&&(DO=X1e.importFetch()),DO(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ye().get("IS_NODE")&&!ye().get("IS_BROWSER")&&ye().setPlatform("node",new Y1e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vt(n,e="float32",t){return e=e||"float32",Wa(n),new Kr(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(n,e){const t=G(n,"x","cast");if(!KQ(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:t},s={dtype:e};return ne.runKernel(Xx,r,s)}const Be=re({cast_:Z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(n){const t={x:G(n,"x","clone","string_or_numeric")};return ne.runKernel(lb,t)}const cu=re({clone_:Q1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gz(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xJ();const J1e={buffer:Vt,cast:Be,clone:cu,print:gz};Ywe(J1e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(n,e){let t=G(n,"a","add"),r=G(e,"b","add");[t,r]=yr(t,r);const s={a:t,b:r};return ne.runKernel(p0,s)}const Re=re({add_:eSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSe(n,e){let t=G(n,"a","floorDiv"),r=G(e,"b","floorDiv");[t,r]=yr(t,r);const s={a:t,b:r};return ne.runKernel(ab,s)}const WD=re({floorDiv_:tSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSe(n,e){let t=G(n,"a","div"),r=G(e,"b","div");if([t,r]=yr(t,r),t.dtype==="int32"&&r.dtype==="int32")return WD(t,r);const s={a:t,b:r},i={};return ne.runKernel(eb,s,i)}const at=re({div_:nSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSe(n,e){let t=G(n,"a","mul"),r=G(e,"b","mul");[t,r]=yr(t,r);const s={a:t,b:r};return ne.runKernel(yb,s)}const ie=re({mul_:rSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSe(n){const e=G(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return ne.runKernel(fC,t)}else{const t={x:e};return ne.runKernel(sC,t)}}const Ur=re({abs_:sSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSe(n){const t={x:G(n,"x","acos")};return ne.runKernel(jx,t)}const yz=re({acos_:iSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSe(n){const t={x:G(n,"x","acosh")};return ne.runKernel(Ux,t)}const vz=re({acosh_:aSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSe(n){V(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),V(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((s,i)=>G(s,`tensors${i}`,"addN")),t=e[0];e.forEach(s=>{if(s.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Qt(s.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return ne.runKernel(iC,r)}const OJ=re({addN_:oSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(n,e=null,t=!1){const s={x:G(n,"x","all","bool")},i={axis:e,keepDims:t};return ne.runKernel(LR,s,i)}const GD=re({all_:lSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(n,e=null,t=!1){const s={x:G(n,"x","any","bool")},i={axis:e,keepDims:t};return ne.runKernel(MR,s,i)}const WS=re({any_:cSe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uSe(n,e=0){const r={x:G(n,"x","argMax")},s={axis:e};return ne.runKernel(aC,r,s)}const Hf=re({argMax_:uSe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(n,e=0){const r={x:G(n,"x","argMin")},s={axis:e};return ne.runKernel(oC,r,s)}const xz=re({argMin_:hSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dSe(n){const t={x:G(n,"x","asin")};return ne.runKernel(Wx,t)}const bz=re({asin_:dSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fSe(n){const t={x:G(n,"x","asinh")};return ne.runKernel(Gx,t)}const wz=re({asinh_:fSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(n){const t={x:G(n,"x","atan")};return ne.runKernel(Hx,t)}const Sz=re({atan_:pSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSe(n,e){let t=G(n,"a","atan2"),r=G(e,"b","atan2");[t,r]=yr(t,r);const s={a:t,b:r};return ne.runKernel(Kx,s)}const kz=re({atan2_:mSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(n){const t={x:G(n,"x","atanh")};return ne.runKernel(qx,t)}const Cz=re({atanh_:gSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cT(n,e,t,r,s="NHWC",i){const a=n[3],o=[...e,a],l=Qh(s);return Ds(n,o,t,i,r,null,null,l)}function wl(n,e,t,r,s,i,a="channelsLast"){const[o,l]=GS(e);let c;if(a==="channelsLast")c=[o,l,n[3],n[3]];else if(a==="channelsFirst")c=[o,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${a}`);return Ds(n,c,t,r,s,i,!1,a)}function Zh(n,e,t,r,s,i,a="NDHWC"){const[o,l,c]=c4(e);let u,h;if(a==="NDHWC")h="channelsLast",u=[o,l,c,n[4],n[4]];else if(a==="NCDHW")h="channelsFirst",u=[o,l,c,n[1],n[1]];else throw new Error(`Unknown dataFormat ${a}`);return yp(n,u,t,r,s,!1,h,i)}function Ds(n,e,t,r,s,i,a=!1,o="channelsLast"){let[l,c,u,h]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,h]=n;else if(o==="channelsFirst")[l,h,c,u]=n;else throw new Error(`Unknown dataFormat ${o}`);const[d,f,,p]=e,[m,y]=GS(t),[g,v]=GS(r),b=By(d,g),w=By(f,v),{padInfo:C,outHeight:I,outWidth:T}=xSe(s,c,u,m,y,b,w,i,o),E=a?p*h:p;let A;return o==="channelsFirst"?A=[l,E,I,T]:o==="channelsLast"&&(A=[l,I,T,E]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:h,outHeight:I,outWidth:T,outChannels:E,padInfo:C,strideHeight:m,strideWidth:y,filterHeight:d,filterWidth:f,effectiveFilterHeight:b,effectiveFilterWidth:w,dilationHeight:g,dilationWidth:v,inShape:n,outShape:A,filterShape:e}}function yp(n,e,t,r,s,i=!1,a="channelsLast",o){let[l,c,u,h,d]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,h,d]=n;else if(a==="channelsFirst")[l,d,c,u,h]=n;else throw new Error(`Unknown dataFormat ${a}`);const[f,p,m,,y]=e,[g,v,b]=c4(t),[w,C,I]=c4(r),T=By(f,w),E=By(p,C),A=By(m,I),{padInfo:N,outDepth:F,outHeight:_,outWidth:D}=bSe(s,c,u,h,g,v,b,T,E,A,o),R=i?y*d:y;let B;return a==="channelsFirst"?B=[l,R,F,_,D]:a==="channelsLast"&&(B=[l,F,_,D,R]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:u,inWidth:h,inChannels:d,outDepth:F,outHeight:_,outWidth:D,outChannels:R,padInfo:N,strideDepth:g,strideHeight:v,strideWidth:b,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:T,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationDepth:w,dilationHeight:C,dilationWidth:I,inShape:n,outShape:B,filterShape:e}}function ySe(n,e,t,r,s){r==null&&(r=Tz(n,e,t));const i=n[0],a=n[1],o=HS((i-e+2*r)/t+1,s),l=HS((a-e+2*r)/t+1,s);return[o,l]}function vSe(n,e,t,r,s,i){s==null&&(s=Tz(n,e[0],r[0]));const a=[0,0,0,t];for(let o=0;o<3;o++)n[o]+2*s>=e[o]&&(a[o]=HS((n[o]-e[o]+2*s)/r[o]+1,i));return a}function Tz(n,e,t,r=1){const s=By(e,r);return Math.floor((n[0]*(t-1)-t+s)/2)}function GS(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function c4(n){return typeof n=="number"?[n,n,n]:n}function By(n,e){return e<=1?n:n+(n-1)*(e-1)}function xSe(n,e,t,r,s,i,a,o,l){let c,u,h;if(typeof n=="number"){c={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const f=ySe([e,t],i,r,n,o);u=f[0],h=f[1]}else if(n==="same"){u=Math.ceil(e/r),h=Math.ceil(t/s);const d=Math.max(0,(u-1)*r+i-e),f=Math.max(0,(h-1)*s+a-t),p=Math.floor(d/2),m=d-p,y=Math.floor(f/2),g=f-y;c={top:p,bottom:m,left:y,right:g,type:"SAME"}}else if(n==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),h=Math.ceil((t-a+1)/s);else if(typeof n=="object"){const d=l==="channelsLast"?n[1][0]:n[2][0],f=l==="channelsLast"?n[1][1]:n[2][1],p=l==="channelsLast"?n[2][0]:n[3][0],m=l==="channelsLast"?n[2][1]:n[3][1];c={top:d,bottom:f,left:p,right:m,type:d===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},u=HS((e-i+d+f)/r+1,o),h=HS((t-a+p+m)/s+1,o)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:c,outHeight:u,outWidth:h}}function bSe(n,e,t,r,s,i,a,o,l,c,u){let h,d,f,p;if(n==="valid"&&(n=0),typeof n=="number"){h={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const y=vSe([e,t,r,1],[o,l,c],1,[s,i,a],n,u);d=y[0],f=y[1],p=y[2]}else if(n==="same"){d=Math.ceil(e/s),f=Math.ceil(t/i),p=Math.ceil(r/a);const m=(d-1)*s+o-e,y=(f-1)*i+l-t,g=(p-1)*a+c-r,v=Math.floor(m/2),b=m-v,w=Math.floor(y/2),C=y-w,I=Math.floor(g/2),T=g-I;h={top:w,bottom:C,left:I,right:T,front:v,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:h,outDepth:d,outHeight:f,outWidth:p}}function HS(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function qf(n){const[e,t,r]=GS(n);return e===1&&t===1&&r===1}function Zs(n,e){return qf(n)||qf(e)}function Bg(n){return GS(n).every(e=>e>0)}function Qh(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function ji(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")V(Lg(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{V(Lg(s),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${s}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(n,e){const r={x:G(n,"x","reshape","string_or_numeric")},s={shape:e};return ne.runKernel(qC,r,s)}const ae=re({reshape_:wSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(n,e,t,r,s){const i=G(n,"x","avgPool","float32"),a=1;V(Zs(t,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);let o=i,l=!1;i.rank===3&&(l=!0,o=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),ji("avgPool",r,s);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:s};let h=ne.runKernel(lC,c,u);return h=Be(h,i.dtype),l?ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const uT=re({avgPool_:SSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSe(n,e,t,r,s,i="NDHWC"){const a=G(n,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),V(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),V(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),V(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),ji("avgPool3d",r,s);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:s,dataFormat:i};let h=ne.runKernel(cC,c,u);return h=Be(h,o.dtype),l?ae(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Ez=re({avgPool3d_:kSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(n,e=0){V(n.length>=1,()=>"Pass at least one tensor to concat");const t=US(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),t.length===1)return cu(t[0]);const r=t,s={axis:e};return ne.runKernel(pC,r,s)}const Fr=re({concat_:CSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSe(n,e,t=!1,r=!1){let s=G(n,"a","matMul"),i=G(e,"b","matMul");[s,i]=yr(s,i);const a={a:s,b:i},o={transposeA:t,transposeB:r};return ne.runKernel(uC,a,o)}const zt=re({matMul_:TSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESe(n){const t={x:G(n,"x","sigmoid","float32")};return ne.runKernel(Ab,t)}const Co=re({sigmoid_:ESe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISe(n,e,t){const r=G(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:t};return ne.runKernel(QC,s,i)}const nn=re({slice_:ISe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(n){const t={x:G(n,"x","tanh","float32")};return ne.runKernel(Pb,t)}const Kf=re({tanh_:ASe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(n,e,t,r,s,i){const a=G(n,"forgetBias","basicLSTMCell"),o=G(e,"lstmKernel","basicLSTMCell"),l=G(t,"lstmBias","basicLSTMCell"),c=G(r,"data","basicLSTMCell"),u=G(s,"c","basicLSTMCell"),h=G(i,"h","basicLSTMCell"),d=Fr([c,h],1),f=zt(d,o),p=Re(f,l),m=p.shape[0],y=p.shape[1]/4,g=[m,y],v=nn(p,[0,0],g),b=nn(p,[0,y],g),w=nn(p,[0,y*2],g),C=nn(p,[0,y*3],g),I=Re(ie(Co(v),Kf(b)),ie(u,Co(Re(a,w)))),T=ie(Kf(I),Co(C));return[I,T]}const LJ=re({basicLSTMCell_:NSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(n,e,t){const r=G(n,"x","batchToSpaceND"),s=e.reduce((o,l)=>o*l);V(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),V(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),V(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},a={blockShape:e,crops:t};return ne.runKernel(hC,i,a)}const hT=re({batchToSpaceND_:_Se});function RSe(n){let e;return n.rank===0||n.rank===1?e=ae(n,[1,1,1,n.size]):n.rank===2?e=ae(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=ae(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSe(n,e,t,r,s,i){i==null&&(i=.001);const a=G(n,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(t,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let u;r!=null&&(u=G(r,"offset","batchNorm")),V(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:RSe(a),scale:c,offset:u,mean:o,variance:l},f={varianceEpsilon:i},p=ne.runKernel(kC,d,f);return ae(p,a.shape)}const Mb=re({batchNorm_:DSe});function FSe(n,e,t,r,s,i){const a=G(n,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(t,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let u;return r!=null&&(u=G(r,"offset","batchNorm")),V(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),V(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&V(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Mb(a,o,l,u,c,i)}const Iz=re({batchNorm2d_:FSe});function PSe(n,e,t,r,s,i){const a=G(n,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(t,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let u;return r!=null&&(u=G(r,"offset","batchNorm")),V(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),V(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&V(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Mb(a,o,l,u,c,i)}const Az=re({batchNorm3d_:PSe});function OSe(n,e,t,r,s,i){const a=G(n,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(t,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let u;return r!=null&&(u=G(r,"offset","batchNorm")),V(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),V(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&V(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Mb(a,o,l,u,c,i)}const Nz=re({batchNorm4d_:OSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(n,e,t){const r=G(n,"x","bincount"),s=G(e,"weights","bincount");V(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),V(t>=0,()=>`size must be non-negative, but got ${t}.`),V(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},a={size:t};return ne.runKernel(BR,i,a)}const _z=re({bincount_:LSe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(n,e){const t=G(n,"x","bitwiseAnd"),r=G(e,"y","bitwiseAnd");if(!Qt(t.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${r.shape}`);if(t.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${r.dtype}`);const s={a:t,b:r};return ne.runKernel(dC,s)}const MJ=re({bitwiseAnd_:MSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(n,e){const t=G(n,"s0","broadcastArgs","int32"),r=G(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:t,s1:r};return ne.runKernel(VR,s)}const $J=re({broadcastArgs_:$Se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(n,e){let t=G(n,"broadcastTo","x");const r=t.shape;if(Wa(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const c=t.shape.slice();for(;c.length<e.length;)c.unshift(1);t=ae(t,c)}const s=t.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(t.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return cu(t);const o={x:t},l={reps:i};return ne.runKernel(Ob,o,l)}const vg=re({broadcastTo_:zSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSe(n){const t={x:G(n,"x","ceil","float32")};return ne.runKernel(Yx,t)}const Rz=re({ceil_:BSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0(n,e,t){Wa(n),t=t||d0(e);const r={shape:n,value:e,dtype:t};return ne.runKernel(rD,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(n,e,t){const r=G(n,"x","clipByValue");if(V(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return g0(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:t};return ne.runKernel(Zx,s,i)}const ha=re({clipByValue_:VSe});function jSe(n){return Fr(n,0)}const Dz=re({concat1d_:jSe});function USe(n,e){return Fr(n,e)}const Fz=re({concat2d_:USe});function WSe(n,e){return Fr(n,e)}const Pz=re({concat3d_:WSe});function GSe(n,e){return Fr(n,e)}const Oz=re({concat4d_:GSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(n,e,t,r,s="NHWC",i=[1,1],a){const o=G(n,"x","conv2d","float32"),l=G(e,"filter","conv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),ji("conv2d",r,a);const h=s==="NHWC"?c.shape[3]:c.shape[1];V(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),V(Zs(t,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),V(Bg(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),V(Bg(t),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:c,filter:l},f={strides:t,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},p=ne.runKernel(mC,d,f);return u?ae(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ph=re({conv2d_:HSe});function qSe(n,e,t,r,s="NWC",i=1,a){const o=G(n,"x","conv1d"),l=G(e,"filter","conv1d");let c=o,u=!1;o.rank===2&&(u=!0,c=ae(o,[1,o.shape[0],o.shape[1]])),V(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),ji("conv1d",r,a),V(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(Zs(t,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${i}'`),V(Bg(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),V(Bg(t),()=>"Error in conv1D: Stride should be larger than 0."),V(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=ae(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=ae(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=Ph(d,h,[1,t],r,"NHWC",[1,i],a);return u?ae(y,[y.shape[2],y.shape[3]]):ae(y,[y.shape[0],y.shape[2],y.shape[3]])}const HD=re({conv1d_:qSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSe(n,e,t,r,s,i="NHWC",a){V(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let o=n,l=e,c=!1;e.rank===3&&(c=!0,l=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,n[0],n[1],n[2]]),V(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const u=i==="NHWC"?o[3]:o[1],h=i==="NHWC"?l.shape[3]:l.shape[1];V(u===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[2]}.`),V(h===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${t.shape[3]}.`),ji("conv2dDerInput",s,a);const d={dy:l,filter:t},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,inputShape:o},p=ne.runKernel(gC,d,f);return c?ae(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Lz=re({conv2DBackpropInput_:KSe});function XSe(n,e,t,r,s,i){const a=G(n,"x","conv2dTranspose"),o=G(e,"filter","conv2dTranspose");return Lz(t,a,o,r,s,"NHWC",i)}const qD=re({conv2dTranspose_:XSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(n,e,t,r,s="NDHWC",i=[1,1,1]){const a=G(n,"x","conv3d"),o=G(e,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),V(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),V(Zs(t,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),V(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),V(Bg(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),V(Bg(t),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:o},h={strides:t,pad:r,dataFormat:s,dilations:i},d=ne.runKernel(yC,u,h);return c?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Mz=re({conv3d_:YSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(n,e,t,r,s){V(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let i=n,a=e,o=!1;e.rank===4&&(o=!0,a=ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,n[0],n[1],n[2],n[3]]);const l=i[4],c=a.shape[4];V(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),V(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),V(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),V(l===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[3]}.`),V(c===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${t.shape[4]}.`);const u={dy:a,filter:t},h={pad:s,strides:r,inputShape:i},d=ne.runKernel(GR,u,h);return o?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const zJ=re({conv3DBackpropInput_:ZSe});function QSe(n,e,t,r,s){const i=G(n,"x","conv3dTranspose"),a=G(e,"filter","conv3dTranspose");return zJ(t,i,a,r,s)}const $z=re({conv3dTranspose_:QSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(n){const t={x:G(n,"x","cos","float32")};return ne.runKernel(Qx,t)}const dT=re({cos_:JSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2e(n){const t={x:G(n,"x","cosh","float32")};return ne.runKernel(Jx,t)}const KD=re({cosh_:e2e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(n,e=0,t=!1,r=!1){const i={x:G(n,"x","cumprod")},a={axis:e,exclusive:t,reverse:r};return ne.runKernel(HR,i,a)}const qS=re({cumprod_:t2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2e(n,e=0,t=!1,r=!1){const i={x:G(n,"x","cumsum")},a={axis:e,exclusive:t,reverse:r};return ne.runKernel(vC,i,a)}const XD=re({cumsum_:n2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(n,e,t,r=!1){const s=G(n,"x","denseBincount"),i=G(e,"weights","denseBincount");V(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),V(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),V(t>=0,()=>`size must be non-negative, but got ${t}.`),V(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const a={x:s,weights:i},o={size:t,binaryOutput:r};return ne.runKernel(KR,a,o)}const MN=re({denseBincount_:r2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2e(n,e,t="NHWC"){const r=G(n,"x","depthToSpace","float32"),s=t==="NHWC"?r.shape[1]:r.shape[2],i=t==="NHWC"?r.shape[2]:r.shape[3],a=t==="NHWC"?r.shape[3]:r.shape[1];V(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),V(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),V(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),V(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:t};return ne.runKernel(XR,o,l)}const zz=re({depthToSpace_:s2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(n,e,t,r,s="NHWC",i=[1,1],a){const o=G(n,"x","depthwiseConv2d","float32"),l=G(e,"filter","depthwiseConv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=s==="NHWC"?c.shape[3]:c.shape[1];V(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),ji("depthwiseConv2d",r,a);const d={x:c,filter:l},f={strides:t,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},p=ne.runKernel(xC,d,f);return u?ae(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const $b=re({depthwiseConv2d_:i2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(n){const t={x:G(n,"x","diag")};return ne.runKernel(QR,t)}const BJ=re({diag_:a2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(n,e,t,r,s=[1,1],i="NHWC"){const a=G(n,"x","dilation2d"),o=G(e,"filter","dilation2d");V(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),V(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),V(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=a,c=!1;a.rank===3&&(l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),V(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const u={x:l,filter:o},h={strides:t,pad:r,dilations:s},d=ne.runKernel(bC,u,h);return c?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Bz=re({dilation2d_:o2e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vg(n,e){const t=n.length,r=[];for(let s=0;s<t;s++){const i=t-1-s,a=n[i]||1;(e[e.length-1-s]||1)>1&&a===1&&r.unshift(i)}return r}function Yr(n,e){const t=[];for(let r=0;r<e.length;r++){const s=n[n.length-r-1],i=e.length-r-1,a=e[i];(s==null||s===1&&a>1)&&t.unshift(i)}return t}function Nt(n,e){const t=Math.max(n.length,e.length),r=new Array(t);for(let s=0;s<t;s++){let i=n[n.length-s-1];i==null&&(i=1);let a=e[e.length-s-1];if(a==null&&(a=1),i===1)r[t-s-1]=a;else if(a===1)r[t-s-1]=i;else if(i!==a){const o=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(o)}else r[t-s-1]=i}return r}const l2e=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Nt,getBroadcastDims:Vg,getReductionAxes:Yr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(n,e){let t=G(n,"a","equal","string_or_numeric"),r=G(e,"b","equal","string_or_numeric");[t,r]=yr(t,r),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(wC,s)}const za=re({equal_:c2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(n,e,t){const r=G(e,"a","where"),s=G(t,"b","where"),i=G(n,"condition","where","bool"),a=Nt(Nt(i.shape,r.shape),s.shape),o=vg(i,a),l=vg(r,a),c=vg(s,a),u={condition:o,t:l,e:c};return ne.runKernel(ZC,u)}const Ks=re({where_:u2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(n){const t={x:G(n,"x","zerosLike")};return ne.runKernel(aT,t)}const rn=re({zerosLike_:h2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(n,e){let t=G(n,"a","div"),r=G(e,"b","div");[t,r]=yr(t,r);const s=at(t,r),i=rn(s),a=za(r,i);return Ks(a,i,s)}const Vz=re({divNoNan_:d2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2e(n,e){const t=G(n,"t1","dot"),r=G(e,"t2","dot");V((t.rank===1||t.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);const s=t.rank===1?t.size:t.shape[1],i=r.rank===1?r.size:r.shape[0];if(V(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),t.rank===1&&r.rank===1){const a=ae(t,[1,-1]),o=ae(r,[-1,1]),l=zt(a,o);return ae(l,[])}else if(t.rank===1&&r.rank===2){const a=ae(t,[1,-1]),o=ae(r,[r.shape[0],r.shape[1]]),l=zt(a,o);return ae(l,[l.size])}else if(t.rank===2&&r.rank===1){const a=ae(r,[-1,1]),o=zt(t,a);return ae(o,[o.size])}else{const a=ae(r,[r.shape[0],r.shape[1]]);return zt(t,a)}}const jz=re({dot_:f2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(n,...e){const t=e.map((s,i)=>G(s,`tensors${i}`,"einsum")),r={equation:n};return ne.runKernel(eD,t,r)}const Kp=re({einsum_:p2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(n){const t={x:G(n,"x","elu","float32")};return ne.runKernel(tb,t)}const zb=re({elu_:m2e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(n,e){const t=G(n,"x","ensureShape","string_or_numeric");if(!HQ(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const VJ=re({ensureShape_:g2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(n){let e=G(n,"x","erf");V(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Be(e,"float32"));const t={x:e};return ne.runKernel(nb,t)}const YD=re({erf_:y2e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uz(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function jJ(n,e,t){const r=n.length+e.length,s=[];let i=0,a=0;for(let o=0;o<r;o++)t.indexOf(o)===-1?s.push(n[i++]):s.push(e[a++]);return s}function Fs(n,e){const t=[],r=n.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&t.push(n[i]);const s=e.map(i=>n[i]);return[t,s]}function Pr(n,e){const t=e.map(r=>1);return jJ(n,t,e)}function Qs(n,e,t){V(Uz(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function vr(n,e){if(Uz(n,e))return null;const t=[];for(let r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(r=>t.push(r)),t}function vp(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Or(n,e){const t=[];for(let r=e-n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(n,e=null,t=!1){const s={x:G(n,"x","max")},i={reductionIndices:e,keepDims:t};return ne.runKernel(FC,s,i)}const To=re({max_:v2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2e(n,e=null,t=!1){const s={x:G(n,"x","min")},i={axis:e,keepDims:t};return ne.runKernel(MC,s,i)}const px=re({min_:x2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(n,e){let t=G(n,"base","pow"),r=G(e,"exp","pow");[t,r]=yr(t,r);const s={a:t,b:r};return ne.runKernel(vb,s)}const bu=re({pow_:b2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(n,e){if((ws(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ws(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return gp(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(n){const t={x:G(n,"x","sqrt","float32")};return ne.runKernel(_b,t)}const Rs=re({sqrt_:w2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(n){const e=G(n,"x","square"),t={};return ne.runKernel("Square",{x:e},t)}const Mn=re({square_:S2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(n,e=null,t=!1){let r=G(n,"x","sum");r.dtype==="bool"&&(r=Be(r,"int32"));const s={x:r},i={axis:e,keepDims:t};return ne.runKernel(JC,s,i)}const rt=re({sum_:k2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(n,e="euclidean",t=null,r=!1){n=G(n,"x","norm");const s=UJ(n,e,t);let i=s.shape;if(r){const a=Kt(t,n.shape);i=Pr(s.shape,a)}return ae(s,i)}function UJ(n,e,t=null){if(n.rank===0)return Ur(n);if(n.rank!==1&&t===null)return UJ(ae(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return rt(Ur(n),t);if(e===1/0)return To(Ur(n),t);if(e===-1/0)return px(Ur(n),t);if(e==="euclidean"||e===2)return Rs(rt(bu(Ur(n),lt(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return To(rt(Ur(n),t[0]),t[1]-1);if(e===1/0)return To(rt(Ur(n),t[1]),t[0]);if(e===-1/0)return px(rt(Ur(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return Rs(rt(Mn(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const Bb=re({norm_:C2e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(n,e=null,t=!1){return Bb(n,"euclidean",e,t)}const Wz=re({euclideanNorm_:T2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2e(n){const t={x:G(n,"x","exp")};return ne.runKernel(rb,t)}const da=re({exp_:E2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(n,e=0){const t=G(n,"x","expandDims","string_or_numeric");V(e<=t.rank,()=>"Axis must be <= rank of the tensor");const r={input:t},s={dim:e};return ne.runKernel(SC,r,s)}const Hr=re({expandDims_:I2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(n){const t={x:G(n,"x","expm1")};return ne.runKernel(sb,t)}const Gz=re({expm1_:A2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(n,e){const t=G(n,"x","tile","string_or_numeric");V(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const r={x:t},s={reps:e};return ne.runKernel(Ob,r,s)}const vo=re({tile_:N2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(n,e,t,r="float32"){e==null&&(e=n);const s=Vt([n,e],r),i=n<=e?n:e;for(let o=0;o<i;++o)s.set(1,o,o);const a=ae(s.toTensor(),[n,e]);if(t==null)return a;if(t.length===1)return vo(Hr(a,0),[t[0],1,1]);if(t.length===2)return vo(Hr(Hr(a,0),0),[t[0],t[1],1,1]);if(t.length===3)return vo(Hr(Hr(Hr(a,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const ZD=re({eye_:_2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(n){const t={x:G(n,"x","floor","float32")};return ne.runKernel(ib,t)}const Vb=re({floor_:R2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(n,e,t=0,r=0){const s=G(n,"x","gather"),i=G(e,"indices","gather","int32"),a={x:s,indices:i},o={axis:t,batchDims:r};return ne.runKernel(CC,a,o)}const jb=re({gather_:D2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(n,e){let t=G(n,"a","greater","string_or_numeric"),r=G(e,"b","greater","string_or_numeric");[t,r]=yr(t,r),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(TC,s)}const Ui=re({greater_:F2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(n,e){let t=G(n,"a","greaterEqual","string_or_numeric"),r=G(e,"b","greaterEqual","string_or_numeric");[t,r]=yr(t,r),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(ob,s)}const Jh=re({greaterEqual_:P2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(n){const t={input:G(n,"input","imag")};return ne.runKernel(oD,t)}const fT=re({imag_:O2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(n){const t={x:G(n,"x","isFinite")};return ne.runKernel(cb,t)}const Hz=re({isFinite_:L2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(n){const t={x:G(n,"x","isInf")};return ne.runKernel(ub,t)}const qz=re({isInf_:M2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(n){const t={x:G(n,"x","isNaN")};return ne.runKernel(hb,t)}const Kz=re({isNaN_:$2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(n,e=.2){const r={x:G(n,"x","leakyRelu")},s={alpha:e};return ne.runKernel(EC,r,s)}const pT=re({leakyRelu_:z2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(n,e){let t=G(n,"a","less","string_or_numeric"),r=G(e,"b","less","string_or_numeric");[t,r]=yr(t,r),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(IC,s)}const mx=re({less_:B2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(n,e){let t=G(n,"a","lessEqual","string_or_numeric"),r=G(e,"b","lessEqual","string_or_numeric");[t,r]=yr(t,r),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(AC,s)}const xp=re({lessEqual_:V2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJ(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:e,num:t};return ne.runKernel(lD,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(n,e=5,t=1,r=1,s=.5){const i=G(n,"x","localResponseNormalization");V(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),V(Lg(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=i,o=!1;i.rank===3&&(o=!0,a=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:a},c={depthRadius:e,bias:t,alpha:r,beta:s},u=ne.runKernel(DC,l,c);return o?ae(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Xz=re({localResponseNormalization_:j2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(n){const t={x:G(n,"x","log","float32")};return ne.runKernel(db,t)}const Ba=re({log_:U2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e(n){const t={x:G(n,"x","log1p")};return ne.runKernel(fb,t)}const mT=re({log1p_:W2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(n){return V(Uf(n),()=>"The f passed in grad(f) must be a function"),(e,t)=>{const r=G(e,"x","tf.grad","string_or_numeric"),s=t!=null?G(t,"dy","tf.grad"):null;return ne.tidy(()=>{const{value:i,grads:a}=ne.gradients(()=>n(r),[r],s);return s!=null&&Ys(i.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),QD(a),a[0]})}}function H2e(n){return V(Uf(n),()=>"The f passed in grads(f) must be a function"),(e,t)=>{V(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=US(e,"args","tf.grads","string_or_numeric"),s=t!=null?G(t,"dy","tf.grads"):null;return ne.tidy(()=>{const{value:i,grads:a}=ne.gradients(()=>n(...r),r,s);return s!=null&&Ys(i.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),QD(a),a})}}function q2e(n){return V(Uf(n),()=>"The f passed in valueAndGrad(f) must be a function"),(e,t)=>{V(e instanceof Sn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),V(t==null||t instanceof Sn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=ne.gradients(()=>n(e),[e],t);return QD(r),{grad:r[0],value:s}}}function K2e(n){return V(Uf(n),()=>"The f passed in valueAndGrads(f) must be a function"),(e,t)=>{V(Array.isArray(e)&&e.every(s=>s instanceof Sn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),V(t==null||t instanceof Sn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=ne.gradients(()=>n(...e),e,t);return t!=null&&Ys(r.value.shape,t.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),QD(r.grads),r}}function GJ(n,e){V(Uf(n),()=>"The f passed in variableGrads(f) must be a function"),V(e==null||Array.isArray(e)&&e.every(c=>c instanceof jS),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const c in ne.registeredVariables)e.push(ne.registeredVariables[c])}const r=t?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),V(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:a,grads:o}=ne.gradients(n,e,null,i);V(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((c,u)=>{o[u]!=null&&(l[c.name]=o[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:a,grads:l}}function wu(n){return ne.customGrad(n)}function QD(n){if(n.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(n){const t={x:G(n,"x","neg")};return ne.runKernel(zC,t)}const Kn=re({neg_:X2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(n){const t={x:G(n,"x","softplus")};return ne.runKernel(Nb,t)}const y0=re({softplus_:Y2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(n){const e=G(n,"x","logSigmoid");return wu(r=>({value:Kn(y0(Kn(r))),gradFunc:a=>ie(a,Co(Kn(r)))}))(e)}const Yz=re({logSigmoid_:Z2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(n,e){let t=G(n,"a","sub"),r=G(e,"b","sub");[t,r]=yr(t,r);const s={a:t,b:r};return ne.runKernel(Db,s)}const Ye=re({sub_:Q2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(n,e=-1){const t=G(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return wu((s,i)=>{const o=To(s,e,!0),l=Ye(s,o),c=Ye(Be(l,"float32"),Ba(rt(da(l),e,!0)));return i([c]),{value:c,gradFunc:(h,d)=>{const[f]=d,p=!0,m=da(f);return Ye(h,ie(rt(h,e,p),m))}}})(t)}const JD=re({logSoftmax_:J2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eke(n,e=null,t=!1){const r=G(n,"x","logSumExp"),s=Kt(e,r.shape),i=To(r,s,!0),a=Ye(r,i),o=da(a),l=rt(o,s),c=Ba(l),u=Re(ae(i,c.shape),c);if(t){const h=Pr(u.shape,s);return ae(u,h)}return u}const gT=re({logSumExp_:eke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tke(n,e){const t=G(n,"a","logicalAnd","bool"),r=G(e,"b","logicalAnd","bool");Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(NC,s)}const lc=re({logicalAnd_:tke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(n){const t={x:G(n,"x","logicalNot","bool")};return ne.runKernel(_C,t)}const yT=re({logicalNot_:nke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(n,e){const t=G(n,"a","logicalOr","bool"),r=G(e,"b","logicalOr","bool");Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(RC,s)}const eF=re({logicalOr_:rke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ske(n,e){const t=G(n,"a","logicalXor","bool"),r=G(e,"b","logicalXor","bool");return Nt(t.shape,r.shape),lc(eF(n,e),yT(lc(n,e)))}const Zz=re({logicalXor_:ske});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GE=2147483648;function ike(n,e,t="left"){const r=G(n,"sortedSequence","searchSorted"),s=G(e,"values","searchSorted"),i=r.shape[r.shape.length-1],a=s.shape[s.shape.length-1],o=ae(r,[-1,i]),l=ae(s,[-1,a]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Se(l.shape)>=GE)throw new Error(`values tensor size must less than ${GE}`);if(o.shape[1]>=GE)throw new Error(`trailing dim_size must less than ${GE} for int32 output type, was ${o.shape[1]}`);const c={sortedSequence:o,values:l},u={side:t};return ne.runKernel(ED,c,u)}const tF=re({searchSorted_:ike});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HJ(n,e){return tF(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ake(n,e,t,r,s){const i=G(n,"x","maxPool"),a=1;let o=i,l=!1;i.rank===3&&(l=!0,o=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),V(Zs(t,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),ji("maxPool",r,s);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:s},h=ne.runKernel(PC,c,u);return l?ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const vT=re({maxPool_:ake});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(n,e=[1,1,1],t,r,s,i="NDHWC"){const a=G(n,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),V(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),V(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),ji("maxPool3d",r,s);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:s,dataFormat:i},h=ne.runKernel(OC,c,u);return l?ae(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Qz=re({maxPool3d_:oke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(n,e,t,r,s=!1){const a={x:G(n,"x","maxPoolWithArgmax")},o={filterSize:e,strides:t,pad:r,includeBatchInIndex:s},l=ne.runKernel(dD,a,o);return{result:l[0],indexes:l[1]}}const qJ=re({maxPoolWithArgmax_:lke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(n,e){let t=G(n,"a","maximum"),r=G(e,"b","maximum");[t,r]=yr(t,r),t.dtype==="bool"&&(t=Be(t,"int32"),r=Be(r,"int32")),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(pb,s)}const Iu=re({maximum_:cke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uke(n,e=null,t=!1){const s={x:G(n,"x","mean")},i={axis:e,keepDims:t};return ne.runKernel(LC,s,i)}const mr=re({mean_:uke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr(n,e="float32"){if(Wa(n),e==="complex64"){const r=qr(n,"float32"),s=qr(n,"float32");return Fh(r,s)}const t=Xs(Se(n),e);return ne.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ea(n,e="float32"){if(Wa(n),e==="complex64"){const r=ea(n,"float32"),s=qr(n,"float32");return Fh(r,s)}const t=OR(Se(n),e);return ne.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJ(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=G(n,"x","meshgrid",n instanceof Sn?n.dtype:"float32");if(e===void 0)return[r];let s=G(e,"y","meshgrid",e instanceof Sn?e.dtype:"float32");const i=Se(r.shape),a=Se(s.shape);return t==="xy"?(r=ae(r,[1,-1]),s=ae(s,[-1,1]),[zt(ea([a,1],r.dtype),r),zt(s,ea([1,i],s.dtype))]):(r=ae(r,[-1,1]),s=ae(s,[1,-1]),[zt(r,ea([1,a],r.dtype)),zt(ea([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(n,e){let t=G(n,"a","minimum"),r=G(e,"b","minimum");[t,r]=yr(t,r),t.dtype==="bool"&&(t=Be(t,"int32"),r=Be(r,"int32")),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(mb,s)}const Xf=re({minimum_:hke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dke(n,e,t){V(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const r=G(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=t==="reflect"?1:0;for(let o=0;o<r.rank;o++)V(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(e[o][0]>=0&&e[o][0]<=r.shape[o]-s&&e[o][1]>=0&&e[o][1]<=r.shape[o]-s,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:t},a={x:r};return ne.runKernel($C,a,i)}const Jz=re({mirrorPad_:dke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fke(n,e){let t=G(n,"a","mod"),r=G(e,"b","mod");[t,r]=yr(t,r);const s={a:t,b:r};return ne.runKernel(gb,s)}const eB=re({mod_:fke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(n,e=null,t=!1){n=G(n,"x","moments");const r=Kt(e,n.shape),s=mr(n,r,t);let i=s.shape;t||(i=Pr(s.shape,r));const a=Mn(Ye(Be(n,"float32"),ae(s,i))),o=mr(a,r,t);return{mean:s,variance:o}}const xT=re({moments_:pke});function mke(n,e,t,r){const s=G(e,"data","multiRNNCell"),i=US(t,"c","multiRNNCell"),a=US(r,"h","multiRNNCell");let o=s;const l=[];for(let h=0;h<n.length;h++){const d=n[h](o,i[h],a[h]);l.push(d[0]),l.push(d[1]),o=d[1]}const c=[],u=[];for(let h=0;h<l.length;h+=2)c.push(l[h]),u.push(l[h+1]);return[c,u]}const XJ=re({multiRNNCell_:mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(n,e,t,r=!1){const s=G(n,"logits","multinomial"),i=s.size,a=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);t=t||Math.random();const l={logits:a===1?ae(s,[1,-1]):s},c={numSamples:e,seed:t,normalized:r},u=ne.runKernel(fD,l,c);return a===1?ae(u,[u.size]):u}const YJ=re({multinomial_:gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(n,e){let t=G(n,"a","notEqual","string_or_numeric"),r=G(e,"b","notEqual","string_or_numeric");[t,r]=yr(t,r),Nt(t.shape,r.shape);const s={a:t,b:r};return ne.runKernel(BC,s)}const jg=re({notEqual_:yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vke(n,e,t=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:G(n,"indices","oneHot","int32")},o={dtype:s,depth:e,onValue:t,offValue:r};return ne.runKernel(jC,a,o)}const Ug=re({oneHot_:vke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(n){const t={x:G(n,"x","onesLike")};return ne.runKernel(VC,t)}const Va=re({onesLike_:xke});function bke(n,e){const t=G(n,"v1","outerProduct"),r=G(e,"v2","outerProduct");V(t.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);const s=ae(t,[-1,1]),i=ae(r,[1,-1]);return zt(s,i)}const ZJ=re({outerProduct_:bke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(n,e,t=0){const r=G(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:t},i={x:r};return ne.runKernel(WC,i,s)}const ed=re({pad_:wke});function Ske(n,e,t=0){return V(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),ed(n,[e],t)}const QJ=re({pad1d_:Ske});function kke(n,e,t=0){return V(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ed(n,e,t)}const JJ=re({pad2d_:kke});function Cke(n,e,t=0){return V(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ed(n,e,t)}const tB=re({pad3d_:Cke});function Tke(n,e,t=0){return V(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ed(n,e,t)}const eee=re({pad4d_:Tke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(n,e,t){const r=G(n,"x","spaceToBatchND");V(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),V(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),V(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+t[l-1][0]+t[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:t};return ne.runKernel(eT,s,i)}const bT=re({spaceToBatchND_:Eke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(n,e,t,r,s,i,a){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const o=G(n,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(Zs(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=wl(l.shape,e,i,s,r),h=[u.dilationHeight,u.dilationWidth];let d;r==="same"?d=Nke([u.filterHeight,u.filterWidth],h):d=[[0,0],[0,0]];const f=h[0]===1&&h[1]===1,[p,m]=Ake([u.inHeight,u.inWidth],h,d),y=f?r:"valid",g=f?l:bT(l,h,p),b=(t==="avg"?()=>uT(g,e,i,y,a):()=>vT(g,e,i,y,a))(),w=f?b:hT(b,h,m);return c?ae(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function Ake(n,e,t){const r=t.map(u=>u[0]),s=t.map(u=>u[1]),i=n.concat(r,s),a=e.map((u,h)=>(u-i[h]%u)%u),o=s.map((u,h)=>u+a[h]),l=e.map((u,h)=>[r[h],o[h]]),c=e.map((u,h)=>[0,a[h]]);return[l,c]}function Nke(n,e){const r=n.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),s=r.map(a=>Math.floor(a/2)),i=r.map((a,o)=>a-s[o]);return r.map((a,o)=>[s[o],i[o]])}const nB=re({pool_:Ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(n,e){const t=G(n,"x","prelu"),r=G(e,"alpha","prelu"),s={x:t,alpha:r};return ne.runKernel(GC,s)}const wT=re({prelu_:_ke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(n,e=null,t=!1){let r=G(n,"x","prod");r.dtype==="bool"&&(r=Be(r,"int32"));const s={x:r},i={axis:e,keepDims:t};return ne.runKernel(HC,s,i)}const rB=re({prod_:Rke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(n,e,t,r){const s=n.map((u,h)=>G(u,`tensors${h}`,"raggedGather","int32")),i=G(e,"paramsDenseValues","raggedGather"),a=G(t,"indices","raggedGather","int32"),o={paramsNestedSplits:s,paramsDenseValues:i,indices:a},l={outputRaggedRank:r},c=ne.runKernel(yD,o,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const tee=re({raggedGather_:Dke});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(n,e,t){const r=G(n,"starts","raggedRange"),s=G(e,"limits","raggedRange",r.dtype),i=G(t,"deltas","raggedRange",r.dtype),a={starts:r,limits:s,deltas:i},o=ne.runKernel(vD,a);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const nee=re({raggedRange_:Fke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pke(n,e,t,r,s){const i=G(n,"shape","raggedTensorToTensor","int32"),a=G(e,"values","raggedTensorToTensor"),o=G(t,"defaultValue","raggedTensorToTensor",a.dtype),l=r.map((h,d)=>G(h,`tensors${d}`,"raggedTensorToTensor","int32")),c={shape:i,values:a,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:s};return ne.runKernel(xD,c,u)}const ree=re({raggedTensorToTensor_:Pke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oke(n,e,t){Wa(n);const r=Se(n);let s=null;if(t==null||t==="float32")s=new Float32Array(r);else if(t==="int32")s=new Int32Array(r);else if(t==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${t}`);for(let i=0;i<r;i++)s[i]=e();return ne.makeTensor(s,n,t)}const see=re({rand_:Oke});var sB={exports:{}};sB.exports;(function(n){(function(e,t,r){function s(l){var c=this,u=o();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var u=new s(l),h=c&&c.state,d=u.next;return d.int32=function(){return u.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,h&&(typeof h=="object"&&i(h,u),d.state=function(){return i(u,{})}),d}function o(){var l=4022871197,c=function(u){u=String(u);for(var h=0;h<u.length;h++){l+=u.charCodeAt(h);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=a:this.alea=a})(Yl,n)})(sB);var Lke=sB.exports,iB={exports:{}};iB.exports;(function(n){(function(e,t,r){function s(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new s(o),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&i(u,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=a:this.xor128=a})(Yl,n)})(iB);var Mke=iB.exports,aB={exports:{}};aB.exports;(function(n){(function(e,t,r){function s(o){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new s(o),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&i(u,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=a:this.xorwow=a})(Yl,n)})(aB);var $ke=aB.exports,oB={exports:{}};oB.exports;(function(n){(function(e,t,r){function s(o){var l=this;l.next=function(){var u=l.x,h=l.i,d,f;return d=u[h],d^=d>>>7,f=d^d<<24,d=u[h+1&7],f^=d^d>>>10,d=u[h+3&7],f^=d^d>>>3,d=u[h+4&7],f^=d^d<<7,d=u[h+7&7],d=d^d<<13,f^=d^d<<9,u[h]=f,l.i=h+1&7,f};function c(u,h){var d,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,d=0;d<h.length;++d)f[d&7]=f[d&7]<<15^h.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],u.x=f,u.i=0,d=256;d>0;--d)u.next()}c(l,o)}function i(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new s(o),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=c.next,h.quick=h,u&&(u.x&&i(u,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=a:this.xorshift7=a})(Yl,n)})(oB);var zke=oB.exports,lB={exports:{}};lB.exports;(function(n){(function(e,t,r){function s(o){var l=this;l.next=function(){var u=l.w,h=l.X,d=l.i,f,p;return l.w=u=u+1640531527|0,p=h[d+34&127],f=h[d=d+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=h[d]=p^f,l.i=d,p+(u^u>>>16)|0};function c(u,h){var d,f,p,m,y,g=[],v=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,v=Math.max(v,h.length)),p=0,m=-32;m<v;++m)h&&(f^=h.charCodeAt((m+32)%h.length)),m===0&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(y=y+1640531527|0,d=g[m&127]^=f+y,p=d==0?p+1:0);for(p>=128&&(g[(h&&h.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=g[p+34&127],d=g[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[p]=f^d;u.w=y,u.X=g,u.i=p}c(l,o)}function i(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new s(o),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=c.next,h.quick=h,u&&(u.X&&i(u,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=a:this.xor4096=a})(Yl,n)})(lB);var Bke=lB.exports,cB={exports:{}};cB.exports;(function(n){(function(e,t,r){function s(o){var l=this,c="";l.next=function(){var h=l.b,d=l.c,f=l.d,p=l.a;return h=h<<25^h>>>7^d,d=d-f|0,f=f<<24^f>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new s(o),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&i(u,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=a:this.tychei=a})(Yl,n)})(cB);var Vke=cB.exports,iee={exports:{}};const jke={},Uke=Object.freeze(Object.defineProperty({__proto__:null,default:jke},Symbol.toStringTag,{value:"Module"})),Wke=Kle(Uke);(function(n){(function(e,t,r){var s=256,i=6,a=52,o="random",l=r.pow(s,i),c=r.pow(2,a),u=c*2,h=s-1,d;function f(w,C,I){var T=[];C=C==!0?{entropy:!0}:C||{};var E=g(y(C.entropy?[w,b(t)]:w??v(),3),T),A=new p(T),N=function(){for(var F=A.g(i),_=l,D=0;F<c;)F=(F+D)*s,_*=s,D=A.g(1);for(;F>=u;)F/=2,_/=2,D>>>=1;return(F+D)/_};return N.int32=function(){return A.g(4)|0},N.quick=function(){return A.g(4)/4294967296},N.double=N,g(b(A.S),t),(C.pass||I||function(F,_,D,R){return R&&(R.S&&m(R,A),F.state=function(){return m(A,{})}),D?(r[o]=F,_):F})(N,E,"global"in C?C.global:this==r,C.state)}function p(w){var C,I=w.length,T=this,E=0,A=T.i=T.j=0,N=T.S=[];for(I||(w=[I++]);E<s;)N[E]=E++;for(E=0;E<s;E++)N[E]=N[A=h&A+w[E%I]+(C=N[E])],N[A]=C;(T.g=function(F){for(var _,D=0,R=T.i,B=T.j,z=T.S;F--;)_=z[R=h&R+1],D=D*s+z[h&(z[R]=z[B=h&B+_])+(z[B]=_)];return T.i=R,T.j=B,D})(s)}function m(w,C){return C.i=w.i,C.j=w.j,C.S=w.S.slice(),C}function y(w,C){var I=[],T=typeof w,E;if(C&&T=="object")for(E in w)try{I.push(y(w[E],C-1))}catch{}return I.length?I:T=="string"?w:w+"\0"}function g(w,C){for(var I=w+"",T,E=0;E<I.length;)C[h&E]=h&(T^=C[h&E]*19)+I.charCodeAt(E++);return b(C)}function v(){try{var w;return d&&(w=d.randomBytes)?w=w(s):(w=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(w)),b(w)}catch{var C=e.navigator,I=C&&C.plugins;return[+new Date,e,I,e.screen,b(t)]}}function b(w){return String.fromCharCode.apply(0,w)}if(g(r.random(),t),n.exports){n.exports=f;try{d=Wke}catch{}}else r["seed"+o]=f})(typeof self<"u"?self:Yl,[],Math)})(iee);var Gke=iee.exports,Hke=Lke,qke=Mke,Kke=$ke,Xke=zke,Yke=Bke,Zke=Vke,v0=Gke;v0.alea=Hke;v0.xor128=qke;v0.xorwow=Kke;v0.xorshift7=Xke;v0.xor4096=Yke;v0.tychei=Zke;var nF=v0;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qke=.001,aee=.1;function Jke(n,e,t){return t==null&&(t=uB()),u4(n,e,(r,s)=>hB(r,s,t))}function uB(){return ne.backend.floatPrecision()===32?Qke:aee}function u4(n,e,t){let r=!0;if((ws(n)||ws(e))&&(r=!1),ws(n)&&ws(e)&&(r=!0),r){const a=n.constructor.name,o=e.constructor.name;if(a!==o)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${o}`)}if(Array.isArray(n)&&Array.isArray(e)){const a=xu(n),o=xu(e);if(!Qt(a,o))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${o}]`)}const s=ws(n)?n:vu(n),i=ws(e)?e:vu(e);if(s.length!==i.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${i.length}.
Actual:   ${s}.
Expected: ${i}.`);for(let a=0;a<i.length;++a){const o=s[a],l=i[a];if(!t(o,l))throw new Error(`Arrays differ: actual[${a}] = ${o}, expected[${a}] = ${l}.
Actual:   ${s}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function eCe(n,e){n().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function tCe(n,e){const t=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return nu(n)||nu(n[0])||nu(e)||nu(e[0])?u4(n,t,(r,s)=>r==s):u4(n,e,(r,s)=>hB(r,s,0))}function nCe(n,e,t){if(t==null&&(t=uB()),!hB(n,e,t))throw new Error(`Numbers differ: actual === ${n}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function hB(n,e,t){return!isFinite(n)&&!isFinite(e)?!0:!(isNaN(n)||isNaN(e)||Math.abs(n-e)>t)}function rCe(n,e,t){for(let r=0;r<n.length;r++)if(n[r]<e||n[r]>t)throw new Error(`Value out of range:${n[r]} low: ${e}, high: ${t}`)}function sCe(n,e){const t=new Float32Array(n),r=new Float32Array(e);if(t.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${t.length}`);for(let s=0;s<r.length;s++)if(t[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${t[s]} instead`)}function oee(n){for(let e=0;e<n.length;e++){const t=n[e];Array.isArray(t)?oee(t):n[e]=lu(t)}return n}function iCe(n){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(n),new Promise(t=>{e.addEventListener("loadeddata",r=>t(e)),e.load()})}async function aCe(n){await n.play(),"requestVideoFrameCallback"in n&&await new Promise(e=>{n.requestVideoFrameCallback(e)})}const oCe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:aee,createVideoElement:iCe,encodeStrings:oee,expectArrayBuffersEqual:sCe,expectArraysClose:Jke,expectArraysEqual:tCe,expectNumbersClose:nCe,expectPromiseToFail:eCe,expectValuesInRange:rCe,play:aCe,testEpsilon:uB},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dB{constructor(e,t,r,s,i){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=i||Math.random();this.random=nF.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,t,r=!1;for(;!r;){let s,i,a;do s=2*this.random()-1,i=2*this.random()-1,a=s*s+i*i;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*s*o,t=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class lCe{constructor(e,t,r,s){this.alpha=e,this.beta=1/t,this.dtype=r;const i=s||Math.random();this.randu=nF.alea(i.toString()),this.randn=new dB(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,s,i,a;for(;;){do s=this.randn.nextValue(),a=1+this.c*s;while(a<=0);if(a*=a*a,e=s*s,t=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<t||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class cCe{constructor(e=0,t=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=nF.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(n,e,t=1,r="float32",s){if(Wa(n),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new lCe(e,t,r,s),a=Vt(n,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const lee=re({randomGamma_:uCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(n,e=0,t=1,r,s){if(Wa(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new dB(e,t,r,!1,s),a=Vt(n,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const rF=re({randomNormal_:hCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return rF(n,0,1,e,t)}const cee=re({randomStandardNormal_:dCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(n,e=0,t=1,r="float32",s){Wa(n);const i=Vt(n,r),a=new cCe(e,t,null,s);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const bp=re({randomUniform_:fCe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pCe(n,e,t,r){return bp(n,e,t,"int32",r)}const uee=re({randomUniformInt_:pCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oh(n,e,t=1,r="float32"){if(t===0)throw new Error("Cannot have a step of zero");const s={start:n,stop:e,step:t,dtype:r};return ne.runKernel(bD,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCe(n){const t={input:G(n,"input","real")};return ne.runKernel(wD,t)}const gx=re({real_:mCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gCe(n){const t={x:G(n,"x","reciprocal")};return ne.runKernel(xb,t)}const fB=re({reciprocal_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yCe(n){const t={x:G(n,"x","relu")};return ne.runKernel(bb,t)}const yc=re({relu_:yCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCe(n){const t={x:G(n,"x","relu6")};return ne.runKernel(wb,t)}const sF=re({relu6_:vCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xCe(n,e){const r={x:G(n,"x","reverse")},s={dims:e};return ne.runKernel(YC,r,s)}const _o=re({reverse_:xCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bCe(n){const e=G(n,"x","reverse");return V(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),_o(e,0)}const hee=re({reverse1d_:bCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wCe(n,e){const t=G(n,"x","reverse");return V(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),_o(t,e)}const dee=re({reverse2d_:wCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SCe(n,e){const t=G(n,"x","reverse");return V(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),_o(t,e)}const fee=re({reverse3d_:SCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kCe(n,e){const t=G(n,"x","reverse");return V(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),_o(t,e)}const pee=re({reverse4d_:kCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CCe(n){const t={x:G(n,"x","round")};return ne.runKernel(Sb,t)}const iF=re({round_:CCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TCe(n){const t={x:G(n,"x","rsqrt","float32")};return ne.runKernel(kb,t)}const aF=re({rsqrt_:TCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ECe(n){const t={x:G(n,"x","selu")};return ne.runKernel(Cb,t)}const oF=re({selu_:ECe});function ICe(n,e,t,r,s,i=[1,1],a="NHWC"){const o=G(n,"x","separableConv2d"),l=G(e,"depthwiseFilter","separableConv2d"),c=G(t,"pointwiseFilter","separableConv2d");let u=o,h=!1;if(o.rank===3&&(h=!0,u=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),V(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const d=l.shape[2],f=l.shape[3];V(c.shape[2]===d*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*f}, but got ${c.shape[2]}.`);const p=$b(u,l,r,s,a,i),y=Ph(p,c,1,"valid",a);return h?ae(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const lF=re({separableConv2d_:ICe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ACe(n,e){const t=G(n,"x","setdiff1d"),r=G(e,"y","setdiff1d");V(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),V(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),V(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await t.data(),i=await r.data(),a=new Set(i);let o=0;for(let u=0;u<s.length;u++)a.has(s[u])||o++;const l=new Kr([o],t.dtype),c=new Kr([o],"int32");for(let u=0,h=0;u<s.length;u++)a.has(s[u])||(l.values[h]=s[u],c.values[h]=u,h++);return[l.toTensor(),c.toTensor()]}const mee=ACe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(n){const t={x:G(n,"x","sign")};return ne.runKernel(Ib,t)}const pB=re({sign_:NCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ce(n){const t={x:G(n,"x","sin","float32")};return ne.runKernel(Tb,t)}const cF=re({sin_:_Ce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RCe(n){const t={x:G(n,"x","sinh")};return ne.runKernel(Eb,t)}const uF=re({sinh_:RCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(n,e,t){const r=G(n,"x","slice1d");return V(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),nn(r,[e],[t])}const ST=re({slice1d_:DCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(n,e,t){const r=G(n,"x","slice2d");return V(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),nn(r,e,t)}const hF=re({slice2d_:FCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PCe(n,e,t){const r=G(n,"x","slice3d");return V(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),nn(r,e,t)}const kT=re({slice3d_:PCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OCe(n,e,t){const r=G(n,"x","slice4d");return V(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),nn(r,e,t)}const yx=re({slice4d_:OCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LCe(n,e=-1){const t=G(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const r={logits:t},s={dim:e};return ne.runKernel(nT,r,s)}const CT=re({softmax_:LCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(n){V(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return ne.runKernel(nD,e)}const TT=re({fft_:MCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(n){V(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return ne.runKernel(aD,e)}const vx=re({ifft_:$Ce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zCe(n){const e=n.shape[n.shape.length-1],t=n.size/e;let r;if(e<=2){const s=ae(n,[t,e]);r=vx(s)}else{const s=[t,2*(e-1)],i=ae(gx(n),[t,e]),a=ae(fT(n),[t,e]),o=_o(nn(i,[0,1],[t,e-2]),1),l=ie(_o(nn(a,[0,1],[t,e-2]),1),lt(-1)),c=Fr([i,o],1),u=Fr([a,l],1),h=ae(Fh(c,u),[s[0],s[1]]);r=vx(h)}if(r=gx(r),n.rank===3&&n.shape[0]!==0){const s=r,i=n.shape[0];r=ae(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const dF=re({irfft_:zCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BCe(n,e,t=0){const s={x:G(n,"x","split")},i={numOrSizeSplits:e,axis:t};return ne.runKernel(tT,s,i)}const ia=re({split_:BCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VCe(n,e){V(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const r=n.size/t;let s;if(e!=null&&e<t){const p=n.shape.map(y=>0),m=n.shape.map(y=>y);m[n.shape.length-1]=e,s=nn(n,p,m),t=e}else if(e!=null&&e>t){const p=n.shape.map(m=>m);p[n.shape.length-1]=e-t,s=Fr([n,qr(p)],n.shape.length-1),t=e}else s=n;const i=rn(s),a=ae(Fh(s,i),[r,t]),o=TT(a),l=Math.floor(t/2)+1,c=gx(o),u=fT(o),h=ia(c,[l,t-l],c.shape.length-1),d=ia(u,[l,t-l],u.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,ae(Fh(h[0],d[0]),f)}const ET=re({rfft_:VCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCe(n,e){let t=G(n,"a","squaredDifference"),r=G(e,"b","squaredDifference");[t,r]=yr(t,r),Nt(t.shape,r.shape);const s={a:t,b:r},i={};return ne.runKernel(Rb,s,i)}const fF=re({squaredDifference_:jCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UCe(n,e){const t=G(n,"x","squeeze","string_or_numeric");return ae(t,Xh(t.shape,e).newShape)}const Pa=re({squeeze_:UCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WCe(n,e=0){const t=US(n,"tensors","stack","string_or_numeric");V(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&V(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const r=t,s={axis:e};return ne.runKernel(UC,r,s)}const fa=re({stack_:WCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GCe(n,e=0){const r={x:G(n,"x","step")},s={alpha:e};return ne.runKernel(Lb,r,s)}const x0=re({step_:GCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCe(n,e,t,r,s=0,i=0,a=0,o=0,l=0){const u={x:G(n,"x","stridedSlice","string_or_numeric")},h={begin:e,end:t,strides:r,beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return ne.runKernel(FD,u,h)}const mB=re({stridedSlice_:HCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCe(n){const t={x:G(n,"x","tan","float32")};return ne.runKernel(Fb,t)}const gB=re({tan_:qCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function di(n,e){h0(n);const t=xu(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return gp(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vy(n,e,t){if(h0(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=xu(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return gp(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yB(n,e,t){if(h0(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=xu(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return gp(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gee(n,e,t){if(h0(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=xu(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return gp(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(n,e,t){if(h0(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=xu(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return gp(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vee(n,e,t){if(h0(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=xu(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,gp(n,e,r,t)}function vB(n,e,t){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${s}.`;if(t.rank<s)throw new Error(i+` update.rank < ${s}. `);if(n.length<r+(t.rank-s))throw new Error(i+` Output shape length < ${r+(t.rank-s)}`);if(t.rank!==s+n.length-r)throw new Error(i+` update.rank != ${s+n.length-r}`);for(let a=0;a<s;++a)if(t.shape[a]!==e.shape[a])throw new Error(i+` updates.shape[${a}] (${t.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<t.rank-s;++a)if(t.shape[a+s]!==n[a+r])throw new Error(i+` updates.shape[${a+s}] (${t.shape[a+s]}) != shape[${a+s}] (${n[a+s]})`)}function pF(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}vB(t,e,n)}function wp(n,e,t){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=t.length;let a=1;for(let h=s;h<i;++h)a*=t[h];const o=s<1?1:s,l=Se(e.shape)/o,c=[...ht(t.slice(0,s)),1],u=Se(t);return{sliceRank:s,numUpdates:l,sliceSize:a,strides:c,outputSize:u}}const KCe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:wp,validateInput:pF,validateUpdateShape:vB},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XCe(n,e,t){const r=G(n,"tensor","tensorScatterupdate"),s=G(e,"indices","tensorScatterupdate","int32"),i=G(t,"updates","tensorScatterupdate");if(pF(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const a={tensor:r,indices:s,updates:i},o={};return ne.runKernel(TD,a,o)}const xee=re({tensorScatterUpdate_:XCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YCe(n,e=1,t=!0){const r=G(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},a={k:e,sorted:t},[o,l]=ne.runKernel(MD,i,a);return{values:o,indices:l}}const xB=re({topk_:YCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZCe(n,e=0,t=1,r,s){if(Wa(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new dB(e,t,r,!0,s),a=Vt(n,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const mF=re({truncatedNormal_:ZCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QCe(n,e=0){const t=G(n,"x","unique","string_or_numeric");V(t.rank>0,()=>"The input tensor must be at least 1D");const r={x:t},s={axis:e},[i,a]=ne.runKernel(zD,r,s);return{values:i,indices:a}}const bB=re({unique_:QCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JCe(n,e,t){const r=G(n,"x","unsortedSegmentSum"),s=G(e,"segmentIds","unsortedSegmentSum","int32");V(Lg(t),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},a={numSegments:t};return ne.runKernel(iT,i,a)}const gF=re({unsortedSegmentSum_:JCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(n,e=0){const t=G(n,"x","unstack","string_or_numeric");V(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const r={value:t},s={axis:e};return ne.runKernel(sT,r,s)}const Ro=re({unstack_:eTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(n,e){return tF(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wB(n,e=!0,t,r){return ne.makeVariable(n,e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yF(n,e){const t=[];for(let i=0;i<e.length;i++)e[i]&&t.push(i);const r=Vt(n,"int32"),s=Vt([t.length,n.length],"int32");for(let i=0;i<t.length;i++){const a=r.indexToLoc(t[i]),o=i*n.length;s.values.set(a,o)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tTe(n){const e=G(n,"condition","whereAsync","bool"),t=await e.data(),r=yF(e.shape,t);return n!==e&&e.dispose(),r}const SB=tTe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nTe(n,e,t){const r=G(n,"tensor","boolMask"),s=G(e,"mask","boolMask","bool"),i=t??0,a=s.rank,o=r.shape;V(a>0,()=>"mask cannot be scalar"),Ys(o.slice(i,i+a),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+a;m++)l*=o[m];const c=o.slice(0,i).concat([l],o.slice(i+a)),u=ae(r,c),h=ae(s,[-1]),d=await SB(h),f=Pa(d,[1]),p=jb(u,f,i);return n!==r&&r.dispose(),e!==s&&s.dispose(),f.dispose(),u.dispose(),h.dispose(),d.dispose(),p}const wee=nTe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(n,e,t){const r=G(n,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),V(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{V(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?he(()=>{let a=gx(r),o=fT(r);return a=ne.runKernel(yg,{x:a},i),o=ne.runKernel(yg,{x:o},i),t&&(o=Kn(o)),Fh(a,o)}):ne.runKernel(yg,s,i)}const tn=re({transpose_:rTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(n,e,t,r,s=!0){const i=G(n,"v","movingAverage"),a=G(e,"x","movingAverage"),o=G(t,"decay","movingAverage");yJ(i,a),V(Qt(i.shape,a.shape),()=>"Shape mismatch in v and x");const l=lt(1),c=Ye(l,o);let u=ie(Ye(a,i),c);if(s){V(r!=null,()=>"When using zeroDebias: true, step is required.");const h=G(r,"step","movingAverage");u=at(u,Ye(l,bu(o,h)))}return Re(i,u)}const See=re({movingAverage_:sTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(n,e,t){Wa(t);const r=G(n,"indices","scatterND","int32"),s=G(e,"updates","scatterND");pF(s,r,t);const i={indices:r,updates:s},a={shape:t};return ne.runKernel(CD,i,a)}const kee=re({scatterND_:iTe});function aTe(n,e,t,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const s=n.rank>0?n.shape[0]:1,i=n.rank>1?n.shape[1]:1;if(t.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${i}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(n,e,t,r=0){Wa(t);const s=G(n,"sparseIndices","sparseToDense","int32"),i=G(e,"sparseValues","sparseToDense","string_or_numeric"),a=G(r,"defaultValue","sparseToDense",i.dtype);aTe(s,i,t,a);const o={sparseIndices:s,sparseValues:i,defaultValue:a},l={outputShape:t};return ne.runKernel(RD,o,l)}const Cee=re({sparseToDense_:oTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(n,e){const t=G(e,"indices","gatherND","int32"),s={params:G(n,"x","gatherND","string_or_numeric"),indices:t};return ne.runKernel(iD,s)}const Tee=re({gatherND_:lTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTe(n,e){if(e==null)return n.shape.slice();if(Qt(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let r=0;r<n.shape.length;r++)e[r]==null&&n.shape[r]!=null?t.push(n.shape[r]):t.push(e[r]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(n,e,t,r){const s=G(n,"x","dropout");if(V(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),V(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof Sn?s.clone():s;const i=cTe(s,t),a=1-e,o=at(Vb(Re(bp(i,0,1,"float32",r),a)),a);return ie(s,o)}const kB=re({dropout_:uTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CB(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function vF(n,e,t){const r=1-n%2,s=new Float32Array(n);for(let i=0;i<n;++i){const a=2*Math.PI*i/(n+r-1);s[i]=e-t*Math.cos(a)}return di(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hTe(n,e,t=1){const r=G(n,"predictions","inTopK"),s=G(e,"targets","inTopK");V(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),V(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Ys(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];V(t>0&&t<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${t}`);const a=await r.data(),o=await s.data(),[l,c]=[a.length/i,i],u=_s("bool",l);for(let h=0;h<l;h++){const d=h*c,f=a.subarray(d,d+c),p=[];for(let m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort((m,y)=>y.value-m.value),u[h]=0;for(let m=0;m<t;m++)if(p[m].index===o[h]){u[h]=1;break}}return n!==r&&r.dispose(),e!==s&&s.dispose(),ko(u,s.shape,"bool")}const Eee=hTe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(n,e,t,r,s,i="NHWC",a){let o=n;n.rank===3&&(o=ae(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]])),V(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const c=i==="NHWC"?o.shape[3]:o.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];V(c===t[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${t[2]}.`),V(u===t[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${t[3]}).`),ji("conv2dDerFilter",s,a);const h={x:o,dy:l},d={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,filterShape:t};return ne.runKernel(UR,h,d)}const TB=re({conv2DBackpropFilter_:dTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xF(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return ie(n,x0(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function bF(n,e){let t=e;const r=Yr(n.shape,e.shape);return r.length>0&&(t=rt(t,r)),ae(t,n.shape)}function wF(n,e,t,r){if(e==="linear")return n;if(e==="relu")return yc(n);if(e==="elu")return zb(n);if(e==="relu6")return sF(n);if(e==="prelu")return wT(n,t);if(e==="leakyrelu")return pT(n,r);if(e==="sigmoid")return Co(n);throw new Error(`Unknown fused activation ${e}.`)}const SF=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe({x:n,filter:e,strides:t,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",SF(ne.state.gradientDepth,l)===!1){V(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let I=Ph(n,e,t,r,s,i,a);return o!=null&&(I=Re(I,o)),wF(I,l,c,u)}const h=G(n,"x","conv2d","float32"),d=G(e,"filter","conv2d","float32");let f=h,p=!1;h.rank===3&&(p=!0,f=ae(h,[1,h.shape[0],h.shape[1],h.shape[2]])),V(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),V(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),ji("fused conv2d",r,a);const m=s==="NHWC"?f.shape[3]:f.shape[1];V(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),V(Zs(t,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`);const y=Ds(f.shape,d.shape,t,i,r,a);let g;o!=null&&(g=G(o,"bias","fused conv2d"),[g]=yr(g,h),s==="NHWC"?Nt(y.outShape,g.shape):(V(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),V(g.shape.length===0||g.shape[0]===y.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let v;if(c!=null){const I=c.shape;if(V(I.length<=1||I.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${I.length}.`),I.length===1)V(I[0]===1||I[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the number of output channels (${y.outChannels}).`);else if(I.length===3)try{Nt(I,y.outShape)}catch{const E=`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(E)}v=G(c,"prelu weights","fused conv2d")}const b=(I,T)=>{V(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[E,A,N,F]=T,_=xF(I,N,l);V(qf(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const D=Lz(A.shape,_,E,t,r),R=TB(A,_,E.shape,t,r),B=[D,R];if(F!=null){const z=bF(F,_);B.push(z)}return B},w={x:f,filter:d,bias:g,preluActivationWeights:v},C={strides:t,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?wu((T,E,A)=>{let N=ne.runKernel($S,w,C);return A([E,T,N]),p&&(N=ae(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:b}})(f,d):wu((T,E,A,N)=>{let F=ne.runKernel($S,w,C);return N([E,T,F,A]),p&&(F=ae(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:b}})(f,d,g)}const Iee=re({fusedConv2d_:fTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(n,e,t,r,s,i=[1,1],a){let o=n;n.rank===3&&(o=ae(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},u={strides:r,pad:s,dimRoundingMode:a,dilations:i,filterShape:t};return ne.runKernel(YR,c,u)}const Aee=re({depthwiseConv2dNativeBackpropFilter_:pTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(n,e,t,r,s,i=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:t},u={strides:r,pad:s,dimRoundingMode:a,dilations:i,inputShape:n},h=ne.runKernel(ZR,c,u);return l?ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Nee=re({depthwiseConv2dNativeBackpropInput_:mTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe({x:n,filter:e,strides:t,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(SF(ne.state.gradientDepth,l)===!1){let C=$b(n,e,t,r,s,i,a);return o!=null&&(C=Re(C,o)),wF(C,l,c,u)}const h=G(n,"x","depthwiseConv2d","float32"),d=G(e,"filter","depthwiseConv2d","float32");let f=h,p=!1;h.rank===3&&(p=!0,f=ae(h,[1,h.shape[0],h.shape[1],h.shape[2]])),V(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),V(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),V(f.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),i==null&&(i=[1,1]),V(Zs(t,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),ji("fused depthwiseConv2d",r,a);const m=Ds(f.shape,d.shape,t,i,r,a,!0);let y;o!=null&&(y=G(o,"bias","fused conv2d"),[y]=yr(y,h),Nt(m.outShape,y.shape));let g;c!=null&&(g=G(c,"prelu weights","fused depthwiseConv2d"));const v=(C,I)=>{V(qf(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[T,E,A,N]=I,F=xF(C,A,l),_=Nee(E.shape,F,T,t,r,i,a),D=Aee(E,F,T.shape,t,r,i,a);if(N!=null){const R=bF(y,F);return[_,D,R]}return[_,D]},b={x:f,filter:d,bias:y,preluActivationWeights:g},w={strides:t,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?wu((I,T,E)=>{let A=ne.runKernel(zS,b,w);return E([T,I,A]),p&&(A=ae(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:v}})(f,d):wu((I,T,E,A)=>{let N=ne.runKernel(zS,b,w);return A([T,I,N,E]),p&&(N=ae(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:v}})(f,d,y)}const yTe=re({fusedDepthwiseConv2d_:gTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe({a:n,b:e,transposeA:t=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(SF(ne.state.gradientDepth,i)===!1){let F=zt(n,e,t,r);return s!=null&&(F=Re(F,s)),wF(F,i,a,o)}let l=G(n,"a","fused matMul"),c=G(e,"b","fused matMul");[l,c]=yr(l,c);const u=t?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],d=t?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),m=c.shape.slice(0,-2),y=Se(p),g=Se(m);V(u===h,()=>`Error in fused matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${t} and transposeB=${r} must match.`);const b=Nt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([d,f]),w=t?ae(l,[y,u,d]):ae(l,[y,d,u]),C=r?ae(c,[g,f,h]):ae(c,[g,h,f]);let I;s!=null&&(I=G(s,"bias","fused matMul"),[I]=yr(I,l),Nt(b,I.shape));let T;a!=null&&(T=G(a,"prelu weights","fused matMul"));const E=(F,_)=>{const[D,R,B,z]=_,W=xF(ae(F,B.shape),B,i);let K,H;if(!t&&!r?(K=zt(W,R,!1,!0),H=zt(D,W,!0,!1)):!t&&r?(K=zt(W,R,!1,!1),H=zt(W,D,!0,!1)):t&&!r?(K=zt(R,W,!1,!0),H=zt(D,W,!1,!1)):(K=zt(R,W,!0,!0),H=zt(W,D,!0,!0)),s!=null){const se=bF(z,W);return[K,H,se]}else return[K,H]},A={a:w,b:C,bias:I,preluActivationWeights:T},N={transposeA:t,transposeB:r,activation:i,leakyreluAlpha:o};return s==null?wu((_,D,R)=>{const B=ne.runKernel(MS,A,N);return R([_,D,B]),{value:ae(B,b),gradFunc:E}})(w,C):wu((_,D,R,B)=>{const z=ne.runKernel(MS,A,N);return B([_,D,z,R]),{value:ae(z,b),gradFunc:E}})(w,C,I)}const h4=re({fusedMatMul_:vTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ee=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Iee,depthwiseConv2d:yTe,matMul:h4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(n){return vF(n,.54,.46)}const bTe=re({hammingWindow_:xTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(n){return vF(n,.5,.5)}const Ree=re({hannWindow_:wTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STe(n,e,t,r=!1,s=0){let i=0;const a=[];for(;i+e<=n.size;)a.push(nn(n,i,e)),i+=t;if(r)for(;i<n.size;){const o=i+e-n.size,l=Fr([nn(n,i,e-o),g0([o],s)]);a.push(l),i+=t}return a.length===0?Vy([],[0,e]):ae(Fr(a),[a.length,e])}const Dee=re({frame_:STe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(n,e,t,r,s=Ree){r==null&&(r=CB(e));const i=Dee(n,e,t),a=ie(i,s(e));return ET(a,r)}const CTe=re({stft_:kTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(n,e,t,r,s="bilinear",i=0){const a=G(n,"image","cropAndResize"),o=G(e,"boxes","cropAndResize","float32"),l=G(t,"boxInd","cropAndResize","int32"),c=o.shape[0];V(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),V(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),V(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),V(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),V(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),V(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:a,boxes:o,boxInd:l},h={method:s,extrapolationValue:i,cropSize:r};return ne.runKernel(qR,u,h)}const ETe=re({cropAndResize_:TTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ITe(n){const e=G(n,"image","flipLeftRight","float32");V(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return ne.runKernel(sD,t,{})}const ATe=re({flipLeftRight_:ITe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(n){const e=G(n,"image","grayscaleToRGB"),t=e.rank-1,r=e.shape[t];V(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),V(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,t),s[t]=3,vo(e,s)}const _Te=re({grayscaleToRGB_:NTe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(n){const e=G(n,"image","RGBToGrayscale"),t=e.rank-1,r=e.shape[t];V(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),V(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Be(e,"float32"),a=di([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Kp("ij,j->i",i,a);break;case 3:o=Kp("ijk,k->ij",i,a);break;case 4:o=Kp("ijkl,l->ijk",i,a);break;case 5:o=Kp("ijklm,m->ijkl",i,a);break;case 6:o=Kp("ijklmn,n->ijklm",i,a);break;default:throw new Error("Not a valid tensor rank.")}return o=Hr(o,-1),Be(o,s)}const DTe=re({rgbToGrayscale_:RTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(n,e,t=0,r=.5){const s=G(n,"image","rotateWithOffset","float32");V(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},a={radians:e,fillValue:t,center:r};return ne.runKernel(BD,i,a)}const PTe=re({rotateWithOffset_:FTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ub(n,e,t,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const a=n.shape[0];return t=Math.min(t,a),V(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),V(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),V(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),V(e.rank===1,()=>"scores must be a 1D tensor"),V(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),V(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY){const i=G(n,"boxes","nonMaxSuppression","float32"),a=G(e,"scores","nonMaxSuppression","float32"),o=Ub(i,a,t,r,s);t=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:t,iouThreshold:r,scoreThreshold:s};return ne.runKernel(pD,{boxes:i,scores:a},l)}const LTe=re({nonMaxSuppression_:OTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(n,e,t){const r=$Te(n,e,t),s=r<0?-(r+1):r;n.splice(s,0,e)}function $Te(n,e,t){return BTe(n,e,t||zTe)}function zTe(n,e){return n>e?1:n<e?-1:0}function BTe(n,e,t){let r=0,s=n.length,i=0,a=!1;for(;r<s;){i=r+(s-r>>>1);const o=t(e,n[i]);o>0?r=i+1:(s=i,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kF(n,e,t,r,s){return EB(n,e,t,r,s,0)}function CF(n,e,t,r,s,i){return EB(n,e,t,r,s,0,!1,i,!0)}function TF(n,e,t,r,s,i){return EB(n,e,t,r,s,i,!0)}function EB(n,e,t,r,s,i,a=!1,o=!1,l=!1){const c=[];for(let y=0;y<e.length;y++)e[y]>s&&c.push({score:e[y],boxIndex:y,suppressBeginIndex:0});c.sort(hG);const u=i>0?-.5/i:0,h=[],d=[];for(;h.length<t&&c.length>0;){const y=c.pop(),{score:g,boxIndex:v,suppressBeginIndex:b}=y;if(g<s)break;let w=!1;for(let C=h.length-1;C>=b;--C){const I=VTe(n,v,h[C]);if(I>=r){w=!0;break}if(y.score=y.score*jTe(r,u,I),y.score<=s)break}y.suppressBeginIndex=h.length,w||(y.score===g?(h.push(v),d.push(y.score)):y.score>s&&MTe(c,y,hG))}const f=h.length,p=t-f;o&&p>0&&(h.push(...new Array(p).fill(0)),d.push(...new Array(p).fill(0)));const m={selectedIndices:h};return a&&(m.selectedScores=d),l&&(m.validOutputs=f),m}function VTe(n,e,t){const r=n.subarray(e*4,e*4+4),s=n.subarray(t*4,t*4+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),f=(o-i)*(l-a),p=(h-c)*(d-u);if(f<=0||p<=0)return 0;const m=Math.max(i,c),y=Math.max(a,u),g=Math.min(o,h),v=Math.min(l,d),b=Math.max(g-m,0)*Math.max(v-y,0);return b/(f+p-b)}function jTe(n,e,t){const r=Math.exp(e*t*t);return t<=n?r:0}function hG(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function UTe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY){const i=G(n,"boxes","nonMaxSuppressionAsync"),a=G(e,"scores","nonMaxSuppressionAsync"),o=Ub(i,a,t,r,s);t=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([i.data(),a.data()]),c=l[0],u=l[1],{selectedIndices:h}=kF(c,u,t,r,s);return i!==n&&i.dispose(),a!==e&&a.dispose(),di(h,"int32")}const WTe=UTe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=G(n,"boxes","nonMaxSuppression"),o=G(e,"scores","nonMaxSuppression"),l=Ub(a,o,t,r,s,i);t=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:a,scores:o},u={maxOutputSize:t,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},h=ne.runKernel(gD,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}const HTe=re({nonMaxSuppressionWithScore_:GTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function qTe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=G(n,"boxes","nonMaxSuppressionAsync"),o=G(e,"scores","nonMaxSuppressionAsync"),l=Ub(a,o,t,r,s,i);t=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([a.data(),o.data()]),u=c[0],h=c[1],{selectedIndices:d,selectedScores:f}=TF(u,h,t,r,s,i);return a!==n&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:di(d,"int32"),selectedScores:di(f)}}const KTe=qTe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=G(n,"boxes","nonMaxSuppression"),o=G(e,"scores","nonMaxSuppression"),l=Ub(a,o,t,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,d={boxes:a,scores:o},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:h,padToMaxOutputSize:i},p=ne.runKernel(mD,d,f);return{selectedIndices:p[0],validOutputs:p[1]}}const YTe=re({nonMaxSuppressionPadded_:XTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ZTe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=G(n,"boxes","nonMaxSuppressionAsync"),o=G(e,"scores","nonMaxSuppressionAsync"),l=Ub(a,o,t,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[d,f]=await Promise.all([a.data(),o.data()]),{selectedIndices:p,validOutputs:m}=CF(d,f,c,u,h,i);return a!==n&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:di(p,"int32"),validOutputs:lt(m,"int32")}}const QTe=ZTe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(n,e,t=!1,r=!1){const s=G(n,"images","resizeBilinear");V(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),V(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),V(r===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:t,halfPixelCenters:r,size:e},c=ne.runKernel(XC,o,l);return a?ae(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Fee=re({resizeBilinear_:JTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(n,e,t=!1,r=!1){const s=G(n,"images","resizeNearestNeighbor");V(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),V(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),V(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(r===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:t,halfPixelCenters:r,size:e},c=ne.runKernel(KC,o,l);return a?ae(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Pee=re({resizeNearestNeighbor_:eEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(n,e="binary",t=!1,r=.5){const s=G(n,"image","threshold"),i=.2989,a=.587,o=.114,l=s.shape[0]*s.shape[1];let c=ie(di([r]),255),u,h,d,f;if(V(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),V(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),V(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),V(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,h,d]=ia(s,[1,1,1],-1);const y=ie(u,i),g=ie(h,a),v=ie(d,o);f=Re(Re(y,g),v)}else f=n;if(e==="otsu"){const y=_z(Be(iF(f),"int32"),ko([]),256);c=nEe(y,l)}const p=t?xp(f,c):Ui(f,c);return Be(ie(p,255),"int32")}function nEe(n,e){let t=di([-1]),r=di([0]),s=di([0]),i,a,o,l,c,u;for(let h=0;h<n.size-1;h++){i=nn(n,0,h+1),a=nn(n,h+1),c=at(rt(i),e),u=at(rt(a),e);const d=rt(ie(i,Oh(0,i.size)));o=at(d,rt(i));const f=g0(a.shape,i.size),p=Re(Oh(0,a.size),f),m=ie(a,p);l=at(rt(m),rt(a));const y=Ye(o,l),g=Ye(o,l),v=ie(c,u);s=ie(ie(v,y),g);const b=Ui(s,r);r=Ks(b,s,r),t=Ks(b,di([h]),t)}return t}const rEe=re({threshold_:tEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(n,e,t="nearest",r="constant",s=0,i){const a=G(n,"image","transform","float32"),o=G(e,"transforms","transform","float32");V(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),V(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),V(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:a,transforms:o},c={interpolation:t,fillMode:r,fillValue:s,outputShape:i};return ne.runKernel($D,l,c)}const iEe=re({transform_:sEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(n,e,t){const r=G(n,"a","bandPart");V(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,a]=r.shape.slice(-2);let o,l;typeof e=="number"?(V(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),V(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),o=G(e<0?i:e,"numLower","bandPart")):(V(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Ks(mx(e,0),i,Xf(e,i))),typeof t=="number"?(V(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),V(t<=a,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${a}).`),l=G(t<0?a:t,"numUpper","bandPart")):(V(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ks(mx(t,0),a,Xf(t,a)));const c=ae(Oh(0,i,1,"int32"),[-1,1]),u=Oh(0,a,1,"int32"),h=Ye(c,u),d=lc(xp(h,o),Jh(h,Kn(l))),f=qr([i,a],r.dtype);return ae(fa(Ro(ae(r,[-1,i,a])).map(p=>Ks(d,p,f))),s)}const oEe=re({bandPart_:aEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(n){let e;if(Array.isArray(n)){e=!1,V(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=n[0].shape[0];for(let i=1;i<n.length;++i)V(n[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[i].shape[0]} vs. ${s})`)}else e=!0,n=ia(n,n.shape[0],0).map(s=>Pa(s,[0]));V(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],r=n;for(let s=0;s<n.length;++s)t.push(ne.tidy(()=>{let i=r[s];if(s>0)for(let a=0;a<s;++a){const o=ie(rt(ie(t[a],i)),t[a]);i=Ye(i,o)}return at(i,Bb(i,"euclidean"))}));return e?fa(t,0):t}const cEe=re({gramSchmidt_:lEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(n,e=!1){if(V(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return dG(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((l,c)=>l*c),r=Ro(ae(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=dG(l,e);s.push(c),i.push(u)});const a=ae(fa(s,0),n.shape),o=ae(fa(i,0),n.shape);return[a,o]}}function dG(n,e=!1){return ne.tidy(()=>{V(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],r=n.shape[1];let s=ZD(t),i=cu(n);const a=Vy([[1]],[1,1]);let o=cu(a);const l=t>=r?r:t;for(let c=0;c<l;++c){const u=i,h=o,d=s;[o,i,s]=ne.tidy(()=>{const f=nn(i,[c,c],[t-c,1]),p=Bb(f),m=nn(i,[c,c],[1,1]),y=Ks(Ui(m,0),Vy([[-1]]),Vy([[1]])),g=Ye(m,ie(y,p)),v=at(f,g);v.shape[0]===1?o=cu(a):o=Fr([a,nn(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const b=Kn(at(zt(y,g),p)),w=nn(i,[c,0],[t-c,r]),C=ie(b,o),I=tn(o);if(c===0)i=Ye(w,zt(C,zt(I,w)));else{const A=Ye(w,zt(C,zt(I,w)));i=Fr([nn(i,[0,0],[c,r]),A],0)}const T=tn(C),E=nn(s,[0,c],[t,s.shape[1]-c]);if(c===0)s=Ye(E,zt(zt(E,o),T));else{const A=Ye(E,zt(zt(E,o),T));s=Fr([nn(s,[0,0],[t,c]),A],1)}return[o,i,s]}),qt([u,h,d])}return!e&&t>r&&(s=nn(s,[0,0],[t,r]),i=nn(i,[0,0],[r,r])),[s,i]})}const hEe=re({qr_:uEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Mi;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Mi||(Mi={}));function dEe(n,e,t=Mi.SUM_BY_NONZERO_WEIGHTS){const r=G(n,"losses","computeWeightedLoss");let s=null;e!=null&&(s=G(e,"weights","computeWeightedLoss"));const i=s==null?r:ie(r,s);if(t===Mi.NONE)return i;if(t===Mi.SUM)return rt(i);if(t===Mi.MEAN){if(s==null)return mr(i);{const a=r.size/s.size,o=at(rt(i),rt(s));return a>1?at(o,lt(a)):o}}if(t===Mi.SUM_BY_NONZERO_WEIGHTS){if(s==null)return at(rt(i),lt(r.size));{const a=ie(s,ea(r.shape)),o=Be(rt(jg(a,lt(0))),"float32");return at(rt(i),o)}}throw Error(`Unknown reduction: ${t}`)}const td=re({computeWeightedLoss_:dEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(n,e,t,r=Mi.SUM_BY_NONZERO_WEIGHTS){const s=G(n,"labels","absoluteDifference"),i=G(e,"predictions","absoluteDifference");let a=null;t!=null&&(a=G(t,"weights","absoluteDifference")),Ys(s.shape,i.shape,"Error in absoluteDifference: ");const o=Ur(Ye(s,i));return td(o,a,r)}const pEe=re({absoluteDifference_:fEe});function mEe(n,e,t,r,s=Mi.SUM_BY_NONZERO_WEIGHTS){const i=G(n,"labels","cosineDistance"),a=G(e,"predictions","cosineDistance");let o=null;r!=null&&(o=G(r,"weights","cosineDistance")),Ys(i.shape,a.shape,"Error in cosineDistance: ");const l=lt(1),c=Ye(l,rt(ie(i,a),t,!0));return td(c,o,s)}const gEe=re({cosineDistance_:mEe});function yEe(n,e,t,r=Mi.SUM_BY_NONZERO_WEIGHTS){let s=G(n,"labels","hingeLoss");const i=G(e,"predictions","hingeLoss");let a=null;t!=null&&(a=G(t,"weights","hingeLoss")),Ys(s.shape,i.shape,"Error in hingeLoss: ");const o=lt(1);s=Ye(ie(lt(2),s),o);const l=yc(Ye(o,ie(s,i)));return td(l,a,r)}const vEe=re({hingeLoss_:yEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(n,e,t,r=1,s=Mi.SUM_BY_NONZERO_WEIGHTS){const i=G(n,"labels","huberLoss"),a=G(e,"predictions","huberLoss");let o=null;t!=null&&(o=G(t,"weights","huberLoss")),Ys(i.shape,a.shape,"Error in huberLoss: ");const l=lt(r),c=Ur(Ye(a,i)),u=Xf(c,l),h=Ye(c,u),d=Re(ie(lt(.5),Mn(u)),ie(l,h));return td(d,o,s)}const bEe=re({huberLoss_:xEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(n,e,t,r=1e-7,s=Mi.SUM_BY_NONZERO_WEIGHTS){const i=G(n,"labels","logLoss"),a=G(e,"predictions","logLoss");let o=null;t!=null&&(o=G(t,"weights","logLoss")),Ys(i.shape,a.shape,"Error in logLoss: ");const l=lt(1),c=lt(r),u=Kn(ie(i,Ba(Re(a,c)))),h=ie(Ye(l,i),Ba(Re(Ye(l,a),c))),d=Ye(u,h);return td(d,o,s)}const SEe=re({logLoss_:wEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(n,e,t,r=Mi.SUM_BY_NONZERO_WEIGHTS){const s=G(n,"labels","meanSquaredError"),i=G(e,"predictions","meanSquaredError");let a=null;t!=null&&(a=G(t,"weights","meanSquaredError")),Ys(s.shape,i.shape,"Error in meanSquaredError: ");const o=fF(s,i);return td(o,a,r)}const CEe=re({meanSquaredError_:kEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEe(n,e){const t=G(n,"labels","sigmoidCrossEntropyWithLogits"),r=G(e,"logits","sigmoidCrossEntropyWithLogits");Ys(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=yc(r),i=ie(r,t),a=mT(da(Kn(Ur(r))));return Re(Ye(s,i),a)}function EEe(n,e,t,r=0,s=Mi.SUM_BY_NONZERO_WEIGHTS){let i=G(n,"multiClassLabels","sigmoidCrossEntropy");const a=G(e,"logits","sigmoidCrossEntropy");let o=null;if(t!=null&&(o=G(t,"weights","sigmoidCrossEntropy")),Ys(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=lt(r),u=lt(1),h=lt(.5);i=Re(ie(i,Ye(u,c)),ie(h,c))}const l=TEe(i,a);return td(l,o,s)}const IEe=re({sigmoidCrossEntropy_:EEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return wu((s,i,a)=>{const l=gT(i,[t],!0),c=Ye(Be(i,"float32"),l);a([s,c]);const u=Kn(ie(c,s));return{value:rt(u,[t]),gradFunc:(f,p)=>{const[m,y]=p,g=Pr(f.shape,[t]);return[ie(ae(f,g),Ye(Be(m,"float32"),da(y))),ie(ae(f,g),Ye(da(y),Be(m,"float32")))]}}})(n,e)}function NEe(n,e,t,r=0,s=Mi.SUM_BY_NONZERO_WEIGHTS){let i=G(n,"onehotLabels","softmaxCrossEntropy");const a=G(e,"logits","softmaxCrossEntropy");let o=null;if(t!=null&&(o=G(t,"weights","softmaxCrossEntropy")),Ys(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const c=lt(r),u=lt(1),h=lt(i.shape[1]);i=Re(ie(i,Ye(u,c)),at(c,h))}const l=AEe(i,a);return td(l,o,s)}const _Ee=re({softmaxCrossEntropy_:NEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(n,e,t,r){const s=G(n,"indices","sparseFillEmptyRows","int32"),i=G(e,"values","sparseFillEmptyRows"),a=G(t,"denseShape","sparseFillEmptyRows","int32"),o=G(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:s,values:i,denseShape:a,defaultValue:o},c=ne.runKernel(ID,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const DEe=re({sparseFillEmptyRows_:REe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(n,e,t){const r=G(n,"inputIndices","sparseReshape","int32"),s=G(e,"inputShape","sparseReshape","int32"),i=G(t,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const a={inputIndices:r,inputShape:s,newShape:i},o=ne.runKernel(AD,a);return{outputIndices:o[0],outputShape:o[1]}}const PEe=re({sparseReshape_:FEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(n,e,t){const r=G(n,"data","sparseSegmentMean"),s=G(e,"indices","sparseSegmentMean","int32"),i=G(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return ne.runKernel(ND,a)}const LEe=re({sparseSegmentMean_:OEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(n,e,t){const r=G(n,"data","sparseSegmentSum"),s=G(e,"indices","sparseSegmentSum","int32"),i=G(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return ne.runKernel(_D,a)}const $Ee=re({sparseSegmentSum_:MEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(n,e,t,r,s,i,a,o){const l=G(n,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=G(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:t,nGramWidths:r,leftPad:s,rightPad:i,padWidth:a,preserveShortSequences:o},h={data:l,dataSplits:c},d=ne.runKernel(PD,h,u);return{nGrams:d[0],nGramsSplits:d[1]}}const BEe=re({stringNGrams_:zEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEe(n,e,t=!0){const r=G(n,"input","stringSplit","string"),s=G(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:t},a={input:r,delimiter:s},o=ne.runKernel(OD,a,i);return{indices:o[0],values:o[1],shape:o[2]}}const jEe=re({stringSplit_:VEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(n,e){const t=G(n,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:t};return ne.runKernel(LD,s,r)}const WEe=re({stringToHashBucketFast_:UEe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(n,e,t,r=!0){const s=G(n,"input","staticRegexReplace","string"),i={pattern:e,rewrite:t,replaceGlobal:r};return ne.runKernel(rT,{x:s},i)}const HEe=re({staticRegexReplace_:GEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oee={fft:TT,ifft:vx,rfft:ET,irfft:dF},Lee={hammingWindow:bTe,hannWindow:Ree,frame:Dee,stft:CTe},Oa={flipLeftRight:ATe,grayscaleToRGB:_Te,resizeNearestNeighbor:Pee,resizeBilinear:Fee,rgbToGrayscale:DTe,rotateWithOffset:PTe,cropAndResize:ETe,nonMaxSuppression:LTe,nonMaxSuppressionAsync:WTe,nonMaxSuppressionWithScore:HTe,nonMaxSuppressionWithScoreAsync:KTe,nonMaxSuppressionPadded:YTe,nonMaxSuppressionPaddedAsync:QTe,threshold:rEe,transform:iEe},IB={bandPart:oEe,gramSchmidt:cEe,qr:hEe},Mee={absoluteDifference:pEe,computeWeightedLoss:td,cosineDistance:gEe,hingeLoss:vEe,huberLoss:bEe,logLoss:SEe,meanSquaredError:CEe,sigmoidCrossEntropy:IEe,softmaxCrossEntropy:_Ee},$ee={sparseFillEmptyRows:DEe,sparseReshape:PEe,sparseSegmentMean:LEe,sparseSegmentSum:$Ee},zee={stringNGrams:BEe,stringSplit:jEe,stringToHashBucketFast:WEe,staticRegexReplace:HEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qEe=new Map,d4=new Map;class b0{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class fo{constructor(){this.classNameMap={}}static getMap(){return fo.instance==null&&(fo.instance=new fo),fo.instance}static register(e){fo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Fe(n,e,t){V(n.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),V(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const r=t,s=e+">"+r;return fo.register(n),qEe.set(s,n),d4.set(n,s),n}function KEe(n){return d4.has(n)?d4.get(n):n.className}const XEe=Object.freeze(Object.defineProperty({__proto__:null,Serializable:b0,SerializationMap:fo,getRegisteredName:KEe,registerClass:Fe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nd extends b0{minimize(e,t=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:i[o.name]}));this.applyGradients(a)}else this.applyGradients(i);return qt(i),t?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return GJ(e,t)}dispose(){this.iterations_!=null&&qt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:lt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(nd,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AB extends nd{static get className(){return"Adadelta"}constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ne.registeredVariables[r],a=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:he(()=>rn(i).variable(a))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:he(()=>rn(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;he(()=>{const u=Re(ie(l,this.rho),ie(Mn(o),1-this.rho)),h=ie(at(Rs(Re(c,this.epsilon)),Rs(Re(l,this.epsilon))),o),d=Re(ie(c,this.rho),ie(Mn(h),1-this.rho));l.assign(u),c.assign(d);const f=Re(ie(h,-this.learningRate),i);i.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(qt(this.accumulatedGrads.map(e=>e.variable)),qt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NB extends nd{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ne.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:he(()=>g0(i.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[s].variable;he(()=>{const l=Re(o,Mn(a));o.assign(l);const c=Re(ie(at(a,Rs(Re(l,ne.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&qt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _B extends nd{static get className(){return"Adam"}constructor(e,t,r,s=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],he(()=>{this.accBeta1=lt(t).variable(),this.accBeta2=lt(r).variable()}),s==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);he(()=>{const r=Ye(1,this.accBeta1),s=Ye(1,this.accBeta2);t.forEach((i,a)=>{const o=ne.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:he(()=>rn(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:he(()=>rn(o).variable(l))});const c=Array.isArray(e)?e[a].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,h=this.accumulatedSecondMoment[a].variable,d=Re(ie(u,this.beta1),ie(c,1-this.beta1)),f=Re(ie(h,this.beta2),ie(Mn(c),1-this.beta2)),p=at(d,r),m=at(f,s);u.assign(d),h.assign(f);const y=Re(ie(at(p,Re(Rs(m),this.epsilon)),-this.learningRate),o);o.assign(y)}),this.accBeta1.assign(ie(this.accBeta1,this.beta1)),this.accBeta2.assign(ie(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&qt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&qt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),he(()=>{this.accBeta1.assign(bu(this.beta1,this.iterations_+1)),this.accBeta2.assign(bu(this.beta2,this.iterations_+1))});const t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RB extends nd{static get className(){return"Adamax"}constructor(e,t,r,s=null,i=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],he(()=>{this.iteration=lt(0).variable(),this.accBeta1=lt(t).variable()}),s==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);he(()=>{const r=Ye(1,this.accBeta1),s=at(-this.learningRate,Re(ie(this.iteration,this.decay),1));t.forEach((i,a)=>{const o=ne.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:rn(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:rn(o).variable(l)});const c=Array.isArray(e)?e[a].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,h=this.accumulatedWeightedInfNorm[a].variable,d=Re(ie(u,this.beta1),ie(c,1-this.beta1)),f=ie(h,this.beta2),p=Ur(c),m=Iu(f,p);u.assign(d),h.assign(m);const y=Re(ie(at(s,r),at(d,Re(m,this.epsilon))),o);o.assign(y)}),this.iteration.assign(Re(this.iteration,1)),this.accBeta1.assign(ie(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&qt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&qt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EF extends nd{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=ne.registeredVariables[r];he(()=>{const o=Re(ie(this.c,i),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=ss(lt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DB extends EF{static get className(){return"Momentum"}constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=lt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ne.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:he(()=>rn(i).variable(!1))});const a=this.accumulations[s].variable,o=Array.isArray(e)?e[s].tensor:e[r];o!=null&&he(()=>{let l;const c=Re(ie(this.m,a),o);this.useNesterov?l=Re(ie(this.c,Re(o,ie(c,this.m))),i):l=Re(ie(this.c,c),i),a.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&qt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FB extends nd{static get className(){return"RMSProp"}constructor(e,t=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=ne.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ne.registeredVariables[r],a=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:he(()=>rn(i).variable(a))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:he(()=>rn(i).variable(a))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:he(()=>rn(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;he(()=>{const u=Re(ie(l,this.decay),ie(Mn(o),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[s].variable,d=Re(ie(h,this.decay),ie(o,1-this.decay)),f=at(ie(o,this.learningRate),Rs(Ye(u,Re(Mn(d),this.epsilon)))),p=Re(ie(c,this.momentum),f);l.assign(u),h.assign(d),c.assign(p);const m=Ye(i,p);i.assign(m)}else{const h=Re(ie(l,this.decay),ie(Mn(o),1-this.decay)),d=Re(ie(c,this.momentum),at(ie(o,this.learningRate),Rs(Re(h,this.epsilon))));l.assign(h),c.assign(d);const f=Ye(i,d);i.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&qt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&qt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&qt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YEe=[AB,NB,_B,RB,DB,FB,EF];function ZEe(){for(const n of YEe)Fe(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QEe="model",JEe=".json",eIe=".weights.bin";function fG(n){return new Promise(e=>setTimeout(e)).then(n)}class Wg{constructor(e){if(!ye().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Wg.URL_SCHEME)&&(e=e.slice(Wg.URL_SCHEME.length)),(e==null||e.length===0)&&(e=QEe),this.modelJsonFileName=e+JEe,this.weightDataFileName=e+eIe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=gc.join(e.weightData),r=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=TJ(e,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=a,await fG(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await fG(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:lT(e)}}}}Wg.URL_SCHEME="downloads://";class tIe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),a=i.modelTopology;if(a==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}const l=mz(i,c=>this.loadWeights(c));e(l)},r.onerror=s=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const t=[],r=[];for(const a of e)t.push(...a.weights),r.push(...a.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(a=>this.loadWeightsFile(a,s[a]));return Promise.all(i).then(a=>[t,a])}loadWeightsFile(e,t){return new Promise((r,s)=>{const i=new FileReader;i.onload=a=>{const o=a.target.result;r(o)},i.onerror=a=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map(i=>uG(i.name)),s={};for(const i of e)i.paths.forEach(a=>{const o=uG(a);if(t.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);s[a]=this.weightsFiles[r.indexOf(o)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const nIe=n=>ye().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Wg.URL_SCHEME)?rIe(n.slice(Wg.URL_SCHEME.length)):null;dr.registerSaveRouter(nIe);function rIe(n="model"){return new Wg(n)}function sIe(n){return new tIe(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pG(n,e,t,r){a(n),t=t??0,r=r??1,o(t,r);let s=0;const i=l=>(l.then(c=>{const u=t+ ++s/n.length*(r-t);return e(u),c}),l);function a(l){V(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,c){V(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),V(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),V(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(n.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Bee(n,e){e==null&&(e={});const t=e.fetchFunc==null?ye().platform.fetch:e.fetchFunc,r=n.map(h=>t(h,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await pG(r,e.onProgress,0,.5)).map(h=>h.arrayBuffer());return e.onProgress==null?await Promise.all(o):await pG(o,e.onProgress,.5,1)}function iIe(n,e){var t;const r=e.fetchFunc==null?ye().platform.fetch:e.fetchFunc;let s=0,i;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async a=>{for(var o;s<n.length;){i||(i=(await r(n[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await i.read();if(l){s++,i=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,s/n.length);continue}a.enqueue(c);return}a.close()}})}async function aIe(n,e="",t,r){return Vee(a=>Bee(a,{requestInit:r}))(n,e,t)}function Vee(n){return async(e,t="",r)=>{const s=e.map(()=>!1),i={},a=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((f,p)=>{let m=0;f.weights.forEach(y=>{const g="quantization"in y?y.quantization.dtype:y.dtype,v=Mg[g]*Se(y.shape),b=()=>{s[p]=!0,i[p]==null&&(i[p]=[]),i[p].push({manifestEntry:y,groupOffset:m,sizeBytes:v})};r!=null?r.forEach((w,C)=>{w===y.name&&(b(),a[C]=!0)}):b(),o.push(y.name),m+=v})}),!a.every(f=>f)){const f=r.filter((p,m)=>!a[m]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=s.reduce((f,p,m)=>(p&&f.push(m),f),[]),c=[];l.forEach(f=>{e[f].paths.forEach(p=>{const m=t+(t.endsWith("/")?"":"/")+p;c.push(m)})});const u=await n(c),h={};let d=0;return l.forEach(f=>{const p=e[f].paths.length,m=new gc(u.slice(d,d+p));i[f].forEach(g=>{const v=m.slice(g.groupOffset,g.groupOffset+g.sizeBytes),b=wJ(v,[g.manifestEntry]);for(const w in b)h[w]=b[w]}),d+=p}),h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe="application/octet-stream",lIe="application/json";class PB{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(V(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=ye().platform.fetch,V(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&V(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=TJ(e,r);if(t.body.append("model.json",new Blob([JSON.stringify(s)],{type:lIe}),"model.json"),e.weightData!=null){const a=gc.join(e.weightData);t.body.append("model.weights.bin",new Blob([a],{type:oIe}),"model.weights.bin")}const i=await this.fetch(this.path,t);if(i.ok)return{modelArtifactsInfo:lT(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=t.modelTopology,s=t.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return mz(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),r=i4(e.weightsManifest),s=()=>iIe(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=cIe(t),i=this.weightPathPrefix||r,a=[],o=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(c)):a.push(i+c+s);return this.weightUrlConverter&&a.push(...await Promise.all(o)),a}async loadWeights(e){const t=await this.getWeightUrls(e),r=i4(e),s=await Bee(t,this.loadOptions);return[r,s]}}PB.URL_SCHEME_REGEX=/^https?:\/\//;function cIe(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),r=n.substring(0,e),s=t>e?n.substring(t):"";return[r+"/",s]}function f4(n){return n.match(PB.URL_SCHEME_REGEX)!=null}const jee=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(r=>f4(r)):t=f4(n),t)return OB(n,e)}return null};dr.registerSaveRouter(jee);dr.registerLoadRouter(jee);function OB(n,e){return new PB(n,e)}function uIe(n,e){return OB(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FO{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Uee{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class hIe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function dIe(n,e,t,r){const s=arguments;return new hIe(Wee(...s))}function Wee(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new FO(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new FO({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new FO({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))}function fIe(n){return new Uee(n)}function pIe(n){return new Uee(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LB=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:gc,browserFiles:sIe,browserHTTPRequest:uIe,concatenateArrayBuffers:CJ,copyModel:H1e,decodeWeights:wJ,decodeWeightsStream:kJ,encodeWeights:s4,fromMemory:dIe,fromMemorySync:Wee,getLoadHandlers:D1e,getModelArtifactsForJSON:mz,getModelArtifactsForJSONSync:EJ,getModelArtifactsInfoForJSON:lT,getSaveHandlers:IJ,getWeightSpecs:i4,http:OB,isHTTPScheme:f4,listModels:W1e,loadWeights:aIe,moveModel:q1e,registerLoadRouter:R1e,registerSaveRouter:_1e,removeModel:G1e,weightsLoaderFactory:Vee,withSaveHandler:fIe,withSaveHandlerSync:pIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(n,e,t){const r=G(n,"labels","confusionMatrix"),s=G(e,"predictions","confusionMatrix");V(t==null||t>0&&Number.isInteger(t),()=>`If provided, numClasses must be a positive integer, but got ${t}`),V(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),V(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),V(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),V(t>0&&Number.isInteger(t),()=>`numClasses is required to be a positive integer, but got ${t}`);const i=Ug(Be(r,"int32"),t),a=Ug(Be(s,"int32"),t),o=tn(i),l=zt(o,a);return Be(l,"int32")}const gIe=re({confusionMatrix_:mIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yIe=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:gIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Pp,mG=!1;function Gee(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,s=!1,i=!1,a=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)i=!0;else if(n.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(VS(PN,ne.backendName)!=null){const p={pixels:n},m={numChannels:e};return ne.runKernel(PN,p,m)}const[c,u]=s?[n.videoWidth,n.videoHeight]:[n.width,n.height];let h;if(a)h=n.getContext("2d").getImageData(0,0,c,u).data;else if(r||t)h=n.data;else if(i||s||o){if(Pp==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Pp=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Pp=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Pp.canvas.width=c,Pp.canvas.height=u,Pp.drawImage(n,0,0,c,u),h=Pp.getImageData(0,0,c,u).data}let d;if(e===4)d=new Int32Array(h);else{const p=c*u;d=new Int32Array(p*e);for(let m=0;m<p;m++)for(let y=0;y<e;++y)d[m*e+y]=h[m*4+y]}return yB(d,[u,c,e],"int32")}function vIe(n){return n!=null&&n.data instanceof Uint8Array}function xIe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function bIe(n){return n!=null&&n.width!==0&&n.height!==0}function wIe(n){return xIe()&&!(n instanceof ImageBitmap)&&bIe(n)&&!vIe(n)}async function SIe(n,e=3){let t=null;if(ye().getBool("WRAP_TO_IMAGEBITMAP")&&wIe(n)){let r;try{r=await createImageBitmap(n,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===n.width&&r.height===n.height?t=r:t=n}else t=n;return Gee(t,e)}function Hee(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const e=n.rank===2?1:n.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}function kIe(n){const e=(n==null?void 0:n.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function CIe(n,e){let t=G(n,"img","toPixels");if(!(n instanceof Sn)){const c=t;t=Be(c,"int32"),c.dispose()}Hee(t);const[r,s]=t.shape.slice(0,2),i=t.rank===2?1:t.shape[2],a=await t.data(),o=t.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const u=[0,0,0,255];for(let d=0;d<i;d++){const f=a[c*i+d];if(t.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(t.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(u[0]=f*o,u[1]=f*o,u[2]=f*o):u[d]=f*o}const h=c*4;l[h+0]=Math.round(u[0]),l[h+1]=Math.round(u[1]),l[h+2]=Math.round(u[2]),l[h+3]=Math.round(u[3])}if(e!=null){mG||VS(JR,ne.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),mG=!0),e.width=s,e.height=r;const c=e.getContext("2d"),u=new ImageData(l,s,r);c.putImageData(u,0,0)}return t!==n&&t.dispose(),l}function TIe(n,e,t){let r=G(n,"img","draw");if(!(n instanceof Sn)){const a=r;r=Be(a,"int32"),a.dispose()}Hee(r),kIe(t==null?void 0:t.imageOptions);const s={image:r},i={canvas:e,options:t};ne.runKernel(JR,s,i)}const qee=re({fromPixels_:Gee}),EIe=Object.freeze(Object.defineProperty({__proto__:null,draw:TIe,fromPixels:qee,fromPixelsAsync:SIe,toPixels:CIe},Symbol.toStringTag,{value:"Module"}));function IF(n,e){const t=n.shape.length,r=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${t}`);if(Se(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const s=e.shape,i=s[s.length-1];let a=1;for(let h=0;h<s.length-1;++h)a*=s[h];const o=n.shape,l=s.slice();l.pop();let c=1;for(let h=i;h<t;++h)c*=o[h],l.push(o[h]);const u=[...ht(n.shape).map(h=>h/c),1].slice(0,i);return[l,a,c,u]}const IIe=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:IF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4=-2,AIe=-1;function MB(n,e,t){const r=n.shape.length;V(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),V(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)V(e[s]+t[s]<=n.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+t[s]}) would overflow input.shape[${s}] (${n.shape[s]})`)}function NIe(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function $B(n,e,t){const r=[];for(let s=0;s<n.length;s++)r[s]=Math.ceil((e[s]-n[s])/t[s]);return r}function Kee(n,e,t,r){const s=[...n];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<t;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Xee(n,e,t){return t<=n?t:t-(e-1)}function Yee(n,e){const t=[];for(let r=0;r<n;r++)t.push(e+r);return t}function _Ie(n,e,t,r,s,i,a,o,l){const c=n.length;let u=new Array(c),h=new Array(c),d=new Array(c);if(e.length&&t>0){const f=e[0],p=t+1;u=Zee(a,f,p,r,n),h=Qee(o,f,p,s,n),d=Kee(i,f,p,n)}else for(let f=0;f<c;f++)u[f]=ete(a,r,i,n,f,l),h[f]=tte(o,s,i,n,f,l),d[f]=Jee(i,f,l);return{begin:u,end:h,strides:d}}function Zee(n,e,t,r,s){const i=[...s],a=Yee(t,e);for(let o=0;o<i.length;o++)if(a.indexOf(o)>-1)i[o]=0;else{const l=Xee(e,t,o);let c=r[l];n&1<<l&&(c=0),i[o]=c}return i}function Qee(n,e,t,r,s){const i=[...s],a=Yee(t,e);for(let o=0;o<i.length;o++)if(a.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const l=Xee(e,t,o);let c=r[l];n&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[o]=c}for(let o=0;o<i.length;o++){const l=s[o];i[o]<0&&(i[o]+=l),i[o]=jf(0,i[o],s[o])}return i}function Jee(n,e,t){let r=n[e];return(t&1<<e||r==null)&&(r=1),r}function ete(n,e,t,r,s,i){let a=e[s];const o=t[s]||1;(n&1<<s||i&1<<s||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),a=jf(0,a,l-1),a}function tte(n,e,t,r,s,i){let a=e[s];const o=t[s]||1;(n&1<<s||i&1<<s||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),o>0?a=jf(0,a,l):a=jf(-1,a,l-1),a}function zB(n,e,t){let r=t.length;for(let s=0;s<t.length;s++)if(t[s]>1){r=s;break}for(let s=r+1;s<t.length;s++)if(e[s]>0||t[s]!==n[s])return!1;return!0}function BB(n,e){let t=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function AF(n,e,t){let r;const s=n.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(a=>{V(a!==-1,()=>"slice() does not support negative begin indexing.")});let i;return t==null?i=new Array(s).fill(-1):typeof t=="number"?i=[t,...new Array(s-1).fill(-1)]:t.length<s?i=t.concat(new Array(s-t.length).fill(-1)):i=t,i=i.map((a,o)=>a>=0?a:(V(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),n.shape[o]-r[o])),[r,i]}function VB(n,e,t,r,s,i,a,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let b=0;b<h.dims;b++)u&&1<<b&o&&h.numAddAxisAfterEllipsis++,1<<b&a&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};RIe(h,d);let f=!0,p=!0,m=!0;const y=[],g=[];for(let b=0;b<n.length;++b){if(d.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const w=!!(d.shrinkAxisMask&1<<b),C=n[b];if(C===-1){y.push(w?1:-1);continue}const I=[d.beginMask&1<<b,d.endMask&1<<b],T=[d.strides[b]>0?0:-1,d.strides[b]>0?C:C-1];if(w&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&d.strides[b]===1;const E=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(w){const _=d.begin[b]<0?C+d.begin[b]:d.begin[b];if(d.begin[b]=_,d.end[b]=d.begin[b]+1,_<0||_>=C)throw Error(`slice index ${d.begin[b]} of dimension ${b} out of bounds.`)}else d.begin[b]=gG(d.begin[b],0,d.strides[b],C,I,T),d.end[b]=gG(d.end[b],1,d.strides[b],C,I,T);const F=d.strides[b]===1&&d.begin[b]===0&&d.end[b]===C;f=f&&F,p=p&&(b===0&&d.strides[b]===1||F)}else f=f&&d.strides[b]===1&&E,p=p&&(b===0&&d.strides[b]===1||E);let A,N=!1;if(d.beginValid&&d.endValid?(A=d.end[b]-d.begin[b],N=!0):w?(A=1,N=!0):E&&C>=0&&(d.strides[b]<0?A=-C:A=C,N=!0),N){let F;A===0||A<0!=d.strides[b]<0?F=0:F=Math.trunc(A/d.strides[b])+(A%d.strides[b]!==0?1:0),y.push(F)}else y.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const w=d.finalShapeGatherIndices[b];w>=0?g.push(y[w]):w===p4&&g.push(1)}return{finalShapeSparse:g.filter((b,w)=>d.finalShapeGatherIndices[w]!==p4),finalShape:g,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function RIe(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const s=Math.min(e.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<s;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&n.newAxisMask)e.finalShapeGatherIndices.push(p4),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[r]),n.end!=null&&(e.end[t]=n.end[r]),e.strides[t]=n.strides[r],n.beginMask&1<<r&&(e.beginMask|=1<<t),n.endMask&1<<r&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(AIe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[t]=r,t++}}function gG(n,e,t,r,s,i){if(s[e])return t>0?i[e]:i[e+1&1];{const a=n<0?r+n:n;return a<i[0]?i[0]:a>i[1]?i[1]:a}}const nte=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:MB,computeFlatOffset:BB,computeOutShape:$B,getNormalizedAxes:_Ie,isSliceContinous:zB,maskToAxes:NIe,parseSliceParams:AF,sliceInfo:VB,startForAxis:ete,startIndicesWithElidedDims:Zee,stopForAxis:tte,stopIndicesWithElidedDims:Qee,stridesForAxis:Jee,stridesWithElidedDims:Kee},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const DIe="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rte{static sgd(e){return new EF(e)}static momentum(e,t,r=!1){return new DB(e,t,r)}static rmsprop(e,t=.9,r=0,s=null,i=!1){return new FB(e,t,r,s,i)}static adam(e=.001,t=.9,r=.999,s=null){return new _B(e,t,r,s)}static adadelta(e=.001,t=.95,r=null){return new AB(e,t,r)}static adamax(e=.002,t=.9,r=.999,s=null,i=0){return new RB(e,t,r,s,i)}static adagrad(e,t=.1){return new NB(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Up=rte;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function jB(){return new Promise(n=>FIe(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UB(n,e){const t=n[0].length;n.forEach((s,i)=>{V(s.length===t,()=>`Error in concat${t}D: rank of tensors[${i}] must be the same as the rank of the rest (${t})`)}),V(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const r=n[0];n.forEach((s,i)=>{for(let a=0;a<t;a++)V(a===e||s[a]===r[a],()=>`Error in concat${t}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function uu(n,e){const t=n[0].slice();for(let r=1;r<n.length;r++)t[e]+=n[r][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Kl;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(Kl||(Kl={}));function ste(n,e,t){let r=new Array;if(t==null&&e==null)return r;if(e==null)for(;r.length<n+t.length;)r.push(-1);else r=e.slice();if(t==null)return r;if(n+t.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${r.length}`);for(let s=1;s<t.length;++s){const i=t[s],a=r[r.length-t.length+s],o=r[a];if(i>=0)if(o>=0){if(o!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+n}] = ${i} but shape[${s+n}] = ${o}`)}else r[a]=i}return r}function ite(n){const e={FIRST_DIM_SIZE:Kl.FIRST_DIM_SIZE,VALUE_ROWIDS:Kl.VALUE_ROWIDS,ROW_LENGTHS:Kl.ROW_LENGTHS,ROW_SPLITS:Kl.ROW_SPLITS,ROW_LIMITS:Kl.ROW_LIMITS,ROW_STARTS:Kl.ROW_STARTS},t=[];for(const r of n)if(r in e)t.push(e[r]);else break;return t}function ate(n){return n.length===0?0:n[0]===Kl.FIRST_DIM_SIZE?n.length-1:n.length}function ote(n,e){if(n==null||e==null)return;const t=n.length,r=e.length;if(t>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(t,r-1);++s){const i=n[s],a=e[s+1];if(i>=0&&a>=0&&i!==1&&i!==a)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-n.length}] = ${i} but ragged tensor input.flatValues.shape[${s-n.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WB=30;function NF(n){return n<=WB?n:RN(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GB(n,e,t){const r=t*(typeof n=="number"?n:n[0]),s=e*(typeof n=="number"?n:n[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IT(n,e,t,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(n[0]/t),s=s.concat(n.slice(1));else{s=s.concat(n[0]);const i=e.length;for(let a=0;a<i;++a)s=s.concat([n[a+1]/e[a],e[a]]);s=s.concat(n.slice(i+1))}return s}function AT(n,e,t=!0){const r=[];if(t){r.push(e);for(let s=e+1;s<n;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let a=1;a<n;++a)a>=e*2+1||a%2===1?i.push(a):s.push(a);r.push(...s),r.push(0),r.push(...i)}return r}function NT(n,e,t,r=!0){const s=[];r?s.push(n[0]/t):s.push(n[0]*t);for(let i=1;i<n.length;++i)i<=e.length?r?s.push(e[i-1]*n[i]):s.push(n[i]/e[i-1]):s.push(n[i]);return s}function HB(n,e){const t=[0];for(let r=0;r<e;++r)t.push(n[r][0]);return t}function qB(n,e,t){const r=n.slice(0,1);for(let s=0;s<t;++s)r.push(n[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _F=1.7580993408473768,RF=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KB=.3275911,XB=.254829592,YB=-.284496736,ZB=1.421413741,QB=-1.453152027,JB=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lh(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function lte(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)e[r/2]=n[r],t[r/2]=n[r+1];return{real:e,imag:t}}function cte(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<n.length;s+=4)t[Math.floor(s/4)]=n[s],r[Math.floor(s/4)]=n[s+1];return{real:t,imag:r}}function ute(n){const e=Math.floor(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<n.length;s+=4)t[Math.floor(s/4)]=n[s],r[Math.floor(s/4)]=n[s+1];return{real:t,imag:r}}function eV(n,e){const t=n[e*2],r=n[e*2+1];return{real:t,imag:r}}function hte(n,e,t,r){n[r*2]=e,n[r*2+1]=t}function dte(n,e){const t=new Float32Array(n/2),r=new Float32Array(n/2);for(let s=0;s<Math.ceil(n/2);s++){const i=(e?2:-2)*Math.PI*(s/n);t[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:t,imag:r}}function fte(n,e,t){const r=(t?2:-2)*Math.PI*(n/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PO="->",PIe=/->/g,yG=",",vG="...";function tV(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(PIe,"").length)/PO.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${PO}").`);const[r,s]=n.split(PO);V(r.indexOf(vG)===-1,()=>`The ellipsis notation ("${vG}") is not supported yet.`);const i=r.split(yG),a=i.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<s.length;++d){const f=s[d];if(!i.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);o.indexOf(f)===-1&&o.push(f)}for(let d=0;d<r.length;++d){const f=r[d];o.indexOf(f)===-1&&f!==yG&&o.push(f)}const l=new Array(i.length);for(let d=0;d<a;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let f=0;f<i[d].length;++f)l[d].push(o.indexOf(i[d][f]))}const c=o.length,u=s.length,h=[];for(let d=u;d<c;++d)h.push(d);return{allDims:o,summedDims:h,idDims:l}}function nV(n,e){let t=new Array(n);t.fill(-1);for(let s=0;s<e.length;++s)t[e[s]]=s;const r=[];for(let s=0;s<n;++s)t[s]===-1&&r.push(s);return t=t.filter(s=>s!==-1),{permutationIndices:t,expandDims:r}}function rV(n,e,t){const r=new Array(n);for(let s=0;s<t.length;++s){const i=t[s].shape;for(let a=0;a<e[s].length;++a)r[e[s][a]]===void 0?r[e[s][a]]=i[a]:V(r[e[s][a]]===i[a],()=>`Expected dimension ${r[e[s][a]]} at axis ${a} of input shaped ${JSON.stringify(i)}, but got dimension ${i[a]}`)}}function sV(n,e){const t=n,r=[];let s=0;n.length===0&&t.push(-1),s=n.length+1;for(let a=0;a<s;++a)r.push([]);const i=[];for(let a=0;a<t.length;++a){const o=t[a],l=OIe(e,o);for(const c of l)i.indexOf(c)===-1&&(r[a].push(c),i.push(c))}return{path:t,steps:r}}function iV(n){return n.every((e,t)=>e===t)}function OIe(n,e){const t=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(e)!==-1||e===-1)&&t.push(r);return t}function aV(n,e,t=0){let r=[];if(typeof e=="number")V(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(n.shape[t]/e);else{const s=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);V(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[i]=n.shape[t]-a}V(n.shape[t]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function mte(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function gte(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yte(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function vte(n,e){return`size ${n} must be non-negative, not ${e}`}function xte(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function bte(n,e){const t=Se(n),r=Se(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${e}`}function wte(n,e){const t=Se(n),r=Se(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4(){return"segment ids must be >= 0"}function Ste(){return"segment ids are not increasing"}function kte(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function Cte(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(n,e){let t=!1,r;for(n<=WB?(r=n,t=!0):r=RN(n,Math.floor(Math.sqrt(n)));!t;)r>e||r===n?t=!0:r=RN(n,r+1);return r}function Ete(n,e,t){const r=[],s=n.length;for(let i=0;i<s;i++)i!==e?r.push(n[i]):r.push(t);return r}function oV(n,e,t,r){const s=e.shape.length,i=n.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let h=0;h<r;++h)if(n.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${n.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const a=n.shape[t],o=[];let l=1,c=1,u=1;for(let h=0;h<r;++h)o.push(n.shape[h]),l*=n.shape[h];for(let h=r;h<t;h++)o.push(n.shape[h]),c*=n.shape[h];for(let h=r;h<s;h++)o.push(e.shape[h]);for(let h=t+1;h<i;h++)o.push(n.shape[h]),u*=n.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:a,outputShape:o}}const LIe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:oV,computeOutShape:Ete,segOpComputeOptimalWindowSize:Tte},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mh(n){try{return n.map(e=>Dh(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Ite(n){return n.map(e=>lu(e))}const Ate=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:XB,ERF_A2:YB,ERF_A3:ZB,ERF_A4:QB,ERF_A5:JB,ERF_P:KB,PARALLELIZE_THRESHOLD:WB,get RowPartitionType(){return Kl},SELU_SCALE:RF,SELU_SCALEALPHA:_F,applyActivation:wF,assertAndGetBroadcastShape:Nt,assertAxesAreInnerMostDims:Qs,assertParamsConsistent:UB,assignToTypedArray:hte,axesAreInnerMostDims:Uz,calculateShapes:wp,checkEinsumDimSizes:rV,checkPadOnDimRoundingMode:ji,combineLocations:jJ,combineRaggedTensorToTensorShapes:ste,complexWithEvenIndex:cte,complexWithOddIndex:ute,computeConv2DInfo:Ds,computeConv3DInfo:yp,computeDefaultPad:Tz,computeDilation2DInfo:cT,computeOptimalWindowSize:NF,computeOutAndReduceShapes:Fs,computeOutShape:uu,computePool2DInfo:wl,computePool3DInfo:Zh,convertConv2DDataFormat:Qh,decodeEinsumEquation:tV,eitherStridesOrDilationsAreOne:Zs,expandShapeToKeepDim:Pr,exponent:fte,exponents:dte,fromStringArrayToUint8:Ite,fromUint8ToStringArray:Mh,getAxesPermutation:vr,getBroadcastDims:Vg,getComplexWithIndex:eV,getEinsumComputePath:sV,getEinsumPermutation:nV,getFusedBiasGradient:bF,getFusedDyActivation:xF,getImageCenter:GB,getInnerMostAxes:Or,getPermuted:AT,getRaggedRank:ate,getReductionAxes:Yr,getReshaped:IT,getReshapedPermuted:NT,getRowPartitionTypesHelper:ite,getSliceBeginCoords:HB,getSliceSize:qB,getSparseFillEmptyRowsIndicesDenseShapeMismatch:pte,getSparseFillEmptyRowsNegativeIndexErrorMessage:mte,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:gte,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:xte,getSparseReshapeInputOutputMismatchErrorMessage:wte,getSparseReshapeInputOutputMultipleErrorMessage:bte,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:yte,getSparseReshapeNegativeOutputDimErrorMessage:vte,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:Cte,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:m4,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Ste,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:kte,getUndoAxesPermutation:vp,isIdentityPermutation:iV,log:Nwe,mergeRealAndImagArrays:Lh,prepareAndValidate:IF,prepareSplitSize:aV,segment_util:LIe,shouldFuse:SF,slice_util:nte,splitRealAndImagArrays:lte,stridesOrDilationsArePositive:Bg,tupleValuesAreOne:qf,upcastType:ca,validateDefaultValueShape:ote,validateInput:pF,validateUpdateShape:vB,warn:ho},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIe=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:kF,nonMaxSuppressionV4Impl:CF,nonMaxSuppressionV5Impl:TF,whereImpl:yF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ZEe();const Nte=Object.freeze(Object.defineProperty({__proto__:null,Abs:sC,Acos:jx,Acosh:Ux,AdadeltaOptimizer:AB,AdagradOptimizer:NB,AdamOptimizer:_B,AdamaxOptimizer:RB,Add:p0,AddN:iC,All:LR,Any:MR,ArgMax:aC,ArgMin:oC,Asin:Wx,Asinh:Gx,Atan:Hx,Atan2:Kx,Atanh:qx,AvgPool:lC,AvgPool3D:cC,AvgPool3DGrad:zR,AvgPoolGrad:$R,BatchMatMul:uC,BatchToSpaceND:hC,Bincount:BR,BitwiseAnd:dC,BroadcastArgs:VR,BroadcastTo:tJ,Cast:Xx,Ceil:Yx,ClipByValue:Zx,Complex:jR,ComplexAbs:fC,Concat:pC,Conv2D:mC,Conv2DBackpropFilter:UR,Conv2DBackpropInput:gC,Conv3D:yC,Conv3DBackpropFilterV2:WR,Conv3DBackpropInputV2:GR,Cos:Qx,Cosh:Jx,CropAndResize:qR,Cumprod:HR,Cumsum:vC,DataStorage:J5,DenseBincount:KR,DepthToSpace:XR,DepthwiseConv2dNative:xC,DepthwiseConv2dNativeBackpropFilter:YR,DepthwiseConv2dNativeBackpropInput:ZR,Diag:QR,Dilation2D:bC,Dilation2DBackpropFilter:FN,Dilation2DBackpropInput:DN,Draw:JR,get ENV(){return sz},Einsum:eD,Elu:tb,EluGrad:tD,Environment:JQ,Equal:wC,Erf:nb,Exp:rb,ExpandDims:SC,Expm1:sb,FFT:nD,Fill:rD,FlipLeftRight:sD,Floor:ib,FloorDiv:ab,FromPixels:PN,FusedBatchNorm:kC,FusedConv2D:$S,FusedDepthwiseConv2D:zS,GatherNd:iD,GatherV2:CC,Greater:TC,GreaterEqual:ob,IFFT:aD,Identity:lb,Imag:oD,IsFinite:cb,IsInf:ub,IsNan:hb,KernelBackend:FR,LRN:DC,LRNGrad:cD,LeakyRelu:EC,Less:IC,LessEqual:AC,LinSpace:lD,Log:db,Log1p:fb,LogSoftmax:nJ,LogicalAnd:NC,LogicalNot:_C,LogicalOr:RC,LogicalXor:Cwe,LowerBound:Twe,MatrixBandPart:Ewe,Max:FC,MaxPool:PC,MaxPool3D:OC,MaxPool3DGrad:hD,MaxPoolGrad:uD,MaxPoolWithArgmax:dD,Maximum:pb,Mean:LC,Min:MC,Minimum:mb,MirrorPad:$C,Mod:gb,MomentumOptimizer:DB,Multinomial:fD,Multiply:yb,Neg:zC,NonMaxSuppressionV3:pD,NonMaxSuppressionV4:mD,NonMaxSuppressionV5:gD,NotEqual:BC,OP_SCOPE_SUFFIX:hz,OneHot:jC,OnesLike:VC,Optimizer:nd,OptimizerConstructors:rte,Pack:UC,PadV2:WC,Pool:Iwe,Pow:vb,Prelu:GC,Prod:HC,RMSPropOptimizer:FB,RaggedGather:yD,RaggedRange:vD,RaggedTensorToTensor:xD,Range:bD,get Rank(){return ZM},Real:wD,RealDiv:eb,Reciprocal:xb,get Reduction(){return Mi},Relu:bb,Relu6:wb,Reshape:qC,ResizeBilinear:XC,ResizeBilinearGrad:kD,ResizeNearestNeighbor:KC,ResizeNearestNeighborGrad:SD,Reverse:YC,RotateWithOffset:BD,Round:Sb,Rsqrt:kb,SGDOptimizer:EF,ScatterNd:CD,SearchSorted:ED,Select:ZC,Selu:Cb,Sigmoid:Ab,Sign:Ib,Sin:Tb,Sinh:Eb,Slice:QC,Softmax:nT,Softplus:Nb,SpaceToBatchND:eT,SparseFillEmptyRows:ID,SparseReshape:AD,SparseSegmentMean:ND,SparseSegmentSum:_D,SparseToDense:RD,SplitV:tT,Sqrt:_b,Square:DD,SquaredDifference:Rb,StaticRegexReplace:rT,Step:Lb,StridedSlice:FD,StringNGrams:PD,StringSplit:OD,StringToHashBucketFast:LD,Sub:Db,Sum:JC,Tan:Fb,Tanh:Pb,Tensor:Sn,TensorBuffer:Kr,TensorScatterUpdate:TD,Tile:Ob,TopK:MD,Transform:$D,Transpose:yg,Unique:zD,Unpack:sT,UnsortedSegmentSum:iT,UpperBound:Awe,Variable:jS,ZerosLike:aT,_FusedMatMul:MS,abs:Ur,acos:yz,acosh:vz,add:Re,addN:OJ,all:GD,any:WS,argMax:Hf,argMin:xz,asin:bz,asinh:wz,atan:Sz,atan2:kz,atanh:Cz,avgPool:uT,avgPool3d:Ez,backend:UD,backend_util:Ate,basicLSTMCell:LJ,batchNorm:Mb,batchNorm2d:Iz,batchNorm3d:Az,batchNorm4d:Nz,batchToSpaceND:hT,bincount:_z,bitwiseAnd:MJ,booleanMaskAsync:wee,broadcastArgs:$J,broadcastTo:vg,broadcast_util:l2e,browser:EIe,buffer:Vt,cast:Be,ceil:Rz,clipByValue:ha,clone:cu,complex:Fh,concat:Fr,concat1d:Dz,concat2d:Fz,concat3d:Pz,concat4d:Oz,conv1d:HD,conv2d:Ph,conv2dTranspose:qD,conv3d:Mz,conv3dTranspose:$z,copyRegisteredKernels:Dwe,cos:dT,cosh:KD,cosineWindow:vF,cumprod:qS,cumsum:XD,customGrad:wu,denseBincount:MN,deprecationWarn:h1e,depthToSpace:zz,depthwiseConv2d:$b,device_util:i1e,diag:BJ,dilation2d:Bz,disableDeprecationWarnings:u1e,dispose:qt,disposeVariables:d1e,div:at,divNoNan:Vz,dot:jz,dropout:kB,einsum:Kp,elu:zb,enableDebugMode:c1e,enableProdMode:l1e,enclosingPowerOfTwo:CB,engine:lo,ensureShape:VJ,env:ye,equal:za,erf:YD,euclideanNorm:Wz,exp:da,expandDims:Hr,expm1:Gz,eye:ZD,fft:TT,fill:g0,findBackend:v1e,findBackendFactory:x1e,floor:Vb,floorDiv:WD,fused:_ee,gather:jb,gatherND:Tee,gather_util:IIe,getBackend:dz,getGradient:KM,getKernel:VS,getKernelsForBackend:ON,grad:G2e,grads:H2e,greater:Ui,greaterEqual:Jh,ifft:vx,imag:fT,image:Oa,inTopKAsync:Eee,io:LB,irfft:dF,isFinite:Hz,isInf:qz,isNaN:Kz,keep:ss,kernel_impls:MIe,leakyRelu:pT,less:mx,lessEqual:xp,linalg:IB,linspace:WJ,localResponseNormalization:Xz,log:Ba,log1p:mT,logSigmoid:Yz,logSoftmax:JD,logSumExp:gT,logicalAnd:lc,logicalNot:yT,logicalOr:eF,logicalXor:Zz,losses:Mee,lowerBound:HJ,matMul:zt,math:yIe,max:To,maxPool:vT,maxPool3d:Qz,maxPoolWithArgmax:qJ,maximum:Iu,mean:mr,memory:r4,meshgrid:KJ,min:px,minimum:Xf,mirrorPad:Jz,mod:eB,moments:xT,movingAverage:See,mul:ie,multiRNNCell:XJ,multinomial:YJ,neg:Kn,nextFrame:jB,norm:Bb,notEqual:jg,oneHot:Ug,ones:ea,onesLike:Va,op:re,outerProduct:ZJ,pad:ed,pad1d:QJ,pad2d:JJ,pad3d:tB,pad4d:eee,pool:nB,pow:bu,prelu:wT,print:gz,prod:rB,profile:f1e,raggedGather:tee,raggedRange:nee,raggedTensorToTensor:ree,rand:see,randomGamma:lee,randomNormal:rF,randomStandardNormal:cee,randomUniform:bp,randomUniformInt:uee,range:Oh,ready:g1e,real:gx,reciprocal:fB,registerBackend:fz,registerGradient:rJ,registerKernel:VD,relu:yc,relu6:sF,removeBackend:y1e,reshape:ae,reverse:_o,reverse1d:hee,reverse2d:dee,reverse3d:fee,reverse4d:pee,rfft:ET,round:iF,rsqrt:aF,scalar:lt,scatterND:kee,scatter_util:KCe,searchSorted:tF,selu:oF,separableConv2d:lF,serialization:XEe,setBackend:m1e,setPlatform:b1e,setdiff1dAsync:mee,sigmoid:Co,sign:pB,signal:Lee,sin:cF,sinh:uF,slice:nn,slice1d:ST,slice2d:hF,slice3d:kT,slice4d:yx,slice_util:nte,softmax:CT,softplus:y0,spaceToBatchND:bT,sparse:$ee,sparseToDense:Cee,spectral:Oee,split:ia,sqrt:Rs,square:Mn,squaredDifference:fF,squeeze:Pa,stack:fa,step:x0,stridedSlice:mB,string:zee,sub:Ye,sum:rt,sumOutType:jD,tan:gB,tanh:Kf,tensor:ko,tensor1d:di,tensor2d:Vy,tensor3d:yB,tensor4d:gee,tensor5d:yee,tensor6d:vee,tensorScatterUpdate:xee,tensor_util:e1e,test_util:oCe,tidy:he,tile:vo,time:p1e,topk:xB,train:Up,transpose:tn,truncatedNormal:mF,unique:bB,unregisterGradient:Rwe,unregisterKernel:_we,unsortedSegmentSum:gF,unstack:Ro,upcastType:ca,upperBound:bee,util:Vwe,valueAndGrad:q2e,valueAndGrads:K2e,variable:wB,variableGrads:GJ,version_core:DIe,where:Ks,whereAsync:SB,zeros:qr,zerosLike:rn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _te={kernelName:sC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(n,x0(Be(t,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ie={kernelName:jx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Mn(Be(t,"float32")),s=Rs(Ye(lt(1),r));return Kn(at(n,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe={kernelName:Ux,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Rs(Ye(Mn(Be(t,"float32")),1));return at(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe={kernelName:p0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Nt(t.shape,r.shape);return{a:()=>{let o=n;const l=Yr(t.shape,s);return l.length>0&&(o=rt(o,l)),ae(o,t.shape)},b:()=>{let o=n;const l=Yr(r.shape,s);return l.length>0&&(o=rt(o,l)),ae(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIe={kernelName:iC,saveAllInputs:!0,gradFunc:(n,e)=>{const t={};return e.forEach((r,s)=>{t[s]=()=>n.clone()}),t}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe={kernelName:aC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>rn(t)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe={kernelName:oC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>rn(t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIe={kernelName:Wx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,Rs(Ye(lt(1),Mn(Be(t,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIe={kernelName:Gx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Rs(Re(lt(1),Mn(Be(t,"float32"))));return at(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HIe={kernelName:Kx,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Nt(t.shape,r.shape);return{a:()=>{const o=Re(Mn(t),Mn(r));let l=ie(n,at(r,o));const c=Yr(t.shape,s);return c.length>0&&(l=rt(l,c)),ae(l,t.shape)},b:()=>{const o=Re(Mn(t),Mn(r));let l=Kn(ie(n,at(t,o)));const c=Yr(r.shape,s);return c.length>0&&(l=rt(l,c)),ae(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe={kernelName:Hx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,Re(Mn(Be(t,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KIe={kernelName:qx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,Ye(lt(1),Mn(Be(t,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(n,e,t,r,s,i){const a=G(n,"dy","avgPool3dGrad"),o=G(e,"input","avgPool3dGrad");let l=a,c=o,u=!1;o.rank===4&&(u=!0,l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),V(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),ji("avgPool3dGrad",s,i);const h={dy:l,input:c},d={filterSize:t,strides:r,pad:s,dimRoundingMode:i},f=ne.runKernel(zR,h,d);return u?ae(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const YIe=re({avgPool3dGrad_:XIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIe={kernelName:cC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:o}=t;return{x:()=>YIe(n,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe(n,e,t,r,s){const i=G(n,"dy","avgPoolGrad"),a=G(e,"input","avgPoolGrad");V(a.rank===i.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${i.rank})`);let o=a,l=i,c=!1;a.rank===3&&(c=!0,o=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),V(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const u={dy:l,input:o},h={filterSize:t,strides:r,pad:s},d=ne.runKernel($R,u,h);return c?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const JIe=re({avgPoolGrad_:QIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eAe={kernelName:lC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:s,strides:i,pad:a}=t;return{x:()=>JIe(n,r,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tAe={kernelName:uC,inputsToSave:["a","b"],gradFunc:(n,e,t)=>{const[r,s]=e,{transposeA:i,transposeB:a}=t;return!i&&!a?{a:()=>zt(n,s,!1,!0),b:()=>zt(r,n,!0,!1)}:!i&&a?{a:()=>zt(n,s,!1,!1),b:()=>zt(n,r,!0,!1)}:i&&!a?{a:()=>zt(s,n,!1,!0),b:()=>zt(r,n,!1,!1)}:{a:()=>zt(s,n,!0,!0),b:()=>zt(n,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAe={kernelName:hC,gradFunc:(n,e,t)=>{const{blockShape:r,crops:s}=t;return{x:()=>bT(n,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe={kernelName:tJ,gradFunc:(n,e,t)=>{const r=t,s=r.inputShape,i=r.shape,a=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])a[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>rt(n,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe={kernelName:Xx,gradFunc:n=>({x:()=>n.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iAe={kernelName:Yx,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aAe={kernelName:Zx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=t;return{x:()=>Ks(lc(Jh(r,s),xp(r,i)),n,rn(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oAe={kernelName:fC,inputsToSave:["x"],gradFunc:_te.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAe={kernelName:pC,saveAllInputs:!0,gradFunc:(n,e,t)=>{const r=e.map(l=>l.shape),{axis:s}=t,i=Kt(s,e[0].shape)[0],a=r.map(l=>l[i]);return ia(n,a,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe={kernelName:mC,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,{dilations:i,strides:a,pad:o,dataFormat:l}=t;return V(qf(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>Lz(r.shape,n,s,a,o,l),filter:()=>TB(r,n,s.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAe={kernelName:gC,inputsToSave:["dy","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,{strides:i,pad:a,dataFormat:o,dimRoundingMode:l}=t;return{dy:()=>Ph(n,s,i,a,o,1,l),filter:()=>TB(n,r,s.shape,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hAe(n,e,t,r,s){let i=n;n.rank===4&&(i=ae(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let a=e;a.rank===4&&(a=ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),V(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),V(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),V(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),V(i.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${t[3]}.`),V(a.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${t[4]}).`);const o={x:i,dy:a},l={strides:r,pad:s,filterShape:t};return ne.runKernel(WR,o,l)}const dAe=re({conv3DBackpropFilter_:hAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fAe={kernelName:yC,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:s,pad:i}=t;V(qf(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>zJ(a.shape,n,o,s,i),filter:()=>dAe(a,n,o.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pAe={kernelName:Qx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(Kn(cF(Be(t,"float32"))),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe={kernelName:Jx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(uF(Be(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe={kernelName:vC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s,exclusive:i,reverse:a}=t;return{x:()=>{const o=vr([s],r.rank);let l=XD(n,s,i,!a);return o!=null&&(l=tn(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe={kernelName:xC,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:a}=t,o=r??[1,1];V(qf(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return V(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),V(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),V(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),V(Zs(s,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`),ji("depthwiseConv2d",i,a),{x:()=>Nee(l.shape,n,c,s,i,o,a),filter:()=>Aee(l,n,c.shape,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe={kernelName:bC,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,i={x:r,filter:s,dy:n},a={x:r,filter:s,dy:n};return{x:()=>ne.runKernel(DN,i,t),filter:()=>ne.runKernel(FN,a,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xAe={kernelName:tb,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e,r={dy:n,y:t};return{x:()=>ne.runKernel(tD,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe={kernelName:nb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ie(da(Kn(Mn(t))),2/Math.sqrt(Math.PI));return{x:()=>ie(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wAe={kernelName:rb,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(n,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SAe={kernelName:SC,inputsToSave:["input"],gradFunc:(n,e)=>{const[t]=e;return{input:()=>ae(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe={kernelName:sb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(n,da(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CAe={kernelName:ib,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe={kernelName:ab,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Nt(t.shape,r.shape);return{a:()=>{const o=at(n,Be(r,"float32")),l=Yr(t.shape,s);return l.length>0?ae(rt(o,l),t.shape):o},b:()=>{let o=ie(n,Be(t,"float32"));const l=Yr(r.shape,s);l.length>0&&(o=ae(rt(o,l),r.shape));const c=Mn(r);return Kn(at(o,Be(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe={kernelName:kC,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,e,t)=>{const{varianceEpsilon:r}=t,[s,i,a,o]=e,l=o??lt(1),c=Yr(i.shape,s.shape),u=[];if(i.rank===1){for(let w=0;w<s.shape.length-1;++w)u.push(s.shape[w]);u.push(1)}const h=Ye(s,i),d=ie(n,l),f=aF(Re(a,lt(r))),p=ie(ie(ie(f,f),f),lt(-.5));return{x:()=>i.rank===1?ae(ie(ie(n,vo(ae(f,[1,1,1,i.shape[0]]),u)),l),s.shape):ae(ie(ie(n,f),l),s.shape),mean:()=>{let w=ie(ie(f,lt(-1)),d);return i.rank===1&&(w=rt(w,c)),ae(w,i.shape)},variance:()=>{let w=ie(ie(p,h),d);return i.rank===1&&(w=rt(w,c)),ae(w,i.shape)},scale:()=>{const w=ie(h,f);let C=ie(n,w);return i.rank===1&&(C=rt(C,c)),ae(C,i.shape)},offset:()=>{let w=n;return i.rank===1&&(w=rt(w,c)),ae(w,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:CC,inputsToSave:["x","indices"],gradFunc:(n,e,t)=>{const[r,s]=e,{axis:i,batchDims:a}=t,o=Kt(i,r.shape)[0],l=(c,u,h)=>()=>{const d=c.shape,f=u.size,p=d.slice(0,o),m=p.length,y=d.slice(i,d.length).slice(1),g=y.length,v=xG(0,m),b=xG(m+1,m+1+g),w=bG([p,[f],y]),C=ae(h,w),I=ae(u,[f]),T=bG([[m],v,b]),E=tn(C,T);let A=gF(E,I,c.shape[o]);const N=vp(T);return A=tn(A,N),A};if(a===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>fa(u.map((f,p)=>l(f,s.slice(p,1),n.slice(p,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,n),indices:()=>s}}};function xG(n,e){const t=[];for(let r=n;r<e;++r)t.push(r);return t}function bG(n){const e=[];for(let t=0;t<n.length;++t)for(let r=0;r<n[t].length;++r)e.push(n[t][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe={kernelName:ob,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>rn(t),b:()=>rn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe={kernelName:lb,gradFunc:n=>({x:()=>Be(n,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae={kernelName:cb,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe={kernelName:ub,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DAe={kernelName:hb,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FAe={kernelName:EC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{alpha:s}=t,i=Ui(r,0);return{x:()=>Ks(i,n,ie(n,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PAe={kernelName:fb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,Re(t,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAe={kernelName:db,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,Be(t,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe={kernelName:nJ,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t;return{logits:()=>{const a=da(r);return Ye(n,ie(rt(n,s,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(n,e,t,r=5,s=1,i=1,a=.5){const o={x:n,y:e,dy:t},l={depthRadius:r,bias:s,alpha:i,beta:a};return ne.runKernel(cD,o,l)}const $Ae=re({localResponseNormalizationBackprop_:MAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAe={kernelName:DC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{depthRadius:i,bias:a,alpha:o,beta:l}=t;return{x:()=>$Ae(r,s,n,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(n,e,t,r){return e.rank<t.rank&&(e=ae(e,Pr(e.shape,r))),n.rank<t.rank&&(n=ae(n,Pr(n.shape,r))),{x:()=>ie(n,Be(za(t,e),n.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wG={kernelName:FC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{reductionIndices:s}=r,i=e[0],a=e[1],o=Kt(s,i.shape),l=Rte(n,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe={kernelName:pb,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ie(n,Be(Jh(t,r),"float32")),b:()=>ie(n,Be(mx(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(n,e,t,r,s,i,a){const o=G(n,"dy","maxPool3dGrad"),l=G(e,"input","maxPool3dGrad"),c=G(t,"output","maxPool3dGrad");let u=o,h=l,d=c,f=!1;l.rank===4&&(f=!0,u=ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=ae(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=ae(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),V(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),V(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),V(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),ji("maxPool3dGrad",i,a);const p={dy:u,input:h,output:d},m={filterSize:r,strides:s,pad:i,dimRoundingMode:a},y=ne.runKernel(hD,p,m);return f?ae(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const jAe=re({maxPool3dGrad_:VAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAe={kernelName:OC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=t;return{x:()=>jAe(n,r,s,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(n,e,t,r,s,i,a){const o=G(n,"dy","maxPoolGrad"),l=G(e,"input","maxPoolGrad"),c=G(t,"output","maxPoolGrad");V(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),V(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),V(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),ji("maxPoolGrad",i,a);const u={dy:o,input:l,output:c},h={filterSize:r,strides:s,pad:i,dimRoundingMode:a};return ne.runKernel(uD,u,h)}const GAe=re({maxPoolGrad_:WAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe={kernelName:PC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o}=t;return{x:()=>GAe(n,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAe={kernelName:LC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t,i=Kt(s,r.shape),o=Fs(r.shape,i)[1],l=Se(o);return{x:()=>{const u=r.shape.slice();i.forEach(f=>{u[f]=1});const h=ae(n,u);return at(ie(h,ea(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe={kernelName:MC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{axis:s}=r,[i,a]=e,o=Kt(s,i.shape),l=Rte(n,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAe={kernelName:mb,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ie(n,Be(xp(t,r),"float32")),b:()=>ie(n,Be(Ui(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YAe={kernelName:$C,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:s}=t,i=s.map(a=>a[0]);return{x:()=>nn(n,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe={kernelName:gb,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Nt(t.shape,r.shape);return{a:()=>{const o=Yr(t.shape,s);return o.length>0?ae(rt(n,o),t.shape):n},b:()=>{const o=ie(n,Kn(Vb(at(t,r)))),l=Yr(r.shape,s);return l.length>0?ae(rt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe={kernelName:yb,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Nt(t.shape,r.shape);return{a:()=>{const o=ie(n,Be(r,"float32")),l=Yr(t.shape,s);return l.length>0?ae(rt(o,l),t.shape):o},b:()=>{const o=ie(n,Be(t,"float32")),l=Yr(r.shape,s);return l.length>0?ae(rt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe={kernelName:zC,gradFunc:n=>({x:()=>Kn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eNe={kernelName:jC,inputsToSave:["indices"],gradFunc:(n,e)=>{const t=e[0];return{indices:()=>qr(t.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tNe={kernelName:VC,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nNe={kernelName:UC,saveAllInputs:!0,gradFunc:(n,e,t)=>{const{axis:r}=t;return Ro(n,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SG={kernelName:WC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:s}=t,i=s.map(a=>a[0]);return{x:()=>nn(n,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rNe={kernelName:vb,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,e)=>{const[t,r,s]=e,i=t,a=r,o=Nt(i.shape,a.shape);return{a:()=>{const u=Be(a,"float32");let h=ie(n,ie(u,bu(i,Ye(u,lt(1)))));const d=Yr(i.shape,o);return d.length>0&&(h=rt(h,d)),ae(h,i.shape)},b:()=>{const u=Ui(i,0),h=Ks(u,Ba(i),rn(i));let d=ie(n,ie(s,h));const f=Yr(a.shape,o);return f.length>0&&(d=rt(d,f)),ae(d,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNe={kernelName:GC,inputsToSave:["x","alpha"],gradFunc:(n,e)=>{const[t,r]=e,s=Ui(t,0);return{x:()=>Ks(s,n,ie(n,r)),alpha:()=>{let i=Ks(s,rn(n),ie(n,t));const a=Yr(r.shape,n.shape);return a.length>0&&(i=rt(i,a)),ae(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(n,e,t){const r=n.shape.slice();r[t]=1;const s=ae(e,r),i=qS(n,t,!0,!1),a=qS(n,t,!0,!0),o=ie(i,a);return ie(s,o)}function aNe(n,e,t){const r=n.shape.length,s=r-t.length,i=vr(t,r);let a=n;i!=null&&(a=tn(n,i));const o=a.shape.slice(),c=o.splice(r-t.length,t.length).reduce((d,f)=>d*f,1);o.push(c);const u=a.reshape(o);let h=iNe(u,e,s);if(h=h.reshape(a.shape),i!=null){const d=vp(i);h=tn(h,d)}return h}const oNe={kernelName:HC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t;let i=[];return s==null?i=r.shape.map((a,o)=>o):typeof s=="number"?i=[s]:i=s,{x:()=>aNe(r,n,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe={kernelName:eb,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Nt(t.shape,r.shape);return{a:()=>{const o=at(n,Be(r,"float32")),l=Yr(t.shape,s);return l.length>0?ae(rt(o,l),t.shape):o},b:()=>{let o=ie(n,Be(t,"float32"));const l=Yr(r.shape,s);l.length>0&&(o=ae(rt(o,l),r.shape));const c=Mn(r);return Kn(at(o,Be(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cNe={kernelName:xb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,Kn(Mn(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uNe={kernelName:wb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ie(xp(t,6),x0(t));return{x:()=>ie(n,Be(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hNe={kernelName:bb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(n,Be(x0(t),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dNe={kernelName:qC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fNe={kernelName:XC,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,s={dy:n,images:r};return{images:()=>ne.runKernel(kD,s,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe={kernelName:KC,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,s={dy:n,images:r};return{images:()=>ne.runKernel(SD,s,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe={kernelName:YC,gradFunc:(n,e,t)=>{const{dims:r}=t,s=Kt(r,n.shape);return{x:()=>_o(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gNe={kernelName:Sb,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yNe={kernelName:kb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Kn(at(n,ie(bu(t,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vNe={kernelName:ZC,inputsToSave:["condition"],gradFunc:(n,e)=>{const[t]=e;return{condition:()=>Be(rn(t),"float32"),t:()=>ie(n,Be(t,n.dtype)),e:()=>ie(n,Be(yT(t),n.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe={kernelName:Cb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Ui(t,lt(0)),s=lt(_F),i=lt(RF),a=ie(n,i),o=ie(ie(n,s),da(Be(t,"float32")));return Ks(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bNe={kernelName:Ab,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(n,ie(t,Ye(lt(1),t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wNe={kernelName:Ib,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SNe={kernelName:Tb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(dT(Be(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kNe={kernelName:Eb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(KD(Be(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CNe={kernelName:QC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{begin:s,size:i}=t,a=r.shape,[o,l]=AF(r,s,i),c=[];for(let u=0;u<n.rank;u++)c.push([o[u],a[u]-o[u]-l[u]]);return{x:()=>ed(n,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TNe={kernelName:nT,outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{dim:s}=t,i=!0,a=ie(n,r);return{logits:()=>Ye(a,ie(rt(a,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe={kernelName:Nb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(n,Co(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kG={kernelName:eT,gradFunc:(n,e,t)=>{const{blockShape:r,paddings:s}=t;return{x:()=>hT(n,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CG={kernelName:tT,gradFunc:(n,e,t)=>{const{axis:r}=t;return{x:()=>Fr(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe={kernelName:_b,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,ie(Rs(Be(t,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANe={kernelName:DD,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(n,ie(Be(t,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NNe={kernelName:Rb,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=lt(2);return{a:()=>ie(n,ie(s,Ye(t,r))),b:()=>ie(n,ie(s,Ye(r,t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ne={kernelName:Lb,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RNe={kernelName:Db,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Nt(t.shape,r.shape);return{a:()=>{let o=n;const l=Yr(t.shape,s);return l.length>0&&(o=rt(o,l)),ae(o,t.shape)},b:()=>{let o=n;const l=Yr(r.shape,s);return l.length>0&&(o=rt(o,l)),ae(Kn(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DNe={kernelName:JC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,s=r.shape.slice(),{axis:i}=t;Kt(i,r.shape).forEach(c=>{s[c]=1});const o=ae(n,s),l=ie(o,ea(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FNe={kernelName:Fb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>at(n,Mn(dT(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNe={kernelName:Pb,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ie(Ye(lt(1),Mn(t)),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ONe={kernelName:Ob,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{reps:s}=t;return{x:()=>{let a=rn(r);if(r.rank===1)for(let o=0;o<s[0];++o)a=Re(a,nn(n,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)a=Re(a,nn(n,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)a=Re(a,nn(n,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)a=Re(a,nn(n,[o*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LNe={kernelName:yg,gradFunc:(n,e,t)=>{const r=t,{perm:s}=r,i=vp(s);return{x:()=>tn(n,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MNe={kernelName:sT,gradFunc:(n,e,t)=>{const r=t,{axis:s}=r;return{value:()=>fa(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ne={kernelName:iT,inputsToSave:["segmentIds"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>zNe(n,t)}}};function zNe(n,e){const t=Iu(e,rn(e)),r=jb(n,t);let s=Jh(e,lt(0,"int32"));const i=r.rank-s.rank;for(let o=0;o<i;++o)s=Hr(s,o+1);s=lc(s,ea(r.shape,"bool"));const a=rn(r);return Ks(s,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BNe={kernelName:aT,gradFunc:n=>({x:()=>rn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VNe=[_te,$Ie,zIe,BIe,VIe,jIe,UIe,WIe,GIe,HIe,qIe,KIe,ZIe,eAe,tAe,nAe,rAe,sAe,iAe,aAe,oAe,lAe,uAe,cAe,fAe,pAe,mAe,gAe,yAe,vAe,lNe,xAe,bAe,wAe,SAe,kAe,TAe,CAe,EAe,IAe,AAe,NAe,_Ae,RAe,DAe,FAe,PAe,OAe,LAe,zAe,wG,wG,BAe,UAe,HAe,qAe,KAe,XAe,YAe,ZAe,QAe,JAe,eNe,tNe,nNe,SG,SG,rNe,sNe,oNe,cNe,uNe,hNe,dNe,fNe,pNe,mNe,gNe,yNe,vNe,xNe,bNe,wNe,SNe,kNe,CNe,TNe,ENe,kG,kG,CG,CG,INe,NNe,ANe,_Ne,RNe,DNe,FNe,PNe,ONe,LNe,MNe,$Ne,BNe];for(const n of VNe)rJ(n);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.abs=function(){return this.throwIfDisposed(),Ur(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.acos=function(){return this.throwIfDisposed(),yz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.acosh=function(){return this.throwIfDisposed(),vz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.add=function(n){return this.throwIfDisposed(),Re(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.all=function(n,e){return this.throwIfDisposed(),GD(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.any=function(n,e){return this.throwIfDisposed(),WS(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.argMax=function(n){return this.throwIfDisposed(),Hf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.argMin=function(n){return this.throwIfDisposed(),xz(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asScalar=function(){return this.throwIfDisposed(),V(this.size===1,()=>"The array must have only 1 element."),ae(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asType=function(n){return this.throwIfDisposed(),Be(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as1D=function(){return this.throwIfDisposed(),ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as2D=function(n,e){return this.throwIfDisposed(),ae(this,[n,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as3D=function(n,e,t){return this.throwIfDisposed(),ae(this,[n,e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as4D=function(n,e,t,r){return this.throwIfDisposed(),ae(this,[n,e,t,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.as5D=function(n,e,t,r,s){return this.throwIfDisposed(),ae(this,[n,e,t,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asin=function(){return this.throwIfDisposed(),bz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.asinh=function(){return this.throwIfDisposed(),wz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.atan=function(){return this.throwIfDisposed(),Sz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.atan2=function(n){return this.throwIfDisposed(),kz(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.atanh=function(){return this.throwIfDisposed(),Cz(this)};Te().prototype.avgPool=function(n,e,t,r){return this.throwIfDisposed(),uT(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),hT(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.batchNorm=function(n,e,t,r,s){return this.throwIfDisposed(),Mb(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.broadcastTo=function(n){return this.throwIfDisposed(),vg(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cast=function(n){return this.throwIfDisposed(),Be(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.ceil=function(){return this.throwIfDisposed(),Rz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.clipByValue=function(n,e){return this.throwIfDisposed(),ha(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.concat=function(n,e){return this.throwIfDisposed(),n instanceof Sn&&(n=[n]),Fr([this,...n],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.conv1d=function(n,e,t,r,s,i){return this.throwIfDisposed(),HD(this,n,e,t,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.conv2dTranspose=function(n,e,t,r,s){return this.throwIfDisposed(),qD(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.conv2d=function(n,e,t,r,s,i){return this.throwIfDisposed(),Ph(this,n,e,t,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cos=function(){return this.throwIfDisposed(),dT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cosh=function(){return this.throwIfDisposed(),KD(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cumprod=function(n,e,t){return this.throwIfDisposed(),qS(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.cumsum=function(n,e,t){return this.throwIfDisposed(),XD(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),zz(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.depthwiseConv2d=function(n,e,t,r,s,i){return this.throwIfDisposed(),$b(this,n,e,t,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.dilation2d=function(n,e,t,r,s){return this.throwIfDisposed(),Bz(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.divNoNan=function(n){return this.throwIfDisposed(),Vz(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.div=function(n){return this.throwIfDisposed(),at(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.dot=function(n){return this.throwIfDisposed(),jz(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.elu=function(){return this.throwIfDisposed(),zb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.equal=function(n){return this.throwIfDisposed(),za(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.erf=function(){return this.throwIfDisposed(),YD(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.euclideanNorm=function(n,e){return this.throwIfDisposed(),Wz(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.exp=function(){return this.throwIfDisposed(),da(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.expandDims=function(n){return this.throwIfDisposed(),Hr(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.expm1=function(){return this.throwIfDisposed(),Gz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.fft=function(){return this.throwIfDisposed(),TT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.flatten=function(){return this.throwIfDisposed(),ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.floor=function(){return this.throwIfDisposed(),Vb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.floorDiv=function(n){return this.throwIfDisposed(),WD(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.gather=function(n,e,t){return this.throwIfDisposed(),jb(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.greaterEqual=function(n){return this.throwIfDisposed(),Jh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.greater=function(n){return this.throwIfDisposed(),Ui(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.ifft=function(){return this.throwIfDisposed(),vx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.irfft=function(){return this.throwIfDisposed(),dF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.isFinite=function(){return this.throwIfDisposed(),Hz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.isInf=function(){return this.throwIfDisposed(),qz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.isNaN=function(){return this.throwIfDisposed(),Kz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.leakyRelu=function(n){return this.throwIfDisposed(),pT(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.lessEqual=function(n){return this.throwIfDisposed(),xp(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.less=function(n){return this.throwIfDisposed(),mx(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.localResponseNormalization=function(n,e,t,r){return this.throwIfDisposed(),Xz(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logSigmoid=function(){return this.throwIfDisposed(),Yz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logSoftmax=function(n){return this.throwIfDisposed(),JD(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logSumExp=function(n,e){return this.throwIfDisposed(),gT(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.log=function(){return this.throwIfDisposed(),Ba(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.log1p=function(){return this.throwIfDisposed(),mT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalAnd=function(n){return this.throwIfDisposed(),lc(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalNot=function(){return this.throwIfDisposed(),yT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalOr=function(n){return this.throwIfDisposed(),eF(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.logicalXor=function(n){return this.throwIfDisposed(),Zz(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.matMul=function(n,e,t){return this.throwIfDisposed(),zt(this,n,e,t)};Te().prototype.maxPool=function(n,e,t,r){return this.throwIfDisposed(),vT(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.max=function(n,e){return this.throwIfDisposed(),To(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.maximum=function(n){return this.throwIfDisposed(),Iu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mean=function(n,e){return this.throwIfDisposed(),mr(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.min=function(n,e){return this.throwIfDisposed(),px(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.minimum=function(n){return this.throwIfDisposed(),Xf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mirrorPad=function(n,e){return this.throwIfDisposed(),Jz(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mod=function(n){return this.throwIfDisposed(),eB(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.mul=function(n){return this.throwIfDisposed(),ie(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.neg=function(){return this.throwIfDisposed(),Kn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.norm=function(n,e,t){return this.throwIfDisposed(),Bb(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.notEqual=function(n){return this.throwIfDisposed(),jg(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.oneHot=function(n,e=1,t=0){return this.throwIfDisposed(),Ug(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.onesLike=function(){return this.throwIfDisposed(),Va(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.pad=function(n,e){return this.throwIfDisposed(),ed(this,n,e)};Te().prototype.pool=function(n,e,t,r,s,i){return this.throwIfDisposed(),nB(this,n,e,t,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.pow=function(n){return this.throwIfDisposed(),bu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.prelu=function(n){return this.throwIfDisposed(),wT(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.prod=function(n,e){return this.throwIfDisposed(),rB(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reciprocal=function(){return this.throwIfDisposed(),fB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.relu=function(){return this.throwIfDisposed(),yc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.relu6=function(){return this.throwIfDisposed(),sF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reshapeAs=function(n){return this.throwIfDisposed(),ae(this,n.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reshape=function(n){return this.throwIfDisposed(),ae(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.resizeBilinear=function(n,e,t){return this.throwIfDisposed(),Fee(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.resizeNearestNeighbor=function(n,e,t){return this.throwIfDisposed(),Pee(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.reverse=function(n){return this.throwIfDisposed(),_o(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.rfft=function(){return this.throwIfDisposed(),ET(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.round=function(){return this.throwIfDisposed(),iF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.rsqrt=function(){return this.throwIfDisposed(),aF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.selu=function(){return this.throwIfDisposed(),oF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.separableConv2d=function(n,e,t,r,s,i){return this.throwIfDisposed(),lF(this,n,e,t,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sigmoid=function(){return this.throwIfDisposed(),Co(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sign=function(){return this.throwIfDisposed(),pB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sin=function(){return this.throwIfDisposed(),cF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sinh=function(){return this.throwIfDisposed(),uF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.slice=function(n,e){return this.throwIfDisposed(),nn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.softmax=function(n){return this.throwIfDisposed(),CT(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.softplus=function(){return this.throwIfDisposed(),y0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),bT(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.split=function(n,e){return this.throwIfDisposed(),ia(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sqrt=function(){return this.throwIfDisposed(),Rs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.square=function(){return this.throwIfDisposed(),Mn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.squaredDifference=function(n){return this.throwIfDisposed(),fF(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.squeeze=function(n){return this.throwIfDisposed(),Pa(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.stack=function(n,e){this.throwIfDisposed();const t=n instanceof Sn?[this,n]:[this,...n];return fa(t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.step=function(n){return this.throwIfDisposed(),x0(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.stridedSlice=function(n,e,t,r,s,i,a,o){return this.throwIfDisposed(),mB(this,n,e,t,r,s,i,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sub=function(n){return this.throwIfDisposed(),Ye(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.sum=function(n,e){return this.throwIfDisposed(),rt(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.tan=function(){return this.throwIfDisposed(),gB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.tanh=function(){return this.throwIfDisposed(),Kf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.tile=function(n){return this.throwIfDisposed(),vo(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.toBool=function(){return this.throwIfDisposed(),Be(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.toFloat=function(){return this.throwIfDisposed(),Be(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.toInt=function(){return this.throwIfDisposed(),Be(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.topk=function(n,e){return this.throwIfDisposed(),xB(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.transpose=function(n){return this.throwIfDisposed(),tn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.unique=function(n){return this.throwIfDisposed(),bB(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),gF(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.unstack=function(n){return this.throwIfDisposed(),Ro(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.where=function(n,e){return this.throwIfDisposed(),Ks(n,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Te().prototype.zerosLike=function(){return this.throwIfDisposed(),rn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Yc extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Yc.prototype)}}class cl extends Error{constructor(e){super(e),Object.setPrototypeOf(this,cl.prototype)}}class le extends Error{constructor(e){super(e),Object.setPrototypeOf(this,le.prototype)}}class jt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,jt.prototype)}}class lV extends Error{constructor(e){super(e),Object.setPrototypeOf(this,lV.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dte{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gg(n,e){if(Array.isArray(n)){let t=[];for(let r=0;r<e;r++)t=t.concat(n);return t}else{const t=new Array(e);return t.fill(n),t}}function Zc(n,e){if(!n)throw new lV(e)}function TG(n,e){let t=0;for(const r of n)r===e&&t++;return t}function Ji(n){return n.length===1?n[0]:n}function Dn(n){return Array.isArray(n)?n:[n]}function Vu(n){const t=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function Xp(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let Lo={};function cV(n){if(n==null)return null;const e={};return e.className=n.getClassName(),e.config=n.getConfig(),e}function g4(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(e=>g4(e));else{const e=Object.keys(n);for(const t of e){const r=n[t];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?n[t]=r.value:g4(r))}}}function _T(n,e={},t={},r="object",s=!1){if(typeof n=="string"){const i=n;let a;if(i in t)a=t[i];else if(i in Lo)a=Lo[i];else if(a=e[i],a==null)throw new le(`Unknown ${r}: ${n}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const i=n;if(i.className==null||i.config==null)throw new le(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const a=i.className;let o,l;if(a in t?[o,l]=t[a]:a in Lo?[o,l]=Lo.className:a in e&&([o,l]=e[a]),o==null)throw new le(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const f of Object.keys(Lo))c[f]=Lo[f];for(const f of Object.keys(t))c[f]=t[f];const u=i.config;u.customObjects=c;const h=Object.assign({},Lo);for(const f of Object.keys(t))Lo[f]=t[f];g4(i.config);const d=l(o,i.config,t,s);return Lo=Object.assign({},h),d}else{const c=Object.assign({},Lo);for(const h of Object.keys(t))Lo[h]=t[h];const u=new o(i.config);return Lo=Object.assign({},c),u}}}function jNe(n,e){return n<e?-1:n>e?1:0}function HE(n,e){return-1*jNe(n,e)}function Ef(n){if(n==null)return n;const e=[];for(const t of n)e.indexOf(t)===-1&&e.push(t);return e}function UNe(n){if(n==null)throw new le(`Invalid value in obj: ${JSON.stringify(n)}`);for(const e in n)if(n.hasOwnProperty(e))return!1;return!0}function w0(n,e,t){if(t!=null&&n.indexOf(t)<0)throw new le(`${t} is not a valid ${e}.  Valid values are ${n} or null/undefined.`)}function uV(n,e,t=0,r=1/0){return Zc(t>=0),Zc(r>=t),Array.isArray(n)&&n.length>=t&&n.length<=r&&n.every(s=>typeof s===e)}function Ts(n,e){Array.isArray(n)?(V(n.length>0,()=>`${e} is unexpectedly an empty array.`),n.forEach((t,r)=>Ts(t,`element ${r+1} of ${e}`))):V(Number.isInteger(n)&&n>0,()=>`Expected ${e} to be a positive integer, but got ${Fte(n)}.`)}function Fte(n){return n===null?"null":Array.isArray(n)?"["+n.map(e=>Fte(e)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function WNe(n,e,t){let r=t!=null?t():Ri(),s;return(...a)=>{const o=t!=null?t():Ri();return o-r<e||(r=o,s=n(...a)),s}}function Pte(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let GNe=0;function Ote(){return GNe++}const qE={};function DF(n=""){return n in qE||(qE[n]=0),qE[n]+=1,n+qE[n].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const HNe=["channelsFirst","channelsLast"],qNe=["nearest","bilinear"],KNe=["valid","same","causal"],XNe=["max","avg"],YNe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const U0=new Map;function Lr(n){w0(HNe,"DataFormat",n)}function ZNe(n){w0(qNe,"InterpolationFormat",n)}function Po(n){w0(KNe,"PaddingMode",n)}function Lte(n){w0(XNe,"PoolMode",n)}const Y1=[],EG="/";function xg(n,e){Y1.push(n);try{const t=e();return Y1.pop(),t}catch(t){throw Y1.pop(),t}}function QNe(){return Y1.length===0?"":Y1.join(EG)+EG}function Mte(n){if(!zte(n))throw new Error("Not a valid tensor name: '"+n+"'");return QNe()+n}function $te(n){if(!zte(n))throw new Error("Not a valid tensor name: '"+n+"'");U0.has(n)||U0.set(n,0);const e=U0.get(n);if(U0.set(n,U0.get(n)+1),e>0){const t=`${n}_${e}`;return U0.set(t,1),t}else return n}const JNe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function zte(n){return!!n.match(JNe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e_e(n){return n===parseInt(n.toString(),10)}function If(n,e,t){e==null&&(e=0),t==null&&(t=n.length);let r=1;for(let s=e;s<t;++s)r*=n[s];return r}function xx(n){if(n.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r<e&&(e=r)}return e}function Yf(n){if(n.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r>e&&(e=r)}return e}function cc(n,e){if(e<n)throw new le(`end (${e}) < begin (${n}) is forbidden.`);const t=[];for(let r=n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let OO;function is(){return OO==null&&(OO=UD().epsilon()),OO}function uc(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hu(n,e){return Be(n,e)}function RT(n,e=-1){const t=n.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),ae(n,t)}function t_e(n,e){return he(()=>{if(n.shape.length!==2)throw new le(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const t=RT(n,1);return y4(t,[1,e,1])})}function n_e(n){const e=[If(n.shape)];return ae(n,e)}function r_e(n){if(n.rank<=1)throw new le(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const e=[n.shape[0],If(n.shape,1)];return ae(n,e)}function bg(n,e,t){return he(()=>{switch(n.rank){case 1:return ST(n,e,t);case 2:return hF(n,[e,0],[t,n.shape[1]]);case 3:return kT(n,[e,0,0],[t,n.shape[1],n.shape[2]]);case 4:return yx(n,[e,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3]]);case 5:return nn(n,[e,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return nn(n,[e,0,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new le(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function LO(n,e,t){return he(()=>{switch(n.rank){case 1:return ST(n,e,t);case 2:return hF(n,[0,e],[n.shape[0],t]);case 3:return kT(n,[0,0,e],[n.shape[0],n.shape[1],t]);case 4:return yx(n,[0,0,0,e],[n.shape[0],n.shape[1],n.shape[2],t]);default:throw new le(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function KE(n,e,t,r){return he(()=>{switch(n.rank){case 1:return ST(n,e,t);case 2:switch(r){case 1:return bg(n,e,t);case 2:return LO(n,e,t);default:throw new le(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return bg(n,e,t);case 2:return kT(n,[0,e,0],[n.shape[0],t,n.shape[2]]);case 3:return LO(n,e,t);default:throw new le(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return bg(n,e,t);case 2:return yx(n,[0,e,0,0],[n.shape[0],t,n.shape[2],n.shape[3]]);case 3:return yx(n,[0,0,e,0],[n.shape[0],n.shape[1],t,n.shape[3]]);case 4:return LO(n,e,t);default:throw new le(`The axis is not within the rank of the tensor ${r}`)}default:throw new le(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function hV(n,e=-1){let t;return e<0&&(t=n[0].rank,t!==0?e=t:e=0),e===n[0].rank&&(e=-1),Fr(n,e)}function IG(n,e){switch(n.rank){case 1:return Dz([n,e]);case 2:return Fz([n,e],0);case 3:return Pz([n,e],0);case 4:return Oz([n,e],0);default:throw new le(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function y4(n,e){if(Array.isArray(e)||(e=[e]),n.rank!==e.length)throw new le(`The length of input n (${e.length}) does not match the number of dimensions in input x (${n.rank})`);return vo(n,e)}function FF(n,e=0,t=1,r,s){return rF(n,e,t,r,s)}function du(n,e,t,r){if(n.rank<2||e.rank<2)throw new jt(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=n.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new jt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${e.shape}`)}if(n.rank===2&&e.rank===2)return h4({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?v4(n.rank,r,uc()):null,activation:t});{const s=n.shape.slice(),i=s.pop();n=ae(n,[-1,i]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),c=[...a,o],u=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=ae(tn(e,u),[l,-1]);const h=[...s,...c];return ae(h4({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?v4(n.rank,r,uc()):null,activation:t}),h)}}function Bte(n,e,t){return he(()=>(Array.isArray(e)?e=di(e,"int32"):e=Be(e,"int32"),jb(n,e,t)))}function DT(n){return ie(n,n)}function v4(n,e,t){const r=e.shape;if(e.rank!==1&&e.rank!==n)throw new le(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${n}`);if(n===5){if(t==="channelsFirst")return r.length===1?ae(e,[1,r[0],1,1,1]):ae(e,[1,r[3],r[0],r[1],r[2]]);if(t==="channelsLast")return r.length===1?ae(e,[1,1,1,1,r[0]]):ae(e,[1].concat(r))}else if(n===4){if(t==="channelsFirst")return r.length===1?ae(e,[1,r[0],1,1]):ae(e,[1,r[2],r[0],r[1]]);if(t==="channelsLast")return r.length===1?ae(e,[1,1,1,r[0]]):ae(e,[1].concat(r))}else if(n===3){if(t==="channelsFirst")return r.length===1?ae(e,[1,r[0],1]):ae(e,[1,r[1],r[0]]);if(t==="channelsLast")return r.length===1?ae(e,[1,1,r[0]]):ae(e,[1].concat(r))}else if(n<3)return e;throw new le(`Unsupported input rank by biasAdd: ${e.rank}`)}function vc(n,e,t){return he(()=>(t==null&&(t=uc()),Lr(t),Re(n,v4(n.rank,e,t))))}function s_e(n,e=1){if(e!==1)throw new jt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return zb(n)}function i_e(n){return he(()=>at(n,Re(Ur(n),1)))}function Vte(n,e,t,r){return he(()=>kB(n,e,t,r))}function a_e(n){return he(()=>{const e=Re(.5,ie(.2,n));return ha(e,0,1)})}function FT(n,e,t=!1){return t?n():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const o_e=["fanIn","fanOut","fanAvg"],l_e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c_e(n){w0(o_e,"FanMode",n)}function u_e(n){w0(l_e,"Distribution",n)}class Sl extends b0{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class jte extends Sl{apply(e,t){return qr(e,t)}}jte.className="Zeros";Fe(jte);class dV extends Sl{apply(e,t){return ea(e,t)}}dV.className="Ones";Fe(dV);class Ute extends Sl{constructor(e){if(super(),typeof e!="object")throw new le(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new le(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return he(()=>ie(lt(this.value),ea(e,t)))}getConfig(){return{value:this.value}}}Ute.className="Constant";Fe(Ute);class Wte extends Sl{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return bp(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Wte.className="RandomUniform";Fe(Wte);class Gte extends Sl{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new jt(`randomNormal does not support dType ${t}.`);return FF(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Gte.className="RandomNormal";Fe(Gte);class Hte extends Sl{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new jt(`truncatedNormal does not support dType ${t}.`);return mF(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Hte.className="TruncatedNormal";Fe(Hte);class qte extends Sl{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return he(()=>{if(e.length!==2||e[0]!==e[1])throw new le("Identity matrix initializer can only be used for 2D square matrices.");return ie(this.gain,ZD(e[0]))})}getConfig(){return{gain:this.gain}}}qte.className="Identity";Fe(qte);function h_e(n,e="channelsLast"){let t,r;if(Lr(e),n.length===2)t=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(e==="channelsFirst"){const s=If(n,2);t=n[1]*s,r=n[0]*s}else if(e==="channelsLast"){const s=If(n,0,n.length-2);t=n[n.length-2]*s,r=n[n.length-1]*s}}else{const s=If(n);t=Math.sqrt(s),r=Math.sqrt(s)}return[t,r]}class ja extends Sl{constructor(e){if(super(),e.scale<0)throw new le(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,c_e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,u_e(this.distribution),this.seed=e.seed}apply(e,t){const r=h_e(e),s=r[0],i=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,s):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(s+i)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new jt(`${this.getClassName()} does not support dType ${t}.`);return mF(e,0,o,t,this.seed)}else{const o=Math.sqrt(3*a);return bp(e,-o,o,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ja.className="VarianceScaling";Fe(ja);class fV extends ja{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ja.className}}fV.className="GlorotUniform";Fe(fV);class pV extends ja{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ja.className}}pV.className="GlorotNormal";Fe(pV);class mV extends ja{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ja.className}}mV.className="HeNormal";Fe(mV);class gV extends ja{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ja.className}}gV.className="HeUniform";Fe(gV);class yV extends ja{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ja.className}}yV.className="LeCunNormal";Fe(yV);class vV extends ja{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ja.className}}vV.className="LeCunUniform";Fe(vV);class Kte extends Sl{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return he(()=>{if(e.length<2)throw new jt("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError(`Unsupported data type ${t}.`);t=t;const r=Se(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const a=[Math.max(s,r),Math.min(s,r)],o=FF(a,0,1,t,this.seed),l=IB.qr(o,!1);let c=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=ie(c,h.sign()),r<s&&(c=c.transpose()),ie(lt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Kte.className="Orthogonal";Fe(Kte);const AG={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function NG(n,e={}){return _T(n,fo.getMap().classNameMap,e,"initializer")}function gr(n){return cV(n)}function or(n){if(typeof n=="string"){const e=n in AG?AG[n]:n;if(e==="GlorotNormal")return new pV;if(e==="GlorotUniform")return new fV;if(e==="HeNormal")return new mV;if(e==="HeUniform")return new gV;if(e==="LeCunNormal")return new yV;if(e==="LeCunUniform")return new vV;{const t={};return t.className=e,t.config={},NG(t)}}else return n instanceof Sl?n:NG(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x4(n){return Array.isArray(n)&&Array.isArray(n[0])}function $N(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function wt(n){let e;if(Array.isArray(n)){if(n.length!==1)throw new le(`Expected Tensor length to be 1; got ${n.length}`);e=n[0]}else e=n;return e}function bn(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new le(`Expected exactly 1 Shape; got ${n.length}`)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zN(n){let e=0;for(const t of n)t.shape.length===0?e+=1:e+=t.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _G="Variable";class d_e{constructor(e,t="float32",r=_G,s=!0,i=null){this.dtype=t??"float32",this.shape=e.shape,this.id=Ote(),r=r??_G,this.originalName=Mte(r),this.name=$te(this.originalName),this.trainable_=s,this.constraint=i,this.val=wB(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),f_e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function f_e(n,e){if(n.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(e.shape))}function b4(n){return n.map(e=>e.read())}function xV(n){n.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class as{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Su{constructor(e,t,r,s,i,a,o){this.dtype=e,this.shape=t,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=o,this.id=Ote(),a!=null&&(this.originalName=Mte(a),this.name=$te(this.originalName)),this.rank=t.length}}let p_e=0,PF=class{constructor(e,t){this.callArgs=t,this.id=p_e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},m_e=0;class Zt extends b0{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=m_e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const r=this.getClassName();t=Vu(r)+"_"+DF(r)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new cl(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new le(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ji(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ji(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Yc(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Yc(`Layer ${this.name} is not connected, no input to return.`);return Ji(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Yc(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Yc(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ji(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=Dn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Dn(this.inputSpec);if(t.length!==r.length)throw new le(`Layer ${this.name} expects ${r.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let s=0;s<t.length;s++){const i=t[s],a=r[s];if(a==null)continue;const o=i.rank;if(a.ndim!=null&&o!==a.ndim)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new le(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const l=i.shape;for(const c in a.axes){const u=Number(c),h=a.axes[c],d=u>=0?l[u]:l[l.length+u];if(h!=null&&[h,null].indexOf(d)===-1)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${h} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const c=a.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const r=Dn(e),s=v_e(e),i=x_e(e);if(s===i)throw new le("Arguments to apply() must be all SymbolicTensors or all Tensors");return xg(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of Dn(e))a.push(o.shape);this.build(Ji(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,a);const o=Dn(a),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(a=Ji(l),this.activityRegularizer!=null)throw new jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=g_e(e),o=this.computeOutputShape(a);let l;const c=y_e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((u,h)=>new Su(c,u,this,Dn(e),t,this.name,h)):l=new Su(c,o,this,Dn(e),t,this.name),this.addInboundNode(e,l,null,null,a,o,t),this._refCount++,this.activityRegularizer!=null)throw new jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Yc(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const r=JSON.stringify(t.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new Yc(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new cl(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return zN(this.weights)}build(e){this.built=!0}getWeights(e=!1){return b4(e?this.trainableWeights:this.weights)}setWeights(e){he(()=>{const t=this.weights;if(t.length!==e.length)throw new le(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;const r=[],s=b4(t);for(let i=0;i<s.length;++i){const a=s[i],o=t[i],l=e[i];if(!Qt(a.shape,l.shape))throw new le(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}xV(r)})}addWeight(e,t,r,s,i,a,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new le(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():or("zeros"));const c=s.apply(t,r),u=new d_e(c,r,e,a,o);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),a==null&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Dn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}setMaskMetadata(e,t,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=Dn(t),a=Dn(s);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let o=0;o<i.length;o++)i[o].kerasMask=a[o]}addInboundNode(e,t,r,s,i,a,o=null){const l=Dn(e);t=Dn(t),r=Dn(r),s=Dn(s),i=$N(i),a=$N(a);const c=[],u=[],h=[];for(const d of l)c.push(d.sourceLayer),u.push(d.nodeIndex),h.push(d.tensorIndex);new PF({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:h,inputTensors:l,outputTensors:t,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:a},o);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function g_e(n){n=Dn(n);const e=[];for(const t of n)e.push(t.shape);return Ji(e)}function y_e(n){return"float32"}function Xte(n,e,t){if((e==null||t!=null&&t>0)&&(e=n.sourceLayer,t=n.nodeIndex),e.inboundNodes.length===0)return[n];{const r=e.inboundNodes[t];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const a=r.inputTensors[i],o=r.inboundLayers[i],l=r.nodeIndices[i],c=Xte(a,o,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function v_e(n){let e=!0;for(const t of Dn(n))if(!(t instanceof Su)){e=!1;break}return e}function x_e(n){let e=!0;for(const t of Dn(n))if(t instanceof Su){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class PT extends Zt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:DF("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new le("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new le("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new le("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=t,this.dtype=r,this.inputSpec=[{shape:t}];const s=new Su(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new PF({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new le(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}PT.className="InputLayer";Fe(PT);function b_e(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new le("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=n.batchShape;n.shape!=null&&e==null&&(e=[null].concat(n.shape));let t=n.dtype;return t==null&&(t="float32"),new PT({batchInputShape:e,name:n.name,dtype:t,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w_e(n,e){if(n.dtype==null||n.dtype===e.dtype)return e;try{return Be(e,n.dtype)}catch{throw new le(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class cf{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof cf)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=w_e(e,t),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new le(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Su){if(this.id2Value[e.id]==null)throw new le(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const t=this.name2Id[e];if(t==null)throw new le(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Su){if(this.id2Value[e.id]==null)throw new le(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const t=this.name2Id[e];if(t==null)throw new le(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&qt(this.id2Mask)}}const BN=new Dte,VN=new Dte;function S_e(n){BN!=null&&BN.setMaxEntries(n),VN!=null&&VN.setMaxEntries(n)}function w1(n,e,t,r){const s=t==null?!1:t.training,i=Array.isArray(n),a=i?n:[n],o=a.map(p=>p.name),l=[],c=e.names();for(const p of o)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const u=o.join(",")+"|"+e.names().sort().join(",");let h=BN.get(u),d;if(h==null){const p=k_e(a,e);h=p.sorted,d=p.recipientCounts,BN.put(u,h),VN.put(u,d)}d={},s||Object.assign(d,VN.get(u));const f=new cf(e);for(let p=0;p<h.length;++p){const m=h[p],y=m.sourceLayer;if(y instanceof PT)continue;const g=[],v=[],b=[];let w=!1;for(const A of m.inputs){const N=f.getValue(A),F=f.getMask(A);g.push(N),v.push(F),F!=null&&(w=!0),s||(d[A.name]--,d[A.name]===0&&!e.hasKey(A)&&o.indexOf(A.name)===-1&&!N.isDisposed&&A.sourceLayer.stateful!==!0&&b.push(N))}w&&(t=t||{},t.mask=v[0]);const C=Dn(y.apply(g,t));let I=null;y.supportsMasking&&(I=y.computeMask(g,v));const T=T_e(m),E=Array.isArray(T)?T:[T];for(let A=0;A<E.length;++A){f.hasKey(E[A])||f.add(E[A],C[A],Array.isArray(I)?I[0]:I);const N=o.indexOf(E[A].name);N!==-1&&(l[N]=C[A])}s||qt(b)}return f.disposeMasks(),i?l:l[0]}function k_e(n,e){V(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let t=[],r={};if(n.length===1){const s=RG(n[0],e);t=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of n){const{sorted:a,recipientMap:o}=RG(i,e);for(const l of a)s.has(l.name)||(t.push(l),s.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:t,recipientCounts:C_e(r)}}function C_e(n){const e={};for(const t in n)e[t]=n[t].size;return e}function RG(n,e){const t=new Set,r=[],s={};for(const o of e.names())t.add(o);const i=[],a=[];for(i.push(n);i.length>0;){const o=i[i.length-1];if(t.has(o.name)){i.pop();continue}const l=a[a.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),r.push(o),t.add(o.name),l&&a.pop();else{a.push(i.length-1);for(const c of o.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(o.name),!t.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function T_e(n){let e;if(n.sourceLayer.inboundNodes.length===1)e=n.sourceLayer.output;else{let t=null;for(let r=0;r<n.sourceLayer.inboundNodes.length;++r)for(const s of n.sourceLayer.inboundNodes[r].outputTensors)if(s.id===n.id){t=r;break}e=n.sourceLayer.getOutputAt(t)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E_e=ye();E_e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,S_e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bV(n,e){return he(()=>Rs(rt(ie(n,n),e,!0)))}class OT extends b0{getConfig(){return{}}}class Yte extends OT{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return he(()=>{const t=bV(e,this.axis),r=ha(t,0,this.maxValue);return ie(e,at(r,Re(is(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Yte.className="MaxNorm";Fe(Yte);class Zte extends OT{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return he(()=>at(e,Re(is(),bV(e,this.axis))))}getConfig(){return{axis:this.axis}}}Zte.className="UnitNorm";Fe(Zte);class Qte extends OT{apply(e){return yc(e)}}Qte.className="NonNeg";Fe(Qte);class Jte extends OT{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return he(()=>{const t=bV(e,this.axis),r=Re(ie(this.rate,ha(t,this.minValue,this.maxValue)),ie(1-this.rate,t));return ie(e,at(r,Re(is(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Jte.className="MinMaxNorm";Fe(Jte);const DG={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ls(n){return cV(n)}function FG(n,e={}){return _T(n,fo.getMap().classNameMap,e,"constraint")}function cs(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in DG?DG[n]:n,config:{}};return FG(t)}else return n instanceof OT?n:FG(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Op(n){if(n==null)return;const e=[],t=[],r=[];for(const s in n){const i=n[s];if(typeof i!="number"){const a=i;e.push(a.data()),t.push(s),r.push(a)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)n[t[i]]=s[i][0];qt(r)}}function ene(n){if(n!=null)for(const e in n){const t=n[e];typeof t!="number"&&t.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var PG;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(PG||(PG={}));const I_e=125;class KS{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class A_e{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class N_e extends KS{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});const r=t.size==null?0:t.size;this.seen+=r;for(const s in t){const i=t[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let a;s in this.totals?a=this.totals[s]:this.totals[s]=0;const o=he(()=>Re(this.totals[s],ie(i,r)));this.totals[s]=o,a!=null&&a.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?t[r]=this.totals[r]/this.seen:he(()=>{const s=ie(at(1,this.seen),this.totals[r]);t[r]=s,this.totals[r].dispose(),ss(t[r])}))}}class __e extends KS{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(const r in t)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(t[r])}async syncData(){const e=[],t=[],r=[];for(const i in this.history){const a=this.history[i];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),t.push(i),r.push(o)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[t[i]][r[i]].dispose(),this.history[t[i]][r[i]]=s[i][0]}}class R_e extends KS{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||jB,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=I_e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");_N(this.yieldEvery)&&(this.maybeWait=WNe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,r){const s=[];this.yield!=null&&(await Op(r),s.push(this.yield(e,t,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await Op(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const r=[];this.epochEnd!=null&&(await Op(t),r.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,t){this.batchBegin!=null&&(await Op(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const r=[];this.batchEnd!=null&&(await Op(t),r.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):_N(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Op(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Op(e),await this.trainEnd(e))}}function tne(n,e){return n==null&&(n={}),n instanceof KS?[n]:Array.isArray(n)&&n[0]instanceof KS?n:Dn(n).map(r=>new R_e(r,e))}class zo{constructor(){}static registerCallbackConstructor(e,t){V(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),zo.checkForDuplicate(t),zo.constructors[e]==null&&(zo.constructors[e]=[]),zo.constructors[e].push(t)}static checkForDuplicate(e){for(const t in zo.constructors)zo.constructors[+t].forEach(s=>{if(s===e)throw new le("Duplicate callback constructor.")})}static clear(){zo.constructors={}}static createCallbacks(e){const t=[];for(const r in zo.constructors){const s=+r;e>=s&&t.push(...zo.constructors[s])}return t.map(r=>new r)}}zo.constructors={};function nne(n,e,t,r,s,i,a,o,l){const c=new __e,u=[new N_e,...zo.createCallbacks(e)];n!=null&&u.push(...n),u.push(c);const h=new A_e(u);return h.setParams({epochs:t,initialEpoch:r,samples:s,steps:i,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:h,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ch(n,e={},t=!1){return _T(n,fo.getMap().classNameMap,e,"layer",t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jN(n,e){return he(()=>{n.dtype!=="float32"&&(n=Be(n,"float32"));const t=rt(DT(n),e,!0),r=g0(t.shape,is()),s=Rs(Iu(t,r));return at(n,s)})}function OF(n,e){return he(()=>mr(DT(Ye(e,n)),-1))}function wV(n,e){return he(()=>mr(Ur(Ye(e,n)),-1))}function SV(n,e){return he(()=>{const t=Ye(n,e),r=ha(Ur(n),is(),Number.MAX_VALUE),s=Ur(at(t,r));return ie(100,mr(s,-1))})}function D_e(n,e){return he(()=>{const t=ha(e,is(),Number.MAX_VALUE),r=Ba(Re(1,t)),s=ha(n,is(),Number.MAX_VALUE),i=Ba(Re(1,s));return mr(DT(Ye(r,i)),-1)})}function F_e(n,e){return he(()=>{const t=Iu(0,Ye(1,ie(n,e)));return mr(DT(t),-1)})}function P_e(n,e){return he(()=>{const t=Iu(0,Ye(1,ie(n,e)));return mr(t,-1)})}function O_e(n,e){return he(()=>{const t=rt(ie(n,e),-1),r=To(ie(Ye(1,n),e),-1);return Iu(0,Re(1,Ye(r,t)))})}function L_e(n,e){return he(()=>{const t=Math.log(2),r=Ye(e,n),s=Ye(Re(r,y0(ie(-2,r))),t);return mr(s,-1)})}function XS(n,e,t=!1){return he(()=>{if(t)e=CT(e);else{const r=rt(e,e.shape.length-1,!0);e=at(e,r)}return e=ha(e,is(),1-is()),Kn(rt(ie(Be(n,"float32"),Ba(e)),e.shape.length-1))})}function UN(n,e,t=!1){return he(()=>{const r=Be(Vb(n_e(n)),"int32");e=ha(e,is(),1-is());const s=e.shape,i=ae(Ug(r,s[s.length-1]),s);return XS(i,e,t)})}function M_e(n,e){if(!Qt(n.shape,e.shape))throw new le(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(e.shape)}`);return he(()=>{const t=yc(e),r=Kn(Ur(e));return Re(Ye(t,ie(e,n)),mT(da(r)))})}function LF(n,e){return he(()=>{let t;return t=ha(e,is(),1-is()),t=Ba(at(t,Ye(1,t))),mr(M_e(n,t),-1)})}function $_e(n,e){return he(()=>{const t=ha(n,is(),1),r=ha(e,is(),1);return rt(ie(n,Ba(at(t,r))),-1)})}function z_e(n,e){return he(()=>{const t=Ba(Re(is(),e));return mr(Ye(e,ie(n,t)),-1)})}function rne(n,e){return he(()=>{const t=jN(n,-1),r=jN(e,-1),s=ie(t,r);return Kn(rt(s,-1))})}const WN={meanSquaredError:OF,meanAbsoluteError:wV,meanAbsolutePercentageError:SV,meanSquaredLogarithmicError:D_e,squaredHinge:F_e,hinge:P_e,categoricalHinge:O_e,logcosh:L_e,categoricalCrossentropy:XS,sparseCategoricalCrossentropy:UN,binaryCrossentropy:LF,kullbackLeiblerDivergence:$_e,poisson:z_e,cosineProximity:rne};function MO(n){if(typeof n=="string"){if(n in WN)return WN[n];let e=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new le(e)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sne(n,e){return he(()=>{const t=ie(.5,Va(e)),r=hu(Ui(e,t),n.dtype);return mr(za(n,r),-1)})}function ine(n,e){return he(()=>hu(za(Hf(n,-1),Hf(e,-1)),"float32"))}function B_e(n,e){return he(()=>Be(rt(lc(za(n,1),za(e,1))),"float32"))}function V_e(n,e){return he(()=>Be(rt(lc(za(n,0),za(e,1))),"float32"))}function j_e(n,e){return he(()=>{const t=B_e(n,e),r=V_e(n,e),s=Re(t,r);return Be(Ks(Ui(s,0),at(t,s),0),"float32")})}function U_e(n,e){return LF(n,e)}function W_e(n,e){return n.rank===e.rank&&(n=Pa(n,[n.rank-1])),e=Hf(e,-1),e.dtype!==n.dtype&&(e=Be(e,n.dtype)),Be(za(n,e),"float32")}const G_e=OF,H_e=OF,q_e=wV,K_e=wV,X_e=SV,Y_e=SV,ane=XS,Z_e=rne,one=UN,GN={binaryAccuracy:sne,categoricalAccuracy:ine,precision:j_e,categoricalCrossentropy:ane,sparseCategoricalCrossentropy:one,mse:G_e,MSE:H_e,mae:q_e,MAE:K_e,mape:X_e,MAPE:Y_e,cosine:Z_e};function Q_e(n){if(typeof n=="string"&&n in GN)return GN[n];if(typeof n!="string"&&n!=null)return n;throw new le(`Unknown metric ${n}`)}function XE(n){if(Zc(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let e;for(const t of Object.keys(WN))if(WN[t]===n){e=t;break}if(e!==void 0)return e;for(const t of Object.keys(GN))if(GN[t]===n){e=t;break}return e!==void 0?e:n.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function J_e(n){const e={Adagrad:()=>Up.adagrad(.01),Adadelta:()=>Up.adadelta(1,.95,is()),Adam:()=>Up.adam(.001,.9,.999,is()),Adamax:()=>Up.adamax(.002,.9,.999,is(),0),RMSProp:()=>Up.rmsprop(.001,.9,0,is()),SGD:()=>Up.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,n in e)return e[n]();throw new le(`Unknown Optimizer ${n}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const OG=1*1024*1024;function LG(n,e,t=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!w4(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){const r=JSON.stringify(n);r.length>OG&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${OG}.`)}}function w4(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);for(const t of e)if(typeof t!="string"||!w4(n[t]))return!1;return!0}else if(Array.isArray(n)){for(const e of n)if(!w4(e))return!1;return!0}else return!1;else{const e=typeof n;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eRe(n,e,t,r=console.log){const s=nRe(n),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,t=t||[.32,.61,.89,1]):(e=e||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(u=>Math.floor(e*u)));let a;if(!s){i.push("Receives inputs"),a=[];for(const u in n.nodesByDepth)a.push(...n.nodesByDepth[u])}r("_".repeat(e)),HN(i,t,r),r("=".repeat(e));const o=n.layers;for(let u=0;u<o.length;++u)s?rRe(o[u],t,r):sRe(o[u],t,a,r),r((u===o.length-1?"=":"_").repeat(e));n.checkTrainableWeightsConsistency();const l=tRe(n),c=zN(n.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function tRe(n){let e;return n.collectedTrainableWeights!=null?e=zN(n.collectedTrainableWeights):e=zN(n.trainableWeights),e}function nRe(n){let e=!0;const t=[],r=[];for(const s in n.nodesByDepth)t.push(n.nodesByDepth[s]);for(const s of t){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of n.layers){let i=!1;for(const a of s.inboundNodes)if(r.indexOf(a)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function HN(n,e,t=console.log){let r="";for(let s=0;s<n.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=n[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);t(r)}function rRe(n,e,t){let r,s;try{s=n.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}const i=n.name,a=n.getClassName(),o=[`${i} (${a})`,s,r,n.countParams().toString()];HN(o,e,t)}function sRe(n,e,t,r){let s,i;try{i=n.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(n.outputShape)}catch{s="multiple"}const a=[];for(const h of n.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(h)===-1))for(let d=0;d<h.inboundLayers.length;++d){const f=h.inboundLayers[d].name,p=h.nodeIndices[d],m=h.tensorIndices[d];a.push(`${f}[${p}][${m}]`)}const o=n.name,l=n.getClassName(),c=a.length===0?"":a[0],u=[`${o} (${l})`,i,s,n.countParams().toString(),c];HN(u,e,r);for(let h=1;h<a.length;++h)HN(["","","","",a[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lne(n,e,t){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&e===0&&typeof t=="string"}function S4(n,e){if(n===null)return null;if(typeof n=="string")return Xp(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let s=0;s<r;++s){const i=n[s];lne(e,s,i)?t.push(i):t.push(S4(i,e))}return t}else{const t={};for(const r of Object.keys(n)){const s=n[r];if(r==="name"&&typeof s=="string")t[r]=s;else{const i=Xp(r);t[i]=S4(s,i)}}return t}}function k4(n,e){if(n==null)return null;if(typeof n=="string")return Vu(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let s=0;s<r;++s){const i=n[s];lne(e,s,i)?t.push(i):t.push(k4(i,e))}return t}else{const t={};for(const r of Object.keys(n)){const s=n[r],i=Vu(r);(r==="name"||r==="className")&&typeof s=="string"?t[i]=s:t[i]=k4(s,r)}return t}}/** @license See the LICENSE file. */const cne="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const iRe=n=>{const e=Object.keys(n);if(e.length===0)return!1;const t=e[0].split("/");return!isNaN(parseInt(t[t.length-1],10))};class Al extends Zt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=DF(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Ef(this.inputs).length!==this.inputs.length)throw new le(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);Ef(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const b=v.sourceLayer,w=v.nodeIndex,C=v.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(C)}for(const v of this.inputs){const b=v.sourceLayer,w=v.nodeIndex,C=v.tensorIndex;Zc(w===0,"input layer has >1 nodes"),Zc(C===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const b=this.inputLayers[v];if(!(b instanceof PT))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const t={},r={},s={},i={},a={},o=[],l=(v,b,w,C,I,T)=>{(C==null||I==null||T==null)&&(C=v.sourceLayer,I=v.nodeIndex,T=v.tensorIndex);const E=C.inboundNodes[I];if(w.indexOf(E)!==-1)throw new cl(`The tensor ${v.name} at layer "${C.name}" is part of a cycle.`);if(b.indexOf(E)!==-1)return;this.containerNodes.add(Al.nodeKey(C,I)),C.id in a||(a[C.id]=Object.keys(a).length),w.indexOf(E)===-1&&w.push(E);const A=E.inboundLayers.length;for(let N=0;N<A;N++){const F=E.inputTensors[N],_=E.inboundLayers[N],D=E.nodeIndices[N],R=E.tensorIndices[N];l(F,b,w,_,D,R)}for(b.push(E);w.indexOf(E)>=0;)w.splice(w.indexOf(E),1);o.push(E)},c=[],u=[];for(const v of this.outputs)l(v,c,u);const h=o.slice().reverse();for(const v of h){r[v.id]=v,v.id in t||(t[v.id]=0);let b=t[v.id];const w=s[v.outboundLayer.id]==null?0:s[v.outboundLayer.id];b=Math.max(b,w),s[v.outboundLayer.id]=b,i[v.outboundLayer.id]=v.outboundLayer,t[v.id]=b;for(let C=0;C<v.inboundLayers.length;C++){const I=v.inboundLayers[C],T=v.nodeIndices[C],E=I.inboundNodes[T],A=t[E.id]==null?0:t[E.id];t[E.id]=Math.max(b+1,A),r[E.id]=E}}const d={};for(const v in t){const b=t[v];b in d||(d[b]=[]),d[b].push(r[v])}const f={};for(const v in s){const b=s[v];b in f||(f[b]=[]),f[b].push(i[v])}let p=Object.keys(f).map(v=>parseInt(v,10)).sort(HE);this.layers=[];for(const v of p){const b=f[v];b.sort((w,C)=>{const I=a[w.id],T=a[C.id];return I<T?-1:I>T?1:0});for(const w of b)w instanceof Al&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=f,p=Object.keys(d).map(v=>parseInt(v,10)).sort(HE);const m=this.inputs.slice(),y=[];for(const v of p)for(const b of d[v]){const w=b.outboundLayer;if(w!=null){for(const C of b.inputTensors)if(m.indexOf(C)===-1)throw new cl(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${w.name}". The following previous layers were accessed without issue: ${y}`);for(const C of b.outputTensors)m.push(C);y.push(w.name)}}this.nodesByDepth=d;const g=this.layers.map(v=>v.name);for(const v of g){const b=g.filter(w=>w===v).length;if(b!==1)throw new cl(`The name "${v}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new PF({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new le("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.layers)t.push(...r.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const r={};let s=0;const i=iRe(e);i&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new le(`Duplicate weight name: ${u}`);r[u]=c,s++}const a=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],e[o]]);else if(t)throw new le(`Provided weight data has no target variable: ${o}`);delete r[l]}if(t){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new le(`${o.length} of ${s} weights are not set: ${o}`)}xV(a)}parseWeights(e){for(const t in Object.keys(e)){const r=t.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!s.includes(a)).join("/");i!==t&&(e[i]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${cne}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const r=k4(this.updatedConfig());return t?JSON.stringify(r):r}call(e,t){return he(()=>{e=Dn(e);const r=new cf;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return w1(this.outputs,r,t)})}computeMask(e,t){return he(()=>{e=Dn(e);let r;return t==null?r=Gg(null,e.length):r=Dn(t),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const t=$N(e);if(t.length!==this.inputLayers.length)throw new le(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<t.length;o++){const l=this.inputLayers[o],c=t[o],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(HE);if(s.length>1)for(const o of s){const l=this.nodesByDepth[o];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const h=[];for(let m=0;m<c.inboundLayers.length;m++){const y=c.inboundLayers[m],g=c.nodeIndices[m],v=c.tensorIndices[m],b=`${y.name}_${g}_${v}`,w=r[b];h.push(w)}const d=u.computeOutputShape(Ji(h)),f=$N(d),p=u.inboundNodes.indexOf(c);for(let m=0;m<f.length;m++){const y=`${u.name}_${p}_${m}`;r[y]=f[m]}}}const i=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],u=this.outputLayersTensorIndices[o],h=`${l.name}_${c}_${u}`;a.push(h)}for(let o=0;o<a.length;o++){const l=a[o];Zc(l in r),i.push(r[l])}return Ji(i)}runInternalGraph(e,t){t==null&&(t=Gg(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],h=t[l];r[c.id]=[u,h]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(HE);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const h=u.outboundLayer,d=u.inputTensors,f=u.outputTensors,p=new Array;for(const m of d)m.id in r&&p.push(r[m.id]);if(p.length===d.length){let m={},y,g,v,b;if(u.callArgs!=null&&(m=u.callArgs),p.length===1){const[w,C]=p[0];m.mask==null&&(m.mask=C),v=Dn(h.call(w,m)),b=Dn(h.computeMask(w,C)),y=[w],g=[C]}else y=p.map(w=>w[0]),g=p.map(w=>w[1]),m.mask==null&&(m.mask=g),v=Dn(h.call(y,m)),b=Dn(h.computeMask(y,g));if(h.activityRegularizer)throw new jt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<f.length;++w){const C=f[w],I=v[w],T=b[w];r[C.id]=[I,T]}}}}const i=[],a=[],o=[];for(const l of this.outputs){Zc(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];o.push(c.shape),i.push(c),a.push(u)}return[i,a,o]}buildNodeConversionMap(e){const t={};let r;for(const s of this.layers){r=s instanceof Al?1:0;for(let i=0;i<s.inboundNodes.length;i++){const a=Al.nodeKey(s,i);this.containerNodes.has(a)&&(t[a]=r,r+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new le("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new le(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new le(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return he(()=>{const e=[];for(const t of this.layers)for(let r=0;r<t.inboundNodes.length;++r){const s=Al.nodeKey(t,r);this.containerNodes.has(s)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),c=[];for(let h=0;h<a.inboundNodes.length;h++){const d=a.inboundNodes[h],f=Al.nodeKey(a,h);let p={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(d.inboundLayers.length>0){const m=[];for(let y=0;y<d.inboundLayers.length;y++){const g=d.inboundLayers[y],v=d.nodeIndices[y],b=d.tensorIndices[y],w=Al.nodeKey(g,v);let C=t[w];C==null&&(C=0),m.push([g.name,C,b,p])}c.push(m)}}}const u={};u.name=a.name,u.className=o,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],c=Al.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=t[c];u==null&&(u=0);const h=this.inputLayersTensorIndices[a];s.push([o.name,u,h])}e.inputLayers=s;const i=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=Al.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=t[c];u==null&&(u=0);const h=this.outputLayersTensorIndices[a];i.push([o.name,u,h])}return e.outputLayers=i,e}static fromConfig(e,t,r={},s=!1){const i={},a={};function o(y,g){y.name in a?a[y.name].push(g):a[y.name]=[g]}function l(y,g){const v=[];let b;for(const w of g){const C=w[0],I=w[1],T=w[2];if(b=w[3]==null?{}:w[3],!(C in i)){o(y,g);return}const E=i[C];if(E.inboundNodes.length<=I){o(y,g);return}const A=E.inboundNodes[I];v.push(A.outputTensors[T])}v.length>0&&y.apply(Ji(v),b)}function c(y){const g=y.name,v=Ch(y,t.customObjects!=null?t.customObjects:{});v.setFastWeightInitDuringBuild(s),i[g]=v,y.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new le(`Corrupted configuration, expected array for nodeData: ${w}`);o(v,w)})}const u=t.name,h=t.layers;for(const y of h)c(y);for(;!UNe(a);)for(const y of h){const g=i[y.name];if(g.name in a){const v=a[g.name];delete a[g.name];for(const b of v)l(g,b)}}const d=[],f=[],p=t.inputLayers;for(const y of p){const g=y[0],v=y[1],b=y[2];Zc(g in i);const C=i[g].inboundNodes[v].outputTensors;d.push(C[b])}const m=t.outputLayers;for(const y of m){const g=y[0],v=y[1],b=y[2];Zc(g in i);const C=i[g].inboundNodes[v].outputTensors;f.push(C[b])}return new e({inputs:d,outputs:f,name:u})}get stateful(){if(this._stateful)throw new le("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){he(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aRe(n,e,t){const r=e.length;if(n==null||Array.isArray(n)&&n.length===0)return e.map(s=>null);if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&e[0]in n?[n[e[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error(`Provided ${t} is an array of ${n.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const s=[];return e.forEach(i=>{i in n?s.push(n[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${t} must be either an array with ${r} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(n)}`)}function une(n,e){return aRe(n,e,"classWeight")}async function hne(n,e,t,r){if(t!=null){const s=he(()=>{if(n.shape.length===1)return cu(n);if(n.shape.length===2){if(n.shape[1]>1)return Hf(n,1);if(n.shape[1]===1)return ae(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());qt(s);const a=[];return i.forEach(o=>{if(t[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(t[o])}),di(a,"float32")}else return null}function oRe(n,e){return ie(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lRe=32;function dne(n,e){let t,r;const s=e;t=s.xs,r=s.ys,V(t!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=MG("input",n.inputNames,t),a=MG("output",n.outputNames,r),o=i[0].shape[0];V(i.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),V(a.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let l=0;l<i.length;l++)V(i[l].shape[0]===o,()=>`Batch size mismatch: input ${n.inputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);for(let l=0;l<a.length;l++)V(a[l].shape[0]===o,()=>`Batch size mismatch: output ${n.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);return{xs:i,ys:a}}function MG(n,e,t){if(t instanceof Sn)return[t];if(Array.isArray(t))return V(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${n} keys ${e}.`),t;{const r=[];for(const s of e){if(t[s]==null)throw new le(`The feature data generated by the dataset lacks the required ${n} key '${s}'.`);r.push(t[s])}return r}}function cRe(n){if(n.length===3)throw new jt("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function uRe(n,e,t){const r=t.batchesPerEpoch!=null;if(V(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),V(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),V(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),V(!r||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),V(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const s=t.validationData!=null;let i,a;if(s)if($G(t.validationData))V(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{const y=cRe(t.validationData);i=y.xs,a=y.ys}const o=n.makeTrainFunction(),l=n.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(y=>"val_"+y)):c=l.slice();const u=tne(t.callbacks,t.yieldEvery),h=t.verbose==null?1:t.verbose,{callbackList:d,history:f}=nne(u,h,t.epochs,null,null,hRe(e,t),null,s,c);d.setModel(n),n.history=f,await d.onTrainBegin(),n.stopTraining_=!1;let p=t.initialEpoch==null?0:t.initialEpoch,m=await e.iterator();for(;p<t.epochs;){const y={};await d.onEpochBegin(p);let g=0,v=0;for(r||(m=await e.iterator());!r||g<t.batchesPerEpoch;){const b=await m.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:w,ys:C}=dne(n,b.value),I={};I.batch=v,I.size=w[0].shape[0],await d.onBatchBegin(v,I);const T=[];if(t.classWeight!=null){const N=une(t.classWeight,n.outputNames);for(let F=0;F<N.length;++F)T.push(await hne(C[F],null,N[F]))}const E=w.concat(C).concat(T),A=o(E);qt(E);for(let N=0;N<l.length;++N){const F=l[N],_=A[N];I[F]=_,ss(_)}await d.onBatchEnd(v,I),ene(I),v++,g++}if(r?g>=t.batchesPerEpoch:b.done){if(s){let w;$G(t.validationData)?w=Dn(await n.evaluateDataset(t.validationData,{batches:t.validationBatches})):w=Dn(n.evaluate(i,a,{batchSize:t.validationBatchSize==null?lRe:t.validationBatchSize,verbose:0}));for(let C=0;C<n.metricsNames.length;++C)y[`val_${n.metricsNames[C]}`]=w[C]}break}if(n.stopTraining_)break}if(await d.onEpochEnd(p,y),p++,n.stopTraining_)break}return await d.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function hRe(n,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(n.size)&&(t=n.size),t}function $G(n){return typeof n.iterator=="function"}function dRe(n){return typeof n.next=="function"}async function fRe(n,e,t){t=t||{};const r=t.batches!=null,s=n.testFunction;let i=[];if(t.verbose>0)throw new jt("Verbose mode is not implemented yet.");V(!r||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);const a=dRe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<t.batches;){const c=await a.next();if(i=he(()=>{if(c.value){const{xs:u,ys:h}=dne(n,c.value),d=u.concat(h),f=he(()=>s(d));if(qt(d),l===0)for(let m=0;m<f.length;++m)i.push(lt(0));const p=d[0].shape[0];for(let m=0;m<f.length;++m){const y=f[m],g=i[m];i[m]=he(()=>Re(i[m],ie(p,y))),l>0&&qt(g)}qt(f),o+=p,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=at(i[c],o),qt(u)}return Ji(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $O(n){V(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function Vw(n,e,t){return n==null?[null]:Array.isArray(n)?n.map(r=>bg(r,e,t-e)):bg(n,e,t-e)}function C4(n,e){return he(()=>n==null?null:Array.isArray(n)?n.map(t=>C4(t,e)):Bte(n,e.dtype==="int32"?e:Be(e,"int32")))}function zO(n,e){const t=[];let r=0,s=null;for(;r<n;)s=r+e,s>=n&&(s=n),t.push([r,s]),r=s;return t}function fne(n){const e=[];n instanceof Sn&&(n=[n]);for(let t=0;t<n.length;++t){const r=n[t];if(r.rank===1)e.push(RT(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Tl(n,e){if(n==null)return;const t=[];if(e instanceof Sn)t.push(e.id);else if(Array.isArray(e))e.forEach(s=>t.push(s.id));else if(e!=null)for(const s in e){const i=e[s];t.push(i.id)}const r=[];if(n instanceof Sn)t.indexOf(n.id)===-1&&r.push(n);else if(Array.isArray(n))n.forEach(s=>{t.indexOf(s.id)===-1&&r.push(s)});else if(n!=null)for(const s in n){const i=n[s];t.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pRe(n){return n instanceof Sn}function T4(n){return Array.isArray(n)}function zG(n){return!pRe(n)&&!T4(n)}function BG(n,e,t,r=!0,s=""){if(e==null||e.length===0){if(n!=null){let a=!1;if(T4(n)&&n.length>0)a=!0;else if(zG(n)){for(const o in n)if(n.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new le(`Error when checking model ${s} expected no data, but got ${n}`)}return[]}if(n==null)return e.map(a=>null);let i;if(zG(n)){n=n,i=[];for(const a of e){if(n[a]==null)throw new le(`No data provided for "${a}". Need data for each key in: ${e}`);i.push(n[a])}}else if(T4(n)){if(n=n,n.length!==e.length)throw new le(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);i=n}else{if(n=n,e.length>1)throw new le(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);i=[n]}if(i=fne(i),t!=null)for(let a=0;a<e.length;++a){if(t[a]==null)continue;const o=i[a];if(o.shape.length!==t[a].length)throw new le(`Error when checking ${s}: expected ${e[a]} to have ${t[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<t[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=t[a][l];if(u!=null&&u>=0&&c!==u)throw new le(`${s} expected a batch of elements where each example has shape [${t[a].slice(1,t[a].length)}] (i.e.,tensor shape [*,${t[a].slice(1,t[a].length)}]) but the ${s} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function mRe(n,e,t){const r=Ef(n.map(i=>i.shape[0]));r.sort();const s=Ef(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new le(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(i=>i.shape))}`);if(s.length>1)throw new le(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!Qt(r,s))throw new le(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function gRe(n,e,t){const r=[OF,LF,XS];for(let s=0;s<n.length;++s){const i=n[s],a=e[s],o=t[s];if(a!=null){if(a===XS&&i.shape[i.shape.length-1]===1)throw new le(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=i.shape.slice(1),c=o.slice(1);for(let u=0;u<l.length;++u){const h=l[u],d=c[u];if(d!=null&&h!==d)throw new le(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function VG(n,e,t,r=!0,s=""){let i;if(Array.isArray(n)){if(n.length!==e.length)throw new le(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${n.length} Tensors(s).`);i=n}else{if(e.length>1)throw new le(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);i=[n]}if(t!=null)for(let a=0;a<e.length;++a){if(t[a]==null)continue;const o=i[a];if(o.shape.length!==t[a].length)throw new le(`Error when checking ${s}: expected ${e[a]} to have ${t[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<t[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=t[a][l];if(u!=null&&u!==c)throw new le(`Error when checking ${s}: expected ${e[a]} to have shape ${JSON.stringify(t[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function yRe(n,e){if(n==null||Array.isArray(n)&&n.length===0)return e.map(r=>[]);let t;if(typeof n=="string"||typeof n=="function")t=[n];else if(Array.isArray(n)||typeof n=="object")t=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(t))return e.map(r=>t);{const r=[];for(const s of e){let i=t.hasOwnProperty(s)?t[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const vRe="layers-model";class jy extends Al{constructor(e){super(e),this.isTraining=!1}summary(e,t,r=console.log){if(!this.built)throw new le("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");eRe(this,e,t,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=J_e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof nd))throw new le("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new le(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),t.push(MO(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new le(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(o=>MO(o))}else{const a=MO(e.loss);this.outputs.forEach(o=>{t.push(a)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],xg("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const s=yRe(e.metrics,this.outputNames),i=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};xg("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=s[a];(c=>{const u="";let h,d,f;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const y=this.internalOutputShapes[a];y[y.length-1]===1||this.lossFunctions[a]===LF?["accuracy","acc"].indexOf(p)!==-1?d=sne:["crossentropy","ce"].indexOf(p)!==-1&&(d=U_e):this.lossFunctions[a]===UN?["accuracy","acc"].indexOf(p)!==-1?d=W_e:["crossentropy","ce"].indexOf(p)!==-1&&(d=one):["accuracy","acc"].indexOf(p)!==-1?d=ine:["crossentropy","ce"].indexOf(p)!==-1&&(d=ane);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),f=d,h=u+g}else f=Q_e(p),h=u+XE(p);let m;xg(h,()=>{m=f}),i(a,h,m)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,r={}){const s=r.batchSize==null?32:r.batchSize;$O(s);const a=this.standardizeUserDataXY(e,t,!0,s);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,s,r.verbose,r.steps);return Ji(c)}finally{Tl(a[0],e),Tl(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),fRe(this,e,t)}checkNumSamples(e,t,r,s="steps"){let i;if(r!=null){if(i=null,t!=null)throw new le(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new le(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new le("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(t),s=r?t:[t],i=this.retrieveSymbolicTensors(s),a=new cf;if(e instanceof Sn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new le(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new le(`No value is provided for the model's input ${l.name}`);a.add(l,c)}const o=w1(i,a);return r?o:o[0]}retrieveSymbolicTensors(e){const t=Gg(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],a=i.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(t[o]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw t.forEach((i,a)=>{i==null&&s.push(e[a])}),new le(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return t}predictLoop(e,t=32,r=!1){return he(()=>{const s=this.checkNumSamples(e);if(r)throw new jt("Verbose predictLoop() is not implemented yet.");const i=zO(s,t),a=this.outputs.map(o=>[]);for(let o=0;o<i.length;++o)he(()=>{const c=i[o][0],u=i[o][1],h=Vw(e,c,u),d=[];if(Array.isArray(h))for(let p=0;p<h.length;++p)d.push({key:this.inputs[p],value:h[p]});else d.push({key:this.inputs[0],value:h});const f=new cf(d);return w1(this.outputs,f)}).forEach((c,u)=>a[u].push(c));return Ji(a.map(o=>Fr(o,0)))})}predict(e,t={}){const r=fne(e);VG(r,this.inputNames,this.feedInputShapes,!1);try{const s=t.batchSize==null?32:t.batchSize;return $O(s),this.predictLoop(r,s)}finally{Tl(r,e)}}predictOnBatch(e){VG(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,r=!0,s){if(this.optimizer_==null)throw new cl("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===UN?i.push(o.slice(0,o.length-1).concat([1])):i.push(o)}if(e=BG(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=BG(t,this.feedOutputNames,i,!1,"target"),mRe(e,t),gRe(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new le(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,r,s,i=!0,a){const[o,l]=this.standardizeUserDataXY(e,t,i,a);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=une(s,this.outputNames);c=[];for(let h=0;h<u.length;++h)c.push(await hne(l[h],null,u[h]))}return[o,l,c]}testLoop(e,t,r,s=0,i){return he(()=>{const a=this.checkNumSamples(t,r,i,"steps"),o=[];if(s>0)throw new jt("Verbose mode is not implemented yet.");if(i!=null)throw new jt("steps mode in testLoop() is not implemented yet");{const l=zO(a,r),c=di(cc(0,a));for(let u=0;u<l.length;++u){const h=l[u][0],d=l[u][1],f=bg(c,h,d-h),p=C4(t,f),m=e(p);if(u===0)for(let y=0;y<m.length;++y)o.push(lt(0));for(let y=0;y<m.length;++y){const g=m[y];o[y]=Re(o[y],ie(d-h,g))}}for(let u=0;u<o.length;++u)o[u]=at(o[u],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(TG(e,s)>1){const a=TG(e.slice(0,r),s);i+=`_${a}`}t.push(i)}return t}makeTrainFunction(){return e=>{const t=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const h=[];for(let m=0;m<this.inputs.length;++m)h.push({key:this.inputs[m],value:r[m]});const d=new cf(h),f=w1(this.outputs,d,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const y=this.lossFunctions[m];let g=y(s[m],f[m]);i[m]!=null&&(g=oRe(g,i[m]));const v=mr(g);t.push(v),m===0?p=g:p=Re(p,g)}for(let m=0;m<this.metricsTensors.length;++m){let y;if(this.outputs.length>1&&m<this.outputs.length)y=t[m];else{const g=this.metricsTensors[m][0],v=this.metricsTensors[m][1];y=mr(g(s[v],f[v]))}ss(y),a.push(y)}return p=mr(p),this.calculateLosses().forEach(m=>{p=Re(p,m)}),p},l=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>he(()=>{const t=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let c=0;c<this.inputs.length;++c)a.push({key:this.inputs[c],value:s[c]});const o=new cf(a),l=w1(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],h=mr(u(i[c],l[c]));c===0?r=h:r=Re(r,h),t.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],h=this.metricsTensors[c][1],d=mr(u(i[h],l[h]));t.push(d)}return t})}async fit(e,t,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,a,o,l,c,u,h,d;try{const f=r.batchSize==null?32:r.batchSize;$O(f);const m=await this.standardizeUserData(e,t,r.sampleWeight,r.classWeight,!1,f);s=m[0],i=m[1],d=m[2];let y=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new jt("validationData including sample weights is not supported yet."):new le(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const N=await this.standardizeUserData(l,c,null,null,!0,f);u=N[0],h=N[1],g=u.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const A=Math.floor(s[0].shape[0]*(1-r.validationSplit)),N=s[0].shape[0];u=Vw(s,A,N),a=s,s=Vw(s,0,A),h=Vw(i,A,N),o=i,i=Vw(i,0,A),g=u.concat(h)}else r.validationSteps!=null&&(y=!0);const v=s.concat(i).concat(d);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),w=this.getDedupedMetricsNames();let C,I;y?(this.makeTestFunction(),C=this.testFunction,I=w.slice().concat(w.map(A=>"val_"+A))):(C=null,g=[],I=w.slice());const T=tne(r.callbacks,r.yieldEvery);return await this.fitLoop(b,v,w,f,r.epochs,r.verbose,T,C,g,r.shuffle,I,r.initialEpoch,null,null)}finally{this.isTraining=!1,Tl(s,e),Tl(i,t),Tl(a,e),Tl(o,t),Tl(u,l),Tl(h,c),d!=null&&qt(d)}}async fitLoop(e,t,r,s,i,a,o,l,c,u,h,d,f,p){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),d==null&&(d=0);let m=!1;if(l!=null&&c!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new le("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(t,s,f,"steps_per_epoch");let g;y!=null&&(g=cc(0,y)),a==null&&(a=1);const{callbackList:v,history:b}=nne(o,a,i,d,y,f,s,m,h);v.setModel(this),this.history=b,await v.onTrainBegin(),this.stopTraining_=!1;for(let w=d;w<i;++w){await v.onEpochBegin(w);const C={};if(f!=null)throw new jt("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new jt("batch shuffling is not implemneted yet");u&&ez(g);const I=di(g),T=zO(y,s);for(let E=0;E<T.length;++E){const A={};if(await v.onBatchBegin(E,A),he(()=>{const N=T[E][0],F=T[E][1],_=bg(I,N,F-N);A.batch=E,A.size=F-N;const D=C4(t,_),R=e(D);for(let B=0;B<r.length;++B){const z=r[B],W=R[B];A[z]=W,ss(W)}if(E===T.length-1&&m){const B=this.testLoop(l,c,s);for(let z=0;z<r.length;++z){const W=r[z],K=B[z];ss(K),C["val_"+W]=K}}}),await v.onBatchEnd(E,A),ene(A),this.stopTraining_)break}I.dispose()}if(await v.onEpochEnd(w,C),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return uRe(this,e,t)}async trainOnBatch(e,t){const r=await this.standardizeUserData(e,t),s=r[0],i=r[1],o=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of o){const u=await c.data();l.push(u[0])}return qt(o),Tl(r[0],e),Tl(r[1],t),Ji(l)}getNamedWeights(e){const t=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let a=0;a<s.length;++a)r&&!s[a].trainable||t.push({name:s[a].originalName,tensor:i[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const t=r4().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-r4().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Vu(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Vu(t))}else{const t=Object.keys(this.loss);e={};const r=this.loss;for(const s of t)if(typeof r[s]=="string")e[s]=Vu(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Vu(XE(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Vu(XE(e)));{const e={};for(const t in this.metrics)e[t]=Vu(XE(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const t=S4(e.optimizer_config),r=Ch(t);let s;if(typeof e.loss=="string")s=Xp(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(a=>Xp(a));else if(e.loss!=null){s={};for(const a in e.loss)s[a]=Xp(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>Xp(a));else if(e.metrics!=null){i={};for(const a in e.metrics)i[a]=Xp(e.metrics[a])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,t){if(typeof e=="string"){const c=IJ(e);if(c.length===0)throw new le(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new le(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new le("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await s4(this.getNamedWeights(t)),o={modelTopology:this.toJSON(null,!1),format:vRe,generatedBy:`TensorFlow.js tfjs-layers v${cne}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:h}=await s4(await this.optimizer.getWeights(),c);r.specs.push(...h),r.data=CJ([r.data,u])}return this.userDefinedMetadata!=null&&(LG(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){LG(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}jy.className="Model";Fe(jy);class pne extends jy{}pne.className="Functional";Fe(pne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class YS extends jy{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:DF("sequential_"),e.layers!=null)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new le(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof YS||e instanceof jy;let r;if(t){if(r=e,r.outputs.length!==1)throw new le("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new le("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new le("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=b_e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new le(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new le("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Xte(this.outputs[0])}this.inboundNodes=[],new PF({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Gg(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(bn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new jy({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,r=console.log){this.built||this.build(),super.summary(e,t,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,r={}){if(!this.built)throw new cl("The model needs to be compiled before being used.");return this.model.evaluate(e,t,r)}async evaluateDataset(e,t){if(!this.built)throw new cl("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,r={}){if(!this.built)throw new cl("The model needs to be compiled before being used.");return this.model.fit(e,t,r)}async fitDataset(e,t){if(!this.built)throw new cl("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,r={},s=!1){let i,a={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new le("Legacy serialization format not supported yet.");i=t}else V(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=t.layers,delete t.layers,a=t;const o=new e(a);if(!(o instanceof YS))throw new jt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of i){const u=Ch(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),o.add(u)}return o}set stopTraining(e){if(this.model==null)throw new le("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new le("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const r={};r.className=t.getClassName(),r.config=t.getConfig(),e.push(r)}return{name:this.name,layers:e}}}YS.className="Sequential";Fe(YS);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let yi=class extends b0{getConfig(){return{}}};class mne extends yi{apply(e,t=1){return s_e(e,t)}}mne.className="elu";Fe(mne);class gne extends yi{apply(e){return oF(e)}}gne.className="selu";Fe(gne);class yne extends yi{apply(e){return yc(e)}}yne.className="relu";Fe(yne);class vne extends yi{apply(e){return he(()=>Xf(6,yc(e)))}}vne.className="relu6";Fe(vne);class xne extends yi{apply(e){return e}}xne.className="linear";Fe(xne);class bne extends yi{apply(e){return Co(e)}}bne.className="sigmoid";Fe(bne);class wne extends yi{apply(e){return a_e(e)}}wne.className="hardSigmoid";Fe(wne);class Sne extends yi{apply(e){return y0(e)}}Sne.className="softplus";Fe(Sne);class kne extends yi{apply(e){return i_e(e)}}kne.className="softsign";Fe(kne);class Cne extends yi{apply(e){return Kf(e)}}Cne.className="tanh";Fe(Cne);let kV=class extends yi{apply(e,t=-1){return CT(e,t)}};kV.className="softmax";Fe(kV);class Tne extends yi{apply(e,t=-1){return JD(e,t)}}Tne.className="logSoftmax";Fe(Tne);class Ene extends yi{apply(e){return he(()=>he(()=>{const t=Math.sqrt(2),r=ie(.5,Re(1,YD(at(e,t))));return ie(e,r)}))}}Ene.className="gelu";Fe(Ene);class Ine extends yi{apply(e){return he(()=>ie(.5,ie(e,Re(1,Kf(ie(Rs(at(2,Math.PI)),Re(e,ie(.044715,bu(e,3)))))))))}}Ine.className="gelu_new";Fe(Ine);class Ane extends yi{apply(e){return he(()=>ie(e,Kf(y0(e))))}}Ane.className="mish";Fe(Ane);class Nne extends yi{apply(e,t=1){return he(()=>ie(Co(ie(e,t)),e))}}Nne.className="swish";Fe(Nne);function Zf(n){return n.getClassName()}function BO(n,e={}){return _T(n,fo.getMap().classNameMap,e,"activation")}function Qf(n){if(n==null){const e={};return e.className="linear",e.config={},BO(e)}if(typeof n=="string"){const e={};return e.className=n,e.config={},BO(e)}else return n instanceof yi?n:BO(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xRe(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class _ne extends b0{}class Rne extends _ne{constructor(e){super(),xRe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return he(()=>{let t=qr([1]);return this.hasL1&&(t=Re(t,rt(ie(this.l1,Ur(e))))),this.hasL2&&(t=Re(t,rt(ie(this.l2,DT(e))))),ae(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}Rne.className="L1L2";Fe(Rne);const jG={l1l2:"L1L2"};function jn(n){return cV(n)}function UG(n,e={}){return _T(n,fo.getMap().classNameMap,e,"regularizer")}function lr(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in jG?jG[n]:n,config:{}};return UG(t)}else return n instanceof _ne?n:UG(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dne extends Zt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=wt(e);let r=yc(e);return this.maxValue!=null&&(r=ha(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}Dne.className="ReLU";Fe(Dne);class Fne extends Zt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=wt(e);return pT(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}Fne.className="LeakyReLU";Fe(Fne);class Pne extends Zt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=or(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=lr(e.alphaRegularizer),this.alphaConstraint=cs(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new le(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=bn(e);const t=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)t[s-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new as({ndim:e.length,axes:r})],this.built=!0}call(e,t){return e=wt(e),wT(e,this.alpha.read())}getConfig(){const e={alphaInitializer:gr(this.alphaInitializer),alphaRegularizer:jn(this.alphaRegularizer),alphaConstraint:ls(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}Pne.className="PReLU";Fe(Pne);let One=class extends Zt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new jt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=wt(e);return zb(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};One.className="ELU";Fe(One);class Lne extends Zt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){const r=wt(e);return ie(r,Be(Ui(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}Lne.className="ThresholdedReLU";Fe(Lne);class Mne extends Zt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new kV().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){return he(()=>{let r=wt(e);const s=t.mask;if(s!=null){const i=ie(Ye(ea(r.shape),Be(s,r.dtype)),lt(-1e9));r=Re(r,i)}return this.axis instanceof Array?this.axis.length>1?da(Ye(r,gT(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}Mne.className="Softmax";Fe(Mne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Uy(n,e,t){if(typeof n=="number")return Gg(n,e);if(n.length!==e)throw new le(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${n.length} elements.`);for(let r=0;r<e;++r){const s=n[r];if(!e_e(s))throw new le(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(n)} including a non-integer number ${s}`)}return n}function rc(n,e,t,r,s=1){if(n==null)return n;const i=e+(e-1)*(s-1);let a;return t==="same"?a=n:a=n-i+1,Math.floor((a+r-1)/r)}function Qc(n,e,t,r){if(n==null)return null;if(r==="valid")n=n*e+Yf([t-e,0]);else if(r==="same")n=n*e;else throw new le(`Unsupport padding mode: ${r}.`);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CV(n,e){return he(()=>(Lr(e),e==="channelsFirst"?tn(n,[0,2,3,1]):n))}function $ne(n,e){return he(()=>(Lr(e),e==="channelsFirst"?tn(n,[0,2,3,4,1]):n))}function bRe(n,e,t,r=1,s="valid",i,a=1){return he(()=>{if(i==null&&(i=uc()),Lr(i),n.shape.length!==3)throw new le(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(e.shape.length!==3)throw new le(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new le(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(i==="channelsFirst"&&(n=tn(n,[0,2,1])),s==="causal")throw new jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=HD(n,e,r,s==="same"?"same":"valid","NWC",a);return t!=null&&(o=vc(o,t)),o})}function WG(n,e,t,r=[1,1],s="valid",i,a,o=null){return he(()=>{if(i==null&&(i=uc()),Lr(i),n.rank!==3&&n.rank!==4)throw new le(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(e.rank!==3&&e.rank!==4)throw new le(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let l=CV(n,i);if(s==="causal")throw new jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Iee({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:t,activation:o}),i==="channelsFirst"&&(l=tn(l,[0,3,1,2])),l})}function wRe(n,e,t,r=[1,1,1],s="valid",i,a){return he(()=>{if(i==null&&(i=uc()),Lr(i),n.rank!==4&&n.rank!==5)throw new le(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(e.rank!==4&&e.rank!==5)throw new le(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let o=$ne(n,i);if(s==="causal")throw new jt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=Mz(o,e,r,s==="same"?"same":"valid","NDHWC",a),t!=null&&(o=vc(o,t)),i==="channelsFirst"&&(o=tn(o,[0,4,1,2,3])),o})}class MF extends Zt{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",MF.verifyArgs(t),this.rank=e,Ts(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new jt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Uy(t.kernelSize,e,"kernelSize"),this.strides=Uy(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,Po(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Lr(this.dataFormat),this.activation=Qf(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=or(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=cs(t.biasConstraint),this.biasRegularizer=lr(t.biasRegularizer),this.activityRegularizer=lr(t.activityRegularizer),this.dilationRate=Uy(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new le(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new le(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new le(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Zc("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!uV(e.kernelSize,"number",1,3))throw new le(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Zf(this.activation),useBias:this.useBias,biasInitializer:gr(this.biasInitializer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),biasConstraint:ls(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class Wb extends MF{constructor(e,t){super(e,t),this.kernel=null,Wb.verifyArgs(t),this.filters=t.filters,Ts(this.filters,"filters"),this.kernelInitializer=or(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=cs(t.kernelConstraint),this.kernelRegularizer=lr(t.kernelRegularizer)}build(e){e=bn(e);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new le(`The channel dimension of the input should be defined. Found ${e[t]}`);const r=e[t],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:r}}],this.built=!0}call(e,t){return he(()=>{e=wt(e);let r;const s=this.bias==null?null:this.bias.read(),i=Pte(this.activation.getClassName());if(i!=null&&this.rank===2)r=WG(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=bRe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=WG(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=wRe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new jt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=bn(e);const t=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const a=rc(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);t.push(a)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(t),s.push(this.filters)):(s.push(this.filters),s=s.concat(t)),s}getConfig(){const e={filters:this.filters,kernelInitializer:gr(this.kernelInitializer),kernelRegularizer:jn(this.kernelRegularizer),kernelConstraint:ls(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new le(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class LT extends Wb{constructor(e){super(2,e),LT.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!uV(e.kernelSize,"number",1,2))throw new le(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}LT.className="Conv2D";Fe(LT);class MT extends Wb{constructor(e){super(3,e),MT.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new le(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}MT.className="Conv3D";Fe(MT);class zne extends LT{constructor(e){if(super(e),this.inputSpec=[new as({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new le(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bn(e),e.length!==4)throw new le("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new le("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new as({ndim:4,axes:{[t]:r}})],this.built=!0}call(e,t){return he(()=>{let r=wt(e);if(r.shape.length!==4)throw new le(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=s[a],c=s[o],u=this.kernelSize[0],h=this.kernelSize[1],d=this.strides[0],f=this.strides[1],p=Qc(l,d,u,this.padding),m=Qc(c,f,h,this.padding),y=[i,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=tn(r,[0,2,3,1]));let g=qD(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=tn(g,[0,3,1,2])),this.bias!=null&&(g=vc(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=bn(e);const t=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return t[r]=this.filters,t[s]=Qc(t[s],l,a,this.padding),t[i]=Qc(t[i],c,o,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}zne.className="Conv2DTranspose";Fe(zne);class Bne extends MT{constructor(e){if(super(e),this.inputSpec=[new as({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new le(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bn(e),e.length!==5)throw new le("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new le("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new as({ndim:5,axes:{[t]:r}})],this.built=!0}call(e,t){return he(()=>{let r=wt(e);if(r.shape.length!==5)throw new le(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const c=s[l],u=s[a],h=s[o],d=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],y=this.strides[1],g=this.strides[2],v=Qc(c,m,d,this.padding),b=Qc(u,y,f,this.padding),w=Qc(h,g,p,this.padding),C=[i,v,b,w,this.filters];this.dataFormat!=="channelsLast"&&(r=tn(r,[0,2,3,4,1]));let I=$z(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(I=tn(I,[0,4,1,2,3])),this.bias!==null&&(I=vc(I,this.bias.read(),this.dataFormat)),this.activation!==null&&(I=this.activation.apply(I)),I})}computeOutputShape(e){e=bn(e);const t=e.slice();let r,s,i,a;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,a=4):(r=4,s=1,i=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],h=this.strides[1],d=this.strides[2];return t[r]=this.filters,t[s]=Qc(t[s],u,o,this.padding),t[i]=Qc(t[i],h,l,this.padding),t[a]=Qc(t[a],d,c,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Bne.className="Conv3DTranspose";Fe(Bne);class Vne extends Wb{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new le("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new le("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new le(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=or(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=lr(t.depthwiseRegularizer),this.depthwiseConstraint=cs(t.depthwiseConstraint),this.pointwiseInitializer=or(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=lr(t.pointwiseRegularizer),this.pointwiseConstraint=cs(t.pointwiseConstraint)}build(e){if(e=bn(e),e.length<this.rank+2)throw new le(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new le(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const r=e[t],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new as({ndim:this.rank+2,axes:{[t]:r}})],this.built=!0}call(e,t){return he(()=>{e=wt(e);let r;if(this.rank===1)throw new jt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=tn(e,[0,2,3,1])),r=lF(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=vc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=tn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=gr(this.depthwiseInitializer),e.pointwiseInitializer=gr(this.pointwiseInitializer),e.depthwiseRegularizer=jn(this.depthwiseRegularizer),e.pointwiseRegularizer=jn(this.pointwiseRegularizer),e.depthwiseConstraint=ls(this.depthwiseConstraint),e.pointwiseConstraint=ls(this.pointwiseConstraint),e}}Vne.className="SeparableConv";class jne extends Vne{constructor(e){super(2,e)}}jne.className="SeparableConv2D";Fe(jne);class $F extends Wb{constructor(e){super(1,e),$F.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!uV(e.kernelSize,"number",1,1))throw new le(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}$F.className="Conv1D";Fe($F);class Une extends Zt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return he(()=>{if(e=wt(e),this.dataFormat==="channelsLast"){const r=KE(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return KE(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=KE(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return KE(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}Une.className="Cropping2D";Fe(Une);class Wne extends Zt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Lr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ZNe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const t=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,r]}else{const t=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],t,r,e[3]]}}call(e,t){return he(()=>{let r=wt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=tn(r,[0,2,3,1]);const i=this.size[0]*s[2],a=this.size[1]*s[3],o=this.interpolation==="nearest"?Oa.resizeNearestNeighbor(r,[i,a]):Oa.resizeBilinear(r,[i,a]);return tn(o,[0,3,1,2])}else{const i=this.size[0]*s[1],a=this.size[1]*s[2];return this.interpolation==="nearest"?Oa.resizeNearestNeighbor(r,[i,a]):Oa.resizeBilinear(r,[i,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}Wne.className="UpSampling2D";Fe(Wne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function SRe(n,e,t=[1,1],r="valid",s,i){return he(()=>{s==null&&(s=uc()),Lr(s);let a=CV(n,s);if(n.rank!==4)throw new le(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(e.rank!==4)throw new le(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=$b(a,e,t,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(a=tn(a,[0,3,1,2])),a})}class Gne extends MF{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=or(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=cs(e.depthwiseConstraint),this.depthwiseRegularizer=lr(e.depthwiseRegularizer)}build(e){if(e=bn(e),e.length<4)throw new le(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new le(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const r=e[t],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return he(()=>{e=wt(e);let r=SRe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=vc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=bn(e);const t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=rc(t,this.kernelSize[0],this.padding,this.strides[0]),a=rc(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,a]:[e[0],i,a,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=gr(this.depthwiseInitializer),e.depthwiseRegularizer=jn(this.depthwiseRegularizer),e.depthwiseConstraint=ls(this.depthwiseRegularizer),e}}Gne.className="DepthwiseConv2D";Fe(Gne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hne(n,e,t,r){if(Array.isArray(n)){if(e!=null||t!=null)throw new le("When inputs is an array, neither initialState or constants should be provided");r!=null&&(t=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(e=n.slice(1,n.length)),n=n[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),t=s(t),{inputs:n,initialState:e,constants:t}}function qne(n,e,t,r=!1,s,i,a=!1,o=!1){return he(()=>{const l=e.shape.length;if(l<3)throw new le(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(cc(2,l));e=tn(e,c),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Be(Be(s,"bool"),"float32"),s.rank===l-1&&(s=Hr(s,-1)),s=tn(s,c)),r&&(e=_o(e,0),s!=null&&(s=_o(s,0)));const u=[];let h,d=t;const f=e.shape[0],p=Ro(e);let m;s!=null&&(m=Ro(s));for(let g=0;g<f;++g){const v=p[g],b=he(()=>n(v,d));if(s==null)h=b[0],d=b[1];else{const w=he(()=>{const C=m[g],I=Ye(Va(C),C),T=Re(ie(b[0],C),ie(d[0],I)),E=d.map((A,N)=>Re(ie(b[1][N],C),ie(A,I)));return{output:T,newStates:E}});h=w.output,d=w.newStates}o&&u.push(h)}let y;return o&&(y=fa(u,1)),[h,y,d]})}class Sp extends Zt{constructor(e){super(e);let t;if(e.cell==null)throw new le("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new IV({cells:e.cell}):t=e.cell,t.stateSize==null)throw new le("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new as({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return cc(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){x4(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const r=t[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const a of t)i.push([e[0],a]);return[s].concat(i)}else return s}computeMask(e,t){return he(()=>{Array.isArray(t)&&(t=t[0]);const r=this.returnSequences?t:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let r=0;r<e;++r)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new jt("Constants support is not implemented in RNN yet.");x4(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new as({shape:[t,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!Qt(this.stateSpec.map(a=>a.shape[a.shape.length-1]),i))throw new le(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(a=>new as({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){he(()=>{if(!this.stateful)throw new Yc("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new le("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>qr([r,s])):this.states_=[qr([r,this.cell.stateSize])];else if(e==null)qt(this.states_),this.keptStates!=null&&(qt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>qr([r,s])):this.states_[0]=qr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new le(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):qt(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,o=[r,a];if(!Qt(i.shape,o))throw new le(`State ${s} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>ss(s.clone()))})}apply(e,t){let r=t==null?null:t.initialState,s=t==null?null:t.constants;t==null&&(t={});const i=Hne(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let a=[],o=[];if(r!=null){t.initialState=r,a=a.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new as({shape:c.shape}));o=o.concat(this.stateSpec)}if(s!=null&&(t.constants=s,a=a.concat(s),this.numConstants=s.length),a[0]instanceof Su){const c=[e].concat(a),u=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=u;const d=super.apply(c,t);return this.inputSpec=h,d}else return super.apply(e,t)}call(e,t){return he(()=>{const r=t==null?null:t.mask,s=t==null?null:t.training;let i=t==null?null:t.initialState;e=wt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new le(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:s},c=qne((p,m)=>{const y=this.cell.call([p].concat(m),o);return[y[0],y.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],h=c[1],d=c[2];this.stateful&&this.resetStates(d,s);const f=this.returnSequences?h:u;return this.returnState?[f].concat(d):f})}getInitialState(e){return he(()=>{let t=qr(e.shape);return t=rt(t,[1,2]),t=RT(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?y4(t,[1,r]):t):this.cell.stateSize>1?[y4(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Sp.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}static fromConfig(e,t,r={}){const s=t.cell,i=Ch(s,r);return new e(Object.assign(t,{cell:i}))}}Sp.className="RNN";Fe(Sp);class zF extends Zt{}class TV extends zF{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ts(this.units,"units"),this.activation=Qf(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=or(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=lr(e.kernelRegularizer),this.recurrentRegularizer=lr(e.recurrentRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.kernelConstraint=cs(e.kernelConstraint),this.recurrentConstraint=cs(e.recurrentConstraint),this.biasConstraint=cs(e.biasConstraint),this.dropout=xx([1,Yf([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=xx([1,Yf([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return he(()=>{if(e=e,e.length!==2)throw new le(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jf({ones:()=>Va(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jf({ones:()=>Va(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?i=du(ie(e,a),this.kernel.read()):i=du(e,this.kernel.read()),this.bias!=null&&(i=vc(i,this.bias.read())),o!=null&&(r=ie(r,o));let l=Re(i,du(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Zf(this.activation),useBias:this.useBias,kernelInitializer:gr(this.kernelInitializer),recurrentInitializer:gr(this.recurrentInitializer),biasInitializer:gr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ls(this.kernelConstraint),recurrentConstraint:ls(this.recurrentConstraint),biasConstraint:ls(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}TV.className="SimpleRNNCell";Fe(TV);class Kne extends Sp{constructor(e){e.cell=new TV(e),super(e)}call(e,t){return he(()=>{this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,t){return new e(t)}}Kne.className="SimpleRNN";Fe(Kne);class EV extends zF{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new le("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Ts(this.units,"units"),this.activation=Qf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Qf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=or(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=lr(e.kernelRegularizer),this.recurrentRegularizer=lr(e.recurrentRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.kernelConstraint=cs(e.kernelConstraint),this.recurrentConstraint=cs(e.recurrentConstraint),this.biasConstraint=cs(e.biasConstraint),this.dropout=xx([1,Yf([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=xx([1,Yf([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bn(e);const t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return he(()=>{if(e=e,e.length!==2)throw new le(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training==null?!1:t.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jf({ones:()=>Va(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jf({ones:()=>Va(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=ie(e,i[0]));let u=du(e,this.kernel.read());this.useBias&&(u=vc(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ie(s,a[0]));const h=this.recurrentKernel.read(),[d,f]=ia(h,[2*this.units,this.units],h.rank-1),p=du(s,d),[m,y,g]=ia(u,3,u.rank-1),[v,b]=ia(p,2,p.rank-1);o=this.recurrentActivation.apply(Re(m,v)),l=this.recurrentActivation.apply(Re(y,b));const w=du(ie(l,s),f);c=this.activation.apply(Re(g,w));const C=Re(ie(o,s),ie(Re(1,Kn(o)),c));return[C,C]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Zf(this.activation),recurrentActivation:Zf(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gr(this.kernelInitializer),recurrentInitializer:gr(this.recurrentInitializer),biasInitializer:gr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ls(this.kernelConstraint),recurrentConstraint:ls(this.recurrentConstraint),biasConstraint:ls(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}EV.className="GRUCell";Fe(EV);class Xne extends Sp{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new EV(e),super(e)}call(e,t){return he(()=>{this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}Xne.className="GRU";Fe(Xne);class BF extends zF{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ts(this.units,"units"),this.activation=Qf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Qf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=or(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=lr(e.kernelRegularizer),this.recurrentRegularizer=lr(e.recurrentRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.kernelConstraint=cs(e.kernelConstraint),this.recurrentConstraint=cs(e.recurrentConstraint),this.biasConstraint=cs(e.biasConstraint),this.dropout=xx([1,Yf([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=xx([1,Yf([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=bn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,a=this.units;s=new(t=class extends Sl{apply(l,c){const u=i.apply([a]),h=new dV().apply([a]),d=i.apply([a*2]);return IG(IG(u,h),d)}},t.className="CustomInit",t)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return he(()=>{const r=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new le(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jf({ones:()=>Va(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jf({ones:()=>Va(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,u,h;0<this.dropout&&this.dropout<1&&(e=ie(e,a[0]));let d=du(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ie(s,o[0])),d=Re(d,du(s,this.recurrentKernel.read())),this.useBias&&(d=vc(d,this.bias.read()));const[f,p,m,y]=ia(d,4,d.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(p),u=Re(ie(c,i),ie(l,this.activation.apply(m))),h=this.recurrentActivation.apply(y);const g=ie(h,this.activation.apply(u));return[g,g,u]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Zf(this.activation),recurrentActivation:Zf(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gr(this.kernelInitializer),recurrentInitializer:gr(this.recurrentInitializer),biasInitializer:gr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ls(this.kernelConstraint),recurrentConstraint:ls(this.recurrentConstraint),biasConstraint:ls(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}BF.className="LSTMCell";Fe(BF);class Yne extends Sp{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new BF(e),super(e)}call(e,t){return he(()=>{this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}Yne.className="LSTM";Fe(Yne);class IV extends zF{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return he(()=>{e=e;let r=e.slice(1);const s=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?s.push(r.splice(0,o.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=s[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,t),i.push(a.slice(1))}r=[];for(const o of i.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){x4(e)&&(e=e[0]),e=e;let t;this.cells.forEach((r,s)=>{xg(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?t=r.stateSize[0]:t=r.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,t,r={}){const s=[];for(const i of t.cells)s.push(Ch(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.cells)t.push(...r.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return b4(e)}setWeights(e){const t=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let a=0;a<r.weights.length;++a)t.push([r.weights[a],i[a]])}xV(t)}}IV.className="StackedRNNCells";Fe(IV);function Jf(n){const{ones:e,rate:t,training:r=!1,count:s=1,dropoutFunc:i}=n,a=()=>i!=null?i(e(),t):Vte(e(),t),o=()=>FT(a,e,r);return!s||s<=1?ss(o().clone()):Array(s).fill(void 0).map(o).map(c=>ss(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var kRe=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class Zne extends Sp{constructor(e){if(e.unroll)throw new jt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new jt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new as({ndim:5})]}call(e,t){return he(()=>{if(this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new le("ConvRNN2D cell does not support constants");const r=t==null?null:t.mask,s=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return he(()=>{const{stateSize:t}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],a=qr(i);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e,t=!1){he(()=>{if(!this.stateful)throw new Yc("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new le("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qr(i)):this.states_=[qr(i)];else if(e==null)qt(this.states_),this.keptStates!=null&&(qt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qr(i)):this.states_[0]=qr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new le(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):qt(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=i;if(!Qt(l.shape,c))throw new le(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>ss(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:r,kernelSize:s,padding:i,strides:a,dilationRate:o}=this.cell,l=t==="channelsFirst",c=e[l?3:2],u=e[l?4:3],h=rc(c,s[0],i,a[0],o[0]),d=rc(u,s[1],i,a[1],o[1]);return[...e.slice(0,2),...l?[r,h,d]:[h,d,r]]}}Zne.className="ConvRNN2D";class AV extends BF{constructor(e){const{filters:t,kernelSize:r,strides:s,padding:i,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Ts(this.filters,"filters"),this.kernelSize=Uy(r,2,"kernelSize"),this.kernelSize.forEach(l=>Ts(l,"kernelSize")),this.strides=Uy(s||1,2,"strides"),this.strides.forEach(l=>Ts(l,"strides")),this.padding=i||"valid",Po(this.padding),this.dataFormat=a||"channelsLast",Lr(this.dataFormat),this.dilationRate=Uy(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Ts(l,"dilationRate"))}build(e){var t;e=bn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new le(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,a=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(t=class extends Sl{apply(d,f){const p=c.apply([u]),m=ea([u]),y=c.apply([u*2]);return hV([p,m,y])}},t.className="CustomInit",t)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return he(()=>{if(e.length!==3)throw new le(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training||!1,s=e[0],i=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jf({ones:()=>Va(s),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(se,q,X)=>!q||!q[X]?se:ie(q[X],se);let u=c(s,l,0),h=c(s,l,1),d=c(s,l,2),f=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jf({ones:()=>Va(i),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=c(i,p,0),y=c(i,p,1),g=c(i,p,2),v=c(i,p,3);const b=3,[w,C,I,T]=ia(this.kernel.read(),o,b),[E,A,N,F]=this.useBias?ia(this.bias.read(),o):[null,null,null,null];u=this.inputConv(u,w,E,this.padding),h=this.inputConv(h,C,A,this.padding),d=this.inputConv(d,I,N,this.padding),f=this.inputConv(f,T,F,this.padding);const[_,D,R,B]=ia(this.recurrentKernel.read(),o,b);m=this.recurrentConv(m,_),y=this.recurrentConv(y,D),g=this.recurrentConv(g,R),v=this.recurrentConv(v,B);const z=this.recurrentActivation.apply(Re(u,m)),W=this.recurrentActivation.apply(Re(h,y)),K=Re(ie(W,a),ie(z,this.activation.apply(Re(d,g)))),H=ie(this.recurrentActivation.apply(Re(f,v)),this.activation.apply(K));return[H,H,K]})}getConfig(){const e=super.getConfig(),{units:t}=e,r=kRe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,t,r,s){const i=Ph(e,t,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?vc(i,r,this.dataFormat):i}recurrentConv(e,t){return Ph(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}AV.className="ConvLSTM2DCell";Fe(AV);class Qne extends Zne{constructor(e){const t=new AV(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}Qne.className="ConvLSTM2D";Fe(Qne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NV extends Zt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const t=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?t[s]:this.noiseShape[s]);return r}call(e,t){return he(()=>{this.invokeCallHook(e,t);const r=wt(e);if(0<this.rate&&this.rate<1){const s=t.training==null?!1:t.training,i=this.getNoiseShape(r);return FT(()=>Vte(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}NV.className="Dropout";Fe(NV);class Jne extends NV{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}Jne.className="SpatialDropout1D";Fe(Jne);class ere extends Zt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Ts(this.units,"units"),this.activation=Qf(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=cs(e.kernelConstraint),this.biasConstraint=cs(e.biasConstraint),this.kernelRegularizer=lr(e.kernelRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.activityRegularizer=lr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=bn(e);const t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=bn(e);const t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return he(()=>{this.invokeCallHook(e,t);const r=wt(e),s=Pte(this.activation.getClassName());let i;return s!=null?i=du(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=du(r,this.kernel.read()),this.bias!=null&&(i=vc(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Zf(this.activation),useBias:this.useBias,kernelInitializer:gr(this.kernelInitializer),biasInitializer:gr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ls(this.kernelConstraint),biasConstraint:ls(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}ere.className="Dense";Fe(ere);class tre extends Zt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=bn(e);for(const t of e.slice(1))if(t==null)throw new le(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],If(e,1)]}call(e,t){return he(()=>{this.invokeCallHook(e,t);let r=wt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=tn(r,s)}return r_e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}tre.className="Flatten";Fe(tre);class nre extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Qf(e.activation)}call(e,t){return he(()=>{this.invokeCallHook(e,t);const r=wt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Zf(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}nre.className="Activation";Fe(nre);class rre extends Zt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return he(()=>(e=wt(e),t_e(e,this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}rre.className="RepeatVector";Fe(rre);class sre extends Zt{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){const r="Total size of new array must be unchanged.",s=t.slice();let i=1,a=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(a===null)a=l;else throw new le("Can only specifiy one unknown dimension.");else i*=c}const o=If(e);if(a!==null){if(i===0||o%i!==0)throw new le(r);s[a]=o/i}else if(o!==i)throw new le(r);return s}computeOutputShape(e){let t=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return he(()=>{this.invokeCallHook(e,t);const r=wt(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return ae(r,i)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}sre.className="Reshape";Fe(sre);class ire extends Zt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=cc(1,e.dims.length+1);if(!Qt(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new as({ndim:this.dims.length+1})]}computeOutputShape(e){e=bn(e);const t=e.slice();return this.dims.forEach((r,s)=>{t[s+1]=e[r]}),t}call(e,t){return tn(wt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}ire.className="Permute";Fe(ire);class are extends Zt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const r=wt(e);return WS(jg(r,this.maskValue),-1)}call(e,t){return he(()=>{this.invokeCallHook(e,t);const r=wt(e),a=WS(jg(r,this.maskValue),-1,!0);return ie(r,Be(a,r.dtype))})}}are.className="Masking";Fe(are);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ore extends Zt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(Dn(e.inputLength))}this.inputDim=e.inputDim,Ts(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Ts(this.outputDim,"outputDim"),this.embeddingsInitializer=or(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=lr(e.embeddingsRegularizer),this.activityRegularizer=lr(e.activityRegularizer),this.embeddingsConstraint=cs(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return he(()=>this.maskZero?(e=wt(e),jg(e,rn(e))):null)}computeOutputShape(e){if(e=bn(e),this.inputLength==null)return[...e,this.outputDim];const t=Dn(this.inputLength);if(t.length!==e.length-1)throw new le(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<t.length;++s){const i=t[s],a=e[s+1];if(i!=null&&a!=null&&i!==a)throw new le(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(t[r]=a),r++}}return[e[0],...t,this.outputDim]}call(e,t){return he(()=>{this.invokeCallHook(e,t);let r=wt(e);r.dtype!=="int32"&&(r=hu(r,"int32"));const s=Bte(this.embeddings.read(),ae(r,[r.size]));return ae(s,bn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:gr(this.embeddingsInitializer),embeddingsRegularizer:jn(this.embeddingsRegularizer),activityRegularizer:jn(this.activityRegularizer),embeddingsConstraint:ls(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}ore.className="Embedding";Fe(ore);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class S0 extends Zt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new jt}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;const r=e.slice(0,e.length-t.length);for(let s=0;s<t.length;++s){const i=e[e.length-t.length+s],a=t[s];if(i==null||a==null||i<0||a<0)r.push(null);else if(i===1)r.push(a);else if(a===1)r.push(i);else{if(i!==a)throw new le("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[bn(e)]),e=e,e.length<2)throw new le(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const i of e)i!=null&&i[0]!==null&&t.push(i[0]);if(t=Ef(t),t.length>1)throw new le(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Ef(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return he(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=Yf(s);for(let a of e){const o=a.rank;for(let l=0;l<i-o;++l)a=RT(a,1);r.push(a)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,h=u[0],d=u.slice(1).concat([h]);let f=ae(l,[h].concat(If(u.slice(1))));f=tn(f,[1,0]),f=ae(f,d),r.push(f),i=!0}else if(c>1){const u=cc(1,c).concat([0]);r.push(tn(l,u)),i=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(i){if(o==null){const l=a.shape,c=l.length,u=l[c-1],h=[u].concat(l.slice(0,l.length-1));a=ae(tn(ae(a,[-1,u]),[1,0]),h)}else if(o>1){const l=[o-1].concat(cc(0,o-1));a=tn(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);t=this.computeElementwiseOpOutputShape(t,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Ef(r),r.length===1?t=r.concat(t):t=[null].concat(t),t}computeMask(e,t){return he(()=>{if(t==null)return null;if(!Array.isArray(t))throw new le("`mask` should be an Array");if(!Array.isArray(e))throw new le("`inputs` should be an Array");if(t.length!==e.length)throw new le(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(s=>s==null))return null;t=t.map(s=>s==null?s:Hr(s,0));let r=t[0];for(let s=1;s<t.length-1;++s)r=lc(r,t[s]);return r})}}class lre extends S0{constructor(e){super(e)}mergeFunction(e){return he(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Re(t,e[r]);return t})}}lre.className="Add";Fe(lre);class cre extends S0{constructor(e){super(e)}mergeFunction(e){return he(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=ie(t,e[r]);return t})}}cre.className="Multiply";Fe(cre);class ure extends S0{constructor(e){super(e)}mergeFunction(e){return he(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Re(t,e[r]);return ie(1/e.length,t)})}}ure.className="Average";Fe(ure);class hre extends S0{constructor(e){super(e)}mergeFunction(e){return he(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=Iu(t,e[r]);return t})}}hre.className="Maximum";Fe(hre);class dre extends S0{constructor(e){super(e)}mergeFunction(e){return he(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=Xf(t,e[r]);return t})}}dre.className="Minimum";Fe(dre);class fre extends S0{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new le("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const s of e)if(s!=null){t=!1;break}if(t)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let a=!1;for(const o of r)if(Qt(o,i)){a=!0;break}a||r.push(i)}if(r.length>1)throw new le("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return he(()=>hV(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new le("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of t.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new le("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new le("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new le(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return he(()=>{let r=!0;if(t.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const s=[];for(let a=0;a<e.length;++a)t[a]==null?s.push(Be(Va(e[a]),"bool")):t[a].rank<e[a].rank?s.push(Hr(t[a],-1)):s.push(t[a]);const i=Fr(s,this.axis);return GD(i,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}fre.className="Concatenate";Fe(fre);function jw(n,e){for(;n<0;)n+=e;return n}function CRe(n,e,t){if(n.shape.length>3||e.shape.length>3)throw new jt("batchDot is not implemented for tensors of 4D or higher rank yet");if(V(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),V(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),n.dtype==="complex64"||e.dtype==="complex64")throw new jt("batchDot is not implemented for complex64-type Tensors yet.");const r=n.shape.length,s=e.shape.length;t==null&&(t=[r-1,s-2]);const i=t;return he(()=>{let a;if(r>s){a=r-s;const l=[];for(let c=0;c<a;++c)l.push(1);e=ae(e,e.shape.concat(l))}else if(s>r){a=s-r;const l=[];for(let c=0;c<a;++c)l.push(1);n=ae(n,n.shape.concat(l))}else a=0;let o;if(n.shape.length===2&&e.shape.length===2)i[0]===i[1]?o=rt(ie(n,e),i[0]):o=rt(ie(tn(n,[1,0]),e),i[1]);else{const l=i[0]!==n.shape.length-1,c=i[1]===e.shape.length-1;o=zt(n,e,l,c)}if(a>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+a;++u)c.push(u);o=Pa(o,c)}return o.shape.length===1&&(o=Hr(o,1)),o})}class pre extends S0{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){V(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],r=e[1];if(t.length>3||r.length>3)throw new jt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(t,r);if(t[s[0]]!==r[s[1]])throw new le(`Dimension incompatibility: ${t[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new le(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,a)=>jw(i,e[a].shape.length)):s=[jw(this.axes,t.shape.length),jw(this.axes,r.shape.length)],this.normalize&&(t=jN(t,s[0]),r=jN(r,s[1])),CRe(t,r,s)}interpretAxes(e,t){let r;return Array.isArray(this.axes)?r=this.axes:r=[jw(this.axes,e.length),jw(this.axes,t.length)],r}computeOutputShape(e){V(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),r=e[1].slice();if(t.length>3||r.length>3)throw new jt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(t,r);t.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=t.concat(r);return i.length===1&&i.push(1),i}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}pre.className="Dot";Fe(pre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mre extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return he(()=>{this.invokeCallHook(e,t);const r=wt(e);return FT(()=>Re(FF(r.shape,0,this.stddev),r),()=>r,t.training||!1)})}}mre.className="GaussianNoise";Fe(mre);class gre extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return he(()=>{this.invokeCallHook(e,t);const r=wt(e);return this.rate>0&&this.rate<1?FT(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return ie(r,FF(r.shape,1,i))},()=>r,t.training||!1):r})}}gre.className="GaussianDropout";Fe(gre);class yre extends Zt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||wt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return he(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return FT(()=>{const i=wt(e),o=-1.6732632423543772*1.0507009873554805;let l=Jh(bp(r),this.rate);l=hu(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,u=-c*o*this.rate,h=Re(ie(i,l),ie(Re(l,-1),o));return Re(ie(h,c),u)},()=>wt(e),t.training||!1)}return e})}}yre.className="AlphaDropout";Fe(yre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZS(n,e,t,r,s,i=.001){let a;if(n.rank===2)a=Iz(n,e,t,r,s,i);else if(n.rank===3)a=Az(n,e,t,r,s,i);else if(n.rank===4)a=Nz(n,e,t,r,s,i);else throw new jt(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return a}function TRe(n,e,t,r,s=.001){return he(()=>{const i=xT(n,r),a=i.mean,o=i.variance;return[ZS(n,a,o,t,e,s),a,o]})}function ERe(n,e,t,r,s=.001){return he(()=>{const i=xT(n,r),a=i.mean,o=i.variance,l=[];for(const p of cc(0,n.rank))r.indexOf(p)!==-1?l.push(1):l.push(n.shape[p]);const c=ae(a,l),u=ae(o,l),h=e==null?null:ae(e,l),d=t==null?null:ae(t,l);return[ZS(n,c,u,d,h,s),a,o]})}function IRe(n,e,t,r,s=.001){return Qt(r.slice().sort(),cc(0,n.rank-1))?TRe(n,e,t,r,s):ERe(n,e,t,r,s)}class vre extends Zt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=or(e.betaInitializer||"zeros"),this.gammaInitializer=or(e.gammaInitializer||"ones"),this.movingMeanInitializer=or(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=or(e.movingVarianceInitializer||"ones"),this.betaConstraint=cs(e.betaConstraint),this.gammaConstraint=cs(e.gammaConstraint),this.betaRegularizer=lr(e.betaRegularizer),this.gammaRegularizer=lr(e.gammaRegularizer)}build(e){e=bn(e);const t=this.axis>=0?this.axis:this.axis+e.length,r=e[t];if(r==null)throw new le(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new as({ndim:e.length,axes:{[t]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return he(()=>{const r=t.training==null?!1:t.training,s=wt(e),i=s.shape,a=i.length,o=cc(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const c=Gg(1,a);c[l]=i[l];const u=o.slice();u.sort();const h=!Qt(u,cc(0,a).slice(0,a-1)),d=()=>{if(h){const v=ae(this.movingMean.read(),c),b=ae(this.movingVariance.read(),c),w=this.center?ae(this.beta.read(),c):null,C=this.scale?ae(this.gamma.read(),c):null;return ZS(s,v,b,w,C,this.epsilon)}else return ZS(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[f,p,m]=IRe(s,this.gamma.read(),this.beta.read(),o,this.epsilon),y=(v,b,w)=>{he(()=>{const C=1-w,I=v.read(),T=ie(Ye(I,b),C);v.write(Ye(I,T))})};return(()=>{y(this.movingMean,p,this.momentum),y(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gr(this.betaInitializer),gammaInitializer:gr(this.gammaInitializer),movingMeanInitializer:gr(this.movingMeanInitializer),movingVarianceInitializer:gr(this.movingVarianceInitializer),betaRegularizer:jn(this.betaRegularizer),gammaRegularizer:jn(this.gammaRegularizer),betaConstraint:ls(this.betaConstraint),gammaConstraint:ls(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}vre.className="BatchNormalization";Fe(vre);class xre extends Zt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=or(e.betaInitializer||"zeros"),this.gammaInitializer=or(e.gammaInitializer||"ones"),this.betaRegularizer=lr(e.betaRegularizer),this.gammaRegularizer=lr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=bn(e);const t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=t);for(const i of this.axis)if(i<0||i>=t)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Ef(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,t){const r=wt(e),s=r.shape,i=s.length;return he(()=>{let{mean:o,variance:l}=xT(r,this.axis,!0);const c=Gg(1,i);for(const m of this.axis)c[m]=s[m];const u=m=>m!=null&&m.shape.length!==i?ae(m,c):m;let h=this.scale?u(this.gamma.read()):null,d=this.center?u(this.beta.read()):null;const f=[],p=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(f.push(s[m]),p.push(1)):(f.push(1),p.push(s[m]));return o=vo(o,f),l=vo(l,f),h!=null&&(h=vo(h,p)),d!=null&&(d=vo(d,p)),ZS(r,o,l,d,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gr(this.betaInitializer),gammaInitializer:gr(this.gammaInitializer),betaRegularizer:jn(this.betaRegularizer),gammaRegularizer:jn(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}xre.className="LayerNormalization";Fe(xre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ARe(n,e,t){return he(()=>{if(n.rank!==4)throw new le(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new le("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=uc()),t!=="channelsLast"&&t!=="channelsFirst")throw new le(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return t==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],ed(n,r)})}class bre extends Zt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?uc():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new le(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,r;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new le(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new le(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[t,r]}this.inputSpec=[new as({ndim:4})]}computeOutputShape(e){e=bn(e);let t,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],t,r]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],t,r,e[3]])}call(e,t){return he(()=>ARe(wt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}bre.className="ZeroPadding2D";Fe(bre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VF(n,e,t,r,s,i){return he(()=>{Lr(s),Lte(i),Po(r),t==null&&(t=[1,1]),r==null&&(r="valid"),s==null&&(s=uc()),i==null&&(i="max"),n=CV(n,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=vT(n,e,t,o):a=uT(n,e,t,o),s==="channelsFirst"&&(a=tn(a,[0,3,1,2])),a})}function wre(n,e,t,r,s,i){return he(()=>{Lr(s),Lte(i),Po(r),t==null&&(t=[1,1,1]),r==null&&(r="valid"),s==null&&(s=uc()),i==null&&(i="max"),n=$ne(n,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=Qz(n,e,t,o):a=Ez(n,e,t,o),s==="channelsFirst"&&(a=tn(a,[0,4,1,2,3])),a})}class Sre extends Zt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new le(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Ts(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new le(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Ts(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Po(this.padding),this.inputSpec=[new as({ndim:3})]}computeOutputShape(e){e=bn(e);const t=rc(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return he(()=>{this.invokeCallHook(e,t),e=RT(wt(e),2);const r=this.poolingFunction(wt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Pa(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class kre extends Sre{constructor(e){super(e)}poolingFunction(e,t,r,s,i){return Lr(i),Po(s),VF(e,t,r,s,i,"max")}}kre.className="MaxPooling1D";Fe(kre);class Cre extends Sre{constructor(e){super(e)}poolingFunction(e,t,r,s,i){return Lr(i),Po(s),VF(e,t,r,s,i,"avg")}}Cre.className="AveragePooling1D";Fe(Cre);class Tre extends Zt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new le(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Ts(this.poolSize,"poolSize"),Ts(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Lr(this.dataFormat),Po(this.padding),this.inputSpec=[new as({ndim:4})]}computeOutputShape(e){e=bn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=rc(t,this.poolSize[0],this.padding,this.strides[0]),r=rc(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r]:[e[0],t,r,e[3]]}call(e,t){return he(()=>(this.invokeCallHook(e,t),this.poolingFunction(wt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Ere extends Tre{constructor(e){super(e)}poolingFunction(e,t,r,s,i){return Lr(i),Po(s),VF(e,t,r,s,i,"max")}}Ere.className="MaxPooling2D";Fe(Ere);class Ire extends Tre{constructor(e){super(e)}poolingFunction(e,t,r,s,i){return Lr(i),Po(s),VF(e,t,r,s,i,"avg")}}Ire.className="AveragePooling2D";Fe(Ire);class Are extends Zt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new le(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Ts(this.poolSize,"poolSize"),Ts(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Lr(this.dataFormat),Po(this.padding),this.inputSpec=[new as({ndim:5})]}computeOutputShape(e){e=bn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=rc(t,this.poolSize[0],this.padding,this.strides[0]),r=rc(r,this.poolSize[1],this.padding,this.strides[1]),s=rc(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r,s]:[e[0],t,r,s,e[4]]}call(e,t){return he(()=>(this.invokeCallHook(e,t),this.poolingFunction(wt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Nre extends Are{constructor(e){super(e)}poolingFunction(e,t,r,s,i){return Lr(i),Po(s),wre(e,t,r,s,i,"max")}}Nre.className="MaxPooling3D";Fe(Nre);class _re extends Are{constructor(e){super(e)}poolingFunction(e,t,r,s,i){return Lr(i),Po(s),wre(e,t,r,s,i,"avg")}}_re.className="AveragePooling3D";Fe(_re);class Rre extends Zt{constructor(e){super(e),this.inputSpec=[new as({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new jt}}class Dre extends Rre{constructor(e){super(e||{})}call(e,t){return he(()=>{const r=wt(e);return mr(r,1)})}}Dre.className="GlobalAveragePooling1D";Fe(Dre);class Fre extends Rre{constructor(e){super(e||{})}call(e,t){return he(()=>{const r=wt(e);return To(r,1)})}}Fre.className="GlobalMaxPooling1D";Fe(Fre);class Pre extends Zt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Lr(this.dataFormat),this.inputSpec=[new as({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new jt}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Ore extends Pre{call(e,t){return he(()=>{const r=wt(e);return this.dataFormat==="channelsLast"?mr(r,[1,2]):mr(r,[2,3])})}}Ore.className="GlobalAveragePooling2D";Fe(Ore);class Lre extends Pre{call(e,t){return he(()=>{const r=wt(e);return this.dataFormat==="channelsLast"?To(r,[1,2]):To(r,[2,3])})}}Lre.className="GlobalMaxPooling2D";Fe(Lre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mre extends Zt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const s=t.layer,i=Ch(s,r);delete t.layer;const a={layer:i};return Object.assign(a,t),new e(a)}}class $re extends Mre{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=bn(e),e.length<3)throw new le(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=bn(e);const t=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,t){return he(()=>(e=wt(e),qne((a,o)=>[wt(this.layer.call(a,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}$re.className="TimeDistributed";Fe($re);function NRe(n){w0(YNe,"BidirectionalMergeMode",n)}const _Re="concat";class zre extends Mre{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=Ch(r),t.goBackwards=t.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=t,this.backwardLayer=Ch(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?_Re:e.mergeMode,NRe(this.mergeMode),e.weights)throw new jt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let r,s,i;return this.returnState&&(i=t.slice(1)),r=t[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Ji(s)}apply(e,t){let r=t==null?null:t.initialState,s=t==null?null:t.constants;t==null&&(t={});const i=Hne(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,t);const a=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new le("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,a.push(...r);const u=r.map(h=>new as({shape:h.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),o.push(...u)}if(s!=null)throw new jt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof Su;for(const c of a)if(c instanceof Su!==l)throw new le("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(a),u=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=u;const d=super.apply(c,t);return this.inputSpec=h,d}else return super.apply(e,t)}call(e,t){return he(()=>{const r=t.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(t,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:c}))}let a;this.returnState&&(Array.isArray(s)&&(a=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=_o(i,1));let o;return this.mergeMode==="concat"?o=hV([s,i]):this.mergeMode==="sum"?o=Re(s,i):this.mergeMode==="ave"?o=ie(.5,Re(s,i)):this.mergeMode==="mul"?o=ie(s,i):this.mergeMode==null&&(o=[s,i]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){xg(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),xg(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[t,t]:r=t:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=Ch(t.layer);if(delete t.layer,t.numConstants!=null)throw new jt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=t;return s.layer=r,new e(s)}}zre.className="Bidirectional";Fe(zre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Bre extends Zt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return he(()=>(e=wt(e),e.dtype!=="float32"&&(e=hu(e,"float32")),Re(ie(e,this.scale),this.offset)))}}Bre.className="Rescaling";Fe(Bre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:RRe,cropAndResize:DRe}=Oa;class Vre extends Zt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,r,s,i,a,o,l){return he(()=>{let c,u=!1;const h=t/a,d=r/o,f=(s+t)/a,p=(i+r)/o,m=[h,d,f,p],y=[];e.rank===3?(u=!0,c=fa([e])):c=e;for(let C=0;C<c.shape[0];C++)y.push(m);const g=ko(y,[y.length,4]),v=Oh(0,y.length,1,"int32"),w=DRe(c,g,v,[s,i],"nearest");return hu(u?wt(Ro(w)):w,l)})}upsize(e,t,r,s){return he(()=>{const i=RRe(e,[t,r]);return hu(i,s)})}call(e,t){return he(()=>{const r=wt(e),s=r.dtype,i=r.shape,a=i[i.length-3],o=i[i.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,a,o,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=bn(e);const t=e.length-3,r=e.length-2;return e[t]=this.height,e[r]=this.width,e}}Vre.className="CenterCrop";Fe(Vre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FRe(n,e,t,r){let s=wt(n);if(s.dtype!=="int32"&&(s=hu(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=Hr(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Hr(s,-1)),s.rank>2)throw new le(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const a=["multiHot","oneHot"].includes(e),o=s;let l;if(typeof r<"u"&&e==="count"?l=MN(o,r,t,a):l=MN(o,[],t,a),e!=="tfIdf")return l;if(r)return ie(l,r);throw new le("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jre extends Zt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=bn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return he(()=>{e=wt(e),e.dtype!=="int32"&&(e=hu(e,"int32"));let r;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new le(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);r=wt(t.countWeights)}const s=To(e),i=px(e),a=Ui(this.numTokens,s).bufferSync().get(0),o=Jh(i,0).bufferSync().get(0);if(!(a&&o))throw new le(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return FRe(e,this.outputMode,this.numTokens,r)})}}jre.className="CategoryEncoding";Fe(jre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const PRe=["bilinear","nearest"],GG=new Set(PRe);class Ure extends Zt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(GG.has(e.interpolation))this.interpolation=e.interpolation;else throw new le(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=bn(e);const t=e[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return he(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Oa.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Oa.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...GG]} are supported`)})}}Ure.className="Resizing";Fe(Ure);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wre{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}Wre.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gre extends Zt{constructor(e){super(e),this.randomGenerator=new Wre(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}Gre.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ORe=["bilinear","nearest"],HG=new Set(ORe);class Hre extends Gre{constructor(e){super(e);const{factor:t,interpolation:r="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new le(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new le(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new le(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(HG.has(r))this.interpolation=r;else throw new le(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=bn(e);const t=e[2];return[this.imgHeight,-1,t]}call(e,t){return he(()=>{const r=wt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=bp([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Oa.resizeBilinear(e,a);case"nearest":return Oa.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...HG]} are supported`)}})}}Hre.className="RandomWidth";Fe(Hre);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LRe=ye();LRe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ba;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(ba||(ba={}));var qG;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(qG||(qG={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MRe={};function qre(n){return MRe[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O(n,e,t,r,s){const i=e.inputParams[n];if(i&&i.inputIndexStart!==void 0){const o=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,c=o<0?e.inputNames.length+o:o;if(i.type==="tensor")return Ws(e.inputNames[c],t,r,s);if(i.type==="tensors"){const d=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((p,m)=>{var y;return((y=d[m])===null||y===void 0?void 0:y.op)!=="NoOp"}).map(p=>Ws(p,t,r,s))}const u=Ws(e.inputNames[c],t,r,s),h=u.dataSync();return i.type==="number"?h[0]:So(u.shape,h)}const a=e.attrParams[n];return a&&a.value}function Ws(n,e,t,r){const[s,i]=Ea(n,t);if(r!=null){const o=r.getHashTableHandleByName(s);if(o!=null)return o}const a=t.currentContextIds.find(o=>!!e[qN(s,o)]);return a!==void 0?e[qN(s,a)][i]:void 0}function KG(n,e,t){return e[qN(n,t.currentContextId)]}function ju(n,e){const[t,r,s]=Ea(n,e);return[qN(t,e&&e.currentContextId),r,s]}function qN(n,e){return e?`${n}-${e}`:n}function Ea(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const i=e.parseNodeNameCache.get(n);if(i!=null)return i}const r=n.split(":");let s;if(r.length===1)s=[n,0,void 0];else{const i=r[0],a=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);s=[i,o,a]}return t&&e.parseNodeNameCache.set(n,s),s}function kA(n,e,t){let r=O("pad",n,e,t);if(r==="explicit"){r=O("explicitPaddings",n,e,t);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function Uu(n){return n.kept?n:cu(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Re=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zRe=Object.freeze(Object.defineProperty({__proto__:null,json:$Re},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],VRe=Object.freeze(Object.defineProperty({__proto__:null,json:BRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jRe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],URe=Object.freeze(Object.defineProperty({__proto__:null,json:jRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WRe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],GRe=Object.freeze(Object.defineProperty({__proto__:null,json:WRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],qRe=Object.freeze(Object.defineProperty({__proto__:null,json:HRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KRe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],XRe=Object.freeze(Object.defineProperty({__proto__:null,json:KRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YRe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],ZRe=Object.freeze(Object.defineProperty({__proto__:null,json:YRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QRe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],JRe=Object.freeze(Object.defineProperty({__proto__:null,json:QRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eDe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],tDe=Object.freeze(Object.defineProperty({__proto__:null,json:eDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nDe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],rDe=Object.freeze(Object.defineProperty({__proto__:null,json:nDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sDe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],iDe=Object.freeze(Object.defineProperty({__proto__:null,json:sDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],oDe=Object.freeze(Object.defineProperty({__proto__:null,json:aDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],cDe=Object.freeze(Object.defineProperty({__proto__:null,json:lDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uDe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],hDe=Object.freeze(Object.defineProperty({__proto__:null,json:uDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dDe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],fDe=Object.freeze(Object.defineProperty({__proto__:null,json:dDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pDe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],mDe=Object.freeze(Object.defineProperty({__proto__:null,json:pDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gDe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],yDe=Object.freeze(Object.defineProperty({__proto__:null,json:gDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vDe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],xDe=Object.freeze(Object.defineProperty({__proto__:null,json:vDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bDe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],wDe=Object.freeze(Object.defineProperty({__proto__:null,json:bDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XG{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[zRe,VRe,URe,GRe,qRe,XRe,ZRe,JRe,tDe,rDe,iDe,oDe,cDe,hDe,fDe,mDe,yDe,xDe,wDe],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,t={}){const r=e.node,s=[],i=[],a=[],o=r.reduce((m,y)=>(m[y.name]=this.mapNode(y),y.op.startsWith("Placeholder")?s.push(m[y.name]):y.op==="Const"?i.push(m[y.name]):(y.input==null||y.input.length===0)&&a.push(m[y.name]),m),{});let l=[];const c=[];let u={},h={};t!=null&&(u=this.mapSignatureEntries(t.inputs),h=this.mapSignatureEntries(t.outputs));const d=Object.keys(o);d.forEach(m=>{const y=o[m];y.inputNames.forEach((g,v)=>{const[b,,w]=ju(g),C=o[b];if(C.outputs!=null){const I=C.outputs.indexOf(w);if(I!==-1){const T=`${b}:${I}`;y.inputNames[v]=T}}y.inputs.push(C),C.children.push(y)})}),Object.keys(h).length===0?d.forEach(m=>{const y=o[m];y.children.length===0&&c.push(y)}):Object.keys(h).forEach(m=>{const[y]=ju(m),g=o[y];g!=null&&(g.signatureKey=h[m],c.push(g))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{const[y]=ju(m),g=o[y];g&&(g.signatureKey=u[m],l.push(g))}):l=s;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((m,y)=>(m[y.signature.name]=this.mapFunction(y),m),{}));const p={nodes:o,inputs:l,outputs:c,weights:i,placeholders:s,signature:t,functions:f};return a.length>0&&(p.initNodes=a),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){const t=qre(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((s,i)=>{const a=i.type;let o;switch(i.type){case"string":o=E4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=E4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":o=F4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=F4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":o=A4(e.attr,i.tfName,i.defaultValue||0),o===void 0&&i.tfDeprecatedName&&(o=A4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":o=D4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=D4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":o=I4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=I4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":o=O4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=O4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":o=R4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=R4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":o=P4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=P4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":o=N4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=N4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":o=_4(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=_4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":o=YG(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=YG(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:o,type:a},s},{})),r}mapFunction(e){const t=e.nodeDef,r=[],s=[];let i={};t!=null&&(i=t.reduce((h,d)=>(h[d.name]=this.mapNode(d),d.op==="Const"&&s.push(h[d.name]),h),{}));const a=[],o=[];e.signature.inputArg.forEach(h=>{const[d]=ju(h.name),f={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:_V(h.type),type:"dtype"}},children:[]};f.signatureKey=h.name,a.push(f),i[d]=f}),Object.keys(i).forEach(h=>{const d=i[h];d.inputNames.forEach((f,p)=>{const[m,,y]=ju(f),g=i[m];if(g.outputs!=null){const v=g.outputs.indexOf(y);if(v!==-1){const b=`${m}:${v}`;d.inputNames[p]=b}}d.inputs.push(g),g.children.push(d)})});const c=e.ret;e.signature.outputArg.forEach(h=>{const[d,f]=ju(c[h.name]),p=i[d];p!=null&&(p.defaultOutput=f,o.push(p))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:a,outputs:o,weights:s,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}}function SDe(n){const e=ye().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Kre(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):SDe(n);return e?t:t.toLowerCase()}function E4(n,e,t,r=!1){const s=n[e];return s!=null?Kre(s.s,r):t}function I4(n,e,t){const r=n[e];return r?r.b:t}function A4(n,e,t){const r=n[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:t;return typeof s=="number"?s:parseInt(s,10)}function _V(n){switch(typeof n=="string"&&(n=ba[n]),n){case ba.DT_FLOAT:case ba.DT_HALF:return"float32";case ba.DT_INT32:case ba.DT_INT64:case ba.DT_INT8:case ba.DT_UINT8:return"int32";case ba.DT_BOOL:return"bool";case ba.DT_DOUBLE:return"float32";case ba.DT_STRING:return"string";case ba.DT_COMPLEX64:case ba.DT_COMPLEX128:return"complex64";default:return null}}function YG(n,e,t){const r=n[e];return r&&r.func?r.func.name:t}function N4(n,e,t){const r=n[e];return r&&r.type?_V(r.type):t}function _4(n,e,t){const r=n[e];return r&&r.list&&r.list.type?r.list.type.map(s=>_V(s)):t}function Xre(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function R4(n,e,t){const r=n[e];return r&&r.shape?Xre(r.shape):t}function D4(n,e,t){const r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):t}function F4(n,e,t,r=!1){const s=n[e];return s&&s.list&&s.list.s?s.list.s.map(i=>Kre(i,r)):t}function P4(n,e,t){const r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>Xre(s)):t}function O4(n,e,t){const r=n[e];return r&&r.list&&r.list.b?r.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kDe{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return Ws(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Ws(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return A4(this.node.rawAttrs,e,t);if(r.s!=null)return E4(this.node.rawAttrs,e,t);if(r.b!=null)return I4(this.node.rawAttrs,e,t);if(r.shape!=null)return R4(this.node.rawAttrs,e,t);if(r.type!=null)return N4(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return D4(this.node.rawAttrs,e,t);if(r.list.s!=null)return F4(this.node.rawAttrs,e,t);if(r.list.shape!=null)return P4(this.node.rawAttrs,e,t);if(r.list.b!=null)return O4(this.node.rawAttrs,e,t);if(r.list.type!=null)return _4(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Js=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:hz,abs:Ur,acos:yz,acosh:vz,add:Re,addN:OJ,all:GD,any:WS,argMax:Hf,argMin:xz,asin:bz,asinh:wz,atan:Sz,atan2:kz,atanh:Cz,avgPool:uT,avgPool3d:Ez,basicLSTMCell:LJ,batchNorm:Mb,batchNorm2d:Iz,batchNorm3d:Az,batchNorm4d:Nz,batchToSpaceND:hT,bincount:_z,bitwiseAnd:MJ,booleanMaskAsync:wee,broadcastArgs:$J,broadcastTo:vg,buffer:Vt,cast:Be,ceil:Rz,clipByValue:ha,clone:cu,complex:Fh,concat:Fr,concat1d:Dz,concat2d:Fz,concat3d:Pz,concat4d:Oz,conv1d:HD,conv2d:Ph,conv2dTranspose:qD,conv3d:Mz,conv3dTranspose:$z,cos:dT,cosh:KD,cosineWindow:vF,cumprod:qS,cumsum:XD,denseBincount:MN,depthToSpace:zz,depthwiseConv2d:$b,diag:BJ,dilation2d:Bz,div:at,divNoNan:Vz,dot:jz,dropout:kB,einsum:Kp,elu:zb,enclosingPowerOfTwo:CB,ensureShape:VJ,equal:za,erf:YD,euclideanNorm:Wz,exp:da,expandDims:Hr,expm1:Gz,eye:ZD,fft:TT,fill:g0,floor:Vb,floorDiv:WD,fused:_ee,gather:jb,gatherND:Tee,greater:Ui,greaterEqual:Jh,ifft:vx,imag:fT,image:Oa,inTopKAsync:Eee,irfft:dF,isFinite:Hz,isInf:qz,isNaN:Kz,leakyRelu:pT,less:mx,lessEqual:xp,linalg:IB,linspace:WJ,localResponseNormalization:Xz,log:Ba,log1p:mT,logSigmoid:Yz,logSoftmax:JD,logSumExp:gT,logicalAnd:lc,logicalNot:yT,logicalOr:eF,logicalXor:Zz,losses:Mee,lowerBound:HJ,matMul:zt,max:To,maxPool:vT,maxPool3d:Qz,maxPoolWithArgmax:qJ,maximum:Iu,mean:mr,meshgrid:KJ,min:px,minimum:Xf,mirrorPad:Jz,mod:eB,moments:xT,movingAverage:See,mul:ie,multiRNNCell:XJ,multinomial:YJ,neg:Kn,norm:Bb,notEqual:jg,oneHot:Ug,ones:ea,onesLike:Va,op:re,outerProduct:ZJ,pad:ed,pad1d:QJ,pad2d:JJ,pad3d:tB,pad4d:eee,pool:nB,pow:bu,prelu:wT,print:gz,prod:rB,raggedGather:tee,raggedRange:nee,raggedTensorToTensor:ree,rand:see,randomGamma:lee,randomNormal:rF,randomStandardNormal:cee,randomUniform:bp,randomUniformInt:uee,range:Oh,real:gx,reciprocal:fB,relu:yc,relu6:sF,reshape:ae,reverse:_o,reverse1d:hee,reverse2d:dee,reverse3d:fee,reverse4d:pee,rfft:ET,round:iF,rsqrt:aF,scalar:lt,scatterND:kee,searchSorted:tF,selu:oF,separableConv2d:lF,setdiff1dAsync:mee,sigmoid:Co,sign:pB,signal:Lee,sin:cF,sinh:uF,slice:nn,slice1d:ST,slice2d:hF,slice3d:kT,slice4d:yx,softmax:CT,softplus:y0,spaceToBatchND:bT,sparse:$ee,sparseToDense:Cee,spectral:Oee,split:ia,sqrt:Rs,square:Mn,squaredDifference:fF,squeeze:Pa,stack:fa,step:x0,stridedSlice:mB,string:zee,sub:Ye,sum:rt,tan:gB,tanh:Kf,tensor:ko,tensor1d:di,tensor2d:Vy,tensor3d:yB,tensor4d:gee,tensor5d:yee,tensor6d:vee,tensorScatterUpdate:xee,tile:vo,topk:xB,transpose:tn,truncatedNormal:mF,unique:bB,unsortedSegmentSum:gF,unstack:Ro,upperBound:bee,variable:wB,where:Ks,whereAsync:SB,zeros:qr,zerosLike:rn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CDe=(n,e,t,r=Js)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(O("a",n,e,t),O("b",n,e,t))];case"AddN":return[r.addN(O("tensors",n,e,t))];case"FloorMod":case"Mod":return[r.mod(O("a",n,e,t),O("b",n,e,t))];case"Mul":return[r.mul(O("a",n,e,t),O("b",n,e,t))];case"RealDiv":case"Div":return[r.div(O("a",n,e,t),O("b",n,e,t))];case"DivNoNan":return[r.divNoNan(O("a",n,e,t),O("b",n,e,t))];case"FloorDiv":return[r.floorDiv(O("a",n,e,t),O("b",n,e,t))];case"Sub":return[r.sub(O("a",n,e,t),O("b",n,e,t))];case"Minimum":return[r.minimum(O("a",n,e,t),O("b",n,e,t))];case"Maximum":return[r.maximum(O("a",n,e,t),O("b",n,e,t))];case"Pow":return[r.pow(O("a",n,e,t),O("b",n,e,t))];case"SquaredDifference":return[r.squaredDifference(O("a",n,e,t),O("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDe=(n,e,t,r=Js)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(O("x",n,e,t))];case"Acos":return[r.acos(O("x",n,e,t))];case"Acosh":return[r.acosh(O("x",n,e,t))];case"Asin":return[r.asin(O("x",n,e,t))];case"Asinh":return[r.asinh(O("x",n,e,t))];case"Atan":return[r.atan(O("x",n,e,t))];case"Atan2":return[r.atan2(O("x",n,e,t),O("y",n,e,t))];case"Atanh":return[r.atanh(O("x",n,e,t))];case"Ceil":return[r.ceil(O("x",n,e,t))];case"Complex":return[r.complex(O("real",n,e,t),O("imag",n,e,t))];case"Cos":return[r.cos(O("x",n,e,t))];case"Cosh":return[r.cosh(O("x",n,e,t))];case"Elu":return[r.elu(O("x",n,e,t))];case"Erf":return[r.erf(O("x",n,e,t))];case"Exp":return[r.exp(O("x",n,e,t))];case"Expm1":return[r.expm1(O("x",n,e,t))];case"Floor":return[r.floor(O("x",n,e,t))];case"Log":return[r.log(O("x",n,e,t))];case"Log1p":return[r.log1p(O("x",n,e,t))];case"Imag":return[r.imag(O("x",n,e,t))];case"Neg":return[r.neg(O("x",n,e,t))];case"Reciprocal":return[r.reciprocal(O("x",n,e,t))];case"Real":return[r.real(O("x",n,e,t))];case"Relu":return[r.relu(O("x",n,e,t))];case"Round":return[r.round(O("x",n,e,t))];case"Selu":return[r.selu(O("x",n,e,t))];case"Sigmoid":return[r.sigmoid(O("x",n,e,t))];case"Sin":return[r.sin(O("x",n,e,t))];case"Sign":return[r.sign(O("x",n,e,t))];case"Sinh":return[r.sinh(O("x",n,e,t))];case"Softplus":return[r.softplus(O("x",n,e,t))];case"Sqrt":return[r.sqrt(O("x",n,e,t))];case"Square":return[r.square(O("x",n,e,t))];case"Tanh":return[r.tanh(O("x",n,e,t))];case"Tan":return[r.tan(O("x",n,e,t))];case"ClipByValue":return[r.clipByValue(O("x",n,e,t),O("clipValueMin",n,e,t),O("clipValueMax",n,e,t))];case"Relu6":return[r.relu6(O("x",n,e,t))];case"Rsqrt":return[r.rsqrt(Ws(n.inputNames[0],e,t))];case"LeakyRelu":return[r.leakyRelu(O("x",n,e,t),O("alpha",n,e,t))];case"Prelu":return[r.prelu(O("x",n,e,t),O("alpha",n,e,t))];case"IsNan":return[r.isNaN(Ws(n.inputNames[0],e,t))];case"IsInf":return[r.isInf(Ws(n.inputNames[0],e,t))];case"IsFinite":return[r.isFinite(Ws(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qo(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){V(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let r=0;r<n.length;r++){const s=n[r],i=e[r];V(s<0||i<0||s===i,()=>t+` Shapes ${n} and ${e} must match`)}}}function ZG(n){return!(typeof n=="number"||n.some(e=>e<0))}function Uw(n,e,t){let r=L4(n,t);const s=!ZG(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=L4(i.shape,r)}),!ZG(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function L4(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let r=0;r<n.length;++r){const s=n[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[r]=s>=0?s:i}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EDe{constructor(e,t,r,s,i,a,o){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=lt(0),ss(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),qo(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,ss(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,s)=>this.write(r,t[s]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return ko([],[0].concat(this.elementShape));const r=this.readMany(e);return qo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),fa(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ko([],[0].concat(this.elementShape));const t=[];for(let s=0;s<this.size();s++)t.push(s);const r=this.readMany(t);return qo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Fr(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Ro(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:t.size/r,a=[];he(()=>{t=ae(t,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:s[l-1],0],h=[1,e[l],i];a[l]=ae(nn(t,u,h),this.elementShape)}return a});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hg{get id(){return this.idTensor.id}constructor(e,t,r,s=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);qo(t,i.shape,"TensorList shape mismatch: "),ss(i)}),this.idTensor=lt(0),this.maxNumElements=s,ss(this.idTensor)}copy(){return new Hg([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);qo(e,this.elementShape,"TensorList shape mismatch: ");const s=Uw(this.elementShape,this.tensors,e);return he(()=>{const i=this.tensors.map(a=>ae(a,s));return fa(i,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Uw(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,qo(s.shape,e,"TensorList shape mismatch: "),ae(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(qo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ss(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new Hg([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);qo(this.tensors[e].shape,t,"TensorList shape mismatch: ");const s=Uw(this.elementShape,this.tensors,t);return ae(this.tensors[e],s)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);qo(this.elementShape,t.shape,"TensorList shape mismatch: "),ss(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);qo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=Uw(this.elementShape,this.tensors,r);return e.length===0?ko([],[0].concat(s)):he(()=>{const i=e.map(a=>ae(this.tensors[a],s));return fa(i,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);qo(this.elementShape,t,"TensorList shape mismatch: ");const r=Uw(this.elementShape,this.tensors,t);return this.size()===0?ko([],[0].concat(r)):he(()=>{const s=this.tensors.map(i=>ae(i,r));return Fr(s,0)})}}function IDe(n,e,t){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const s=n.shape.slice(1);qo(s,e,"TensorList shape mismatch: ");const i=Ro(n);return new Hg(i,e,r)}function ADe(n,e,t,r){return new Hg([],n,e,r)}function NDe(n,e,t,r){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new Hg([],t,n.dtype,r),a=Ro(n,0);return e.forEach((o,l)=>{i.setItem(o,a[l])}),i}function _De(n,e,t){let r=0;const s=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const i=n.shape.slice(1),a=L4(i,t),o=r===0?0:n.size/r,l=he(()=>{const u=[];n=ae(n,[1,r,o]);for(let h=0;h<e.length;++h){const f=[0,h===0?0:s[h-1],0],p=[1,e[h],o];u[h]=ae(nn(n,f,p),a)}return n.dispose(),u}),c=new Hg([],t,n.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RDe=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const r=O("thenBranch",n,e,t),s=O("elseBranch",n,e,t),i=O("cond",n,e,t),a=O("args",n,e,t);return(await i.data())[0]?t.functionMap[r].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap):t.functionMap[s].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const r=O("body",n,e,t),s=O("cond",n,e,t),i=O("args",n,e,t),a=await t.functionMap[s].executeFunctionAsync(i,t.tensorArrayMap,t.tensorListMap),o=i.map(u=>u.id);let l=await a[0].data();a.forEach(u=>{!u.kept&&o.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){const u=c;c=await t.functionMap[r].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);const h=c.map(f=>f.id);u.forEach(f=>{!f.kept&&o.indexOf(f.id)===-1&&h.indexOf(f.id)===-1&&f.dispose()});const d=await t.functionMap[s].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);l=await d[0].data(),d.forEach(f=>{!f.kept&&o.indexOf(f.id)===-1&&h.indexOf(f.id)===-1&&f.dispose()})}return c}case"LoopCond":{const r=O("pred",n,e,t);return[Uu(r)]}case"Switch":{const r=O("pred",n,e,t);let s=O("data",n,e,t);return s.kept||(s=Uu(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=n.inputNames.find(s=>Ws(s,e,t)!==void 0);if(r){const s=Ws(r,e,t);return[Uu(s)]}return}case"Enter":{const r=O("frameName",n,e,t),s=O("tensor",n,e,t);return t.enterFrame(r),[Uu(s)]}case"Exit":{const r=O("tensor",n,e,t);return t.exitFrame(),[Uu(r)]}case"NextIteration":{const r=O("tensor",n,e,t);return t.nextIteration(),[Uu(r)]}case"TensorArrayV3":{const r=O("size",n,e,t),s=O("dtype",n,e,t),i=O("elementShape",n,e,t),a=O("dynamicSize",n,e,t),o=O("clearAfterRead",n,e,t),l=O("identicalElementShapes",n,e,t),c=O("name",n,e,t),u=new EDe(c,s,r,i,l,a,o);return t.addTensorArray(u),[u.idTensor,lt(1)]}case"TensorArrayWriteV3":{const r=O("tensorArrayId",n,e,t),s=O("index",n,e,t),i=O("tensor",n,e,t),a=t.getTensorArray(r.id);return a.write(s,i),[a.idTensor]}case"TensorArrayReadV3":{const r=O("tensorArrayId",n,e,t),s=O("index",n,e,t);return[t.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=O("tensorArrayId",n,e,t),s=O("indices",n,e,t),i=O("dtype",n,e,t);return[t.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=O("tensorArrayId",n,e,t),s=O("indices",n,e,t),i=O("tensor",n,e,t),a=t.getTensorArray(r.id);return a.scatter(s,i),[a.idTensor]}case"TensorArrayConcatV3":{const r=O("tensorArrayId",n,e,t),s=t.getTensorArray(r.id),i=O("dtype",n,e,t);return[s.concat(i)]}case"TensorArraySplitV3":{const r=O("tensorArrayId",n,e,t),s=O("tensor",n,e,t),i=O("lengths",n,e,t),a=t.getTensorArray(r.id);return a.split(i,s),[a.idTensor]}case"TensorArraySizeV3":{const r=O("tensorArrayId",n,e,t),s=t.getTensorArray(r.id);return[lt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=O("tensorArrayId",n,e,t),s=t.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=O("tensorListId",n,e,t),s=O("index",n,e,t),i=O("tensor",n,e,t),a=t.getTensorList(r.id);return a.setItem(s,i),[a.idTensor]}case"TensorListGetItem":{const r=O("tensorListId",n,e,t),s=O("index",n,e,t),i=O("elementShape",n,e,t),a=O("elementDType",n,e,t);return[t.getTensorList(r.id).getItem(s,i,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=O("indices",n,e,t),s=O("tensor",n,e,t),i=O("elementShape",n,e,t),a=O("numElements",n,e,t),o=NDe(s,r,i,a);return t.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=O("elementShape",n,e,t),s=O("elementDType",n,e,t);let i;n.op==="TensorListReserve"?i="numElements":i="maxNumElements";const a=O(i,n,e,t),o=n.op==="TensorListReserve"?-1:a,l=ADe(r,s,a,o);return t.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=O("tensorListId",n,e,t),s=O("indices",n,e,t),i=O("elementShape",n,e,t),a=O("elementDType",n,e,t);return[t.getTensorList(r.id).gather(s,a,i)]}case"TensorListStack":{const r=O("tensorListId",n,e,t),s=O("elementShape",n,e,t),i=O("elementDType",n,e,t),a=O("numElements",n,e,t);return[t.getTensorList(r.id).stack(s,i,a)]}case"TensorListFromTensor":{const r=O("tensor",n,e,t),s=O("elementShape",n,e,t),i=O("elementDType",n,e,t),a=IDe(r,s,i);return t.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=O("tensorListId",n,e,t),s=t.getTensorList(r.id),i=O("dtype",n,e,t),a=O("elementShape",n,e,t);return[s.concat(i,a)]}case"TensorListPushBack":{const r=O("tensorListId",n,e,t),s=O("tensor",n,e,t),i=t.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=O("tensorListId",n,e,t),s=O("elementShape",n,e,t),i=O("elementDType",n,e,t);return[t.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=O("tensor",n,e,t),s=O("elementShape",n,e,t),i=O("lengths",n,e,t),a=_De(r,i,s);return t.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=O("tensorListId",n,e,t),s=t.getTensorList(r.id);return[lt(s.size(),"int32")]}case"TensorListResize":{const r=O("tensorListId",n,e,t),s=O("size",n,e,t),a=t.getTensorList(r.id).resize(s);return t.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QG(n,e,t){const[r,s]=O("fusedOps",n,e,t),i=r==="biasadd",a=!i,o=s==="prelu",l=r==="fusedbatchnorm",c=O("numArgs",n,e,t);if(i){if(o&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=O("strides",n,e,t),h=kA(n,e,t),d=O("dataFormat",n,e,t).toUpperCase(),f=O("dilations",n,e,t);let[p,m]=O("args",n,e,t);a&&(m=p,p=void 0);const y=O("leakyreluAlpha",n,e,t);return{stride:u,pad:h,dataFormat:d,dilations:f,biasArg:p,preluArg:m,activationFunc:s,leakyreluAlpha:y}}const DDe=(n,e,t,r=Js)=>{switch(n.op){case"Conv1D":{const s=O("stride",n,e,t),i=O("pad",n,e,t),a=O("dataFormat",n,e,t).toUpperCase(),o=O("dilation",n,e,t);return[r.conv1d(O("x",n,e,t),O("filter",n,e,t),s,i,a,o)]}case"Conv2D":{const s=O("strides",n,e,t),i=kA(n,e,t),a=O("dataFormat",n,e,t).toUpperCase(),o=O("dilations",n,e,t);return[r.conv2d(O("x",n,e,t),O("filter",n,e,t),[s[1],s[2]],i,a,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=QG(n,e,t);return[r.fused.conv2d({x:O("x",n,e,t),filter:O("filter",n,e,t),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=QG(n,e,t);return[r.fused.depthwiseConv2d({x:O("x",n,e,t),filter:O("filter",n,e,t),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=O("outputShape",n,e,t),i=O("strides",n,e,t),a=kA(n,e,t);return[r.conv2dTranspose(O("x",n,e,t),O("filter",n,e,t),s,[i[1],i[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=O("strides",n,e,t),i=kA(n,e,t),a=O("dilations",n,e,t),o=O("dataFormat",n,e,t).toUpperCase();return[r.depthwiseConv2d(O("input",n,e,t),O("filter",n,e,t),[s[1],s[2]],i,o,[a[1],a[2]])]}case"Conv3D":{const s=O("strides",n,e,t),i=O("pad",n,e,t),a=O("dataFormat",n,e,t).toUpperCase(),o=O("dilations",n,e,t);return[r.conv3d(O("x",n,e,t),O("filter",n,e,t),[s[1],s[2],s[3]],i,a,[o[1],o[2],o[3]])]}case"AvgPool":{const s=O("strides",n,e,t),i=O("pad",n,e,t),a=O("kernelSize",n,e,t);return[r.avgPool(O("x",n,e,t),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=O("strides",n,e,t),i=O("pad",n,e,t),a=O("kernelSize",n,e,t);return[r.maxPool(O("x",n,e,t),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=O("strides",n,e,t),i=O("pad",n,e,t),a=O("kernelSize",n,e,t),o=O("includeBatchInIndex",n,e,t),{result:l,indexes:c}=r.maxPoolWithArgmax(O("x",n,e,t),[a[1],a[2]],[s[1],s[2]],i,o);return[l,c]}case"AvgPool3D":{const s=O("strides",n,e,t),i=O("pad",n,e,t),a=O("kernelSize",n,e,t);return[r.avgPool3d(O("x",n,e,t),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=O("strides",n,e,t),i=O("pad",n,e,t),a=O("kernelSize",n,e,t);return[r.maxPool3d(O("x",n,e,t),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=O("strides",n,e,t),i=O("pad",n,e,t),a=O("dilations",n,e,t),o=s[1],l=s[2],c=a[1],u=a[2];return[r.dilation2d(O("x",n,e,t),O("filter",n,e,t),[o,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FDe=(n,e,t,r=Js)=>{switch(n.op){case"Fill":{const s=O("shape",n,e,t),i=O("dtype",n,e,t),a=O("value",n,e,t);return[r.fill(s,a,i)]}case"LinSpace":{const s=O("start",n,e,t),i=O("stop",n,e,t),a=O("num",n,e,t);return[r.linspace(s,i,a)]}case"Multinomial":{const s=O("logits",n,e,t),i=O("numSamples",n,e,t),a=O("seed",n,e,t);return[r.multinomial(s,i,a)]}case"OneHot":{const s=O("indices",n,e,t),i=O("depth",n,e,t),a=O("onValue",n,e,t),o=O("offValue",n,e,t),l=O("dtype",n,e,t);return[r.oneHot(s,i,a,o,l)]}case"Ones":return[r.ones(O("shape",n,e,t),O("dtype",n,e,t))];case"OnesLike":return[r.onesLike(O("x",n,e,t))];case"RandomStandardNormal":return[r.randomStandardNormal(O("shape",n,e,t),O("dtype",n,e,t),O("seed",n,e,t))];case"RandomUniform":return[r.randomUniform(O("shape",n,e,t),O("minval",n,e,t),O("maxval",n,e,t),O("dtype",n,e,t))];case"RandomUniformInt":return[r.randomUniformInt(O("shape",n,e,t),O("minval",n,e,t),O("maxval",n,e,t),O("seed",n,e,t))];case"Range":{const s=O("start",n,e,t),i=O("stop",n,e,t),a=O("step",n,e,t);return[r.range(s,i,a,O("dtype",n,e,t))]}case"TruncatedNormal":{const s=O("shape",n,e,t),i=O("mean",n,e,t),a=O("stdDev",n,e,t),o=O("seed",n,e,t);return[r.truncatedNormal(s,i,a,O("dtype",n,e,t),o)]}case"Zeros":return[r.zeros(O("shape",n,e,t),O("dtype",n,e,t))];case"ZerosLike":return[r.zerosLike(O("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VO(n,e,t){const r=O("boxes",n,e,t),s=O("scores",n,e,t),i=O("maxOutputSize",n,e,t),a=O("iouThreshold",n,e,t),o=O("scoreThreshold",n,e,t),l=O("softNmsSigma",n,e,t);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}}const PDe=async(n,e,t,r,s=Js)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=VO(n,e,t),h=await s.image.nonMaxSuppressionWithScoreAsync(i,a,o,l,c,u);return[h.selectedIndices,h.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=VO(n,e,t),u=O("padToMaxOutputSize",n,e,t),h=await s.image.nonMaxSuppressionPaddedAsync(i,a,o,l,c,u);return[h.selectedIndices,h.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=VO(n,e,t);return[await s.image.nonMaxSuppressionAsync(i,a,o,l,c)]}case"Where":{const i=s.cast(O("condition",n,e,t),"bool"),a=[await s.whereAsync(i)];return i.dispose(),a}case"ListDiff":return s.setdiff1dAsync(O("x",n,e,t),O("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODe=(n,e,t,r=Js)=>{switch(n.op){case"LowerBound":{const s=O("sortedSequence",n,e,t),i=O("values",n,e,t);return[r.lowerBound(s,i)]}case"TopKV2":{const s=O("x",n,e,t),i=O("k",n,e,t),a=O("sorted",n,e,t),o=r.topk(s,i,a);return[o.values,o.indices]}case"UpperBound":{const s=O("sortedSequence",n,e,t),i=O("values",n,e,t);return[r.upperBound(s,i)]}case"Unique":{const s=O("x",n,e,t),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=O("x",n,e,t),i=O("axis",n,e,t),a=r.unique(s,i);return[a.values,a.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LDe=(n,e,t,r=Js)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const s=O("default",n,e,t);return[Ws(n.name,e,t)||s];case"Placeholder":return[Ws(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=O("x",n,e,t);return[Uu(u)]}case"IdentityN":return O("x",n,e,t).map(u=>Uu(u));case"Snapshot":const i=O("x",n,e,t);return[Uu(i)];case"Shape":return[r.tensor1d(O("x",n,e,t).shape,"int32")];case"ShapeN":return O("x",n,e,t).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(O("x",n,e,t).size,"int32")];case"Rank":return[r.scalar(O("x",n,e,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=O("x",n,e,t),o=O("data",n,e,t),l=O("message",n,e,t),c=O("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MDe{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=lt(0),this.tensorMap=new Map,ss(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return lt(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),he(()=>{const s=Ro(t),i=r.length,a=s.length;V(i===a,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${a} elements.`);for(let o=0;o<i;o++){const l=r[o],c=s[o];ss(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return he(()=>{const s=[];for(let i=0;i<r.length;i++){const a=r[i],o=this.findWithDefault(a,t);s.push(o)}return fa(s)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return r??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $De=async(n,e,t,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(n.name);if(s!=null)return[s];{const i=O("keyDType",n,e,t),a=O("valueDType",n,e,t),o=new MDe(i,a);return r.addHashTable(n.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=O("tableHandle",n,e,t,r),i=O("keys",n,e,t),a=O("values",n,e,t);return[await r.getHashTableById(s.id).import(i,a)]}case"LookupTableFind":case"LookupTableFindV2":{const s=O("tableHandle",n,e,t,r),i=O("keys",n,e,t),a=O("defaultValue",n,e,t);return[await r.getHashTableById(s.id).find(i,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=O("tableHandle",n,e,t,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zDe=(n,e,t,r=Js)=>{switch(n.op){case"ResizeBilinear":{const s=O("images",n,e,t),i=O("size",n,e,t),a=O("alignCorners",n,e,t),o=O("halfPixelCenters",n,e,t);return[r.image.resizeBilinear(s,[i[0],i[1]],a,o)]}case"ResizeNearestNeighbor":{const s=O("images",n,e,t),i=O("size",n,e,t),a=O("alignCorners",n,e,t),o=O("halfPixelCenters",n,e,t);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],a,o)]}case"CropAndResize":{const s=O("image",n,e,t),i=O("boxes",n,e,t),a=O("boxInd",n,e,t),o=O("cropSize",n,e,t),l=O("method",n,e,t),c=O("extrapolationValue",n,e,t);return[r.image.cropAndResize(s,i,a,o,l,c)]}case"ImageProjectiveTransformV3":{const s=O("images",n,e,t),i=O("transforms",n,e,t),a=O("outputShape",n,e,t),o=O("fillValue",n,e,t),l=O("interpolation",n,e,t),c=O("fillMode",n,e,t);return[r.image.transform(s,i,l.toLowerCase(),c.toLowerCase(),o,a)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe=(n,e,t,r=Js)=>{switch(n.op){case"Equal":return[r.equal(O("a",n,e,t),O("b",n,e,t))];case"NotEqual":return[r.notEqual(O("a",n,e,t),O("b",n,e,t))];case"Greater":return[r.greater(O("a",n,e,t),O("b",n,e,t))];case"GreaterEqual":return[r.greaterEqual(O("a",n,e,t),O("b",n,e,t))];case"Less":return[r.less(O("a",n,e,t),O("b",n,e,t))];case"LessEqual":return[r.lessEqual(O("a",n,e,t),O("b",n,e,t))];case"LogicalAnd":return[r.logicalAnd(O("a",n,e,t),O("b",n,e,t))];case"LogicalNot":return[r.logicalNot(O("a",n,e,t))];case"LogicalOr":return[r.logicalOr(O("a",n,e,t),O("b",n,e,t))];case"Select":case"SelectV2":return[r.where(O("condition",n,e,t),O("a",n,e,t),O("b",n,e,t))];case"BitwiseAnd":return[r.bitwiseAnd(O("a",n,e,t),O("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe=(n,e,t,r=Js)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(O("a",n,e,t),O("b",n,e,t),O("transposeA",n,e,t),O("transposeB",n,e,t))];case"Einsum":return[r.einsum(O("equation",n,e,t),...O("tensors",n,e,t))];case"Transpose":return[r.transpose(O("x",n,e,t),O("perm",n,e,t))];case"_FusedMatMul":const[s,i]=O("fusedOps",n,e,t),a=s==="biasadd",o=i==="prelu",l=O("numArgs",n,e,t),c=O("leakyreluAlpha",n,e,t);if(a){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,h]=O("args",n,e,t);return[r.fused.matMul({a:O("a",n,e,t),b:O("b",n,e,t),transposeA:O("transposeA",n,e,t),transposeB:O("transposeB",n,e,t),bias:u,activation:i,preluActivationWeights:h,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(O("a",n,e,t),O("numLower",n,e,t),O("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jDe=(n,e,t,r=Js)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(O("x",n,e,t),O("axis",n,e,t),O("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(O("x",n,e,t),O("mean",n,e,t),O("variance",n,e,t),O("offset",n,e,t),O("scale",n,e,t),O("epsilon",n,e,t))];case"FusedBatchNormV3":return[r.batchNorm(O("x",n,e,t),O("mean",n,e,t),O("variance",n,e,t),O("offset",n,e,t),O("scale",n,e,t),O("epsilon",n,e,t))];case"LRN":return[r.localResponseNormalization(O("x",n,e,t),O("radius",n,e,t),O("bias",n,e,t),O("alpha",n,e,t),O("beta",n,e,t))];case"Softmax":return[r.softmax(O("x",n,e,t))];case"LogSoftmax":return[r.logSoftmax(O("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe=(n,e,t,r=Js)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(O("paramsNestedSplits",n,e,t),O("paramsDenseValues",n,e,t),O("indices",n,e,t),O("outputRaggedRank",n,e,t));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(O("starts",n,e,t),O("limits",n,e,t),O("splits",n,e,t));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(O("shape",n,e,t),O("values",n,e,t),O("defaultValue",n,e,t),O("rowPartitionTensors",n,e,t),O("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WDe=(n,e,t,r=Js)=>{switch(n.op){case"Max":{const o=O("axis",n,e,t),l=O("keepDims",n,e,t);return[r.max(O("x",n,e,t),o,l)]}case"Mean":{const o=O("axis",n,e,t),l=O("keepDims",n,e,t);return[r.mean(O("x",n,e,t),o,l)]}case"Min":{const o=O("axis",n,e,t),l=O("keepDims",n,e,t);return[r.min(O("x",n,e,t),o,l)]}case"Sum":{const o=O("axis",n,e,t),l=O("keepDims",n,e,t);return[r.sum(O("x",n,e,t),o,l)]}case"All":{const o=O("axis",n,e,t),l=O("keepDims",n,e,t);return[r.all(O("x",n,e,t),o,l)]}case"Any":{const o=O("axis",n,e,t),l=O("keepDims",n,e,t);return[r.any(O("x",n,e,t),o,l)]}case"ArgMax":{const o=O("axis",n,e,t);return[r.argMax(O("x",n,e,t),o)]}case"ArgMin":{const o=O("axis",n,e,t);return[r.argMin(O("x",n,e,t),o)]}case"Prod":{const o=O("axis",n,e,t),l=O("keepDims",n,e,t);return[r.prod(O("x",n,e,t),o,l)]}case"Cumprod":{const o=O("axis",n,e,t),l=O("exclusive",n,e,t),c=O("reverse",n,e,t);return[r.cumprod(O("x",n,e,t),o,l,c)]}case"Cumsum":{const o=O("axis",n,e,t),l=O("exclusive",n,e,t),c=O("reverse",n,e,t);return[r.cumsum(O("x",n,e,t),o,l,c)]}case"Bincount":const s=O("x",n,e,t),i=O("weights",n,e,t),a=O("size",n,e,t);return[r.bincount(s,i,a)];case"DenseBincount":{const o=O("x",n,e,t),l=O("weights",n,e,t),c=O("size",n,e,t),u=O("binaryOutput",n,e,t);return[r.denseBincount(o,l,c,u)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe=(n,e,t,r=Js)=>{switch(n.op){case"ConcatV2":case"Concat":{const s=O("n",n,e,t),i=O("axis",n,e,t);let a=O("tensors",n,e,t);return a=a.slice(0,s),[r.concat(a,i)]}case"Gather":{const s=O("x",n,e,t),i=O("indices",n,e,t);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=O("axis",n,e,t),i=O("batchDims",n,e,t),a=O("x",n,e,t),o=O("indices",n,e,t);return[r.gather(a,r.cast(o,"int32"),s,i)]}case"Reverse":{const s=O("dims",n,e,t),i=[];for(let o=0;o<s.length;o++)s[o]&&i.push(o);const a=O("x",n,e,t);return[r.reverse(a,i)]}case"ReverseV2":{const s=O("axis",n,e,t),i=O("x",n,e,t);return[r.reverse(i,s)]}case"Slice":{const s=O("begin",n,e,t),i=O("size",n,e,t);return[r.slice(O("x",n,e,t),s,i)]}case"StridedSlice":{const s=O("begin",n,e,t),i=O("end",n,e,t),a=O("strides",n,e,t),o=O("beginMask",n,e,t),l=O("endMask",n,e,t),c=O("ellipsisMask",n,e,t),u=O("newAxisMask",n,e,t),h=O("shrinkAxisMask",n,e,t),d=O("x",n,e,t);return[r.stridedSlice(d,s,i,a,o,l,c,u,h)]}case"Pack":return he(()=>{const s=O("axis",n,e,t),i=O("tensors",n,e,t),a=i[0].shape,o=r.squeeze(i[0]).shape,l=i.map(c=>{const u=Qt(c.shape,a);if(!u&&!Qt(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,a)});return[r.stack(l,s)]});case"Unpack":{const s=O("axis",n,e,t),i=O("tensor",n,e,t);return r.unstack(i,s)}case"Tile":{const s=O("reps",n,e,t);return[r.tile(O("x",n,e,t),s)]}case"Split":case"SplitV":{const s=O("axis",n,e,t),i=O("numOrSizeSplits",n,e,t),a=O("x",n,e,t);return r.split(a,i,s)}case"ScatterNd":{const s=O("indices",n,e,t),i=O("values",n,e,t),a=O("shape",n,e,t);return[r.scatterND(s,i,a)]}case"GatherNd":{const s=O("x",n,e,t),i=O("indices",n,e,t);return[r.gatherND(s,i)]}case"SparseToDense":{const s=O("sparseIndices",n,e,t),i=O("outputShape",n,e,t),a=O("sparseValues",n,e,t),o=O("defaultValue",n,e,t);return[r.sparseToDense(s,a,i,a.dtype===o.dtype?o:r.cast(o,a.dtype))]}case"TensorScatterUpdate":{const s=O("indices",n,e,t),i=O("values",n,e,t),a=O("tensor",n,e,t);return[r.tensorScatterUpdate(a,s,i)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDe=(n,e,t,r=Js)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:a,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(O("indices",n,e,t),O("values",n,e,t),O("denseShape",n,e,t),O("defaultValue",n,e,t));return[s,i,a,o]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(O("inputIndices",n,e,t),O("inputShape",n,e,t),O("newShape",n,e,t));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(O("data",n,e,t),O("indices",n,e,t),O("segmentIds",n,e,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(O("data",n,e,t),O("indices",n,e,t),O("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe=(n,e,t,r=Js)=>{switch(n.op){case"FFT":return[r.fft(O("x",n,e,t))];case"IFFT":return[r.ifft(O("x",n,e,t))];case"RFFT":return[r.rfft(O("x",n,e,t))];case"IRFFT":return[r.irfft(O("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDe=(n,e,t,r=Js)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(O("input",n,e,t),O("pattern",n,e,t),O("rewrite",n,e,t),O("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(O("data",n,e,t),O("dataSplits",n,e,t),O("separator",n,e,t),O("nGramWidths",n,e,t),O("leftPad",n,e,t),O("rightPad",n,e,t),O("padWidth",n,e,t),O("preserveShortSequences",n,e,t));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:a}=r.string.stringSplit(O("input",n,e,t),O("delimiter",n,e,t),O("skipEmpty",n,e,t));return[s,i,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(O("input",n,e,t),O("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe=(n,e,t,r=Js)=>{switch(n.op){case"Cast":return[r.cast(O("x",n,e,t),O("dtype",n,e,t))];case"ExpandDims":{const s=O("axis",n,e,t);return[r.expandDims(O("x",n,e,t),s)]}case"Squeeze":{const s=O("axis",n,e,t);return[r.squeeze(O("x",n,e,t),s)]}case"Reshape":return[r.reshape(O("x",n,e,t),O("shape",n,e,t))];case"EnsureShape":return[r.ensureShape(O("x",n,e,t),O("shape",n,e,t))];case"MirrorPad":return[r.mirrorPad(O("x",n,e,t),O("padding",n,e,t),O("mode",n,e,t))];case"PadV2":case"Pad":return[r.pad(O("x",n,e,t),O("padding",n,e,t),O("constantValue",n,e,t))];case"SpaceToBatchND":{const s=O("blockShape",n,e,t),i=O("paddings",n,e,t);return[r.spaceToBatchND(O("x",n,e,t),s,i)]}case"BatchToSpaceND":{const s=O("blockShape",n,e,t),i=O("crops",n,e,t);return[r.batchToSpaceND(O("x",n,e,t),s,i)]}case"DepthToSpace":{const s=O("blockSize",n,e,t),i=O("dataFormat",n,e,t).toUpperCase();return[r.depthToSpace(O("x",n,e,t),s,i)]}case"BroadcastTo":return[r.broadcastTo(O("x",n,e,t),O("shape",n,e,t))];case"BroadcastArgs":return[r.broadcastArgs(O("s0",n,e,t),O("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JG(n,e,t,r,s=he){const i=((a,o,l)=>{switch(a.category){case"arithmetic":return s(()=>CDe(a,o,l));case"basic_math":return s(()=>TDe(a,o,l));case"control":return RDe(a,o,l);case"convolution":return s(()=>DDe(a,o,l));case"creation":return s(()=>FDe(a,o,l));case"dynamic":return PDe(a,o,l);case"evaluation":return s(()=>ODe(a,o,l));case"image":return s(()=>zDe(a,o,l));case"graph":return s(()=>LDe(a,o,l));case"logical":return s(()=>BDe(a,o,l));case"matrices":return s(()=>VDe(a,o,l));case"normalization":return s(()=>jDe(a,o,l));case"ragged":return s(()=>UDe(a,o,l));case"reduction":return s(()=>WDe(a,o,l));case"slice_join":return s(()=>GDe(a,o,l));case"sparse":return s(()=>HDe(a,o,l));case"spectral":return s(()=>qDe(a,o,l));case"string":return s(()=>KDe(a,o,l));case"transformation":return s(()=>XDe(a,o,l));case"hash_table":return $De(a,o,l,r);case"custom":const c=qre(a.op);if(c&&c.customExecutor)return c.customExecutor(new kDe(a,o,l));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return Wf(i)?i.then(a=>[].concat(a)):[].concat(i)}class eH{constructor(e={},t={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tH(n,e,t,r){const s=new Set,i=[];let a=null,o=null;const l=new Set,c=new Set(Object.keys(n).map(d=>Ea(d)[0]));r=r||[];const u=new Set(r.map(d=>Ea(d.name)[0])),h=[...e];for(;h.length>0;){const d=h.pop();if((Yp(d)||rFe(d)||sFe(d))&&a==null&&(a=d,o=a.children.map(f=>f.name).filter(f=>s.has(f))),s.add(d.name),t[d.name]==null&&!c.has(d.name)&&!u.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),h.push(f))})}}return{inputs:n,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:a,syncInputs:o}}function YDe(n,e){const{usedNodes:t,inputs:r}=e,s=Object.keys(r).map(y=>Ea(y)[0]).map(y=>n.nodes[y]),i=n.initNodes||[],a=y=>t.has(typeof y=="string"?y:y.name);function o(y){return[...new Map(y.map(g=>[g.name,g])).values()]}const l=o([...s,...n.weights,...i]).filter(a),c=o([...l,...Object.values(n.nodes)]).filter(a),u=new Map(c.map(y=>[y.name,y])),h={};for(const y of c){h[y.name]=h[y.name]||0;for(const g of y.children)a(g)||(h[g.name]=Number.POSITIVE_INFINITY),h[g.name]=(h[g.name]||0)+1}const d=Object.entries(h).filter(([,y])=>y===0).map(([y])=>y),f=[...d];for(;d.length>0;){const y=d.pop(),g=u.get(y);for(const v of g.children.filter(a))--h[v.name]===0&&(f.push(v.name),d.push(v.name))}const p=f.map(y=>u.get(y)),m=ZDe(p,l);return QDe(m,l),m}function ZDe(n,e){const t=new Map(n.map(a=>[a.name,a])),r=e.map(a=>a.name),s=new Set(r);for(;r.length>0;){const a=r.pop(),o=t.get(a);for(const l of o.children)!t.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return n.filter(a=>s.has(a.name))}class YE extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function QDe(n,e){const t=new Map(n.map((o,l)=>[o.name,l])),r=new Set(e.map(o=>o.name)),s=o=>r.has(typeof o=="string"?o:o.name),i=new Set(n.map(o=>o.name)),a=o=>i.has(typeof o=="string"?o:o.name);for(const o of n){for(const l of o.children.filter(a)){if(!t.has(l.name))throw new YE(`Child ${l.name} of node ${o.name} is unreachable.`);if(t.get(o.name)>t.get(l.name))throw new YE(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!s(o))for(const l of o.inputs){if(!t.has(l.name))throw new YE(`Input ${l.name} of node ${o.name} is unreachable.`);if(t.get(l.name)>t.get(o.name))throw new YE(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function JDe(n){const e=new Map(n.map((o,l)=>[o.name,l])),t=Number.MAX_SAFE_INTEGER,r=n.map((o,l)=>Yp(o)?t:l),s=o=>{const l=r[e.get(o.name)];return l??-1},i=n.map((o,l)=>o.children.map(s).reduce((c,u)=>Math.max(c,u),r[l])),a=new Map;for(let o=0;o<n.length;++o){const l=i[o];if(l===t)continue;const c=n[o],u=n[l];a.has(u.name)||a.set(u.name,[]),a.get(u.name).push(c)}return a}const eFe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),tFe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),nFe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Yp(n){return eFe.has(n.op)}function rFe(n){return tFe.has(n.op)}function sFe(n){return nFe.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KN{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new KN(e.functions[r],this)})}getCompilationKey(e,t){const r=e.map(i=>i.name).sort(),s=t.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,t){const r=tH(e,t,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:a}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(s.length>0){const c=t.map(h=>h.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const o=YDe(this.graph,r),l=JDe(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return ss(t),t}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,this.cloneTensorList(r)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const s=r.map(d=>this.graph.nodes[Ea(d)[0]]),i=t.map(d=>Ea(d)[0]),a=new Set(i);let o=i.map(d=>this.graph.nodes[d]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(s,o);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,o),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const u={},h={};return he(()=>{const d=new eH(this.weightMap,u,h,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(g=>{const[v,b]=Ea(g,d),w=[];w[b]=e[g],f[v]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(w))});const p=this.getFrozenTensorIds(f),{orderedNodes:m,nodeLiveUntilMap:y}=c;for(const g of m){if(f[g.name])continue;const v=JG(g,f,d,this._resourceManager);if(Wf(v))throw new Error(`The execution of the op '${g.op}' returned a promise. Please use model.executeAsync() instead.`);f[g.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[g.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(g,f,d,p,a,y.get(g.name))}return this.parent==null&&d.dispose(p),t.map(g=>Ws(g,f,d))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(t)}checkTensorForDisposal(e,t,r,s,i,a,o){if(!(Yp(t)||a.has(e))){for(const l of r[e])l!=null&&(o[l.id]=(o[l.id]||0)+t.children.length);for(const l of t.inputs){if(Yp(l))continue;const c=KG(l.name,r,s);if(c!=null)for(const u of c){if(!u||u.kept||i.has(u.id))continue;const h=o[u.id];h===1?(u.dispose(),delete o[u.id]):h!=null&&o[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,r,s,i,a){function o(l){return Yp(l)||i.has(l.name)}if(!(Yp(e)||a==null))for(const l of a){if(o(l))continue;const c=KG(l.name,t,r);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const a=new eH(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,a,t,r),l=t.map(d=>Ws(d,o,a)),c=l.map(d=>d.id),u=Object.keys(e).map(d=>e[d].id),h=new Set([...c,...u,...this.weightIds]);return Object.values(o).forEach(d=>{d.forEach(f=>{f&&!f.isDisposed&&!h.has(f.id)&&f.dispose()})}),this.parent==null&&a.dispose(h),l}async executeFunctionAsync(e,t,r){const s=e.reduce((i,a,o)=>(i[this.inputs[o].name]=a,i),{});return this._executeAsync(s,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,s){const i=Object.keys(e),a=i.map(w=>this.graph.nodes[Ea(w)[0]]),o=r.map(w=>Ea(w)[0]),l=new Set(o);let c=o.map(w=>this.graph.nodes[w]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:h,dynamicNode:d,syncInputs:f}=tH(e,c,this.weightMap,this._initNodes),p=[...a,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:t.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[C,I]=Ea(w),T=[];T[I]=e[w],m[C]=T});const y={},g=this.getFrozenTensorIds(m),v={};for(;p.length>0;){const w=this.processStack(a,p,t,m,v,g,l,y,u);await Promise.all(w)}d==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=c.filter(w=>!Yp(w)&&!Ws(w.name,m,t)).map(w=>w.name);if(b.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${i}]. Consider providing the following inputs: [${h}]. ${w}`)}return m}processStack(e,t,r,s,i,a,o,l,c){const u=[];for(;t.length>0;){const h=t.pop();r.currentContext=h.contexts;let d="";if(h.node.op==="Enter"&&O("isConstant",h.node,s,r)&&([d]=ju(h.node.name,r)),s[h.node.name]==null){const f=JG(h.node,s,r,this._resourceManager);d||([d]=ju(h.node.name,r));const p=r.currentContext;Wf(f)?u.push(f.then(m=>(s[d]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(m)),r.currentContext=p,this.checkTensorForDisposal(d,h.node,s,r,a,o,l),this.processChildNodes(h.node,t,r,s,i,c),m))):(s[d]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(f)),this.checkTensorForDisposal(d,h.node,s,r,a,o,l),this.processChildNodes(h.node,t,r,s,i,c))}else this.processChildNodes(h.node,t,r,s,i,c)}return u}processChildNodes(e,t,r,s,i,a){e.children.forEach(o=>{const[l]=ju(o.name,r);i[l]||!a.has(o.name)||(o.op==="Merge"?o.inputNames.some(c=>!!Ws(c,s,r))&&(i[l]=!0,t.push({contexts:r.currentContext,node:o})):o.inputNames.every(c=>!!Ws(c,s,r))&&(i[l]=!0,t.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const r=e[t],[s]=Ea(t),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const a=i.attrParams.shape.value,o=a.length===r.shape.length&&r.shape.every((l,c)=>a[c]===-1||a[c]===l);V(o,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&V(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var t,r;const s={};for(const i in e){const a=(r=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||r===void 0?void 0:r[i];a!=null?s[a.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const t=Object.keys(e).filter(r=>{const[s]=Ea(r);return this.graph.nodes[s]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[t];return i!=null?i.name:t},{})}checkOutputs(e){e.forEach(t=>{const[r]=Ea(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}}class iFe{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aFe="?tfjs-format=file",oFe="model.json";class lFe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},r=LB){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,t==null&&(this.loadOptions={}),this.resourceManager=new iFe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Wf(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await kJ(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new KN(XG.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=XG.Instance.transformGraph(e.modelInitializer);this.initializer=new KN(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof Sn?[e]:e,r={};return t.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,t){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof Sn)&&!Array.isArray(e)){const i=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(i!=null)for(const a in i){const o=i[a];o.resourceId!=null&&(e[a]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,a)=>{var o,l,c;const u=(c=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[a])===null||c===void 0?void 0:c.resourceId;return u!=null?i[a]=this.resourceIdToCapturedInput[u]:i[a]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,r=Object.keys(t);for(let s=0;s<r.length;s++){const i=r[s],a=t[i];this.resourceIdToCapturedInput[a.resourceId]=e[s]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&qt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Yre(n,e={},t=LB){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=cFe(n));const r=new lFe(n,e,t);return await r.load(),r}function cFe(n){return n.endsWith("/")||(n=n+"/"),`${n}${oFe}${aFe}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var nH;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(nH||(nH={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function it(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&V(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uFe=yF;class jF extends FR{nextDataId(){return jF.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new J5(this,lo())}write(e,t,r){this.firstUse&&(this.firstUse=!1,ye().get("IS_NODE")&&ho(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,t,r){let s;if(t==="string"&&r!=null&&r.length>0&&nu(r[0])){const i=r.map(a=>lu(a));s=this.write(i,e,t)}else s=this.write(r,e,t);return{dataId:s,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){const t=this.data.get(e);t.refCount--}}move(e,t,r,s,i){this.data.set(e,{values:t,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:r}=this.data.get(e);if(t==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Lh(s,i)}return QQ(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(s=>Dh(s));return Vt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Vt(e.shape,e.dtype,t)}makeOutput(e,t,r){return lo().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Ri();return e(),{kernelMs:Ri()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){it([e],"where");const t=this.readSync(e.dataId);return uFe(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}jF.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zre(n){const e=new Float32Array(n.length);for(let t=0;t<n.length;++t)e[t]=Math.abs(n[t]);return e}const hFe=n=>{const{x:e}=n.inputs,t=n.backend;it(e,"abs");let r=new Float32Array(Se(e.shape));const s=t.data.get(e.dataId).values;return r=Zre(s),t.makeOutput(r,e.shape,e.dtype)},dFe={kernelName:sC,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mr(n){return(e,t,r,s,i)=>{const a=Nt(e,t),o=a.length,l=ht(a),c=Se(a),u=_s(i,c),h=e.length,d=t.length,f=ht(e),p=ht(t),m=Vg(e,a),y=Vg(t,a);if(m.length+y.length===0)for(let g=0;g<u.length;++g)u[g]=n(r[g%r.length],s[g%s.length]);else for(let g=0;g<u.length;++g){const v=f0(g,o,l),b=v.slice(-h);m.forEach(T=>b[T]=0);const w=nc(b,h,f),C=v.slice(-d);y.forEach(T=>C[T]=0);const I=nc(C,d,p);u[g]=n(r[w],s[I])}return[u,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _a(n){const{inputs:e,backend:t}=n,{real:r,imag:s}=e,i=t.data.get(r.dataId).values,a=t.data.get(s.dataId).values,o=t.makeTensorInfo(r.shape,"complex64"),l=t.data.get(o.dataId);return l.complexTensorInfos={real:t.makeTensorInfo(r.shape,"float32",i),imag:t.makeTensorInfo(s.shape,"float32",a)},o}const fFe={kernelName:jR,backendName:"cpu",kernelFunc:_a};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XN(n,e,t="float32"){if(t==="complex64"){const s=XN(n,e,"float32"),i=XN(n,e,"float32");return _a({inputs:{real:s,imag:i},backend:n})}const r=Xs(Se(e),t);return n.makeTensorInfo(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ku(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const pFe={kernelName:lb,backendName:"cpu",kernelFunc:ku};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qg(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.data.get(r.dataId).complexTensorInfos.real,i=t.data.get(s.dataId).values;return t.makeTensorInfo(s.shape,s.dtype,i)}const mFe={kernelName:wD,backendName:"cpu",kernelFunc:qg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qre(n,e,t,r){if(r==="int32"){const s=Int32Array.from(n);return[e,"int32",s]}if(r==="bool"){const s=mp([0],t),[i,a]=Mr((o,l)=>o!==l?1:0)(e,[],n,s,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${t} to ${r}`)}function ep(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return ku({inputs:{x:s},backend:t});const u=XN(t,s.shape,s.dtype),h=ep({inputs:{x:s},backend:t,attrs:{dtype:"float32"}}),d=_a({inputs:{real:h,imag:u},backend:t});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),d}if(s.dtype==="complex64"){const u=qg({inputs:{input:s},backend:t}),h=ep({inputs:{x:u},backend:t,attrs:{dtype:i}});return t.disposeIntermediateTensorInfo(u),h}if(!nz(s.dtype,i)){const u=ku({inputs:{x:s},backend:t});return{dataId:u.dataId,shape:u.shape,dtype:i}}const a=t.data.get(s.dataId).values,[o,l,c]=Qre(a,s.shape,s.dtype,i);return t.makeTensorInfo(o,l,c)}const gFe={kernelName:Xx,backendName:"cpu",kernelFunc:ep};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hs(n,e,t,r){return t==null?({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;it([a,o],n);const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,h=a.dtype==="string"?Mh(c):c,d=a.dtype==="string"?Mh(u):u,f=r||a.dtype,[p,m]=e(a.shape,o.shape,h,d,f);return l.makeTensorInfo(m,f,p)}:({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;if(a.dtype==="complex64"||o.dtype==="complex64"){const c=ep({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),h=u.complexTensorInfos.real,d=u.complexTensorInfos.imag,f=l.data.get(h.dataId).values,p=l.data.get(d.dataId).values,m=ep({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),y=l.data.get(m.dataId),g=y.complexTensorInfos.real,v=y.complexTensorInfos.imag,b=l.data.get(g.dataId).values,w=l.data.get(v.dataId).values,[C,I,T]=t(a.shape,o.shape,f,p,b,w),E=l.makeTensorInfo(T,"float32",C),A=l.makeTensorInfo(T,"float32",I),N=_a({inputs:{real:E,imag:A},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(E),l.disposeIntermediateTensorInfo(A),N}else{const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,h=r||a.dtype,[d,f]=e(a.shape,o.shape,c,u,h);return l.makeTensorInfo(f,h,d)}}}function RV(n){return(e,t,r,s,i,a)=>{const o=Nt(e,t),l=Se(o),c=o.length,u=ht(o),h=_s("float32",l),d=_s("float32",l),f=Vg(e,o),p=Vg(t,o),m=Lh(r,s),y=Lh(i,a),g=e.length,v=ht(e),b=t.length,w=ht(t);if(f.length+p.length===0)for(let C=0;C<h.length;C++){const I=C%m.length,T=C%y.length,E=n(m[I*2],m[I*2+1],y[T*2],y[T*2+1]);h[C]=E.real,d[C]=E.imag}else for(let C=0;C<h.length;C++){const I=f0(C,c,u),T=I.slice(-g);f.forEach(_=>T[_]=0);const E=nc(T,g,v),A=I.slice(-b);p.forEach(_=>A[_]=0);const N=nc(A,b,w),F=n(m[E*2],m[E*2+1],y[N*2],y[N*2+1]);h[C]=F.real,d[C]=F.imag}return[h,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jre=Mr((n,e)=>n+e),yFe=RV((n,e,t,r)=>({real:n+t,imag:e+r})),bx=hs(p0,Jre,yFe),vFe={kernelName:p0,backendName:"cpu",kernelFunc:bx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DV(n,e,t,r,s){const i=Se(r),a=Xs(s,t);for(let o=0;o<n.length;o++){const l=n[o];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?a[l]+=e[o]:a[l]+=1)}return a}function ese(n,e,t,r=!1){const s=n.shape[0],i=n.shape[1],a=Vt([s,t],e.dtype);for(let o=0;o<s;o++)for(let l=0;l<i;l++){const c=n.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=t||(r?a.set(1,o,c):e.size>0?a.set(a.get(o,c)+e.get(o,l),o,c):a.set(a.get(o,c)+1,o,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tse=Mr((n,e)=>n&e),xFe=hs(dC,tse),bFe={kernelName:dC,backendName:"cpu",kernelFunc:xFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Au(n){return(e,t,r)=>{const s=Tr(t,e.length);for(let i=0;i<e.length;++i)s[i]=n(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(n,e,t){const r=Au(e);return kp(n,r,t)}function kp(n,e,t){return({inputs:r,attrs:s,backend:i})=>{const{x:a}=r;it(a,n);const o=i,l=o.data.get(a.dataId).values;let c;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Mh(l)}else c=l;const u=t||a.dtype,h=e(c,u,s);return o.makeTensorInfo(a.shape,u,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nse=Au(n=>Math.ceil(n)),wFe=kp(Yx,nse),SFe={kernelName:Yx,backendName:"cpu",kernelFunc:wFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rse(n,e,t,r){const s=Tr(t,Se(e));if(r&&t!=="string"){let i=0;n.forEach(a=>{const o=Se(a.shape);s.set(a.vals,i),i+=o})}else{let i=0;n.forEach(a=>{const o=t==="string"?Mh(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const u=c*e[1]+i;for(let h=0;h<a.shape[1];++h)s[u+h]=o[l++]}i+=a.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sse=Mr((n,e)=>n===e?1:0),ise=hs(wC,sse,null,"bool"),kFe={kernelName:wC,backendName:"cpu",kernelFunc:ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ase=Au(n=>Math.exp(n)),ose=kp(rb,ase,"float32"),CFe={kernelName:rb,backendName:"cpu",kernelFunc:ose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lse=Au(n=>Math.expm1(n)),TFe=kp(sb,lse),EFe={kernelName:sb,backendName:"cpu",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cse=Au(n=>Math.floor(n)),IFe=kp(ib,cse),AFe={kernelName:ib,backendName:"cpu",kernelFunc:IFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const use=Mr((n,e)=>Math.floor(n/e)),NFe=hs(ab,use,null,"int32"),_Fe={kernelName:ab,backendName:"cpu",kernelFunc:NFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hse(n,e,t,r,s,i,a,o,l){const c=Vt([r,i],t);for(let u=0;u<r;u++){const h=[];let d=0;for(let f=0;f<s;f++){const p=n[u*s+f];d+=p*a[f],h.push(p)}if(d<0||d>=l/i)throw new Error(`Invalid indices: ${h} does not index into ${o}`);for(let f=0;f<i;f++)c.values[u*i+f]=e.get(...e.indexToLoc(d*i+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(n,e,t){const r=Vt(t,n.dtype);for(let s=0;s<r.size;++s){const a=r.indexToLoc(s).slice(),o=a[0],l=a[2],c=e.locToIndex([o,l]);a[2]=e.values[c];const u=n.locToIndex(a);0<=u&&u<n.values.length&&(r.values[s]=n.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fse=Mr((n,e)=>n>e?1:0),RFe=hs(TC,fse,null,"bool"),DFe={kernelName:TC,backendName:"cpu",kernelFunc:RFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pse=Mr((n,e)=>n>=e?1:0),FFe=hs(ob,pse,null,"bool"),PFe={kernelName:ob,backendName:"cpu",kernelFunc:FFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mse=Mr((n,e)=>n<e?1:0),OFe=hs(IC,mse,null,"bool"),LFe={kernelName:IC,backendName:"cpu",kernelFunc:OFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gse=Mr((n,e)=>n<=e?1:0),MFe=hs(AC,gse,null,"bool"),$Fe={kernelName:AC,backendName:"cpu",kernelFunc:MFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yse(n,e,t){const r=(e-n)/(t-1),s=Xs(t,"float32");s[0]=n;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vse=Au(n=>Math.log(n)),zFe=kp(db,vse),BFe={kernelName:db,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(n,e,t,r){const s=_s(r,Se(t));for(let i=0;i<s.length;++i){const a=i*e;let o=n[a];for(let l=0;l<e;++l){const c=n[a+l];(Number.isNaN(c)||c>o)&&(o=c)}s[i]=o}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bse=Mr((n,e)=>Math.max(n,e)),VFe=hs(pb,bse),jFe={kernelName:pb,backendName:"cpu",kernelFunc:VFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wse=Mr((n,e)=>Math.min(n,e)),UFe=hs(mb,wse),WFe={kernelName:mb,backendName:"cpu",kernelFunc:UFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FV=Mr((n,e)=>n*e),GFe=RV((n,e,t,r)=>({real:n*t-e*r,imag:n*r+e*t})),UF=hs(yb,FV,GFe),HFe={kernelName:yb,backendName:"cpu",kernelFunc:UF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sse(n,e,t){const r=Yh(-1,t);return FV([],e,r,n,t)}function qFe(n){const{inputs:e,backend:t}=n,{x:r}=e;it(r,"neg");const s=t.data.get(r.dataId).values,[i,a]=Sse(s,r.shape,r.dtype);return t.makeTensorInfo(a,r.dtype,i)}const KFe={kernelName:zC,backendName:"cpu",kernelFunc:qFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kse=Mr((n,e)=>n!==e?1:0),XFe=hs(BC,kse,null,"bool"),YFe={kernelName:BC,backendName:"cpu",kernelFunc:XFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PV(n,e,t,r,s){const i=e.length,a=Se(e),o=ht(e),l=ht(s),c=_s(t,Se(s));for(let u=0;u<a;++u){const h=f0(u,i,o),d=new Array(h.length);for(let p=0;p<d.length;p++)d[p]=h[r[p]];const f=nc(d,i,l);c[f]=n[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pa(n){const{inputs:e,attrs:t,backend:r}=n,{x:s}=e,{perm:i}=t;it(s,"transpose");const a=s.shape.length,o=new Array(a);for(let h=0;h<o.length;h++)o[h]=s.shape[i[h]];const l=r.data.get(s.dataId).values,c=PV(l,s.shape,s.dtype,i,o);return{dataId:r.write(c,o,s.dtype),shape:o,dtype:s.dtype}}const ZFe={kernelName:yg,backendName:"cpu",kernelFunc:pa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(n,e,t,r){const[s,i]=Fs(n,r),a=ca(e,"int32"),o=Xs(Se(s),a),l=Se(i);for(let c=0;c<o.length;++c){const u=c*l;let h=1;for(let d=0;d<l;++d)h*=t[u+d];o[c]=h}return{outVals:o,outShape:s,outDtype:a}}function QFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r;it(s,"prod");const o=s.shape.length,l=Kt(i,s.shape),c=vr(l,o);let u=l,h=s;const d=[];c!=null&&(h=pa({inputs:{x:s},backend:t,attrs:{perm:c}}),d.push(h),u=Or(u.length,o));const f=t.data.get(h.dataId).values,{outVals:p,outShape:m,outDtype:y}=Cse(h.shape,h.dtype,f,u);let g=m;return a&&(g=Pr(m,l)),d.forEach(v=>t.disposeIntermediateTensorInfo(v)),t.makeTensorInfo(g,y,p)}const JFe={kernelName:HC,backendName:"cpu",kernelFunc:QFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(n,e,t){n.forEach((r,s)=>{if(r<0||r>=t){const i=f0(s,e.length,ht(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${t})`)}})}function tPe(n,e){for(let t=0;t<n.length;++t){const r=n[t],s=t===n.length-1?e:n[t+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function nPe(n,e,t,r){const s=[];let i=0;const a=e.length-1+t.length,o=new Array(a).fill(null).map(()=>[0]);tPe(t,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let h=1;h<l+1;++h)o[c].push(h*u)}for(let c=0;c<n.length;++c){let u=n[c],h=n[c]+1;for(let d=0;d<t.length;++d){const f=t[d],p=d+e.length-1;if(p>=0){const m=o[p],y=m[m.length-1]-f[u];for(let g=u;g<h;++g)o[p].push(f[g+1]+y)}u=f[u],h=f[h]}h!==u&&(s.push([u,h]),i+=h-u)}return{outSplits:o,valueSlices:s,numValues:i}}function rPe(n){const e=[];for(let t=0;t<n.length;++t){const r=n[t].length,s=Tr("int32",r);e.push(s),n[t].forEach((i,a)=>s[a]=i)}return e}function rH(n,e){const t=n.slice(0,e);for(;t.length<e;)t.push(1);for(let r=e;r<n.length;r++)t[e-1]*=n[r];return t}function sPe(n,e,t,r,s,i){const a=rH(e,2)[1],o=rH(i,2)[1];let l=0;for(const c of t)for(let u=c[0];u<c[1];++u){for(let h=0;h<r;++h)s[l*o+h]=n[u*a+h];++l}}function iPe(n,e,t,r,s){const i=e.slice();i[0]=s;const a=Tr(t,Se(i)),o=n.length,l=o===0?0:o/e[0];return sPe(n,e,r,l,a,i),[a,i]}function Tse(n,e,t,r,s,i,a,o){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(ePe(i,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:h,numValues:d}=nPe(i,a,n,c),f=rPe(u),p=iPe(t,r,s,h,d);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sH=2147483647;function Ese(n,e,t,r,s,i,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=s.length===0,c=a.length===0,u=[];o||u.push(e[0]),l||u.push(s[0]),c||u.push(a[0]);for(let y=1;y<u.length;++y)if(u[y]!==u[y-1])throw new Error("starts, limits, and deltas must have the same shape");const h=u.length===0?1:u[0],d=Tr("int32",h+1);d[0]=0;for(let y=0;y<h;++y){const g=o?n[0]:n[y],v=l?r[0]:r[y],b=c?i[0]:i[y];if(b===0)throw new Error("Requires delta != 0");let w;if(b>0&&v<g||b<0&&v>g)w=0;else if(w=Math.ceil(Math.abs((v-g)/b)),w>sH)throw new Error(`Requires ((limit - start) / delta) <= ${sH}`);d[y+1]=d[y]+w}const f=d[h],p=Tr(t,f);let m=0;for(let y=0;y<h;++y){const g=d[y+1]-d[y];let v=o?n[0]:n[y];const b=c?i[0]:i[y];for(let w=0;w<g;++w)p[m++]=v,v+=b}return[d,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Mo=Kl;class YN{constructor(e,t,r,s,i,a,o,l,c,u){this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=ite(u),this.raggedRank=ate(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Mo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Mo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Mo.VALUE_ROWIDS:return YN.getMaxWidthValueRowID(t);case Mo.ROW_SPLITS:return YN.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Mo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(t===0||t===1)return 0;let r=0;for(let s=0;s<t-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const t=e.length;if(t===0)return 0;let r=0,s=e[0],i=0;for(let a=1;a<t;++a){const o=e[a];o!==s&&(s=o,i=Math.max(a-r,i),r=a)}return Math.max(t-r,i)}tensorShapeFromTensor(e,t,r=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return aH(e,r)}calculateOutputSize(e){const t=this.valuesShape,r=this.defaultValueShape;ote(r,t);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=ste(this.raggedRank,s,t);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,t,r){const s=Math.min(e,r),i=[];let a=0;for(let o=0;o<s;++o,a+=t)i.push(a);for(let o=s;o<e;++o)i.push(-1);return V(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,t,r,s){const i=e.length,a=[];for(let o=0;o<i-1;++o){const l=e[o+1]-e[o];let c=Math.min(s,l),u=t[o];u===-1&&(c=0);for(let h=0;h<c;++h)a.push(u),u+=r;for(let h=0;h<l-c;++h)a.push(-1)}if(i>0&&a.length!==e[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,r,s){const i=e.length,a=[];if(i===0)return[];let o=0,l=e[0];if(l>=t.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${t.length}`);let c=t[l];a.push(c);for(let u=1;u<i;++u){const h=e[u];if(h===l)c>=0&&(++o,o<s?c+=r:c=-1);else{if(o=0,l=h,h>=t.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${t.length}`);c=t[h]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,r,s){const i=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Mo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,r,s);case Mo.ROW_SPLITS:if(i.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(i,t,r,s);default:throw new Error(`Unsupported partition type: ${Mo[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Mo.FIRST_DIM_SIZE:return e[0];case Mo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Mo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Mo[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),r=this.calculateOutputSize(t),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=aH(r,!1),a=Tr(this.valuesDType,Se(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(t,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,a,i)}return[i,a]}setOutput(e,t,r,s){if(r.length===0)return;const i=this.values,a=r;let o=s.slice();o=o.slice(e+1);const l=Se(o),c=t.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;he(()=>{const m=ae(u,p);u=vg(m,o).dataSync()})}let h=0,d=0,f=0;for(let p=0;p<=c;++p){let m=p<c?t[p]:-1;if(m===f){++f;continue}if(d<f){const y=i.subarray(h*l),g=a.subarray(d*l),v=(f-d)*l;iH(g,y,v)}if(p>=c){const y=r.length;m=Math.floor(y/l)}if(m>f)if(this.defaultValue.length===1)a.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const y=a.slice(f*l);iH(y,u,l),++f}m<0?(h=p+1,d=f):(h=p,d=f,f=d+1)}}}function iH(n,e,t){for(let r=0;r<t;r++)n[r]=e[r]}function aH(n,e){const t=[];for(let r of n){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}t.push(r)}return t}function Ise(n,e,t,r,s,i,a,o,l,c){return new YN(n,e,t,r,s,i,a,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ase(n,e,t,r){const s=n===e,i=n<e&&t<0,a=e<n&&t>1;if(s||i||a)return Xs(0,r);const o=Math.abs(Math.ceil((e-n)/t)),l=Xs(o,r);e<n&&t===1&&(t=-1),l[0]=n;for(let c=1;c<l.length;c++)l[c]=l[c-1]+t;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nse=Au(n=>1/Math.sqrt(n)),aPe=kp(kb,Nse),oPe={kernelName:kb,backendName:"cpu",kernelFunc:aPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function om(n,e,t,r,s,i,a,o,l,c){const u=[r/s,s],h=n.values,d=e.values;if(r===0)return Vt(t,e.dtype);const f=l instanceof Kr?l:Vt(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let p=0;p<i;p++){const m=[];let y=0;for(let g=0;g<a;g++){const v=h[p*a+g];m.push(v),y+=v*o[g]}if(y<0||y>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${t}`);for(let g=0;g<s;g++)c?f.values[y*s+g]+=d[p*s+g]:f.values[y*s+g]=e.rank===0?d[0]:d[p*s+g]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lPe=Au(n=>1/(1+Math.exp(-n))),_se=Pn(Ab,n=>1/(1+Math.exp(-n))),cPe={kernelName:Ab,backendName:"cpu",kernelFunc:_se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rse(n,e,t,r,s){const i=zB(r,e,t),a=Se(t),o=ht(r);if(i){const h=BB(e,o);return s==="string"?n.slice(h,h+a):n.subarray(h,h+a)}const l=s==="string"?Mh(n):n,c=Vt(r,s,l),u=Vt(t,s);for(let h=0;h<u.size;++h){const d=u.indexToLoc(h),f=d.map((p,m)=>p+e[m]);u.set(c.get(...f),...d)}return s==="string"?Ite(u.values):u.values}function Kg(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:i,size:a}=r;it(s,"slice");const[o,l]=AF(s,i,a);MB(s,o,l);const c=t.data.get(s.dataId).values,u=Rse(c,o,l,s.shape,s.dtype);return t.makeTensorInfo(l,s.dtype,u)}const uPe={kernelName:QC,backendName:"cpu",kernelFunc:Kg};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dse(n,e,t,r,s,i,a){const o=e[0],l=i[0],c=new Array(l),u=new Array(o),h=e[1];if(l===0){if(o!==0)throw new Error(pte(o));const y=Tr(t,0),g=Tr(s,0);return[y,[0,h],g,c,u]}let d=!0,f=0;const p=new Array(l).fill(0);for(let y=0;y<o;++y){const g=n[y*h];if(g<0)throw new Error(mte(y,g));if(g>=l)throw new Error(gte(y,g,l));++p[g],d=d&&g>=f,f=g}let m=!0;for(let y=0;y<l;++y){const g=p[y]===0;c[y]=g,m=m&&!g,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(m&&d){const y=n,g=r;for(let v=0;v<o;++v)u[v]=v;return[y,[o,h],g,c,u]}else{const y=p[l-1],g=Tr(t,y*h),v=Tr(s,y),b=new Array(l).fill(0);for(let w=0;w<o;++w){const C=n[w*h],I=b[C],T=(C===0?0:p[C-1])+I;b[C]++;for(let E=0;E<h;++E)g[T*h+E]=n[w*h+E];v[T]=r[w],u[w]=T}for(let w=0;w<l;++w)if(b[w]===0){const I=w===0?0:p[w-1];g[I*h+0]=w;for(let T=1;T<h;++T)g[I*h+T]=0;v[I]=a}return[g,[y,h],v,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fse(n,e,t,r,s){const i=Se(r),a=e[0],o=s.length,l=[];let c=1,u=-1;for(let y=0;y<o;++y){const g=s[y];if(g===-1){if(u!==-1)throw new Error(yte(u,y));u=y,l.push(1)}else{if(g<0)throw new Error(vte(y,g));c*=g,l.push(g)}}if(u!==-1){if(c<=0)throw new Error(xte());const y=Math.trunc(i/c);if(c*y!==i)throw new Error(bte(r,l));l[u]=y}if(Se(l)!==i)throw new Error(wte(r,l));const d=r.length,f=[];if(d>0){f[d-1]=1;for(let y=d-2;y>=0;--y)f[y]=f[y+1]*r[y+1]}const p=[];if(o>0){p[o-1]=1;for(let y=o-2;y>=0;--y)p[y]=p[y+1]*l[y+1]}const m=Tr(t,a*o);for(let y=0;y<a;++y){let g=0;for(let v=0;v<d;++v)g+=n[y*d+v]*f[v];for(let v=0;v<o;++v)m[y*o+v]=Math.trunc(g/p[v]),g%=p[v]}return[m,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OV(n,e,t,r,s,i=!1,a=0){const o=r.length,l=[e[0],n.length/e[0]],c=l[1],h=o>0?s[o-1]+1:0;if(h<0)throw new Error(m4());const d=e.slice();d[0]=h;const f=d.reduce((b,w)=>b*w,1),p=Tr(t,f);if(o===0)return h>0&&p.fill(a),[p,d];if(h<=0)throw new Error(m4());let m=0,y=1,g=0,v=s[m];for(;;){let b=0;if(y<o){if(b=s[y],v===b){++y;continue}if(v>=b)throw new Error(Ste())}if(v<0||v>=h)throw new Error(kte(v,h));v>g&&p.fill(a,g*c,v*c);for(let w=m;w<y;++w){const C=r[w];if(C<0||C>=l[0])throw new Error(Cte(w,r[w],l[0]));for(let I=0;I<c;I++)p[v*c+I]+=n[C*c+I]}if(i)for(let w=0;w<c;w++)p[v*c+w]/=y-m;if(m=y,++y,g=v+1,v=b,y>o)break}return g<h&&p.fill(a,g*c,h*c),[p,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hPe=Au(n=>Math.sqrt(n)),dPe=Pn(_b,n=>Math.sqrt(n)),fPe={kernelName:_b,backendName:"cpu",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pse=Mr((n,e)=>{const t=n-e;return t*t}),pPe=hs(Rb,Pse),mPe={kernelName:Rb,backendName:"cpu",kernelFunc:pPe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ose=Au((n,e)=>{const{pattern:t,replaceGlobal:r,rewrite:s}=e;return n.replace(new RegExp(t,r?"g":""),s)}),gPe=kp(rT,Ose),yPe={kernelName:rT,backendName:"cpu",kernelFunc:gPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lse(n,e,t,r){const s=Vt(n,e.dtype);for(let i=0;i<s.size;i++){const a=s.indexToLoc(i),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*t[l]+r[l];s.set(e.get(...o),...a)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vPe{constructor(e,t,r,s,i,a){this.separator=lu(e),this.nGramWidths=t,this.leftPad=lu(r),this.rightPad=lu(s),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,s,i,a){for(let o=0;o<i;++o){const l=this.getPadWidth(a),c=Math.max(0,l-o),u=Math.max(0,l-(i-(o+1))),h=a-(c+u),d=t+(c>0?0:o-l);let f=0;f+=c*this.leftPad.length;for(let v=0;v<h;++v)f+=e[d+v].length;f+=u*this.rightPad.length;const p=c+u+h-1;f+=p*this.separator.length,r[s+o]=new Uint8Array(f);const m=r[s+o];let y=0;const g=v=>v.forEach(b=>m[y++]=b);for(let v=0;v<c;++v)g(this.leftPad),g(this.separator);for(let v=0;v<h-1;++v)g(e[d+v]),g(this.separator);if(h>0){g(e[d+h-1]);for(let v=0;v<u;++v)g(this.separator),g(this.rightPad)}else{for(let v=0;v<u-1;++v)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){const r=e.length,s=t.length;if(s>0){let l=t[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=t[c]>=l;if(u=u&&t[c]<=r,!u)throw new Error(`Invalid split value ${t[c]}, must be in [${l}, ${r}]`);l=t[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,a=Tr("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=i;++l){const c=t[l]-t[l-1];let u=0;this.nGramWidths.forEach(h=>{u+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&u===0&&(u=1),a[l]=a[l-1]+u}const o=new Array(a[i]);for(let l=0;l<i;++l){const c=t[l];let u=a[l];if(this.nGramWidths.forEach(h=>{const d=t[l+1]-t[l],f=this.getNumNGrams(d,h);this.createNGrams(e,c,o,u,f,h),u+=f}),this.preserveShort&&u===a[l]){const h=t[l+1]-t[l];if(h===0)continue;const d=h+2*this.padWidth;this.createNGrams(e,c,o,u,1,d)}}return[o,a]}}function Mse(n,e,t,r,s,i,a,o){return new vPe(t,r,s,i,a,o).compute(n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xPe(n,e,t,r){if(!n.length)return;if(e.length===0){for(let i=0;i<n.length;++i)r.push(n.subarray(i,i+1));return}if(e.length===1){const i=e[0];let a=n.indexOf(i);for(;a!==-1;){const o=n.subarray(0,a);(!t||o.length!==0)&&r.push(o),n=n.subarray(a+1),a=n.indexOf(i)}(!t||n.length!==0)&&r.push(n);return}let s=0;for(let i=0;i<n.length+1;i++)if(i===n.length||e.indexOf(n[i])!==-1){const a=n.subarray(s,i);(!t||a.length!==0)&&r.push(a),s=i+1}}function $se(n,e,t){const r=n.length,s=[];let i=0,a=0;const o=new Array(r);for(let d=0;d<r;++d){const f=s.length;xPe(n[d],e,t,s);const p=s.length-f;o[d]=p,i+=p,a=Math.max(a,p)}const l=Tr("int32",i*2),c=new Array(i),u=[r,a];let h=0;for(let d=0;d<r;++d)for(let f=0;f<o[d];++f)l[h*2]=d,l[h*2+1]=f,c[h]=s[h],++h;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(n,e){const t=Tr("int32",n.length);for(let r=0;r<n.length;++r)t[r]=fJ(n[r]).modulo(e).getLowBitsUnsigned();return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bse=Mr((n,e)=>n-e),bPe=RV((n,e,t,r)=>({real:n-t,imag:e-r})),LV=hs(Db,Bse,bPe),wPe={kernelName:Db,backendName:"cpu",kernelFunc:LV};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vse(n,e){const t=new Array(n.rank);for(let s=0;s<t.length;s++)t[s]=n.shape[s]*e[s];const r=Vt(t,n.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),a=new Array(n.rank);for(let l=0;l<a.length;l++)a[l]=i[l]%n.shape[l];const o=n.locToIndex(a);r.values[s]=n.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S1=(n,e)=>{const t=e.value-n.value;return t===0?n.index-e.index:t};function jse(n,e,t=0,r=n.length-1){for(;r>t;){if(r-t>600){const o=r-t+1,l=e-t+1,c=Math.log(o),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(o-u)/o)*Math.sign(l-o/2),d=Math.max(t,Math.floor(e-l*u/o+h)),f=Math.min(r,Math.floor(e+(o-l)*u/o+h));jse(n,e,d,f)}const s=n[e];let i=t,a=r;for(gh(n,t,e),S1(n[r],s)>0&&gh(n,t,r);i<a;){for(gh(n,i,a),i++,a--;S1(n[i],s)<0;)i=i+1;for(;S1(n[a],s)>0;)a=a-1}S1(n[t],s)===0?gh(n,t,a):(a=a+1,gh(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}}function Use(n,e,t,r,s){const i=e[e.length-1],[a,o]=[n.length/i,i],l=_s(t,a*r),c=_s("int32",a*r);for(let h=0;h<a;h++){const d=h*o,f=n.subarray(d,d+o);let p=new Array(f.length);f.forEach((v,b)=>p[b]={value:v,index:b}),r<p.length&&(jse(p,r),p=p.slice(0,r)),s&&p.sort(S1);const m=h*r,y=l.subarray(m,m+r),g=c.subarray(m,m+r);for(let v=0;v<r;v++)y[v]=p[v].value,g[v]=p[v].index}const u=e.slice();return u[u.length-1]=r,[Vt(u,t,l),Vt(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wse(n,e,t,r){const s=Kt(e,t)[0],i=[1,t[0],1];for(let p=0;p<s;p++)i[0]*=t[p];i[1]=t[s];for(let p=s+1;p<t.length;p++)i[2]*=t[p];const a=new Map,o=new Int32Array(t[s]),l=new Kr(i,r,n),c=[],u=i[0]===1&&i[2]===1;for(let p=0;p<t[s];p++){let m;if(u)m=n[p].toString();else{const g=[];for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)g.push(l.get(v,p,b));m=g.join(",")}const y=a.get(m);if(y!=null)o[p]=y;else{const g=a.size;a.set(m,g),o[p]=g,c.push(p)}}const h=i.slice();h[1]=a.size;const d=new Kr(h,r);c.forEach((p,m)=>{for(let y=0;y<i[0];y++)for(let g=0;g<i[2];g++)d.set(l.get(y,p,g),y,m,g)});const f=t.slice();return f[s]=h[1],{outputValues:d.values,outputShape:f,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Jre,bincountImpl:DV,bincountReduceImpl:ese,bitwiseAndImpl:tse,castImpl:Qre,ceilImpl:nse,concatImpl:rse,equalImpl:sse,expImpl:ase,expm1Impl:lse,floorDivImpl:use,floorImpl:cse,gatherNdImpl:hse,gatherV2Impl:dse,greaterEqualImpl:pse,greaterImpl:fse,lessEqualImpl:gse,lessImpl:mse,linSpaceImpl:yse,logImpl:vse,maxImpl:xse,maximumImpl:bse,minimumImpl:wse,multiplyImpl:FV,negImpl:Sse,notEqualImpl:kse,prodImpl:Cse,raggedGatherImpl:Tse,raggedRangeImpl:Ese,raggedTensorToTensorImpl:Ise,rangeImpl:Ase,rsqrtImpl:Nse,scatterImpl:om,sigmoidImpl:lPe,simpleAbsImpl:Zre,sliceImpl:Rse,sparseFillEmptyRowsImpl:Dse,sparseReshapeImpl:Fse,sparseSegmentReductionImpl:OV,sqrtImpl:hPe,squaredDifferenceImpl:Pse,staticRegexReplaceImpl:Ose,stridedSliceImpl:Lse,stringNGramsImpl:Mse,stringSplitImpl:$se,stringToHashBucketFastImpl:zse,subImpl:Bse,tileImpl:Vse,topKImpl:Use,transposeImpl:PV,uniqueImpl:Wse},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fz("cpu",()=>new jF,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gse=Pn(tb,n=>n>=0?n:Math.exp(n)-1),kPe={kernelName:tb,backendName:"cpu",kernelFunc:Gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hse(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{alpha:i}=r;it([s],"leakyRelu");const a=Se(s.shape),o=t.data.get(s.dataId).values,l=_s("float32",a);for(let c=0;c<o.length;c++)l[c]=o[c]<0?i*o[c]:o[c];return t.makeTensorInfo(s.shape,"float32",l)}const CPe={kernelName:EC,backendName:"cpu",kernelFunc:Hse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe=Mr((n,e)=>n<0?e*n:n);function qse(n){const{inputs:e,backend:t}=n,{x:r,alpha:s}=e;it([r,s],"prelu");const i=t.data.get(r.dataId).values,a=t.data.get(s.dataId).values,[o,l]=TPe(r.shape,s.shape,i,a,"float32");return t.makeTensorInfo(l,"float32",o)}const EPe={kernelName:GC,backendName:"cpu",kernelFunc:qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kse=Pn(bb,n=>Math.max(0,n)),IPe={kernelName:bb,backendName:"cpu",kernelFunc:Kse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xse=Pn(wb,n=>Math.min(Math.max(0,n),6)),APe={kernelName:wb,backendName:"cpu",kernelFunc:Xse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZN(n,e,t,r,s){if(t==="linear")return ku({inputs:{x:e},backend:n});if(t==="relu")return Kse({inputs:{x:e},backend:n});if(t==="elu")return Gse({inputs:{x:e},backend:n});if(t==="relu6")return Xse({inputs:{x:e},backend:n});if(t==="prelu")return qse({inputs:{x:e,alpha:r},backend:n});if(t==="leakyrelu")return Hse({inputs:{x:e},backend:n,attrs:{alpha:s}});if(t==="sigmoid")return _se({inputs:{x:e},backend:n});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xn(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{shape:i}=r,a=Se(s.shape),o=tz(i,a),l=Se(o);V(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),t.incRef(s.dataId);const c=t.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;u.shape=o,h.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const NPe={kernelName:qC,backendName:"cpu",kernelFunc:Xn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yse(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;it([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=a?s.shape[l-2]:s.shape[l-1],h=o?i.shape[c-1]:i.shape[c-2],d=a?s.shape[l-1]:s.shape[l-2],f=o?i.shape[c-2]:i.shape[c-1],p=s.shape.slice(0,-2),m=i.shape.slice(0,-2),y=Se(p),g=Se(m),b=Nt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,f]);V(u===h,()=>`Error in matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${a} and transposeB=${o} must match.`);const w=a?[y,u,d]:[y,d,u],C=o?[g,f,h]:[g,h,f],I=Xn({inputs:{x:s},backend:t,attrs:{shape:w}}),T=Xn({inputs:{x:i},backend:t,attrs:{shape:C}}),E=a?I.shape[1]:I.shape[2],A=a?I.shape[2]:I.shape[1],N=o?T.shape[1]:T.shape[2],F=Math.max(y,g),_=t.data.get(I.dataId).values,D=t.data.get(T.dataId).values,R=ht(I.shape),B=ht(T.shape),[z,W,K]=a?[R[0],1,R[1]]:[R[0],R[1],1],[H,se,q]=o?[1,B[1],B[0]]:[B[1],1,B[0]],X=A*N,fe=Vt([F,A,N],I.dtype),de=fe.values,ue=t.blockSize;for(let Ce=0;Ce<F;Ce++){const Ae=Ce%y,Ee=Ce%g;for(let Le=0;Le<A;Le+=ue){const Ke=Math.min(Le+ue,A);for(let Ze=0;Ze<N;Ze+=ue){const gt=Math.min(Ze+ue,N);for(let Ct=0;Ct<E;Ct+=ue){const M=Math.min(Ct+ue,E);for(let be=Le;be<Ke;be++)for(let me=Ze;me<gt;me++){let J=0;for(let Z=Ct;Z<M;Z++){const oe=_[Ae*z+be*W+Z*K],we=D[Z*H+me*se+Ee*q];J+=oe*we}de[Ce*X+(be*N+me)]+=J}}}}}return t.disposeIntermediateTensorInfo(I),t.disposeIntermediateTensorInfo(T),t.makeTensorInfo(b,fe.dtype,fe.values)}const _Pe={kernelName:uC,backendName:"cpu",kernelFunc:Yse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;let d,f,p;const m=[];d=Yse({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:t}),a&&(f=bx({inputs:{a:d,b:a},backend:t}),m.push(d),d=f),u&&(p=ZN(t,d,u,o,h),m.push(d),d=p);for(const g of m)t.disposeIntermediateTensorInfo(g);return d}const DPe={kernelName:MS,backendName:"cpu",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FPe=Pn(jx,n=>Math.acos(n)),PPe={kernelName:jx,backendName:"cpu",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OPe=Pn(Ux,n=>Math.acosh(n)),LPe={kernelName:Ux,backendName:"cpu",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(n){const{inputs:e,backend:t}=n,r=e;it(e,"addN");const s=r.map(o=>t.data.get(o.dataId).values),i=Vt(r[0].shape,r[0].dtype),a=i.values;for(let o=0;o<r.length;o++){const l=s[o];for(let c=0;c<a.length;c++)a[c]+=l[c]}return t.makeTensorInfo(i.shape,i.dtype,i.values)}const $Pe={kernelName:iC,backendName:"cpu",kernelFunc:MPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r;it(s,"all");const o=Kt(i,s.shape);let l=o;const c=vr(l,s.shape.length);let u=s;c!=null&&(u=pa({inputs:{x:s},backend:t,attrs:{perm:c}}),l=Or(l.length,s.shape.length)),Qs("all",l,u.shape.length);const[h,d]=Fs(u.shape,l),f=Se(d),p=Xs(Se(h),u.dtype),m=t.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let b=m[v];for(let w=0;w<f;++w){const C=m[v+w];b=b&&C}p[g]=b}c!=null&&t.disposeIntermediateTensorInfo(u);const y=t.makeTensorInfo(h,u.dtype,p);if(a){const g=Pr(h,o),v=Xn({inputs:{x:y},backend:t,attrs:{shape:g}});return t.disposeIntermediateTensorInfo(y),v}return y}const BPe={kernelName:LR,backendName:"cpu",kernelFunc:zPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r;it(s,"any");const o=Kt(i,s.shape);let l=o;const c=vr(l,s.shape.length);let u=s;c!=null&&(u=pa({inputs:{x:s},backend:t,attrs:{perm:c}}),l=Or(l.length,s.shape.length)),Qs("any",l,u.shape.length);const[h,d]=Fs(u.shape,l),f=Se(d),p=Xs(Se(h),u.dtype),m=t.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let b=m[v];for(let w=0;w<f;++w){const C=m[v+w];b=b||C}p[g]=b}c!=null&&t.disposeIntermediateTensorInfo(u);const y=t.makeTensorInfo(h,u.dtype,p);if(a){const g=Pr(h,o),v=Xn({inputs:{x:y},backend:t,attrs:{shape:g}});return t.disposeIntermediateTensorInfo(y),v}return y}const jPe={kernelName:MR,backendName:"cpu",kernelFunc:VPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i}=r;it(s,"argMax");let a=Kt(i,s.shape);const o=vr(a,s.shape.length);let l=s;const c=[];o!=null&&(l=pa({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),a=Or(a.length,l.shape.length)),a=[a[0]],Qs("argMax",a,l.shape.length);const[u,h]=Fs(l.shape,a),d=Se(u),f=Xs(d,"int32"),p=Se(h),m=t.data.get(l.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],b=0;for(let w=0;w<p;++w){const C=m[g+w];C>v&&(v=C,b=w)}f[y]=b}return c.forEach(y=>t.disposeIntermediateTensorInfo(y)),t.makeTensorInfo(u,"int32",f)}const WPe={kernelName:aC,backendName:"cpu",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i}=r;it(s,"argMin");let a=Kt(i,s.shape);const o=vr(a,s.shape.length);let l=s;const c=[];o!=null&&(l=pa({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),a=Or(a.length,l.shape.length)),a=[a[0]],Qs("argMin",a,l.shape.length);const[u,h]=Fs(l.shape,a),d=Se(u),f=Xs(d,"int32"),p=Se(h),m=t.data.get(l.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],b=0;for(let w=0;w<p;++w){const C=m[g+w];C<v&&(v=C,b=w)}f[y]=b}return c.forEach(y=>t.disposeIntermediateTensorInfo(y)),t.makeTensorInfo(u,"int32",f)}const HPe={kernelName:oC,backendName:"cpu",kernelFunc:GPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qPe=Pn(Wx,n=>Math.asin(n)),KPe={kernelName:Wx,backendName:"cpu",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XPe=Pn(Gx,n=>Math.asinh(n)),YPe={kernelName:Gx,backendName:"cpu",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe=Pn(Hx,n=>Math.atan(n)),QPe={kernelName:Hx,backendName:"cpu",kernelFunc:ZPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe=Mr((n,e)=>Math.atan2(n,e)),eOe=hs(Kx,JPe),tOe={kernelName:Kx,backendName:"cpu",kernelFunc:eOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nOe=Pn(qx,n=>Math.atanh(n)),rOe={kernelName:qx,backendName:"cpu",kernelFunc:nOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MV(n,e,t,r,s,i){const a=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,h=s.effectiveFilterWidth,d=s.padInfo.top,f=s.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Vt(s.outShape,t),y=m.values,g=s.outShape[1]*s.outShape[2]*s.outShape[3],v=s.outShape[2]*s.outShape[3],b=s.outShape[3];for(let w=0;w<s.batchSize;++w){const C=w*g,I=w*r[0];for(let T=0;T<s.inChannels;++T)for(let E=0;E<s.outHeight;++E){const A=E*a-d,N=Math.max(0,A),F=Math.min(s.inHeight,u+A),_=C+E*v;for(let D=0;D<s.outWidth;++D){const R=D*o-f,B=Math.max(0,R),z=Math.min(s.inWidth,h+R);let W=p,K=0,H=0;for(let q=N;q<F;q+=l){const X=I+q*r[1];for(let fe=B;fe<z;fe+=c){const de=X+fe*r[2],ue=n[de+T];i==="max"&&ue>W?W=ue:i==="avg"&&(K+=ue,H++)}if(isNaN(W))break}const se=_+D*b+T;y[se]=i==="avg"?K/H:W}}}return m}function Zse(n,e,t,r,s=!1,i=!1){const a=Vt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,m=Vt(e,t,n);for(let y=0;y<r.batchSize;++y)for(let g=0;g<r.inChannels;++g)for(let v=0;v<r.outHeight;++v){const b=v*o-f;let w=b;for(;w<0;)w+=c;const C=Math.min(r.inHeight,h+b);for(let I=0;I<r.outWidth;++I){const T=I*l-p;let E=T;for(;E<0;)E+=u;const A=Math.min(r.inWidth,d+T);let N=Number.NEGATIVE_INFINITY,F=-1;for(let _=w;_<C;_+=c){const D=_-b;for(let R=E;R<A;R+=u){const B=R-T,z=m.get(y,_,R,g);z>N&&(N=z,s?F=i?((y*r.inHeight+_)*r.inWidth+R)*r.inChannels+g:(_*r.inWidth+R)*r.inChannels+g:F=D*d+B)}}a.set(F,y,v,I,g)}}return a}function Qse(n,e,t,r,s,i){const a=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,h=s.dilationWidth,d=s.effectiveFilterDepth,f=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.front,y=s.padInfo.top,g=s.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Vt(s.outShape,t),w=b.values,C=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],I=s.outShape[2]*s.outShape[3]*s.outShape[4],T=s.outShape[3]*s.outShape[4],E=s.outShape[4];for(let A=0;A<s.batchSize;++A){const N=A*C,F=A*r[0];for(let _=0;_<s.inChannels;++_)for(let D=0;D<s.outDepth;++D){const R=D*a-m;let B=R;for(;B<0;)B+=c;const z=Math.min(s.inDepth,d+R),W=N+D*I;for(let K=0;K<s.outHeight;++K){const H=K*o-y;let se=H;for(;se<0;)se+=u;const q=Math.min(s.inHeight,f+H),X=W+K*T;for(let fe=0;fe<s.outWidth;++fe){const de=fe*l-g;let ue=de;for(;ue<0;)ue+=h;const Ce=Math.min(s.inWidth,p+de),Ae=X+fe*E;let Ee=v,Le=0,Ke=0;for(let gt=B;gt<z;gt+=c){const Ct=F+gt*r[1];for(let M=se;M<q;M+=u){const be=Ct+M*r[2];for(let me=ue;me<Ce;me+=h){const J=be+me*r[3],Z=n[J+_];if(i==="max"&&Z>Ee?Ee=Z:i==="avg"&&(Le+=Z,Ke++),isNaN(Ee))break}if(isNaN(Ee))break}if(isNaN(Ee))break}const Ze=Ae+_;w[Ze]=i==="avg"?Le/Math.max(Ke,1):Ee}}}}return b}function sOe(n,e){const t=Vt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let y=0;y<e.inChannels;++y)for(let g=0;g<e.outDepth;++g){const v=g*r-d;let b=v;for(;b<0;)b+=a;const w=Math.min(e.inDepth,c+v);for(let C=0;C<e.outHeight;++C){const I=C*s-f;let T=I;for(;T<0;)T+=o;const E=Math.min(e.inHeight,u+I);for(let A=0;A<e.outWidth;++A){const N=A*i-p;let F=N;for(;F<0;)F+=l;const _=Math.min(e.inWidth,h+N);let D=Number.NEGATIVE_INFINITY,R=-1;for(let B=b;B<w;B+=a){const z=B-v;for(let W=T;W<E;W+=o){const K=W-I;for(let H=F;H<_;H+=l){const se=H-N,q=n.get(m,B,W,H,y);q>=D&&(D=q,R=z*u*h+K*u+se)}}}t.set(R,m,g,C,A,y)}}}return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;it(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;V(Zs(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=wl(s.shape,i,a,c,o,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&Qt(u.inShape,u.outShape))h=ku({inputs:{x:s},backend:t});else{const d=t.data.get(s.dataId).values,f=ht(s.shape),p=MV(d,s.shape,s.dtype,f,u,"avg");h=t.makeTensorInfo(u.outShape,s.dtype,p.values)}return h}const aOe={kernelName:lC,backendName:"cpu",kernelFunc:iOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;it(s,"avgPool3d");const u=Zh(s.shape,i,a,1,o,l,c),h=t.data.get(s.dataId).values,d=Qse(h,s.shape,s.dtype,ht(s.shape),u,"avg");return t.makeTensorInfo(d.shape,"float32",d.values)}const lOe={kernelName:cC,backendName:"cpu",kernelFunc:oOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;it([s,i],"avgPool3DGrad");const u=Zh(i.shape,a,o,1,l,c),h=u.strideDepth,d=u.strideHeight,f=u.strideWidth,p=u.filterDepth,m=u.filterHeight,y=u.filterWidth,g=u.dilationDepth,v=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,C=u.effectiveFilterHeight,I=u.effectiveFilterWidth,T=w-1-u.padInfo.front,E=I-1-u.padInfo.left,A=C-1-u.padInfo.top,N=Vt(i.shape,"float32"),F=1/(p*m*y),_=t.bufferSync(s);for(let D=0;D<u.batchSize;++D)for(let R=0;R<u.inChannels;++R)for(let B=0;B<u.inDepth;++B)for(let z=0;z<u.inHeight;++z)for(let W=0;W<u.inWidth;++W){const K=B-T,H=z-A,se=W-E;let q=0;for(let X=0;X<w;X+=g){const fe=(K+X)/h;if(!(fe<0||fe>=u.outDepth||Math.floor(fe)!==fe))for(let de=0;de<C;de+=v){const ue=(H+de)/d;if(!(ue<0||ue>=u.outHeight||Math.floor(ue)!==ue))for(let Ce=0;Ce<I;Ce+=b){const Ae=(se+Ce)/f;if(Ae<0||Ae>=u.outWidth||Math.floor(Ae)!==Ae)continue;const Ee=_.get(D,fe,ue,Ae,R);q+=Ee}}}N.set(q*F,D,B,z,W,R)}return t.makeTensorInfo(N.shape,N.dtype,N.values)}const uOe={kernelName:zR,backendName:"cpu",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i}=e,a=i;it([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=wl(a.shape,o,l,1,c),h=u.strideHeight,d=u.strideWidth,f=u.filterHeight,p=u.filterWidth,m=u.dilationHeight,y=u.dilationWidth,g=u.effectiveFilterHeight,v=u.effectiveFilterWidth,b=v-1-u.padInfo.left,w=g-1-u.padInfo.top,C=Vt(a.shape,"float32"),I=1/(f*p),T=t.data.get(s.dataId).values,E=Vt(s.shape,"float32",T);for(let A=0;A<u.batchSize;++A)for(let N=0;N<u.inChannels;++N)for(let F=0;F<u.inHeight;++F)for(let _=0;_<u.inWidth;++_){const D=F-w,R=_-b;let B=0;for(let z=0;z<g;z+=m){const W=(D+z)/h;if(!(W<0||W>=u.outHeight||Math.floor(W)!==W))for(let K=0;K<v;K+=y){const H=(R+K)/d;if(H<0||H>=u.outWidth||Math.floor(H)!==H)continue;const se=E.get(A,W,H,N);B+=se}}C.set(B*I,A,F,_,N)}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const dOe={kernelName:$R,backendName:"cpu",kernelFunc:hOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,scale:i,offset:a,mean:o,variance:l}=e;V(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),it([s,o,l,i,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=t.data.get(s.dataId).values,h=t.data.get(o.dataId).values,d=t.data.get(l.dataId).values,f=i?t.data.get(i.dataId).values:new Float32Array([1]),p=a?t.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),y=p.length,g=f.length,v=d.length,b=h.length;let w=0,C=0,I=0,T=0;for(let E=0;E<u.length;++E)m[E]=p[w++]+(u[E]-h[C++])*f[I++]/Math.sqrt(d[T++]+c),w>=y&&(w=0),C>=b&&(C=0),I>=g&&(I=0),T>=v&&(T=0);return t.makeTensorInfo(s.shape,s.dtype,m)}const pOe={kernelName:kC,backendName:"cpu",kernelFunc:fOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:i,crops:a}=r;it([s],"batchToSpaceND");const o=i.reduce((g,v)=>g*v),l=IT(s.shape,i,o),c=AT(l.length,i.length),u=NT(s.shape,i,o),h=HB(a,i.length),d=qB(u,a,i.length),f=Xn({inputs:{x:s},backend:t,attrs:{shape:l}}),p=pa({inputs:{x:f},backend:t,attrs:{perm:c}}),m=Xn({inputs:{x:p},backend:t,attrs:{shape:u}}),y=Kg({inputs:{x:m},backend:t,attrs:{begin:h,size:d}});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(m),y}const gOe={kernelName:hC,backendName:"cpu",kernelFunc:mOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:i}=e,{size:a}=r,o=t.data.get(s.dataId).values,l=t.data.get(i.dataId).values,c=DV(o,l,i.dtype,i.shape,a);return t.makeTensorInfo([a],i.dtype,c)}const vOe={kernelName:BR,backendName:"cpu",kernelFunc:yOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(n){const{inputs:e,backend:t}=n,{s0:r,s1:s}=e,i=t.data.get(r.dataId).values,a=t.data.get(s.dataId).values,o=Nt(Array.from(i),Array.from(a));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const bOe={kernelName:VR,backendName:"cpu",kernelFunc:xOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wOe=Pn(Zx,(n,e)=>{const t=e;return n>t.clipValueMax?t.clipValueMax:n<t.clipValueMin?t.clipValueMin:n}),SOe={kernelName:Zx,backendName:"cpu",kernelFunc:wOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOe=n=>{const{x:e}=n.inputs,t=n.backend,r=new Float32Array(Se(e.shape)),s=t.data.get(e.dataId),i=s.complexTensorInfos.real,a=s.complexTensorInfos.imag,o=t.data.get(i.dataId).values,l=t.data.get(a.dataId).values;for(let c=0;c<o.length;c++){const u=o[c],h=l[c];r[c]=Math.hypot(u,h)}return t.makeOutput(r,e.shape,"float32")},COe={kernelName:fC,backendName:"cpu",kernelFunc:kOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wx(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.data.get(r.dataId).complexTensorInfos.imag,i=t.data.get(s.dataId).values;return t.makeTensorInfo(s.shape,s.dtype,i)}const TOe={kernelName:oD,backendName:"cpu",kernelFunc:wx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sx(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r,i=Kt(s,e[0].shape)[0],a=e.map(m=>m.shape);UB(a,i);let o=uu(e.map(m=>m.shape),i);if(Se(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(m=>Se(m.shape)>0);if(l.length===1)return ku({inputs:{x:l[0]},backend:t});if(l[0].dtype==="complex64"){const m=l.map(w=>qg({inputs:{input:w},backend:t})),y=l.map(w=>wx({inputs:{input:w},backend:t})),g=Sx({inputs:m,backend:t,attrs:{axis:i}}),v=Sx({inputs:y,backend:t,attrs:{axis:i}}),b=_a({inputs:{real:g,imag:v},backend:t});return m.forEach(w=>t.disposeIntermediateTensorInfo(w)),y.forEach(w=>t.disposeIntermediateTensorInfo(w)),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),b}const c=l.map(m=>{const g=[-1,Se(m.shape.slice(i))];return Xn({inputs:{x:m},backend:t,attrs:{shape:g}})}),u=c.map(m=>({vals:t.data.get(m.dataId).values,shape:m.shape}));o=uu(c.map(m=>m.shape),1);const h=c[0].shape[0]===1,d=rse(u,o,e[0].dtype,h),f=uu(l.map(m=>m.shape),i),p=t.makeTensorInfo(f,e[0].dtype,d);return c.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}const EOe={kernelName:pC,backendName:"cpu",kernelFunc:Sx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jse(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;it([s,i],"conv2d");const h=Qh(l),d=Ds(s.shape,i.shape,a,c,o,u,!1,h),f=d.filterHeight,p=d.filterWidth,m=d.dilationHeight,y=d.dilationWidth,g=d.padInfo.left,v=d.padInfo.top,b=d.dataFormat==="channelsLast",w=new Kr(d.outShape,s.dtype),C=ht(s.shape),I=ht(i.shape),T=C[0],E=b?C[1]:C[2],A=b?C[2]:1,N=b?1:C[1],F=w.strides[0],_=b?w.strides[1]:w.strides[2],D=b?w.strides[2]:1,R=b?1:w.strides[1],B=t.data.get(s.dataId).values,z=t.data.get(i.dataId).values,W=w.values;for(let K=0;K<d.batchSize;++K){const H=K*T,se=K*F;for(let q=0;q<d.outHeight;++q){const X=se+q*_,fe=q*d.strideHeight-v;for(let de=0;de<f;++de){const ue=fe+de*m;if(ue<0||ue>=d.inHeight)continue;const Ce=de*I[0],Ae=H+ue*E;for(let Ee=0;Ee<d.outWidth;++Ee){const Le=X+Ee*D,Ke=Ee*d.strideWidth-g;for(let Ze=0;Ze<p;++Ze){const gt=Ke+Ze*y;if(gt<0||gt>=d.inWidth)continue;const Ct=Ce+Ze*I[1],M=Ae+gt*A;let be=Ct;for(let me=0;me<d.inChannels;++me){const J=B[M+me*N];for(let Z=0;Z<d.outChannels;++Z)W[Le+Z*R]+=J*z[be+Z];be+=d.outChannels}}}}}}return t.makeTensorInfo(w.shape,w.dtype,W)}const IOe={kernelName:mC,backendName:"cpu",kernelFunc:Jse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;it([s,i],"conv2dBackpropFilter");const h=Qh(l),d=Ds(s.shape,u,a,1,o,c,!1,h),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:y}=d,g=d.dataFormat==="channelsLast",v=new Kr(d.filterShape,"float32"),b=d.padInfo.left,w=d.padInfo.top,C=t.data.get(s.dataId).values,I=t.data.get(i.dataId).values,T=new Kr(s.shape,s.dtype,C),E=new Kr(i.shape,i.dtype,I);for(let A=0;A<m;++A){const N=Math.max(0,Math.ceil((w-A)/f)),F=Math.min(d.outHeight,(d.inHeight+w-A)/f);for(let _=0;_<y;++_){const D=Math.max(0,Math.ceil((b-_)/p)),R=Math.min(d.outWidth,(d.inWidth+b-_)/p);for(let B=0;B<d.inChannels;++B)for(let z=0;z<d.outChannels;++z){let W=0;for(let K=0;K<d.batchSize;++K)for(let H=N;H<F;++H){const se=A+H*f-w;for(let q=D;q<R;++q){const X=_+q*p-b;g?W+=T.get(K,se,X,B)*E.get(K,H,q,z):W+=T.get(K,B,se,X)*E.get(K,z,H,q)}}v.set(W,A,_,B,z)}}}return t.makeTensorInfo(v.shape,v.dtype,v.values)}const NOe={kernelName:UR,backendName:"cpu",kernelFunc:AOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;it([s,i],"conv2dBackpropInput");const h=ht(i.shape),d=ht(s.shape);let f=Qh(c);const p=Ds(a,i.shape,o,1,l,u,!1,f),m=new Kr(p.inShape,"float32"),y=m.values,g=t.data.get(s.dataId).values,v=t.data.get(i.dataId).values,[b,w,C]=h,{batchSize:I,filterHeight:T,filterWidth:E,inChannels:A,inHeight:N,inWidth:F,outChannels:_,outHeight:D,outWidth:R,strideHeight:B,strideWidth:z}=p;f=p.dataFormat;const W=T-1-p.padInfo.top,K=E-1-p.padInfo.left,H=f==="channelsLast",se=m.strides[0],q=H?m.strides[1]:m.strides[2],X=H?m.strides[2]:1,fe=H?1:m.strides[1],de=d[0],ue=H?d[1]:d[2],Ce=H?d[2]:1,Ae=H?1:d[1];for(let Ee=0;Ee<I;++Ee)for(let Le=0;Le<A;++Le)for(let Ke=0;Ke<N;++Ke){const Ze=Ke-W,gt=Math.max(0,Math.ceil(Ze/B)),Ct=Math.min(D,(T+Ze)/B);for(let M=0;M<F;++M){const be=M-K,me=Math.max(0,Math.ceil(be/z)),J=Math.min(R,(E+be)/z);let Z=0;for(let we=gt;we<Ct;++we){const Ne=we*B-Ze;for(let te=me;te<J;++te){const xe=te*z-be,ce=de*Ee+ue*we+Ce*te,pe=b*(T-1-Ne)+w*(E-1-xe)+C*Le;for(let Ie=0;Ie<_;++Ie){const je=g[ce+Ae*Ie],Pe=v[pe+Ie];Z+=je*Pe}}}const oe=se*Ee+q*Ke+X*M+fe*Le;y[oe]=Z}}return t.makeTensorInfo(m.shape,m.dtype,m.values)}const ROe={kernelName:gC,backendName:"cpu",kernelFunc:_Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r;it([s,i],"conv3d");const c=yp(s.shape,i.shape,a,l,o),{filterDepth:u,filterHeight:h,filterWidth:d,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:y}=c,g=y.front,v=y.left,b=y.top,w=new Kr(c.outShape,s.dtype),C=t.data.get(s.dataId).values,I=t.data.get(i.dataId).values,T=w.values,E=ht(s.shape),A=ht(i.shape);for(let N=0;N<c.batchSize;++N){const F=N*E[0],_=N*w.strides[0];for(let D=0;D<c.outDepth;++D){const R=_+D*w.strides[1],B=D*c.strideDepth-g;for(let z=0;z<u;++z){const W=B+z*f;if(W<0||W>=c.inDepth)continue;const K=z*A[0],H=F+W*E[1];for(let se=0;se<c.outHeight;++se){const q=R+se*w.strides[2],X=se*c.strideHeight-b;for(let fe=0;fe<h;++fe){const de=X+fe*p;if(de<0||de>=c.inHeight)continue;const ue=K+fe*A[1],Ce=H+de*E[2];for(let Ae=0;Ae<c.outWidth;++Ae){const Ee=q+Ae*c.outChannels,Le=Ae*c.strideWidth-v;for(let Ke=0;Ke<d;++Ke){const Ze=Le+Ke*m;if(Ze<0||Ze>=c.inWidth)continue;const gt=ue+Ke*A[2],Ct=Ce+Ze*c.inChannels;let M=gt;for(let be=0;be<c.inChannels;++be){const me=C[Ct+be];for(let J=0;J<c.outChannels;++J)T[Ee+J]+=me*I[M+J];M+=c.outChannels}}}}}}}}return t.makeTensorInfo(w.shape,w.dtype,w.values)}const FOe={kernelName:yC,backendName:"cpu",kernelFunc:DOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r;it([s,i],"conv3dBackpropFilterV2");const c=ht(s.shape),u=ht(i.shape),h=yp(s.shape,l,a,1,o),d=h.strideDepth,f=h.strideHeight,p=h.strideWidth,m=h.filterDepth,y=h.filterHeight,g=h.filterWidth,v=new Kr(h.filterShape,"float32"),b=v.values,[w,C,I,T]=v.strides,E=t.data.get(i.dataId).values,[A,N,F,_]=u,D=t.data.get(s.dataId).values,[R,B,z,W]=c,K=h.padInfo.front,H=h.padInfo.left,se=h.padInfo.top;for(let q=0;q<m;++q){const X=Math.max(0,Math.ceil((K-q)/d)),fe=Math.min(h.outDepth,(h.inDepth+K-q)/d),de=q*w;for(let ue=0;ue<y;++ue){const Ce=Math.max(0,Math.ceil((se-ue)/f)),Ae=Math.min(h.outHeight,(h.inHeight+se-ue)/f),Ee=ue*C+de;for(let Le=0;Le<g;++Le){const Ke=Math.max(0,Math.ceil((H-Le)/p)),Ze=Math.min(h.outWidth,(h.inWidth+H-Le)/p),gt=Le*I+Ee;for(let Ct=0;Ct<h.inChannels;++Ct){const M=Ct*T+gt;for(let be=0;be<h.outChannels;++be){let me=0;for(let J=0;J<h.batchSize;++J){const Z=J*R,oe=J*A;for(let we=X;we<fe;++we){const te=(q+we*d-K)*B+Z,xe=we*N+oe;for(let ce=Ce;ce<Ae;++ce){const Ie=(ue+ce*f-se)*z+te,je=ce*F+xe;for(let Pe=Ke;Pe<Ze;++Pe){const Lt=(Le+Pe*p-H)*W+Ie,Dt=Pe*_+je;me+=D[Lt+Ct]*E[Dt+be]}}}}b[M+be]=me}}}}}return t.makeTensorInfo(v.shape,v.dtype,v.values)}const OOe={kernelName:WR,backendName:"cpu",kernelFunc:POe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r;it([s],"conv3dBackpropInputV2");const c=ht(s.shape),u=ht(i.shape),h=yp(l,i.shape,o,1,a),d=new Kr(h.inShape,"float32"),f=d.values,[p,m,y,g]=d.strides,v=t.data.get(s.dataId).values,[b,w,C,I]=c,T=t.data.get(i.dataId).values,[E,A,N,F]=u,{batchSize:_,filterDepth:D,filterHeight:R,filterWidth:B,inChannels:z,inDepth:W,inHeight:K,inWidth:H,outChannels:se,outDepth:q,outHeight:X,outWidth:fe,strideDepth:de,strideHeight:ue,strideWidth:Ce}=h,Ae=D-1-h.padInfo.front,Ee=R-1-h.padInfo.top,Le=B-1-h.padInfo.left;for(let Ke=0;Ke<_;++Ke)for(let Ze=0;Ze<z;++Ze)for(let gt=0;gt<W;++gt){const Ct=gt-Ae,M=Math.max(0,Math.ceil(Ct/de)),be=Math.min(q,(D+Ct)/de);for(let me=0;me<K;++me){const J=me-Ee,Z=Math.max(0,Math.ceil(J/ue)),oe=Math.min(X,(R+J)/ue);for(let we=0;we<H;++we){const Ne=we-Le,te=Math.max(0,Math.ceil(Ne/Ce)),xe=Math.min(fe,(B+Ne)/Ce);let ce=0;for(let pe=M;pe<be;++pe){const Ie=pe*de-Ct;for(let je=Z;je<oe;++je){const Pe=je*ue-J;for(let xt=te;xt<xe;++xt){const Lt=xt*Ce-Ne,Dt=b*Ke+w*pe+C*je+I*xt,dn=E*(D-1-Ie)+A*(R-1-Pe)+N*(B-1-Lt)+F*Ze;for(let ct=0;ct<se;++ct){const Zr=v[Dt+ct],Ha=T[dn+ct];ce+=Zr*Ha}}}}f[p*Ke+m*gt+y*me+g*we+Ze]=ce}}}return t.makeTensorInfo(d.shape,d.dtype,d.values)}const MOe={kernelName:GR,backendName:"cpu",kernelFunc:LOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe=Pn(Qx,n=>Math.cos(n)),zOe={kernelName:Qx,backendName:"cpu",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe=Pn(Jx,n=>Math.cosh(n)),VOe={kernelName:Jx,backendName:"cpu",kernelFunc:BOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(n){const{inputs:e,backend:t,attrs:r}=n,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[u,h,d,f]=s.shape,p=i.shape[0],[m,y]=o,g=Vt([p,m,y,f],"float32"),v=t.data.get(i.dataId).values,b=t.data.get(a.dataId).values,w=t.data.get(s.dataId).values,C=ht(s.shape),I=ht(g.shape);for(let T=0;T<p;T++){const E=T*4,A=v[E],N=v[E+1],F=v[E+2],_=v[E+3],D=b[T];if(D>=u)continue;const R=m>1?(F-A)*(h-1)/(m-1):0,B=y>1?(_-N)*(d-1)/(y-1):0;for(let z=0;z<m;z++){const W=m>1?A*(h-1)+z*R:.5*(A+F)*(h-1);if(W<0||W>h-1){for(let K=0;K<y;K++)for(let H=0;H<f;H++){const se=H+K*I[2]+z*I[1]+T*I[0];g.values[se]=c}continue}if(l==="bilinear"){const K=Math.floor(W),H=Math.ceil(W),se=W-K;for(let q=0;q<y;q++){const X=y>1?N*(d-1)+q*B:.5*(N+_)*(d-1);if(X<0||X>d-1){for(let Ce=0;Ce<f;Ce++){const Ae=Ce+q*I[2]+z*I[1]+T*I[0];g.values[Ae]=c}continue}const fe=Math.floor(X),de=Math.ceil(X),ue=X-fe;for(let Ce=0;Ce<f;Ce++){let Ae=Ce+fe*C[2]+K*C[1]+D*C[0];const Ee=w[Ae];Ae=Ce+de*C[2]+K*C[1]+D*C[0];const Le=w[Ae];Ae=Ce+fe*C[2]+H*C[1]+D*C[0];const Ke=w[Ae];Ae=Ce+de*C[2]+H*C[1]+D*C[0];const Ze=w[Ae],gt=Ee+(Le-Ee)*ue,Ct=Ke+(Ze-Ke)*ue;Ae=Ce+q*I[2]+z*I[1]+T*I[0],g.values[Ae]=gt+(Ct-gt)*se}}}else for(let K=0;K<y;++K){const H=y>1?N*(d-1)+K*B:.5*(N+_)*(d-1);if(H<0||H>d-1){for(let X=0;X<f;X++){const fe=X+K*I[2]+z*I[1]+T*I[0];g.values[fe]=c}continue}const se=Math.round(H),q=Math.round(W);for(let X=0;X<f;X++){const fe=X+se*C[2]+q*C[1]+D*C[0],de=X+K*I[2]+z*I[1]+T*I[0];g.values[de]=w[fe]}}}}return t.makeTensorInfo(g.shape,g.dtype,g.values)}const UOe={kernelName:qR,backendName:"cpu",kernelFunc:jOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;it(s,"cumprod");const l=vr([i],s.shape.length);let c=s;l!=null&&(c=pa({inputs:{x:s},backend:t,attrs:{perm:l}}));const u=Or(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=ca(c.dtype,"int32"),d=OR(Se(c.shape),h),f=t.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=o?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const b=m(g,v);if(v===0)d[b]=a?1:f[b];else{const w=m(g,v-1);d[b]=a?f[w]*d[w]:f[b]*d[w]}}const y=t.makeTensorInfo(c.shape,h,d);if(l!=null){const g=vp(l),v=pa({inputs:{x:y},backend:t,attrs:{perm:g}});return t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(c),v}return y}const GOe={kernelName:HR,backendName:"cpu",kernelFunc:WOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;it(s,"cumsum");const l=vr([i],s.shape.length);let c=s;l!=null&&(c=pa({inputs:{x:s},backend:t,attrs:{perm:l}}));const u=Or(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=ca(c.dtype,"int32"),d=Xs(Se(c.shape),h),f=t.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=o?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const b=m(g,v);if(v===0)d[b]=a?0:f[b];else{const w=m(g,v-1);d[b]=a?f[w]+d[w]:f[b]+d[w]}}const y=t.makeTensorInfo(c.shape,h,d);if(l!=null){const g=vp(l),v=pa({inputs:{x:y},backend:t,attrs:{perm:g}});return t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(c),v}return y}const qOe={kernelName:vC,backendName:"cpu",kernelFunc:HOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=t.data.get(s.dataId).values,c=t.data.get(i.dataId).values,u=DV(l,c,i.dtype,i.shape,a);return t.makeTensorInfo([a],i.dtype,u)}else if(s.shape.length===2){const l=t.bufferSync(s),c=t.bufferSync(i),u=ese(l,c,a,o);return t.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const XOe={kernelName:KR,backendName:"cpu",kernelFunc:KOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockSize:i,dataFormat:a}=r;V(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],h=l*i,d=c*i,f=u/(i*i),p=t.data.get(s.dataId).values,m=new Float32Array(o*h*d*f);let y=0;for(let g=0;g<o;++g)for(let v=0;v<h;++v){const b=Math.floor(v/i),w=v%i;for(let C=0;C<d;++C){const I=Math.floor(C/i),T=C%i,E=(w*i+T)*f;for(let A=0;A<f;++A){const F=A+E+u*(I+c*(b+l*g));m[y++]=p[F]}}}return t.makeTensorInfo([o,h,d,f],s.dtype,m)}const ZOe={kernelName:XR,backendName:"cpu",kernelFunc:YOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;it([s,i],"depthwiseConv2DNative");const u=ht(s.shape),h=ht(i.shape);let d=l;d==null&&(d=[1,1]),V(Zs(a,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);const f=Ds(s.shape,i.shape,a,d,o,c,!0),{filterHeight:p,filterWidth:m,dilationHeight:y,dilationWidth:g,padInfo:v}=f,b=v.left,w=v.top,C=f.outChannels/f.inChannels,I=new Kr(f.outShape,s.dtype),T=t.data.get(s.dataId).values,E=t.data.get(i.dataId).values,A=I.values;for(let N=0;N<f.batchSize;++N){const F=N*u[0],_=N*I.strides[0];for(let D=0;D<f.outHeight;++D){const R=_+D*I.strides[1],B=D*f.strideHeight-w;for(let z=0;z<p;++z){const W=B+z*y;if(W<0||W>=f.inHeight)continue;const K=z*h[0],H=F+W*u[1];for(let se=0;se<f.outWidth;++se){const q=R+se*I.strides[2],X=se*f.strideWidth-b;for(let fe=0;fe<m;++fe){const de=X+fe*g;if(de<0||de>=f.inWidth)continue;const ue=K+fe*h[1],Ce=H+de*f.inChannels;let Ae=q,Ee=ue;for(let Le=0;Le<f.inChannels;++Le){const Ke=T[Ce+Le];for(let Ze=0;Ze<C;++Ze)A[Ae+Ze]+=Ke*E[Ee+Ze];Ae+=C,Ee+=C}}}}}}return t.makeTensorInfo(I.shape,I.dtype,I.values)}const QOe={kernelName:xC,backendName:"cpu",kernelFunc:eie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;it([s,i],"depthwiseConv2dNativeBackpropFilter");const h=Ds(s.shape,u,a,o,l,c,!0),{strideHeight:d,strideWidth:f,filterHeight:p,filterWidth:m}=h,y=new Kr(h.filterShape,"float32"),g=h.padInfo.left,v=h.padInfo.top,b=h.outChannels/h.inChannels,w=t.data.get(s.dataId).values,C=new Kr(s.shape,s.dtype,w),I=t.data.get(i.dataId).values,T=new Kr(i.shape,i.dtype,I);for(let E=0;E<p;++E){const A=Math.max(0,Math.ceil((v-E)/d)),N=Math.min(h.outHeight,(h.inHeight+v-E)/d);for(let F=0;F<m;++F){const _=Math.max(0,Math.ceil((g-F)/f)),D=Math.min(h.outWidth,(h.inWidth+g-F)/f);for(let R=0;R<h.outChannels;++R){const B=Math.trunc(R/b),z=R%b;let W=0;for(let K=0;K<h.batchSize;++K)for(let H=A;H<N;++H){const se=E+H*d-v;for(let q=_;q<D;++q){const X=F+q*f-g;W+=C.get(K,se,X,B)*T.get(K,H,q,R)}}y.set(W,E,F,B,z)}}}return t.makeTensorInfo(y.shape,y.dtype,y.values)}const e3e={kernelName:YR,backendName:"cpu",kernelFunc:JOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;it([s,i],"depthwiseConv2DNativeBackpropInput");const h=ht(s.shape),d=ht(i.shape),f=Ds(u,i.shape,a,o,l,c,!0),p=new Kr(f.inShape,"float32"),m=p.values,[y,g,v]=p.strides,b=t.data.get(s.dataId).values,[w,C,I]=h,T=t.data.get(i.dataId).values,[E,A,N]=d,{batchSize:F,filterHeight:_,filterWidth:D,inChannels:R,inHeight:B,inWidth:z,outChannels:W,outHeight:K,outWidth:H,strideHeight:se,strideWidth:q}=f,X=_-1-f.padInfo.top,fe=D-1-f.padInfo.left,de=W/R;for(let ue=0;ue<F;++ue)for(let Ce=0;Ce<R;++Ce)for(let Ae=0;Ae<B;++Ae){const Ee=Ae-X,Le=Math.max(0,Math.ceil(Ee/se)),Ke=Math.min(K,(_+Ee)/se);for(let Ze=0;Ze<z;++Ze){const gt=Ze-fe,Ct=Math.max(0,Math.ceil(gt/q)),M=Math.min(H,(D+gt)/q);let be=0;for(let me=Le;me<Ke;++me){const J=me*se-Ee;for(let Z=Ct;Z<M;++Z){const oe=Z*q-gt,we=w*ue+C*me+I*Z,Ne=E*(_-1-J)+A*(D-1-oe)+N*Ce;for(let te=0;te<de;++te){const xe=Ce*de+te,ce=b[we+xe],pe=T[Ne+te];be+=ce*pe}}}m[y*ue+g*Ae+v*Ze+Ce]=be}}return t.makeTensorInfo(p.shape,p.dtype,p.values)}const n3e={kernelName:ZR,backendName:"cpu",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(n){const{inputs:e,backend:t}=n,{x:r}=e,s=Se(r.shape),i=t.data.get(r.dataId).values,a=Vt([s,s],r.dtype),o=a.values;for(let c=0;c<i.length;c++)o[c*s+c]=i[c];const l=[...r.shape,...r.shape];return t.makeTensorInfo(l,a.dtype,a.values)}const s3e={kernelName:QR,backendName:"cpu",kernelFunc:r3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3e={kernelName:bC,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s}=n,{strides:i,pad:a,dilations:o}=t,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,h=l.data.get(s.dataId).values,d=s.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:y,outHeight:g,outWidth:v,padInfo:b,strideHeight:w,strideWidth:C,filterHeight:I,filterWidth:T,dilationHeight:E,dilationWidth:A,outShape:N}=cT(r.shape,s.shape,i,a,"NHWC",o),F=Se(N),_=N.length,D=Tr(r.dtype,F);for(let B=0;B<f;++B)for(let z=0;z<g;++z){const W=z*w-b.top;for(let K=0;K<v;++K){const H=K*C-b.left;for(let se=0;se<y;++se){let q=Number.MIN_SAFE_INTEGER;for(let fe=0;fe<I;++fe){const de=W+fe*E;if(de>=0&&de<p)for(let ue=0;ue<T;++ue){const Ce=H+ue*A;if(Ce>=0&&Ce<m){const Ae=nc([B,de,Ce,se],u,ht(r.shape)),Ee=nc([fe,ue,se],d,ht(s.shape)),Le=c[Ae]+h[Ee];Le>q&&(q=Le)}}}const X=nc([B,z,K,se],_,ht(N));D[X]=q}}}return{dataId:l.write(mp(D,r.dtype),N,r.dtype),shape:N,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e={kernelName:FN,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s,dy:i}=n,{strides:a,pad:o,dilations:l}=t,c=e,u=So(r.shape,c.data.get(r.dataId).values),h=So(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:b,strideWidth:w,filterHeight:C,filterWidth:I,dilationHeight:T,dilationWidth:E,outShape:A}=cT(r.shape,s.shape,a,o,"NHWC",l);V(i.rank===A.length,()=>`Error in ${FN}, dy must have the same rank as output ${A.length}, but got ${i.rank}`);const N=So(A,c.data.get(i.dataId).values),F=rz(s.shape,s.dtype);for(let D=0;D<d;++D)for(let R=0;R<y;++R){const B=R*b-v.top;for(let z=0;z<g;++z){const W=z*w-v.left;for(let K=0;K<m;++K){let H=Number.MIN_SAFE_INTEGER,se=0,q=0;for(let X=0;X<C;++X){const fe=B+X*T;if(fe>=0&&fe<f)for(let de=0;de<I;++de){const ue=W+de*E;if(ue>=0&&ue<p){const Ce=u[D][fe][ue][K]+h[X][de][K];Ce>H&&(H=Ce,se=X,q=de)}}}F[se][q][K]+=N[D][R][z][K]}}}return{dataId:c.write(mp(F,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o3e={kernelName:DN,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s,dy:i}=n,{strides:a,pad:o,dilations:l}=t,c=e,u=So(r.shape,c.data.get(r.dataId).values),h=So(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:b,strideWidth:w,filterHeight:C,filterWidth:I,dilationHeight:T,dilationWidth:E,outShape:A}=cT(r.shape,s.shape,a,o,"NHWC",l);V(i.rank===A.length,()=>`Error in ${DN}, dy must have the same rank as output ${A.length}, but got ${i.rank}`);const N=So(A,c.data.get(i.dataId).values),F=rz(r.shape,r.dtype);for(let D=0;D<d;++D)for(let R=0;R<y;++R){const B=R*b-v.top;for(let z=0;z<g;++z){const W=z*w-v.left;for(let K=0;K<m;++K){let H=Number.MIN_SAFE_INTEGER,se=B<0?0:B,q=W<0?0:W;for(let X=0;X<C;++X){const fe=B+X*T;if(fe>=0&&fe<f)for(let de=0;de<I;++de){const ue=W+de*E;if(ue>=0&&ue<p){const Ce=u[D][fe][ue][K]+h[X][de][K];Ce>H&&(H=Ce,se=fe,q=ue)}}}F[D][se][q][K]+=N[D][R][z][K]}}}return{dataId:c.write(mp(F,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(n){const{inputs:e,backend:t,attrs:r}=n,{image:s}=e,{canvas:i,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},c=(l==null?void 0:l.alpha)||1,u=(o==null?void 0:o.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const h=i.getContext(u,(o==null?void 0:o.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${u} type.`);const[d,f]=s.shape.slice(0,2),p=s.shape.length===2?1:s.shape[2],m=t.data.get(s.dataId).values,y=s.dtype==="float32"?255:1,g=new Uint8ClampedArray(f*d*4);for(let b=0;b<d*f;++b){const w=[0,0,0,255*c];for(let I=0;I<p;I++){const T=m[b*p+I];if(s.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(s.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);p===1?(w[0]=T*y,w[1]=T*y,w[2]=T*y):w[I]=T*y}const C=b*4;g[C+0]=Math.round(w[0]),g[C+1]=Math.round(w[1]),g[C+2]=Math.round(w[2]),g[C+3]=Math.round(w[3])}i.width=f,i.height=d;const v=new ImageData(g,f,d);return h.putImageData(v,0,0),s}const c3e={kernelName:JR,backendName:"cpu",kernelFunc:l3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $T(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r;it(s,"sum");let o;s.dtype==="bool"?o=ep({inputs:{x:s},backend:t,attrs:{dtype:"int32"}}):o=ku({inputs:{x:s},backend:t});const l=o.shape.length,c=Kt(i,o.shape),u=vr(c,l);let h=c,d=o;u!=null&&(d=pa({inputs:{x:o},backend:t,attrs:{perm:u}}),h=Or(h.length,l)),Qs("sum",h,d.shape.length);const[f,p]=Fs(d.shape,h),m=ca(d.dtype,"int32");let y=XN(t,f,m);const g=Se(p),v=t.data.get(y.dataId).values,b=t.data.get(d.dataId).values;for(let w=0;w<v.length;++w){const C=w*g;let I=0;for(let T=0;T<g;++T)I+=b[C+T];v[w]=I}if(a){const w=Pr(y.shape,c),C=y;y=Xn({inputs:{x:y},backend:t,attrs:{shape:w}}),t.disposeIntermediateTensorInfo(C)}return t.disposeIntermediateTensorInfo(o),u!=null&&t.disposeIntermediateTensorInfo(d),y}const u3e={kernelName:JC,backendName:"cpu",kernelFunc:$T};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3e(n){const{inputs:e,backend:t,attrs:r}=n,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=tV(s,i.length);rV(a.length,l,i);const{path:c,steps:u}=sV(o,l),h=u.length;let d=null,f=a.length;const p=[];for(let m=0;m<h;++m){for(const y of u[m]){const{permutationIndices:g,expandDims:v}=nV(f,l[y]);let b;iV(g)?b=i[y]:(b=pa({inputs:{x:i[y]},backend:t,attrs:{perm:g}}),p.push(b));const w=b.shape.slice();for(let C=0;C<v.length;++C)w.splice(v[C],0,1);Qt(b.shape,w)||(b=Xn({inputs:{x:b},backend:t,attrs:{shape:w}}),p.push(b)),d===null?d=b:(d=UF({inputs:{a:b,b:d},backend:t}),p.push(d))}m<h-1&&(c[m]>=0&&(d=$T({inputs:{x:d},backend:t,attrs:{axis:c[m]-(a.length-f),keepDims:!1}}),p.push(d)),f--)}for(const m of p)m!==d&&t.disposeIntermediateTensorInfo(m);return d}const d3e={kernelName:eD,backendName:"cpu",kernelFunc:h3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(n){const{inputs:e,backend:t}=n,{dy:r,y:s}=e;it([r,s],"eluGrad");const i=new Float32Array(Se(s.shape)),a=t.data.get(s.dataId).values,o=t.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const c=a[l];c>=0?i[l]=o[l]:i[l]=o[l]*(c+1)}return t.makeTensorInfo(s.shape,"float32",i)}const p3e={kernelName:tD,backendName:"cpu",kernelFunc:f3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3e=KB,g3e=XB,y3e=YB,v3e=ZB,x3e=QB,b3e=JB,w3e=Pn(nb,n=>{const e=Math.sign(n),t=Math.abs(n),r=1/(1+m3e*t);return e*(1-((((b3e*r+x3e)*r+v3e)*r+y3e)*r+g3e)*r*Math.exp(-t*t))}),S3e={kernelName:nb,backendName:"cpu",kernelFunc:w3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QN(n){const{inputs:e,backend:t,attrs:r}=n,{input:s}=e,{dim:i}=r,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(V(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),Xn({inputs:{x:s},backend:t,attrs:{shape:o}})}const k3e={kernelName:SC,backendName:"cpu",kernelFunc:QN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3e=Mr((n,e)=>n/e),$V=hs(eb,C3e),M4={kernelName:eb,backendName:"cpu",kernelFunc:$V};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tie(n,e,t){const r=n.shape,s=r[0],i=r[1],a=t.data.get(n.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[s,i],u=Se(c),h=_s("float32",u),d=_s("float32",u);for(let y=0;y<s;y++){const g=Kg({inputs:{x:o},backend:t,attrs:{begin:[y,0],size:[1,i]}}),v=Kg({inputs:{x:l},backend:t,attrs:{begin:[y,0],size:[1,i]}}),b=_a({inputs:{real:g,imag:v},backend:t}),{real:w,imag:C}=T3e(b,e,t),I=Lh(w,C);for(let T=0;T<i;T++){const E=eV(I,T);h[y*i+T]=E.real,d[y*i+T]=E.imag}t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b)}const f=t.makeTensorInfo(c,"float32",h),p=t.makeTensorInfo(c,"float32",d),m=_a({inputs:{real:f,imag:p},backend:t});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),m}function T3e(n,e,t){const r=Se(n.shape),s=t.data.get(n.dataId),i=t.data.get(s.complexTensorInfos.real.dataId).values,a=t.data.get(s.complexTensorInfos.imag.dataId).values;if(E3e(r)){const o=$4(i,a,r,e,t),l=[n.shape[0],n.shape[1]];if(e){const c=t.makeTensorInfo(l,"float32",o.real),u=t.makeTensorInfo(l,"float32",o.imag),h=t.makeTensorInfo([],"float32",Yh(r,"float32")),d=ku({inputs:{x:h},backend:t}),f=M4.kernelFunc({inputs:{a:c,b:h},backend:t}),p=M4.kernelFunc({inputs:{a:u,b:d},backend:t}),m=t.data.get(f.dataId).values,y=t.data.get(p.dataId).values;return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),{real:m,imag:y}}return o}else{const o=Lh(i,a),l=I3e(o,r,e);return lte(l)}}function E3e(n){return(n&n-1)===0}function $4(n,e,t,r,s){if(t===1)return{real:n,imag:e};const i=Lh(n,e),a=t/2,o=cte(i),l=o.real,c=o.imag,u=[l.length],h=s.makeTensorInfo(u,"float32",l),d=s.makeTensorInfo(u,"float32",c),f=_a({inputs:{real:h,imag:d},backend:s}),p=ute(i),m=p.real,y=p.imag,g=[m.length],v=s.makeTensorInfo(g,"float32",m),b=s.makeTensorInfo(g,"float32",y),w=_a({inputs:{real:v,imag:b},backend:s}),C=$4(l,c,a,r,s),I=C.real,T=C.imag,E=[I.length],A=s.makeTensorInfo(E,"float32",I),N=s.makeTensorInfo(E,"float32",T),F=_a({inputs:{real:A,imag:N},backend:s}),_=$4(m,y,a,r,s),D=_.real,R=_.imag,B=[D.length],z=s.makeTensorInfo(B,"float32",D),W=s.makeTensorInfo(B,"float32",R),K=_a({inputs:{real:z,imag:W},backend:s}),H=dte(t,r),se=[H.real.length],q=s.makeTensorInfo(se,"float32",H.real),X=s.makeTensorInfo(se,"float32",H.imag),fe=_a({inputs:{real:q,imag:X},backend:s}),de=UF({inputs:{a:fe,b:K},backend:s}),ue=bx({inputs:{a:F,b:de},backend:s}),Ce=LV({inputs:{a:F,b:de},backend:s}),Ae=qg({inputs:{input:ue},backend:s}),Ee=qg({inputs:{input:Ce},backend:s}),Le=wx({inputs:{input:ue},backend:s}),Ke=wx({inputs:{input:Ce},backend:s}),Ze=Sx({inputs:[Ae,Ee],backend:s,attrs:{axis:0}}),gt=Sx({inputs:[Le,Ke],backend:s,attrs:{axis:0}}),Ct=s.data.get(Ze.dataId).values,M=s.data.get(gt.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(K),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(fe),s.disposeIntermediateTensorInfo(de),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo(Ae),s.disposeIntermediateTensorInfo(Le),s.disposeIntermediateTensorInfo(Ee),s.disposeIntermediateTensorInfo(Ke),s.disposeIntermediateTensorInfo(Ze),s.disposeIntermediateTensorInfo(gt),{real:Ct,imag:M}}function I3e(n,e,t){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,a=0;for(let o=0;o<e;o++){const l=fte(s*o,e,t),c=eV(n,o);i+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}t&&(i/=e,a/=e),hte(r,i,a,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(n){const{inputs:e,backend:t}=n,{input:r}=e,s=Se(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=Xn({inputs:{x:r},backend:t,attrs:{shape:[a,i]}}),l=tie(o,!1,t),c=Xn({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}const N3e={kernelName:nD,backendName:"cpu",kernelFunc:A3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zV(n){const{backend:e,attrs:t}=n,{shape:r,value:s,dtype:i}=t,a=i||d0(s),o=Tr(a,Se(r));return R3e(o,s,a),e.makeTensorInfo(r,a,o)}const _3e={kernelName:rD,backendName:"cpu",kernelFunc:zV};function R3e(n,e,t){n.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3e={kernelName:sD,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,s=t,i=_s(r.dtype,Se(r.shape)),[a,o,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let d=0;d<a;d++){const f=d*l*o*c;for(let p=0;p<o;p++){const m=p*(l*c);for(let y=0;y<l;y++){const g=y*c;for(let v=0;v<c;v++){const b=Math.round(l-y-1),w=f+m+g+v;let C=u[w];if(b>=0&&b<l){const I=b*c,T=f+m+I+v;C=u[T]}i[w]=C}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:f,leakyreluAlpha:p}=r;let m=Jse({inputs:{x:s,filter:i},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(a){const y=m;if(u==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const g=Xn({inputs:{x:a},backend:t,attrs:{shape:[a.shape[0],1,1]}});m=bx({inputs:{a:m,b:g},backend:t}),t.disposeIntermediateTensorInfo(g)}else m=bx({inputs:{a:m,b:a},backend:t});t.disposeIntermediateTensorInfo(y)}if(f){const y=m;if(u==="NCHW"&&f==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const g=Xn({inputs:{x:o},backend:t,attrs:{shape:[o.shape[0],1,1]}});m=ZN(t,m,f,g,p),t.disposeIntermediateTensorInfo(g)}else m=ZN(t,m,f,o,p);t.disposeIntermediateTensorInfo(y)}return m}const P3e={kernelName:$S,backendName:"cpu",kernelFunc:F3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:f,leakyreluAlpha:p}=r;let m=eie({inputs:{x:s,filter:i},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(a){const y=m;m=bx({inputs:{a:m,b:a},backend:t}),t.disposeIntermediateTensorInfo(y)}if(f){const y=m;m=ZN(t,m,f,o,p),t.disposeIntermediateTensorInfo(y)}return m}const L3e={kernelName:zS,backendName:"cpu",kernelFunc:O3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(n){const{inputs:e,backend:t}=n,{params:r,indices:s}=e,i=Se(r.shape),a=s.shape,o=a[a.length-1],[l,c,u,h]=IF(r,s);if(c===0)return t.makeTensorInfo(l,r.dtype,[]);const d=t.data.get(s.dataId).values,f=t.bufferSync(r),p=hse(d,f,r.dtype,c,o,u,h,r.shape,i);return t.makeTensorInfo(l,r.dtype,p.values)}const $3e={kernelName:iD,backendName:"cpu",kernelFunc:M3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,indices:i}=e,{axis:a,batchDims:o}=r;it([s,i],"gatherV2");const l=Kt(a,s.shape)[0],c=t.data.get(i.dataId).values,u=s.shape[l];for(let w=0;w<c.length;++w){const C=c[w];V(C<=u-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${u-1}]`)}let h=o;o==null&&(h=0);const d=Se(i.shape),f=oV(s,i,l,h),p=Xn({inputs:{x:s},backend:t,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=Xn({inputs:{x:i},backend:t,attrs:{shape:[f.batchSize,d/f.batchSize]}}),y=[f.batchSize,f.outerSize,d/f.batchSize,f.sliceSize],g=t.bufferSync(m),v=t.bufferSync(p),b=dse(v,g,y);return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(m),t.makeTensorInfo(f.outputShape,b.dtype,b.values)}const B3e={kernelName:CC,backendName:"cpu",kernelFunc:z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(n){const{inputs:e,backend:t}=n,{input:r}=e,s=Se(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=Xn({inputs:{x:r},backend:t,attrs:{shape:[a,i]}}),l=tie(o,!0,t),c=Xn({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}const j3e={kernelName:aD,backendName:"cpu",kernelFunc:V3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=Pn(cb,n=>Number.isFinite(n)?1:0,"bool"),W3e={kernelName:cb,backendName:"cpu",kernelFunc:U3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3e=Pn(ub,n=>Math.abs(n)===1/0?1:0,"bool"),H3e={kernelName:ub,backendName:"cpu",kernelFunc:G3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q3e=Pn(hb,n=>Number.isNaN(n)?1:0,"bool"),K3e={kernelName:hb,backendName:"cpu",kernelFunc:q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(n){const{backend:e,attrs:t}=n,{start:r,stop:s,num:i}=t,a=yse(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const Y3e={kernelName:lD,backendName:"cpu",kernelFunc:X3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3e=Pn(fb,n=>Math.log1p(n)),Q3e={kernelName:fb,backendName:"cpu",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J3e=Mr((n,e)=>n&&e),eLe=hs(NC,J3e,null,"bool"),tLe={kernelName:NC,backendName:"cpu",kernelFunc:eLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nLe=Pn(_C,n=>n?0:1,"bool"),rLe={kernelName:_C,backendName:"cpu",kernelFunc:nLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sLe=Mr((n,e)=>n||e),iLe=hs(RC,sLe,null,"bool"),aLe={kernelName:RC,backendName:"cpu",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r;it(s,"LRN");const c=s.shape[3],u=c-1,h=t.data.get(s.dataId).values,d=Se(s.shape),f=new Float32Array(d);function p(m){const y=m%c;let g=m-y+Math.max(0,y-i);const v=m-y+Math.min(y+i,u);let b=0;for(;g<=v;g++){const w=h[g];b+=w*w}return b}for(let m=0;m<d;m++){const y=p(m),g=h[m]*Math.pow(a+o*y,-l);f[m]=g}return t.makeTensorInfo(s.shape,s.dtype,f)}const lLe={kernelName:DC,backendName:"cpu",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r;it(a,"LRNGrad");const h=Se(a.shape),d=a.shape[3],f=t.data.get(a.dataId).values,p=t.data.get(s.dataId).values,m=t.data.get(i.dataId).values,y=new Float32Array(h),g=h;for(let v=0;v<g;v++){const b=v%d,w=v-b+Math.max(0,b-o),C=v-b+Math.min(d,b+o+1);let I=0;for(let T=w;T<C;T++)I+=Math.pow(p[T],2);I=c*I+l;for(let T=w;T<C;T++){let E=-2*c*u*p[T]*m[v]/I;v===T&&(E+=Math.pow(I,-u)),E*=f[v],y[T]+=E}}return t.makeTensorInfo(a.shape,s.dtype,y)}const uLe={kernelName:cD,backendName:"cpu",kernelFunc:cLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=t;let l=s.shape;const c=l.length,u=Kt(i,l);let h=u;const d=vr(h,c);let f=o.data.get(s.dataId).values;if(d!=null){const w=new Array(c);for(let C=0;C<w.length;C++)w[C]=l[d[C]];f=PV(f,l,s.dtype,d,w),h=Or(h.length,c),l=w}it(s,"max"),Qs("max",h,c);const[p,m]=Fs(l,h),y=Se(m),g=xse(f,y,p,s.dtype),v=o.write(g,p,s.dtype);let b=p;return a&&(b=Pr(p,u)),{dataId:v,shape:b,dtype:s.dtype}}const hLe={kernelName:FC,backendName:"cpu",kernelFunc:nie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;it(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;V(Zs(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=wl(s.shape,i,a,c,o,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&Qt(u.inShape,u.outShape))h=ku({inputs:{x:s},backend:t});else{const d=t.data.get(s.dataId).values,f=ht(s.shape),p=MV(d,s.shape,s.dtype,f,u,"max");h=t.makeTensorInfo(u.outShape,s.dtype,p.values)}return h}const fLe={kernelName:PC,backendName:"cpu",kernelFunc:dLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;it(s,"maxPool3d");const u=Zh(s.shape,i,a,1,o,l,c),h=t.data.get(s.dataId).values,d=Qse(h,s.shape,s.dtype,ht(s.shape),u,"max");return t.makeTensorInfo(d.shape,"float32",d.values)}const mLe={kernelName:OC,backendName:"cpu",kernelFunc:pLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gLe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;it([s,i],"maxPool3DGrad");const u=Zh(i.shape,a,o,1,l,c),h=t.bufferSync(i),d=sOe(h,u),f=u.strideDepth,p=u.strideHeight,m=u.strideWidth,y=u.dilationDepth,g=u.dilationHeight,v=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,I=b-1-u.padInfo.front,T=C-1-u.padInfo.left,E=w-1-u.padInfo.top,A=Vt(i.shape,"float32"),N=t.bufferSync(s);for(let F=0;F<u.batchSize;++F)for(let _=0;_<u.inChannels;++_)for(let D=0;D<u.inDepth;++D)for(let R=0;R<u.inHeight;++R)for(let B=0;B<u.inWidth;++B){const z=D-I,W=R-E,K=B-T;let H=0;for(let se=0;se<b;se+=y){const q=(z+se)/f;if(!(q<0||q>=u.outDepth||Math.floor(q)!==q))for(let X=0;X<w;X+=g){const fe=(W+X)/p;if(!(fe<0||fe>=u.outHeight||Math.floor(fe)!==fe))for(let de=0;de<C;de+=v){const ue=(K+de)/m;if(ue<0||ue>=u.outWidth||Math.floor(ue)!==ue)continue;const Ce=b*w*C-1-d.get(F,q,fe,ue,_),Ae=se*w*C+X*C+de,Ee=Ce===Ae?1:0;if(Ee===0)continue;const Le=N.get(F,q,fe,ue,_);H+=Le*Ee}}}A.set(H,F,D,R,B,_)}return t.makeTensorInfo(A.shape,A.dtype,A.values)}const yLe={kernelName:hD,backendName:"cpu",kernelFunc:gLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i,output:a}=e,o=i;it([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=wl(o.shape,l,c,1,u,h),f=t.data.get(o.dataId).values,p=Vt(d.outShape,o.dtype,Zse(f,o.shape,o.dtype,d).values),m=d.strideHeight,y=d.strideWidth,g=d.dilationHeight,v=d.dilationWidth,b=d.effectiveFilterHeight,w=d.effectiveFilterWidth,C=w-1-d.padInfo.left,I=b-1-d.padInfo.top,T=Vt(o.shape,"float32"),E=t.data.get(s.dataId).values,A=Vt(s.shape,"float32",E);for(let N=0;N<d.batchSize;++N)for(let F=0;F<d.inChannels;++F)for(let _=0;_<d.inHeight;++_)for(let D=0;D<d.inWidth;++D){const R=_-I,B=D-C;let z=0;for(let W=0;W<b;W+=g){const K=(R+W)/m;if(!(K<0||K>=d.outHeight||Math.floor(K)!==K))for(let H=0;H<w;H+=v){const se=(B+H)/y;if(se<0||se>=d.outWidth||Math.floor(se)!==se)continue;const q=b*w-1-p.get(N,K,se,F),X=W*w+H,fe=q===X?1:0;if(fe===0)continue;const de=A.get(N,K,se,F);z+=de*fe}}T.set(z,N,_,D,F)}return t.makeTensorInfo(T.shape,T.dtype,T.values)}const xLe={kernelName:uD,backendName:"cpu",kernelFunc:vLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(n,e,t,r,s){const i=ht(e),a=MV(n,e,t,i,s,"max"),o=Zse(n,e,t,s,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wLe={kernelName:dD,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=t;it(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=wl(r.shape,s,i,[1,1],a),[h,d]=bLe(c,r.shape,r.dtype,o,u),f=l.write(h,u.outShape,r.dtype),p=l.write(d,u.outShape,r.dtype);return[{dataId:f,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r,o=Kt(i,s.shape),c=Fs(s.shape,o)[1],u=Se(c),h=[],d=t.makeTensorInfo([],"float32",new Float32Array([u]));h.push(d);const f=ep({inputs:{x:s},backend:t,attrs:{dtype:"float32"}});h.push(f);const p=$V({inputs:{a:f,b:d},backend:t});h.push(p);const m=$T({inputs:{x:p},backend:t,attrs:{axis:i,keepDims:a}});return h.forEach(y=>t.disposeIntermediateTensorInfo(y)),m}const kLe={kernelName:LC,backendName:"cpu",kernelFunc:SLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r;it(s,"min");const o=Kt(i,s.shape);let l=o;const c=vr(l,s.shape.length);let u=s;c!=null&&(u=pa({inputs:{x:s},backend:t,attrs:{perm:c}}),l=Or(l.length,s.shape.length)),Qs("min",l,u.shape.length);const[h,d]=Fs(u.shape,l),f=Se(d),p=Xs(Se(h),u.dtype),m=t.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let b=m[v];for(let w=0;w<f;++w){const C=m[v+w];(Number.isNaN(C)||C<b)&&(b=C)}p[g]=b}c!=null&&t.disposeIntermediateTensorInfo(u);const y=t.makeTensorInfo(h,u.dtype,p);if(a){const g=Pr(h,o),v=Xn({inputs:{x:y},backend:t,attrs:{shape:g}});return t.disposeIntermediateTensorInfo(y),v}return y}const TLe={kernelName:MC,backendName:"cpu",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:i,mode:a}=r;it(s,"mirrorPad");const o=i.map((b,w)=>b[0]+s.shape[w]+b[1]),l=i.map(b=>b[0]),c=i.map((b,w)=>b[0]+s.shape[w]),u=a==="reflect"?0:1,h=t.data.get(s.dataId).values,d=s.shape.length,f=ht(s.shape),p=Se(o),m=o.length,y=ht(o),g=_s(s.dtype,p);for(let b=0;b<p;b++){let w=f0(b,m,y);for(let I=0;I<m;I++)w[I]<l[I]?w[I]=l[I]*2-w[I]-u:w[I]>=c[I]&&(w[I]=(c[I]-1)*2-w[I]+u);w=w.map((I,T)=>I-l[T]);const C=nc(w,d,f);g[b]=h[C]}return{dataId:t.write(g,o,s.dtype),shape:o,dtype:s.dtype}}const ILe={kernelName:$C,backendName:"cpu",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ALe=Mr((n,e)=>{const t=n%e;return n<0&&e<0||n>=0&&e>=0?t:(t+e)%e}),NLe=hs(gb,ALe),_Le={kernelName:gb,backendName:"cpu",kernelFunc:NLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rie(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{dim:i}=r,a=s.shape.length;let o=i;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=Kt([o],s.shape),c=nie({inputs:{x:s},backend:t,attrs:{reductionIndices:l,keepDims:!1}}),u=Pr(c.shape,l),h=Xn({inputs:{x:c},backend:t,attrs:{shape:u}}),d=LV({inputs:{a:s,b:h},backend:t}),f=ose({inputs:{x:d},backend:t}),p=$T({inputs:{x:f},backend:t,attrs:{axis:l,keepDims:!1}}),m=Xn({inputs:{x:p},backend:t,attrs:{shape:u}}),y=$V({inputs:{a:f,b:m},backend:t});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(m),y}const RLe={kernelName:nT,backendName:"cpu",kernelFunc:rie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r;it(s,"multinomial");const l=o?s:rie({inputs:{logits:s},backend:t,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=t.data.get(l.dataId).values,d=[c,i],f=Xs(Se(d),"int32");for(let p=0;p<c;++p){const m=p*u,y=new Float32Array(u-1);y[0]=h[m];for(let b=1;b<y.length;++b)y[b]=y[b-1]+h[m+b];const g=nF.alea(a.toString()),v=p*i;for(let b=0;b<i;++b){const w=g();f[v+b]=y.length;for(let C=0;C<y.length;C++)if(w<y[C]){f[v+b]=C;break}}}return o||t.disposeIntermediateTensorInfo(l),t.makeTensorInfo(d,"int32",f)}const FLe={kernelName:fD,backendName:"cpu",kernelFunc:DLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PLe=kF;function OLe(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;it(s,"NonMaxSuppression");const c=t.data.get(s.dataId).values,u=t.data.get(i.dataId).values,{selectedIndices:h}=PLe(c,u,a,o,l);return t.makeTensorInfo([h.length],"int32",new Int32Array(h))}const LLe={kernelName:pD,backendName:"cpu",kernelFunc:OLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MLe=CF;function $Le(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;it(s,"NonMaxSuppressionPadded");const u=t.data.get(s.dataId).values,h=t.data.get(i.dataId).values,{selectedIndices:d,validOutputs:f}=MLe(u,h,a,o,l,c);return[t.makeTensorInfo([d.length],"int32",new Int32Array(d)),t.makeTensorInfo([],"int32",new Int32Array([f]))]}const zLe={kernelName:mD,backendName:"cpu",kernelFunc:$Le};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BLe=TF;function VLe(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;it(s,"NonMaxSuppressionWithScore");const u=t.data.get(s.dataId).values,h=t.data.get(i.dataId).values,d=a,f=o,p=l,m=c,{selectedIndices:y,selectedScores:g}=BLe(u,h,d,f,p,m);return[t.makeTensorInfo([y.length],"int32",new Int32Array(y)),t.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const jLe={kernelName:gD,backendName:"cpu",kernelFunc:VLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r;it(s,"oneHot");const c=Se(s.shape),u=new Float32Array(c*a);u.fill(l);const h=t.data.get(s.dataId).values;for(let d=0;d<c;++d)h[d]>=0&&h[d]<a&&(u[d*a+h[d]]=o);return t.makeTensorInfo([...s.shape,a],i,u)}const WLe={kernelName:jC,backendName:"cpu",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JN(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=qg({inputs:{input:r},backend:t}),i=JN({inputs:{x:s},backend:t}),a=wx({inputs:{input:r},backend:t}),o=JN({inputs:{x:a},backend:t}),l=_a({inputs:{real:i,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return zV({backend:t,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const GLe={kernelName:aT,backendName:"cpu",kernelFunc:JN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sie(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=qg({inputs:{input:r},backend:t}),i=sie({inputs:{x:s},backend:t}),a=wx({inputs:{input:r},backend:t}),o=JN({inputs:{x:a},backend:t}),l=_a({inputs:{real:i,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return zV({backend:t,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const HLe={kernelName:VC,backendName:"cpu",kernelFunc:sie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iie(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r;if(e.length===1)return QN({inputs:{input:e[0]},backend:t,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(u=>{Ys(i,u.shape,"All tensors passed to stack must have matching shapes"),V(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const h=QN({inputs:{input:u},backend:t,attrs:{dim:s}});return o.push(h),h}),c=Sx({inputs:l,backend:t,attrs:{axis:s}});return o.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}const qLe={kernelName:UC,backendName:"cpu",kernelFunc:iie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:i,constantValue:a}=r;it(s,"pad");const o=i.map((v,b)=>v[0]+s.shape[b]+v[1]),l=i.map(v=>v[0]),c=t.data.get(s.dataId).values,u=Se(s.shape),h=s.shape.length,d=ht(s.shape),f=Se(o),p=o.length,m=ht(o),y=_s(s.dtype,f);a!==0&&y.fill(a);for(let v=0;v<u;v++){const w=f0(v,h,d).map((I,T)=>I+l[T]),C=nc(w,p,m);y[C]=c[v]}return{dataId:t.write(y,o,s.dtype),shape:o,dtype:s.dtype}}const aie={kernelName:WC,backendName:"cpu",kernelFunc:KLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe=Mr((n,e)=>Math.pow(n,e)),YLe=hs(vb,XLe),ZLe={kernelName:vb,backendName:"cpu",kernelFunc:YLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(g=>t.data.get(g.dataId).values),c=s.map(g=>g.shape),u=t.data.get(i.dataId).values,h=t.data.get(a.dataId).values,[d,f,p]=Tse(l,c,u,i.shape,i.dtype,h,a.shape),m=d.map(g=>t.makeTensorInfo([g.length],"int32",g)),y=t.makeTensorInfo(p,i.dtype,f);return m.concat([y])}const JLe={kernelName:yD,backendName:"cpu",kernelFunc:QLe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMe(n){const{inputs:e,backend:t}=n,{starts:r,limits:s,deltas:i}=e,a=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,l=t.data.get(i.dataId).values,[c,u]=Ese(a,r.shape,r.dtype,o,s.shape,l,i.shape),h=t.makeTensorInfo([c.length],"int32",c),d=t.makeTensorInfo([u.length],r.dtype,u);return[h,d]}const tMe={kernelName:vD,backendName:"cpu",kernelFunc:eMe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=t.data.get(s.dataId).values,u=t.data.get(i.dataId).values,h=t.data.get(a.dataId).values,d=o.map(y=>t.data.get(y.dataId).values),f=o.map(y=>y.shape),[p,m]=Ise(c,s.shape,u,i.shape,i.dtype,h,a.shape,d,f,l);return t.makeTensorInfo(p,i.dtype,m)}const rMe={kernelName:xD,backendName:"cpu",kernelFunc:nMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(n){const{backend:e,attrs:t}=n,{start:r,stop:s,dtype:i,step:a}=t,o=Ase(r,s,a,i);return e.makeTensorInfo([o.length],i,o)}const iMe={kernelName:bD,backendName:"cpu",kernelFunc:sMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aMe=Pn(xb,n=>1/n),oMe={kernelName:xb,backendName:"cpu",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;it(s,"resizeBilinear");const l=ht(s.shape),[c,u]=o,[h,d,f,p]=s.shape,m=t.data.get(s.dataId).values,y=new Float32Array(Se([h,c,u,p])),g=[i&&c>1?d-1:d,i&&u>1?f-1:f],v=[i&&c>1?c-1:c,i&&u>1?u-1:u];let b=0;const w=g[0]/v[0],C=g[1]/v[1];for(let I=0;I<h;I++)for(let T=0;T<c;T++){let E;a?E=w*(T+.5)-.5:E=w*T;const A=Math.max(0,Math.floor(E)),N=E-A,F=Math.min(d-1,Math.ceil(E)),_=I*l[0]+A*l[1],D=I*l[0]+F*l[1];for(let R=0;R<u;R++){let B;a?B=C*(R+.5)-.5:B=C*R;const z=Math.max(0,Math.floor(B)),W=B-z,K=Math.min(f-1,Math.ceil(B)),H=_+z*l[2],se=D+z*l[2],q=_+K*l[2],X=D+K*l[2];for(let fe=0;fe<p;fe++){const de=m[H+fe],ue=m[se+fe],Ce=m[q+fe],Ae=m[X+fe],Ee=de+(Ce-de)*W,Le=ue+(Ae-ue)*W,Ke=Ee+(Le-Ee)*N;y[b++]=Ke}}}return t.makeTensorInfo([h,c,u,p],"float32",y)}const cMe={kernelName:XC,backendName:"cpu",kernelFunc:lMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:i}=e,{alignCorners:a}=r;it([i,s],"resizeBilinearGrad");const o=ht(s.shape),[l,c,u,h]=s.shape,[,d,f]=i.shape,p=new Float32Array(l*c*u*h),m=[a&&d>1?c-1:c,a&&f>1?u-1:u],y=[a&&d>1?d-1:d,a&&f>1?f-1:f],g=m[0]/y[0],v=m[1]/y[1],b=t.data.get(i.dataId).values;let w=0;for(let C=0;C<l;C++){const I=C*o[0];for(let T=0;T<d;T++){const E=T*g,A=Math.floor(E),N=Math.min(Math.ceil(E),c-1),F=I+A*o[1],_=I+N*o[1],D=E-A,R=1-D;for(let B=0;B<f;B++){const z=B*v,W=Math.floor(z),K=Math.min(Math.ceil(z),u-1),H=z-W,se=1-H,q=F+W*o[2],X=F+K*o[2],fe=_+W*o[2],de=_+K*o[2],ue=R*se,Ce=R*H,Ae=D*se,Ee=D*H;for(let Le=0;Le<h;Le++){const Ke=b[w++];p[q+Le]+=Ke*ue,p[X+Le]+=Ke*Ce,p[fe+Le]+=Ke*Ae,p[de+Le]+=Ke*Ee}}}}return t.makeTensorInfo([l,u,c,h],"float32",p)}const hMe={kernelName:kD,backendName:"cpu",kernelFunc:uMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;it(s,"resizeNearestNeighbor");const l=ht(s.shape),[c,u]=o,[h,d,f,p]=s.shape,m=t.data.get(s.dataId).values,y=new Float32Array(h*c*u*p),g=[i&&c>1?d-1:d,i&&u>1?f-1:f],v=[i&&c>1?c-1:c,i&&u>1?u-1:u],b=g[0]/v[0],w=g[1]/v[1];let C=0;for(let I=0;I<h;I++){const T=I*l[0];for(let E=0;E<c;E++){const A=a?b*(E+.5):b*E;let N=Math.min(d-1,i?Math.round(A):Math.floor(A));a&&(N=Math.max(0,N));const F=T+N*l[1];for(let _=0;_<u;_++){const D=a?w*(_+.5):w*_;let R=Math.min(f-1,i?Math.round(D):Math.floor(D));a&&(R=Math.max(0,R));const B=F+R*l[2];for(let z=0;z<p;z++){const W=m[B+z];y[C++]=W}}}}return t.makeTensorInfo([h,c,u,p],s.dtype,y)}const fMe={kernelName:KC,backendName:"cpu",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:i}=e,{alignCorners:a}=r;it([i,s],"resizeNearestNeighborGrad");const o=ht(s.shape),l=ht(i.shape),[c,u,h,d]=s.shape,[,f,p]=i.shape,m=new Float32Array(c*u*h*d),y=t.data.get(i.dataId).values,g=[a&&f>1?u-1:u,a&&p>1?h-1:h],v=[a&&f>1?f-1:f,a&&p>1?p-1:p],b=g[0]/v[0],w=g[1]/v[1],C=1/b,I=1/w,T=Math.ceil(C)*2+2,E=Math.ceil(I)*2+2;for(let A=0;A<c;A++){const N=A*o[0];for(let F=0;F<u;F++){const _=N+F*o[1],D=Math.floor(F*C),R=Math.floor(D-T/2);for(let B=0;B<h;B++){const z=_+B*o[2],W=Math.floor(B*I),K=Math.floor(W-E/2);for(let H=0;H<d;H++){let se=0;for(let q=0;q<T;q++){const X=q+R;if(X<0||X>=f)continue;const fe=N+X*l[1],de=X*b,ue=Math.min(u-1,a?Math.round(de):Math.floor(de));if(F===ue)for(let Ce=0;Ce<E;Ce++){const Ae=Ce+K;if(Ae<0||Ae>=p)continue;const Ee=fe+Ae*l[2],Le=Ae*w,Ke=Math.min(h-1,a?Math.round(Le):Math.floor(Le));B===Ke&&(se+=y[Ee+H])}}m[z+H]=se}}}}return t.makeTensorInfo(s.shape,s.dtype,m)}const mMe={kernelName:SD,backendName:"cpu",kernelFunc:pMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dims:i}=r;it(s,"reverse");const a=s.shape.length,o=Kt(i,s.shape);if(a===0)return ku({inputs:{x:s},backend:t});const l=new Kr(s.shape,s.dtype),c=t.bufferSync(s);for(let u=0;u<l.size;u++){const h=l.indexToLoc(u),d=h.slice();o.forEach(f=>d[f]=s.shape[f]-1-d[f]),l.set(c.get(...d),...h)}return t.makeTensorInfo(l.shape,l.dtype,l.values)}const yMe={kernelName:YC,backendName:"cpu",kernelFunc:gMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vMe={kernelName:BD,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:s,fillValue:i,center:a}=e,o=t,l=_s(r.dtype,Se(r.shape)),[c,u,h,d]=r.shape,[f,p]=GB(a,u,h),m=255,y=Math.sin(s),g=Math.cos(s),v=o.data.get(r.dataId).values;for(let w=0;w<c;w++){const C=w*h*u*d;for(let I=0;I<u;I++){const T=I*(h*d);for(let E=0;E<h;E++){const A=E*d;for(let N=0;N<d;N++){const F=[c,I,E,N],_=F[2],D=F[1];let R=(_-f)*g-(D-p)*y,B=(_-f)*y+(D-p)*g;R=Math.round(R+f),B=Math.round(B+p);let z=i;if(typeof i!="number"&&(N===3?z=m:z=i[N]),R>=0&&R<h&&B>=0&&B<u){const K=B*(h*d),H=R*d,se=C+K+H+N;z=v[se]}const W=C+T+A+N;l[W]=z}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xMe=Pn(Sb,n=>{const e=Math.floor(n);return n-e<.5?Math.floor(n):n-e>.5?Math.ceil(n):e%2===0?e:e+1}),bMe={kernelName:Sb,backendName:"cpu",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=wp(i,s,a),d=!0,f=t.bufferSync(s),p=t.bufferSync(i),m=om(f,p,a,h,c,l,o,u,0,d);return t.makeTensorInfo(a,m.dtype,m.values)}const SMe={kernelName:CD,backendName:"cpu",kernelFunc:wMe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMe(n,e){let t=0,r=n.length,s=0;for(;t<r;)s=Math.floor((t+r)/2),n[s]<e?t=s+1:r=s;return r}function CMe(n,e){let t=0,r=n.length,s=0;for(;t<r;)s=Math.floor((t+r)/2),n[s]<=e?t=s+1:r=s;return r}function TMe(n,e,t,r,s,i){const a=Tr("int32",t*s);for(let o=0;o<t;++o){const l=n.slice(o*r,(o+1)*r),c=o*s;for(let u=0;u<s;++u)a[c+u]=i==="left"?kMe(l,e[u+c]):CMe(l,e[u+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EMe(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:s,values:i}=e,{side:a}=r,o=t.data.get(s.dataId).values,l=t.data.get(i.dataId).values,c=TMe(o,l,s.shape[0],s.shape[1],i.shape[1],a);return t.makeTensorInfo(i.shape,"int32",c)}const IMe={kernelName:ED,backendName:"cpu",kernelFunc:EMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(n){const{inputs:e,backend:t}=n,{condition:r,t:s,e:i}=e;it([r,s,i],"select");const a=r.shape.length,o=t.data.get(r.dataId).values,l=t.data.get(s.dataId).values,c=t.data.get(i.dataId).values,u=ca(s.dtype,i.dtype),h=Xs(Se(s.shape),u);let d=0;const f=a===0||a>1||s.shape.length===1?1:Se(s.shape.slice(1));for(let p=0;p<o.length;p++)for(let m=0;m<f;m++)o[p]===1?h[d++]=l[p]:h[d++]=c[p];return t.makeTensorInfo(s.shape,u,h)}const NMe={kernelName:ZC,backendName:"cpu",kernelFunc:AMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Me=_F,RMe=RF,DMe=Pn(Cb,n=>n>=0?RMe*n:_Me*(Math.exp(n)-1)),FMe={kernelName:Cb,backendName:"cpu",kernelFunc:DMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PMe=Pn(Ib,n=>n<0?-1:n>0?1:0),OMe={kernelName:Ib,backendName:"cpu",kernelFunc:PMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe=Pn(Tb,n=>Math.sin(n)),MMe={kernelName:Tb,backendName:"cpu",kernelFunc:LMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Me=Pn(Eb,n=>Math.sinh(n)),zMe={kernelName:Eb,backendName:"cpu",kernelFunc:$Me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BMe=11920928955078125e-23,oH=Math.log(BMe)+2,VMe=Pn(Nb,n=>{const e=n>-oH,t=n<oH,r=Math.exp(n);let s;return t?s=r:e?s=n:s=Math.log(1+r),s}),jMe={kernelName:Nb,backendName:"cpu",kernelFunc:VMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:i,paddings:a}=r;it([s],"spaceToBatchND");const o=Se(i),l=[[0,0]];l.push(...a);for(let I=1+i.length;I<s.shape.length;++I)l.push([0,0]);const c=aie.kernelFunc({inputs:{x:s},backend:t,attrs:{paddings:l,constantValue:0}}),u=IT(c.shape,i,o,!1),h=AT(u.length,i.length,!1),d=NT(c.shape,i,o,!1),m=Xn({inputs:{x:c},backend:t,attrs:{shape:u}}),v=pa({inputs:{x:m},backend:t,attrs:{perm:h}}),C=Xn({inputs:{x:v},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(v),C}const WMe={kernelName:eT,backendName:"cpu",kernelFunc:UMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(n){const{inputs:e,backend:t}=n,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=t.data.get(r.dataId).values,l=t.data.get(s.dataId).values,c=t.data.get(i.dataId).values,u=t.data.get(a.dataId).values[0],[h,d,f,p,m]=Dse(o,r.shape,r.dtype,l,s.dtype,c,u);return[t.makeTensorInfo(d,r.dtype,h),t.makeTensorInfo([d[0]],s.dtype,f),t.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),t.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const HMe={kernelName:ID,backendName:"cpu",kernelFunc:GMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(t.data.get(s.dataId).values),o=t.data.get(r.dataId).values,l=Array.from(t.data.get(i.dataId).values),[c,u,h]=Fse(o,r.shape,r.dtype,a,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const KMe={kernelName:AD,backendName:"cpu",kernelFunc:qMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,l=t.data.get(i.dataId).values,[c,u]=OV(a,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(u,r.dtype,c)}const YMe={kernelName:ND,backendName:"cpu",kernelFunc:XMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,l=t.data.get(i.dataId).values,[c,u]=OV(a,r.shape,r.dtype,o,l);return t.makeTensorInfo(u,r.dtype,c)}const QMe={kernelName:_D,backendName:"cpu",kernelFunc:ZMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMe(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=wp(i,s,o),f=!1,p=t.bufferSync(s);let m;switch(i.dtype){case"bool":{const y=t.bufferSync(i),g=!!t.data.get(a.dataId).values[0];m=om(p,y,o,d,u,c,l,h,g,f);break}case"float32":{const y=t.bufferSync(i),g=t.data.get(a.dataId).values[0];m=om(p,y,o,d,u,c,l,h,g,f);break}case"int32":{const y=t.bufferSync(i),g=t.data.get(a.dataId).values[0];m=om(p,y,o,d,u,c,l,h,g,f);break}case"string":{const y=t.bufferSync(i),g=Dh(t.data.get(a.dataId).values[0]);m=om(p,y,o,d,u,c,l,h,g,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return t.makeTensorInfo(o,m.dtype,m.values)}const e4e={kernelName:RD,backendName:"cpu",kernelFunc:JMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=Kt(a,s.shape)[0],l=aV(s,i,o),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(h=>{const d=[...u];d[o]=h;const f=Kg({inputs:{x:s},backend:t,attrs:{begin:c,size:d}});return c[o]+=h,f})}const n4e={kernelName:tT,backendName:"cpu",kernelFunc:t4e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e={kernelName:DD,backendName:"cpu",kernelFunc:({inputs:n,backend:e})=>{const{x:t}=n,r=e;it(t,"square");const s=r.data.get(t.dataId).values,i=new Float32Array(s.length);for(let o=0;o<s.length;++o){const l=s[o];i[o]=l*l}return{dataId:r.write(i,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e=Pn(Lb,(n,e)=>{const t=e;return isNaN(n)?NaN:n>0?1:t.alpha}),i4e={kernelName:Lb,backendName:"cpu",kernelFunc:s4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r;it(s,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:b,strides:w}=VB(s.shape,i,a,o,l,c,u,h,d);let C;if(m)C=Xn({inputs:{x:s},backend:t,attrs:{shape:p}});else if(y||g){V(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const I=$B(v,b,w),T=Kg({inputs:{x:s},backend:t,attrs:{begin:v,size:I}});C=Xn({inputs:{x:T},backend:t,attrs:{shape:p}}),t.disposeIntermediateTensorInfo(T)}else{const I=t.bufferSync(s),T=Lse(f,I,w,v);C=t.makeTensorInfo(p,T.dtype,T.values)}return C}const o4e={kernelName:FD,backendName:"cpu",kernelFunc:a4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4e(n){const{inputs:e,backend:t,attrs:r}=n,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=e,d=t.data.get(u.dataId).values,f=t.data.get(h.dataId).values,[p,m]=Mse(d,f,s,i,a,o,l,c);return[t.makeTensorInfo([p.length],"string",p),t.makeTensorInfo(h.shape,"int32",m)]}const c4e={kernelName:PD,backendName:"cpu",kernelFunc:l4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4e(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=t.data.get(i.dataId).values,l=t.data.get(a.dataId).values[0],[c,u,h]=$se(o,l,s),d=u.length;return[t.makeTensorInfo([d,2],"int32",c),t.makeTensorInfo([d],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(h))]}const h4e={kernelName:OD,backendName:"cpu",kernelFunc:u4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4e(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=t.data.get(i.dataId).values,o=zse(a,s);return t.makeTensorInfo(i.shape,"int32",o)}const f4e={kernelName:LD,backendName:"cpu",kernelFunc:d4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e=Pn(Fb,n=>Math.tan(n)),m4e={kernelName:Fb,backendName:"cpu",kernelFunc:p4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e=Pn(Pb,n=>Math.tanh(n)),y4e={kernelName:Pb,backendName:"cpu",kernelFunc:g4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4e(n){const{inputs:e,backend:t}=n,{tensor:r,indices:s,updates:i}=e,{sliceRank:a,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=wp(i,s,r.shape),h=!1,d=t.bufferSync(s),f=t.bufferSync(i),p=t.bufferSync(r),m=om(d,f,r.shape,u,l,o,a,c,p,h);return t.makeTensorInfo(r.shape,m.dtype,m.values)}const x4e={kernelName:TD,backendName:"cpu",kernelFunc:v4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reps:i}=r;it(s,"tile");const a=Vse(t.bufferSync(s),i);return t.makeTensorInfo(a.shape,a.dtype,a.values)}const w4e={kernelName:Ob,backendName:"cpu",kernelFunc:b4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{k:i,sorted:a}=r;it(s,"topk");const o=t.data.get(s.dataId).values,[l,c]=Use(o,s.shape,s.dtype,i,a);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(c.shape,c.dtype,c.values)]}const k4e={kernelName:MD,backendName:"cpu",kernelFunc:S4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4e(n){const{inputs:e,attrs:t,backend:r}=n,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=t,[u,h,d,f]=s.shape,[p,m]=c??[h,d],y=[u,p,m,f],g=ht(s.shape),v=g[0],b=g[1],w=g[2],C=ht(y),I=C[0],T=C[1],E=C[2],A=_s(s.dtype,Se(y));A.fill(l);const N=r.data.get(s.dataId).values,F=r.data.get(i.dataId).values;for(let D=0;D<u;++D){const R=i.shape[0]===1?F:F.subarray(D*8,D*8+8);for(let B=0;B<p;++B)for(let z=0;z<m;++z)for(let W=0;W<f;++W){let K;const H=R[6]*z+R[7]*B+1;if(H===0)continue;const se=(R[0]*z+R[1]*B+R[2])/H,q=(R[3]*z+R[4]*B+R[5])/H,X=lH(se,d,o),fe=lH(q,h,o);switch(a){case"nearest":K=_4e(N,h,d,v,b,w,D,fe,X,W,l);break;case"bilinear":K=R4e(N,h,d,v,b,w,D,fe,X,W,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const de=D*I+B*T+z*E+W;A[de]=K}return r.makeTensorInfo(y,s.dtype,A)}return{dataId:r.write(A,y,s.dtype),shape:s.shape,dtype:s.dtype}}const T4e={kernelName:$D,backendName:"cpu",kernelFunc:C4e};function lH(n,e,t){switch(t){case"reflect":return E4e(n,e);case"wrap":return I4e(n,e);case"nearest":return N4e(n,e);case"constant":default:return A4e(n)}}function E4e(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=2*e;t<r&&(t=r*Math.trunc(-t/r)+t),t=t<-e?t+r:-t-1}else if(t>e-1)if(e<=1)t=0;else{const r=2*e;t-=r*Math.trunc(t/r),t>=e&&(t=r-t-1)}return jf(0,t,e-1)}function I4e(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=e-1;t+=e*(Math.trunc(-t/r)+1)}else if(t>e-1)if(e<=1)t=0;else{const r=e-1;t-=e*Math.trunc(t/r)}return jf(0,t,e-1)}function A4e(n,e){return n}function N4e(n,e){return jf(0,n,e-1)}function k1(n,e,t,r,s,i,a,o,l,c,u){const h=a*r+o*s+l*i+c;return 0<=o&&o<e&&0<=l&&l<t?n[h]:u}function _4e(n,e,t,r,s,i,a,o,l,c,u){const h=Math.round(o),d=Math.round(l);return k1(n,e,t,r,s,i,a,h,d,c,u)}function R4e(n,e,t,r,s,i,a,o,l,c,u){const h=Math.floor(o),d=Math.floor(l),f=h+1,p=d+1,m=(p-l)*k1(n,e,t,r,s,i,a,h,d,c,u)+(l-d)*k1(n,e,t,r,s,i,a,h,p,c,u),y=(p-l)*k1(n,e,t,r,s,i,a,f,d,c,u)+(l-d)*k1(n,e,t,r,s,i,a,f,p,c,u);return(f-o)*m+(o-h)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4e(n){const{inputs:e,attrs:t,backend:r}=n,{axis:s}=t,{x:i}=e;it(i,"unique");const a=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:c}=Wse(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const F4e={kernelName:zD,backendName:"cpu",kernelFunc:D4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4e(n){const{inputs:e,backend:t,attrs:r}=n,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s.shape.length,o=s.shape[i],l=new Array(a-1);let c=0;for(let f=0;f<a;f++)f!==i&&(l[c++]=s.shape[f]);const u=new Array(a).fill(0),h=s.shape.slice();h[i]=1;const d=new Array(o);for(let f=0;f<d.length;f++){u[i]=f;const p=Kg({inputs:{x:s},backend:t,attrs:{begin:u,size:h}});d[f]=Xn({inputs:{x:p},backend:t,attrs:{shape:l}}),t.disposeIntermediateTensorInfo(p)}return d}const O4e={kernelName:sT,backendName:"cpu",kernelFunc:P4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,segmentIds:i}=e,{numSegments:a}=r;it(s,"unsortedSegmentSum");const o=s.shape.length,l=i.shape.length,c=[],u=[],h=o-l;let d=i;for(let p=0;p<h;++p){const m=QN({inputs:{input:d},backend:t,attrs:{dim:p+1}});d=m,u.push(m)}for(let p=0;p<a;++p){const m=Yh(p,"int32"),y=t.makeTensorInfo([],"int32",m),g=ise({inputs:{a:y,b:d},backend:t}),v=ep({inputs:{x:g},backend:t,attrs:{dtype:"float32"}}),b=UF({inputs:{a:v,b:s},backend:t}),w=$T({inputs:{x:b},backend:t,attrs:{axis:0,keepDims:!1}});c.push(w),u.push(y),u.push(g),u.push(v),u.push(b),u.push(w)}const f=iie({inputs:c,backend:t,attrs:{axis:0}});return u.forEach(p=>t.disposeIntermediateTensorInfo(p)),f}const M4e={kernelName:iT,backendName:"cpu",kernelFunc:L4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e=[DPe,dFe,PPe,LPe,vFe,$Pe,BPe,jPe,WPe,HPe,KPe,YPe,QPe,tOe,rOe,aOe,lOe,uOe,dOe,_Pe,pOe,gOe,vOe,bFe,bOe,gFe,SFe,SOe,fFe,COe,EOe,IOe,NOe,ROe,FOe,OOe,MOe,zOe,VOe,UOe,GOe,qOe,XOe,ZOe,QOe,e3e,n3e,s3e,i3e,a3e,o3e,c3e,d3e,kPe,p3e,kFe,S3e,CFe,k3e,EFe,N3e,_3e,D3e,AFe,_Fe,P3e,L3e,$3e,B3e,DFe,PFe,pFe,j3e,TOe,W3e,H3e,K3e,CPe,LFe,$Fe,Y3e,BFe,Q3e,tLe,rLe,aLe,lLe,uLe,hLe,jFe,fLe,mLe,yLe,xLe,wLe,kLe,TLe,WFe,ILe,_Le,FLe,HFe,KFe,LLe,zLe,jLe,YFe,WLe,HLe,qLe,aie,ZLe,EPe,JFe,JLe,tMe,rMe,iMe,mFe,M4,oMe,IPe,APe,NPe,cMe,hMe,fMe,mMe,yMe,vMe,bMe,oPe,SMe,IMe,NMe,FMe,cPe,OMe,MMe,zMe,uPe,RLe,jMe,WMe,HMe,KMe,YMe,QMe,e4e,n4e,fPe,r4e,mPe,yPe,i4e,o4e,c4e,h4e,f4e,wPe,u3e,m4e,y4e,x4e,w4e,k4e,T4e,ZFe,F4e,O4e,M4e,GLe];for(const n of $4e)VD(n);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zp={},ZE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function z4e(n,e){Zp[n]=e}function hc(n,e){if(!(n in Zp)||e!=null){const r=V4e(n,e);if(r!==null)Zp[n]=r;else return console.log("Could not get context for WebGL version",n),null}const t=Zp[n];return t==null||t.isContextLost()?(delete Zp[n],hc(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Zp[n])}function B4e(n){if(!ye().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function V4e(n,e){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=e??B4e(n);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Zp[n]},!1),ye().getBool("SOFTWARE_WEBGL_ENABLED")&&(ZE.failIfMajorPerformanceCaveat=!1),n===1?t.getContext("webgl",ZE)||t.getContext("experimental-webgl",ZE):t.getContext("webgl2",ZE)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var QS;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(QS||(QS={}));var xo;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(xo||(xo={}));var Gs;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Gs||(Gs={}));function zT(n,e){return[e,n]}function j4e(n,e){return n*e}function QE(n){const e=Se(n),t=Math.ceil(e/4);return NN(t)}function Gb(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function U4e(n,e){const[t,r]=Gb(n,e);return t*r*4}function BV(n,e){const t=n;let r,s,i,a,o,l,c,u,h,d;return ye().getNumber("WEBGL_VERSION")===2?(r=t.R32F,s=t.R16F,i=t.RGBA16F,a=t.RGBA32F,o=t.RED,c=4,u=1,h=t.HALF_FLOAT,d=t.FLOAT,l=t.RGBA8):(r=n.RGBA,s=n.RGBA,i=n.RGBA,a=t.RGBA,o=n.RGBA,c=4,u=4,h=e!=null?e.HALF_FLOAT_OES:null,d=n.FLOAT,l=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xe(n,e){const t=e();return ye().getBool("DEBUG")&&W4e(n),t}function W4e(n){const e=n.getError();if(e!==n.NO_ERROR)throw new Error("WebGL Error: "+K4e(n,e))}const G4e=596e-10,H4e=65504;function q4e(n){return!!(ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||G4e<Math.abs(n)&&Math.abs(n)<H4e)}function K4e(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function JE(n,e){return rd(n,()=>n.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function X4e(n,e){const t=rd(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Xe(n,()=>n.shaderSource(t,e)),Xe(n,()=>n.compileShader(t)),n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function Y4e(n,e){const t=rd(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Xe(n,()=>n.shaderSource(t,e)),Xe(n,()=>n.compileShader(t)),ye().get("ENGINE_COMPILE_ONLY"))return t;if(n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw oie(e,n.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const Z4e=/ERROR: [0-9]+:([0-9]+):/g;function oie(n,e){const t=Z4e.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(n);return}const r=+t[1],s=n.split(`
`),i=s.length.toString().length+2,a=s.map((h,d)=>gg((d+1).toString(),i)+h);let o=0;for(let h=0;h<a.length;h++)o=Math.max(a[h].length,o);const l=a.slice(0,r-1),c=a.slice(r-1,r),u=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${gg(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function Q4e(n){return rd(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function J4e(n,e){if(Xe(n,()=>n.linkProgram(e)),!ye().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function jO(n,e){if(Xe(n,()=>n.validateProgram(e)),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function e$e(n,e){const t=rd(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Xe(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),Xe(n,()=>n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function t$e(n,e){const t=rd(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Xe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t)),Xe(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function n$e(n){return rd(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function r$e(n,e){const t=ye().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){const r=`[${n}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t){const r=`[${n}x${e}]`,s=`[${t}x${t}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function s$e(n){return rd(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function cH(n,e,t,r,s,i,a){const o=n.getAttribLocation(e,t);return o===-1?!1:(Xe(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),Xe(n,()=>n.vertexAttribPointer(o,s,n.FLOAT,!1,i,a)),Xe(n,()=>n.enableVertexAttribArray(o)),!0)}function i$e(n,e,t){u$e(n,t),Xe(n,()=>n.activeTexture(n.TEXTURE0+t)),Xe(n,()=>n.bindTexture(n.TEXTURE_2D,e))}function a$e(n,e,t){return rd(n,()=>n.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function o$e(n,e,t){return n.getUniformLocation(e,t)}function l$e(n,e,t,r){Xe(n,()=>i$e(n,e,r)),Xe(n,()=>n.uniform1i(t,r))}function UO(n,e,t){Xe(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),Xe(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0))}function uH(n,e){Xe(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),Xe(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function eI(n){const e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+c$e(n,e))}function c$e(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function rd(n,e,t){const r=Xe(n,()=>e());if(r==null)throw new Error(t);return r}function u$e(n,e){const t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t){const s=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${s}.`)}}function kx(n,e=2){return Se(n.slice(0,n.length-e))}function Cx(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function tI(n){let e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[kx(n),...Cx(n)]),e}function h$e(n,e=!1){let t=ye().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ye().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ye().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=t/2),e&&(t=t*2,r=r*2,n=n.map((o,l)=>l>=n.length-2?PR(n[l]):n[l]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=Xh(n).newShape);let s=Se(n),i=null;n.length<=1&&s<=t?i=[1,s]:n.length===2&&n[0]<=t&&n[1]<=t?i=n:n.length===3&&n[0]*n[1]<=t&&n[2]<=t?i=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=t&&n[1]*n[2]<=t?i=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=t&&n[3]<=t?i=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=t&&n[1]*n[2]*n[3]<=t&&(i=[n[0],n[1]*n[2]*n[3]]);const a=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||a)if(e){const o=kx(n);let l=2,c=2;n.length&&([l,c]=Cx(n)),s=o*(l/2)*(c/2),i=NN(s).map(u=>u*2)}else i=NN(s);return i}function nI(n){return n%2===0}function e_(n,e){if(n=n.slice(-2),e=e.slice(-2),Qt(n,e)||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){const t=n[n.length-1],r=e[e.length-1];if(t===r||nI(t)&&nI(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&nI(n[0])&&nI(e[0])}let WO,GO;function d$e(n){if(WO==null){const e=hc(n);WO=e.getParameter(e.MAX_TEXTURE_SIZE)}return WO}function f$e(n){if(GO==null){const e=hc(n);GO=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,GO)}function p$e(n){if(n===0)return 0;let e;const t=hc(n);return ul(t,"EXT_disjoint_timer_query_webgl2")&&n===2?e=2:ul(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function ul(n,e){return n.getExtension(e)!=null}function hH(n){try{if(hc(n)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function m$e(n){if(n===0)return!1;const e=hc(n);if(n===1){if(!ul(e,"OES_texture_float"))return!1}else if(!ul(e,"EXT_color_buffer_float"))return!1;return z4(e)}function g$e(n){if(n===0)return!1;const e=hc(n);if(n===1){if(!ul(e,"OES_texture_float")||!ul(e,"WEBGL_color_buffer_float"))return!1}else{if(ul(e,"EXT_color_buffer_float"))return z4(e);const r="EXT_color_buffer_half_float";if(ul(e,r)){const s=e.getExtension(r);return y$e(e,s)}return!1}return z4(e)}function z4(n){const e=BV(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(i),a}function y$e(n,e){const t=BV(n,e),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatHalfFloat,1,1,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);const a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(a),o}function v$e(n){return n!==2?!1:hc(n).fenceSync!=null}function BT(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&V(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ot=ye();ot.registerFlag("HAS_WEBGL",()=>ot.getNumber("WEBGL_VERSION")>0);ot.registerFlag("WEBGL_VERSION",()=>hH(2)?2:hH(1)?1:0);ot.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ot.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ot.get("WEBGL_VERSION")===2);ot.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ot.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ot.registerFlag("WEBGL_PACK",()=>ot.getBool("HAS_WEBGL"));ot.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_CLIP",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_REDUCE",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_LAZILY_UNPACK",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_CONV_IM2COL",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ot.getBool("WEBGL_PACK"));ot.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>d$e(ot.getNumber("WEBGL_VERSION")));ot.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>f$e(ot.getNumber("WEBGL_VERSION")));ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=ot.getNumber("WEBGL_VERSION");return n===0?0:p$e(n)});ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ot.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!cz());ot.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>m$e(ot.getNumber("WEBGL_VERSION")));ot.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ot.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ot.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ot.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>g$e(ot.getNumber("WEBGL_VERSION")));ot.registerFlag("WEBGL_FENCE_API_ENABLED",()=>v$e(ot.getNumber("WEBGL_VERSION")));ot.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ot.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ot.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});ot.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>cz()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});ot.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ot.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ot.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ot.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ot.registerFlag("WEBGL_EXP_CONV",()=>!1);ot.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ot.getBool("IS_TEST"));ot.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ot.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ot.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ot.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wi(){let n,e,t,r,s,i,a,o,l,c;return ye().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",s="texture",i="outputColor",a="out vec4 outputColor;",o=ye().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",s="texture2D",i="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:s,output:i,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0(n,e,t="index"){const r=ht(e);return r.map((s,i)=>{const a=`int ${n[i]} = ${t} / ${s}`,o=i===r.length-1?`int ${n[i+1]} = ${t} - ${n[i]} * ${s}`:`index -= ${n[i]} * ${s}`;return`${a}; ${o};`}).join("")}function WF(n,e,t="index"){const r=ht(e);return r.map((s,i)=>{const a=`int ${n[i]} = ${t} / outShapeStrides[${i}]`,o=i===r.length-1?`int ${n[i+1]} = ${t} - ${n[i]} * outShapeStrides[${i}]`:`index -= ${n[i]} * outShapeStrides[${i}]`;return`${a}; ${o};`}).join("")}function x$e(n,e){const t=n.length,r=n.map(i=>`${e}[${i}]`),s=new Array(t-1);s[t-2]=r[t-1];for(let i=t-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function b$e(n,e,t="index"){const r=n.map((i,a)=>a),s=x$e(r,e);return s.map((i,a)=>{const o=`int ${n[a]} = ${t} / ${s[a]}`,l=a===s.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * ${s[a]}`:`index -= ${n[a]} * ${s[a]}`;return`${o}; ${l};`}).join("")}function VV(n){const e=ht(n).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function jV(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const lie=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:cie}=Ate;function w$e(n,e,t){const r=[];if(n.forEach(f=>{const p=Se(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),t.enableShapeUniforms){const{uniformShape:m}=UV(t.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),t.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=r.join(`
`),i=n.map(f=>S$e(f,e,t.packedInputs,t.enableShapeUniforms)).join(`
`),a=e.texShape,o=Wi(),l=T$e(o);let c,u,h=A$e(o);return e.isPacked?(c=k$e(e.logicalShape,a,t.enableShapeUniforms),u=I$e(o)):(c=C$e(e.logicalShape,a,t.enableShapeUniforms),u=E$e(o)),t.packedInputs&&(h+=D$e),[h,l,u,s,c,i,t.userCode].join(`
`)}function Hb(n,e=!1){const t=n.shapeInfo.logicalShape;switch(t.length){case 0:return W$e(n,e);case 1:return H$e(n,e);case 2:return K$e(n,e);case 3:return Y$e(n,e);case 4:return Q$e(n,e);case 5:return J$e(n);case 6:return e5e(n);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function uie(n,e){switch(n.shapeInfo.logicalShape.length){case 0:return U$e(n);case 1:return G$e(n,e);case 2:return q$e(n,e);case 3:return X$e(n,e);default:return Z$e(n,e)}}function S$e(n,e,t=!1,r){let s="";t?s+=uie(n,r):s+=Hb(n,r);const i=n.shapeInfo.logicalShape,a=e.logicalShape;return i.length<=a.length&&(t?s+=t5e(n,e):s+=n5e(n,e)),s}function k$e(n,e,t){switch(n.length){case 0:return hie();case 1:return F$e(n,e,t);case 2:return V$e(n,e,t);case 3:return O$e(n,e,t);default:return M$e(n,e,t)}}function C$e(n,e,t){switch(n.length){case 0:return hie();case 1:return P$e(n,e,t);case 2:return j$e(n,e,t);case 3:return L$e(n,e,t);case 4:return $$e(n,e,t);case 5:return z$e(n,e);case 6:return B$e(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function T$e(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function E$e(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function I$e(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function A$e(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${N$e}
    ${_$e}
    ${R$e}
  `}const N$e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_$e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,R$e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,D$e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function hie(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function F$e(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function P$e(n,e,t){return e[0]===1?t?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?t?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function O$e(n,e,t){if(t)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(n[2]/2),i=s*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function L$e(n,e,t){if(t)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${WF(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const r=k0(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function M$e(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(n[n.length-1]/2),i=s*Math.ceil(n[n.length-2]/2);let a=i,o="",l="b, r, c";for(let c=2;c<n.length-1;c++)a*=n[n.length-c-1],o=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+o,l=`b${c}, `+l;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${n.length}(${l});
    }
  `}function $$e(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${WF(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const r=k0(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function z$e(n,e){const t=k0(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function B$e(n,e){const t=k0(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function V$e(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Qt(n,e))return t?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(n[1]/2);return t?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function j$e(n,e,t){return Qt(n,e)?t?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:n[1]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:t?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function C0(n){return`offset${n}`}function U$e(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Wi();return`
    vec4 ${t}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function W$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[s,i]=n.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const a=C0(t);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${a});
      return sampleTexture(${t}, uv);
    }
  `;const[o,l]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${t}, uv);
    }
  `}function G$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=n.shapeInfo.texShape,i=Wi();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${t}, uv);
    }
  `;const a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${i.texture2D}(${t}, uv);
    }
  `}function H$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${qb(n)}
      }
    `;const s=n.shapeInfo.texShape,i=s[0],a=s[1];if(a===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const o=C0(t);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${t}TexShape[0]));
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${t}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${t}TexShape[1]), 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${o});
      return sampleTexture(${t}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${a}, index + ${o});
      return sampleTexture(${t}, uv);
    }
  `}function q$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n.shapeInfo.texShape,a=i[0],o=i[1],l=Wi();if(i!=null&&Qt(t,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(t[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function K$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n.shapeInfo.texShape;if(i!=null&&Qt(t,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=i[0],f=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=Xh(t),l=a;if(l.length<t.length){const d=Kb(n,l),f=["row","col"];return`
      ${Hb(d,e)}
      float ${s}(int row, int col) {
        return ${s}(${Xb(f,o)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${qb(n)}
      }
    `;const c=i[0],u=i[1],h=C0(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function X$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(t[0]===1){const d=t.slice(1),f=[1,2],p=Kb(n,d),m=["b","row","col"];return`
        ${uie(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Xb(m,f)});
        }
      `}const o=Wi();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],u=Math.ceil(t[2]/2),h=u*Math.ceil(t[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${u}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function Y$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[1]*t[2],a=t[2],{newShape:o,keptDims:l}=Xh(t),c=o;if(c.length<t.length){const m=Kb(n,c),y=["row","col","depth"];return`
        ${Hb(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Xb(y,l)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${a}, 1)));
        ${qb(n)}
      }
    `;const u=n.shapeInfo.texShape,h=u[0],d=u[1],f=n.shapeInfo.flatOffset;if(d===i&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===a&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=C0(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${a} + depth + ${p};
        vec2 uv = uvFromFlat(${h}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Z$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=Wi();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${t}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${t}, uv);
    }
  `;const i=n.shapeInfo.logicalShape,a=i.length,o=n.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],h=Math.ceil(i[a-1]/2);let d=h*Math.ceil(i[a-2]/2),f="int b, int row, int col",p=`b * ${d} + (row / 2) * ${h} + (col / 2)`;for(let m=2;m<a-1;m++)f=`int b${m}, `+f,d*=i[a-m-1],p=`b${m} * ${d} + `+p;return`
    vec4 ${r}(${f}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${t}, uv);
    }
  `}function Q$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[3],a=t[2]*i,o=t[1]*a,{newShape:l,keptDims:c}=Xh(t);if(l.length<t.length){const v=Kb(n,l),b=["row","col","depth","depth2"];return`
      ${Hb(v,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Xb(b,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${i}, 1)));
        ${qb(n)}
      }
    `;const u=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,d=h[0],f=h[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(f===o&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=C0(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${f}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function J$e(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=e[4],i=e[3]*s,a=e[2]*i,o=e[1]*a,{newShape:l,keptDims:c}=Xh(e);if(l.length<e.length){const m=Kb(n,l),y=["row","col","depth","depth2","depth3"];return`
      ${Hb(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Xb(y,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${i}, ${s})) +
          depth3;
        ${qb(n)}
      }
    `;const u=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,d=h[0],f=h[1];if(f===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${d}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(f===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${d}.0);
        return sampleTexture(${t}, uv);
      }
    `;const p=C0(t);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${i} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${d}, ${f}, index);
      return sampleTexture(${t}, uv);
    }
  `}function e5e(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:s,keptDims:i}=Xh(e);if(s.length<e.length){const y=Kb(n,s),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${Hb(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Xb(g,i)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,c=e[2]*l,u=e[1]*c;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${qb(n)}
      }
    `;const h=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,f=d[0],p=d[1];if(p===u&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(p===a&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${t}, uv);
      }
    `;const m=C0(t);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${t}, uv);
    }
  `}function qb(n){const e=n.name,t=Se(n.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function t5e(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),s="get"+r+"AtOutCoords",i=n.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=cie(n.shapeInfo.logicalShape,e.logicalShape),l=zn(a),c=a-i;let u;const h=["x","y","z","w","u","v"];i===0?u="":a<2&&o.length>=1?u="coords = 0;":u=o.map(v=>`coords.${h[v+c]} = 0;`).join(`
`);let d="";a<2&&i>0?d="coords":d=n.shapeInfo.logicalShape.map((v,b)=>`coords.${h[b+c]}`).join(", ");let f="return outputValue;";const m=Se(n.shapeInfo.logicalShape)===1,g=Se(e.logicalShape)===1;if(i===1&&!m&&!g)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)a===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(o.length){const v=i-2,b=i-1;o.indexOf(v)>-1&&o.indexOf(b)>-1?f="return vec4(outputValue.x);":o.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(b)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${d});
      ${f}
    }
  `}function n5e(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,a=n.shapeInfo.texShape,o=n.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!n.shapeInfo.isUniform&&o===l&&n.shapeInfo.flatOffset==null&&Qt(a,i))return`
      float ${s}() {
        return sampleTexture(${t}, resultUV);
      }
    `;const c=zn(l),u=cie(n.shapeInfo.logicalShape,e.logicalShape),h=l-o;let d;const f=["x","y","z","w","u","v"];o===0?d="":l<2&&u.length>=1?d="coords = 0;":d=u.map(m=>`coords.${f[m+h]} = 0;`).join(`
`);let p="";return l<2&&o>0?p="coords":p=n.shapeInfo.logicalShape.map((m,y)=>`coords.${f[y+h]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${d}
      return get${r}(${p});
    }
  `}function zn(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function UV(n,e,t){const{newShape:r,keptDims:s}=Xh(e),i=e.length,a=n&&i===3&&e[0]===1,o=a?e.slice(1):r,l=!n&&i>1&&!Qt(e,t)&&r.length<i||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:s}}function Kb(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function Xb(n,e){return e.map(t=>n[t]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5e(n,e,t,r){const s=t.map((u,h)=>{const d={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(d.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:d}}),i=s.map(u=>u.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=w$e(s,a,e),l=Y4e(n.gl,o),c=n.createProgram(l);return ye().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:a},die(n,e,c)))}function die(n,e,t){const r=[],s=[];let i,a,o,l=null,c=null;c=n.getUniformLocation(t,"NAN",!1),ye().getNumber("WEBGL_VERSION")===1&&(l=n.getUniformLocation(t,"INFINITY",!1));const u=!1;for(const h of e.variableNames){const d={name:h,uniform:n.getUniformLocation(t,h,u),offset:n.getUniformLocation(t,`offset${h}`,u)};e.enableShapeUniforms&&(d.shape=n.getUniformLocation(t,`${h}Shape`,u),d.texShape=n.getUniformLocation(t,`${h}TexShape`,u)),r.push(d)}if(e.enableShapeUniforms&&(i=n.getUniformLocation(t,"outShape",u),o=n.getUniformLocation(t,"outShapeStrides",u),a=n.getUniformLocation(t,"outTexShape",u)),e.customUniforms)for(const h of e.customUniforms)s.push(n.getUniformLocation(t,h.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:a}}function dH(n,e){if(n.length!==e.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${e.length} inputs`);n.forEach((t,r)=>{const s=t.logicalShape,i=e[r],a=i.shape;if(!Qt(s,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${a} must match`);if(t.isUniform&&i.isUniform)return;const o=t.texShape,l=i.isUniform?null:i.texData.texShape;if(!Qt(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function s5e(n,e,t,r,s){e.program.enableShapeUniforms||(dH(e.inShapeInfos,t),dH([e.outShapeInfo],[r]));const i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):n.setOutputMatrixTexture(i.texture,a[0],a[1]),n.setProgram(e.webGLProgram),n.bindVertexArray(e.webGLProgram.vao),ye().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&n.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&n.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<t.length;++l){const c=t[l],{uniform:u,offset:h,shape:d,texShape:f}=e.variablesLocations[l];if(d){const{uniformShape:p}=UV(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:n.gl.uniform1iv(d,new Int32Array(p));break;case 2:n.gl.uniform2iv(d,new Int32Array(p));break;case 3:n.gl.uniform3iv(d,new Int32Array(p));break;case 4:n.gl.uniform4iv(d,new Int32Array(p));break}}if(f&&n.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(Se(c.shape)<2)n.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),n.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&h!=null&&n.gl.uniform1i(h,c.texData.slice.flatOffset),n.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:n.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=ht(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:n.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:n.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&n.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],h=s[l];if(c.type==="float")n.gl.uniform1fv(u,h);else if(c.type==="vec2")n.gl.uniform2fv(u,h);else if(c.type==="vec3")n.gl.uniform3fv(u,h);else if(c.type==="vec4")n.gl.uniform4fv(u,h);else if(c.type==="int")n.gl.uniform1iv(u,h);else if(c.type==="ivec2")n.gl.uniform2iv(u,h);else if(c.type==="ivec3")n.gl.uniform3iv(u,h);else if(c.type==="ivec4")n.gl.uniform4iv(u,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}n.executeProgram()}function i5e(n,e,t){let r="";e.concat(t).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:h}=UV(n.packedInputs,a.shape,l);let d="",f="",p="";if(u.length===1&&n.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${C[0]>1}_${C[1]>1}`}else if(u.length===2&&!n.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!n.packedInputs){const C=ht(u);p=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const m=a.shape.length,y=u.length===2&&Qt(a.shape,l),g=Se(a.shape)===1,v=Vg(a.shape,t.shape),b=!n.packedInputs&&m===t.shape.length&&Qt(l,t.texData.texShape),w=n.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${b}_${c?h:""}_${u.length}_${g}_${v}_${y}_${d}_${f}_${p}_${w}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const s=n.userCode;let i=n.constructor.name;return i+="_"+r+"_"+s+`${ye().getNumber("WEBGL_VERSION")}`,i}function vi(n){return ye().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a5e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=QS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Wi();this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?WF(["r","c","d"],e):k0(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o5e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=QS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Wi();this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?WF(["r","c","d"],e):k0(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l5e{constructor(e){this.variableNames=["A"],this.outTexUsage=xo.DOWNLOAD;const t=Wi();this.outputShape=e,this.userCode=`
      ${lie}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c5e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=xo.DOWNLOAD;const t=Wi();this.outputShape=e,this.userCode=`
      ${lie}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5e={R:0,G:1,B:2,A:3};class fH{constructor(e,t=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Wi();this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${u5e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?jV():VV(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${a}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5e{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Wi();this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length);let s="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;s+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?jV():VV(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(n){const e=Wi(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return X4e(n,t)}function f5e(n){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return e$e(n,e)}function p5e(n){const e=new Uint16Array([0,1,2,2,1,3]);return t$e(n,e)}function VT(n,e,t,r,s,i){r$e(e,t);const a=n$e(n),o=n.TEXTURE_2D;return Xe(n,()=>n.bindTexture(o,a)),Xe(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),Xe(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),Xe(n,()=>n.texParameteri(o,n.TEXTURE_MIN_FILTER,n.NEAREST)),Xe(n,()=>n.texParameteri(o,n.TEXTURE_MAG_FILTER,n.NEAREST)),ye().getNumber("WEBGL_VERSION")===1?Xe(n,()=>n.texImage2D(o,0,r,e,t,0,s,i,null)):Xe(n,()=>n.texStorage2D(o,1,r,e,t)),Xe(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:a,texShape:[t,e]}}function fie(n){return n.internalFormatFloat}function m5e(n,e,t,r){const[s,i]=zT(e,t);return VT(n,s,i,fie(r),r.textureFormatFloat,n.FLOAT)}function pie(n){return n.internalFormatHalfFloat}function g5e(n,e,t,r){const[s,i]=zT(e,t);return VT(n,s,i,pie(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function mie(n){return n.downloadTextureFormat}function y5e(n,e,t,r){const[s,i]=zT(e,t);return VT(n,s,i,mie(r),n.RGBA,n.UNSIGNED_BYTE)}function gie(n){return n.internalFormatPackedFloat}function v5e(n,e,t,r){const[s,i]=Gb(e,t);return VT(n,s,i,gie(r),n.RGBA,n.FLOAT)}function yie(n){return n.internalFormatPackedHalfFloat}function x5e(n,e,t,r){const[s,i]=Gb(e,t);return VT(n,s,i,yie(r),n.RGBA,r.textureTypeHalfFloat)}function b5e(n,e,t){return Xe(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),cH(n,e,"clipSpacePos",t,3,20,0)&&cH(n,e,"uv",t,2,20,12)}function w5e(n,e,t,r,s,i){Xe(n,()=>n.bindTexture(n.TEXTURE_2D,e));let a,o,l;s instanceof Uint8Array?(a=new Uint8Array(t*r*4),o=n.UNSIGNED_BYTE,l=n.RGBA):(a=new Float32Array(t*r*4),o=n.FLOAT,l=i.internalFormatPackedFloat),a.set(s),ye().getNumber("WEBGL_VERSION")===2?Xe(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,n.RGBA,o,a)):Xe(n,()=>n.texImage2D(n.TEXTURE_2D,0,l,t,r,0,n.RGBA,o,a)),Xe(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function S5e(n,e,t){Xe(n,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?ye().getNumber("WEBGL_VERSION")===2?Xe(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):Xe(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):ye().getNumber("WEBGL_VERSION")===2?Xe(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):Xe(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),Xe(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function k5e(n,e,t,r){const s=n.createBuffer();Xe(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,s));const o=4*4*e*t;return Xe(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)),Xe(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,0)),Xe(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),s}function C5e(n,e,t){const r=n,s=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function T5e(n,e,t,r){const[s,i]=zT(e,t),a=4,o=new Uint8Array(j4e(e*t,a));return Xe(n,()=>n.readPixels(0,0,s,i,r.downloadTextureFormat,n.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function E5e(n,e,t,r,s,i,a,o){const l=n,c=new Float32Array(U4e(i,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function I5e(n,e,t){const r=new Float32Array(e*t*4);return Xe(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HO{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=ye().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,z4e(t,e)):this.gl=hc(t),e=this.gl,ye().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>Xe(i,()=>i.createVertexArray()),this.bindVertexArray=a=>Xe(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>Xe(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>Xe(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Xe(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>Xe(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Xe(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>Xe(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ye().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=JE(this.gl,i),ul(this.gl,a))this.textureHalfFloatExtension=JE(this.gl,a);else if(ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ul(this.gl,s))this.colorBufferHalfFloatExtension=JE(this.gl,s);else if(ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ul(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(ul(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=f5e(this.gl),this.indexBuffer=p5e(this.gl),this.framebuffer=s$e(this.gl),this.textureConfig=BV(this.gl,this.textureHalfFloatExtension)}get debug(){return ye().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Xe(e,()=>e.finish()),Xe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Xe(e,()=>e.deleteFramebuffer(this.framebuffer)),Xe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Xe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Xe(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),m5e(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),g5e(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),y5e(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),S5e(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,s){this.throwIfDisposed(),w5e(this.gl,e,t,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),x5e(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),v5e(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(uH(this.gl,this.framebuffer),this.outputTexture=null),Xe(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,()=>T5e(this.gl,t,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,r,s,i,a){return E5e(this.gl,e,t,r,s,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return C5e(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);const s=k5e(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(ye().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=s.clientWaitSync(i,0,0);return a===s.ALREADY_SIGNALED||a===s.CONDITION_SATISFIED},t=i}else ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,()=>I5e(this.gl,t,r))}createProgram(e){this.throwIfDisposed();const t=this.gl;this.vertexShader==null&&(this.vertexShader=d5e(t));const r=Q4e(t);Xe(t,()=>t.attachShader(r,this.vertexShader)),Xe(t,()=>t.attachShader(r,e)),J4e(t,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&jO(t,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;Xe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),b5e(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Xe(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&jO(this.gl,this.program),Xe(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?a$e(this.gl,e,t):o$e(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Xe(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),l$e(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[s,i]=Gb(t,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,t,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,t)}setOutputPackedMatrixWriteRegion(e,t,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&jO(this.gl,this.program),eI(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Xe(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Xe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=JE(this.gl,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await qM(()=>this.disposed||this.isQueryAvailable(e,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=A5e(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:r}=this.itemsToPoll[t];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ye().platform&&(r=ye().platform.setTimeoutCustom.bind(ye().platform)),qM(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),UO(this.gl,e,this.framebuffer),this.debug&&eI(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(UO(this.gl,this.outputTexture,this.framebuffer),this.debug&&eI(this.gl)):uH(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const s=this.gl;UO(s,e,this.framebuffer),this.debug&&eI(s),this.outputTexture=e,Xe(s,()=>s.viewport(0,0,t,r)),Xe(s,()=>s.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,s){this.throwIfDisposed(),Xe(this.gl,()=>this.gl.scissor(e,t,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function A5e(n){let e=0;for(;e<n.length&&n[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:N5e,bincountImpl:vie,bincountReduceImpl:_5e,bitwiseAndImpl:R5e,castImpl:D5e,ceilImpl:F5e,concatImpl:P5e,equalImpl:O5e,expImpl:L5e,expm1Impl:M5e,floorImpl:$5e,gatherNdImpl:z5e,gatherV2Impl:B5e,greaterImpl:V5e,greaterEqualImpl:j5e,lessImpl:U5e,lessEqualImpl:W5e,linSpaceImpl:G5e,logImpl:H5e,maxImpl:q5e,maximumImpl:K5e,minimumImpl:X5e,multiplyImpl:Y5e,negImpl:Z5e,notEqualImpl:Q5e,prodImpl:J5e,raggedGatherImpl:eze,raggedRangeImpl:tze,raggedTensorToTensorImpl:nze,rangeImpl:rze,rsqrtImpl:sze,scatterImpl:ize,sigmoidImpl:aze,simpleAbsImpl:xie,sliceImpl:oze,sparseFillEmptyRowsImpl:lze,sparseReshapeImpl:cze,sparseSegmentReductionImpl:bie,sqrtImpl:uze,staticRegexReplaceImpl:hze,stridedSliceImpl:dze,stringNGramsImpl:fze,stringSplitImpl:pze,stringToHashBucketFastImpl:mze,subImpl:gze,tileImpl:yze,topKImpl:vze,transposeImpl:WV,uniqueImpl:xze}=SPe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(n,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${n}.${t}`)}function $i(n,e){return e===1?[n]:wie(n,e)}function bze(n,e){if(n===1)return"rc";let t="";for(let r=0;r<n;r++)t+=e[r],r<n-1&&(t+=",");return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wze{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=vi(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const t=$i("rc",this.rank),r=zn(this.rank),s=this.getOutOfBoundsCondition(t),i=this.getSetup(t),a=this.getOutput(t);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const t=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";const t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sie{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${Sze(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?jV():VV(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Sze(n,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?b$e(["r","c","d"],"inputShape"):k0(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kze{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,r){const s=mH(t,r),i=gH(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=pH(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let o;return s===Gs.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Gs.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Gs.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Gs.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Gs.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,t,r,s){if(this.freeTextures==null)return;const i=mH(r,s),a=gH(t,i,s);a in this.freeTextures||(this.freeTextures[a]=[]);const o=pH(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=ye().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Cze(n,e){const t=n;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===n.RGBA)return 16;if(e===t.RGBA16F)return 8;if(e===t.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function pH(n,e,t,r,s){const i=Tze(e,r);let a;if(s){const[l,c]=Gb(n[0],n[1]);a=l*c}else{const[l,c]=zT(n[0],n[1]);a=l*c}const o=Cze(t,i);return a*o}function Tze(n,e){switch(n){case Gs.PACKED_2X2_FLOAT32:return gie(e);case Gs.PACKED_2X2_FLOAT16:return yie(e);case Gs.UNPACKED_FLOAT32:return fie(e);case Gs.UNPACKED_FLOAT16:return pie(e);case Gs.PACKED_4X1_UNSIGNED_BYTE:return mie(e);default:throw new Error(`Unknown physical texture type ${n}`)}}function Eze(n){return ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Gs.PACKED_2X2_FLOAT32:Gs.UNPACKED_FLOAT32:n?Gs.PACKED_2X2_FLOAT16:Gs.UNPACKED_FLOAT16}function mH(n,e){if(n===xo.UPLOAD)return Gs.PACKED_2X2_FLOAT32;if(n===xo.RENDER||n==null)return Eze(e);if(n===xo.DOWNLOAD||n===xo.PIXELS)return Gs.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function gH(n,e,t){return`${n[0]}_${n[1]}_${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ru{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const kl="if (isnan(x)) return x;",Ize="return x;",yH="return abs(x);",Aze="return (x >= 0.0) ? x : (exp(x) - 1.0);",Nze=kl+`
  return (x < 0.0) ? 0.0 : x;
`,_ze=kl+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,wd="return x;",Rze="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dze="return x;",Fze=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Pze=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Oze=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Lze="return 1.0 / (1.0 + exp(-1.0 * x));";class uf{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length);const t=e.length,r=$i("rc",t),s=zn(t),i=bze(t,r),a=r.slice(-2),o=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ze=yF,zze=1e-7,Bze=1e-4,rI={};function Vze(n){return n in rI||(rI[n]={}),rI[n]}const jze=ye().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Uze=600;function Wze(){return ye().global.screen==null?1024:ye().global.screen.height*ye().global.screen.width*window.devicePixelRatio*Uze/1024/1024}class GF extends FR{nextDataId(){return GF.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ye().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof HO)t=e;else{const r=hc(ye().getNumber("WEBGL_VERSION"),e);t=new HO(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=hc(ye().getNumber("WEBGL_VERSION"));t=new HO(r),this.binaryCache=Vze(ye().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new kze(this.gpgpu),this.numMBBeforeWarning=Wze(),this.texData=new J5(this,lo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,r,s,i,a){const o=this.makeTensorInfo(t,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=tI(t),u=new fH(c,!1,a),h=this.runWebGLProgram(u,[o],r,[[s,i]]);return h.shape=t,l.texture=null,this.disposeIntermediateTensorInfo(o),h.dataId}write(e,t,r){if((ye().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ye().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:t,dtype:r,values:e,usage:xo.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,r,s,i){if(ye().getBool("DEBUG")&&this.checkNumericalProblems(t),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:t,usage:xo.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:a,shape:o,isPacked:l}=t;if(a!=null){let d;l?d=new uf(o,wd):d=new ru(o,wd);const f=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:s}],s),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Ri());let h;if(s==="complex64"){const d=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);h=Lh(d,f)}else h=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ri()-u),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const t=this.texData.get(e),{values:r,shape:s,slice:i,dtype:a,complexTensorInfos:o,isPacked:l}=t;if(i!=null){let p;l?p=new uf(s,wd):p=new ru(s,wd);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),y=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(ye().getBool("DEBUG")&&!ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ye().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(a!=="complex64"&&ye().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...QE(s))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(a==="complex64"){const p=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),m=p[0],y=p[1];h=Lh(m,y)}else if(c==null)h=this.getValuesFromTexture(e);else{const p=Se(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;Xe(p,()=>p.deleteBuffer(c))}const d=this.convertAndCacheOnCPU(e,h),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&lo().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,t={}){const r=this.texData.get(e),{values:s,shape:i,slice:a,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let f;l?f=new uf(i,wd):f=new ru(i,wd);const p=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:o}],o),m=this.readToGPU(p,t);return this.disposeIntermediateTensorInfo(p),m}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),h=lo().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:h},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(s=>Dh(s));return Vt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Vt(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){const r=e[t];if(!q4e(r))throw ye().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:t,dtype:r,isPacked:s}=this.texData.get(e),i=Se(t);if(ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),f=this.texData.get(d.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...QE(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),p}const a=ye().getBool("WEBGL_PACK")&&s===!0,o=a?tI(t):t,l=a?new c5e(o):new l5e(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=vu(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=vu(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=t,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);o.kernelMs=GQ(l),o.getExtraProfileInfo=()=>l.map((c,u)=>({name:a[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ri(),endMs:null}}endTimer(e){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ri(),e)}async getQueryTime(e){if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:r,texShape:s,usage:i,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),t!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(t,s,i,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=jze){return ye().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Se(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){ho("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return $ze(e.shape,t)}packedUnaryOp(e,t,r){const s=new uf(e.shape,t),i=this.compileAndRun(s,[e],r);return lo().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=xie(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(ye().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,yH,e.dtype);const t=new ru(e.shape,yH),r=this.compileAndRun(t,[e]);return lo().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let s;if(t==="string"&&r!=null&&r.length>0&&nu(r[0])){const i=r.map(a=>lu(a));s=this.write(i,e,t)}else s=this.write(r,e,t);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:t}}makeOutput(e,t,r){return lo().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){const t=new Mze(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new wze(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const r=[kx(e.shape),...Cx(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[kx(t),...Cx(t)],a=new Sie(i,r),o=!0,l=[r],c=this.runWebGLProgram(a,[s],e.dtype,l,o);return{dataId:c.dataId,shape:t,dtype:c.dtype}}decode(e,t){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:a}=r;if(t!=null){const d=Se(i),f=t[0]*t[1]*4;V(d<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=tI(i);let l;s?l=new o5e(o):l=new a5e(o);const c=!0,u=[t??QE(o)],h=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,u,c,t);return{dtype:a,shape:i,dataId:h.dataId}}runWebGLProgram(e,t,r,s,i=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===QS.DENSE){const g=a??QE(e.outputShape);l.texShape=g.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Se(o.shape)===0)return l.values=_s(o.dtype,0),o;const c=[],u=t.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(g.dataId);if(v.texture==null){if(!e.packedInputs&&Se(g.shape)<=ye().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!v.isPacked!=!!e.packedInputs)g=v.isPacked?this.unpackTensor(g):this.packTensor(g),c.push(g),v=this.texData.get(g.dataId);else if(v.isPacked&&!e_(v.shape,g.shape)){const b=g,w=g.shape;g.shape=v.shape,g=this.packedReshape(g,w),c.push(g),v=this.texData.get(g.dataId),b.shape=w}return{shape:g.shape,texData:v,isUniform:!1}});this.uploadToGPU(o.dataId);const h={shape:o.shape,texData:l,isUniform:!1},d=i5e(e,u,h),f=this.getAndSaveBinary(d,()=>r5e(this.gpgpu,e,u,h)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),ye().get("ENGINE_COMPILE_ONLY")||s5e(this.gpgpu,f,u,h,s),c.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const y=ye().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const g=Ri();g-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!ye().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const g=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),g}return o}compileAndRun(e,t,r,s,i=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,s,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ye().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=he(()=>{if(!ye().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ye().getBool("DEBUG");ye().set("DEBUG",!1);const t=this.abs(lt(1e-8)).dataSync()[0];if(ye().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?zze:Bze}uploadToGPU(e){const t=this.texData.get(e),{shape:r,dtype:s,values:i,texture:a,usage:o,isPacked:l}=t;if(a!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Ri());let h=t.texShape;if(h==null&&(h=h$e(r,l),t.texShape=h),i!=null){const d=tI(r);let f,p=h[1],m=h[0];const y=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!y)&&([p,m]=Gb(h[0],h[1])),l?f=new h5e(d,y):f=new fH(d,y);const g=y?[m,p]:h,v=this.makeTensorInfo(g,s),b=this.texData.get(v.dataId);y?b.usage=xo.PIXELS:b.usage=xo.UPLOAD,b.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,i);const w=[[m,p]],I=this.runWebGLProgram(f,[v],s,w,!0),T=this.texData.get(I.dataId);t.texShape=T.texShape,t.isPacked=T.isPacked,t.usage=T.usage,ye().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(t.texture=T.texture,t.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(v),c&&(this.uploadWaitMs+=Ri()-u)}else{const d=this.acquireTexture(h,o,s,l);t.texture=d}}convertAndCacheOnCPU(e,t){const r=this.texData.get(e),{dtype:s}=r;return t!=null&&(r.values=Gze(t,s)),r.values}acquireTexture(e,t,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,s)}computeBytes(e,t){return e[0]*e[1]*LS(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(const[,t]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(t),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await jB(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(oie(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=die(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,t,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:a,channels:o}=e,l=lo().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,t,r,i,a,o);return lo().makeTensorFromDataId(c,t,r,l)}}GF.nextDataId=0;function Gze(n,e){if(e==="float32"||e==="complex64")return n;if(e==="int32"||e==="bool"){const t=e==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<t.length;++r)t[r]=Math.round(n[r]);return t}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */uz()&&fz("webgl",()=>new GF,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GV=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Xg{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=Nt(t,r),this.enableShapeUniforms=vi(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Yb{constructor(e,t,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Nt(t,r);const i=this.outputShape.length;this.enableShapeUniforms=vi(i);let a="";if(s)if(i===0||Se(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${zn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=$i("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ua(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Hze={kernelName:lb,backendName:"webgl",kernelFunc:Ua};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cp(n){const{inputs:e,backend:t}=n,{real:r,imag:s}=e,i=t.makeTensorInfo(r.shape,"complex64"),a=t.texData.get(i.dataId),o=Ua({inputs:{x:r},backend:t}),l=Ua({inputs:{x:s},backend:t});return a.complexTensorInfos={real:o,imag:l},i}const qze={kernelName:jR,backendName:"webgl",kernelFunc:Cp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kie="return (a < 0.) ? b * a : a;",Cie=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Kze(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{alpha:i}=r,a=t.makeTensorInfo([],"float32",Yh(i,"float32")),o=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Yb(Cie,s.shape,a.shape):new Xg(kie,s.shape,a.shape),l=t.runWebGLProgram(o,[s,a],"float32");return t.disposeIntermediateTensorInfo(a),l}const Xze={kernelName:EC,backendName:"webgl",kernelFunc:Kze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tie="return (a < 0.) ? b * a : a;",Eie=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Yze(n){const{inputs:e,backend:t}=n,{x:r,alpha:s}=e,i=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Yb(Eie,r.shape,s.shape):new Xg(Tie,r.shape,s.shape);return t.runWebGLProgram(i,[r,s],"float32")}const Zze={kernelName:GC,backendName:"webgl",kernelFunc:Yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zb="if (isnan(x)) return x;";function yn({opSnippet:n,packedOpSnippet:e,cpuKernelImpl:t,dtype:r}){return({inputs:s,backend:i})=>{const{x:a}=s,o=i,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&t!=null){const h=o.texData.get(a.dataId),d=t(h.values,l);return o.makeTensorInfo(a.shape,l,d)}const c=ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new uf(a.shape,e):u=new ru(a.shape,n),o.runWebGLProgram(u,[a],l)}}function ei({opSnippet:n,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:a,backend:o})=>{const{a:l,b:c}=a,u=o;if(r&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[y,g]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(b=>{const[w,C]=b,I={dataId:w.dataId,dtype:w.dtype,shape:l.shape},T={dataId:C.dataId,dtype:C.dtype,shape:c.shape},E=new Xg(n,l.shape,c.shape);return u.runWebGLProgram(E,[I,T],ca(w.dtype,C.dtype))}),v=Cp({inputs:{real:y,imag:g},backend:u});return u.disposeIntermediateTensorInfo(y),u.disposeIntermediateTensorInfo(g),v}const h=i||ca(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const p=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,y=l.dtype==="string"?Mh(p):p,g=l.dtype==="string"?Mh(m):m,[v,b]=s(l.shape,c.shape,y,g,h),w=u.makeTensorInfo(b,h),C=u.texData.get(w.dataId);return C.values=v,w}const d=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return d?f=new Yb(e,l.shape,c.shape,t):f=new Xg(n,l.shape,c.shape),u.runWebGLProgram(f,[l,c],h)}}function JS(n,e=!1){if(n==="linear")return e?Dze:Ize;if(n==="relu")return e?Pze:Nze;if(n==="elu")return e?Fze:Aze;if(n==="relu6")return e?Oze:_ze;if(n==="prelu")return e?Eie:Tie;if(n==="leakyrelu")return e?Cie:kie;if(n==="sigmoid")return e?Lze:Rze;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iie{constructor(e,t,r,s=!1,i=!1,a=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=vi(this.outputShape.length);const u=s?e[1]:e[2],h=Math.ceil(u/2),d=s?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",g="";o&&(l?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:y=`vec4 activation(vec4 x) {
          ${o}
        }`,g="result = activation(result);");const v=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",w="rc.x";e[0]<t[0]?b=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(w=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${w};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vH={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class xH{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Nt(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bH="return a * b;";function HV(n){const{inputs:e,backend:t}=n,{a:r,b:s}=e,i=ca(r.dtype,s.dtype);if(r.dtype==="complex64"){const o=t.texData.get(r.dataId),l=t.texData.get(s.dataId),c=new xH(vH.REAL,r.shape,s.shape),u=new xH(vH.IMAG,r.shape,s.shape),h=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],d=t.runWebGLProgram(c,h,"float32"),f=t.runWebGLProgram(u,h,"float32"),p=Cp({inputs:{real:d,imag:f},backend:t});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),p}if(t.shouldExecuteOnCPU([r,s])){const o=t.texData.get(r.dataId),l=t.texData.get(s.dataId),[c,u]=Y5e(r.shape,s.shape,o.values,l.values,i),h=t.makeTensorInfo(u,i),d=t.texData.get(h.dataId);return d.values=c,h}let a;return ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new Yb(bH,r.shape,s.shape):a=new Xg(bH,r.shape,s.shape),t.runWebGLProgram(a,[r,s],i)}const Qze={kernelName:yb,backendName:"webgl",kernelFunc:HV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(n,e,t){const r=[kx(n.shape),...Cx(n.shape)],s={dtype:n.dtype,shape:r,dataId:n.dataId},i=[kx(e),...Cx(e)],a=new Sie(i,r),o=!0,l=[r],c=t.runWebGLProgram(a,[s],n.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ge(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{shape:i}=r,a=t,o=Se(s.shape),l=tz(i,o),c=Se(l);V(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const u=a.texData.get(s.dataId);return u.isPacked&&!e_(s.shape,l)&&!(u.texture!==null&&e_(u.shape,l))?Jze(s,l,a):(a.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const eBe={kernelName:qC,backendName:"webgl",kernelFunc:Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wH{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(t!=null){const h=1/t;c=`sumValue += dot(values * ${Lg(h)?h.toPrecision(2):h}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tBe{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];let o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,h=r%4;let d=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";t==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${h===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${h===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nBe(n){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const t=e.length?e[e.length-1].outSize:n[1],r=NF(t);e.push({inSize:t,windowSize:r,outSize:Math.ceil(t/r)})}return e}function E0(n,e,t,r){const s=nBe(n.shape);let i=n;for(let a=0;a<s.length;a++){const{inSize:o,windowSize:l,outSize:c}=s[a];let u,h;t==="mean"?u=a===0?new wH({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c},o):new wH({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c}):u=new tBe({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c},t),h=i,i=r.runWebGLProgram(u,[i],e),h.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(h)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rBe{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[t[a]];this.outputShape=r,this.rank=r.length;const s=zn(this.rank),i=sBe(t);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function sBe(n){const e=n.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<n.length;s++)r[n[s]]=t[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iBe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[t[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=zn(this.rank),i=wie("rc",this.rank),a=new Array(this.rank);for(let u=0;u<t.length;u++)a[t[u]]=i[u];const o=`vec2(${a.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HF(n,e,t){const r=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iBe(n.shape,e):new rBe(n.shape,e);return t.runWebGLProgram(r,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aBe(n,e,t,r){const s=e,i=n.shape.length,a=Kt(s,n.shape);let o=a;const l=vr(o,i),c=l!=null;let u=n;c&&(u=HF(n,l,r),o=Or(o.length,i)),Qs("sum",o,i);const[h,d]=Fs(u.shape,o);let f=h;t&&(f=Pr(h,a));const p=Se(d),y=Se(n.shape)/p,g=Ge({inputs:{x:u},attrs:{shape:[y,p]},backend:r}),v=jD(n.dtype),b=E0(g,v,"sum",r),w=Ge({inputs:{x:b},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(b),c&&r.disposeIntermediateTensorInfo(u),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qF(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r;return aBe(s,i,a,t)}const oBe={kernelName:JC,backendName:"webgl",kernelFunc:qF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vi(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{perm:i}=r,a=t,o=s.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(a.shouldExecuteOnCPU([s])){const h=a.texData.get(s.dataId).values,d=WV(h,s.shape,s.dtype,i,l);c=a.makeTensorInfo(l,s.dtype);const f=a.texData.get(c.dataId);f.values=d}else c=HF(s,i,a);return c}const lBe={kernelName:yg,backendName:"webgl",kernelFunc:Vi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aie=1e3;function t_({a:n,b:e,transposeA:t,transposeB:r,backend:s,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const c=n.shape.length,u=e.shape.length,h=t?n.shape[c-2]:n.shape[c-1],d=r?e.shape[u-1]:e.shape[u-2],f=t?n.shape[c-1]:n.shape[c-2],p=r?e.shape[u-2]:e.shape[u-1],m=n.shape.slice(0,-2),y=e.shape.slice(0,-2),g=Se(m),v=Se(y),w=Nt(n.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);V(h===d,()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${n.shape} and ${e.shape} and transposeA=${t} and transposeB=${r} must match.`);const C=t?[g,h,f]:[g,f,h],I=r?[v,p,d]:[v,d,p],T=Ge({inputs:{x:n},backend:s,attrs:{shape:C}}),E=Ge({inputs:{x:e},backend:s,attrs:{shape:I}}),A=[T,E],N=Math.max(g,v),F=t?T.shape[1]:T.shape[2],_=i!=null,D=a!=null,R=l==="leakyrelu",B=l!=null?JS(l,!0):null,z=_||D||R||B!=null;let W;if((f===1||p===1)&&F>Aie&&z===!1){let H=T,se=E;t&&(H=Vi({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),A.push(H)),r&&(se=Vi({inputs:{x:E},backend:s,attrs:{perm:[0,2,1]}}),A.push(se));const q=p!==1,X=p===1;let fe=H;q&&(fe=Ge({inputs:{x:H},backend:s,attrs:{shape:[N,F,1]}}),A.push(fe));const de=p===1?2:1;let ue=se;X&&(ue=Ge({inputs:{x:se},backend:s,attrs:{shape:[N,1,F]}}),A.push(ue));const Ce=HV({inputs:{a:fe,b:ue},backend:s});W=qF({inputs:{x:Ce},backend:s,attrs:{axis:de,keepDims:!0}}),A.push(Ce)}else{const H=ca(n.dtype,e.dtype),se=new Iie(C,I,[N,f,p],t,r,_,B,D,R),q=[T,E];if(i!=null&&q.push(i),D&&q.push(a),R){const X=s.makeTensorInfo([],"float32",Yh(o,"float32"));q.push(X),A.push(X)}W=s.runWebGLProgram(se,q,H)}const K=Ge({inputs:{x:W},backend:s,attrs:{shape:w}});A.push(W);for(const H of A)s.disposeIntermediateTensorInfo(H);return K}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return t_({a:s,b:i,transposeA:l,transposeB:c,backend:t,bias:a,preluActivationWeights:o,leakyreluAlpha:h,activation:u})}const uBe={kernelName:MS,backendName:"webgl",kernelFunc:cBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SH="return abs(x);";function hBe(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=t.texData.get(r.dataId),a=xie(i.values);return t.makeTensorInfo(r.shape,r.dtype,a)}let s;return ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new uf(r.shape,SH):s=new ru(r.shape,SH),t.runWebGLProgram(s,[r],r.dtype)}const dBe={kernelName:sC,backendName:"webgl",kernelFunc:hBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fBe=kl+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,pBe=yn({opSnippet:fBe}),mBe={kernelName:jx,backendName:"webgl",kernelFunc:pBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe=kl+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,yBe=yn({opSnippet:gBe}),vBe={kernelName:Ux,backendName:"webgl",kernelFunc:yBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kH="return a + b;",xBe=ei({opSnippet:kH,packedOpSnippet:kH,supportsComplex:!0,cpuKernelImpl:N5e}),bBe={kernelName:p0,backendName:"webgl",kernelFunc:xBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wBe{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SBe{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CA(n){const{inputs:e,backend:t}=n,r=e;if(r.length===1)return Ua({inputs:{x:r[0]},backend:t});if(r.length>ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=CA({inputs:r.slice(0,l),backend:t}),u=CA({inputs:r.slice(l),backend:t});return CA({inputs:[c,u],backend:t})}const s=r.map(l=>l.dtype).reduce((l,c)=>ca(l,c)),i=r.map(l=>l.shape),o=ye().getBool("WEBGL_PACK")?new SBe(r[0].shape,i):new wBe(r[0].shape,i);return t.runWebGLProgram(o,r,s)}const kBe={kernelName:iC,backendName:"webgl",kernelFunc:CA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Kt(i,s.shape);let c=l;const u=vr(c,o);let h=s;u!=null&&(h=Vi({inputs:{x:s},backend:t,attrs:{perm:u}}),c=Or(c.length,o)),Qs("all",c,o);const[d,f]=Fs(h.shape,c),p=Se(f),m=Ge({inputs:{x:h},backend:t,attrs:{shape:[-1,p]}}),y=E0(m,m.dtype,"all",t);let g;if(a){const v=Pr(d,l);g=Ge({inputs:{x:y},backend:t,attrs:{shape:v}})}else g=Ge({inputs:{x:y},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(y),u!=null&&t.disposeIntermediateTensorInfo(h),g}const TBe={kernelName:LR,backendName:"webgl",kernelFunc:CBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Kt(i,s.shape);let c=l;const u=vr(c,o);let h=s;u!=null&&(h=Vi({inputs:{x:s},backend:t,attrs:{perm:u}}),c=Or(c.length,o)),Qs("any",c,o);const[d,f]=Fs(h.shape,c),p=Se(f),m=Ge({inputs:{x:h},backend:t,attrs:{shape:[-1,p]}}),y=E0(m,m.dtype,"any",t);let g;if(a){const v=Pr(d,l);g=Ge({inputs:{x:y},backend:t,attrs:{shape:v}})}else g=Ge({inputs:{x:y},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(y),u!=null&&t.disposeIntermediateTensorInfo(h),g}const IBe={kernelName:MR,backendName:"webgl",kernelFunc:EBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ABe{constructor(e,t,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const o=t==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NBe{constructor(e,t,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],a=Math.ceil(i/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=zn(l),u=$i("coords",l);let h,d;if(a===1){d=l+1;const E=zn(d);h=`
        ${E} sourceLocR = ${E}(${u.join()}, 0);
        ++${u[l-1]};
        ${E} sourceLocG = ${E}(${u.join()}, 0);
        ++${u[l-2]};
        ${E} sourceLocA = ${E}(${u.join()}, 0);
        --${u[l-1]};
        ${E} sourceLocB = ${E}(${u.join()}, 0);
        --${u[l-2]};`}else d=l,h=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,d),p="."+f[d-1],m=f.map(E=>"int "+E),y=$i("sourceLocR",d-1).concat("inIdx.r"),g=$i("sourceLocG",d-1).concat("inIdx.g"),v=$i("sourceLocB",d-1).concat("inIdx.b"),b=$i("sourceLocA",d-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",C=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,I=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,T=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${o[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${I};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${I};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nie(n,e,t,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const a=NF(i),o={windowSize:a,inSize:i,batchSize:s,outSize:Math.ceil(i/a)},l=new ABe(o,t,r==null),c=[e];r!=null&&c.push(r);const u=n.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const h=Nie(n,e,t,u);return n.disposeIntermediateTensorInfo(u),h}function _ie(n,e,t,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],a=NF(i),o=new NBe(s,a,t,r==null),l=r==null?[e]:[e,r],c=n.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const u=_ie(n,e,t,c);return n.disposeIntermediateTensorInfo(c),u}return c}function Rie(n,e,t,r){const s=[t];if(Qs("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!ye().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],a=n.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=n.unpackTensor(e),i.push(l));const[c,u]=Fs(l.shape,s),h=Se(u),d=Ge({inputs:{x:l},backend:n,attrs:{shape:[-1,h]}});i.push(d);const f=Nie(n,d,r);i.push(f);const p=Ge({inputs:{x:f},backend:n,attrs:{shape:c}});return i.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}return _ie(n,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i}=r;let a=Kt(i,s.shape);const o=vr(a,s.shape.length);let l=s;const c=[];o!=null&&(l=Vi({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),a=Or(a.length,l.shape.length)),Qs("argMax",[a[0]],l.shape.length);const u=Rie(t,l,a[0],"max");return c.forEach(h=>t.disposeIntermediateTensorInfo(h)),u}const RBe={kernelName:aC,backendName:"webgl",kernelFunc:_Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i}=r;let a=Kt(i,s.shape);const o=vr(a,s.shape.length);let l=s;const c=[];o!=null&&(l=Vi({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),a=Or(a.length,l.shape.length)),Qs("argMin",[a[0]],l.shape.length);const u=Rie(t,l,a[0],"min");return c.forEach(h=>t.disposeIntermediateTensorInfo(h)),u}const FBe={kernelName:oC,backendName:"webgl",kernelFunc:DBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PBe=kl+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,OBe=yn({opSnippet:PBe}),LBe={kernelName:Wx,backendName:"webgl",kernelFunc:OBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MBe=kl+"return log(x + sqrt(x * x + 1.0));",$Be=yn({opSnippet:MBe}),zBe={kernelName:Gx,backendName:"webgl",kernelFunc:$Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BBe=kl+`
  return atan(x);
`,VBe=yn({opSnippet:BBe}),jBe={kernelName:Hx,backendName:"webgl",kernelFunc:VBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UBe=GV+`
  return atan(a, b);
`,WBe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+T0+`
  return result;
`,GBe=ei({opSnippet:UBe,packedOpSnippet:WBe}),HBe={kernelName:Kx,backendName:"webgl",kernelFunc:GBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qBe=kl+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,KBe=yn({opSnippet:qBe}),XBe={kernelName:qx,backendName:"webgl",kernelFunc:KBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e2{constructor(e,t,r,s=!1,i=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=t==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const E=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?y:g:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(w="avgValue / max(count, 1.0)");const C=Math.floor(a/4)*4,I=a%4,T=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${C};
          if (${I===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${I===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${I===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${w});
      }
    `}}class qV{constructor(e,t,r,s=!1,i=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,h=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,y=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b=t==="avg";let w="0.0";if(b||(w="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${y}, ${g}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${N} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let I=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(I="avgValue / max(count, 1.0)");const T=Math.floor(a/4)*4,E=a%4,A=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${y}, ${g}, ${v});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${A}
            }

            int xC = xCCorner + ${T};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${A}
            }
          }
        }
        setOutput(${I});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;BT(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;V(Zs(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=wl(s.shape,i,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&Qt(u.inShape,u.outShape))return Ua({inputs:{x:s},backend:t});const h=new e2(u,"avg",!1);return t.runWebGLProgram(h,[s],"float32")}const ZBe={kernelName:lC,backendName:"webgl",kernelFunc:YBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],h=Zh(s.shape,i,a,u,o,l,c),d=new qV(h,"avg",!1);return t.runWebGLProgram(d,[s],"float32")}const JBe={kernelName:cC,backendName:"webgl",kernelFunc:QBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eVe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,h=c-1-e.padInfo.left,d=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${h});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class tVe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=h-1-e.padInfo.front,m=d-1-e.padInfo.top,y=f-1-e.padInfo.left,g=1/(t*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${y});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nVe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,h=[1,1,1],d=Zh(a.shape,o,l,h,c,u),f=new tVe(d);return t.runWebGLProgram(f,[s],a.dtype)}const rVe={kernelName:zR,backendName:"webgl",kernelFunc:nVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sVe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i}=e,a=i;BT([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=wl(a.shape,o,l,1,c),h=new eVe(u);return t.runWebGLProgram(h,[s],a.dtype)}const iVe={kernelName:$R,backendName:"webgl",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aVe(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;return t_({a:s,b:i,transposeA:a,transposeB:o,backend:t})}const oVe={kernelName:uC,backendName:"webgl",kernelFunc:aVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lVe{constructor(e,t,r,s,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Nt(e,t),Nt(e,r);let o="0.0";s!=null&&(Nt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";i!=null&&(Nt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cVe{constructor(e,t,r,s,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Nt(e,t),Nt(e,r);let o="vec4(0.0)";s!=null&&(Nt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(Nt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uVe=({inputs:n,backend:e,attrs:t})=>{const{x:r,mean:s,variance:i,offset:a,scale:o}=n;V(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=t;l==null&&(l=.001);const c=[r,s,i];let u=null;a!=null&&(u=a.shape,c.push(a));let h=null;o!=null&&(h=o.shape,c.push(o));const d=ye().getBool("WEBGL_PACK_NORMALIZATION")?new cVe(r.shape,s.shape,i.shape,u,h,l):new lVe(r.shape,s.shape,i.shape,u,h,l);return e.runWebGLProgram(d,c,c[0].dtype)},hVe={kernelName:kC,backendName:"webgl",kernelFunc:uVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dVe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=zn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=fVe(this.rank);let s;const i=e.map((a,o)=>`sourceLoc.${B4[o]} = start[${o}] + coords.${B4[o]};`);s=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const B4=["x","y","z","w","u","v"];function fVe(n){if(n===1)return"sourceLoc";if(n<=6)return B4.slice(0,n).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pVe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=zn(this.rank),r=$i("coords",this.rank),s=$i("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,a=`getChannel(getSource(${s.join()}), ${i})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${a};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((u,h)=>`start[${h}]`).join()});`:e.map((u,h)=>`${s[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mVe(n,e,t,r){const s=r.texData.get(n.dataId),i=r.makeTensorInfo(t,n.dtype),a=r.texData.get(i.dataId);Object.assign(a,s),a.refCount=1,a.shape=t,a.dtype=n.dtype;let o=BB(e,ht(n.shape));s.slice&&(o+=s.slice.flatOffset),a.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||n.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),i}function Qb(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:i,size:a}=r,[o,l]=AF(s,i,a);if(MB(s,o,l),Se(l)===0)return t.makeTensorInfo(l,s.dtype,[]);if(t.shouldExecuteOnCPU([s])||s.dtype==="string"){const h=t.texData.get(s.dataId),d=oze(h.values,o,l,s.shape,s.dtype);return t.makeTensorInfo(l,s.dtype,d)}const{isPacked:c}=t.texData.get(s.dataId),u=zB(s.shape,o,l);if(c||!u){const h=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pVe(l):new dVe(l),d=[o];return t.runWebGLProgram(h,[s],s.dtype,d)}return t.uploadToGPU(s.dataId),mVe(s,o,l,t)}const gVe={kernelName:QC,backendName:"webgl",kernelFunc:Qb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:i,crops:a}=r;V(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((v,b)=>v*b),l=IT(s.shape,i,o),c=AT(l.length,i.length),u=NT(s.shape,i,o),h=HB(a,i.length),d=qB(u,a,i.length),f=[],p=Ge({inputs:{x:s},backend:t,attrs:{shape:l}}),m=Vi({inputs:{x:p},backend:t,attrs:{perm:c}}),y=Ge({inputs:{x:m},backend:t,attrs:{shape:u}}),g=Qb({inputs:{x:y},backend:t,attrs:{begin:h,size:d}});return f.push(p),f.push(m),f.push(y),f.forEach(v=>t.disposeIntermediateTensorInfo(v)),g},vVe={kernelName:hC,backendName:"webgl",kernelFunc:yVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xVe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:i}=e,{size:a}=r,o=t.readSync(s.dataId),l=t.readSync(i.dataId),c=vie(o,l,i.dtype,i.shape,a);return t.makeTensorInfo([a],i.dtype,c)}const bVe={kernelName:BR,backendName:"webgl",kernelFunc:xVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wVe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,SVe=`
  return float(int(a.r) & int(b.r));
`;function kVe(n){const{inputs:e,backend:t}=n,{a:r,b:s}=e,i=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=ye().getNumber("WEBGL_VERSION");if(t.shouldExecuteOnCPU([r,s])||a===1){const l=t.texData.get(r.dataId).values,c=t.texData.get(s.dataId).values,[u,h]=R5e(r.shape,s.shape,l,c,r.dtype),d=t.makeTensorInfo(h,r.dtype),f=t.texData.get(d.dataId);return f.values=u,d}let o;return i?o=new Yb(wVe,r.shape,s.shape,!1):o=new Xg(SVe,r.shape,s.shape),t.runWebGLProgram(o,[r,s],r.dtype)}const CVe={kernelName:dC,backendName:"webgl",kernelFunc:kVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TVe(n){const{inputs:e,backend:t}=n,{s0:r,s1:s}=e,i=t.readSync(r.dataId),a=t.readSync(s.dataId),o=Nt(Array.from(i),Array.from(a));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const EVe={kernelName:VR,backendName:"webgl",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IVe="return float(a != b);",Die=ei({opSnippet:IVe,cpuKernelImpl:Q5e,dtype:"bool"}),AVe={kernelName:BC,backendName:"webgl",kernelFunc:Die};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.texData.get(r.dataId);return Ua({inputs:{x:s.complexTensorInfos.real},backend:t})}const NVe={kernelName:wD,backendName:"webgl",kernelFunc:jT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ve="return float(int(x));";function RVe(n,e){const t=new ru(n.shape,_Ve),r=e.runWebGLProgram(t,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Ua({inputs:{x:s},backend:t});const a=qr(s.shape),o=V4({inputs:{x:s},backend:t,attrs:{dtype:"float32"}}),l=Cp({inputs:{real:o,imag:a},backend:t});return a.dispose(),t.disposeIntermediateTensorInfo(o),l}if(s.dtype==="complex64"){const a=jT({inputs:{input:s},backend:t}),o=V4({inputs:{x:a},backend:t,attrs:{dtype:i}});return t.disposeIntermediateTensorInfo(a),o}if(!nz(s.dtype,i)){const a=Ua({inputs:{x:s},backend:t});return{dataId:a.dataId,shape:a.shape,dtype:i}}if(t.shouldExecuteOnCPU([s])){const a=t.texData.get(s.dataId).values,[o,l,c]=D5e(a,s.shape,s.dtype,i);return t.makeTensorInfo(o,l,c)}if(i==="int32")return RVe(s,t);if(i==="bool"){const a=t.makeTensorInfo([],"bool",_s("bool",1)),l=Die({inputs:{a:s,b:a},backend:t});return t.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const DVe={kernelName:Xx,backendName:"webgl",kernelFunc:V4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CH="return ceil(x);",FVe=yn({opSnippet:CH,packedOpSnippet:CH,cpuKernelImpl:F5e}),PVe={kernelName:Yx,backendName:"webgl",kernelFunc:FVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OVe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LVe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{clipValueMin:i,clipValueMax:a}=r;let o;ye().getBool("WEBGL_PACK_CLIP")?o=new LVe(s.shape):o=new OVe(s.shape);const l=[[i],[a]];return t.runWebGLProgram(o,[s],s.dtype,l)}const $Ve={kernelName:Zx,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zVe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TH(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}}function BVe(n){const{inputs:e,backend:t}=n,{x:r}=e,s=t.texData.get(r.dataId),i=new zVe(r.shape),a=[TH(r,s.complexTensorInfos.real),TH(r,s.complexTensorInfos.imag)];return t.runWebGLProgram(i,a,a[0].dtype)}const VVe={kernelName:fC,backendName:"webgl",kernelFunc:BVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jVe{constructor(e){this.outputShape=[],this.outputShape=uu(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];const r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<t.length;a++){const o=t[a-1];r.push(`else if (yC < ${t[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const s=t.length,i=t[t.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UVe{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=uu(e,t);const r=this.outputShape,s=r.length,i=zn(s),a=$i("coords",s),o=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,y)=>`T${y}`);const l=new Array(e.length-1);l[0]=e[0][t];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][t];const c=o[t],u=o.slice(-2),h=o.join();let d=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){const y=l[m-1];d+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${sI(o,c,y)}),
            vec2(${sI(u,c,y)}));
        }`}const f=l.length,p=l[l.length-1];d+=`
        return getChannel(
          getT${f}(${sI(o,c,p)}),
          vec2(${sI(u,c,p)}));`,this.userCode=`
      float getValue(${o.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[s-1]} = ${a[s-1]} + 1;
        if (${a[s-1]} < ${r[s-1]}) {
          result.g = getValue(${a});
        }

        ${a[s-2]} = ${a[s-2]} + 1;
        if (${a[s-2]} < ${r[s-2]}) {
          result.a = getValue(${a});
        }

        ${a[s-1]} = ${a[s-1]} - 1;
        if (${a[s-2]} < ${r[s-2]} &&
            ${a[s-1]} < ${r[s-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function sI(n,e,t){const r=n.indexOf(e);return n.map((i,a)=>a===r?`${i} - ${t}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KF(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.texData.get(r.dataId);return Ua({inputs:{x:s.complexTensorInfos.imag},backend:t})}const WVe={kernelName:oD,backendName:"webgl",kernelFunc:KF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1(n,e,t){const r=n[0].dtype;if(r==="complex64"){const f=n.map(v=>jT({inputs:{input:v},backend:t})),p=n.map(v=>KF({inputs:{input:v},backend:t})),m=C1(f,e,t),y=C1(p,e,t),g=Cp({inputs:{real:m,imag:y},backend:t});return f.forEach(v=>t.disposeIntermediateTensorInfo(v)),p.forEach(v=>t.disposeIntermediateTensorInfo(v)),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(y),g}let s=t.shouldExecuteOnCPU(n);if(r==="string"&&(s=!0),s){const f=n.map(w=>{const I=[-1,Se(w.shape.slice(e))];return Ge({inputs:{x:w},backend:t,attrs:{shape:I}})}),p=f.map(w=>({vals:t.readSync(w.dataId),shape:w.shape})),m=uu(f.map(w=>w.shape),1),y=f[0].shape[0]===1,g=P5e(p,m,r,y),v=uu(n.map(w=>w.shape),e),b=t.makeTensorInfo(v,r,g);return f.forEach(w=>t.disposeIntermediateTensorInfo(w)),b}const i=n.filter(f=>Se(f.shape)>0),a=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const f=a?new ru(n[0].shape,wd):new uf(n[0].shape,wd);return t.runWebGLProgram(f,n,r)}const o=ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const f=[];for(let m=0;m<i.length;m+=o){const y=i.slice(m,m+o);f.push(C1(y,e,t))}const p=C1(f,e,t);for(const m of f)t.disposeIntermediateTensorInfo(m);return p}if(a){const f=new UVe(i.map(p=>p.shape),e);return t.runWebGLProgram(f,i,r)}const{tensors2D:l,outShape:c}=GVe(i,e,t),u=new jVe(l.map(f=>f.shape)),h=t.runWebGLProgram(u,l,r);l.forEach(f=>t.disposeIntermediateTensorInfo(f));const d=Ge({inputs:{x:h},attrs:{shape:c},backend:t});return t.disposeIntermediateTensorInfo(h),d}function GVe(n,e,t){const r=uu(n.map(i=>i.shape),e);return{tensors2D:n.map(i=>Ge({inputs:{x:i},attrs:{shape:[-1,Se(i.shape.slice(e))]},backend:t})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fie(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r,i=Kt(s,e[0].shape)[0],a=e.map(c=>c.shape);UB(a,i);const o=uu(e.map(c=>c.shape),i);if(Se(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>Se(c.shape)>0);return l.length===1?Ua({inputs:{x:l[0]},backend:t}):C1(l,i,t)}const HVe={kernelName:pC,backendName:"webgl",kernelFunc:Fie};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pie{constructor(e,t=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,y=e.dataFormat==="channelsLast",g=y?1:2,v=y?2:3,b=y?3:1;let w="",C="";r&&(s?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const I=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${I}
        ${C}
        setOutput(result);
      }
    `}}class qVe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterDepth,d=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${o});
      const ivec3 pads = ivec3(${t}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oie{constructor(e,t=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=vi(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<u;y++)d+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;d+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<u;y++)d+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(h+1)/2;y++){const g=y*2;if(d+=`
           xC = xCCorner + ${g*l};
           `,o===1){if(g<u&&(a%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,l===1&&g>0?d+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<u)){const v=a%2===0?PR(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:d+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):v===1?d+=`
                     xC${g+1} = xTexelC${g};
                     `:d+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<u&&(a%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<u&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<u&&(d+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<u&&(d+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<u&&(d+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let f="",p="";r&&(s?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KVe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=vi(this.outputShape.length);const{dataFormat:r}=t,s=Wi(),i=r==="channelsLast",a=i?1:2,o=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_(n,e){const t=n.length;return t>=3?e?[...n.slice(0,-3),n[t-3]*n[t-2],n[t-1]]:[...n.slice(0,-3),n[t-3],n[t-2]*n[t-1]]:!e&&t===1&&n[0]>1?[n[0],1]:null}function Lie({x:n,filter:e,convInfo:t,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const l=n.shape,c=r.texData.get(n.dataId),u=t.inChannels,h=l[0]*l[1]*l[2],d=t.outChannels,f=t.dataFormat==="channelsLast",p=!1,m=!1;let y;const g=[];if(i!=null){const w=n_(i.shape,f);w!=null&&(i=Ge({inputs:{x:i},backend:r,attrs:{shape:w}}),g.push(i))}if(s!=null){const w=n_(s.shape,f);w!=null&&(s=Ge({inputs:{x:s},backend:r,attrs:{shape:w}}),g.push(s))}if(!((h===1||d===1)&&u>Aie)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&Qt(c.shape.slice(-3),l.slice(-3))){const w=l[0]*l[1]*(l[2]+1),C={dataId:n.dataId,shape:[1,w,t.inChannels],dtype:n.dtype},I=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,V(e_(c.shape,C.shape),()=>`packed reshape ${c.shape} to ${C.shape} isn't free`);const T=Ge({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}});g.push(T);const E=t_({a:C,b:T,backend:r,transposeA:p,transposeB:m,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a}),A=r.texData.get(E.dataId);V(A.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=I,A.shape=t.outShape,y=Ua({inputs:{x:E},backend:r}),y.shape=t.outShape,g.push(E)}else{const w=t.outHeight*t.outWidth,C=Ge({inputs:{x:n},backend:r,attrs:{shape:f?[t.batchSize,w,t.inChannels]:[t.batchSize,t.inChannels,w]}}),I=Ge({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}}),T=t_({a:f?C:I,b:f?I:C,transposeA:!f,transposeB:m,backend:r,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a});y=Ge({inputs:{x:T},backend:r,attrs:{shape:t.outShape}}),g.push(C),g.push(I),g.push(T)}for(const w of g)r.disposeIntermediateTensorInfo(w);return y}function Mie({x:n,filter:e,convInfo:t,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:h,outHeight:d,dataFormat:f}=t,p=f==="channelsLast",m=l*c*u,y=d*h,g=[t.batchSize,m,y],v=!0,b=!1,w=[];if(i!=null){const K=n_(i.shape,p);K!=null&&(i=Ge({inputs:{x:i},backend:r,attrs:{shape:K}}),w.push(i))}if(s!=null){const K=n_(s.shape,p);K!=null&&(s=Ge({inputs:{x:s},backend:r,attrs:{shape:K}}),w.push(s))}const C=Ge({inputs:{x:e},backend:r,attrs:{shape:[1,m,Se(e.shape)/m]}});w.push(C);const I=new KVe(g,t),T=[n.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]],E=r.runWebGLProgram(I,[n],"float32",T),A=Ge({inputs:{x:E},backend:r,attrs:{shape:g}});w.push(E),w.push(A);const N=s!=null,F=i!=null,_=o==="leakyrelu",D=o?JS(o,!0):null,R=new Iie(p?A.shape:C.shape,p?C.shape:A.shape,p?[t.batchSize,y,t.outChannels]:[t.batchSize,t.outChannels,y],v,b,N,D,F,_),B=p?[A,C]:[C,A];if(s&&B.push(s),F&&B.push(i),_){const K=r.makeTensorInfo([],"float32",Yh(a,"float32"));B.push(K),w.push(K)}const z=r.runWebGLProgram(R,B,"float32"),W=Ge({inputs:{x:z},backend:r,attrs:{shape:t.outShape}});w.push(z);for(const K of w)r.disposeIntermediateTensorInfo(K);return W}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=Qh(l),d=Ds(s.shape,i.shape,a,c,o,u,!1,h);let f;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))f=Lie({x:s,filter:i,convInfo:d,backend:t});else if(d.strideWidth<=2&&h==="channelsLast"&&ye().getBool("WEBGL_EXP_CONV")){const m=new Oie(d),y=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];f=t.runWebGLProgram(m,[s,i],"float32",y)}else if(ye().getBool("WEBGL_CONV_IM2COL"))f=Mie({x:s,filter:i,convInfo:d,backend:t});else{const m=new Pie(d);f=t.runWebGLProgram(m,[s,i],"float32")}const p=Ge({inputs:{x:f},backend:t,attrs:{shape:d.outShape}});return t.disposeIntermediateTensorInfo(f),p}const YVe={kernelName:mC,backendName:"webgl",kernelFunc:XVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class QVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=a?1:2,u=a?2:3,h=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class JVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eje{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=Qh(l),d=Ds(s.shape,u,a,1,o,c,!1,h),f=new ZVe(d);return t.runWebGLProgram(f,[s,i],"float32")}const nje={kernelName:UR,backendName:"webgl",kernelFunc:tje};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rje{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=vi(this.outputShape.length);const t=e.filterHeight,r=e.filterWidth,s=t-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sje(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=Qh(c),d=Ds(a,i.shape,o,1,l,u,!1,h);if(ye().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const f=[[d.strideHeight,d.strideWidth]],p=new rje(d);return t.runWebGLProgram(p,[s,i],"float32",f)}else{const f=new QVe(d);return t.runWebGLProgram(f,[s,i],"float32")}}const ije={kernelName:gC,backendName:"webgl",kernelFunc:sje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,c=yp(s.shape,i.shape,a,l,o),u=new qVe(c);return t.runWebGLProgram(u,[s,i],"float32")}const oje={kernelName:yC,backendName:"webgl",kernelFunc:aje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r,c=yp(s.shape,l,a,1,o),u=new JVe(c);return t.runWebGLProgram(u,[s,i],"float32")}const cje={kernelName:WR,backendName:"webgl",kernelFunc:lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uje(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r,c=yp(l,i.shape,o,1,a),u=new eje(c);return t.runWebGLProgram(u,[s,i],"float32")}const hje={kernelName:GR,backendName:"webgl",kernelFunc:uje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dje=Zb+`
  return cos(x);
`,fje=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${T0}
  return result;
`,pje=yn({opSnippet:dje,packedOpSnippet:fje}),mje={kernelName:Qx,backendName:"webgl",kernelFunc:pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gje=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,yje=yn({opSnippet:gje}),vje={kernelName:Jx,backendName:"webgl",kernelFunc:yje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xje{constructor(e,t,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,c]=e,[u]=t,[h,d]=r;this.outputShape=[u,h,d,c];const f=s==="bilinear"?1:0,[p,m]=[`${o-1}.0`,`${l-1}.0`],[y,g,v]=h>1?[`${(o-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,w,C]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${w};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bje=n=>{const{inputs:e,backend:t,attrs:r}=n,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,u=new xje(s.shape,i.shape,o,l,c);return t.runWebGLProgram(u,[s,i,a],"float32")},wje={kernelName:qR,backendName:"webgl",kernelFunc:bje};var t2;(function(n){n.Prod="*",n.Sum="+"})(t2||(t2={}));class EH{constructor(e,t,r,s){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===t2.Prod?"1.0":"0.0",o=r?a:`getX(${IH(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${zn(i)} coords = getOutputCoords();
        int end = ${AH(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${AH(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${IH(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function IH(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.x, ${e}.y`;if(n===3)return`${e}.x, ${e}.y, ${e}.z`;if(n===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}function AH(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.y`;if(n===3)return`${e}.z`;if(n===4)return`${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ie(n,e,t,r,s,i){const a=e.shape.length,o=vr([r],a);let l=e;o!=null&&(l=Vi({inputs:{x:e},backend:t,attrs:{perm:o}}));const c=Or(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let h=Ua({inputs:{x:l},backend:t});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const f=new EH(n,l.shape,!1,i),p=[[d]],m=h;h=t.runWebGLProgram(f,[h],h.dtype,p),t.disposeIntermediateTensorInfo(m)}if(s){const d=new EH(n,l.shape,s,i),f=h;h=t.runWebGLProgram(d,[h],h.dtype),t.disposeIntermediateTensorInfo(f)}if(o!=null){const d=vp(o),f=Vi({inputs:{x:h},backend:t,attrs:{perm:d}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(l),f}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return $ie(t2.Prod,s,t,i,a,o)}const kje={kernelName:HR,backendName:"webgl",kernelFunc:Sje};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return $ie(t2.Sum,s,t,i,a,o)}const Tje={kernelName:vC,backendName:"webgl",kernelFunc:Cje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=t.readSync(s.dataId),c=t.readSync(i.dataId),u=vie(l,c,i.dtype,i.shape,a);return t.makeTensorInfo([a],i.dtype,u)}else if(s.shape.length===2){const l=t.bufferSync(s),c=t.bufferSync(i),u=_5e(l,c,a,o);return t.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Ije={kernelName:KR,backendName:"webgl",kernelFunc:Eje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aje{constructor(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockSize:i,dataFormat:a}=r,o=s.shape[0],l=a==="NHWC"?s.shape[1]:s.shape[2],c=a==="NHWC"?s.shape[2]:s.shape[3],u=a==="NHWC"?s.shape[3]:s.shape[1],h=l*i,d=c*i,f=u/(i*i),p=a==="NHWC"?[o,h,d,f]:[o,f,h,d],m=new Aje(p,i,a);return t.runWebGLProgram(m,[s],s.dtype)}const _je={kernelName:XR,backendName:"webgl",kernelFunc:Nje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zie{constructor(e,t=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=vi(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const h=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bie{constructor(e,t=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=vi(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,d=h;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<h;g++)f+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let g=0;g<h;g++)f+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(d+1)/2;g++){const v=g*2;if(f+=`
          xC = xCCorner + ${v*c};
          `,l===1){if(v<h&&(o%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,c===1&&v>0?f+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<h)){const b=o%2===0?PR(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,c>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:f+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):b===1?f+=`
                    xC${v+1} = xTexelC${v};
                    `:f+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<h&&(o%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<h&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<h&&(f+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<h&&(f+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<h&&(f+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),V(Zs(a,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const h=Ds(s.shape,i.shape,a,u,o,c,!0);let d;ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?d=new Bie(h):d=new zie(h);const f=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return t.runWebGLProgram(d,[s,i],"float32",f)}const Dje={kernelName:xC,backendName:"webgl",kernelFunc:Rje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fje{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Pje{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,h=Ds(s.shape,u,a,o,l,c,!0),d=new Fje(h);return t.runWebGLProgram(d,[s,i],"float32")}const Lje={kernelName:YR,backendName:"webgl",kernelFunc:Oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mje(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,h=Ds(u,i.shape,a,o,l,c,!0),d=new Pje(h);return t.runWebGLProgram(d,[s,i],"float32")}const $je={kernelName:ZR,backendName:"webgl",kernelFunc:Mje};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zje{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bje(n){const{inputs:e,backend:t}=n,{x:r}=e,s=[...r.shape,...r.shape],i=Se(r.shape),a=Ge({inputs:{x:r},backend:t,attrs:{shape:[i]}}),o=new zje(i),l=t.runWebGLProgram(o,[a],a.dtype),c=Ge({inputs:{x:l},backend:t,attrs:{shape:s}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(l),c}const Vje={kernelName:QR,backendName:"webgl",kernelFunc:Bje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jje{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:r,padInfo:s,strideHeight:i,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:h,left:d}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${h}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,c=cT(s.shape,i.shape,a,o,"NHWC",l);let u;const h=new jje(c);u=t.runWebGLProgram(h,[s,i],"float32");const d=Ge({inputs:{x:u},backend:t,attrs:{shape:c.outShape}});return t.disposeIntermediateTensorInfo(u),d}const Wje={kernelName:bC,backendName:"webgl",kernelFunc:Uje};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gje(n){const{inputs:e,backend:t,attrs:r}=n,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=tV(s,i.length);rV(a.length,l,i);const{path:c,steps:u}=sV(o,l),h=u.length;let d=null,f=a.length;const p=[];for(let m=0;m<h;++m){for(const y of u[m]){const{permutationIndices:g,expandDims:v}=nV(f,l[y]);let b;iV(g)?b=i[y]:(b=Vi({inputs:{x:i[y]},backend:t,attrs:{perm:g}}),p.push(b));const w=b.shape.slice();for(let C=0;C<v.length;++C)w.splice(v[C],0,1);Qt(b.shape,w)||(b=Ge({inputs:{x:b},backend:t,attrs:{shape:w}}),p.push(b)),d===null?d=b:(d=HV({inputs:{a:b,b:d},backend:t}),p.push(d))}m<h-1&&(c[m]>=0&&(d=qF({inputs:{x:d},backend:t,attrs:{axis:c[m]-(a.length-f),keepDims:!1}}),p.push(d)),f--)}for(const m of p)m!==d&&t.disposeIntermediateTensorInfo(m);return d}const Hje={kernelName:eD,backendName:"webgl",kernelFunc:Gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qje="return (x >= 0.0) ? x : (exp(x) - 1.0);",Kje=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Xje=yn({opSnippet:qje,packedOpSnippet:Kje}),Yje={kernelName:tb,backendName:"webgl",kernelFunc:Xje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zje="return (b >= 0.0) ? a : a * (b + 1.0);",Qje=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Jje=n=>{const{inputs:e,backend:t}=n,{dy:r,y:s}=e,i=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Yb(Qje,r.shape,s.shape):new Xg(Zje,r.shape,s.shape);return t.runWebGLProgram(i,[r,s],r.dtype)},e6e={kernelName:tD,backendName:"webgl",kernelFunc:Jje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t6e=`
  return vec4(equal(a, b));
`,n6e="return float(a == b);",r6e=ei({opSnippet:n6e,packedOpSnippet:t6e,dtype:"bool",cpuKernelImpl:O5e}),s6e={kernelName:wC,backendName:"webgl",kernelFunc:r6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i6e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${KB};
  float a1 = ${XB};
  float a2 = ${YB};
  float a3 = ${ZB};
  float a4 = ${QB};
  float a5 = ${JB};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,a6e=yn({opSnippet:i6e}),o6e={kernelName:nb,backendName:"webgl",kernelFunc:a6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6e=Zb+`
  return exp(x);
`,c6e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Vie=yn({opSnippet:l6e,packedOpSnippet:c6e,cpuKernelImpl:L5e,dtype:"float32"}),u6e={kernelName:rb,backendName:"webgl",kernelFunc:Vie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4(n){const{inputs:e,attrs:t,backend:r}=n,{dim:s}=t,{input:i}=e,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(V(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Ge({inputs:{x:i},backend:r,attrs:{shape:o}})}const h6e={kernelName:SC,backendName:"webgl",kernelFunc:j4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NH="return exp(x) - 1.0;",d6e=yn({opSnippet:NH,packedOpSnippet:NH,cpuKernelImpl:M5e}),f6e={kernelName:sb,backendName:"webgl",kernelFunc:d6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _H{constructor(e,t,r){this.variableNames=["real","imag"];const s=t[1];this.outputShape=t;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${s}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jie(n,e,t){const r=t.texData.get(n.dataId),s=Se(n.shape),i=n.shape[n.shape.length-1],a=s/i,o=Ge({inputs:{x:n},backend:t,attrs:{shape:[a,i]}}),l=o.shape,c=new _H("real",l,e),u=new _H("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=t.runWebGLProgram(c,h,"float32"),f=t.runWebGLProgram(u,h,"float32"),p=Cp({inputs:{real:d,imag:f},backend:t});t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f);const m=Ge({inputs:{x:p},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(n){const{inputs:e,backend:t}=n,{input:r}=e;return jie(r,!1,t)}const m6e={kernelName:nD,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g6e{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UT(n){const{backend:e,attrs:t}=n,{shape:r,value:s}=t;let{dtype:i}=t;if(i=i||d0(s),i==="string"){const a=Tr(i,Se(r));return a.fill(s),e.makeTensorInfo(r,i,a)}else{const a=new g6e(r,s),o=[[s]];return e.runWebGLProgram(a,[],i,o)}}const y6e={kernelName:rD,backendName:"webgl",kernelFunc:UT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v6e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x6e={kernelName:sD,backendName:"webgl",kernelFunc:({inputs:n,backend:e})=>{const{image:t}=n,r=e,s=new v6e(t.shape);return r.runWebGLProgram(s,[t],t.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RH="return floor(x);",b6e=yn({opSnippet:RH,packedOpSnippet:RH,cpuKernelImpl:$5e}),w6e={kernelName:ib,backendName:"webgl",kernelFunc:b6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,k6e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,C6e=ei({opSnippet:S6e,packedOpSnippet:k6e,dtype:"int32"}),T6e={kernelName:ab,backendName:"webgl",kernelFunc:C6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E6e{constructor(e){this.variableNames=["A"];const t=Wi(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I6e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=Wi(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6e={kernelName:PN,backendName:"webgl",kernelFunc:N6e};let W0,qO=ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function N6e(n){const{inputs:e,backend:t,attrs:r}=n;let{pixels:s}=e;const{numChannels:i}=r,a=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=a?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],h=[c,l,i];if(o||a){const m=ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(W0==null||m!==qO)&&(qO=m,W0=document.createElement("canvas").getContext("2d",{willReadFrequently:qO})),W0.canvas.width=l,W0.canvas.height=c,W0.drawImage(s,0,0,l,c),s=W0.canvas}const d=t.makeTensorInfo(u,"int32");t.texData.get(d.dataId).usage=xo.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(d.dataId),s);const f=ye().getBool("WEBGL_PACK")?new I6e(h):new E6e(h),p=t.runWebGLProgram(f,[d],"int32");return t.disposeData(d.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:f,leakyreluAlpha:p}=r,m=Qh(u),y=Ds(s.shape,i.shape,l,h,c,d,!1,m);let g;const v=[],b=a!=null,w=o!=null,C=f==="leakyrelu",I=()=>{const E=[s,i],A=(N,F)=>{if(F==="NCHW"&&N.shape.length===1&&N.shape[0]!==1){const _=Ge({inputs:{x:N},backend:t,attrs:{shape:[N.shape[0],1,1]}});return v.push(_),_}return N};if(b&&E.push(A(a,u)),w&&E.push(A(o,u)),C){const N=t.makeTensorInfo([],"float32",Yh(p,"float32"));E.push(N),v.push(N)}return E};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))g=Lie({x:s,filter:i,convInfo:y,backend:t,bias:a,activation:f,preluActivationWeights:o,leakyreluAlpha:p});else if(y.strideWidth<=2&&m==="channelsLast"&&ye().getBool("WEBGL_EXP_CONV")){const E=f?JS(f,!0):null,A=new Oie(y,b,E,w,C),N=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],F=I();g=t.runWebGLProgram(A,F,"float32",N)}else if(ye().getBool("WEBGL_CONV_IM2COL"))g=Mie({x:s,filter:i,convInfo:y,backend:t,bias:a,activation:f,preluActivationWeights:o,leakyreluAlpha:p});else{const E=f?JS(f,!1):null,A=new Pie(y,b,E,w,C),N=I();g=t.runWebGLProgram(A,N,"float32")}const T=Ge({inputs:{x:g},backend:t,attrs:{shape:y.outShape}});return v.push(g),v.forEach(E=>t.disposeIntermediateTensorInfo(E)),T}const R6e={kernelName:$S,backendName:"webgl",kernelFunc:_6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:f}=r,p=[];let m=u;m==null&&(m=[1,1]),V(Zs(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const y=Ds(s.shape,i.shape,l,m,c,h,!0),g=ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,v=d?JS(d,g):null,b=[s,i],w=a!=null,C=o!=null,I=d==="leakyrelu";if(w&&b.push(a),C&&b.push(o),I){const N=t.makeTensorInfo([],"float32",Yh(f,"float32"));b.push(N),p.push(N)}let T;g?T=new Bie(y,w,v,C,I):T=new zie(y,w,v,C,I);const E=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],A=t.runWebGLProgram(T,b,"float32",E);return p.forEach(N=>t.disposeIntermediateTensorInfo(N)),A}const F6e={kernelName:zS,backendName:"webgl",kernelFunc:D6e};class P6e{constructor(e,t,r,s){this.sliceDim=e,this.strides=t,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=zn(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(n){const{inputs:e,backend:t}=n,{params:r,indices:s}=e,i=s.shape,a=i[i.length-1],o=Se(r.shape),[l,c,u,h]=IF(r,s),d=Ge({inputs:{x:s},backend:t,attrs:{shape:[c,a]}}),f=Ge({inputs:{x:r},backend:t,attrs:{shape:[Se(r.shape)/u,u]}});if(t.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const g=t.readSync(s.dataId),v=t.bufferSync(r),b=z5e(g,v,r.dtype,c,a,u,h,r.shape,o);return t.makeTensorInfo(l,r.dtype,b.values)}const p=new P6e(a,h,[c,u],r.shape),m=t.runWebGLProgram(p,[f,d],f.dtype),y=Ge({inputs:{x:m},backend:t,attrs:{shape:l}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(m),y}const L6e={kernelName:iD,backendName:"webgl",kernelFunc:O6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M6e{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const r=zn(this.rank),s=$6e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function $6e(n,e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<n.length;s++)s===2?r.push("index"):r.push(`${t[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,indices:i}=e,{axis:a,batchDims:o}=r,l=Kt(a,s.shape)[0];if(ye().get("DEBUG")){const v=t.readSync(i.dataId),b=s.shape[l];for(let w=0;w<v.length;++w){const C=v[w];V(C<=b-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${b-1}]`)}}const c=oV(s,i,l,o),u=Se(i.shape),h=[],d=Ge({inputs:{x:s},backend:t,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=Ge({inputs:{x:i},backend:t,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(d),h.push(f);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(t.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const v=t.bufferSync(f),b=t.bufferSync(d),w=B5e(b,v,p);return h.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.makeTensorInfo(c.outputShape,w.dtype,w.values)}const m=new M6e(d.shape,p),y=t.runWebGLProgram(m,[d,f],d.dtype);h.push(y);const g=Ge({inputs:{x:y},backend:t,attrs:{shape:c.outputShape}});return h.forEach(v=>t.disposeIntermediateTensorInfo(v)),g}const z6e={kernelName:CC,backendName:"webgl",kernelFunc:Uie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6e="return float(a > b);",V6e=`
  return vec4(greaterThan(a, b));
`,j6e=ei({opSnippet:B6e,packedOpSnippet:V6e,cpuKernelImpl:V5e,dtype:"bool"}),U6e={kernelName:TC,backendName:"webgl",kernelFunc:j6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6e="return float(a >= b);",G6e=`
  return vec4(greaterThanEqual(a, b));
`,H6e=ei({opSnippet:W6e,packedOpSnippet:G6e,dtype:"bool",cpuKernelImpl:j5e}),q6e={kernelName:ob,backendName:"webgl",kernelFunc:H6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(n){const{inputs:e,backend:t}=n,{input:r}=e;return jie(r,!0,t)}const X6e={kernelName:aD,backendName:"webgl",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e="return float(!isnan(x) && !isinf(x));",Z6e=yn({opSnippet:Y6e,dtype:"bool"}),Q6e={kernelName:cb,backendName:"webgl",kernelFunc:Z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6e="return float(isinf(x));",eUe=yn({opSnippet:J6e,dtype:"bool"}),tUe={kernelName:ub,backendName:"webgl",kernelFunc:eUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nUe="return float(isnan(x));",rUe=yn({opSnippet:nUe,dtype:"bool"}),sUe={kernelName:hb,backendName:"webgl",kernelFunc:rUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iUe="return float(a < b);",aUe=`
  return vec4(lessThan(a, b));
`,oUe=ei({opSnippet:iUe,packedOpSnippet:aUe,cpuKernelImpl:U5e,dtype:"bool"}),lUe={kernelName:IC,backendName:"webgl",kernelFunc:oUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cUe="return float(a <= b);",uUe=`
  return vec4(lessThanEqual(a, b));
`,hUe=ei({opSnippet:cUe,packedOpSnippet:uUe,cpuKernelImpl:W5e,dtype:"bool"}),dUe={kernelName:AC,backendName:"webgl",kernelFunc:hUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fUe(n){const{backend:e,attrs:t}=n,{start:r,stop:s,num:i}=t,a=G5e(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const pUe={kernelName:lD,backendName:"webgl",kernelFunc:fUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mUe=Zb+`
  return x < 0.0 ? 0./0. : log(x);
`,gUe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,yUe=yn({opSnippet:mUe,packedOpSnippet:gUe,cpuKernelImpl:H5e}),vUe={kernelName:db,backendName:"webgl",kernelFunc:yUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xUe=Zb+`
  return log(1.0 + x);
`,bUe=yn({opSnippet:xUe}),wUe={kernelName:fb,backendName:"webgl",kernelFunc:bUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SUe="return float(a >= 1.0 && b >= 1.0);",kUe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,CUe=ei({opSnippet:SUe,packedOpSnippet:kUe,dtype:"bool"}),TUe={kernelName:NC,backendName:"webgl",kernelFunc:CUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EUe="return float(!(x >= 1.0));",IUe=yn({opSnippet:EUe}),AUe={kernelName:_C,backendName:"webgl",kernelFunc:IUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NUe="return float(a >= 1.0 || b >= 1.0);",_Ue=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,RUe=ei({opSnippet:NUe,packedOpSnippet:_Ue,dtype:"bool"}),DUe={kernelName:RC,backendName:"webgl",kernelFunc:RUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FUe{constructor(e,t,r,s,i){this.variableNames=["x"],this.outputShape=[];const a=t,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PUe{constructor(e,t,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OUe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r,c=ye().getBool("WEBGL_PACK_NORMALIZATION")?new PUe(s.shape,i,a,o,l):new FUe(s.shape,i,a,o,l);return t.runWebGLProgram(c,[s],s.dtype)},LUe={kernelName:DC,backendName:"webgl",kernelFunc:OUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MUe{constructor(e,t,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ue=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r,h=new MUe(s.shape,o,l,c,u);return t.runWebGLProgram(h,[s,i,a],s.dtype)},zUe={kernelName:cD,backendName:"webgl",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BUe(n,e,t,r){const s=Se(e),a=Se(n.shape)/s,o=Ge({inputs:{x:n},attrs:{shape:[a,s]},backend:r}),l=E0(o,n.dtype,"max",r),c=Ge({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=s.shape.length,l=Kt(i,s.shape);let c=l;const u=vr(c,o),h=u!=null,d=t.shouldExecuteOnCPU([s]);let f=s;if(h){if(d){const b=t.texData.get(f.dataId).values,w=new Array(o);for(let T=0;T<w.length;T++)w[T]=s.shape[u[T]];const C=WV(b,s.shape,s.dtype,u,w);f=t.makeTensorInfo(w,s.dtype);const I=t.texData.get(f.dataId);I.values=C}else f=HF(s,u,t);c=Or(c.length,o)}Qs("max",c,o);const[p,m]=Fs(f.shape,c);let y=p;a&&(y=Pr(p,l));let g;if(d){const b=t.texData.get(f.dataId).values,w=q5e(b,Se(m),y,s.dtype);g=t.makeTensorInfo(y,s.dtype);const C=t.texData.get(g.dataId);C.values=w}else g=BUe(f,m,y,t);return h&&t.disposeIntermediateTensorInfo(f),g}const VUe={kernelName:FC,backendName:"webgl",kernelFunc:Wie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jUe=GV+`
  return max(a, b);
`,UUe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+T0+`
  return result;
`,WUe=ei({opSnippet:jUe,packedOpSnippet:UUe,cpuKernelImpl:K5e}),GUe={kernelName:pb,backendName:"webgl",kernelFunc:WUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;BT(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;V(Zs(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=wl(s.shape,i,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&Qt(u.inShape,u.outShape))return Ua({inputs:{x:s},backend:t});const h=new e2(u,"max",!1);return t.runWebGLProgram(h,[s],s.dtype)}const qUe={kernelName:PC,backendName:"webgl",kernelFunc:HUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:i,strides:a,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],h=Zh(s.shape,i,a,u,o,c,l),d=new qV(h,"max",!1);return t.runWebGLProgram(d,[s],s.dtype)}const XUe={kernelName:OC,backendName:"webgl",kernelFunc:KUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YUe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,l=a-1-e.padInfo.left,c=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class ZUe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,h=l-1-e.padInfo.front,d=c-1-e.padInfo.top,f=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${d}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,h=[1,1,1],d=Zh(a.shape,o,l,h,c,u),f=new qV(d,"max",!0),p=t.runWebGLProgram(f,[a],a.dtype),m=new ZUe(d),y=t.runWebGLProgram(m,[s,p],a.dtype);return t.disposeIntermediateTensorInfo(p),y}const JUe={kernelName:hD,backendName:"webgl",kernelFunc:QUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:i,output:a}=e,o=i;BT([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=wl(o.shape,l,c,1,u,h),f=!0,p=new e2(d,"max",f),m=t.runWebGLProgram(p,[o],o.dtype),y=new YUe(d),g=t.runWebGLProgram(y,[s,m],o.dtype);return t.disposeIntermediateTensorInfo(m),g}const t8e={kernelName:uD,backendName:"webgl",kernelFunc:e8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(n,e,t,r){let s=new e2(t,"max",!1);const i=r.runWebGLProgram(s,[n],"float32");s=new e2(t,"max",!0,!0,e);const a=r.runWebGLProgram(s,[n],"float32");return[i,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8e={kernelName:dD,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=t;V(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];V(Zs(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=wl(r.shape,s,i,c,a),[h,d]=n8e(r,o,u,l);return[h,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8e(n,e,t,r){const s=Se(e),a=Se(n.shape)/s,o=Ge({inputs:{x:n},attrs:{shape:[a,s]},backend:r}),l=E0(o,"float32","mean",r),c=Ge({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8e={kernelName:LC,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{keepDims:s,axis:i}=e,a=t,o=r.shape.length,l=Kt(i,r.shape);let c=l;const u=vr(c,o),h=u!=null,d=a.shouldExecuteOnCPU([r]),f=[];let p=r;if(h){if(d){const w=a.texData.get(p.dataId).values,C=new Array(o);for(let E=0;E<C.length;E++)C[E]=r.shape[u[E]];const I=WV(w,r.shape,r.dtype,u,C);p=a.makeTensorInfo(C,r.dtype);const T=a.texData.get(p.dataId);T.values=I}else p=HF(r,u,a);f.push(p),c=Or(c.length,o)}Qs("sum",c,o);const[m,y]=Fs(p.shape,c);let g=m;s&&(g=Pr(m,l));const v=s8e(p,y,g,a);for(const b of f)a.disposeIntermediateTensorInfo(b);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Kt(i,s.shape);let c=l;const u=vr(c,o);let h=s;u!=null&&(h=Vi({inputs:{x:s},backend:t,attrs:{perm:u}}),c=Or(c.length,s.shape.length)),Qs("min",c,o);const[d,f]=Fs(h.shape,c),p=Se(f),m=Ge({inputs:{x:h},backend:t,attrs:{shape:[-1,p]}}),y=E0(m,m.dtype,"min",t);let g;if(a){const v=Pr(d,l);g=Ge({inputs:{x:y},backend:t,attrs:{shape:v}})}else g=Ge({inputs:{x:y},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(y),u!=null&&t.disposeIntermediateTensorInfo(h),g}const o8e={kernelName:MC,backendName:"webgl",kernelFunc:a8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8e=GV+`
  return min(a, b);
`,c8e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+T0+`
  return result;
`,u8e=ei({opSnippet:l8e,packedOpSnippet:c8e,cpuKernelImpl:X5e}),h8e={kernelName:mb,backendName:"webgl",kernelFunc:u8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d8e{constructor(e,t,r){this.variableNames=["x"],this.outputShape=t.map((u,h)=>u[0]+e[h]+u[1]);const s=e.length,i=zn(s),a=t.map(u=>u[0]).join(","),o=t.map((u,h)=>u[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f8e{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,i=zn(s),a=t.map(p=>p[0]).join(","),o=t.map((p,m)=>p[0]+e[m]).join(","),l=$i("rc",s),c=$i("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,d=r==="reflect"?0:1;let f="";if(s===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[s-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p8e=({inputs:n,backend:e,attrs:t})=>{const{x:r}=n,{paddings:s,mode:i}=t,a=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new f8e(r.shape,s,i):new d8e(r.shape,s,i);return e.runWebGLProgram(a,[r],r.dtype)},m8e={kernelName:$C,backendName:"webgl",kernelFunc:p8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8e=`if (b == 0.0) return NAN;
  return mod(a, b);`,y8e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+T0+`
  return result;
`,v8e=ei({opSnippet:g8e,packedOpSnippet:y8e}),x8e={kernelName:gb,backendName:"webgl",kernelFunc:v8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b8e{constructor(e,t,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w8e=`
if (a == b) {
  return 1.0;
};
return a / b;`,S8e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Gie=ei({opSnippet:w8e,packedOpSnippet:S8e,checkOutOfBounds:!0}),k8e={kernelName:eb,backendName:"webgl",kernelFunc:Gie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DH="return a - b;",Hie=ei({opSnippet:DH,packedOpSnippet:DH,supportsComplex:!0,cpuKernelImpl:gze}),C8e={kernelName:Db,backendName:"webgl",kernelFunc:Hie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qie(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{dim:i}=r,a=Kt([i],s.shape),o=Wie({inputs:{x:s},backend:t,attrs:{reductionIndices:a,keepDims:!1}}),l=Pr(o.shape,a),c=Ge({inputs:{x:o},backend:t,attrs:{shape:l}}),u=Hie({inputs:{a:s,b:c},backend:t}),h=Vie({inputs:{x:u},backend:t}),d=qF({inputs:{x:h},backend:t,attrs:{axis:a,keepDims:!1}}),f=Ge({inputs:{x:d},backend:t,attrs:{shape:l}}),p=Gie({inputs:{a:h,b:f},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),p}const T8e={kernelName:nT,backendName:"webgl",kernelFunc:qie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8e(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r,l=o?s:qie({inputs:{logits:s},backend:t,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new b8e(c,u,i),d=[[a]],f=t.runWebGLProgram(h,[l],"int32",d);return o||t.disposeIntermediateTensorInfo(l),f}const I8e={kernelName:fD,backendName:"webgl",kernelFunc:E8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8e=kl+`
  return -x;
`,N8e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function _8e(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])){const i=t.texData.get(r.dataId),[a,o]=Z5e(i.values,r.shape,r.dtype);return t.makeTensorInfo(o,r.dtype,a)}let s;return ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new uf(r.shape,N8e):s=new ru(r.shape,A8e),t.runWebGLProgram(s,[r],r.dtype)}const R8e={kernelName:zC,backendName:"webgl",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D8e=kF;function F8e(n){ho("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,c=t.readSync(s.dataId),u=t.readSync(i.dataId),{selectedIndices:h}=D8e(c,u,a,o,l);return t.makeTensorInfo([h.length],"int32",new Int32Array(h))}const P8e={kernelName:pD,backendName:"webgl",kernelFunc:F8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8e=CF;function L8e(n){ho("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=t.readSync(s.dataId),h=t.readSync(i.dataId),{selectedIndices:d,validOutputs:f}=O8e(u,h,a,o,l,c);return[t.makeTensorInfo([d.length],"int32",new Int32Array(d)),t.makeTensorInfo([],"int32",new Int32Array([f]))]}const M8e={kernelName:mD,backendName:"webgl",kernelFunc:L8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $8e=TF;function z8e(n){ho("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=t.readSync(s.dataId),h=t.readSync(i.dataId),d=a,f=o,p=l,m=c,{selectedIndices:y,selectedScores:g}=$8e(u,h,d,f,p,m);return[t.makeTensorInfo([y.length],"int32",new Int32Array(y)),t.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const B8e={kernelName:gD,backendName:"webgl",kernelFunc:z8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V8e{constructor(e,t,r,s){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8e=n=>{const{inputs:e,backend:t,attrs:r}=n,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r,c=Se(s.shape),u=new V8e(c,a,o,l),h=Ge({inputs:{x:s},backend:t,attrs:{shape:[c]}}),d=t.runWebGLProgram(u,[h],i);t.disposeIntermediateTensorInfo(h);const f=[...s.shape,a],p=Ge({inputs:{x:d},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(d),p},U8e={kernelName:jC,backendName:"webgl",kernelFunc:j8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="complex64"){const s=jT({inputs:{input:r},backend:t}),i=r_({inputs:{x:s},backend:t}),a=KF({inputs:{input:r},backend:t}),o=r_({inputs:{x:a},backend:t}),l=Cp({inputs:{real:i,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return UT({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:t})}const W8e={kernelName:aT,backendName:"webgl",kernelFunc:r_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kie(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=jT({inputs:{input:r},backend:t}),i=Kie({inputs:{x:s},backend:t}),a=KF({inputs:{input:r},backend:t}),o=r_({inputs:{x:a},backend:t}),l=Cp({inputs:{real:i,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return UT({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:t})}const G8e={kernelName:VC,backendName:"webgl",kernelFunc:Kie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8e(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r;if(e.length===1)return j4({inputs:{input:e[0]},backend:t,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(u=>{Ys(i,u.shape,"All tensors passed to stack must have matching shapes"),V(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const h=j4({inputs:{input:u},backend:t,attrs:{dim:s}});return o.push(h),h}),c=Fie({inputs:l,backend:t,attrs:{axis:s}});return o.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}const q8e={kernelName:UC,backendName:"webgl",kernelFunc:H8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K8e{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=zn(s),a=t.map(c=>c[0]).join(","),o=t.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X8e{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((m,y)=>m[0]+e[y]+m[1]);const s=e.length,i=zn(s),a=t.map(m=>m[0]).join(","),o=t.map((m,y)=>m[0]+e[y]).join(","),l=$i("rc",s),c=$i("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,y=s===1?2:4;m<y;m++)p+=`
        ${d[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${h});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xie=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:i,constantValue:a}=r;if(Se(s.shape)===0){const c=i.map((u,h)=>u[0]+s.shape[h]+u[1]);return UT({backend:t,attrs:{shape:c,value:a,dtype:s.dtype}})}const o=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new X8e(s.shape,i,a):new K8e(s.shape,i,a),l=[[a]];return t.runWebGLProgram(o,[s],s.dtype,l)},Y8e={kernelName:WC,backendName:"webgl",kernelFunc:Xie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z8e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Q8e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+T0+`
  return result;
`,J8e=ei({opSnippet:Z8e,packedOpSnippet:Q8e}),eWe={kernelName:vb,backendName:"webgl",kernelFunc:J8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=[],c=Kt(i,s.shape);let u=c;const h=vr(u,o);let d=s;h!=null&&(d=Vi({inputs:{x:s},backend:t,attrs:{perm:h}}),u=Or(u.length,o),l.push(d)),Qs("prod",u,o);let f;if(t.shouldExecuteOnCPU([d])){const p=t.texData.get(d.dataId).values,{outVals:m,outShape:y,outDtype:g}=J5e(d.shape,d.dtype,p,u);f=t.makeTensorInfo(y,g,m)}else{const[p,m]=Fs(d.shape,u),y=Se(m),g=Ge({inputs:{x:d},backend:t,attrs:{shape:[-1,y]}}),v=jD(s.dtype),b=E0(g,v,"prod",t);f=Ge({inputs:{x:b},backend:t,attrs:{shape:p}}),l.push(g),l.push(b)}if(a){l.push(f);const p=Pr(f.shape,c);f=Ge({inputs:{x:f},backend:t,attrs:{shape:p}})}return l.forEach(p=>t.disposeIntermediateTensorInfo(p)),f}const nWe={kernelName:HC,backendName:"webgl",kernelFunc:tWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rWe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(g=>t.readSync(g.dataId)),c=s.map(g=>g.shape),u=t.readSync(i.dataId),h=t.readSync(a.dataId),[d,f,p]=eze(l,c,u,i.shape,i.dtype,h,a.shape,o),m=d.map(g=>t.makeTensorInfo([g.length],"int32",g)),y=t.makeTensorInfo(p,i.dtype,f);return m.concat([y])}const sWe={kernelName:yD,backendName:"webgl",kernelFunc:rWe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iWe(n){const{inputs:e,backend:t}=n,{starts:r,limits:s,deltas:i}=e,a=t.readSync(r.dataId),o=t.readSync(s.dataId),l=t.readSync(i.dataId),[c,u]=tze(a,r.shape,r.dtype,o,s.shape,l,i.shape),h=t.makeTensorInfo([c.length],"int32",c),d=t.makeTensorInfo([u.length],r.dtype,u);return[h,d]}const aWe={kernelName:vD,backendName:"webgl",kernelFunc:iWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oWe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=t.readSync(s.dataId),u=t.readSync(i.dataId),h=t.readSync(a.dataId),d=o.map(y=>t.readSync(y.dataId)),f=o.map(y=>y.shape),[p,m]=nze(c,s.shape,u,i.shape,i.dtype,h,a.shape,d,f,l);return t.makeTensorInfo(p,i.dtype,m)}const lWe={kernelName:xD,backendName:"webgl",kernelFunc:oWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yie=n=>{const{backend:e,attrs:t}=n,{start:r,stop:s,step:i,dtype:a}=t,o=rze(r,s,i,a);return e.makeTensorInfo([o.length],a,o)},cWe={kernelName:bD,backendName:"webgl",kernelFunc:Yie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uWe="return 1.0 / x;",hWe=yn({opSnippet:uWe}),dWe={kernelName:xb,backendName:"webgl",kernelFunc:hWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fWe=kl+`
  return (x < 0.0) ? 0.0 : x;
`,pWe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mWe=yn({opSnippet:fWe,packedOpSnippet:pWe}),gWe={kernelName:bb,backendName:"webgl",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yWe=kl+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,vWe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xWe=yn({opSnippet:yWe,packedOpSnippet:vWe}),bWe={kernelName:wb,backendName:"webgl",kernelFunc:xWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wWe{constructor(e,t,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SWe{constructor(e,t,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kWe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,c]=o,u=ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new SWe(s.shape,l,c,i,a):new wWe(s.shape,l,c,i,a);return t.runWebGLProgram(u,[s],"float32")}const CWe={kernelName:XC,backendName:"webgl",kernelFunc:kWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TWe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,s,i]=t,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],h=l[1]/c[1],d=1/u,f=1/h,p=Math.ceil(d)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EWe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:i}=e,{alignCorners:a}=r,o=new TWe(i.shape,s.shape,a);return t.runWebGLProgram(o,[i],i.dtype)}const IWe={kernelName:kD,backendName:"webgl",kernelFunc:EWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AWe{constructor(e,t,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r],d=s?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NWe{constructor(e,t,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r],d=s?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _We(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,c]=o,u=ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new NWe(s.shape,l,c,i,a):new AWe(s.shape,l,c,i,a);return t.runWebGLProgram(u,[s],s.dtype)}const RWe={kernelName:KC,backendName:"webgl",kernelFunc:_We};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DWe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,s,i]=t,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],h=l[1]/c[1],d=1/u,f=1/h,p=Math.ceil(d)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FWe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:i}=e,{alignCorners:a}=r,o=new DWe(i.shape,s.shape,a);return t.runWebGLProgram(o,[i],i.dtype)}const PWe={kernelName:SD,backendName:"webgl",kernelFunc:FWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OWe{constructor(e,t){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=o=>t.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,i=e.map((o,l)=>s(l)).join(","),a=zn(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LWe{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=$i("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,o=zn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${a}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${h(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return d(p)}function c(p){return p[r-1]="("+p[r-1]+" + 1)",d(p)}function u(p){return p[r-2]="("+p[r-2]+" + 1)",d(p)}function h(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",d(p)}function d(p){const m=e.map((v,b)=>f(b,p)),y=m.join(","),g=m.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${g}))`}function f(p,m){return t.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dims:i}=r,a=s.shape.length,o=Kt(i,s.shape);if(a===0)return Ua({inputs:{x:s},backend:t});const l=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LWe(s.shape,o):new OWe(s.shape,o);return t.runWebGLProgram(l,[s],s.dtype)}const $We={kernelName:YC,backendName:"webgl",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zWe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof t=="number"?i=`float outputValue = ${t.toFixed(2)};`:i=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BWe={kernelName:BD,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:s,fillValue:i,center:a}=e,o=t,l=new zWe(r.shape,i),[c,u]=GB(a,r.shape[1],r.shape[2]),h=[[c,u,Math.sin(s),Math.cos(s)]];return o.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VWe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,jWe=yn({opSnippet:VWe}),UWe={kernelName:Sb,backendName:"webgl",kernelFunc:jWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WWe="return inversesqrt(x);",GWe=yn({opSnippet:WWe,cpuKernelImpl:sze}),HWe={kernelName:kb,backendName:"webgl",kernelFunc:GWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KV{constructor(e,t,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=zn(i.length),u=zn(a.length);let h="";r===1?h="i":r===2&&(h="i, j");const d=`getIndices(${h})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=t>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qWe{constructor(e,t,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=zn(i.length),u=zn(a.length);let h="";r===1?h="i":r===2&&(h="i, j");const d=`getIndices(${h})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=t>1?"strides[j]":"strides",v=t>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KWe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=wp(i,s,a),d=[h/c,c];if(h===0)return t.makeTensorInfo(a,s.dtype);const f=Ge({inputs:{x:s},backend:t,attrs:{shape:[l,o]}}),p=Ge({inputs:{x:i},backend:t,attrs:{shape:[l,c]}}),m=t.makeTensorInfo([],"float32",new Float32Array([0]));let y;ye().getBool("WEBGL_PACK")?y=new qWe(l,o,f.shape.length,p.shape.length,u,d):y=new KV(l,o,f.shape.length,p.shape.length,u,d);const g=t.runWebGLProgram(y,[p,f,m],p.dtype),v=Ge({inputs:{x:g},backend:t,attrs:{shape:a}});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(m),v}const XWe={kernelName:CD,backendName:"webgl",kernelFunc:KWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YWe{constructor(e,t,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,o=ye().getNumber("WEBGL_VERSION")===2?i:a,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZWe(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:s,values:i}=e,{side:a}=r,o=new YWe(s.shape[0],s.shape[1],i.shape[1],a),l=[[s.shape[1]]];return t.runWebGLProgram(o,[s,i],"int32",l)}const QWe={kernelName:ED,backendName:"webgl",kernelFunc:ZWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JWe{constructor(e,t,r){this.variableNames=["c","a","b"],this.outputShape=t;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<t.length;u++)c.push(`${o[u]}`),u<e&&l.push(`${o[u]}`);s=l.join(),i=c.join()}const a=zn(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eGe(n){const{inputs:e,backend:t}=n,{condition:r,t:s,e:i}=e,a=new JWe(r.shape.length,s.shape,s.shape.length);return t.runWebGLProgram(a,[r,s,i],ca(s.dtype,i.dtype))}const tGe={kernelName:ZC,backendName:"webgl",kernelFunc:eGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nGe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${_F};
  float scale = ${RF};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,rGe=yn({opSnippet:nGe}),sGe={kernelName:Cb,backendName:"webgl",kernelFunc:rGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe=Zb+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,aGe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oGe=yn({opSnippet:iGe,packedOpSnippet:aGe,cpuKernelImpl:aze}),lGe={kernelName:Ab,backendName:"webgl",kernelFunc:oGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cGe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,uGe=yn({opSnippet:cGe}),hGe={kernelName:Ib,backendName:"webgl",kernelFunc:uGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dGe=Zb+`
  return sin(x);
`,fGe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${T0}
  return result;
`,pGe=yn({opSnippet:dGe,packedOpSnippet:fGe}),mGe={kernelName:Tb,backendName:"webgl",kernelFunc:pGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gGe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,yGe=yn({opSnippet:gGe}),vGe={kernelName:Eb,backendName:"webgl",kernelFunc:yGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xGe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,bGe=yn({opSnippet:xGe}),wGe={kernelName:Nb,backendName:"webgl",kernelFunc:bGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SGe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:i,paddings:a}=r;V(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((g,v)=>g*v),l=[[0,0]];l.push(...a);for(let g=1+i.length;g<s.shape.length;++g)l.push([0,0]);const c=[],u=Xie({inputs:{x:s},backend:t,attrs:{paddings:l,constantValue:0}}),h=IT(u.shape,i,o,!1),d=AT(h.length,i.length,!1),f=NT(u.shape,i,o,!1),p=Ge({inputs:{x:u},backend:t,attrs:{shape:h}}),m=Vi({inputs:{x:p},backend:t,attrs:{perm:d}}),y=Ge({inputs:{x:m},backend:t,attrs:{shape:f}});return c.push(u),c.push(p),c.push(m),c.forEach(g=>t.disposeIntermediateTensorInfo(g)),y},kGe={kernelName:eT,backendName:"webgl",kernelFunc:SGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CGe(n){const{inputs:e,backend:t}=n,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=t.readSync(r.dataId),l=t.readSync(s.dataId),c=t.readSync(i.dataId),u=t.readSync(a.dataId)[0],[h,d,f,p,m]=lze(o,r.shape,r.dtype,l,s.dtype,c,u);return[t.makeTensorInfo(d,r.dtype,h),t.makeTensorInfo([d[0]],s.dtype,f),t.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),t.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const TGe={kernelName:ID,backendName:"webgl",kernelFunc:CGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EGe(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(t.readSync(s.dataId)),o=t.readSync(r.dataId),l=Array.from(t.readSync(i.dataId)),[c,u,h]=cze(o,r.shape,r.dtype,a,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const IGe={kernelName:AD,backendName:"webgl",kernelFunc:EGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AGe(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const a=t.readSync(r.dataId),o=t.readSync(s.dataId),l=t.readSync(i.dataId),[c,u]=bie(a,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(u,r.dtype,c)}const NGe={kernelName:ND,backendName:"webgl",kernelFunc:AGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ge(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const a=t.readSync(r.dataId),o=t.readSync(s.dataId),l=t.readSync(i.dataId),[c,u]=bie(a,r.shape,r.dtype,o,l);return t.makeTensorInfo(u,r.dtype,c)}const RGe={kernelName:_D,backendName:"webgl",kernelFunc:_Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DGe(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=wp(i,s,o),f=!1;if(i.dtype==="string"){const g=t.bufferSync(s),v=t.bufferSync(i),b=Dh(t.readSync(a.dataId)[0]),w=ize(g,v,o,d,u,c,l,h,b,f);return t.makeTensorInfo(o,w.dtype,w.values)}const p=new KV(c,l,s.shape.length,i.shape.length,h,[d,1],f),m=t.runWebGLProgram(p,[i,s,a],i.dtype),y=Ge({inputs:{x:m},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(m),y}const FGe={kernelName:RD,backendName:"webgl",kernelFunc:DGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PGe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=Kt(a,s.shape)[0],l=aV(s,i,o),c=s.shape.length,u=new Array(c).fill(0),h=s.shape.slice();return l.map(d=>{const f=[...h];f[o]=d;const p=Qb({inputs:{x:s},backend:t,attrs:{begin:u,size:f}});return u[o]+=d,p})}const OGe={kernelName:tT,backendName:"webgl",kernelFunc:PGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FH="return sqrt(x);",LGe=yn({opSnippet:FH,packedOpSnippet:FH,cpuKernelImpl:uze}),MGe={kernelName:_b,backendName:"webgl",kernelFunc:LGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ge="return x * x;",zGe=yn({opSnippet:$Ge}),BGe={kernelName:DD,backendName:"webgl",kernelFunc:zGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PH="return (a - b) * (a - b);",VGe=ei({opSnippet:PH,packedOpSnippet:PH}),jGe={kernelName:Rb,backendName:"webgl",kernelFunc:VGe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UGe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=t.readSync(s.dataId),a=Mh(i),o=hze(a,"string",r);return t.makeTensorInfo(s.shape,"string",o)}const WGe={kernelName:rT,backendName:"webgl",kernelFunc:UGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GGe({inputs:n,attrs:e,backend:t}){const{x:r}=n,s=kl+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new ru(r.shape,s);return t.runWebGLProgram(i,[r],r.dtype)}const HGe={kernelName:Lb,backendName:"webgl",kernelFunc:GGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qGe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=zn(r.length),a=zn(r.length);let o="";if(s===1)o="coords * strides + begin";else{let l=0;o=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${t});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KGe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:b,strides:w}=VB(s.shape,i,a,o,l,c,u,h,d);let C;if(m)C=Ge({inputs:{x:s},backend:t,attrs:{shape:p}});else if(y||g){V(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const T=$B(v,b,w),E=Qb({inputs:{x:s},backend:t,attrs:{begin:v,size:T}});C=Ge({inputs:{x:E},backend:t,attrs:{shape:p}}),t.disposeIntermediateTensorInfo(E)}else if(t.shouldExecuteOnCPU([s])){const E=t.readSync(s.dataId),A=Vt(s.shape,s.dtype,E),N=dze(f,A,w,v);C=t.makeTensorInfo(p,s.dtype,N.values)}else{const E=new qGe(v,w,f);C=t.runWebGLProgram(E,[s],s.dtype)}const I=Ge({inputs:{x:C},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(C),I}const XGe={kernelName:FD,backendName:"webgl",kernelFunc:KGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YGe(n){const{inputs:e,backend:t,attrs:r}=n,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=e,d=t.readSync(u.dataId),f=t.readSync(h.dataId),[p,m]=fze(d,f,s,i,a,o,l,c);return[t.makeTensorInfo([p.length],"string",p),t.makeTensorInfo(h.shape,"int32",m)]}const ZGe={kernelName:PD,backendName:"webgl",kernelFunc:YGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QGe(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=t.readSync(i.dataId),l=t.readSync(a.dataId)[0],[c,u,h]=pze(o,l,s),d=u.length;return[t.makeTensorInfo([d,2],"int32",c),t.makeTensorInfo([d],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(h))]}const JGe={kernelName:OD,backendName:"webgl",kernelFunc:QGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eHe(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=t.readSync(i.dataId),o=mze(a,s);return t.makeTensorInfo(i.shape,"int32",o)}const tHe={kernelName:LD,backendName:"webgl",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe="return tan(x);",rHe=yn({opSnippet:nHe}),sHe={kernelName:Fb,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iHe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,aHe=yn({opSnippet:iHe}),oHe={kernelName:Pb,backendName:"webgl",kernelFunc:aHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lHe(n){const{inputs:e,backend:t,attrs:r}=n,{tensor:s,indices:i,updates:a}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=wp(a,i,s.shape),d=[h/c,c];if(h===0)return t.makeTensorInfo(s.shape,i.dtype);const f=Ge({inputs:{x:i},backend:t,attrs:{shape:[l,o]}}),p=Ge({inputs:{x:a},backend:t,attrs:{shape:[l,c]}}),m=Ge({inputs:{x:s},backend:t,attrs:{shape:d}}),y=new KV(l,o,f.shape.length,p.shape.length,u,d,!1,!0),g=t.runWebGLProgram(y,[p,f,m],m.dtype),v=Ge({inputs:{x:g},backend:t,attrs:{shape:s.shape}});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),v}const cHe={kernelName:TD,backendName:"webgl",kernelFunc:lHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uHe{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*t[a];this.outputShape=r,this.rank=r.length;const s=zn(this.rank),i=hHe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function hHe(n){const e=n.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${n[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<n.length;s++)r.push(`imod(${t[s]}, ${n[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=t.readSync(s.dataId),c=s.dtype==="string"?l.map(d=>Dh(d)):l,u=Vt(s.shape,s.dtype,c),h=yze(u,i);return t.makeTensorInfo(h.shape,h.dtype,h.values)}const a=new uHe(s.shape,i);return t.runWebGLProgram(a,[s],s.dtype)}const dHe={kernelName:Ob,backendName:"webgl",kernelFunc:Zie};class fHe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class pHe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lp(n,e){e!==null&&n.disposeIntermediateTensorInfo(e)}function OH(n){let e=1;for(;e<n;)e*=2;return e}function mHe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{k:i,sorted:a}=r,o=ye().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ye().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(t.shouldExecuteOnCPU([s])||u<o||i>l){const N=t.readSync(s.dataId),[F,_]=vze(N,c,s.dtype,i,a);return[t.makeTensorInfo(F.shape,F.dtype,F.values),t.makeTensorInfo(_.shape,_.dtype,_.values)]}if(i===0)return c[c.length-1]=0,[t.makeTensorInfo(c,s.dtype,[]),t.makeTensorInfo(c,"int32",[])];if(u===1)return[s,UT({attrs:{shape:c,dtype:"int32",value:0},backend:t})];const h=t.texData.get(s.dataId),d=h!==null&&h.isPacked,f=d?t.unpackTensor(s):s,m=Se(c)/u,y=Ge({inputs:{x:f},attrs:{shape:[m,u]},backend:t});d&&Lp(t,f);const g=OH(i),v=OH(u);let b=null;const w=()=>b===null?[y,y]:[y,b],C=(N,F,_)=>{const D=w(),R=new fHe(_),z=[[u],[b===null?1:0],[Number.NEGATIVE_INFINITY],[N],[F]],W=b;b=t.runWebGLProgram(R,D,"int32",z),Lp(t,W)};for(let N=1;N<g;N*=2){const F=N*2;for(let _=N;_>=1;_/=2)C(F,_,[m,v])}for(let N=v;N>g;N/=2){const F=w(),_=new pHe([m,N/2]),R=[[u],[b===null?1:0],[g]],B=b;b=t.runWebGLProgram(_,F,"int32",R),Lp(t,B);const z=g/2,W=z*2;for(let K=z;K>=1;K/=2)C(W,K,b.shape)}let I=b;b=Qb({inputs:{x:b},backend:t,attrs:{begin:0,size:[m,i]}}),Lp(t,I);let T=Uie({inputs:{x:y,indices:b},backend:t,attrs:{axis:1,batchDims:1}});Lp(t,y);const E=c.slice(0,-1);E.push(i),I=b,b=Ge({inputs:{x:b},attrs:{shape:E},backend:t}),Lp(t,I);const A=T;return T=Ge({inputs:{x:T},attrs:{shape:E},backend:t}),Lp(t,A),[T,b]}const gHe={kernelName:MD,backendName:"webgl",kernelFunc:mHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yHe{constructor(e,t,r,s,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(n){const{inputs:e,backend:t,attrs:r}=n,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=r,[u,h,d,f]=s.shape,[p,m]=c??[h,d],y=[u,p,m,f],g=new yHe(h,d,a,o,l,y);return t.runWebGLProgram(g,[s,i],"float32")}const xHe={kernelName:$D,backendName:"webgl",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bHe(n){const{inputs:e,attrs:t,backend:r}=n,{axis:s}=t,{x:i}=e;BT(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:c}=xze(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const wHe={kernelName:zD,backendName:"webgl",kernelFunc:bHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SHe(n){const{inputs:e,backend:t,attrs:r}=n,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s,o=a.shape.length,l=s.shape[i],c=new Array(o-1);let u=0;for(let m=0;m<o;m++)m!==i&&(c[u++]=a.shape[m]);const h=[],d=new Array(o).fill(0),f=a.shape.slice();f[i]=1;const p=new Array(l);for(let m=0;m<p.length;m++){d[i]=m;const y=Qb({inputs:{x:a},backend:t,attrs:{begin:d,size:f}}),g=Ge({inputs:{x:y},backend:t,attrs:{shape:c}});p[m]=g,h.push(y)}return h.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}const kHe={kernelName:sT,backendName:"webgl",kernelFunc:SHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CHe{constructor(e,t){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/r);this.outputShape=[s,o];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,h=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function THe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,segmentIds:i}=e,{numSegments:a}=r,o=s.shape.length,l=[];let c=0;const u=vr([c],o);let h=s;u!=null&&(h=Vi({inputs:{x:s},backend:t,attrs:{perm:u}}),l.push(h),c=Or(1,o)[0]);const d=Ete(h.shape,c,a),f=Se([h.shape[c]]),p=Ge({inputs:{x:h},backend:t,attrs:{shape:[-1,f]}});l.push(p);const m=jD(s.dtype),y=(w,C,I,T,E)=>{const A=w.shape[0],N=w.shape[1],F=Tte(N,E),_={windowSize:F,inSize:N,batchSize:A,numSegments:E},D=new CHe(_,C),R=t.compileAndRun(D,[w,I],T);if(l.push(R),R.shape[1]===E)return R;const B=Yie({backend:t,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),z=Zie({inputs:{x:B},backend:t,attrs:{reps:[N/F]}});return l.push(B),l.push(z),y(R,C,z,T,E)},g=y(p,"unsortedSegmentSum",i,m,a),v=Ge({inputs:{x:g},backend:t,attrs:{shape:d}});let b=v;if(u!=null){l.push(v);const w=vp(u);b=Vi({inputs:{x:b},backend:t,attrs:{perm:w}})}return l.forEach(w=>t.disposeIntermediateTensorInfo(w)),b}const EHe={kernelName:iT,backendName:"webgl",kernelFunc:THe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IHe=[uBe,dBe,mBe,vBe,bBe,kBe,TBe,IBe,RBe,FBe,LBe,zBe,jBe,HBe,XBe,ZBe,JBe,rVe,iVe,oVe,hVe,vVe,bVe,CVe,EVe,DVe,PVe,$Ve,qze,VVe,HVe,YVe,nje,ije,oje,cje,hje,mje,vje,wje,kje,Tje,Ije,_je,Dje,Lje,$je,Vje,Wje,Hje,Yje,e6e,s6e,o6e,u6e,h6e,f6e,m6e,y6e,x6e,w6e,T6e,A6e,R6e,F6e,L6e,z6e,U6e,q6e,Hze,X6e,WVe,Q6e,tUe,sUe,Xze,lUe,dUe,pUe,vUe,wUe,TUe,AUe,DUe,LUe,zUe,VUe,GUe,qUe,XUe,JUe,t8e,r8e,i8e,o8e,h8e,m8e,x8e,I8e,Qze,R8e,P8e,M8e,B8e,AVe,U8e,G8e,q8e,Y8e,eWe,Zze,nWe,sWe,aWe,lWe,cWe,NVe,k8e,dWe,gWe,bWe,eBe,CWe,IWe,RWe,PWe,$We,BWe,UWe,HWe,XWe,QWe,tGe,sGe,lGe,hGe,mGe,vGe,gVe,T8e,wGe,kGe,TGe,IGe,NGe,RGe,FGe,OGe,MGe,BGe,jGe,WGe,HGe,XGe,ZGe,JGe,tHe,C8e,oBe,sHe,oHe,cHe,dHe,gHe,xHe,lBe,wHe,kHe,EHe,W8e];for(const n of IHe)VD(n);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U4=function(n,e){return U4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},U4(n,e)};function Qie(n,e){U4(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Rc=function(){return Rc=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Rc.apply(this,arguments)};function su(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((r=r.apply(n,[])).next())})}function iu(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jie(n){var e=n.shape[2],t=Hf(n,2),r=ae(t,[-1]);return Ug(r,e)}function AHe(n,e){return ie(n,e)}function iI(n,e){return he(function(){return Be(Ui(n,lt(e)),"int32")})}function NHe(n,e){var t=e.shape,r=t[0],s=t[1],i=t[2];return he(function(){var a=Jie(e),o=Hr(Oh(0,i,1,"int32"),1),l=Be(zt(a,o),"int32"),c=ae(l,[r,s]),u=Re(c,lt(1,"int32"));return Ye(AHe(u,n),lt(1,"int32"))})}function _He(n){var e=n.shape,t=e[0],r=e[1],s=e[2];return he(function(){var i=Jie(n),a=Hr(Oh(0,s,1,"int32"),1),o=Be(zt(i,a),"int32");return ae(o,[t,r])})}/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var eae=function(){function n(e,t){this.model=e,this.outputStride=t;var r=this.model.inputs[0].shape;V(r[1]===-1&&r[2]===-1,function(){return"Input shape [".concat(r[1],", ").concat(r[2],"] ")+"must both be equal to or -1"})}return n.prototype.predict=function(e){var t=this;return he(function(){var r=t.preprocessInput(Be(e,"float32")),s=Hr(r,0),i=t.model.predict(s),a=i.map(function(l){return Pa(l,[0])}),o=t.nameOutputResults(a);return{heatmapScores:Co(o.heatmap),offsets:o.offsets,displacementFwd:o.displacementFwd,displacementBwd:o.displacementBwd,segmentation:o.segmentation,partHeatmaps:o.partHeatmaps,longOffsets:o.longOffsets,partOffsets:o.partOffsets}})},n.prototype.dispose=function(){this.model.dispose()},n}();/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var RHe=function(n){Qie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.preprocessInput=function(t){return he(function(){return Ye(at(t,127.5),1)})},e.prototype.nameOutputResults=function(t){var r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7];return{offsets:r,segmentation:s,partHeatmaps:i,longOffsets:a,heatmap:o,displacementFwd:l,displacementBwd:c,partOffsets:u}},e}(eae);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var XF=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Xl=XF.length,s_=XF.reduce(function(n,e,t){return n[e]=t,n},{}),DHe=[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]],FHe=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]];DHe.map(function(n){var e=n[0],t=n[1];return[s_[e],s_[t]]});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XV(n,e,t){var r=n[0],s=n[1],i=e[0],a=e[1],o=t.top,l=t.bottom,c=t.left,u=t.right,h=i/(o+l+r),d=a/(c+u+s);return[d,h]}function tae(n,e,t,r){return{y:r.get(n,e,t),x:r.get(n,e,t+Xl)}}function nae(n,e,t){var r=n.heatmapY,s=n.heatmapX,i=n.id,a=tae(r,s,i,t),o=a.y,l=a.x;return{x:n.heatmapX*e+l,y:n.heatmapY*e+o}}function LH(n,e,t){return n<e?e:n>t?t:n}function PHe(n,e,t,r){var s=t-n,i=r-e;return s*s+i*i}function MH(n,e){return{x:n.x+e.x,y:n.y+e.y}}/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OHe(n,e,t){t===void 0&&(t=.3);for(var r=0,s=0,i=0;i<n.length;i++)e.keypoints[i].score>t&&(s+=1,r+=Math.pow(n[i].x-e.keypoints[i].position.x,2)+Math.pow(n[i].y-e.keypoints[i].position.y,2));return s===0?r=1/0:r=r/s,r}function LHe(n,e,t,r){var s=e[0],i=e[1],a=t[0],o=t[1],l=Math.round(((s+n.y+1)*o-1)/r),c=Math.round(((i+n.x+1)*a-1)/r);return{x:c,y:l}}function MHe(n,e,t,r,s,i,a){for(var o=a[0],l=a[1],c=t(n),u=c.y*r+c.x,h=s[Xl*(2*u)+e],d=s[Xl*(2*u+1)+e],f=n.y+h,p=n.x+d,m=0;m<i;m++){f=Math.min(f,o-1),p=Math.min(p,l-1);var y=t({x:p,y:f}),g=y.y*r+y.x;h=s[Xl*(2*g)+e],d=s[Xl*(2*g+1)+e],f=f+h,p=p+d}return{x:p,y:f}}function rae(n,e,t,r,s,i,a,o,l,c){for(var u=s[0],h=s[1],d=i[0],f=i[1],p=o[0],m=o[1],y=[],g=function(E){return LHe(E,[u,h],[d,f],l)},v=0;v<r;v++){var b=MHe(n,v,g,a,e,c,[p,m]);y.push(b)}for(var w=-1,C=1/0,I=0;I<t.length;I++){var T=OHe(y,t[I]);T<C&&(w=I,C=T)}return w}function sae(n,e){var t=n[0],r=n[1],s=Math.round((r-1)/e+1),i=Math.round((t-1)/e+1);return[s,i]}function $He(n,e,t,r,s,i,a,o,l,c){var u=a[0],h=a[1];c===void 0&&(c=5);for(var d=t.map(function(E){return new Uint8Array(r*s).fill(0)}),f=o.top,p=o.left,m=XV([r,s],[u,h],o),y=m[0],g=m[1],v=sae([u,h],i)[0],b=0;b<r;b+=1)for(var w=0;w<s;w+=1){var C=b*s+w,I=n[C];if(I===1){var T=rae({x:w,y:b},e,t,c,[f,p],[y,g],v,[r,s],i,l);T>=0&&(d[T][C]=1)}}return d}function zHe(n,e,t,r,s,i,a,o,l,c,u){var h=o[0],d=o[1];u===void 0&&(u=5);for(var f=r.map(function(A){return new Int32Array(s*i).fill(-1)}),p=l.top,m=l.left,y=XV([s,i],[h,d],l),g=y[0],v=y[1],b=sae([h,d],a)[0],w=0;w<s;w+=1)for(var C=0;C<i;C+=1){var I=w*i+C,T=n[I];if(T===1){var E=rae({x:C,y:w},e,r,u,[p,m],[g,v],b,[s,i],a,c);E>=0&&(f[E][I]=t[I])}}return f}/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(n,e,t,r,s,i,a,o,l,c,u){for(var h=a[0],d=a[1],f=n.shape,p=f[0],m=f[1],y=e.shape.slice(0,2),g=y[0],v=y[1],b=ae(e,[g,v,2,Xl]),w=new Float32Array(u*Xl*3).fill(0),C=0;C<t.length;C++)for(var I=C*Xl*3,T=t[C],E=0;E<Xl;E++){var A=T.keypoints[E],N=I+E*3;w[N]=A.score,w[N+1]=A.position.y,w[N+2]=A.position.x}var F=XV([r,s],[h,d],o),_=F[0],D=F[1],R=ko(w,[u,Xl,3]),B=o.top,z=o.left,W={variableNames:["segmentation","longOffsets","poses"],outputShape:[p,m],userCode:`
    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {
      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));
    }

    float convertToPositionInOutputFloat(
        int pos, int pad, float scale, int stride) {
      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);
    }

    float dist(float x1, float y1, float x2, float y2) {
      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);
    }

    float sampleLongOffsets(float h, float w, int d, int k) {
      float fh = fract(h);
      float fw = fract(w);
      int clH = int(ceil(h));
      int clW = int(ceil(w));
      int flH = int(floor(h));
      int flW = int(floor(w));
      float o11 = getLongOffsets(flH, flW, d, k);
      float o12 = getLongOffsets(flH, clW, d, k);
      float o21 = getLongOffsets(clH, flW, d, k);
      float o22 = getLongOffsets(clH, clW, d, k);
      float o1 = mix(o11, o12, fw);
      float o2 = mix(o21, o22, fw);
      return mix(o1, o2, fh);
    }

    int findNearestPose(int h, int w) {
      float prob = getSegmentation(h, w);
      if (prob < 1.0) {
        return -1;
      }

      // Done(Tyler): convert from output space h/w to strided space.
      float stridedH = convertToPositionInOutputFloat(
        h, `.concat(B,", ").concat(D,", ").concat(i,`);
      float stridedW = convertToPositionInOutputFloat(
        w, `).concat(z,", ").concat(_,", ").concat(i,`);

      float minDist = 1000000.0;
      int iMin = -1;
      for (int i = 0; i < `).concat(u,`; i++) {
        float curDistSum = 0.0;
        int numKpt = 0;
        for (int k = 0; k < `).concat(Xl,`; k++) {
          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);
          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);

          float y = float(h) + dy;
          float x = float(w) + dx;

          for (int s = 0; s < `).concat(l,`; s++) {
            int yRounded = round(min(y, float(`).concat(r-1,`)));
            int xRounded = round(min(x, float(`).concat(s-1,`)));

            float yStrided = convertToPositionInOutputFloat(
              yRounded, `).concat(B,", ").concat(D,", ").concat(i,`);
            float xStrided = convertToPositionInOutputFloat(
              xRounded, `).concat(z,", ").concat(_,", ").concat(i,`);

            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);
            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);

            y = y + dy;
            x = x + dx;
          }

          float poseScore = getPoses(i, k, 0);
          float poseY = getPoses(i, k, 1);
          float poseX = getPoses(i, k, 2);
          if (poseScore > `).concat(c,`) {
            numKpt = numKpt + 1;
            curDistSum = curDistSum + dist(x, y, poseX, poseY);
          }
        }
        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {
          minDist = curDistSum / float(numKpt);
          iMin = i;
        }
      }
      return iMin;
    }

    void main() {
        ivec2 coords = getOutputCoords();
        int nearestPose = findNearestPose(coords[0], coords[1]);
        setOutput(float(nearestPose));
      }
  `)},K=UD();return K.compileAndRun(W,[n,b,R])}/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BHe(n,e){return he(function(){return Be(za(n,lt(e)),"int32")})}function VHe(n,e,t){return he(function(){return Ye(ie(Be(za(n,lt(t)),"int32"),Re(e,1)),1)})}function aae(){return dz()==="webgl"}function jHe(n,e,t,r,s,i,a,o,l,c,u,h){var d=a[0],f=a[1];return l===void 0&&(l=.2),c===void 0&&(c=8),u===void 0&&(u=.3),h===void 0&&(h=10),su(this,void 0,void 0,function(){var p,m,y,g,v;return iu(this,function(b){switch(b.label){case 0:return p=t.filter(function(w){return w.score>=l}),aae()?(y=he(function(){var w=iae(n,e,p,r,s,i,[d,f],o,c,u,h),C=lo().makeTensorFromDataId(w.dataId,w.shape,w.dtype);return p.map(function(I,T){return BHe(C,T)})}),[4,Promise.all(y.map(function(w){return w.data()}))]):[3,2];case 1:return m=b.sent(),y.forEach(function(w){return w.dispose()}),[3,5];case 2:return[4,n.data()];case 3:return g=b.sent(),[4,e.data()];case 4:v=b.sent(),m=$He(g,v,p,r,s,i,[d,f],o,c),b.label=5;case 5:return[2,m.map(function(w,C){return{data:w,pose:p[C],width:s,height:r}})]}})})}function UHe(n,e,t,r,s,i,a,o,l,c,u,h,d){var f=o[0],p=o[1];return c===void 0&&(c=.2),u===void 0&&(u=8),h===void 0&&(h=.3),d===void 0&&(d=10),su(this,void 0,void 0,function(){var m,y,g,v,b,w;return iu(this,function(C){switch(C.label){case 0:return m=r.filter(function(I){return I.score>=c}),aae()?(g=he(function(){var I=iae(n,e,m,s,i,a,[f,p],l,u,h,d),T=lo().makeTensorFromDataId(I.dataId,I.shape,I.dtype);return m.map(function(E,A){return VHe(T,t,A)})}),[4,Promise.all(g.map(function(I){return I.data()}))]):[3,2];case 1:return y=C.sent(),g.forEach(function(I){return I.dispose()}),[3,6];case 2:return[4,n.data()];case 3:return v=C.sent(),[4,e.data()];case 4:return b=C.sent(),[4,t.data()];case 5:w=C.sent(),y=zHe(v,b,w,m,s,i,a,[f,p],l,u),C.label=6;case 6:return[2,y.map(function(I,T){return{pose:m[T],data:I,height:s,width:i}})]}})})}/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KO(n){return Math.floor(n/2)}var WHe=function(){function n(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return n.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},n.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},n.prototype.empty=function(){return this.numberOfElements===-1},n.prototype.size=function(){return this.numberOfElements+1},n.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},n.prototype.max=function(){return this.priorityQueue[0]},n.prototype.swim=function(e){for(;e>0&&this.less(KO(e),e);)this.exchange(e,KO(e)),e=KO(e)},n.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},n.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},n.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},n.prototype.exchange=function(e,t){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=r},n}();/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GHe(n,e,t,r,s,i){for(var a=i.shape,o=a[0],l=a[1],c=!0,u=Math.max(t-s,0),h=Math.min(t+s+1,o),d=u;d<h;++d){for(var f=Math.max(r-s,0),p=Math.min(r+s+1,l),m=f;m<p;++m)if(i.get(d,m,n)>e){c=!1;break}if(!c)break}return c}function HHe(n,e,t){for(var r=t.shape,s=r[0],i=r[1],a=r[2],o=new WHe(s*i*a,function(d){var f=d.score;return f}),l=0;l<s;++l)for(var c=0;c<i;++c)for(var u=0;u<a;++u){var h=t.get(l,c,u);h<n||GHe(u,h,l,c,e,t)&&o.enqueue({score:h,part:{heatmapY:l,heatmapX:c,id:u}})}return o}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oae=FHe.map(function(n){var e=n[0],t=n[1];return[s_[e],s_[t]]}),XO=oae.map(function(n){var e=n[1];return e}),$H=oae.map(function(n){var e=n[0];return e});function qHe(n,e,t){var r=t.shape[2]/2;return{y:t.get(e.y,e.x,n),x:t.get(e.y,e.x,r+n)}}function YO(n,e,t,r){return{y:LH(Math.round(n.y/e),0,t-1),x:LH(Math.round(n.x/e),0,r-1)}}function zH(n,e,t,r,s,i,a,o){o===void 0&&(o=2);for(var l=r.shape,c=l[0],u=l[1],h=YO(e.position,i,c,u),d=qHe(n,h,a),f=MH(e.position,d),p=f,m=0;m<o;m++){var y=YO(p,i,c,u),g=tae(y.y,y.x,t,s);p=MH({x:y.x*i,y:y.y*i},{x:g.x,y:g.y})}var v=YO(p,i,c,u),b=r.get(v.y,v.x,t);return{position:p,part:XF[t],score:b}}function KHe(n,e,t,r,s,i){var a=e.shape[2],o=XO.length,l=new Array(a),c=n.part,u=n.score,h=nae(c,r,t);l[c.id]={score:u,part:XF[c.id],position:h};for(var d=o-1;d>=0;--d){var f=XO[d],p=$H[d];l[f]&&!l[p]&&(l[p]=zH(d,l[f],p,e,t,r,i))}for(var d=0;d<o;++d){var f=$H[d],p=XO[d];l[f]&&!l[p]&&(l[p]=zH(d,l[f],p,e,t,r,s))}return l}/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lae(n,e,t,r){var s=t.x,i=t.y;return n.some(function(a){var o=a.keypoints,l=o[r].position;return PHe(i,s,l.y,l.x)<=e})}function XHe(n,e,t){var r=t.reduce(function(s,i,a){var o=i.position,l=i.score;return lae(n,e,o,a)||(s+=l),s},0);return r/=t.length}var YHe=1;function aI(n,e,t,r,s,i,a,o){a===void 0&&(a=.5),o===void 0&&(o=20);for(var l=[],c=HHe(a,YHe,n),u=o*o;l.length<i&&!c.empty();){var h=c.dequeue(),d=nae(h.part,s,e);if(!lae(l,u,d,h.part.id)){var f=KHe(h,n,e,s,t,r),p=XHe(l,u,f);l.push({keypoints:f,score:p})}}return l}/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ZHe=[-123.15,-115.9,-103.06],QHe=function(n){Qie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.preprocessInput=function(t){return Re(t,ZHe)},e.prototype.nameOutputResults=function(t){var r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7];return{offsets:o,segmentation:c,partHeatmaps:l,longOffsets:a,heatmap:i,displacementFwd:s,displacementBwd:r,partOffsets:u}},e}(eae);/**
 * @license
 * Copyright 2019 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var BH="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",VH="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function JHe(n,e){var t="model-stride".concat(n,".json");return e===4?BH+"float/"+t:BH+"quant".concat(e,"/")+t}function e9e(n,e,t){var r={1:"100",.75:"075",.5:"050"},s="model-stride".concat(n,".json");return t===4?VH+"float/".concat(r[e],"/")+s:VH+"quant".concat(t,"/").concat(r[e],"/")+s}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var G0;function t9e(n){if("offsetHeight"in n&&n.offsetHeight!==0&&"offsetWidth"in n&&n.offsetWidth!==0)return[n.offsetHeight,n.offsetWidth];if(n.height!=null&&n.width!=null)return[n.height,n.width];throw new Error("HTMLImageElement must have height and width attributes set.")}function n9e(n){return n.hasAttribute("height")&&n.hasAttribute("width")?[n.height,n.width]:[n.videoHeight,n.videoWidth]}function T1(n){if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)return t9e(n);if(typeof ImageData<"u"&&n instanceof ImageData)return[n.height,n.width];if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)return n9e(n);if(n instanceof Sn)return[n.shape[0],n.shape[1]];throw new Error("error: Unknown input type: ".concat(n,"."))}function r9e(n,e){return(n-1)%e===0}function jH(n,e){return r9e(n,e)?n:Math.floor(n/e)*e+1}var E1={low:"low",medium:"medium",high:"high",full:"full"},s9e=(G0={},G0[E1.low]=.25,G0[E1.medium]=.5,G0[E1.high]=.75,G0[E1.full]=1,G0),UH=.1,WH=2;function i9e(n){if(typeof n=="string"){var e=s9e[n];return V(typeof e=="number",function(){return"string value of inputResolution must be one of ".concat(Object.values(E1).join(",")," but was ").concat(n,".")}),e}else return V(typeof n=="number"&&n<=WH&&n>=UH,function(){return"inputResolution must be a string or number between ".concat(UH," and ").concat(WH,", but ")+"was ".concat(n)}),n}function oI(n,e,t){var r=t[0],s=t[1],i=i9e(n);return[jH(r*i,e),jH(s*i,e)]}function a9e(n){return n instanceof Sn?n:qee(n)}function H0(n,e,t,r,s){var i=e[0],a=e[1],o=t[0],l=t[1],c=r[0],u=c[0],h=c[1],d=r[1],f=d[0],p=d[1];return he(function(){var m=Oa.resizeBilinear(n,[o,l],!0);return m=Co(m),o9e(m,[i,a],[[u,h],[f,p]])})}function o9e(n,e,t){var r=e[0],s=e[1],i=t[0],a=i[0],o=i[1],l=t[1],c=l[0],u=l[1];return he(function(){var h=Hr(n);return Pa(Oa.cropAndResize(h,[[a/(r+a+o-1),c/(s+c+u-1),(a+r-1)/(r+a+o-1),(c+s-1)/(s+c+u-1)]],[0],[r,s]),[0])})}function lI(n,e){var t=e[0],r=e[1],s=T1(n),i=s[0],a=s[1],o=r/t,l=a/i,c=[0,0,0,0],u=c[0],h=c[1],d=c[2],f=c[3];l<o?(u=0,h=0,d=Math.round(.5*(o*i-a)),f=Math.round(.5*(o*i-a))):(u=Math.round(.5*(1/o*a-i)),h=Math.round(.5*(1/o*a-i)),d=0,f=0);var p=he(function(){var m=a9e(n);return m=tB(m,[[u,h],[d,f],[0,0]]),Oa.resizeBilinear(m,[t,r])});return{resized:p,padding:{top:u,left:d,right:f,bottom:h}}}function cI(n){return su(this,void 0,void 0,function(){return iu(this,function(e){return[2,Promise.all(n.map(function(t){return t.buffer()}))]})})}function l9e(n,e,t,r,s){return r===void 0&&(r=0),s===void 0&&(s=0),{score:n.score,keypoints:n.keypoints.map(function(i){var a=i.score,o=i.part,l=i.position;return{score:a,part:o,position:{x:l.x*t+s,y:l.y*e+r}}})}}function c9e(n,e,t,r,s){return r===void 0&&(r=0),s===void 0&&(s=0),t===1&&e===1&&r===0&&s===0?n:n.map(function(i){return l9e(i,e,t,r,s)})}function uI(n,e,t,r,s){var i=e[0],a=e[1],o=t[0],l=t[1],c=(i+r.top+r.bottom)/o,u=(a+r.left+r.right)/l,h=c9e(n,c,u,-r.top,-r.left);return h}var cae={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},GH=["MobileNetV1","ResNet50"],HH={MobileNetV1:[8,16,32],ResNet50:[32,16]},qH={MobileNetV1:[.5,.75,1],ResNet50:[1]},KH=[1,2,4];function u9e(n){if(n=n||cae,n.architecture==null&&(n.architecture="MobileNetV1"),GH.indexOf(n.architecture)<0)throw new Error("Invalid architecture ".concat(n.architecture,". ")+"Should be one of ".concat(GH));if(n.outputStride==null&&(n.outputStride=16),HH[n.architecture].indexOf(n.outputStride)<0)throw new Error("Invalid outputStride ".concat(n.outputStride,". ")+"Should be one of ".concat(HH[n.architecture]," ")+"for architecture ".concat(n.architecture,"."));if(n.multiplier==null&&(n.multiplier=1),qH[n.architecture].indexOf(n.multiplier)<0)throw new Error("Invalid multiplier ".concat(n.multiplier,". ")+"Should be one of ".concat(qH[n.architecture]," ")+"for architecture ".concat(n.architecture,"."));if(n.quantBytes==null&&(n.quantBytes=4),KH.indexOf(n.quantBytes)<0)throw new Error("Invalid quantBytes ".concat(n.quantBytes,". ")+"Should be one of ".concat(KH," ")+"for architecture ".concat(n.architecture,"."));return n}var hI={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},dI={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function XH(n){var e=n.segmentationThreshold,t=n.maxDetections,r=n.scoreThreshold,s=n.nmsRadius;if(e<0||e>1)throw new Error("segmentationThreshold ".concat(e,". ")+"Should be in range [0.0, 1.0]");if(t<=0)throw new Error("Invalid maxDetections ".concat(t,". ")+"Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold ".concat(r,". ")+"Should be in range [0.0, 1.0]");if(s<=0)throw new Error("Invalid nmsRadius ".concat(s,"."))}function YH(n){var e=n.segmentationThreshold,t=n.maxDetections,r=n.scoreThreshold,s=n.nmsRadius,i=n.minKeypointScore,a=n.refineSteps;if(e<0||e>1)throw new Error("segmentationThreshold ".concat(e,". ")+"Should be in range [0.0, 1.0]");if(t<=0)throw new Error("Invalid maxDetections ".concat(t,". ")+"Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold ".concat(r,". ")+"Should be in range [0.0, 1.0]");if(s<=0)throw new Error("Invalid nmsRadius ".concat(s,"."));if(i<0||i>1)throw new Error("Invalid minKeypointScore ".concat(i,".")+"Should be in range [0.0, 1.0]");if(a<=0||a>20)throw new Error("Invalid refineSteps ".concat(a,".")+"Should be in range [1, 20]")}var uae=function(){function n(e){this.baseModel=e}return n.prototype.predictForPersonSegmentation=function(e){var t=this.baseModel.predict(e),r=t.segmentation,s=t.heatmapScores,i=t.offsets,a=t.displacementFwd,o=t.displacementBwd;return{segmentLogits:r,heatmapScores:s,offsets:i,displacementFwd:a,displacementBwd:o}},n.prototype.predictForPersonSegmentationAndPart=function(e){var t=this.baseModel.predict(e),r=t.segmentation,s=t.partHeatmaps,i=t.heatmapScores,a=t.offsets,o=t.displacementFwd,l=t.displacementBwd;return{segmentLogits:r,partHeatmapLogits:s,heatmapScores:i,offsets:a,displacementFwd:o,displacementBwd:l}},n.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var t=this.baseModel.predict(e),r=t.segmentation,s=t.longOffsets,i=t.heatmapScores,a=t.offsets,o=t.displacementFwd,l=t.displacementBwd,c=t.partHeatmaps;return{segmentLogits:r,longOffsets:s,heatmapScores:i,offsets:a,displacementFwd:o,displacementBwd:l,partHeatmaps:c}},n.prototype.segmentPersonActivation=function(e,t,r){var s=this;r===void 0&&(r=.5);var i=T1(e),a=i[0],o=i[1],l=oI(t,this.baseModel.outputStride,[a,o]),c=lI(e,l),u=c.resized,h=c.padding,d=he(function(){var v=s.predictForPersonSegmentation(u),b=v.segmentLogits,w=v.heatmapScores,C=v.offsets,I=v.displacementFwd,T=v.displacementBwd,E=u.shape,A=E[0],N=E[1],F=H0(b,[a,o],[A,N],[[h.top,h.bottom],[h.left,h.right]]);return{segmentation:iI(Pa(F),r),heatmapScores:w,offsets:C,displacementFwd:I,displacementBwd:T}}),f=d.segmentation,p=d.heatmapScores,m=d.offsets,y=d.displacementFwd,g=d.displacementBwd;return u.dispose(),{segmentation:f,heatmapScores:p,offsets:m,displacementFwd:y,displacementBwd:g,padding:h,internalResolutionHeightAndWidth:l}},n.prototype.segmentPerson=function(e,t){return t===void 0&&(t=hI),su(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h,d,f,p,m,y,g,v,b,w;return iu(this,function(C){switch(C.label){case 0:return t=Rc(Rc({},hI),t),XH(t),r=this.segmentPersonActivation(e,t.internalResolution,t.segmentationThreshold),s=r.segmentation,i=r.heatmapScores,a=r.offsets,o=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,h=s.shape,d=h[0],f=h[1],[4,s.data()];case 1:return p=C.sent(),s.dispose(),[4,cI([i,a,o,l])];case 2:return m=C.sent(),y=m[0],g=m[1],v=m[2],b=m[3],w=aI(y,g,v,b,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),w=uI(w,[d,f],u,c),i.dispose(),a.dispose(),o.dispose(),l.dispose(),[2,{height:d,width:f,data:p,allPoses:w}]}})})},n.prototype.segmentMultiPerson=function(e,t){return t===void 0&&(t=dI),su(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h,d,f,p,m,y,g,v,b,w,C,I,T,E=this;return iu(this,function(A){switch(A.label){case 0:return t=Rc(Rc({},dI),t),YH(t),r=T1(e),s=r[0],i=r[1],a=oI(t.internalResolution,this.baseModel.outputStride,[s,i]),o=lI(e,a),l=o.resized,c=o.padding,u=he(function(){var N=E.predictForMultiPersonInstanceSegmentationAndPart(l),F=N.segmentLogits,_=N.longOffsets,D=N.heatmapScores,R=N.offsets,B=N.displacementFwd,z=N.displacementBwd,W=H0(F,[s,i],a,[[c.top,c.bottom],[c.left,c.right]]),K;K=_;var H=iI(Pa(W),t.segmentationThreshold);return{segmentation:H,longOffsets:K,heatmapScoresRaw:D,offsetsRaw:R,displacementFwdRaw:B,displacementBwdRaw:z}}),h=u.segmentation,d=u.longOffsets,f=u.heatmapScoresRaw,p=u.offsetsRaw,m=u.displacementFwdRaw,y=u.displacementBwdRaw,[4,cI([f,p,m,y])];case 1:return g=A.sent(),v=g[0],b=g[1],w=g[2],C=g[3],I=aI(v,b,w,C,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),I=uI(I,[s,i],a,c),[4,jHe(h,d,I,s,i,this.baseModel.outputStride,a,c,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return T=A.sent(),l.dispose(),h.dispose(),d.dispose(),f.dispose(),p.dispose(),m.dispose(),y.dispose(),[2,T]}})})},n.prototype.segmentPersonPartsActivation=function(e,t,r){var s=this;r===void 0&&(r=.5);var i=T1(e),a=i[0],o=i[1],l=oI(t,this.baseModel.outputStride,[a,o]),c=lI(e,l),u=c.resized,h=c.padding,d=he(function(){var v=s.predictForPersonSegmentationAndPart(u),b=v.segmentLogits,w=v.partHeatmapLogits,C=v.heatmapScores,I=v.offsets,T=v.displacementFwd,E=v.displacementBwd,A=u.shape,N=A[0],F=A[1],_=H0(b,[a,o],[N,F],[[h.top,h.bottom],[h.left,h.right]]),D=H0(w,[a,o],[N,F],[[h.top,h.bottom],[h.left,h.right]]),R=iI(Pa(_),r);return{partSegmentation:NHe(R,D),heatmapScores:C,offsets:I,displacementFwd:T,displacementBwd:E}}),f=d.partSegmentation,p=d.heatmapScores,m=d.offsets,y=d.displacementFwd,g=d.displacementBwd;return u.dispose(),{partSegmentation:f,heatmapScores:p,offsets:m,displacementFwd:y,displacementBwd:g,padding:h,internalResolutionHeightAndWidth:l}},n.prototype.segmentPersonParts=function(e,t){return t===void 0&&(t=hI),su(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h,d,f,p,m,y,g,v,b,w;return iu(this,function(C){switch(C.label){case 0:return t=Rc(Rc({},hI),t),XH(t),r=this.segmentPersonPartsActivation(e,t.internalResolution,t.segmentationThreshold),s=r.partSegmentation,i=r.heatmapScores,a=r.offsets,o=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,h=s.shape,d=h[0],f=h[1],[4,s.data()];case 1:return p=C.sent(),s.dispose(),[4,cI([i,a,o,l])];case 2:return m=C.sent(),y=m[0],g=m[1],v=m[2],b=m[3],w=aI(y,g,v,b,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),w=uI(w,[d,f],u,c),i.dispose(),a.dispose(),o.dispose(),l.dispose(),[2,{height:d,width:f,data:p,allPoses:w}]}})})},n.prototype.segmentMultiPersonParts=function(e,t){return t===void 0&&(t=dI),su(this,void 0,void 0,function(){var r,s,i,a,o,l,c,u,h,d,f,p,m,y,g,v,b,w,C,I,T,E,A=this;return iu(this,function(N){switch(N.label){case 0:return t=Rc(Rc({},dI),t),YH(t),r=T1(e),s=r[0],i=r[1],a=oI(t.internalResolution,this.baseModel.outputStride,[s,i]),o=lI(e,a),l=o.resized,c=o.padding,u=he(function(){var F=A.predictForMultiPersonInstanceSegmentationAndPart(l),_=F.segmentLogits,D=F.longOffsets,R=F.heatmapScores,B=F.offsets,z=F.displacementFwd,W=F.displacementBwd,K=F.partHeatmaps,H=H0(_,[s,i],a,[[c.top,c.bottom],[c.left,c.right]]),se=H0(K,[s,i],a,[[c.top,c.bottom],[c.left,c.right]]),q=D,X=iI(Pa(H),t.segmentationThreshold),fe=_He(se);return{segmentation:X,longOffsets:q,heatmapScoresRaw:R,offsetsRaw:B,displacementFwdRaw:z,displacementBwdRaw:W,partSegmentation:fe}}),h=u.segmentation,d=u.longOffsets,f=u.heatmapScoresRaw,p=u.offsetsRaw,m=u.displacementFwdRaw,y=u.displacementBwdRaw,g=u.partSegmentation,[4,cI([f,p,m,y])];case 1:return v=N.sent(),b=v[0],w=v[1],C=v[2],I=v[3],T=aI(b,w,C,I,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),T=uI(T,[s,i],a,c),[4,UHe(h,d,g,T,s,i,this.baseModel.outputStride,a,c,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return E=N.sent(),l.dispose(),h.dispose(),d.dispose(),f.dispose(),p.dispose(),m.dispose(),y.dispose(),g.dispose(),[2,E]}})})},n.prototype.dispose=function(){this.baseModel.dispose()},n}();function h9e(n){return su(this,void 0,void 0,function(){var e,t,r,s,i,a;return iu(this,function(o){switch(o.label){case 0:if(e=n.outputStride,t=n.quantBytes,r=n.multiplier,Nte==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return s=e9e(e,r,t),[4,Yre(n.modelUrl||s)];case 1:return i=o.sent(),a=new RHe(i,e),[2,new uae(a)]}})})}function d9e(n){return su(this,void 0,void 0,function(){var e,t,r,s,i;return iu(this,function(a){switch(a.label){case 0:if(e=n.outputStride,t=n.quantBytes,Nte==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return r=JHe(e,t),[4,Yre(n.modelUrl||r)];case 1:return s=a.sent(),i=new QHe(s,e),[2,new uae(i)]}})})}function f9e(n){return n===void 0&&(n=cae),su(this,void 0,void 0,function(){return iu(this,function(e){return n=u9e(n),n.architecture==="ResNet50"?[2,d9e(n)]:n.architecture==="MobileNetV1"?[2,h9e(n)]:[2,null]})})}let Ww=null,fI=!1;async function p9e(n){if(Ww)return Ww;if(fI){for(;fI;)await new Promise(e=>setTimeout(e,100));return Ww}fI=!0,n==null||n("Loading AI model...");try{return Ww=await f9e({architecture:"MobileNetV1",outputStride:16,multiplier:.75,quantBytes:2}),Ww}finally{fI=!1}}function m9e(n,e){const t=n.data,r=e.data,s={};for(let o=0;o<r.length;o++)if(r[o]===0){const l=o*4,c=t[l],u=t[l+1],h=t[l+2],d=Math.round(c/32)*32,f=Math.round(u/32)*32,p=Math.round(h/32)*32,m=`${d},${f},${p}`;s[m]=(s[m]||0)+1}let i={r:255,g:255,b:255},a=0;for(const[o,l]of Object.entries(s))if(l>a){a=l;const[c,u,h]=o.split(",").map(Number);i={r:c,g:u,b:h}}return i}async function g9e(n,e){e==null||e("Loading AI model...");const t=await p9e(e);e==null||e("Detecting person...");const r=await t.segmentPerson(n,{flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7}),s=r.data.filter(d=>d===1).length,i=r.data.length,a=s/i*100;if(a<1)return e==null||e("No person detected"),n;e==null||e(`Person detected (${a.toFixed(1)}% of image)...`);const o=n.getContext("2d"),l=o.getImageData(0,0,n.width,n.height),c=l.data;e==null||e("Analyzing background color...");const u=m9e(l,r);e==null||e("Removing person...");const h=y9e(r.data,n.width,n.height,5);for(let d=0;d<h.length;d++)if(h[d]===1){const f=d*4;c[f]=u.r,c[f+1]=u.g,c[f+2]=u.b}return o.putImageData(l,0,0),e==null||e("Person removed successfully!"),n}function y9e(n,e,t,r){const s=new Uint8Array(n.length);for(let i=0;i<t;i++)for(let a=0;a<e;a++){const o=i*e+a;let l=!1;for(let c=-r;c<=r&&!l;c++)for(let u=-r;u<=r&&!l;u++){const h=i+c,d=a+u;if(h>=0&&h<t&&d>=0&&d<e){const f=h*e+d;n[f]===1&&(l=!0)}}s[o]=l?1:0}return s}function pI(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hae={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,s,i){function a(c,u){if(!s[c]){if(!r[c]){var h=typeof pI=="function"&&pI;if(!u&&h)return h(c,!0);if(o)return o(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=s[c]={exports:{}};r[c][0].call(f.exports,function(p){var m=r[c][1][p];return a(m||p)},f,f.exports,t,r,s,i)}return s[c].exports}for(var o=typeof pI=="function"&&pI,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(t,r,s){var i=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,u,h,d,f,p,m,y=[],g=0,v=l.length,b=v,w=i.getTypeOf(l)!=="string";g<l.length;)b=v-g,h=w?(c=l[g++],u=g<v?l[g++]:0,g<v?l[g++]:0):(c=l.charCodeAt(g++),u=g<v?l.charCodeAt(g++):0,g<v?l.charCodeAt(g++):0),d=c>>2,f=(3&c)<<4|u>>4,p=1<b?(15&u)<<2|h>>6:64,m=2<b?63&h:64,y.push(o.charAt(d)+o.charAt(f)+o.charAt(p)+o.charAt(m));return y.join("")},s.decode=function(l){var c,u,h,d,f,p,m=0,y=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var v,b=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&b--,l.charAt(l.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|b):new Array(0|b);m<l.length;)c=o.indexOf(l.charAt(m++))<<2|(d=o.indexOf(l.charAt(m++)))>>4,u=(15&d)<<4|(f=o.indexOf(l.charAt(m++)))>>2,h=(3&f)<<6|(p=o.indexOf(l.charAt(m++))),v[y++]=c,f!==64&&(v[y++]=u),p!==64&&(v[y++]=h);return v}},{"./support":30,"./utils":32}],2:[function(t,r,s){var i=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(u,h,d,f,p){this.compressedSize=u,this.uncompressedSize=h,this.crc32=d,this.compression=f,this.compressedContent=p}c.prototype={getContentWorker:function(){var u=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,h,d){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,s){var i=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,s){var i=t("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(c,u,h,d){var f=a,p=d+h;c^=-1;for(var m=d;m<p;m++)c=c>>>8^f[255&(c^u[m])];return-1^c}(0|l,o,o.length,0):function(c,u,h,d){var f=a,p=d+h;c^=-1;for(var m=d;m<p;m++)c=c>>>8^f[255&(c^u.charCodeAt(m))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,r,s){var i=null;i=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:i}},{lie:37}],7:[function(t,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),c=i?"uint8array":"array";function u(h,d){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=d,this.meta={}}s.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,h.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(d){h.push({data:d,meta:h.meta})}},s.compressWorker=function(h){return new u("Deflate",h)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,s){function i(f,p){var m,y="";for(m=0;m<p;m++)y+=String.fromCharCode(255&f),f>>>=8;return y}function a(f,p,m,y,g,v){var b,w,C=f.file,I=f.compression,T=v!==c.utf8encode,E=o.transformTo("string",v(C.name)),A=o.transformTo("string",c.utf8encode(C.name)),N=C.comment,F=o.transformTo("string",v(N)),_=o.transformTo("string",c.utf8encode(N)),D=A.length!==C.name.length,R=_.length!==N.length,B="",z="",W="",K=C.dir,H=C.date,se={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(se.crc32=f.crc32,se.compressedSize=f.compressedSize,se.uncompressedSize=f.uncompressedSize);var q=0;p&&(q|=8),T||!D&&!R||(q|=2048);var X=0,fe=0;K&&(X|=16),g==="UNIX"?(fe=798,X|=function(ue,Ce){var Ae=ue;return ue||(Ae=Ce?16893:33204),(65535&Ae)<<16}(C.unixPermissions,K)):(fe=20,X|=function(ue){return 63&(ue||0)}(C.dosPermissions)),b=H.getUTCHours(),b<<=6,b|=H.getUTCMinutes(),b<<=5,b|=H.getUTCSeconds()/2,w=H.getUTCFullYear()-1980,w<<=4,w|=H.getUTCMonth()+1,w<<=5,w|=H.getUTCDate(),D&&(z=i(1,1)+i(u(E),4)+A,B+="up"+i(z.length,2)+z),R&&(W=i(1,1)+i(u(F),4)+_,B+="uc"+i(W.length,2)+W);var de="";return de+=`
\0`,de+=i(q,2),de+=I.magic,de+=i(b,2),de+=i(w,2),de+=i(se.crc32,4),de+=i(se.compressedSize,4),de+=i(se.uncompressedSize,4),de+=i(E.length,2),de+=i(B.length,2),{fileRecord:h.LOCAL_FILE_HEADER+de+E+B,dirRecord:h.CENTRAL_FILE_HEADER+i(fe,2)+de+i(F.length,2)+"\0\0\0\0"+i(X,4)+i(y,4)+E+B+F}}var o=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),h=t("../signature");function d(f,p,m,y){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=y,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(d,l),d.prototype.push=function(f){var p=f.meta.percent||0,m=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-y-1))/m:100}}))},d.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var m=a(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,m=a(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(y){return h.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-f,y=function(g,v,b,w,C){var I=o.transformTo("string",C(w));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(v,4)+i(b,4)+i(I.length,2)+I}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(m){p.processChunk(m)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(m){p.error(m)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(f){var p=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var m=0;m<p.length;m++)try{p[m].error(f)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},r.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,s){var i=t("../compressions"),a=t("./ZipFileWorker");s.generateWorker=function(o,l,c){var u=new a(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{o.forEach(function(d,f){h++;var p=function(v,b){var w=v||b,C=i[w];if(!C)throw new Error(w+" is not a valid compression method !");return C}(f.options.compression,l.compression),m=f.options.compressionOptions||l.compressionOptions||{},y=f.dir,g=f.date;f._compressWorker(p,m).withStreamInfo("file",{name:d,dir:y,date:g,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=h}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(a,o){return new i().loadAsync(a,o)},i.external=t("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,s){var i=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function h(d){return new a.Promise(function(f,p){var m=d.decompressed.getContentWorker().pipe(new c);m.on("error",function(y){p(y)}).on("end",function(){m.streamInfo.crc32!==d.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(d,f){var p=this;return f=i.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(d)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",d,!0,f.optimizedBinaryString,f.base64).then(function(m){var y=new l(f);return y.load(m),y}).then(function(m){var y=[a.Promise.resolve(m)],g=m.files;if(f.checkCRC32)for(var v=0;v<g.length;v++)y.push(h(g[v]));return a.Promise.all(y)}).then(function(m){for(var y=m.shift(),g=y.files,v=0;v<g.length;v++){var b=g[v],w=b.fileNameStr,C=i.resolve(b.fileNameStr);p.file(C,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:f.createFolders}),b.dir||(p.file(C).unsafeOriginalName=w)}return y.zipComment.length&&(p.comment=y.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,s){var i=t("../utils"),a=t("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,s){var i=t("readable-stream").Readable;function a(o,l,c){i.call(this,l),this._helper=o;var u=this;o.on("data",function(h,d){u.push(h)||u._helper.pause(),c&&c(d)}).on("error",function(h){u.emit("error",h)}).on("end",function(){u.push(null)})}t("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,r,s){function i(C,I,T){var E,A=o.getTypeOf(I),N=o.extend(T||{},u);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(C=g(C)),N.createFolders&&(E=y(C))&&v.call(this,E,!0);var F=A==="string"&&N.binary===!1&&N.base64===!1;T&&T.binary!==void 0||(N.binary=!F),(I instanceof h&&I.uncompressedSize===0||N.dir||!I||I.length===0)&&(N.base64=!1,N.binary=!0,I="",N.compression="STORE",A="string");var _=null;_=I instanceof h||I instanceof l?I:p.isNode&&p.isStream(I)?new m(C,I):o.prepareContent(C,I,N.binary,N.optimizedBinaryString,N.base64);var D=new d(C,_,N);this.files[C]=D}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),u=t("./defaults"),h=t("./compressedObject"),d=t("./zipObject"),f=t("./generate"),p=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),y=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var I=C.lastIndexOf("/");return 0<I?C.substring(0,I):""},g=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},v=function(C,I){return I=I!==void 0?I:u.createFolders,C=g(C),this.files[C]||i.call(this,C,null,{dir:!0,createFolders:I}),this.files[C]};function b(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var I,T,E;for(I in this.files)E=this.files[I],(T=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&C(T,E)},filter:function(C){var I=[];return this.forEach(function(T,E){C(T,E)&&I.push(E)}),I},file:function(C,I,T){if(arguments.length!==1)return C=this.root+C,i.call(this,C,I,T),this;if(b(C)){var E=C;return this.filter(function(N,F){return!F.dir&&E.test(N)})}var A=this.files[this.root+C];return A&&!A.dir?A:null},folder:function(C){if(!C)return this;if(b(C))return this.filter(function(A,N){return N.dir&&C.test(A)});var I=this.root+C,T=v.call(this,I),E=this.clone();return E.root=T.name,E},remove:function(C){C=this.root+C;var I=this.files[C];if(I||(C.slice(-1)!=="/"&&(C+="/"),I=this.files[C]),I&&!I.dir)delete this.files[C];else for(var T=this.filter(function(A,N){return N.name.slice(0,C.length)===C}),E=0;E<T.length;E++)delete this.files[T[E].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var I,T={};try{if((T=o.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");o.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var E=T.comment||this.comment||"";I=f.generateWorker(this,T,E)}catch(A){(I=new l("error")).error(A)}return new c(I,T.type||"string",T.mimeType)},generateAsync:function(C,I){return this.generateInternalStream(C).accumulate(I)},generateNodeStream:function(C,I){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(I)}};r.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,s){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,s){var i=t("./DataReader");function a(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),h=o.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===u&&this.data[d+3]===h)return d-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),h=o.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&u===d[2]&&h===d[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,r,s){var i=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(t,r,s){var i=t("./Uint8ArrayReader");function a(o){i.call(this,o)}t("../utils").inherits(a,i),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,s){var i=t("./DataReader");function a(o){i.call(this,o)}t("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,r,s){var i=t("./ArrayReader");function a(o){i.call(this,o)}t("../utils").inherits(a,i),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,s){var i=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");r.exports=function(h){var d=i.getTypeOf(h);return i.checkSupport(d),d!=="string"||a.uint8array?d==="nodebuffer"?new c(h):a.uint8array?new u(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,s){var i=t("./GenericWorker"),a=t("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,s){var i=t("./GenericWorker"),a=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,s){var i=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,s){var i=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=i.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}i.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,s){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=i},{}],29:[function(t,r,s){var i=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),c=t("../support"),u=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(p,m){return new u.Promise(function(y,g){var v=[],b=p._internalType,w=p._outputType,C=p._mimeType;p.on("data",function(I,T){v.push(I),m&&m(T)}).on("error",function(I){v=[],g(I)}).on("end",function(){try{var I=function(T,E,A){switch(T){case"blob":return i.newBlob(i.transformTo("arraybuffer",E),A);case"base64":return l.encode(E);default:return i.transformTo(T,E)}}(w,function(T,E){var A,N=0,F=null,_=0;for(A=0;A<E.length;A++)_+=E[A].length;switch(T){case"string":return E.join("");case"array":return Array.prototype.concat.apply([],E);case"uint8array":for(F=new Uint8Array(_),A=0;A<E.length;A++)F.set(E[A],N),N+=E[A].length;return F;case"nodebuffer":return Buffer.concat(E);default:throw new Error("concat : unsupported type '"+T+"'")}}(b,v),C);y(I)}catch(T){g(T)}v=[]}).resume()})}function f(p,m,y){var g=m;switch(m){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=m,this._mimeType=y,i.checkSupport(g),this._worker=p.pipe(new a(g)),p.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}f.prototype={accumulate:function(p){return d(this,p)},on:function(p,m){var y=this;return p==="data"?this._worker.on(p,function(g){m.call(y,g.data,g.meta)}):this._worker.on(p,function(){i.delay(m,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,s){for(var i=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}s.utf8encode=function(f){return a.nodebuffer?o.newBufferFrom(f,"utf-8"):function(p){var m,y,g,v,b,w=p.length,C=0;for(v=0;v<w;v++)(64512&(y=p.charCodeAt(v)))==55296&&v+1<w&&(64512&(g=p.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),v++),C+=y<128?1:y<2048?2:y<65536?3:4;for(m=a.uint8array?new Uint8Array(C):new Array(C),v=b=0;b<C;v++)(64512&(y=p.charCodeAt(v)))==55296&&v+1<w&&(64512&(g=p.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),v++),y<128?m[b++]=y:(y<2048?m[b++]=192|y>>>6:(y<65536?m[b++]=224|y>>>12:(m[b++]=240|y>>>18,m[b++]=128|y>>>12&63),m[b++]=128|y>>>6&63),m[b++]=128|63&y);return m}(f)},s.utf8decode=function(f){return a.nodebuffer?i.transformTo("nodebuffer",f).toString("utf-8"):function(p){var m,y,g,v,b=p.length,w=new Array(2*b);for(m=y=0;m<b;)if((g=p[m++])<128)w[y++]=g;else if(4<(v=c[g]))w[y++]=65533,m+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&m<b;)g=g<<6|63&p[m++],v--;1<v?w[y++]=65533:g<65536?w[y++]=g:(g-=65536,w[y++]=55296|g>>10&1023,w[y++]=56320|1023&g)}return w.length!==y&&(w.subarray?w=w.subarray(0,y):w.length=y),i.applyFromCharCode(w)}(f=i.transformTo(a.uint8array?"uint8array":"array",f))},i.inherits(h,l),h.prototype.processChunk=function(f){var p=i.transformTo(a.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var y=function(v,b){var w;for((b=b||v.length)>v.length&&(b=v.length),w=b-1;0<=w&&(192&v[w])==128;)w--;return w<0||w===0?b:w+c[v[w]]>b?w:b}(p),g=p;y!==p.length&&(a.uint8array?(g=p.subarray(0,y),this.leftOver=p.subarray(y,p.length)):(g=p.slice(0,y),this.leftOver=p.slice(y,p.length))),this.push({data:s.utf8decode(g),meta:f.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=h,i.inherits(d,l),d.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,s){var i=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function c(m){return m}function u(m,y){for(var g=0;g<m.length;++g)y[g]=255&m.charCodeAt(g);return y}t("setimmediate"),s.newBlob=function(m,y){s.checkSupport("blob");try{return new Blob([m],{type:y})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(m),g.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(m,y,g){var v=[],b=0,w=m.length;if(w<=g)return String.fromCharCode.apply(null,m);for(;b<w;)y==="array"||y==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(b,Math.min(b+g,w)))):v.push(String.fromCharCode.apply(null,m.subarray(b,Math.min(b+g,w)))),b+=g;return v.join("")},stringifyByChar:function(m){for(var y="",g=0;g<m.length;g++)y+=String.fromCharCode(m[g]);return y},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(m){var y=65536,g=s.getTypeOf(m),v=!0;if(g==="uint8array"?v=h.applyCanBeUsed.uint8array:g==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<y;)try{return h.stringifyByChunk(m,g,y)}catch{y=Math.floor(y/2)}return h.stringifyByChar(m)}function f(m,y){for(var g=0;g<m.length;g++)y[g]=m[g];return y}s.applyFromCharCode=d;var p={};p.string={string:c,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,o.allocBuffer(m.length))}},p.array={string:d,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},p.arraybuffer={string:function(m){return d(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:d,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return o.newBufferFrom(m)}},p.nodebuffer={string:d,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:c},s.transformTo=function(m,y){if(y=y||"",!m)return y;s.checkSupport(m);var g=s.getTypeOf(y);return p[g][m](y)},s.resolve=function(m){for(var y=m.split("/"),g=[],v=0;v<y.length;v++){var b=y[v];b==="."||b===""&&v!==0&&v!==y.length-1||(b===".."?g.pop():g.push(b))}return g.join("/")},s.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(m)?"nodebuffer":i.uint8array&&m instanceof Uint8Array?"uint8array":i.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(m){if(!i[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(m){var y,g,v="";for(g=0;g<(m||"").length;g++)v+="\\x"+((y=m.charCodeAt(g))<16?"0":"")+y.toString(16).toUpperCase();return v},s.delay=function(m,y,g){setImmediate(function(){m.apply(g||null,y||[])})},s.inherits=function(m,y){function g(){}g.prototype=y.prototype,m.prototype=new g},s.extend=function(){var m,y,g={};for(m=0;m<arguments.length;m++)for(y in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],y)&&g[y]===void 0&&(g[y]=arguments[m][y]);return g},s.prepareContent=function(m,y,g,v,b){return l.Promise.resolve(y).then(function(w){return i.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new l.Promise(function(C,I){var T=new FileReader;T.onload=function(E){C(E.target.result)},T.onerror=function(E){I(E.target.error)},T.readAsArrayBuffer(w)}):w}).then(function(w){var C=s.getTypeOf(w);return C?(C==="arraybuffer"?w=s.transformTo("uint8array",w):C==="string"&&(b?w=a.decode(w):g&&v!==!0&&(w=function(I){return u(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(w))),w):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,s){var i=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),c=t("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(d)+", expected "+a.pretty(h)+")")}},isSignature:function(h,d){var f=this.reader.index;this.reader.setIndex(h);var p=this.reader.readString(4)===d;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),d=c.uint8array?"uint8array":"array",f=a.transformTo(d,h);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,d,f,p=this.zip64EndOfCentralSize-44;0<p;)h=this.reader.readInt(2),d=this.reader.readInt(4),f=this.reader.readData(d),this.zip64ExtensibleData[h]={id:h,length:d,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,d;for(h=0;h<this.files.length;h++)d=this.files[h],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var d=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=d-f;if(0<p)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,s){var i=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),u=t("./compressions"),h=t("./support");function d(f,p){this.options=f,this.loadOptions=p}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(y){for(var g in u)if(Object.prototype.hasOwnProperty.call(u,g)&&u[g].magic===y)return u[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,m,y,g=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<g;)p=f.readInt(2),m=f.readInt(2),y=f.readData(m),this.extraFields[p]={id:p,length:m,value:y};f.setIndex(g)},handleUTF8:function(){var f=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=a.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var g=a.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=i(f.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=i(f.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null}},r.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,s){function i(p,m,y){this.name=p,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=m,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");i.prototype={internalStream:function(p){var m=null,y="string";try{if(!p)throw new Error("No output type specified.");var g=(y=p.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(m=m.pipe(new l.Utf8EncodeWorker)),!v&&g&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(b){(m=new u("error")).error(b)}return new a(m,y,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(y,p,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<h.length;f++)i.prototype[h[f]]=d;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,s){(function(i){var a,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,u=new l(p),h=i.document.createTextNode("");u.observe(h,{characterData:!0}),a=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var m=i.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},i.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var d=new i.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}var f=[];function p(){var m,y;o=!0;for(var g=f.length;g;){for(y=f,f=[],m=-1;++m<g;)y[m]();g=f.length}o=!1}r.exports=function(m){f.push(m)!==1||o||a()}}).call(this,typeof Yl<"u"?Yl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,s){var i=t("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function h(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,g!==a&&m(this,g)}function d(g,v,b){this.promise=g,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function f(g,v,b){i(function(){var w;try{w=v(b)}catch(C){return o.reject(g,C)}w===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,w)})}function p(g){var v=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof v=="function")return function(){v.apply(g,arguments)}}function m(g,v){var b=!1;function w(T){b||(b=!0,o.reject(g,T))}function C(T){b||(b=!0,o.resolve(g,T))}var I=y(function(){v(C,w)});I.status==="error"&&w(I.value)}function y(g,v){var b={};try{b.value=g(v),b.status="success"}catch(w){b.status="error",b.value=w}return b}(r.exports=h).prototype.finally=function(g){if(typeof g!="function")return this;var v=this.constructor;return this.then(function(b){return v.resolve(g()).then(function(){return b})},function(b){return v.resolve(g()).then(function(){throw b})})},h.prototype.catch=function(g){return this.then(null,g)},h.prototype.then=function(g,v){if(typeof g!="function"&&this.state===c||typeof v!="function"&&this.state===l)return this;var b=new this.constructor(a);return this.state!==u?f(b,this.state===c?g:v,this.outcome):this.queue.push(new d(b,g,v)),b},d.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},d.prototype.otherCallFulfilled=function(g){f(this.promise,this.onFulfilled,g)},d.prototype.callRejected=function(g){o.reject(this.promise,g)},d.prototype.otherCallRejected=function(g){f(this.promise,this.onRejected,g)},o.resolve=function(g,v){var b=y(p,v);if(b.status==="error")return o.reject(g,b.value);var w=b.value;if(w)m(g,w);else{g.state=c,g.outcome=v;for(var C=-1,I=g.queue.length;++C<I;)g.queue[C].callFulfilled(v)}return g},o.reject=function(g,v){g.state=l,g.outcome=v;for(var b=-1,w=g.queue.length;++b<w;)g.queue[b].callRejected(v);return g},h.resolve=function(g){return g instanceof this?g:o.resolve(new this(a),g)},h.reject=function(g){var v=new this(a);return o.reject(v,g)},h.all=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,w=!1;if(!b)return this.resolve([]);for(var C=new Array(b),I=0,T=-1,E=new this(a);++T<b;)A(g[T],T);return E;function A(N,F){v.resolve(N).then(function(_){C[F]=_,++I!==b||w||(w=!0,o.resolve(E,C))},function(_){w||(w=!0,o.reject(E,_))})}},h.race=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,w=!1;if(!b)return this.resolve([]);for(var C=-1,I=new this(a);++C<b;)T=g[C],v.resolve(T).then(function(E){w||(w=!0,o.resolve(I,E))},function(E){w||(w=!0,o.reject(I,E))});var T;return I}},{immediate:36}],38:[function(t,r,s){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,s){var i=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString,h=0,d=-1,f=0,p=8;function m(g){if(!(this instanceof m))return new m(g);this.options=a.assign({level:d,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},g||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var b=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(b!==h)throw new Error(l[b]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var w;if(w=typeof v.dictionary=="string"?o.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(b=i.deflateSetDictionary(this.strm,w))!==h)throw new Error(l[b]);this._dict_set=!0}}function y(g,v){var b=new m(v);if(b.push(g,!0),b.err)throw b.msg||l[b.err];return b.result}m.prototype.push=function(g,v){var b,w,C=this.strm,I=this.options.chunkSize;if(this.ended)return!1;w=v===~~v?v:v===!0?4:0,typeof g=="string"?C.input=o.string2buf(g):u.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new a.Buf8(I),C.next_out=0,C.avail_out=I),(b=i.deflate(C,w))!==1&&b!==h)return this.onEnd(b),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(C.output,C.next_out))):this.onData(a.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&b!==1);return w===4?(b=i.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===h):w!==2||(this.onEnd(h),!(C.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=m,s.deflate=y,s.deflateRaw=function(g,v){return(v=v||{}).raw=!0,y(g,v)},s.gzip=function(g,v){return(v=v||{}).gzip=!0,y(g,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,s){var i=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),h=t("./zlib/gzheader"),d=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||m&&m.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,y.windowBits);if(g!==l.Z_OK)throw new Error(c[g]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function p(m,y){var g=new f(y);if(g.push(m,!0),g.err)throw g.msg||c[g.err];return g.result}f.prototype.push=function(m,y){var g,v,b,w,C,I,T=this.strm,E=this.options.chunkSize,A=this.options.dictionary,N=!1;if(this.ended)return!1;v=y===~~y?y:y===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?T.input=o.binstring2buf(m):d.call(m)==="[object ArrayBuffer]"?T.input=new Uint8Array(m):T.input=m,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new a.Buf8(E),T.next_out=0,T.avail_out=E),(g=i.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&A&&(I=typeof A=="string"?o.string2buf(A):d.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,g=i.inflateSetDictionary(this.strm,I)),g===l.Z_BUF_ERROR&&N===!0&&(g=l.Z_OK,N=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&g!==l.Z_STREAM_END&&(T.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(T.output,T.next_out),w=T.next_out-b,C=o.buf2string(T.output,b),T.next_out=w,T.avail_out=E-w,w&&a.arraySet(T.output,T.output,b,w,0),this.onData(C)):this.onData(a.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(N=!0)}while((0<T.avail_in||T.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Inflate=f,s.inflate=p,s.inflateRaw=function(m,y){return(y=y||{}).raw=!0,p(m,y)},s.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,u,h,d){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+h),d);else for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){var c,u,h,d,f,p;for(c=h=0,u=l.length;c<u;c++)h+=l[c].length;for(p=new Uint8Array(h),c=d=0,u=l.length;c<u;c++)f=l[c],p.set(f,d),d+=f.length;return p}},o={arraySet:function(l,c,u,h,d){for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(i)},{}],42:[function(t,r,s){var i=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(h,d){if(d<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(h,d));for(var f="",p=0;p<d;p++)f+=String.fromCharCode(h[p]);return f}l[254]=l[254]=1,s.string2buf=function(h){var d,f,p,m,y,g=h.length,v=0;for(m=0;m<g;m++)(64512&(f=h.charCodeAt(m)))==55296&&m+1<g&&(64512&(p=h.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),v+=f<128?1:f<2048?2:f<65536?3:4;for(d=new i.Buf8(v),m=y=0;y<v;m++)(64512&(f=h.charCodeAt(m)))==55296&&m+1<g&&(64512&(p=h.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),f<128?d[y++]=f:(f<2048?d[y++]=192|f>>>6:(f<65536?d[y++]=224|f>>>12:(d[y++]=240|f>>>18,d[y++]=128|f>>>12&63),d[y++]=128|f>>>6&63),d[y++]=128|63&f);return d},s.buf2binstring=function(h){return u(h,h.length)},s.binstring2buf=function(h){for(var d=new i.Buf8(h.length),f=0,p=d.length;f<p;f++)d[f]=h.charCodeAt(f);return d},s.buf2string=function(h,d){var f,p,m,y,g=d||h.length,v=new Array(2*g);for(f=p=0;f<g;)if((m=h[f++])<128)v[p++]=m;else if(4<(y=l[m]))v[p++]=65533,f+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&f<g;)m=m<<6|63&h[f++],y--;1<y?v[p++]=65533:m<65536?v[p++]=m:(m-=65536,v[p++]=55296|m>>10&1023,v[p++]=56320|1023&m)}return u(v,p)},s.utf8border=function(h,d){var f;for((d=d||h.length)>h.length&&(d=h.length),f=d-1;0<=f&&(192&h[f])==128;)f--;return f<0||f===0?d:f+l[h[f]]>d?f:d}},{"./common":41}],43:[function(t,r,s){r.exports=function(i,a,o,l){for(var c=65535&i|0,u=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;u=u+(c=c+a[l++]|0)|0,--h;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(t,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,s){var i=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();r.exports=function(a,o,l,c){var u=i,h=c+l;a^=-1;for(var d=c;d<h;d++)a=a>>>8^u[255&(a^o[d])];return-1^a}},{}],46:[function(t,r,s){var i,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),c=t("./crc32"),u=t("./messages"),h=0,d=4,f=0,p=-2,m=-1,y=4,g=2,v=8,b=9,w=286,C=30,I=19,T=2*w+1,E=15,A=3,N=258,F=N+A+1,_=42,D=113,R=1,B=2,z=3,W=4;function K(M,be){return M.msg=u[be],be}function H(M){return(M<<1)-(4<M?9:0)}function se(M){for(var be=M.length;0<=--be;)M[be]=0}function q(M){var be=M.state,me=be.pending;me>M.avail_out&&(me=M.avail_out),me!==0&&(a.arraySet(M.output,be.pending_buf,be.pending_out,me,M.next_out),M.next_out+=me,be.pending_out+=me,M.total_out+=me,M.avail_out-=me,be.pending-=me,be.pending===0&&(be.pending_out=0))}function X(M,be){o._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,be),M.block_start=M.strstart,q(M.strm)}function fe(M,be){M.pending_buf[M.pending++]=be}function de(M,be){M.pending_buf[M.pending++]=be>>>8&255,M.pending_buf[M.pending++]=255&be}function ue(M,be){var me,J,Z=M.max_chain_length,oe=M.strstart,we=M.prev_length,Ne=M.nice_match,te=M.strstart>M.w_size-F?M.strstart-(M.w_size-F):0,xe=M.window,ce=M.w_mask,pe=M.prev,Ie=M.strstart+N,je=xe[oe+we-1],Pe=xe[oe+we];M.prev_length>=M.good_match&&(Z>>=2),Ne>M.lookahead&&(Ne=M.lookahead);do if(xe[(me=be)+we]===Pe&&xe[me+we-1]===je&&xe[me]===xe[oe]&&xe[++me]===xe[oe+1]){oe+=2,me++;do;while(xe[++oe]===xe[++me]&&xe[++oe]===xe[++me]&&xe[++oe]===xe[++me]&&xe[++oe]===xe[++me]&&xe[++oe]===xe[++me]&&xe[++oe]===xe[++me]&&xe[++oe]===xe[++me]&&xe[++oe]===xe[++me]&&oe<Ie);if(J=N-(Ie-oe),oe=Ie-N,we<J){if(M.match_start=be,Ne<=(we=J))break;je=xe[oe+we-1],Pe=xe[oe+we]}}while((be=pe[be&ce])>te&&--Z!=0);return we<=M.lookahead?we:M.lookahead}function Ce(M){var be,me,J,Z,oe,we,Ne,te,xe,ce,pe=M.w_size;do{if(Z=M.window_size-M.lookahead-M.strstart,M.strstart>=pe+(pe-F)){for(a.arraySet(M.window,M.window,pe,pe,0),M.match_start-=pe,M.strstart-=pe,M.block_start-=pe,be=me=M.hash_size;J=M.head[--be],M.head[be]=pe<=J?J-pe:0,--me;);for(be=me=pe;J=M.prev[--be],M.prev[be]=pe<=J?J-pe:0,--me;);Z+=pe}if(M.strm.avail_in===0)break;if(we=M.strm,Ne=M.window,te=M.strstart+M.lookahead,xe=Z,ce=void 0,ce=we.avail_in,xe<ce&&(ce=xe),me=ce===0?0:(we.avail_in-=ce,a.arraySet(Ne,we.input,we.next_in,ce,te),we.state.wrap===1?we.adler=l(we.adler,Ne,ce,te):we.state.wrap===2&&(we.adler=c(we.adler,Ne,ce,te)),we.next_in+=ce,we.total_in+=ce,ce),M.lookahead+=me,M.lookahead+M.insert>=A)for(oe=M.strstart-M.insert,M.ins_h=M.window[oe],M.ins_h=(M.ins_h<<M.hash_shift^M.window[oe+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[oe+A-1])&M.hash_mask,M.prev[oe&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=oe,oe++,M.insert--,!(M.lookahead+M.insert<A)););}while(M.lookahead<F&&M.strm.avail_in!==0)}function Ae(M,be){for(var me,J;;){if(M.lookahead<F){if(Ce(M),M.lookahead<F&&be===h)return R;if(M.lookahead===0)break}if(me=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,me=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),me!==0&&M.strstart-me<=M.w_size-F&&(M.match_length=ue(M,me)),M.match_length>=A)if(J=o._tr_tally(M,M.strstart-M.match_start,M.match_length-A),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=A){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,me=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else J=o._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(J&&(X(M,!1),M.strm.avail_out===0))return R}return M.insert=M.strstart<A-1?M.strstart:A-1,be===d?(X(M,!0),M.strm.avail_out===0?z:W):M.last_lit&&(X(M,!1),M.strm.avail_out===0)?R:B}function Ee(M,be){for(var me,J,Z;;){if(M.lookahead<F){if(Ce(M),M.lookahead<F&&be===h)return R;if(M.lookahead===0)break}if(me=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,me=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=A-1,me!==0&&M.prev_length<M.max_lazy_match&&M.strstart-me<=M.w_size-F&&(M.match_length=ue(M,me),M.match_length<=5&&(M.strategy===1||M.match_length===A&&4096<M.strstart-M.match_start)&&(M.match_length=A-1)),M.prev_length>=A&&M.match_length<=M.prev_length){for(Z=M.strstart+M.lookahead-A,J=o._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-A),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=Z&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,me=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=A-1,M.strstart++,J&&(X(M,!1),M.strm.avail_out===0))return R}else if(M.match_available){if((J=o._tr_tally(M,0,M.window[M.strstart-1]))&&X(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return R}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(J=o._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<A-1?M.strstart:A-1,be===d?(X(M,!0),M.strm.avail_out===0?z:W):M.last_lit&&(X(M,!1),M.strm.avail_out===0)?R:B}function Le(M,be,me,J,Z){this.good_length=M,this.max_lazy=be,this.nice_length=me,this.max_chain=J,this.func=Z}function Ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*T),this.dyn_dtree=new a.Buf16(2*(2*C+1)),this.bl_tree=new a.Buf16(2*(2*I+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(E+1),this.heap=new a.Buf16(2*w+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*w+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ze(M){var be;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=g,(be=M.state).pending=0,be.pending_out=0,be.wrap<0&&(be.wrap=-be.wrap),be.status=be.wrap?_:D,M.adler=be.wrap===2?0:1,be.last_flush=h,o._tr_init(be),f):K(M,p)}function gt(M){var be=Ze(M);return be===f&&function(me){me.window_size=2*me.w_size,se(me.head),me.max_lazy_match=i[me.level].max_lazy,me.good_match=i[me.level].good_length,me.nice_match=i[me.level].nice_length,me.max_chain_length=i[me.level].max_chain,me.strstart=0,me.block_start=0,me.lookahead=0,me.insert=0,me.match_length=me.prev_length=A-1,me.match_available=0,me.ins_h=0}(M.state),be}function Ct(M,be,me,J,Z,oe){if(!M)return p;var we=1;if(be===m&&(be=6),J<0?(we=0,J=-J):15<J&&(we=2,J-=16),Z<1||b<Z||me!==v||J<8||15<J||be<0||9<be||oe<0||y<oe)return K(M,p);J===8&&(J=9);var Ne=new Ke;return(M.state=Ne).strm=M,Ne.wrap=we,Ne.gzhead=null,Ne.w_bits=J,Ne.w_size=1<<Ne.w_bits,Ne.w_mask=Ne.w_size-1,Ne.hash_bits=Z+7,Ne.hash_size=1<<Ne.hash_bits,Ne.hash_mask=Ne.hash_size-1,Ne.hash_shift=~~((Ne.hash_bits+A-1)/A),Ne.window=new a.Buf8(2*Ne.w_size),Ne.head=new a.Buf16(Ne.hash_size),Ne.prev=new a.Buf16(Ne.w_size),Ne.lit_bufsize=1<<Z+6,Ne.pending_buf_size=4*Ne.lit_bufsize,Ne.pending_buf=new a.Buf8(Ne.pending_buf_size),Ne.d_buf=1*Ne.lit_bufsize,Ne.l_buf=3*Ne.lit_bufsize,Ne.level=be,Ne.strategy=oe,Ne.method=me,gt(M)}i=[new Le(0,0,0,0,function(M,be){var me=65535;for(me>M.pending_buf_size-5&&(me=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Ce(M),M.lookahead===0&&be===h)return R;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var J=M.block_start+me;if((M.strstart===0||M.strstart>=J)&&(M.lookahead=M.strstart-J,M.strstart=J,X(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-F&&(X(M,!1),M.strm.avail_out===0))return R}return M.insert=0,be===d?(X(M,!0),M.strm.avail_out===0?z:W):(M.strstart>M.block_start&&(X(M,!1),M.strm.avail_out),R)}),new Le(4,4,8,4,Ae),new Le(4,5,16,8,Ae),new Le(4,6,32,32,Ae),new Le(4,4,16,16,Ee),new Le(8,16,32,32,Ee),new Le(8,16,128,128,Ee),new Le(8,32,128,256,Ee),new Le(32,128,258,1024,Ee),new Le(32,258,258,4096,Ee)],s.deflateInit=function(M,be){return Ct(M,be,v,15,8,0)},s.deflateInit2=Ct,s.deflateReset=gt,s.deflateResetKeep=Ze,s.deflateSetHeader=function(M,be){return M&&M.state?M.state.wrap!==2?p:(M.state.gzhead=be,f):p},s.deflate=function(M,be){var me,J,Z,oe;if(!M||!M.state||5<be||be<0)return M?K(M,p):p;if(J=M.state,!M.output||!M.input&&M.avail_in!==0||J.status===666&&be!==d)return K(M,M.avail_out===0?-5:p);if(J.strm=M,me=J.last_flush,J.last_flush=be,J.status===_)if(J.wrap===2)M.adler=0,fe(J,31),fe(J,139),fe(J,8),J.gzhead?(fe(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),fe(J,255&J.gzhead.time),fe(J,J.gzhead.time>>8&255),fe(J,J.gzhead.time>>16&255),fe(J,J.gzhead.time>>24&255),fe(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),fe(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(fe(J,255&J.gzhead.extra.length),fe(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(M.adler=c(M.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(fe(J,0),fe(J,0),fe(J,0),fe(J,0),fe(J,0),fe(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),fe(J,3),J.status=D);else{var we=v+(J.w_bits-8<<4)<<8;we|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(we|=32),we+=31-we%31,J.status=D,de(J,we),J.strstart!==0&&(de(J,M.adler>>>16),de(J,65535&M.adler)),M.adler=1}if(J.status===69)if(J.gzhead.extra){for(Z=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>Z&&(M.adler=c(M.adler,J.pending_buf,J.pending-Z,Z)),q(M),Z=J.pending,J.pending!==J.pending_buf_size));)fe(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>Z&&(M.adler=c(M.adler,J.pending_buf,J.pending-Z,Z)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){Z=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>Z&&(M.adler=c(M.adler,J.pending_buf,J.pending-Z,Z)),q(M),Z=J.pending,J.pending===J.pending_buf_size)){oe=1;break}oe=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,fe(J,oe)}while(oe!==0);J.gzhead.hcrc&&J.pending>Z&&(M.adler=c(M.adler,J.pending_buf,J.pending-Z,Z)),oe===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){Z=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>Z&&(M.adler=c(M.adler,J.pending_buf,J.pending-Z,Z)),q(M),Z=J.pending,J.pending===J.pending_buf_size)){oe=1;break}oe=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,fe(J,oe)}while(oe!==0);J.gzhead.hcrc&&J.pending>Z&&(M.adler=c(M.adler,J.pending_buf,J.pending-Z,Z)),oe===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&q(M),J.pending+2<=J.pending_buf_size&&(fe(J,255&M.adler),fe(J,M.adler>>8&255),M.adler=0,J.status=D)):J.status=D),J.pending!==0){if(q(M),M.avail_out===0)return J.last_flush=-1,f}else if(M.avail_in===0&&H(be)<=H(me)&&be!==d)return K(M,-5);if(J.status===666&&M.avail_in!==0)return K(M,-5);if(M.avail_in!==0||J.lookahead!==0||be!==h&&J.status!==666){var Ne=J.strategy===2?function(te,xe){for(var ce;;){if(te.lookahead===0&&(Ce(te),te.lookahead===0)){if(xe===h)return R;break}if(te.match_length=0,ce=o._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++,ce&&(X(te,!1),te.strm.avail_out===0))return R}return te.insert=0,xe===d?(X(te,!0),te.strm.avail_out===0?z:W):te.last_lit&&(X(te,!1),te.strm.avail_out===0)?R:B}(J,be):J.strategy===3?function(te,xe){for(var ce,pe,Ie,je,Pe=te.window;;){if(te.lookahead<=N){if(Ce(te),te.lookahead<=N&&xe===h)return R;if(te.lookahead===0)break}if(te.match_length=0,te.lookahead>=A&&0<te.strstart&&(pe=Pe[Ie=te.strstart-1])===Pe[++Ie]&&pe===Pe[++Ie]&&pe===Pe[++Ie]){je=te.strstart+N;do;while(pe===Pe[++Ie]&&pe===Pe[++Ie]&&pe===Pe[++Ie]&&pe===Pe[++Ie]&&pe===Pe[++Ie]&&pe===Pe[++Ie]&&pe===Pe[++Ie]&&pe===Pe[++Ie]&&Ie<je);te.match_length=N-(je-Ie),te.match_length>te.lookahead&&(te.match_length=te.lookahead)}if(te.match_length>=A?(ce=o._tr_tally(te,1,te.match_length-A),te.lookahead-=te.match_length,te.strstart+=te.match_length,te.match_length=0):(ce=o._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++),ce&&(X(te,!1),te.strm.avail_out===0))return R}return te.insert=0,xe===d?(X(te,!0),te.strm.avail_out===0?z:W):te.last_lit&&(X(te,!1),te.strm.avail_out===0)?R:B}(J,be):i[J.level].func(J,be);if(Ne!==z&&Ne!==W||(J.status=666),Ne===R||Ne===z)return M.avail_out===0&&(J.last_flush=-1),f;if(Ne===B&&(be===1?o._tr_align(J):be!==5&&(o._tr_stored_block(J,0,0,!1),be===3&&(se(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),q(M),M.avail_out===0))return J.last_flush=-1,f}return be!==d?f:J.wrap<=0?1:(J.wrap===2?(fe(J,255&M.adler),fe(J,M.adler>>8&255),fe(J,M.adler>>16&255),fe(J,M.adler>>24&255),fe(J,255&M.total_in),fe(J,M.total_in>>8&255),fe(J,M.total_in>>16&255),fe(J,M.total_in>>24&255)):(de(J,M.adler>>>16),de(J,65535&M.adler)),q(M),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?f:1)},s.deflateEnd=function(M){var be;return M&&M.state?(be=M.state.status)!==_&&be!==69&&be!==73&&be!==91&&be!==103&&be!==D&&be!==666?K(M,p):(M.state=null,be===D?K(M,-3):f):p},s.deflateSetDictionary=function(M,be){var me,J,Z,oe,we,Ne,te,xe,ce=be.length;if(!M||!M.state||(oe=(me=M.state).wrap)===2||oe===1&&me.status!==_||me.lookahead)return p;for(oe===1&&(M.adler=l(M.adler,be,ce,0)),me.wrap=0,ce>=me.w_size&&(oe===0&&(se(me.head),me.strstart=0,me.block_start=0,me.insert=0),xe=new a.Buf8(me.w_size),a.arraySet(xe,be,ce-me.w_size,me.w_size,0),be=xe,ce=me.w_size),we=M.avail_in,Ne=M.next_in,te=M.input,M.avail_in=ce,M.next_in=0,M.input=be,Ce(me);me.lookahead>=A;){for(J=me.strstart,Z=me.lookahead-(A-1);me.ins_h=(me.ins_h<<me.hash_shift^me.window[J+A-1])&me.hash_mask,me.prev[J&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=J,J++,--Z;);me.strstart=J,me.lookahead=A-1,Ce(me)}return me.strstart+=me.lookahead,me.block_start=me.strstart,me.insert=me.lookahead,me.lookahead=0,me.match_length=me.prev_length=A-1,me.match_available=0,M.next_in=Ne,M.input=te,M.avail_in=we,me.wrap=oe,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,s){r.exports=function(i,a){var o,l,c,u,h,d,f,p,m,y,g,v,b,w,C,I,T,E,A,N,F,_,D,R,B;o=i.state,l=i.next_in,R=i.input,c=l+(i.avail_in-5),u=i.next_out,B=i.output,h=u-(a-i.avail_out),d=u+(i.avail_out-257),f=o.dmax,p=o.wsize,m=o.whave,y=o.wnext,g=o.window,v=o.hold,b=o.bits,w=o.lencode,C=o.distcode,I=(1<<o.lenbits)-1,T=(1<<o.distbits)-1;e:do{b<15&&(v+=R[l++]<<b,b+=8,v+=R[l++]<<b,b+=8),E=w[v&I];t:for(;;){if(v>>>=A=E>>>24,b-=A,(A=E>>>16&255)===0)B[u++]=65535&E;else{if(!(16&A)){if(!(64&A)){E=w[(65535&E)+(v&(1<<A)-1)];continue t}if(32&A){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}N=65535&E,(A&=15)&&(b<A&&(v+=R[l++]<<b,b+=8),N+=v&(1<<A)-1,v>>>=A,b-=A),b<15&&(v+=R[l++]<<b,b+=8,v+=R[l++]<<b,b+=8),E=C[v&T];n:for(;;){if(v>>>=A=E>>>24,b-=A,!(16&(A=E>>>16&255))){if(!(64&A)){E=C[(65535&E)+(v&(1<<A)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(F=65535&E,b<(A&=15)&&(v+=R[l++]<<b,(b+=8)<A&&(v+=R[l++]<<b,b+=8)),f<(F+=v&(1<<A)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=A,b-=A,(A=u-h)<F){if(m<(A=F-A)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(D=g,(_=0)===y){if(_+=p-A,A<N){for(N-=A;B[u++]=g[_++],--A;);_=u-F,D=B}}else if(y<A){if(_+=p+y-A,(A-=y)<N){for(N-=A;B[u++]=g[_++],--A;);if(_=0,y<N){for(N-=A=y;B[u++]=g[_++],--A;);_=u-F,D=B}}}else if(_+=y-A,A<N){for(N-=A;B[u++]=g[_++],--A;);_=u-F,D=B}for(;2<N;)B[u++]=D[_++],B[u++]=D[_++],B[u++]=D[_++],N-=3;N&&(B[u++]=D[_++],1<N&&(B[u++]=D[_++]))}else{for(_=u-F;B[u++]=B[_++],B[u++]=B[_++],B[u++]=B[_++],2<(N-=3););N&&(B[u++]=B[_++],1<N&&(B[u++]=B[_++]))}break}}break}}while(l<c&&u<d);l-=N=b>>3,v&=(1<<(b-=N<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=u<d?d-u+257:257-(u-d),o.hold=v,o.bits=b}},{}],49:[function(t,r,s){var i=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),u=1,h=2,d=0,f=-2,p=1,m=852,y=592;function g(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(_){var D;return _&&_.state?(D=_.state,_.total_in=_.total_out=D.total=0,_.msg="",D.wrap&&(_.adler=1&D.wrap),D.mode=p,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(m),D.distcode=D.distdyn=new i.Buf32(y),D.sane=1,D.back=-1,d):f}function w(_){var D;return _&&_.state?((D=_.state).wsize=0,D.whave=0,D.wnext=0,b(_)):f}function C(_,D){var R,B;return _&&_.state?(B=_.state,D<0?(R=0,D=-D):(R=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?f:(B.window!==null&&B.wbits!==D&&(B.window=null),B.wrap=R,B.wbits=D,w(_))):f}function I(_,D){var R,B;return _?(B=new v,(_.state=B).window=null,(R=C(_,D))!==d&&(_.state=null),R):f}var T,E,A=!0;function N(_){if(A){var D;for(T=new i.Buf32(512),E=new i.Buf32(32),D=0;D<144;)_.lens[D++]=8;for(;D<256;)_.lens[D++]=9;for(;D<280;)_.lens[D++]=7;for(;D<288;)_.lens[D++]=8;for(c(u,_.lens,0,288,T,0,_.work,{bits:9}),D=0;D<32;)_.lens[D++]=5;c(h,_.lens,0,32,E,0,_.work,{bits:5}),A=!1}_.lencode=T,_.lenbits=9,_.distcode=E,_.distbits=5}function F(_,D,R,B){var z,W=_.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new i.Buf8(W.wsize)),B>=W.wsize?(i.arraySet(W.window,D,R-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(B<(z=W.wsize-W.wnext)&&(z=B),i.arraySet(W.window,D,R-B,z,W.wnext),(B-=z)?(i.arraySet(W.window,D,R-B,B,0),W.wnext=B,W.whave=W.wsize):(W.wnext+=z,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=z))),0}s.inflateReset=w,s.inflateReset2=C,s.inflateResetKeep=b,s.inflateInit=function(_){return I(_,15)},s.inflateInit2=I,s.inflate=function(_,D){var R,B,z,W,K,H,se,q,X,fe,de,ue,Ce,Ae,Ee,Le,Ke,Ze,gt,Ct,M,be,me,J,Z=0,oe=new i.Buf8(4),we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return f;(R=_.state).mode===12&&(R.mode=13),K=_.next_out,z=_.output,se=_.avail_out,W=_.next_in,B=_.input,H=_.avail_in,q=R.hold,X=R.bits,fe=H,de=se,be=d;e:for(;;)switch(R.mode){case p:if(R.wrap===0){R.mode=13;break}for(;X<16;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(2&R.wrap&&q===35615){oe[R.check=0]=255&q,oe[1]=q>>>8&255,R.check=o(R.check,oe,2,0),X=q=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&q)<<8)+(q>>8))%31){_.msg="incorrect header check",R.mode=30;break}if((15&q)!=8){_.msg="unknown compression method",R.mode=30;break}if(X-=4,M=8+(15&(q>>>=4)),R.wbits===0)R.wbits=M;else if(M>R.wbits){_.msg="invalid window size",R.mode=30;break}R.dmax=1<<M,_.adler=R.check=1,R.mode=512&q?10:12,X=q=0;break;case 2:for(;X<16;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(R.flags=q,(255&R.flags)!=8){_.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){_.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=q>>8&1),512&R.flags&&(oe[0]=255&q,oe[1]=q>>>8&255,R.check=o(R.check,oe,2,0)),X=q=0,R.mode=3;case 3:for(;X<32;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}R.head&&(R.head.time=q),512&R.flags&&(oe[0]=255&q,oe[1]=q>>>8&255,oe[2]=q>>>16&255,oe[3]=q>>>24&255,R.check=o(R.check,oe,4,0)),X=q=0,R.mode=4;case 4:for(;X<16;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}R.head&&(R.head.xflags=255&q,R.head.os=q>>8),512&R.flags&&(oe[0]=255&q,oe[1]=q>>>8&255,R.check=o(R.check,oe,2,0)),X=q=0,R.mode=5;case 5:if(1024&R.flags){for(;X<16;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}R.length=q,R.head&&(R.head.extra_len=q),512&R.flags&&(oe[0]=255&q,oe[1]=q>>>8&255,R.check=o(R.check,oe,2,0)),X=q=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(H<(ue=R.length)&&(ue=H),ue&&(R.head&&(M=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),i.arraySet(R.head.extra,B,W,ue,M)),512&R.flags&&(R.check=o(R.check,B,ue,W)),H-=ue,W+=ue,R.length-=ue),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(H===0)break e;for(ue=0;M=B[W+ue++],R.head&&M&&R.length<65536&&(R.head.name+=String.fromCharCode(M)),M&&ue<H;);if(512&R.flags&&(R.check=o(R.check,B,ue,W)),H-=ue,W+=ue,M)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(H===0)break e;for(ue=0;M=B[W+ue++],R.head&&M&&R.length<65536&&(R.head.comment+=String.fromCharCode(M)),M&&ue<H;);if(512&R.flags&&(R.check=o(R.check,B,ue,W)),H-=ue,W+=ue,M)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;X<16;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(q!==(65535&R.check)){_.msg="header crc mismatch",R.mode=30;break}X=q=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),_.adler=R.check=0,R.mode=12;break;case 10:for(;X<32;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}_.adler=R.check=g(q),X=q=0,R.mode=11;case 11:if(R.havedict===0)return _.next_out=K,_.avail_out=se,_.next_in=W,_.avail_in=H,R.hold=q,R.bits=X,2;_.adler=R.check=1,R.mode=12;case 12:if(D===5||D===6)break e;case 13:if(R.last){q>>>=7&X,X-=7&X,R.mode=27;break}for(;X<3;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}switch(R.last=1&q,X-=1,3&(q>>>=1)){case 0:R.mode=14;break;case 1:if(N(R),R.mode=20,D!==6)break;q>>>=2,X-=2;break e;case 2:R.mode=17;break;case 3:_.msg="invalid block type",R.mode=30}q>>>=2,X-=2;break;case 14:for(q>>>=7&X,X-=7&X;X<32;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if((65535&q)!=(q>>>16^65535)){_.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&q,X=q=0,R.mode=15,D===6)break e;case 15:R.mode=16;case 16:if(ue=R.length){if(H<ue&&(ue=H),se<ue&&(ue=se),ue===0)break e;i.arraySet(z,B,W,ue,K),H-=ue,W+=ue,se-=ue,K+=ue,R.length-=ue;break}R.mode=12;break;case 17:for(;X<14;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(R.nlen=257+(31&q),q>>>=5,X-=5,R.ndist=1+(31&q),q>>>=5,X-=5,R.ncode=4+(15&q),q>>>=4,X-=4,286<R.nlen||30<R.ndist){_.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;X<3;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}R.lens[we[R.have++]]=7&q,q>>>=3,X-=3}for(;R.have<19;)R.lens[we[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,me={bits:R.lenbits},be=c(0,R.lens,0,19,R.lencode,0,R.work,me),R.lenbits=me.bits,be){_.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;Le=(Z=R.lencode[q&(1<<R.lenbits)-1])>>>16&255,Ke=65535&Z,!((Ee=Z>>>24)<=X);){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(Ke<16)q>>>=Ee,X-=Ee,R.lens[R.have++]=Ke;else{if(Ke===16){for(J=Ee+2;X<J;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(q>>>=Ee,X-=Ee,R.have===0){_.msg="invalid bit length repeat",R.mode=30;break}M=R.lens[R.have-1],ue=3+(3&q),q>>>=2,X-=2}else if(Ke===17){for(J=Ee+3;X<J;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}X-=Ee,M=0,ue=3+(7&(q>>>=Ee)),q>>>=3,X-=3}else{for(J=Ee+7;X<J;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}X-=Ee,M=0,ue=11+(127&(q>>>=Ee)),q>>>=7,X-=7}if(R.have+ue>R.nlen+R.ndist){_.msg="invalid bit length repeat",R.mode=30;break}for(;ue--;)R.lens[R.have++]=M}}if(R.mode===30)break;if(R.lens[256]===0){_.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,me={bits:R.lenbits},be=c(u,R.lens,0,R.nlen,R.lencode,0,R.work,me),R.lenbits=me.bits,be){_.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,me={bits:R.distbits},be=c(h,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,me),R.distbits=me.bits,be){_.msg="invalid distances set",R.mode=30;break}if(R.mode=20,D===6)break e;case 20:R.mode=21;case 21:if(6<=H&&258<=se){_.next_out=K,_.avail_out=se,_.next_in=W,_.avail_in=H,R.hold=q,R.bits=X,l(_,de),K=_.next_out,z=_.output,se=_.avail_out,W=_.next_in,B=_.input,H=_.avail_in,q=R.hold,X=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;Le=(Z=R.lencode[q&(1<<R.lenbits)-1])>>>16&255,Ke=65535&Z,!((Ee=Z>>>24)<=X);){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(Le&&!(240&Le)){for(Ze=Ee,gt=Le,Ct=Ke;Le=(Z=R.lencode[Ct+((q&(1<<Ze+gt)-1)>>Ze)])>>>16&255,Ke=65535&Z,!(Ze+(Ee=Z>>>24)<=X);){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}q>>>=Ze,X-=Ze,R.back+=Ze}if(q>>>=Ee,X-=Ee,R.back+=Ee,R.length=Ke,Le===0){R.mode=26;break}if(32&Le){R.back=-1,R.mode=12;break}if(64&Le){_.msg="invalid literal/length code",R.mode=30;break}R.extra=15&Le,R.mode=22;case 22:if(R.extra){for(J=R.extra;X<J;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}R.length+=q&(1<<R.extra)-1,q>>>=R.extra,X-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;Le=(Z=R.distcode[q&(1<<R.distbits)-1])>>>16&255,Ke=65535&Z,!((Ee=Z>>>24)<=X);){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(!(240&Le)){for(Ze=Ee,gt=Le,Ct=Ke;Le=(Z=R.distcode[Ct+((q&(1<<Ze+gt)-1)>>Ze)])>>>16&255,Ke=65535&Z,!(Ze+(Ee=Z>>>24)<=X);){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}q>>>=Ze,X-=Ze,R.back+=Ze}if(q>>>=Ee,X-=Ee,R.back+=Ee,64&Le){_.msg="invalid distance code",R.mode=30;break}R.offset=Ke,R.extra=15&Le,R.mode=24;case 24:if(R.extra){for(J=R.extra;X<J;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}R.offset+=q&(1<<R.extra)-1,q>>>=R.extra,X-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){_.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(se===0)break e;if(ue=de-se,R.offset>ue){if((ue=R.offset-ue)>R.whave&&R.sane){_.msg="invalid distance too far back",R.mode=30;break}Ce=ue>R.wnext?(ue-=R.wnext,R.wsize-ue):R.wnext-ue,ue>R.length&&(ue=R.length),Ae=R.window}else Ae=z,Ce=K-R.offset,ue=R.length;for(se<ue&&(ue=se),se-=ue,R.length-=ue;z[K++]=Ae[Ce++],--ue;);R.length===0&&(R.mode=21);break;case 26:if(se===0)break e;z[K++]=R.length,se--,R.mode=21;break;case 27:if(R.wrap){for(;X<32;){if(H===0)break e;H--,q|=B[W++]<<X,X+=8}if(de-=se,_.total_out+=de,R.total+=de,de&&(_.adler=R.check=R.flags?o(R.check,z,de,K-de):a(R.check,z,de,K-de)),de=se,(R.flags?q:g(q))!==R.check){_.msg="incorrect data check",R.mode=30;break}X=q=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;X<32;){if(H===0)break e;H--,q+=B[W++]<<X,X+=8}if(q!==(4294967295&R.total)){_.msg="incorrect length check",R.mode=30;break}X=q=0}R.mode=29;case 29:be=1;break e;case 30:be=-3;break e;case 31:return-4;case 32:default:return f}return _.next_out=K,_.avail_out=se,_.next_in=W,_.avail_in=H,R.hold=q,R.bits=X,(R.wsize||de!==_.avail_out&&R.mode<30&&(R.mode<27||D!==4))&&F(_,_.output,_.next_out,de-_.avail_out)?(R.mode=31,-4):(fe-=_.avail_in,de-=_.avail_out,_.total_in+=fe,_.total_out+=de,R.total+=de,R.wrap&&de&&(_.adler=R.check=R.flags?o(R.check,z,de,_.next_out-de):a(R.check,z,de,_.next_out-de)),_.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(fe==0&&de===0||D===4)&&be===d&&(be=-5),be)},s.inflateEnd=function(_){if(!_||!_.state)return f;var D=_.state;return D.window&&(D.window=null),_.state=null,d},s.inflateGetHeader=function(_,D){var R;return _&&_.state&&2&(R=_.state).wrap?((R.head=D).done=!1,d):f},s.inflateSetDictionary=function(_,D){var R,B=D.length;return _&&_.state?(R=_.state).wrap!==0&&R.mode!==11?f:R.mode===11&&a(1,D,B,0)!==R.check?-3:F(_,D,B,B)?(R.mode=31,-4):(R.havedict=1,d):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,s){var i=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,h,d,f,p,m,y,g){var v,b,w,C,I,T,E,A,N,F=g.bits,_=0,D=0,R=0,B=0,z=0,W=0,K=0,H=0,se=0,q=0,X=null,fe=0,de=new i.Buf16(16),ue=new i.Buf16(16),Ce=null,Ae=0;for(_=0;_<=15;_++)de[_]=0;for(D=0;D<f;D++)de[h[d+D]]++;for(z=F,B=15;1<=B&&de[B]===0;B--);if(B<z&&(z=B),B===0)return p[m++]=20971520,p[m++]=20971520,g.bits=1,0;for(R=1;R<B&&de[R]===0;R++);for(z<R&&(z=R),_=H=1;_<=15;_++)if(H<<=1,(H-=de[_])<0)return-1;if(0<H&&(u===0||B!==1))return-1;for(ue[1]=0,_=1;_<15;_++)ue[_+1]=ue[_]+de[_];for(D=0;D<f;D++)h[d+D]!==0&&(y[ue[h[d+D]]++]=D);if(T=u===0?(X=Ce=y,19):u===1?(X=a,fe-=257,Ce=o,Ae-=257,256):(X=l,Ce=c,-1),_=R,I=m,K=D=q=0,w=-1,C=(se=1<<(W=z))-1,u===1&&852<se||u===2&&592<se)return 1;for(;;){for(E=_-K,N=y[D]<T?(A=0,y[D]):y[D]>T?(A=Ce[Ae+y[D]],X[fe+y[D]]):(A=96,0),v=1<<_-K,R=b=1<<W;p[I+(q>>K)+(b-=v)]=E<<24|A<<16|N|0,b!==0;);for(v=1<<_-1;q&v;)v>>=1;if(v!==0?(q&=v-1,q+=v):q=0,D++,--de[_]==0){if(_===B)break;_=h[d+y[D]]}if(z<_&&(q&C)!==w){for(K===0&&(K=z),I+=R,H=1<<(W=_-K);W+K<B&&!((H-=de[W+K])<=0);)W++,H<<=1;if(se+=1<<W,u===1&&852<se||u===2&&592<se)return 1;p[w=q&C]=z<<24|W<<16|I-m|0}}return q!==0&&(p[I+q]=_-K<<24|64<<16|0),g.bits=z,0}},{"../utils/common":41}],51:[function(t,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,s){var i=t("../utils/common"),a=0,o=1;function l(Z){for(var oe=Z.length;0<=--oe;)Z[oe]=0}var c=0,u=29,h=256,d=h+1+u,f=30,p=19,m=2*d+1,y=15,g=16,v=7,b=256,w=16,C=17,I=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(d+2));l(F);var _=new Array(2*f);l(_);var D=new Array(512);l(D);var R=new Array(256);l(R);var B=new Array(u);l(B);var z,W,K,H=new Array(f);function se(Z,oe,we,Ne,te){this.static_tree=Z,this.extra_bits=oe,this.extra_base=we,this.elems=Ne,this.max_length=te,this.has_stree=Z&&Z.length}function q(Z,oe){this.dyn_tree=Z,this.max_code=0,this.stat_desc=oe}function X(Z){return Z<256?D[Z]:D[256+(Z>>>7)]}function fe(Z,oe){Z.pending_buf[Z.pending++]=255&oe,Z.pending_buf[Z.pending++]=oe>>>8&255}function de(Z,oe,we){Z.bi_valid>g-we?(Z.bi_buf|=oe<<Z.bi_valid&65535,fe(Z,Z.bi_buf),Z.bi_buf=oe>>g-Z.bi_valid,Z.bi_valid+=we-g):(Z.bi_buf|=oe<<Z.bi_valid&65535,Z.bi_valid+=we)}function ue(Z,oe,we){de(Z,we[2*oe],we[2*oe+1])}function Ce(Z,oe){for(var we=0;we|=1&Z,Z>>>=1,we<<=1,0<--oe;);return we>>>1}function Ae(Z,oe,we){var Ne,te,xe=new Array(y+1),ce=0;for(Ne=1;Ne<=y;Ne++)xe[Ne]=ce=ce+we[Ne-1]<<1;for(te=0;te<=oe;te++){var pe=Z[2*te+1];pe!==0&&(Z[2*te]=Ce(xe[pe]++,pe))}}function Ee(Z){var oe;for(oe=0;oe<d;oe++)Z.dyn_ltree[2*oe]=0;for(oe=0;oe<f;oe++)Z.dyn_dtree[2*oe]=0;for(oe=0;oe<p;oe++)Z.bl_tree[2*oe]=0;Z.dyn_ltree[2*b]=1,Z.opt_len=Z.static_len=0,Z.last_lit=Z.matches=0}function Le(Z){8<Z.bi_valid?fe(Z,Z.bi_buf):0<Z.bi_valid&&(Z.pending_buf[Z.pending++]=Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0}function Ke(Z,oe,we,Ne){var te=2*oe,xe=2*we;return Z[te]<Z[xe]||Z[te]===Z[xe]&&Ne[oe]<=Ne[we]}function Ze(Z,oe,we){for(var Ne=Z.heap[we],te=we<<1;te<=Z.heap_len&&(te<Z.heap_len&&Ke(oe,Z.heap[te+1],Z.heap[te],Z.depth)&&te++,!Ke(oe,Ne,Z.heap[te],Z.depth));)Z.heap[we]=Z.heap[te],we=te,te<<=1;Z.heap[we]=Ne}function gt(Z,oe,we){var Ne,te,xe,ce,pe=0;if(Z.last_lit!==0)for(;Ne=Z.pending_buf[Z.d_buf+2*pe]<<8|Z.pending_buf[Z.d_buf+2*pe+1],te=Z.pending_buf[Z.l_buf+pe],pe++,Ne===0?ue(Z,te,oe):(ue(Z,(xe=R[te])+h+1,oe),(ce=T[xe])!==0&&de(Z,te-=B[xe],ce),ue(Z,xe=X(--Ne),we),(ce=E[xe])!==0&&de(Z,Ne-=H[xe],ce)),pe<Z.last_lit;);ue(Z,b,oe)}function Ct(Z,oe){var we,Ne,te,xe=oe.dyn_tree,ce=oe.stat_desc.static_tree,pe=oe.stat_desc.has_stree,Ie=oe.stat_desc.elems,je=-1;for(Z.heap_len=0,Z.heap_max=m,we=0;we<Ie;we++)xe[2*we]!==0?(Z.heap[++Z.heap_len]=je=we,Z.depth[we]=0):xe[2*we+1]=0;for(;Z.heap_len<2;)xe[2*(te=Z.heap[++Z.heap_len]=je<2?++je:0)]=1,Z.depth[te]=0,Z.opt_len--,pe&&(Z.static_len-=ce[2*te+1]);for(oe.max_code=je,we=Z.heap_len>>1;1<=we;we--)Ze(Z,xe,we);for(te=Ie;we=Z.heap[1],Z.heap[1]=Z.heap[Z.heap_len--],Ze(Z,xe,1),Ne=Z.heap[1],Z.heap[--Z.heap_max]=we,Z.heap[--Z.heap_max]=Ne,xe[2*te]=xe[2*we]+xe[2*Ne],Z.depth[te]=(Z.depth[we]>=Z.depth[Ne]?Z.depth[we]:Z.depth[Ne])+1,xe[2*we+1]=xe[2*Ne+1]=te,Z.heap[1]=te++,Ze(Z,xe,1),2<=Z.heap_len;);Z.heap[--Z.heap_max]=Z.heap[1],function(Pe,xt){var Lt,Dt,dn,ct,Zr,Ha,$r=xt.dyn_tree,Nu=xt.max_code,xc=xt.stat_desc.static_tree,R0=xt.stat_desc.has_stree,Ip=xt.stat_desc.extra_bits,sw=xt.stat_desc.extra_base,zr=xt.stat_desc.max_length,Ap=0;for(ct=0;ct<=y;ct++)Pe.bl_count[ct]=0;for($r[2*Pe.heap[Pe.heap_max]+1]=0,Lt=Pe.heap_max+1;Lt<m;Lt++)zr<(ct=$r[2*$r[2*(Dt=Pe.heap[Lt])+1]+1]+1)&&(ct=zr,Ap++),$r[2*Dt+1]=ct,Nu<Dt||(Pe.bl_count[ct]++,Zr=0,sw<=Dt&&(Zr=Ip[Dt-sw]),Ha=$r[2*Dt],Pe.opt_len+=Ha*(ct+Zr),R0&&(Pe.static_len+=Ha*(xc[2*Dt+1]+Zr)));if(Ap!==0){do{for(ct=zr-1;Pe.bl_count[ct]===0;)ct--;Pe.bl_count[ct]--,Pe.bl_count[ct+1]+=2,Pe.bl_count[zr]--,Ap-=2}while(0<Ap);for(ct=zr;ct!==0;ct--)for(Dt=Pe.bl_count[ct];Dt!==0;)Nu<(dn=Pe.heap[--Lt])||($r[2*dn+1]!==ct&&(Pe.opt_len+=(ct-$r[2*dn+1])*$r[2*dn],$r[2*dn+1]=ct),Dt--)}}(Z,oe),Ae(xe,je,Z.bl_count)}function M(Z,oe,we){var Ne,te,xe=-1,ce=oe[1],pe=0,Ie=7,je=4;for(ce===0&&(Ie=138,je=3),oe[2*(we+1)+1]=65535,Ne=0;Ne<=we;Ne++)te=ce,ce=oe[2*(Ne+1)+1],++pe<Ie&&te===ce||(pe<je?Z.bl_tree[2*te]+=pe:te!==0?(te!==xe&&Z.bl_tree[2*te]++,Z.bl_tree[2*w]++):pe<=10?Z.bl_tree[2*C]++:Z.bl_tree[2*I]++,xe=te,je=(pe=0)===ce?(Ie=138,3):te===ce?(Ie=6,3):(Ie=7,4))}function be(Z,oe,we){var Ne,te,xe=-1,ce=oe[1],pe=0,Ie=7,je=4;for(ce===0&&(Ie=138,je=3),Ne=0;Ne<=we;Ne++)if(te=ce,ce=oe[2*(Ne+1)+1],!(++pe<Ie&&te===ce)){if(pe<je)for(;ue(Z,te,Z.bl_tree),--pe!=0;);else te!==0?(te!==xe&&(ue(Z,te,Z.bl_tree),pe--),ue(Z,w,Z.bl_tree),de(Z,pe-3,2)):pe<=10?(ue(Z,C,Z.bl_tree),de(Z,pe-3,3)):(ue(Z,I,Z.bl_tree),de(Z,pe-11,7));xe=te,je=(pe=0)===ce?(Ie=138,3):te===ce?(Ie=6,3):(Ie=7,4)}}l(H);var me=!1;function J(Z,oe,we,Ne){de(Z,(c<<1)+(Ne?1:0),3),function(te,xe,ce,pe){Le(te),fe(te,ce),fe(te,~ce),i.arraySet(te.pending_buf,te.window,xe,ce,te.pending),te.pending+=ce}(Z,oe,we)}s._tr_init=function(Z){me||(function(){var oe,we,Ne,te,xe,ce=new Array(y+1);for(te=Ne=0;te<u-1;te++)for(B[te]=Ne,oe=0;oe<1<<T[te];oe++)R[Ne++]=te;for(R[Ne-1]=te,te=xe=0;te<16;te++)for(H[te]=xe,oe=0;oe<1<<E[te];oe++)D[xe++]=te;for(xe>>=7;te<f;te++)for(H[te]=xe<<7,oe=0;oe<1<<E[te]-7;oe++)D[256+xe++]=te;for(we=0;we<=y;we++)ce[we]=0;for(oe=0;oe<=143;)F[2*oe+1]=8,oe++,ce[8]++;for(;oe<=255;)F[2*oe+1]=9,oe++,ce[9]++;for(;oe<=279;)F[2*oe+1]=7,oe++,ce[7]++;for(;oe<=287;)F[2*oe+1]=8,oe++,ce[8]++;for(Ae(F,d+1,ce),oe=0;oe<f;oe++)_[2*oe+1]=5,_[2*oe]=Ce(oe,5);z=new se(F,T,h+1,d,y),W=new se(_,E,0,f,y),K=new se(new Array(0),A,0,p,v)}(),me=!0),Z.l_desc=new q(Z.dyn_ltree,z),Z.d_desc=new q(Z.dyn_dtree,W),Z.bl_desc=new q(Z.bl_tree,K),Z.bi_buf=0,Z.bi_valid=0,Ee(Z)},s._tr_stored_block=J,s._tr_flush_block=function(Z,oe,we,Ne){var te,xe,ce=0;0<Z.level?(Z.strm.data_type===2&&(Z.strm.data_type=function(pe){var Ie,je=4093624447;for(Ie=0;Ie<=31;Ie++,je>>>=1)if(1&je&&pe.dyn_ltree[2*Ie]!==0)return a;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return o;for(Ie=32;Ie<h;Ie++)if(pe.dyn_ltree[2*Ie]!==0)return o;return a}(Z)),Ct(Z,Z.l_desc),Ct(Z,Z.d_desc),ce=function(pe){var Ie;for(M(pe,pe.dyn_ltree,pe.l_desc.max_code),M(pe,pe.dyn_dtree,pe.d_desc.max_code),Ct(pe,pe.bl_desc),Ie=p-1;3<=Ie&&pe.bl_tree[2*N[Ie]+1]===0;Ie--);return pe.opt_len+=3*(Ie+1)+5+5+4,Ie}(Z),te=Z.opt_len+3+7>>>3,(xe=Z.static_len+3+7>>>3)<=te&&(te=xe)):te=xe=we+5,we+4<=te&&oe!==-1?J(Z,oe,we,Ne):Z.strategy===4||xe===te?(de(Z,2+(Ne?1:0),3),gt(Z,F,_)):(de(Z,4+(Ne?1:0),3),function(pe,Ie,je,Pe){var xt;for(de(pe,Ie-257,5),de(pe,je-1,5),de(pe,Pe-4,4),xt=0;xt<Pe;xt++)de(pe,pe.bl_tree[2*N[xt]+1],3);be(pe,pe.dyn_ltree,Ie-1),be(pe,pe.dyn_dtree,je-1)}(Z,Z.l_desc.max_code+1,Z.d_desc.max_code+1,ce+1),gt(Z,Z.dyn_ltree,Z.dyn_dtree)),Ee(Z),Ne&&Le(Z)},s._tr_tally=function(Z,oe,we){return Z.pending_buf[Z.d_buf+2*Z.last_lit]=oe>>>8&255,Z.pending_buf[Z.d_buf+2*Z.last_lit+1]=255&oe,Z.pending_buf[Z.l_buf+Z.last_lit]=255&we,Z.last_lit++,oe===0?Z.dyn_ltree[2*we]++:(Z.matches++,oe--,Z.dyn_ltree[2*(R[we]+h+1)]++,Z.dyn_dtree[2*X(oe)]++),Z.last_lit===Z.lit_bufsize-1},s._tr_align=function(Z){de(Z,2,3),ue(Z,b,F),function(oe){oe.bi_valid===16?(fe(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)}(Z)}},{"../utils/common":41}],53:[function(t,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,s){(function(i){(function(a,o){if(!a.setImmediate){var l,c,u,h,d=1,f={},p=!1,m=a.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(a);y=y&&y.setTimeout?y:a,l={}.toString.call(a.process)==="[object process]"?function(w){process.nextTick(function(){v(w)})}:function(){if(a.postMessage&&!a.importScripts){var w=!0,C=a.onmessage;return a.onmessage=function(){w=!1},a.postMessage("","*"),a.onmessage=C,w}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",b,!1):a.attachEvent("onmessage",b),function(w){a.postMessage(h+w,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(w){v(w.data)},function(w){u.port2.postMessage(w)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(w){var C=m.createElement("script");C.onreadystatechange=function(){v(w),C.onreadystatechange=null,c.removeChild(C),C=null},c.appendChild(C)}):function(w){setTimeout(v,0,w)},y.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var C=new Array(arguments.length-1),I=0;I<C.length;I++)C[I]=arguments[I+1];var T={callback:w,args:C};return f[d]=T,l(d),d++},y.clearImmediate=g}function g(w){delete f[w]}function v(w){if(p)setTimeout(v,0,w);else{var C=f[w];if(C){p=!0;try{(function(I){var T=I.callback,E=I.args;switch(E.length){case 0:T();break;case 1:T(E[0]);break;case 2:T(E[0],E[1]);break;case 3:T(E[0],E[1],E[2]);break;default:T.apply(o,E)}})(C)}finally{g(w),p=!1}}}}function b(w){w.source===a&&typeof w.data=="string"&&w.data.indexOf(h)===0&&v(+w.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Yl<"u"?Yl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hae);var v9e=hae.exports;const x9e=$k(v9e);async function b9e(n,e){e==null||e("Reading PowerPoint file...");try{const t=await n.arrayBuffer(),r=await x9e.loadAsync(t);e==null||e("Extracting slides...");const s=Object.keys(r.files).filter(l=>l.match(/ppt\/slides\/slide\d+\.xml$/)).sort((l,c)=>{const u=parseInt(l.match(/slide(\d+)/)[1]),h=parseInt(c.match(/slide(\d+)/)[1]);return u-h});if(s.length===0)throw new Error("No slides found in PowerPoint file");e==null||e(`Found ${s.length} slides...`);const i={};if(r.folder("ppt/media")){const l=Object.keys(r.files).filter(c=>c.startsWith("ppt/media/"));for(const c of l){const u=r.files[c];if(!u.dir){const h=await u.async("blob"),d=c.split("/").pop();i[d]=URL.createObjectURL(h)}}}const o=[];for(let l=0;l<s.length;l++){const c=s[l],u=l+1;e==null||e(`Processing slide ${u}/${s.length}...`);const h=c.replace("slides/","slides/_rels/").replace(".xml",".xml.rels");let d=[];r.files[h]&&(d=((await r.files[h].async("text")).match(/Target="\.\.\/media\/[^"]+"/g)||[]).map(v=>{var w;const b=(w=v.match(/media\/([^"]+)/))==null?void 0:w[1];return b&&i[b]?i[b]:null}).filter(Boolean));const f=await r.files[c].async("text"),p=w9e(f),m=await S9e(u,p,d,e);o.push({id:u,canvas:m,width:m.width,height:m.height,name:`Slide ${u}`,dataUrl:m.toDataURL("image/png"),textContent:p,hasImages:d.length>0})}return Object.values(i).forEach(l=>URL.revokeObjectURL(l)),e==null||e("PowerPoint extraction complete!"),o}catch(t){throw console.error("PPTX extraction error:",t),new Error(`Failed to extract PowerPoint: ${t.message}`)}}function w9e(n){const e=[];return(n.match(/<a:t[^>]*>([^<]*)<\/a:t>/g)||[]).forEach(r=>{const s=r.replace(/<[^>]+>/g,"").trim();s&&e.push(s)}),e}async function S9e(n,e,t,r){const s=document.createElement("canvas");s.width=1280,s.height=720;const i=s.getContext("2d");if(i.fillStyle="#ffffff",i.fillRect(0,0,s.width,s.height),t.length>0)try{const a=await k9e(t[0]),o=Math.min(s.width/a.width,s.height/a.height),l=(s.width-a.width*o)/2,c=(s.height-a.height*o)/2;i.drawImage(a,l,c,a.width*o,a.height*o)}catch(a){console.warn("Failed to load slide image:",a)}if(e.length>0&&t.length===0){i.fillStyle="#1e293b",i.fillRect(0,0,s.width,s.height),i.fillStyle="#64748b",i.font="bold 24px Inter, sans-serif",i.fillText(`Slide ${n}`,40,50),i.fillStyle="#ffffff",i.font="28px Inter, sans-serif";let a=120;const o=40,l=s.width-80;e.forEach((c,u)=>{u===0?(i.font="bold 36px Inter, sans-serif",i.fillStyle="#f1f5f9"):(i.font="24px Inter, sans-serif",i.fillStyle="#cbd5e1");const h=c.split(" ");let d="";h.forEach(f=>{const p=d+f+" ";i.measureText(p).width>l&&d!==""?(i.fillText(d,40,a),d=f+" ",a+=o):d=p}),i.fillText(d,40,a),a+=o*1.5,a>s.height-40})}return i.fillStyle="rgba(100, 116, 139, 0.5)",i.font="bold 48px Inter, sans-serif",i.fillText(n.toString(),s.width-60,s.height-30),s}function k9e(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=t,r.src=n})}const C9e=()=>{};var ZH={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dae=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},T9e=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],o=n[t++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},fae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,o=a?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=i>>2,h=(i&3)<<4|o>>4;let d=(o&15)<<2|c>>6,f=c&63;l||(f=64,a||(d=64)),r.push(t[u],t[h],t[d],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dae(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):T9e(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],o=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const h=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||o==null||c==null||h==null)throw new E9e;const d=i<<2|o>>4;if(r.push(d),c!==64){const f=o<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class E9e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I9e=function(n){const e=dae(n);return fae.encodeByteArray(e,!0)},i_=function(n){return I9e(n).replace(/\./g,"")},A9e=function(n){try{return fae.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9e=()=>N9e().__FIREBASE_DEFAULTS__,R9e=()=>{if(typeof process>"u"||typeof ZH>"u")return;const n=ZH.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},D9e=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&A9e(n[1]);return e&&JSON.parse(e)},YV=()=>{try{return C9e()||_9e()||R9e()||D9e()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},F9e=n=>{var e,t;return(t=(e=YV())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},P9e=n=>{const e=F9e(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pae=()=>{var n;return(n=YV())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L9e(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9e(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[i_(JSON.stringify(t)),i_(JSON.stringify(a)),""].join(".")}const Z1={};function $9e(){const n={prod:[],emulator:[]};for(const e of Object.keys(Z1))Z1[e]?n.emulator.push(e):n.prod.push(e);return n}function z9e(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let QH=!1;function B9e(n,e){if(typeof window>"u"||typeof document>"u"||!ZV(window.location.host)||Z1[n]===e||Z1[n]||QH)return;Z1[n]=e;function t(d){return`__firebase__banner__${d}`}const r="__firebase__banner",i=$9e().prod.length>0;function a(){const d=document.getElementById(r);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,f){d.setAttribute("width","24"),d.setAttribute("id",f),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{QH=!0,a()},d}function u(d,f){d.setAttribute("id",f),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=z9e(r),f=t("text"),p=document.getElementById(f)||document.createElement("span"),m=t("learnmore"),y=document.getElementById(m)||document.createElement("a"),g=t("preprendIcon"),v=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const b=d.element;o(b),u(y,m);const w=c();l(v,g),b.append(v,p,y,w),document.body.appendChild(b)}i?(p.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j9e(){var e;const n=(e=YV())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mae(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function U9e(){return!j9e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QV(){try{return typeof indexedDB=="object"}catch{return!1}}function JV(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}function gae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9e="FirebaseError";class Tp extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=W9e,Object.setPrototypeOf(this,Tp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,YF.prototype.create)}}class YF{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?G9e(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Tp(s,o,r)}}function G9e(n,e){return n.replace(H9e,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const H9e=/\{\$([^}]+)}/g;function n2(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(JH(i)&&JH(a)){if(!n2(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function JH(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9e=1e3,K9e=2,X9e=4*60*60*1e3,Y9e=.5;function e9(n,e=q9e,t=K9e){const r=e*Math.pow(t,n),s=Math.round(Y9e*r*(Math.random()-.5)*2);return Math.min(X9e,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n){return n&&n._delegate?n._delegate:n}class zh{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9e{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new O9e;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J9e(e))try{this.getOrInitializeService({instanceIdentifier:Wp})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wp){return this.instances.has(e)}getOptions(e=Wp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q9e(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wp){return this.component?this.component.multipleInstances?e:Wp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q9e(n){return n===Wp?void 0:n}function J9e(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Z9e(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xn||(xn={}));const t7e={debug:xn.DEBUG,verbose:xn.VERBOSE,info:xn.INFO,warn:xn.WARN,error:xn.ERROR,silent:xn.SILENT},n7e=xn.INFO,r7e={[xn.DEBUG]:"log",[xn.VERBOSE]:"log",[xn.INFO]:"info",[xn.WARN]:"warn",[xn.ERROR]:"error"},s7e=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=r7e[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ej{constructor(e){this.name=e,this._logLevel=n7e,this._logHandler=s7e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t7e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xn.DEBUG,...e),this._logHandler(this,xn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xn.VERBOSE,...e),this._logHandler(this,xn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xn.INFO,...e),this._logHandler(this,xn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xn.WARN,...e),this._logHandler(this,xn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xn.ERROR,...e),this._logHandler(this,xn.ERROR,...e)}}const i7e=(n,e)=>e.some(t=>n instanceof t);let t9,n9;function a7e(){return t9||(t9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o7e(){return n9||(n9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yae=new WeakMap,W4=new WeakMap,vae=new WeakMap,ZO=new WeakMap,tj=new WeakMap;function l7e(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t(Af(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&yae.set(t,n)}).catch(()=>{}),tj.set(e,n),e}function c7e(n){if(W4.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});W4.set(n,e)}let G4={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return W4.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vae.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Af(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function u7e(n){G4=n(G4)}function h7e(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(QO(this),e,...t);return vae.set(r,e.sort?e.sort():[e]),Af(r)}:o7e().includes(n)?function(...e){return n.apply(QO(this),e),Af(yae.get(this))}:function(...e){return Af(n.apply(QO(this),e))}}function d7e(n){return typeof n=="function"?h7e(n):(n instanceof IDBTransaction&&c7e(n),i7e(n,a7e())?new Proxy(n,G4):n)}function Af(n){if(n instanceof IDBRequest)return l7e(n);if(ZO.has(n))return ZO.get(n);const e=d7e(n);return e!==n&&(ZO.set(n,e),tj.set(e,n)),e}const QO=n=>tj.get(n);function xae(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),o=Af(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Af(a.result),l.oldVersion,l.newVersion,Af(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const f7e=["get","getKey","getAll","getAllKeys","count"],p7e=["put","add","delete","clear"],JO=new Map;function r9(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(JO.get(e))return JO.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=p7e.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||f7e.includes(t)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[t](...o),s&&l.done]))[0]};return JO.set(e,i),i}u7e(n=>({...n,get:(e,t,r)=>r9(e,t)||n.get(e,t,r),has:(e,t)=>!!r9(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g7e(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function g7e(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const H4="@firebase/app",s9="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new ej("@firebase/app"),y7e="@firebase/app-compat",v7e="@firebase/analytics-compat",x7e="@firebase/analytics",b7e="@firebase/app-check-compat",w7e="@firebase/app-check",S7e="@firebase/auth",k7e="@firebase/auth-compat",C7e="@firebase/database",T7e="@firebase/data-connect",E7e="@firebase/database-compat",I7e="@firebase/functions",A7e="@firebase/functions-compat",N7e="@firebase/installations",_7e="@firebase/installations-compat",R7e="@firebase/messaging",D7e="@firebase/messaging-compat",F7e="@firebase/performance",P7e="@firebase/performance-compat",O7e="@firebase/remote-config",L7e="@firebase/remote-config-compat",M7e="@firebase/storage",$7e="@firebase/storage-compat",z7e="@firebase/firestore",B7e="@firebase/ai",V7e="@firebase/firestore-compat",j7e="firebase",U7e="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="[DEFAULT]",W7e={[H4]:"fire-core",[y7e]:"fire-core-compat",[x7e]:"fire-analytics",[v7e]:"fire-analytics-compat",[w7e]:"fire-app-check",[b7e]:"fire-app-check-compat",[S7e]:"fire-auth",[k7e]:"fire-auth-compat",[C7e]:"fire-rtdb",[T7e]:"fire-data-connect",[E7e]:"fire-rtdb-compat",[I7e]:"fire-fn",[A7e]:"fire-fn-compat",[N7e]:"fire-iid",[_7e]:"fire-iid-compat",[R7e]:"fire-fcm",[D7e]:"fire-fcm-compat",[F7e]:"fire-perf",[P7e]:"fire-perf-compat",[O7e]:"fire-rc",[L7e]:"fire-rc-compat",[M7e]:"fire-gcs",[$7e]:"fire-gcs-compat",[z7e]:"fire-fst",[V7e]:"fire-fst-compat",[B7e]:"fire-vertex","fire-js":"fire-js",[j7e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map,G7e=new Map,K4=new Map;function i9(n,e){try{n.container.addComponent(e)}catch(t){Bh.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tp(n){const e=n.name;if(K4.has(e))return Bh.debug(`There were multiple attempts to register component ${e}.`),!1;K4.set(e,n);for(const t of a_.values())i9(t,n);for(const t of G7e.values())i9(t,n);return!0}function WT(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function H7e(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nf=new YF("app","Firebase",q7e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7e{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7e=U7e;function bae(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:q4,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Nf.create("bad-app-name",{appName:String(s)});if(t||(t=pae()),!t)throw Nf.create("no-options");const i=a_.get(s);if(i){if(n2(t,i.options)&&n2(r,i.config))return i;throw Nf.create("duplicate-app",{appName:s})}const a=new e7e(s);for(const l of K4.values())a.addComponent(l);const o=new K7e(t,r,a);return a_.set(s,o),o}function wae(n=q4){const e=a_.get(n);if(!e&&n===q4&&pae())return bae();if(!e)throw Nf.create("no-app",{appName:n});return e}function fu(n,e,t){let r=W7e[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bh.warn(a.join(" "));return}tp(new zh(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7e="firebase-heartbeat-database",Z7e=1,r2="firebase-heartbeat-store";let e3=null;function Sae(){return e3||(e3=xae(Y7e,Z7e,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(r2)}catch(t){console.warn(t)}}}}).catch(n=>{throw Nf.create("idb-open",{originalErrorMessage:n.message})})),e3}async function Q7e(n){try{const t=(await Sae()).transaction(r2),r=await t.objectStore(r2).get(kae(n));return await t.done,r}catch(e){if(e instanceof Tp)Bh.warn(e.message);else{const t=Nf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bh.warn(t.message)}}}async function a9(n,e){try{const r=(await Sae()).transaction(r2,"readwrite");await r.objectStore(r2).put(e,kae(n)),await r.done}catch(t){if(t instanceof Tp)Bh.warn(t.message);else{const r=Nf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bh.warn(r.message)}}}function kae(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7e=1024,eqe=30;class tqe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rqe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=o9();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>eqe){const a=sqe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bh.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=o9(),{heartbeatsToSend:r,unsentEntries:s}=nqe(this._heartbeatsCache.heartbeats),i=i_(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Bh.warn(t),""}}}function o9(){return new Date().toISOString().substring(0,10)}function nqe(n,e=J7e){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),l9(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),l9(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class rqe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QV()?JV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Q7e(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return a9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return a9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function l9(n){return i_(JSON.stringify({version:2,heartbeats:n})).length}function sqe(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iqe(n){tp(new zh("platform-logger",e=>new m7e(e),"PRIVATE")),tp(new zh("heartbeat",e=>new tqe(e),"PRIVATE")),fu(H4,s9,n),fu(H4,s9,"esm2020"),fu("fire-js","")}iqe("");var aqe="firebase",oqe="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fu(aqe,oqe,"app");const Cae="@firebase/installations",nj="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tae=1e4,Eae=`w:${nj}`,Iae="FIS_v2",lqe="https://firebaseinstallations.googleapis.com/v1",cqe=60*60*1e3,uqe="installations",hqe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dqe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Yg=new YF(uqe,hqe,dqe);function Aae(n){return n instanceof Tp&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nae({projectId:n}){return`${lqe}/projects/${n}/installations`}function _ae(n){return{token:n.token,requestStatus:2,expiresIn:pqe(n.expiresIn),creationTime:Date.now()}}async function Rae(n,e){const r=(await e.json()).error;return Yg.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Dae({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function fqe(n,{refreshToken:e}){const t=Dae(n);return t.append("Authorization",mqe(e)),t}async function Fae(n){const e=await n();return e.status>=500&&e.status<600?n():e}function pqe(n){return Number(n.replace("s","000"))}function mqe(n){return`${Iae} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gqe({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Nae(n),s=Dae(n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:t,authVersion:Iae,appId:n.appId,sdkVersion:Eae},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await Fae(()=>fetch(r,o));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:_ae(c.authToken)}}else throw await Rae("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pae(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yqe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vqe=/^[cdef][\w-]{21}$/,X4="";function xqe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=bqe(n);return vqe.test(t)?t:X4}catch{return X4}}function bqe(n){return yqe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oae=new Map;function Lae(n,e){const t=ZF(n);Mae(t,e),wqe(t,e)}function Mae(n,e){const t=Oae.get(n);if(t)for(const r of t)r(e)}function wqe(n,e){const t=Sqe();t&&t.postMessage({key:n,fid:e}),kqe()}let lm=null;function Sqe(){return!lm&&"BroadcastChannel"in self&&(lm=new BroadcastChannel("[Firebase] FID Change"),lm.onmessage=n=>{Mae(n.data.key,n.data.fid)}),lm}function kqe(){Oae.size===0&&lm&&(lm.close(),lm=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cqe="firebase-installations-database",Tqe=1,Zg="firebase-installations-store";let t3=null;function rj(){return t3||(t3=xae(Cqe,Tqe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Zg)}}})),t3}async function o_(n,e){const t=ZF(n),s=(await rj()).transaction(Zg,"readwrite"),i=s.objectStore(Zg),a=await i.get(t);return await i.put(e,t),await s.done,(!a||a.fid!==e.fid)&&Lae(n,e.fid),e}async function $ae(n){const e=ZF(n),r=(await rj()).transaction(Zg,"readwrite");await r.objectStore(Zg).delete(e),await r.done}async function QF(n,e){const t=ZF(n),s=(await rj()).transaction(Zg,"readwrite"),i=s.objectStore(Zg),a=await i.get(t),o=e(a);return o===void 0?await i.delete(t):await i.put(o,t),await s.done,o&&(!a||a.fid!==o.fid)&&Lae(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(n){let e;const t=await QF(n.appConfig,r=>{const s=Eqe(r),i=Iqe(n,s);return e=i.registrationPromise,i.installationEntry});return t.fid===X4?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Eqe(n){const e=n||{fid:xqe(),registrationStatus:0};return zae(e)}function Iqe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Yg.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Aqe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Nqe(n)}:{installationEntry:e}}async function Aqe(n,e){try{const t=await gqe(n,e);return o_(n.appConfig,t)}catch(t){throw Aae(t)&&t.customData.serverCode===409?await $ae(n.appConfig):await o_(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Nqe(n){let e=await c9(n.appConfig);for(;e.registrationStatus===1;)await Pae(100),e=await c9(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await sj(n);return r||t}return e}function c9(n){return QF(n,e=>{if(!e)throw Yg.create("installation-not-found");return zae(e)})}function zae(n){return _qe(n)?{fid:n.fid,registrationStatus:0}:n}function _qe(n){return n.registrationStatus===1&&n.registrationTime+Tae<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rqe({appConfig:n,heartbeatServiceProvider:e},t){const r=Dqe(n,t),s=fqe(n,t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:Eae,appId:n.appId}},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await Fae(()=>fetch(r,o));if(l.ok){const c=await l.json();return _ae(c)}else throw await Rae("Generate Auth Token",l)}function Dqe(n,{fid:e}){return`${Nae(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(n,e=!1){let t;const r=await QF(n.appConfig,i=>{if(!Bae(i))throw Yg.create("not-registered");const a=i.authToken;if(!e&&Oqe(a))return i;if(a.requestStatus===1)return t=Fqe(n,e),i;{if(!navigator.onLine)throw Yg.create("app-offline");const o=Mqe(i);return t=Pqe(n,o),o}});return t?await t:r.authToken}async function Fqe(n,e){let t=await u9(n.appConfig);for(;t.authToken.requestStatus===1;)await Pae(100),t=await u9(n.appConfig);const r=t.authToken;return r.requestStatus===0?ij(n,e):r}function u9(n){return QF(n,e=>{if(!Bae(e))throw Yg.create("not-registered");const t=e.authToken;return $qe(t)?{...e,authToken:{requestStatus:0}}:e})}async function Pqe(n,e){try{const t=await Rqe(n,e),r={...e,authToken:t};return await o_(n.appConfig,r),t}catch(t){if(Aae(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await $ae(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await o_(n.appConfig,r)}throw t}}function Bae(n){return n!==void 0&&n.registrationStatus===2}function Oqe(n){return n.requestStatus===2&&!Lqe(n)}function Lqe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+cqe}function Mqe(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function $qe(n){return n.requestStatus===1&&n.requestTime+Tae<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zqe(n){const e=n,{installationEntry:t,registrationPromise:r}=await sj(e);return r?r.catch(console.error):ij(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bqe(n,e=!1){const t=n;return await Vqe(t),(await ij(t,e)).token}async function Vqe(n){const{registrationPromise:e}=await sj(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jqe(n){if(!n||!n.options)throw n3("App Configuration");if(!n.name)throw n3("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw n3(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function n3(n){return Yg.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae="installations",Uqe="installations-internal",Wqe=n=>{const e=n.getProvider("app").getImmediate(),t=jqe(e),r=WT(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Gqe=n=>{const e=n.getProvider("app").getImmediate(),t=WT(e,Vae).getImmediate();return{getId:()=>zqe(t),getToken:s=>Bqe(t,s)}};function Hqe(){tp(new zh(Vae,Wqe,"PUBLIC")),tp(new zh(Uqe,Gqe,"PRIVATE"))}Hqe();fu(Cae,nj);fu(Cae,nj,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="analytics",qqe="firebase_id",Kqe="origin",Xqe=60*1e3,Yqe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",aj="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new ej("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zqe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Eo=new YF("analytics","Analytics",Zqe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qqe(n){if(!n.startsWith(aj)){const e=Eo.create("invalid-gtag-resource",{gtagURL:n});return aa.warn(e.message),""}return n}function jae(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Jqe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function eKe(n,e){const t=Jqe("firebase-js-sdk-policy",{createScriptURL:Qqe}),r=document.createElement("script"),s=`${aj}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function tKe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function nKe(n,e,t,r,s,i){const a=r[s];try{if(a)await e[a];else{const l=(await jae(t)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(o){aa.error(o)}n("config",s,i)}async function rKe(n,e,t,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const o=await jae(t);for(const l of a){const c=o.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",r,s||{})}catch(i){aa.error(i)}}function sKe(n,e,t,r){async function s(i,...a){try{if(i==="event"){const[o,l]=a;await rKe(n,e,t,o,l)}else if(i==="config"){const[o,l]=a;await nKe(n,e,t,r,o,l)}else if(i==="consent"){const[o,l]=a;n("consent",o,l)}else if(i==="get"){const[o,l,c]=a;n("get",o,l,c)}else if(i==="set"){const[o]=a;n("set",o)}else n(i,...a)}catch(o){aa.error(o)}}return s}function iKe(n,e,t,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=sKe(i,n,e,t),{gtagCore:i,wrappedGtag:window[s]}}function aKe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(aj)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oKe=30,lKe=1e3;class cKe{constructor(e={},t=lKe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Uae=new cKe;function uKe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function hKe(n){var a;const{appId:e,apiKey:t}=n,r={method:"GET",headers:uKe(t)},s=Yqe.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();(a=l.error)!=null&&a.message&&(o=l.error.message)}catch{}throw Eo.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function dKe(n,e=Uae,t){const{appId:r,apiKey:s,measurementId:i}=n.options;if(!r)throw Eo.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Eo.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new mKe;return setTimeout(async()=>{o.abort()},Xqe),Wae({appId:r,apiKey:s,measurementId:i},a,o,e)}async function Wae(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=Uae){var o;const{appId:i,measurementId:a}=n;try{await fKe(r,e)}catch(l){if(a)return aa.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:a};throw l}try{const l=await hKe(n);return s.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!pKe(c)){if(s.deleteThrottleMetadata(i),a)return aa.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw l}const u=Number((o=c==null?void 0:c.customData)==null?void 0:o.httpStatus)===503?e9(t,s.intervalMillis,oKe):e9(t,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return s.setThrottleMetadata(i,h),aa.debug(`Calling attemptFetch again in ${u} millis`),Wae(n,h,r,s)}}function fKe(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(i),r(Eo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pKe(n){if(!(n instanceof Tp)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class mKe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function gKe(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const i=await e,a={...r,send_to:i};n("event",t,a)}}async function yKe(n,e,t,r){if(r&&r.global){const s={};for(const i of Object.keys(t))s[`user_properties.${i}`]=t[i];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vKe(){if(QV())try{await JV()}catch(n){return aa.warn(Eo.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return aa.warn(Eo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function xKe(n,e,t,r,s,i,a){const o=dKe(n);o.then(d=>{t[d.measurementId]=d.appId,n.options.measurementId&&d.measurementId!==n.options.measurementId&&aa.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${d.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(d=>aa.error(d)),e.push(o);const l=vKe().then(d=>{if(d)return r.getId()}),[c,u]=await Promise.all([o,l]);aKe(i)||eKe(i,c.measurementId),s("js",new Date);const h=(a==null?void 0:a.config)??{};return h[Kqe]="firebase",h.update=!0,u!=null&&(h[qqe]=u),s("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bKe{constructor(e){this.app=e}_delete(){return delete Wy[this.app.options.appId],Promise.resolve()}}let Wy={},h9=[];const d9={};let r3="dataLayer",wKe="gtag",f9,oj,p9=!1;function SKe(){const n=[];if(mae()&&n.push("This is a browser extension environment."),gae()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Eo.create("invalid-analytics-context",{errorInfo:e});aa.warn(t.message)}}function kKe(n,e,t){SKe();const r=n.options.appId;if(!r)throw Eo.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)aa.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Eo.create("no-api-key");if(Wy[r]!=null)throw Eo.create("already-exists",{id:r});if(!p9){tKe(r3);const{wrappedGtag:i,gtagCore:a}=iKe(Wy,h9,d9,r3,wKe);oj=i,f9=a,p9=!0}return Wy[r]=xKe(n,h9,d9,e,f9,r3,t),new bKe(n)}function CKe(n=wae()){n=$h(n);const e=WT(n,l_);return e.isInitialized()?e.getImmediate():TKe(n)}function TKe(n,e={}){const t=WT(n,l_);if(t.isInitialized()){const s=t.getImmediate();if(n2(e,t.getOptions()))return s;throw Eo.create("already-initialized")}return t.initialize({options:e})}async function EKe(){if(mae()||!gae()||!QV())return!1;try{return await JV()}catch{return!1}}function IKe(n,e,t){n=$h(n),yKe(oj,Wy[n.app.options.appId],e,t).catch(r=>aa.error(r))}function Gae(n,e,t,r){n=$h(n),gKe(oj,Wy[n.app.options.appId],e,t,r).catch(s=>aa.error(s))}const m9="@firebase/analytics",g9="0.10.19";function AKe(){tp(new zh(l_,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return kKe(r,s,t)},"PUBLIC")),tp(new zh("analytics-internal",n,"PRIVATE")),fu(m9,g9),fu(m9,g9,"esm2020");function n(e){try{const t=e.getProvider(l_).getImmediate();return{logEvent:(r,s,i)=>Gae(t,r,s,i),setUserProperties:(r,s)=>IKe(t,r,s)}}catch(t){throw Eo.create("interop-component-reg-failed",{reason:t})}}}AKe();var y9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _f,Hae;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function A(){}A.prototype=E.prototype,T.F=E.prototype,T.prototype=new A,T.prototype.constructor=T,T.D=function(N,F,_){for(var D=Array(arguments.length-2),R=2;R<arguments.length;R++)D[R-2]=arguments[R];return E.prototype[F].apply(N,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,E,A){A||(A=0);const N=Array(16);if(typeof E=="string")for(var F=0;F<16;++F)N[F]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(F=0;F<16;++F)N[F]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=T.g[0],A=T.g[1],F=T.g[2];let _=T.g[3],D;D=E+(_^A&(F^_))+N[0]+3614090360&4294967295,E=A+(D<<7&4294967295|D>>>25),D=_+(F^E&(A^F))+N[1]+3905402710&4294967295,_=E+(D<<12&4294967295|D>>>20),D=F+(A^_&(E^A))+N[2]+606105819&4294967295,F=_+(D<<17&4294967295|D>>>15),D=A+(E^F&(_^E))+N[3]+3250441966&4294967295,A=F+(D<<22&4294967295|D>>>10),D=E+(_^A&(F^_))+N[4]+4118548399&4294967295,E=A+(D<<7&4294967295|D>>>25),D=_+(F^E&(A^F))+N[5]+1200080426&4294967295,_=E+(D<<12&4294967295|D>>>20),D=F+(A^_&(E^A))+N[6]+2821735955&4294967295,F=_+(D<<17&4294967295|D>>>15),D=A+(E^F&(_^E))+N[7]+4249261313&4294967295,A=F+(D<<22&4294967295|D>>>10),D=E+(_^A&(F^_))+N[8]+1770035416&4294967295,E=A+(D<<7&4294967295|D>>>25),D=_+(F^E&(A^F))+N[9]+2336552879&4294967295,_=E+(D<<12&4294967295|D>>>20),D=F+(A^_&(E^A))+N[10]+4294925233&4294967295,F=_+(D<<17&4294967295|D>>>15),D=A+(E^F&(_^E))+N[11]+2304563134&4294967295,A=F+(D<<22&4294967295|D>>>10),D=E+(_^A&(F^_))+N[12]+1804603682&4294967295,E=A+(D<<7&4294967295|D>>>25),D=_+(F^E&(A^F))+N[13]+4254626195&4294967295,_=E+(D<<12&4294967295|D>>>20),D=F+(A^_&(E^A))+N[14]+2792965006&4294967295,F=_+(D<<17&4294967295|D>>>15),D=A+(E^F&(_^E))+N[15]+1236535329&4294967295,A=F+(D<<22&4294967295|D>>>10),D=E+(F^_&(A^F))+N[1]+4129170786&4294967295,E=A+(D<<5&4294967295|D>>>27),D=_+(A^F&(E^A))+N[6]+3225465664&4294967295,_=E+(D<<9&4294967295|D>>>23),D=F+(E^A&(_^E))+N[11]+643717713&4294967295,F=_+(D<<14&4294967295|D>>>18),D=A+(_^E&(F^_))+N[0]+3921069994&4294967295,A=F+(D<<20&4294967295|D>>>12),D=E+(F^_&(A^F))+N[5]+3593408605&4294967295,E=A+(D<<5&4294967295|D>>>27),D=_+(A^F&(E^A))+N[10]+38016083&4294967295,_=E+(D<<9&4294967295|D>>>23),D=F+(E^A&(_^E))+N[15]+3634488961&4294967295,F=_+(D<<14&4294967295|D>>>18),D=A+(_^E&(F^_))+N[4]+3889429448&4294967295,A=F+(D<<20&4294967295|D>>>12),D=E+(F^_&(A^F))+N[9]+568446438&4294967295,E=A+(D<<5&4294967295|D>>>27),D=_+(A^F&(E^A))+N[14]+3275163606&4294967295,_=E+(D<<9&4294967295|D>>>23),D=F+(E^A&(_^E))+N[3]+4107603335&4294967295,F=_+(D<<14&4294967295|D>>>18),D=A+(_^E&(F^_))+N[8]+1163531501&4294967295,A=F+(D<<20&4294967295|D>>>12),D=E+(F^_&(A^F))+N[13]+2850285829&4294967295,E=A+(D<<5&4294967295|D>>>27),D=_+(A^F&(E^A))+N[2]+4243563512&4294967295,_=E+(D<<9&4294967295|D>>>23),D=F+(E^A&(_^E))+N[7]+1735328473&4294967295,F=_+(D<<14&4294967295|D>>>18),D=A+(_^E&(F^_))+N[12]+2368359562&4294967295,A=F+(D<<20&4294967295|D>>>12),D=E+(A^F^_)+N[5]+4294588738&4294967295,E=A+(D<<4&4294967295|D>>>28),D=_+(E^A^F)+N[8]+2272392833&4294967295,_=E+(D<<11&4294967295|D>>>21),D=F+(_^E^A)+N[11]+1839030562&4294967295,F=_+(D<<16&4294967295|D>>>16),D=A+(F^_^E)+N[14]+4259657740&4294967295,A=F+(D<<23&4294967295|D>>>9),D=E+(A^F^_)+N[1]+2763975236&4294967295,E=A+(D<<4&4294967295|D>>>28),D=_+(E^A^F)+N[4]+1272893353&4294967295,_=E+(D<<11&4294967295|D>>>21),D=F+(_^E^A)+N[7]+4139469664&4294967295,F=_+(D<<16&4294967295|D>>>16),D=A+(F^_^E)+N[10]+3200236656&4294967295,A=F+(D<<23&4294967295|D>>>9),D=E+(A^F^_)+N[13]+681279174&4294967295,E=A+(D<<4&4294967295|D>>>28),D=_+(E^A^F)+N[0]+3936430074&4294967295,_=E+(D<<11&4294967295|D>>>21),D=F+(_^E^A)+N[3]+3572445317&4294967295,F=_+(D<<16&4294967295|D>>>16),D=A+(F^_^E)+N[6]+76029189&4294967295,A=F+(D<<23&4294967295|D>>>9),D=E+(A^F^_)+N[9]+3654602809&4294967295,E=A+(D<<4&4294967295|D>>>28),D=_+(E^A^F)+N[12]+3873151461&4294967295,_=E+(D<<11&4294967295|D>>>21),D=F+(_^E^A)+N[15]+530742520&4294967295,F=_+(D<<16&4294967295|D>>>16),D=A+(F^_^E)+N[2]+3299628645&4294967295,A=F+(D<<23&4294967295|D>>>9),D=E+(F^(A|~_))+N[0]+4096336452&4294967295,E=A+(D<<6&4294967295|D>>>26),D=_+(A^(E|~F))+N[7]+1126891415&4294967295,_=E+(D<<10&4294967295|D>>>22),D=F+(E^(_|~A))+N[14]+2878612391&4294967295,F=_+(D<<15&4294967295|D>>>17),D=A+(_^(F|~E))+N[5]+4237533241&4294967295,A=F+(D<<21&4294967295|D>>>11),D=E+(F^(A|~_))+N[12]+1700485571&4294967295,E=A+(D<<6&4294967295|D>>>26),D=_+(A^(E|~F))+N[3]+2399980690&4294967295,_=E+(D<<10&4294967295|D>>>22),D=F+(E^(_|~A))+N[10]+4293915773&4294967295,F=_+(D<<15&4294967295|D>>>17),D=A+(_^(F|~E))+N[1]+2240044497&4294967295,A=F+(D<<21&4294967295|D>>>11),D=E+(F^(A|~_))+N[8]+1873313359&4294967295,E=A+(D<<6&4294967295|D>>>26),D=_+(A^(E|~F))+N[15]+4264355552&4294967295,_=E+(D<<10&4294967295|D>>>22),D=F+(E^(_|~A))+N[6]+2734768916&4294967295,F=_+(D<<15&4294967295|D>>>17),D=A+(_^(F|~E))+N[13]+1309151649&4294967295,A=F+(D<<21&4294967295|D>>>11),D=E+(F^(A|~_))+N[4]+4149444226&4294967295,E=A+(D<<6&4294967295|D>>>26),D=_+(A^(E|~F))+N[11]+3174756917&4294967295,_=E+(D<<10&4294967295|D>>>22),D=F+(E^(_|~A))+N[2]+718787259&4294967295,F=_+(D<<15&4294967295|D>>>17),D=A+(_^(F|~E))+N[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(F+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+F&4294967295,T.g[3]=T.g[3]+_&4294967295}r.prototype.v=function(T,E){E===void 0&&(E=T.length);const A=E-this.blockSize,N=this.C;let F=this.h,_=0;for(;_<E;){if(F==0)for(;_<=A;)s(this,T,_),_+=this.blockSize;if(typeof T=="string"){for(;_<E;)if(N[F++]=T.charCodeAt(_++),F==this.blockSize){s(this,N),F=0;break}}else for(;_<E;)if(N[F++]=T[_++],F==this.blockSize){s(this,N),F=0;break}}this.h=F,this.o+=E},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;E=this.o*8;for(var A=T.length-8;A<T.length;++A)T[A]=E&255,E/=256;for(this.v(T),T=Array(16),E=0,A=0;A<4;++A)for(let N=0;N<32;N+=8)T[E++]=this.g[A]>>>N&255;return T};function i(T,E){var A=o;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=E(T)}function a(T,E){this.h=E;const A=[];let N=!0;for(let F=T.length-1;F>=0;F--){const _=T[F]|0;N&&_==E||(A[F]=_,N=!1)}this.g=A}var o={};function l(T){return-128<=T&&T<128?i(T,function(E){return new a([E|0],E<0?-1:0)}):new a([T|0],T<0?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return h;if(T<0)return y(c(-T));const E=[];let A=1;for(let N=0;T>=A;N++)E[N]=T/A|0,A*=4294967296;return new a(E,0)}function u(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return y(u(T.substring(1),E));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(E,8));let N=h;for(let _=0;_<T.length;_+=8){var F=Math.min(8,T.length-_);const D=parseInt(T.substring(_,_+F),E);F<8?(F=c(Math.pow(E,F)),N=N.j(F).add(c(D))):(N=N.j(A),N=N.add(c(D)))}return N}var h=l(0),d=l(1),f=l(16777216);n=a.prototype,n.m=function(){if(m(this))return-y(this).m();let T=0,E=1;for(let A=0;A<this.g.length;A++){const N=this.i(A);T+=(N>=0?N:4294967296+N)*E,E*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+y(this).toString(T);const E=c(Math.pow(T,6));var A=this;let N="";for(;;){const F=w(A,E).g;A=g(A,F.j(E));let _=((A.g.length>0?A.g[0]:A.h)>>>0).toString(T);if(A=F,p(A))return _+N;for(;_.length<6;)_="0"+_;N=_+N}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(let E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function m(T){return T.h==-1}n.l=function(T){return T=g(this,T),m(T)?-1:p(T)?0:1};function y(T){const E=T.g.length,A=[];for(let N=0;N<E;N++)A[N]=~T.g[N];return new a(A,~T.h).add(d)}n.abs=function(){return m(this)?y(this):this},n.add=function(T){const E=Math.max(this.g.length,T.g.length),A=[];let N=0;for(let F=0;F<=E;F++){let _=N+(this.i(F)&65535)+(T.i(F)&65535),D=(_>>>16)+(this.i(F)>>>16)+(T.i(F)>>>16);N=D>>>16,_&=65535,D&=65535,A[F]=D<<16|_}return new a(A,A[A.length-1]&-2147483648?-1:0)};function g(T,E){return T.add(y(E))}n.j=function(T){if(p(this)||p(T))return h;if(m(this))return m(T)?y(this).j(y(T)):y(y(this).j(T));if(m(T))return y(this.j(y(T)));if(this.l(f)<0&&T.l(f)<0)return c(this.m()*T.m());const E=this.g.length+T.g.length,A=[];for(var N=0;N<2*E;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(let F=0;F<T.g.length;F++){const _=this.i(N)>>>16,D=this.i(N)&65535,R=T.i(F)>>>16,B=T.i(F)&65535;A[2*N+2*F]+=D*B,v(A,2*N+2*F),A[2*N+2*F+1]+=_*B,v(A,2*N+2*F+1),A[2*N+2*F+1]+=D*R,v(A,2*N+2*F+1),A[2*N+2*F+2]+=_*R,v(A,2*N+2*F+2)}for(T=0;T<E;T++)A[T]=A[2*T+1]<<16|A[2*T];for(T=E;T<2*E;T++)A[T]=0;return new a(A,0)};function v(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function b(T,E){this.g=T,this.h=E}function w(T,E){if(p(E))throw Error("division by zero");if(p(T))return new b(h,h);if(m(T))return E=w(y(T),E),new b(y(E.g),y(E.h));if(m(E))return E=w(T,y(E)),new b(y(E.g),E.h);if(T.g.length>30){if(m(T)||m(E))throw Error("slowDivide_ only works with positive integers.");for(var A=d,N=E;N.l(T)<=0;)A=C(A),N=C(N);var F=I(A,1),_=I(N,1);for(N=I(N,2),A=I(A,2);!p(N);){var D=_.add(N);D.l(T)<=0&&(F=F.add(A),_=D),N=I(N,1),A=I(A,1)}return E=g(T,F.j(E)),new b(F,E)}for(F=h;T.l(E)>=0;){for(A=Math.max(1,Math.floor(T.m()/E.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),_=c(A),D=_.j(E);m(D)||D.l(T)>0;)A-=N,_=c(A),D=_.j(E);p(_)&&(_=d),F=F.add(_),T=g(T,D)}return new b(F,T)}n.B=function(T){return w(this,T).h},n.and=function(T){const E=Math.max(this.g.length,T.g.length),A=[];for(let N=0;N<E;N++)A[N]=this.i(N)&T.i(N);return new a(A,this.h&T.h)},n.or=function(T){const E=Math.max(this.g.length,T.g.length),A=[];for(let N=0;N<E;N++)A[N]=this.i(N)|T.i(N);return new a(A,this.h|T.h)},n.xor=function(T){const E=Math.max(this.g.length,T.g.length),A=[];for(let N=0;N<E;N++)A[N]=this.i(N)^T.i(N);return new a(A,this.h^T.h)};function C(T){const E=T.g.length+1,A=[];for(let N=0;N<E;N++)A[N]=T.i(N)<<1|T.i(N-1)>>>31;return new a(A,T.h)}function I(T,E){const A=E>>5;E%=32;const N=T.g.length-A,F=[];for(let _=0;_<N;_++)F[_]=E>0?T.i(_+A)>>>E|T.i(_+A+1)<<32-E:T.i(_+A);return new a(F,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Hae=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,_f=a}).apply(typeof y9<"u"?y9:typeof self<"u"?self:typeof window<"u"?window:{});var mI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qae,I1,Kae,TA,Y4,Xae,Yae,Zae;(function(){var n,e=Object.defineProperty;function t(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof mI=="object"&&mI];for(var P=0;P<S.length;++P){var $=S[P];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var r=t(this);function s(S,P){if(P)e:{var $=r;S=S.split(".");for(var Y=0;Y<S.length-1;Y++){var ve=S[Y];if(!(ve in $))break e;$=$[ve]}S=S[S.length-1],Y=$[S],P=P(Y),P!=Y&&P!=null&&e($,S,{configurable:!0,writable:!0,value:P})}}s("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(S){return S||function(P){var $=[],Y;for(Y in P)Object.prototype.hasOwnProperty.call(P,Y)&&$.push([Y,P[Y]]);return $}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(S){var P=typeof S;return P=="object"&&S!=null||P=="function"}function l(S,P,$){return S.call.apply(S.bind,arguments)}function c(S,P,$){return c=l,c.apply(null,arguments)}function u(S,P){var $=Array.prototype.slice.call(arguments,1);return function(){var Y=$.slice();return Y.push.apply(Y,arguments),S.apply(this,Y)}}function h(S,P){function $(){}$.prototype=P.prototype,S.Z=P.prototype,S.prototype=new $,S.prototype.constructor=S,S.Ob=function(Y,ve,ke){for(var We=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)We[Xt-2]=arguments[Xt];return P.prototype[ve].apply(Y,We)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function f(S){const P=S.length;if(P>0){const $=Array(P);for(let Y=0;Y<P;Y++)$[Y]=S[Y];return $}return[]}function p(S,P){for(let Y=1;Y<arguments.length;Y++){const ve=arguments[Y];var $=typeof ve;if($=$!="object"?$:ve?Array.isArray(ve)?"array":$:"null",$=="array"||$=="object"&&typeof ve.length=="number"){$=S.length||0;const ke=ve.length||0;S.length=$+ke;for(let We=0;We<ke;We++)S[$+We]=ve[We]}else S.push(ve)}}class m{constructor(P,$){this.i=P,this.j=$,this.h=0,this.g=null}get(){let P;return this.h>0?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function y(S){a.setTimeout(()=>{throw S},0)}function g(){var S=T;let P=null;return S.g&&(P=S.g,S.g=S.g.next,S.g||(S.h=null),P.next=null),P}class v{constructor(){this.h=this.g=null}add(P,$){const Y=b.get();Y.set(P,$),this.h?this.h.next=Y:this.g=Y,this.h=Y}}var b=new m(()=>new w,S=>S.reset());class w{constructor(){this.next=this.g=this.h=null}set(P,$){this.h=P,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let C,I=!1,T=new v,E=()=>{const S=Promise.resolve(void 0);C=()=>{S.then(A)}};function A(){for(var S;S=g();){try{S.h.call(S.g)}catch($){y($)}var P=b;P.j(S),P.h<100&&(P.h++,S.next=P.g,P.g=S)}I=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(S,P){this.type=S,this.g=this.target=P,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var _=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var S=!1,P=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const $=()=>{};a.addEventListener("test",$,P),a.removeEventListener("test",$,P)}catch{}return S}();function D(S){return/^[\s\xa0]*$/.test(S)}function R(S,P){F.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,P)}h(R,F),R.prototype.init=function(S,P){const $=this.type=S.type,Y=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=P,P=S.relatedTarget,P||($=="mouseover"?P=S.fromElement:$=="mouseout"&&(P=S.toElement)),this.relatedTarget=P,Y?(this.clientX=Y.clientX!==void 0?Y.clientX:Y.pageX,this.clientY=Y.clientY!==void 0?Y.clientY:Y.pageY,this.screenX=Y.screenX||0,this.screenY=Y.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&R.Z.h.call(this)},R.prototype.h=function(){R.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),z=0;function W(S,P,$,Y,ve){this.listener=S,this.proxy=null,this.src=P,this.type=$,this.capture=!!Y,this.ha=ve,this.key=++z,this.da=this.fa=!1}function K(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function H(S,P,$){for(const Y in S)P.call($,S[Y],Y,S)}function se(S,P){for(const $ in S)P.call(void 0,S[$],$,S)}function q(S){const P={};for(const $ in S)P[$]=S[$];return P}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(S,P){let $,Y;for(let ve=1;ve<arguments.length;ve++){Y=arguments[ve];for($ in Y)S[$]=Y[$];for(let ke=0;ke<X.length;ke++)$=X[ke],Object.prototype.hasOwnProperty.call(Y,$)&&(S[$]=Y[$])}}function de(S){this.src=S,this.g={},this.h=0}de.prototype.add=function(S,P,$,Y,ve){const ke=S.toString();S=this.g[ke],S||(S=this.g[ke]=[],this.h++);const We=Ce(S,P,Y,ve);return We>-1?(P=S[We],$||(P.fa=!1)):(P=new W(P,this.src,ke,!!Y,ve),P.fa=$,S.push(P)),P};function ue(S,P){const $=P.type;if($ in S.g){var Y=S.g[$],ve=Array.prototype.indexOf.call(Y,P,void 0),ke;(ke=ve>=0)&&Array.prototype.splice.call(Y,ve,1),ke&&(K(P),S.g[$].length==0&&(delete S.g[$],S.h--))}}function Ce(S,P,$,Y){for(let ve=0;ve<S.length;++ve){const ke=S[ve];if(!ke.da&&ke.listener==P&&ke.capture==!!$&&ke.ha==Y)return ve}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Ee={};function Le(S,P,$,Y,ve){if(Array.isArray(P)){for(let ke=0;ke<P.length;ke++)Le(S,P[ke],$,Y,ve);return null}return $=Z($),S&&S[B]?S.J(P,$,o(Y)?!!Y.capture:!1,ve):Ke(S,P,$,!1,Y,ve)}function Ke(S,P,$,Y,ve,ke){if(!P)throw Error("Invalid event type");const We=o(ve)?!!ve.capture:!!ve;let Xt=me(S);if(Xt||(S[Ae]=Xt=new de(S)),$=Xt.add(P,$,Y,We,ke),$.proxy)return $;if(Y=Ze(),$.proxy=Y,Y.src=S,Y.listener=$,S.addEventListener)_||(ve=We),ve===void 0&&(ve=!1),S.addEventListener(P.toString(),Y,ve);else if(S.attachEvent)S.attachEvent(M(P.toString()),Y);else if(S.addListener&&S.removeListener)S.addListener(Y);else throw Error("addEventListener and attachEvent are unavailable.");return $}function Ze(){function S($){return P.call(S.src,S.listener,$)}const P=be;return S}function gt(S,P,$,Y,ve){if(Array.isArray(P))for(var ke=0;ke<P.length;ke++)gt(S,P[ke],$,Y,ve);else Y=o(Y)?!!Y.capture:!!Y,$=Z($),S&&S[B]?(S=S.i,ke=String(P).toString(),ke in S.g&&(P=S.g[ke],$=Ce(P,$,Y,ve),$>-1&&(K(P[$]),Array.prototype.splice.call(P,$,1),P.length==0&&(delete S.g[ke],S.h--)))):S&&(S=me(S))&&(P=S.g[P.toString()],S=-1,P&&(S=Ce(P,$,Y,ve)),($=S>-1?P[S]:null)&&Ct($))}function Ct(S){if(typeof S!="number"&&S&&!S.da){var P=S.src;if(P&&P[B])ue(P.i,S);else{var $=S.type,Y=S.proxy;P.removeEventListener?P.removeEventListener($,Y,S.capture):P.detachEvent?P.detachEvent(M($),Y):P.addListener&&P.removeListener&&P.removeListener(Y),($=me(P))?(ue($,S),$.h==0&&($.src=null,P[Ae]=null)):K(S)}}}function M(S){return S in Ee?Ee[S]:Ee[S]="on"+S}function be(S,P){if(S.da)S=!0;else{P=new R(P,this);const $=S.listener,Y=S.ha||S.src;S.fa&&Ct(S),S=$.call(Y,P)}return S}function me(S){return S=S[Ae],S instanceof de?S:null}var J="__closure_events_fn_"+(Math.random()*1e9>>>0);function Z(S){return typeof S=="function"?S:(S[J]||(S[J]=function(P){return S.handleEvent(P)}),S[J])}function oe(){N.call(this),this.i=new de(this),this.M=this,this.G=null}h(oe,N),oe.prototype[B]=!0,oe.prototype.removeEventListener=function(S,P,$,Y){gt(this,S,P,$,Y)};function we(S,P){var $,Y=S.G;if(Y)for($=[];Y;Y=Y.G)$.push(Y);if(S=S.M,Y=P.type||P,typeof P=="string")P=new F(P,S);else if(P instanceof F)P.target=P.target||S;else{var ve=P;P=new F(Y,S),fe(P,ve)}ve=!0;let ke,We;if($)for(We=$.length-1;We>=0;We--)ke=P.g=$[We],ve=Ne(ke,Y,!0,P)&&ve;if(ke=P.g=S,ve=Ne(ke,Y,!0,P)&&ve,ve=Ne(ke,Y,!1,P)&&ve,$)for(We=0;We<$.length;We++)ke=P.g=$[We],ve=Ne(ke,Y,!1,P)&&ve}oe.prototype.N=function(){if(oe.Z.N.call(this),this.i){var S=this.i;for(const P in S.g){const $=S.g[P];for(let Y=0;Y<$.length;Y++)K($[Y]);delete S.g[P],S.h--}}this.G=null},oe.prototype.J=function(S,P,$,Y){return this.i.add(String(S),P,!1,$,Y)},oe.prototype.K=function(S,P,$,Y){return this.i.add(String(S),P,!0,$,Y)};function Ne(S,P,$,Y){if(P=S.i.g[String(P)],!P)return!0;P=P.concat();let ve=!0;for(let ke=0;ke<P.length;++ke){const We=P[ke];if(We&&!We.da&&We.capture==$){const Xt=We.listener,ds=We.ha||We.src;We.fa&&ue(S.i,We),ve=Xt.call(ds,Y)!==!1&&ve}}return ve&&!Y.defaultPrevented}function te(S,P){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=c(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(P)>2147483647?-1:a.setTimeout(S,P||0)}function xe(S){S.g=te(()=>{S.g=null,S.i&&(S.i=!1,xe(S))},S.l);const P=S.h;S.h=null,S.m.apply(null,P)}class ce extends N{constructor(P,$){super(),this.m=P,this.l=$,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(S){N.call(this),this.h=S,this.g={}}h(pe,N);var Ie=[];function je(S){H(S.g,function(P,$){this.g.hasOwnProperty($)&&Ct(P)},S),S.g={}}pe.prototype.N=function(){pe.Z.N.call(this),je(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=a.JSON.stringify,xt=a.JSON.parse,Lt=class{stringify(S){return a.JSON.stringify(S,void 0)}parse(S){return a.JSON.parse(S,void 0)}};function Dt(){}function dn(){}var ct={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zr(){F.call(this,"d")}h(Zr,F);function Ha(){F.call(this,"c")}h(Ha,F);var $r={},Nu=null;function xc(){return Nu=Nu||new oe}$r.Ia="serverreachability";function R0(S){F.call(this,$r.Ia,S)}h(R0,F);function Ip(S){const P=xc();we(P,new R0(P))}$r.STAT_EVENT="statevent";function sw(S,P){F.call(this,$r.STAT_EVENT,S),this.stat=P}h(sw,F);function zr(S){const P=xc();we(P,new sw(P,S))}$r.Ja="timingevent";function Ap(S,P){F.call(this,$r.Ja,S),this.size=P}h(Ap,F);function iw(S,P){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){S()},P)}function aw(){this.g=!0}aw.prototype.ua=function(){this.g=!1};function kle(S,P,$,Y,ve,ke){S.info(function(){if(S.g)if(ke){var We="",Xt=ke.split("&");for(let Wn=0;Wn<Xt.length;Wn++){var ds=Xt[Wn].split("=");if(ds.length>1){const Ps=ds[0];ds=ds[1];const wc=Ps.split("_");We=wc.length>=2&&wc[1]=="type"?We+(Ps+"="+ds+"&"):We+(Ps+"=redacted&")}}}else We=null;else We=ke;return"XMLHTTP REQ ("+Y+") [attempt "+ve+"]: "+P+`
`+$+`
`+We})}function Cle(S,P,$,Y,ve,ke,We){S.info(function(){return"XMLHTTP RESP ("+Y+") [ attempt "+ve+"]: "+P+`
`+$+`
`+ke+" "+We})}function D0(S,P,$,Y){S.info(function(){return"XMLHTTP TEXT ("+P+"): "+Ele(S,$)+(Y?" "+Y:"")})}function Tle(S,P){S.info(function(){return"TIMEOUT: "+P})}aw.prototype.info=function(){};function Ele(S,P){if(!S.g)return P;if(!P)return null;try{const ke=JSON.parse(P);if(ke){for(S=0;S<ke.length;S++)if(Array.isArray(ke[S])){var $=ke[S];if(!($.length<2)){var Y=$[1];if(Array.isArray(Y)&&!(Y.length<1)){var ve=Y[0];if(ve!="noop"&&ve!="stop"&&ve!="close")for(let We=1;We<Y.length;We++)Y[We]=""}}}}return Pe(ke)}catch{return P}}var YT={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xj={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yj;function fP(){}h(fP,Dt),fP.prototype.g=function(){return new XMLHttpRequest},Yj=new fP;function ow(S){return encodeURIComponent(String(S))}function Ile(S){var P=1;S=S.split(":");const $=[];for(;P>0&&S.length;)$.push(S.shift()),P--;return S.length&&$.push(S.join(":")),$}function sd(S,P,$,Y){this.j=S,this.i=P,this.l=$,this.S=Y||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zj}function Zj(){this.i=null,this.g="",this.h=!1}var Qj={},pP={};function mP(S,P,$){S.M=1,S.A=QT(bc(P)),S.u=$,S.R=!0,Jj(S,null)}function Jj(S,P){S.F=Date.now(),ZT(S),S.B=bc(S.A);var $=S.B,Y=S.S;Array.isArray(Y)||(Y=[String(Y)]),d6($.i,"t",Y),S.C=0,$=S.j.L,S.h=new Zj,S.g=_6(S.j,$?P:null,!S.u),S.P>0&&(S.O=new ce(c(S.Y,S,S.g),S.P)),P=S.V,$=S.g,Y=S.ba;var ve="readystatechange";Array.isArray(ve)||(ve&&(Ie[0]=ve.toString()),ve=Ie);for(let ke=0;ke<ve.length;ke++){const We=Le($,ve[ke],Y||P.handleEvent,!1,P.h||P);if(!We)break;P.g[We.key]=We}P=S.J?q(S.J):{},S.u?(S.v||(S.v="POST"),P["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,P)):(S.v="GET",S.g.ea(S.B,S.v,null,P)),Ip(),kle(S.i,S.v,S.B,S.l,S.S,S.u)}sd.prototype.ba=function(S){S=S.target;const P=this.O;P&&od(S)==3?P.j():this.Y(S)},sd.prototype.Y=function(S){try{if(S==this.g)e:{const Xt=od(this.g),ds=this.g.ya(),Wn=this.g.ca();if(!(Xt<3)&&(Xt!=3||this.g&&(this.h.h||this.g.la()||x6(this.g)))){this.K||Xt!=4||ds==7||(ds==8||Wn<=0?Ip(3):Ip(2)),gP(this);var P=this.g.ca();this.X=P;var $=Ale(this);if(this.o=P==200,Cle(this.i,this.v,this.B,this.l,this.S,Xt,P),this.o){if(this.U&&!this.L){t:{if(this.g){var Y,ve=this.g;if((Y=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Y)){var ke=Y;break t}}ke=null}if(S=ke)D0(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yP(this,S);else{this.o=!1,this.m=3,zr(12),Np(this),lw(this);break e}}if(this.R){S=!0;let Ps;for(;!this.K&&this.C<$.length;)if(Ps=Nle(this,$),Ps==pP){Xt==4&&(this.m=4,zr(14),S=!1),D0(this.i,this.l,null,"[Incomplete Response]");break}else if(Ps==Qj){this.m=4,zr(15),D0(this.i,this.l,$,"[Invalid Chunk]"),S=!1;break}else D0(this.i,this.l,Ps,null),yP(this,Ps);if(e6(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||$.length!=0||this.h.h||(this.m=1,zr(16),S=!1),this.o=this.o&&S,!S)D0(this.i,this.l,$,"[Invalid Chunked Response]"),Np(this),lw(this);else if($.length>0&&!this.W){this.W=!0;var We=this.j;We.g==this&&We.aa&&!We.P&&(We.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),TP(We),We.P=!0,zr(11))}}else D0(this.i,this.l,$,null),yP(this,$);Xt==4&&Np(this),this.o&&!this.K&&(Xt==4?E6(this.j,this):(this.o=!1,ZT(this)))}else Ule(this.g),P==400&&$.indexOf("Unknown SID")>0?(this.m=3,zr(12)):(this.m=0,zr(13)),Np(this),lw(this)}}}catch{}finally{}};function Ale(S){if(!e6(S))return S.g.la();const P=x6(S.g);if(P==="")return"";let $="";const Y=P.length,ve=od(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return Np(S),lw(S),"";S.h.i=new a.TextDecoder}for(let ke=0;ke<Y;ke++)S.h.h=!0,$+=S.h.i.decode(P[ke],{stream:!(ve&&ke==Y-1)});return P.length=0,S.h.g+=$,S.C=0,S.h.g}function e6(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Nle(S,P){var $=S.C,Y=P.indexOf(`
`,$);return Y==-1?pP:($=Number(P.substring($,Y)),isNaN($)?Qj:(Y+=1,Y+$>P.length?pP:(P=P.slice(Y,Y+$),S.C=Y+$,P)))}sd.prototype.cancel=function(){this.K=!0,Np(this)};function ZT(S){S.T=Date.now()+S.H,t6(S,S.H)}function t6(S,P){if(S.D!=null)throw Error("WatchDog timer not null");S.D=iw(c(S.aa,S),P)}function gP(S){S.D&&(a.clearTimeout(S.D),S.D=null)}sd.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(Tle(this.i,this.B),this.M!=2&&(Ip(),zr(17)),Np(this),this.m=2,lw(this)):t6(this,this.T-S)};function lw(S){S.j.I==0||S.K||E6(S.j,S)}function Np(S){gP(S);var P=S.O;P&&typeof P.dispose=="function"&&P.dispose(),S.O=null,je(S.V),S.g&&(P=S.g,S.g=null,P.abort(),P.dispose())}function yP(S,P){try{var $=S.j;if($.I!=0&&($.g==S||vP($.h,S))){if(!S.L&&vP($.h,S)&&$.I==3){try{var Y=$.Ba.g.parse(P)}catch{Y=null}if(Array.isArray(Y)&&Y.length==3){var ve=Y;if(ve[0]==0){e:if(!$.v){if($.g)if($.g.F+3e3<S.F)rE($),tE($);else break e;CP($),zr(18)}}else $.xa=ve[1],0<$.xa-$.K&&ve[2]<37500&&$.F&&$.A==0&&!$.C&&($.C=iw(c($.Va,$),6e3));s6($.h)<=1&&$.ta&&($.ta=void 0)}else Rp($,11)}else if((S.L||$.g==S)&&rE($),!D(P))for(ve=$.Ba.g.parse(P),P=0;P<ve.length;P++){let Wn=ve[P];const Ps=Wn[0];if(!(Ps<=$.K))if($.K=Ps,Wn=Wn[1],$.I==2)if(Wn[0]=="c"){$.M=Wn[1],$.ba=Wn[2];const wc=Wn[3];wc!=null&&($.ka=wc,$.j.info("VER="+$.ka));const Dp=Wn[4];Dp!=null&&($.za=Dp,$.j.info("SVER="+$.za));const ld=Wn[5];ld!=null&&typeof ld=="number"&&ld>0&&(Y=1.5*ld,$.O=Y,$.j.info("backChannelRequestTimeoutMs_="+Y)),Y=$;const cd=S.g;if(cd){const iE=cd.g?cd.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iE){var ke=Y.h;ke.g||iE.indexOf("spdy")==-1&&iE.indexOf("quic")==-1&&iE.indexOf("h2")==-1||(ke.j=ke.l,ke.g=new Set,ke.h&&(xP(ke,ke.h),ke.h=null))}if(Y.G){const EP=cd.g?cd.g.getResponseHeader("X-HTTP-Session-Id"):null;EP&&(Y.wa=EP,tr(Y.J,Y.G,EP))}}$.I=3,$.l&&$.l.ra(),$.aa&&($.T=Date.now()-S.F,$.j.info("Handshake RTT: "+$.T+"ms")),Y=$;var We=S;if(Y.na=N6(Y,Y.L?Y.ba:null,Y.W),We.L){i6(Y.h,We);var Xt=We,ds=Y.O;ds&&(Xt.H=ds),Xt.D&&(gP(Xt),ZT(Xt)),Y.g=We}else C6(Y);$.i.length>0&&nE($)}else Wn[0]!="stop"&&Wn[0]!="close"||Rp($,7);else $.I==3&&(Wn[0]=="stop"||Wn[0]=="close"?Wn[0]=="stop"?Rp($,7):kP($):Wn[0]!="noop"&&$.l&&$.l.qa(Wn),$.A=0)}}Ip(4)}catch{}}var _le=class{constructor(S,P){this.g=S,this.map=P}};function n6(S){this.l=S||10,a.PerformanceNavigationTiming?(S=a.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function r6(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function s6(S){return S.h?1:S.g?S.g.size:0}function vP(S,P){return S.h?S.h==P:S.g?S.g.has(P):!1}function xP(S,P){S.g?S.g.add(P):S.h=P}function i6(S,P){S.h&&S.h==P?S.h=null:S.g&&S.g.has(P)&&S.g.delete(P)}n6.prototype.cancel=function(){if(this.i=a6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function a6(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let P=S.i;for(const $ of S.g.values())P=P.concat($.G);return P}return f(S.i)}var o6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rle(S,P){if(S){S=S.split("&");for(let $=0;$<S.length;$++){const Y=S[$].indexOf("=");let ve,ke=null;Y>=0?(ve=S[$].substring(0,Y),ke=S[$].substring(Y+1)):ve=S[$],P(ve,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function id(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let P;S instanceof id?(this.l=S.l,cw(this,S.j),this.o=S.o,this.g=S.g,uw(this,S.u),this.h=S.h,bP(this,f6(S.i)),this.m=S.m):S&&(P=String(S).match(o6))?(this.l=!1,cw(this,P[1]||"",!0),this.o=hw(P[2]||""),this.g=hw(P[3]||"",!0),uw(this,P[4]),this.h=hw(P[5]||"",!0),bP(this,P[6]||"",!0),this.m=hw(P[7]||"")):(this.l=!1,this.i=new fw(null,this.l))}id.prototype.toString=function(){const S=[];var P=this.j;P&&S.push(dw(P,l6,!0),":");var $=this.g;return($||P=="file")&&(S.push("//"),(P=this.o)&&S.push(dw(P,l6,!0),"@"),S.push(ow($).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.u,$!=null&&S.push(":",String($))),($=this.h)&&(this.g&&$.charAt(0)!="/"&&S.push("/"),S.push(dw($,$.charAt(0)=="/"?Ple:Fle,!0))),($=this.i.toString())&&S.push("?",$),($=this.m)&&S.push("#",dw($,Lle)),S.join("")},id.prototype.resolve=function(S){const P=bc(this);let $=!!S.j;$?cw(P,S.j):$=!!S.o,$?P.o=S.o:$=!!S.g,$?P.g=S.g:$=S.u!=null;var Y=S.h;if($)uw(P,S.u);else if($=!!S.h){if(Y.charAt(0)!="/")if(this.g&&!this.h)Y="/"+Y;else{var ve=P.h.lastIndexOf("/");ve!=-1&&(Y=P.h.slice(0,ve+1)+Y)}if(ve=Y,ve==".."||ve==".")Y="";else if(ve.indexOf("./")!=-1||ve.indexOf("/.")!=-1){Y=ve.lastIndexOf("/",0)==0,ve=ve.split("/");const ke=[];for(let We=0;We<ve.length;){const Xt=ve[We++];Xt=="."?Y&&We==ve.length&&ke.push(""):Xt==".."?((ke.length>1||ke.length==1&&ke[0]!="")&&ke.pop(),Y&&We==ve.length&&ke.push("")):(ke.push(Xt),Y=!0)}Y=ke.join("/")}else Y=ve}return $?P.h=Y:$=S.i.toString()!=="",$?bP(P,f6(S.i)):$=!!S.m,$&&(P.m=S.m),P};function bc(S){return new id(S)}function cw(S,P,$){S.j=$?hw(P,!0):P,S.j&&(S.j=S.j.replace(/:$/,""))}function uw(S,P){if(P){if(P=Number(P),isNaN(P)||P<0)throw Error("Bad port number "+P);S.u=P}else S.u=null}function bP(S,P,$){P instanceof fw?(S.i=P,Mle(S.i,S.l)):($||(P=dw(P,Ole)),S.i=new fw(P,S.l))}function tr(S,P,$){S.i.set(P,$)}function QT(S){return tr(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function hw(S,P){return S?P?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function dw(S,P,$){return typeof S=="string"?(S=encodeURI(S).replace(P,Dle),$&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Dle(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var l6=/[#\/\?@]/g,Fle=/[#\?:]/g,Ple=/[#\?]/g,Ole=/[#\?@]/g,Lle=/#/g;function fw(S,P){this.h=this.g=null,this.i=S||null,this.j=!!P}function _p(S){S.g||(S.g=new Map,S.h=0,S.i&&Rle(S.i,function(P,$){S.add(decodeURIComponent(P.replace(/\+/g," ")),$)}))}n=fw.prototype,n.add=function(S,P){_p(this),this.i=null,S=F0(this,S);let $=this.g.get(S);return $||this.g.set(S,$=[]),$.push(P),this.h+=1,this};function c6(S,P){_p(S),P=F0(S,P),S.g.has(P)&&(S.i=null,S.h-=S.g.get(P).length,S.g.delete(P))}function u6(S,P){return _p(S),P=F0(S,P),S.g.has(P)}n.forEach=function(S,P){_p(this),this.g.forEach(function($,Y){$.forEach(function(ve){S.call(P,ve,Y,this)},this)},this)};function h6(S,P){_p(S);let $=[];if(typeof P=="string")u6(S,P)&&($=$.concat(S.g.get(F0(S,P))));else for(S=Array.from(S.g.values()),P=0;P<S.length;P++)$=$.concat(S[P]);return $}n.set=function(S,P){return _p(this),this.i=null,S=F0(this,S),u6(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[P]),this.h+=1,this},n.get=function(S,P){return S?(S=h6(this,S),S.length>0?String(S[0]):P):P};function d6(S,P,$){c6(S,P),$.length>0&&(S.i=null,S.g.set(F0(S,P),f($)),S.h+=$.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],P=Array.from(this.g.keys());for(let Y=0;Y<P.length;Y++){var $=P[Y];const ve=ow($);$=h6(this,$);for(let ke=0;ke<$.length;ke++){let We=ve;$[ke]!==""&&(We+="="+ow($[ke])),S.push(We)}}return this.i=S.join("&")};function f6(S){const P=new fw;return P.i=S.i,S.g&&(P.g=new Map(S.g),P.h=S.h),P}function F0(S,P){return P=String(P),S.j&&(P=P.toLowerCase()),P}function Mle(S,P){P&&!S.j&&(_p(S),S.i=null,S.g.forEach(function($,Y){const ve=Y.toLowerCase();Y!=ve&&(c6(this,Y),d6(this,ve,$))},S)),S.j=P}function $le(S,P){const $=new aw;if(a.Image){const Y=new Image;Y.onload=u(ad,$,"TestLoadImage: loaded",!0,P,Y),Y.onerror=u(ad,$,"TestLoadImage: error",!1,P,Y),Y.onabort=u(ad,$,"TestLoadImage: abort",!1,P,Y),Y.ontimeout=u(ad,$,"TestLoadImage: timeout",!1,P,Y),a.setTimeout(function(){Y.ontimeout&&Y.ontimeout()},1e4),Y.src=S}else P(!1)}function zle(S,P){const $=new aw,Y=new AbortController,ve=setTimeout(()=>{Y.abort(),ad($,"TestPingServer: timeout",!1,P)},1e4);fetch(S,{signal:Y.signal}).then(ke=>{clearTimeout(ve),ke.ok?ad($,"TestPingServer: ok",!0,P):ad($,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(ve),ad($,"TestPingServer: error",!1,P)})}function ad(S,P,$,Y,ve){try{ve&&(ve.onload=null,ve.onerror=null,ve.onabort=null,ve.ontimeout=null),Y($)}catch{}}function Ble(){this.g=new Lt}function wP(S){this.i=S.Sb||null,this.h=S.ab||!1}h(wP,Dt),wP.prototype.g=function(){return new JT(this.i,this.h)};function JT(S,P){oe.call(this),this.H=S,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(JT,oe),n=JT.prototype,n.open=function(S,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=P,this.readyState=1,mw(this)},n.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const P={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(P.body=S),(this.H||a).fetch(new Request(this.D,P)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pw(this)),this.readyState=0},n.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,mw(this)),this.g&&(this.readyState=3,mw(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;p6(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function p6(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}n.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var P=S.value?S.value:new Uint8Array(0);(P=this.B.decode(P,{stream:!S.done}))&&(this.response=this.responseText+=P)}S.done?pw(this):mw(this),this.readyState==3&&p6(this)}},n.Oa=function(S){this.g&&(this.response=this.responseText=S,pw(this))},n.Na=function(S){this.g&&(this.response=S,pw(this))},n.ga=function(){this.g&&pw(this)};function pw(S){S.readyState=4,S.l=null,S.j=null,S.B=null,mw(S)}n.setRequestHeader=function(S,P){this.A.append(S,P)},n.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],P=this.h.entries();for(var $=P.next();!$.done;)$=$.value,S.push($[0]+": "+$[1]),$=P.next();return S.join(`\r
`)};function mw(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(JT.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function m6(S){let P="";return H(S,function($,Y){P+=Y,P+=":",P+=$,P+=`\r
`}),P}function SP(S,P,$){e:{for(Y in $){var Y=!1;break e}Y=!0}Y||($=m6($),typeof S=="string"?$!=null&&ow($):tr(S,P,$))}function _r(S){oe.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(_r,oe);var Vle=/^https?$/i,jle=["POST","PUT"];n=_r.prototype,n.Fa=function(S){this.H=S},n.ea=function(S,P,$,Y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);P=P?P.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yj.g(),this.g.onreadystatechange=d(c(this.Ca,this));try{this.B=!0,this.g.open(P,String(S),!0),this.B=!1}catch(ke){g6(this,ke);return}if(S=$||"",$=new Map(this.headers),Y)if(Object.getPrototypeOf(Y)===Object.prototype)for(var ve in Y)$.set(ve,Y[ve]);else if(typeof Y.keys=="function"&&typeof Y.get=="function")for(const ke of Y.keys())$.set(ke,Y.get(ke));else throw Error("Unknown input type for opt_headers: "+String(Y));Y=Array.from($.keys()).find(ke=>ke.toLowerCase()=="content-type"),ve=a.FormData&&S instanceof a.FormData,!(Array.prototype.indexOf.call(jle,P,void 0)>=0)||Y||ve||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ke,We]of $)this.g.setRequestHeader(ke,We);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(ke){g6(this,ke)}};function g6(S,P){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=P,S.o=5,y6(S),eE(S)}function y6(S){S.A||(S.A=!0,we(S,"complete"),we(S,"error"))}n.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,we(this,"complete"),we(this,"abort"),eE(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eE(this,!0)),_r.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?v6(this):this.Xa())},n.Xa=function(){v6(this)};function v6(S){if(S.h&&typeof i<"u"){if(S.v&&od(S)==4)setTimeout(S.Ca.bind(S),0);else if(we(S,"readystatechange"),od(S)==4){S.h=!1;try{const ke=S.ca();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var $;if(!($=P)){var Y;if(Y=ke===0){let We=String(S.D).match(o6)[1]||null;!We&&a.self&&a.self.location&&(We=a.self.location.protocol.slice(0,-1)),Y=!Vle.test(We?We.toLowerCase():"")}$=Y}if($)we(S,"complete"),we(S,"success");else{S.o=6;try{var ve=od(S)>2?S.g.statusText:""}catch{ve=""}S.l=ve+" ["+S.ca()+"]",y6(S)}}finally{eE(S)}}}}function eE(S,P){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const $=S.g;S.g=null,P||we(S,"ready");try{$.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function od(S){return S.g?S.g.readyState:0}n.ca=function(){try{return od(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(S){if(this.g){var P=this.g.responseText;return S&&P.indexOf(S)==0&&(P=P.substring(S.length)),xt(P)}};function x6(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Ule(S){const P={};S=(S.g&&od(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Y=0;Y<S.length;Y++){if(D(S[Y]))continue;var $=Ile(S[Y]);const ve=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const ke=P[ve]||[];P[ve]=ke,ke.push($)}se(P,function(Y){return Y.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gw(S,P,$){return $&&$.internalChannelParams&&$.internalChannelParams[S]||P}function b6(S){this.za=0,this.i=[],this.j=new aw,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gw("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gw("baseRetryDelayMs",5e3,S),this.Za=gw("retryDelaySeedMs",1e4,S),this.Ta=gw("forwardChannelMaxRetries",2,S),this.va=gw("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new n6(S&&S.concurrentRequestLimit),this.Ba=new Ble,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=b6.prototype,n.ka=8,n.I=1,n.connect=function(S,P,$,Y){zr(0),this.W=S,this.H=P||{},$&&Y!==void 0&&(this.H.OSID=$,this.H.OAID=Y),this.F=this.X,this.J=N6(this,null,this.W),nE(this)};function kP(S){if(w6(S),S.I==3){var P=S.V++,$=bc(S.J);if(tr($,"SID",S.M),tr($,"RID",P),tr($,"TYPE","terminate"),yw(S,$),P=new sd(S,S.j,P),P.M=2,P.A=QT(bc($)),$=!1,a.navigator&&a.navigator.sendBeacon)try{$=a.navigator.sendBeacon(P.A.toString(),"")}catch{}!$&&a.Image&&(new Image().src=P.A,$=!0),$||(P.g=_6(P.j,null),P.g.ea(P.A)),P.F=Date.now(),ZT(P)}A6(S)}function tE(S){S.g&&(TP(S),S.g.cancel(),S.g=null)}function w6(S){tE(S),S.v&&(a.clearTimeout(S.v),S.v=null),rE(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&a.clearTimeout(S.m),S.m=null)}function nE(S){if(!r6(S.h)&&!S.m){S.m=!0;var P=S.Ea;C||E(),I||(C(),I=!0),T.add(P,S),S.D=0}}function Wle(S,P){return s6(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=P.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=iw(c(S.Ea,S,P),I6(S,S.D)),S.D++,!0)}n.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const ve=new sd(this,this.j,S);let ke=this.o;if(this.U&&(ke?(ke=q(ke),fe(ke,this.U)):ke=this.U),this.u!==null||this.R||(ve.J=ke,ke=null),this.S)e:{for(var P=0,$=0;$<this.i.length;$++){t:{var Y=this.i[$];if("__data__"in Y.map&&(Y=Y.map.__data__,typeof Y=="string")){Y=Y.length;break t}Y=void 0}if(Y===void 0)break;if(P+=Y,P>4096){P=$;break e}if(P===4096||$===this.i.length-1){P=$+1;break e}}P=1e3}else P=1e3;P=k6(this,ve,P),$=bc(this.J),tr($,"RID",S),tr($,"CVER",22),this.G&&tr($,"X-HTTP-Session-Id",this.G),yw(this,$),ke&&(this.R?P="headers="+ow(m6(ke))+"&"+P:this.u&&SP($,this.u,ke)),xP(this.h,ve),this.Ra&&tr($,"TYPE","init"),this.S?(tr($,"$req",P),tr($,"SID","null"),ve.U=!0,mP(ve,$,null)):mP(ve,$,P),this.I=2}}else this.I==3&&(S?S6(this,S):this.i.length==0||r6(this.h)||S6(this))};function S6(S,P){var $;P?$=P.l:$=S.V++;const Y=bc(S.J);tr(Y,"SID",S.M),tr(Y,"RID",$),tr(Y,"AID",S.K),yw(S,Y),S.u&&S.o&&SP(Y,S.u,S.o),$=new sd(S,S.j,$,S.D+1),S.u===null&&($.J=S.o),P&&(S.i=P.G.concat(S.i)),P=k6(S,$,1e3),$.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),xP(S.h,$),mP($,Y,P)}function yw(S,P){S.H&&H(S.H,function($,Y){tr(P,Y,$)}),S.l&&H({},function($,Y){tr(P,Y,$)})}function k6(S,P,$){$=Math.min(S.i.length,$);const Y=S.l?c(S.l.Ka,S.l,S):null;e:{var ve=S.i;let Xt=-1;for(;;){const ds=["count="+$];Xt==-1?$>0?(Xt=ve[0].g,ds.push("ofs="+Xt)):Xt=0:ds.push("ofs="+Xt);let Wn=!0;for(let Ps=0;Ps<$;Ps++){var ke=ve[Ps].g;const wc=ve[Ps].map;if(ke-=Xt,ke<0)Xt=Math.max(0,ve[Ps].g-100),Wn=!1;else try{ke="req"+ke+"_"||"";try{var We=wc instanceof Map?wc:Object.entries(wc);for(const[Dp,ld]of We){let cd=ld;o(ld)&&(cd=Pe(ld)),ds.push(ke+Dp+"="+encodeURIComponent(cd))}}catch(Dp){throw ds.push(ke+"type="+encodeURIComponent("_badmap")),Dp}}catch{Y&&Y(wc)}}if(Wn){We=ds.join("&");break e}}We=void 0}return S=S.i.splice(0,$),P.G=S,We}function C6(S){if(!S.g&&!S.v){S.Y=1;var P=S.Da;C||E(),I||(C(),I=!0),T.add(P,S),S.A=0}}function CP(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=iw(c(S.Da,S),I6(S,S.A)),S.A++,!0)}n.Da=function(){if(this.v=null,T6(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=iw(c(this.Wa,this),S)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zr(10),tE(this),T6(this))};function TP(S){S.B!=null&&(a.clearTimeout(S.B),S.B=null)}function T6(S){S.g=new sd(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var P=bc(S.na);tr(P,"RID","rpc"),tr(P,"SID",S.M),tr(P,"AID",S.K),tr(P,"CI",S.F?"0":"1"),!S.F&&S.ia&&tr(P,"TO",S.ia),tr(P,"TYPE","xmlhttp"),yw(S,P),S.u&&S.o&&SP(P,S.u,S.o),S.O&&(S.g.H=S.O);var $=S.g;S=S.ba,$.M=1,$.A=QT(bc(P)),$.u=null,$.R=!0,Jj($,S)}n.Va=function(){this.C!=null&&(this.C=null,tE(this),CP(this),zr(19))};function rE(S){S.C!=null&&(a.clearTimeout(S.C),S.C=null)}function E6(S,P){var $=null;if(S.g==P){rE(S),TP(S),S.g=null;var Y=2}else if(vP(S.h,P))$=P.G,i6(S.h,P),Y=1;else return;if(S.I!=0){if(P.o)if(Y==1){$=P.u?P.u.length:0,P=Date.now()-P.F;var ve=S.D;Y=xc(),we(Y,new Ap(Y,$)),nE(S)}else C6(S);else if(ve=P.m,ve==3||ve==0&&P.X>0||!(Y==1&&Wle(S,P)||Y==2&&CP(S)))switch($&&$.length>0&&(P=S.h,P.i=P.i.concat($)),ve){case 1:Rp(S,5);break;case 4:Rp(S,10);break;case 3:Rp(S,6);break;default:Rp(S,2)}}}function I6(S,P){let $=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||($*=2),$*P}function Rp(S,P){if(S.j.info("Error code "+P),P==2){var $=c(S.bb,S),Y=S.Ua;const ve=!Y;Y=new id(Y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cw(Y,"https"),QT(Y),ve?$le(Y.toString(),$):zle(Y.toString(),$)}else zr(2);S.I=0,S.l&&S.l.pa(P),A6(S),w6(S)}n.bb=function(S){S?(this.j.info("Successfully pinged google.com"),zr(2)):(this.j.info("Failed to ping google.com"),zr(1))};function A6(S){if(S.I=0,S.ja=[],S.l){const P=a6(S.h);(P.length!=0||S.i.length!=0)&&(p(S.ja,P),p(S.ja,S.i),S.h.i.length=0,f(S.i),S.i.length=0),S.l.oa()}}function N6(S,P,$){var Y=$ instanceof id?bc($):new id($);if(Y.g!="")P&&(Y.g=P+"."+Y.g),uw(Y,Y.u);else{var ve=a.location;Y=ve.protocol,P=P?P+"."+ve.hostname:ve.hostname,ve=+ve.port;const ke=new id(null);Y&&cw(ke,Y),P&&(ke.g=P),ve&&uw(ke,ve),$&&(ke.h=$),Y=ke}return $=S.G,P=S.wa,$&&P&&tr(Y,$,P),tr(Y,"VER",S.ka),yw(S,Y),Y}function _6(S,P,$){if(P&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return P=S.Aa&&!S.ma?new _r(new wP({ab:$})):new _r(S.ma),P.Fa(S.L),P}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function R6(){}n=R6.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function sE(){}sE.prototype.g=function(S,P){return new qa(S,P)};function qa(S,P){oe.call(this),this.g=new b6(P),this.l=S,this.h=P&&P.messageUrlParams||null,S=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(S?S["X-WebChannel-Content-Type"]=P.messageContentType:S={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.sa&&(S?S["X-WebChannel-Client-Profile"]=P.sa:S={"X-WebChannel-Client-Profile":P.sa}),this.g.U=S,(S=P&&P.Qb)&&!D(S)&&(this.g.u=S),this.A=P&&P.supportsCrossDomainXhr||!1,this.v=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!D(P)&&(this.g.G=P,S=this.h,S!==null&&P in S&&(S=this.h,P in S&&delete S[P])),this.j=new P0(this)}h(qa,oe),qa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qa.prototype.close=function(){kP(this.g)},qa.prototype.o=function(S){var P=this.g;if(typeof S=="string"){var $={};$.__data__=S,S=$}else this.v&&($={},$.__data__=Pe(S),S=$);P.i.push(new _le(P.Ya++,S)),P.I==3&&nE(P)},qa.prototype.N=function(){this.g.l=null,delete this.j,kP(this.g),delete this.g,qa.Z.N.call(this)};function D6(S){Zr.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var P=S.__sm__;if(P){e:{for(const $ in P){S=$;break e}S=void 0}(this.i=S)&&(S=this.i,P=P!==null&&S in P?P[S]:void 0),this.data=P}else this.data=S}h(D6,Zr);function F6(){Ha.call(this),this.status=1}h(F6,Ha);function P0(S){this.g=S}h(P0,R6),P0.prototype.ra=function(){we(this.g,"a")},P0.prototype.qa=function(S){we(this.g,new D6(S))},P0.prototype.pa=function(S){we(this.g,new F6)},P0.prototype.oa=function(){we(this.g,"b")},sE.prototype.createWebChannel=sE.prototype.g,qa.prototype.send=qa.prototype.o,qa.prototype.open=qa.prototype.m,qa.prototype.close=qa.prototype.close,Zae=function(){return new sE},Yae=function(){return xc()},Xae=$r,Y4={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},YT.NO_ERROR=0,YT.TIMEOUT=8,YT.HTTP_ERROR=6,TA=YT,Xj.COMPLETE="complete",Kae=Xj,dn.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",oe.prototype.listen=oe.prototype.J,I1=dn,_r.prototype.listenOnce=_r.prototype.K,_r.prototype.getLastError=_r.prototype.Ha,_r.prototype.getLastErrorCode=_r.prototype.ya,_r.prototype.getStatus=_r.prototype.ca,_r.prototype.getResponseJson=_r.prototype.La,_r.prototype.getResponseText=_r.prototype.la,_r.prototype.send=_r.prototype.ea,_r.prototype.setWithCredentials=_r.prototype.Fa,qae=_r}).apply(typeof mI<"u"?mI:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ni.UNAUTHENTICATED=new Ni(null),Ni.GOOGLE_CREDENTIALS=new Ni("google-credentials-uid"),Ni.FIRST_PARTY=new Ni("first-party-uid"),Ni.MOCK_USER=new Ni("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jb="12.8.0";function NKe(n){Jb=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=new ej("@firebase/firestore");function ry(){return Qg.logLevel}function Je(n,...e){if(Qg.logLevel<=xn.DEBUG){const t=e.map(lj);Qg.debug(`Firestore (${Jb}): ${n}`,...t)}}function Vh(n,...e){if(Qg.logLevel<=xn.ERROR){const t=e.map(lj);Qg.error(`Firestore (${Jb}): ${n}`,...t)}}function Tx(n,...e){if(Qg.logLevel<=xn.WARN){const t=e.map(lj);Qg.warn(`Firestore (${Jb}): ${n}`,...t)}}function lj(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Qae(n,r,t)}function Qae(n,e,t){let r=`FIRESTORE (${Jb}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Vh(r),new Error(r)}function Fn(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Qae(e,s,r)}function Ot(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends Tp{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jae{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _Ke{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ni.UNAUTHENTICATED))}shutdown(){}}class RKe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DKe{constructor(e){this.t=e,this.currentUser=Ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fn(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new Rf;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rf,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rf)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fn(typeof r.accessToken=="string",31837,{l:r}),new Jae(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fn(e===null||typeof e=="string",2055,{h:e}),new Ni(e)}}class FKe{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ni.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class PKe{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new FKe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OKe{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,H7e(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fn(this.o===void 0,3512);const r=i=>{i.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new v9(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new v9(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LKe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=LKe(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function cn(n,e){return n<e?-1:n>e?1:0}function Z4(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return s3(s)===s3(i)?cn(s,i):s3(s)?1:-1}return cn(n.length,e.length)}const MKe=55296,$Ke=57343;function s3(n){const e=n.charCodeAt(0);return e>=MKe&&e<=$Ke}function Ex(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="__name__";class Dc{constructor(e,t,r){t===void 0?t=0:t>e.length&&kt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&kt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Dc.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return cn(e.length,t.length)}static compareSegments(e,t){const r=Dc.isNumericId(e),s=Dc.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Dc.extractNumericId(e).compare(Dc.extractNumericId(t)):Z4(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _f.fromString(e.substring(4,e.length-2))}}class Zn extends Dc{construct(e,t,r){return new Zn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Qe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Zn(t)}static emptyPath(){return new Zn([])}}const zKe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ci extends Dc{construct(e,t,r){return new ci(e,t,r)}static isValidIdentifier(e){return zKe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x9}static keyField(){return new ci([x9])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Qe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Qe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Qe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new Qe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ci(t)}static emptyPath(){return new ci([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.path=e}static fromPath(e){return new mt(Zn.fromString(e))}static fromName(e){return new mt(Zn.fromString(e).popFirst(5))}static empty(){return new mt(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new Zn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eoe(n,e,t){if(!t)throw new Qe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BKe(n,e,t,r){if(e===!0&&r===!0)throw new Qe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function b9(n){if(!mt.isDocumentKey(n))throw new Qe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w9(n){if(mt.isDocumentKey(n))throw new Qe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function toe(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function JF(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":kt(12329,{type:typeof n})}function c_(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Qe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JF(n);throw new Qe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){const t={typeString:n};return e&&(t.value=e),t}function GT(n,e){if(!toe(n))throw new Qe(_e.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new Qe(_e.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=-62135596800,k9=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*k9);return new ir(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<S9)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k9}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(GT(e,ir._jsonSchema))return new ir(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S9;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:os("string",ir._jsonSchemaVersion),seconds:os("number"),nanoseconds:os("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new ir(0,0))}static max(){return new Ft(new ir(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=-1;function VKe(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ft.fromTimestamp(r===1e9?new ir(t+1,0):new ir(t,r));return new np(s,mt.empty(),e)}function jKe(n){return new np(n.readTime,n.key,s2)}class np{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new np(Ft.min(),mt.empty(),s2)}static max(){return new np(Ft.max(),mt.empty(),s2)}}function UKe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=mt.comparator(n.documentKey,e.documentKey),t!==0?t:cn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WKe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GKe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==WKe)throw n;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&kt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,r)=>{t(e)})}static reject(e){return new De((t,r)=>{r(e)})}static waitFor(e){return new De((t,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&t()},l=>r(l))}),a=!0,i===s&&t()})}static or(e){let t=De.resolve(!1);for(const r of e)t=t.next(s=>s?De.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new De((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next(u=>{a[c]=u,++o,o===i&&r(a)},u=>s(u))}})}static doWhile(e,t){return new De((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function HKe(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tw(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}eP.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=-1;function tP(n){return n==null}function u_(n){return n===0&&1/n==-1/0}function qKe(n){return typeof n=="number"&&Number.isInteger(n)&&!u_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const noe="";function KKe(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C9(e)),e=XKe(n.get(t),e);return C9(e)}function XKe(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case noe:t+="";break;default:t+=i}}return t}function C9(n){return n+noe+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function I0(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function roe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new Ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new Ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gI(this.root,e,this.comparator,!1)}getReverseIterator(){return new gI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gI(this.root,e,this.comparator,!0)}}class gI{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oi{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??oi.RED,this.left=s??oi.EMPTY,this.right=i??oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new oi(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return oi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw kt(27949);return e+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1;oi.EMPTY=new class{constructor(){this.size=0}get key(){throw kt(57766)}get value(){throw kt(16141)}get color(){throw kt(16727)}get left(){throw kt(29726)}get right(){throw kt(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new oi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.comparator=e,this.data=new Ar(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E9(this.data.getIterator())}getIteratorFrom(e){return new E9(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Is)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Is(this.comparator);return t.data=e,t}}class E9{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.fields=e,e.sort(ci.comparator)}static empty(){return new Zl([])}unionWith(e){let t=new Is(ci.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ex(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class soe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new soe("Invalid base64 string: "+i):i}}(e);return new gi(t)}static fromUint8Array(e){const t=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new gi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gi.EMPTY_BYTE_STRING=new gi("");const YKe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rp(n){if(Fn(!!n,39018),typeof n=="string"){let e=0;const t=YKe.exec(n);if(Fn(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wr(n.seconds),nanos:Wr(n.nanos)}}function Wr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function sp(n){return typeof n=="string"?gi.fromBase64String(n):gi.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ioe="server_timestamp",aoe="__type__",ooe="__previous_value__",loe="__local_write_time__";function hj(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aoe])==null?void 0:r.stringValue)===ioe}function nP(n){const e=n.mapValue.fields[ooe];return hj(e)?nP(e):e}function i2(n){const e=rp(n.mapValue.fields[loe].timestampValue);return new ir(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZKe{constructor(e,t,r,s,i,a,o,l,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u,this.apiKey=h}}const h_="(default)";class a2{constructor(e,t){this.projectId=e,this.database=t||h_}static empty(){return new a2("","")}get isDefaultDatabase(){return this.database===h_}isEqual(e){return e instanceof a2&&e.projectId===this.projectId&&e.database===this.database}}function QKe(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Qe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new a2(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const coe="__type__",JKe="__max__",yI={mapValue:{}},uoe="__vector__",d_="value";function ip(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hj(n)?4:tXe(n)?9007199254740991:eXe(n)?10:11:kt(28295,{value:n})}function Cu(n,e){if(n===e)return!0;const t=ip(n);if(t!==ip(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return i2(n).isEqual(i2(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=rp(s.timestampValue),o=rp(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return sp(s.bytesValue).isEqual(sp(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return Wr(s.geoPointValue.latitude)===Wr(i.geoPointValue.latitude)&&Wr(s.geoPointValue.longitude)===Wr(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Wr(s.integerValue)===Wr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Wr(s.doubleValue),o=Wr(i.doubleValue);return a===o?u_(a)===u_(o):isNaN(a)&&isNaN(o)}return!1}(n,e);case 9:return Ex(n.arrayValue.values||[],e.arrayValue.values||[],Cu);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(T9(a)!==T9(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Cu(a[l],o[l])))return!1;return!0}(n,e);default:return kt(52216,{left:n})}}function o2(n,e){return(n.values||[]).find(t=>Cu(t,e))!==void 0}function Ix(n,e){if(n===e)return 0;const t=ip(n),r=ip(e);if(t!==r)return cn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return cn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Wr(i.integerValue||i.doubleValue),l=Wr(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,e);case 3:return I9(n.timestampValue,e.timestampValue);case 4:return I9(i2(n),i2(e));case 5:return Z4(n.stringValue,e.stringValue);case 6:return function(i,a){const o=sp(i),l=sp(a);return o.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=cn(o[c],l[c]);if(u!==0)return u}return cn(o.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const o=cn(Wr(i.latitude),Wr(a.latitude));return o!==0?o:cn(Wr(i.longitude),Wr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return A9(n.arrayValue,e.arrayValue);case 10:return function(i,a){var d,f,p,m;const o=i.fields||{},l=a.fields||{},c=(d=o[d_])==null?void 0:d.arrayValue,u=(f=l[d_])==null?void 0:f.arrayValue,h=cn(((p=c==null?void 0:c.values)==null?void 0:p.length)||0,((m=u==null?void 0:u.values)==null?void 0:m.length)||0);return h!==0?h:A9(c,u)}(n.mapValue,e.mapValue);case 11:return function(i,a){if(i===yI.mapValue&&a===yI.mapValue)return 0;if(i===yI.mapValue)return 1;if(a===yI.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=Z4(l[h],u[h]);if(d!==0)return d;const f=Ix(o[l[h]],c[u[h]]);if(f!==0)return f}return cn(l.length,u.length)}(n.mapValue,e.mapValue);default:throw kt(23264,{he:t})}}function I9(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return cn(n,e);const t=rp(n),r=rp(e),s=cn(t.seconds,r.seconds);return s!==0?s:cn(t.nanos,r.nanos)}function A9(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Ix(t[s],r[s]);if(i)return i}return cn(t.length,r.length)}function Ax(n){return Q4(n)}function Q4(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=rp(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return sp(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return mt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=Q4(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Q4(t.fields[a])}`;return s+"}"}(n.mapValue):kt(61005,{value:n})}function EA(n){switch(ip(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nP(n);return e?16+EA(e):16;case 5:return 2*n.stringValue.length;case 6:return sp(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+EA(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return I0(r.fields,(i,a)=>{s+=i.length+EA(a)}),s}(n.mapValue);default:throw kt(13486,{value:n})}}function N9(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function J4(n){return!!n&&"integerValue"in n}function dj(n){return!!n&&"arrayValue"in n}function _9(n){return!!n&&"nullValue"in n}function R9(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function IA(n){return!!n&&"mapValue"in n}function eXe(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[coe])==null?void 0:r.stringValue)===uoe}function Q1(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return I0(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Q1(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Q1(n.arrayValue.values[t]);return e}return{...n}}function tXe(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JKe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.value=e}static empty(){return new Qo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!IA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Q1(t)}setAll(e){let t=ci.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=o.popLast()}a?r[o.lastSegment()]=Q1(a):s.push(o.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());IA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];IA(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){I0(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Qo(Q1(this.value))}}function hoe(n){const e=[];return I0(n.fields,(t,r)=>{const s=new ci([t]);if(IA(r)){const i=hoe(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Zl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t,r,s,i,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Oi(e,0,Ft.min(),Ft.min(),Ft.min(),Qo.empty(),0)}static newFoundDocument(e,t,r,s){return new Oi(e,1,t,Ft.min(),r,s,0)}static newNoDocument(e,t){return new Oi(e,2,t,Ft.min(),Ft.min(),Qo.empty(),0)}static newUnknownDocument(e,t){return new Oi(e,3,t,Ft.min(),Ft.min(),Qo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t){this.position=e,this.inclusive=t}}function D9(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=mt.comparator(mt.fromName(a.referenceValue),t.key):r=Ix(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function F9(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Cu(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t="asc"){this.field=e,this.dir=t}}function nXe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class doe{}class rs extends doe{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sXe(e,t,r):t==="array-contains"?new oXe(e,r):t==="in"?new lXe(e,r):t==="not-in"?new cXe(e,r):t==="array-contains-any"?new uXe(e,r):new rs(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new iXe(e,r):new aXe(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ix(t,this.value)):t!==null&&ip(this.value)===ip(t)&&this.matchesComparison(Ix(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dc extends doe{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dc(e,t)}matches(e){return foe(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function foe(n){return n.op==="and"}function poe(n){return rXe(n)&&foe(n)}function rXe(n){for(const e of n.filters)if(e instanceof dc)return!1;return!0}function e$(n){if(n instanceof rs)return n.field.canonicalString()+n.op.toString()+Ax(n.value);if(poe(n))return n.filters.map(e=>e$(e)).join(",");{const e=n.filters.map(t=>e$(t)).join(",");return`${n.op}(${e})`}}function moe(n,e){return n instanceof rs?function(r,s){return s instanceof rs&&r.op===s.op&&r.field.isEqual(s.field)&&Cu(r.value,s.value)}(n,e):n instanceof dc?function(r,s){return s instanceof dc&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,o)=>i&&moe(a,s.filters[o]),!0):!1}(n,e):void kt(19439)}function goe(n){return n instanceof rs?function(t){return`${t.field.canonicalString()} ${t.op} ${Ax(t.value)}`}(n):n instanceof dc?function(t){return t.op.toString()+" {"+t.getFilters().map(goe).join(" ,")+"}"}(n):"Filter"}class sXe extends rs{constructor(e,t,r){super(e,t,r),this.key=mt.fromName(r.referenceValue)}matches(e){const t=mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class iXe extends rs{constructor(e,t){super(e,"in",t),this.keys=yoe("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aXe extends rs{constructor(e,t){super(e,"not-in",t),this.keys=yoe("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yoe(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>mt.fromName(r.referenceValue))}class oXe extends rs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dj(t)&&o2(t.arrayValue,this.value)}}class lXe extends rs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&o2(this.value.arrayValue,t)}}class cXe extends rs{constructor(e,t){super(e,"not-in",t)}matches(e){if(o2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!o2(this.value.arrayValue,t)}}class uXe extends rs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dj(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>o2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hXe{constructor(e,t=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}}function P9(n,e=null,t=[],r=[],s=null,i=null,a=null){return new hXe(n,e,t,r,s,i,a)}function fj(n){const e=Ot(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>e$(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),tP(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ax(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ax(r)).join(",")),e.Te=t}return e.Te}function pj(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nXe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!moe(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!F9(n.startAt,e.startAt)&&F9(n.endAt,e.endAt)}function t$(n){return mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t=null,r=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function dXe(n,e,t,r,s,i,a,o){return new nw(n,e,t,r,s,i,a,o)}function voe(n){return new nw(n)}function O9(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fXe(n){return mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function xoe(n){return n.collectionGroup!==null}function J1(n){const e=Ot(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Is(ci.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new l2(i,r))}),t.has(ci.keyField().canonicalString())||e.Ie.push(new l2(ci.keyField(),r))}return e.Ie}function pu(n){const e=Ot(n);return e.Ee||(e.Ee=pXe(e,J1(n))),e.Ee}function pXe(n,e){if(n.limitType==="F")return P9(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new l2(s.field,i)});const t=n.endAt?new f_(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new f_(n.startAt.position,n.startAt.inclusive):null;return P9(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function n$(n,e){const t=n.filters.concat([e]);return new nw(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mXe(n,e){const t=n.explicitOrderBy.concat([e]);return new nw(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function p_(n,e,t){return new nw(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rP(n,e){return pj(pu(n),pu(e))&&n.limitType===e.limitType}function boe(n){return`${fj(pu(n))}|lt:${n.limitType}`}function sy(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>goe(s)).join(", ")}]`),tP(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Ax(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Ax(s)).join(",")),`Target(${r})`}(pu(n))}; limitType=${n.limitType})`}function sP(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):mt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of J1(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(a,o,l){const c=D9(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,J1(r),s)||r.endAt&&!function(a,o,l){const c=D9(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,J1(r),s))}(n,e)}function gXe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function woe(n){return(e,t)=>{let r=!1;for(const s of J1(n)){const i=yXe(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function yXe(n,e,t){const r=n.field.isKeyField()?mt.comparator(e.key,t.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?Ix(l,c):kt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return kt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){I0(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return roe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vXe=new Ar(mt.comparator);function jh(){return vXe}const Soe=new Ar(mt.comparator);function A1(...n){let e=Soe;for(const t of n)e=e.insert(t.key,t);return e}function koe(n){let e=Soe;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function cm(){return eS()}function Coe(){return eS()}function eS(){return new A0(n=>n.toString(),(n,e)=>n.isEqual(e))}const xXe=new Ar(mt.comparator),bXe=new Is(mt.comparator);function un(...n){let e=bXe;for(const t of n)e=e.add(t);return e}const wXe=new Is(cn);function SXe(){return wXe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:u_(e)?"-0":e}}function Toe(n){return{integerValue:""+n}}function kXe(n,e){return qKe(e)?Toe(e):mj(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this._=void 0}}function CXe(n,e,t){return n instanceof c2?function(s,i){const a={fields:{[aoe]:{stringValue:ioe},[loe]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hj(i)&&(i=nP(i)),i&&(a.fields[ooe]=i),{mapValue:a}}(t,e):n instanceof u2?Ioe(n,e):n instanceof h2?Aoe(n,e):function(s,i){const a=Eoe(s,i),o=L9(a)+L9(s.Ae);return J4(a)&&J4(s.Ae)?Toe(o):mj(s.serializer,o)}(n,e)}function TXe(n,e,t){return n instanceof u2?Ioe(n,e):n instanceof h2?Aoe(n,e):t}function Eoe(n,e){return n instanceof m_?function(r){return J4(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class c2 extends iP{}class u2 extends iP{constructor(e){super(),this.elements=e}}function Ioe(n,e){const t=Noe(e);for(const r of n.elements)t.some(s=>Cu(s,r))||t.push(r);return{arrayValue:{values:t}}}class h2 extends iP{constructor(e){super(),this.elements=e}}function Aoe(n,e){let t=Noe(e);for(const r of n.elements)t=t.filter(s=>!Cu(s,r));return{arrayValue:{values:t}}}class m_ extends iP{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function L9(n){return Wr(n.integerValue||n.doubleValue)}function Noe(n){return dj(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EXe{constructor(e,t){this.field=e,this.transform=t}}function IXe(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof u2&&s instanceof u2||r instanceof h2&&s instanceof h2?Ex(r.elements,s.elements,Cu):r instanceof m_&&s instanceof m_?Cu(r.Ae,s.Ae):r instanceof c2&&s instanceof c2}(n.transform,e.transform)}class AXe{constructor(e,t){this.version=e,this.transformResults=t}}class Th{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Th}static exists(e){return new Th(void 0,e)}static updateTime(e){return new Th(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function AA(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class aP{}function _oe(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Doe(n.key,Th.none()):new HT(n.key,n.data,Th.none());{const t=n.data,r=Qo.empty();let s=new Is(ci.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new N0(n.key,r,new Zl(s.toArray()),Th.none())}}function NXe(n,e,t){n instanceof HT?function(s,i,a){const o=s.value.clone(),l=$9(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,e,t):n instanceof N0?function(s,i,a){if(!AA(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=$9(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(Roe(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function tS(n,e,t,r){return n instanceof HT?function(i,a,o,l){if(!AA(i.precondition,a))return o;const c=i.value.clone(),u=z9(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof N0?function(i,a,o,l){if(!AA(i.precondition,a))return o;const c=z9(i.fieldTransforms,l,a),u=a.data;return u.setAll(Roe(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(i,a,o){return AA(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,e,t)}function _Xe(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=Eoe(r.transform,s||null);i!=null&&(t===null&&(t=Qo.empty()),t.set(r.field,i))}return t||null}function M9(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ex(r,s,(i,a)=>IXe(i,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class HT extends aP{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class N0 extends aP{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Roe(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $9(n,e,t){const r=new Map;Fn(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,TXe(a,o,t[s]))}return r}function z9(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,CXe(i,a,e))}return r}class Doe extends aP{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RXe extends aP{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DXe{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NXe(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=tS(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=tS(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Coe();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=t.has(s.key)?null:o;const l=_oe(a,o);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Ex(this.mutations,e.mutations,(t,r)=>M9(t,r))&&Ex(this.baseMutations,e.baseMutations,(t,r)=>M9(t,r))}}class gj{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Fn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return xXe}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new gj(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FXe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PXe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jr,vn;function OXe(n){switch(n){case _e.OK:return kt(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return kt(15467,{code:n})}}function Foe(n){if(n===void 0)return Vh("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Jr.OK:return _e.OK;case Jr.CANCELLED:return _e.CANCELLED;case Jr.UNKNOWN:return _e.UNKNOWN;case Jr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Jr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Jr.INTERNAL:return _e.INTERNAL;case Jr.UNAVAILABLE:return _e.UNAVAILABLE;case Jr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Jr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Jr.NOT_FOUND:return _e.NOT_FOUND;case Jr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Jr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Jr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Jr.ABORTED:return _e.ABORTED;case Jr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Jr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Jr.DATA_LOSS:return _e.DATA_LOSS;default:return kt(39323,{code:n})}}(vn=Jr||(Jr={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LXe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MXe=new _f([4294967295,4294967295],0);function B9(n){const e=LXe().encode(n),t=new Hae;return t.update(e),new Uint8Array(t.digest())}function V9(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _f([t,r],0),new _f([s,i],0)]}class yj{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new N1(`Invalid padding: ${t}`);if(r<0)throw new N1(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new N1(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new N1(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_f.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(_f.fromNumber(r)));return s.compare(MXe)===1&&(s=new _f([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=B9(e),[r,s]=V9(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new yj(i,s,t);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const t=B9(e),[r,s]=V9(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class N1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,qT.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new oP(Ft.min(),s,new Ar(cn),jh(),un())}}class qT{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qT(r,t,un(),un(),un())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class Poe{constructor(e,t){this.targetId=e,this.Ce=t}}class Ooe{constructor(e,t,r=gi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class j9{constructor(){this.ve=0,this.Fe=U9(),this.Me=gi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=un(),t=un(),r=un();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:kt(38017,{changeType:i})}}),new qT(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=U9()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Fn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $Xe{constructor(e){this.Ge=e,this.ze=new Map,this.je=jh(),this.He=vI(),this.Je=vI(),this.Ze=new Ar(cn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:kt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,s)=>{this.rt(s)&&t(s)})}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(t$(i))if(r===0){const a=new mt(i.path);this.et(t,a,Oi.newNoDocument(a,Ft.min()))}else Fn(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,o;try{a=sp(r).toUint8Array()}catch(l){if(l instanceof soe)return Tx("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new yj(a,s,i)}catch(l){return Tx(l instanceof N1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.et(t,i,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((i,a)=>{const o=this.ot(a);if(o){if(i.current&&t$(o.target)){const l=new mt(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Oi.newNoDocument(l,e))}i.Be&&(t.set(a,i.ke()),i.Ke())}});let r=un();this.Je.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new oP(e,t,this.Ze,this.je,r);return this.je=jh(),this.He=vI(),this.Je=vI(),this.Ze=new Ar(cn),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new j9,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Is(cn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Is(cn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new j9),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function vI(){return new Ar(mt.comparator)}function U9(){return new Ar(mt.comparator)}const zXe={asc:"ASCENDING",desc:"DESCENDING"},BXe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VXe={and:"AND",or:"OR"};class jXe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function r$(n,e){return n.useProto3Json||tP(e)?e:{value:e}}function g_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Loe(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UXe(n,e){return g_(n,e.toTimestamp())}function mu(n){return Fn(!!n,49232),Ft.fromTimestamp(function(t){const r=rp(t);return new ir(r.seconds,r.nanos)}(n))}function vj(n,e){return s$(n,e).canonicalString()}function s$(n,e){const t=function(s){return new Zn(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Moe(n){const e=Zn.fromString(n);return Fn(joe(e),10190,{key:e.toString()}),e}function i$(n,e){return vj(n.databaseId,e.path)}function i3(n,e){const t=Moe(e);if(t.get(1)!==n.databaseId.projectId)throw new Qe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Qe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new mt(zoe(t))}function $oe(n,e){return vj(n.databaseId,e)}function WXe(n){const e=Moe(n);return e.length===4?Zn.emptyPath():zoe(e)}function a$(n){return new Zn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zoe(n){return Fn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function W9(n,e,t){return{name:i$(n,e),fields:t.value.mapValue.fields}}function GXe(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:kt(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Fn(u===void 0||typeof u=="string",58123),gi.fromBase64String(u||"")):(Fn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),gi.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?_e.UNKNOWN:Foe(c.code);return new Qe(u,c.message||"")}(a);t=new Ooe(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=i3(n,r.document.name),i=mu(r.document.updateTime),a=r.document.createTime?mu(r.document.createTime):Ft.min(),o=new Qo({mapValue:{fields:r.document.fields}}),l=Oi.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];t=new NA(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=i3(n,r.document),i=r.readTime?mu(r.readTime):Ft.min(),a=Oi.newNoDocument(s,i),o=r.removedTargetIds||[];t=new NA([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=i3(n,r.document),i=r.removedTargetIds||[];t=new NA([],i,s,null)}else{if(!("filter"in e))return kt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new PXe(s,i),o=r.targetId;t=new Poe(o,a)}}return t}function HXe(n,e){let t;if(e instanceof HT)t={update:W9(n,e.key,e.value)};else if(e instanceof Doe)t={delete:i$(n,e.key)};else if(e instanceof N0)t={update:W9(n,e.key,e.data),updateMask:tYe(e.fieldMask)};else{if(!(e instanceof RXe))return kt(16599,{dt:e.type});t={verify:i$(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const o=a.transform;if(o instanceof c2)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof u2)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof h2)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof m_)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw kt(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:UXe(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:kt(27497)}(n,e.precondition)),t}function qXe(n,e){return n&&n.length>0?(Fn(e!==void 0,14353),n.map(t=>function(s,i){let a=s.updateTime?mu(s.updateTime):mu(i);return a.isEqual(Ft.min())&&(a=mu(i)),new AXe(a,s.transformResults||[])}(t,e))):[]}function KXe(n,e){return{documents:[$oe(n,e.path)]}}function XXe(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$oe(n,s);const i=function(c){if(c.length!==0)return Voe(dc.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:iy(d.field),direction:QXe(d.dir)}}(u))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=r$(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:t,parent:s}}function YXe(n){let e=WXe(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Fn(r===1,65062);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];t.where&&(i=function(h){const d=Boe(h);return d instanceof dc&&poe(d)?d.getFilters():[d]}(t.where));let a=[];t.orderBy&&(a=function(h){return h.map(d=>function(p){return new l2(ay(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(t.orderBy));let o=null;t.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,tP(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new f_(f,d)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new f_(f,d)}(t.endAt)),dXe(e,s,a,i,o,"F",l,c)}function ZXe(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Boe(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ay(t.unaryFilter.field);return rs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ay(t.unaryFilter.field);return rs.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ay(t.unaryFilter.field);return rs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ay(t.unaryFilter.field);return rs.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return kt(61313);default:return kt(60726)}}(n):n.fieldFilter!==void 0?function(t){return rs.create(ay(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return kt(58110);default:return kt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dc.create(t.compositeFilter.filters.map(r=>Boe(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return kt(1026)}}(t.compositeFilter.op))}(n):kt(30097,{filter:n})}function QXe(n){return zXe[n]}function JXe(n){return BXe[n]}function eYe(n){return VXe[n]}function iy(n){return{fieldPath:n.canonicalString()}}function ay(n){return ci.fromServerFormat(n.fieldPath)}function Voe(n){return n instanceof rs?function(t){if(t.op==="=="){if(R9(t.value))return{unaryFilter:{field:iy(t.field),op:"IS_NAN"}};if(_9(t.value))return{unaryFilter:{field:iy(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R9(t.value))return{unaryFilter:{field:iy(t.field),op:"IS_NOT_NAN"}};if(_9(t.value))return{unaryFilter:{field:iy(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iy(t.field),op:JXe(t.op),value:t.value}}}(n):n instanceof dc?function(t){const r=t.getFilters().map(s=>Voe(s));return r.length===1?r[0]:{compositeFilter:{op:eYe(t.op),filters:r}}}(n):kt(54877,{filter:n})}function tYe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function joe(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Uoe(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,r,s,i=Ft.min(),a=Ft.min(),o=gi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new hf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nYe{constructor(e){this.yt=e}}function rYe(n){const e=YXe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?p_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sYe{constructor(){this.Sn=new iYe}addToCollectionParentIndex(e,t){return this.Sn.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(np.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(np.min())}updateCollectionGroup(e,t,r){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class iYe{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Is(Zn.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Is(Zn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Woe=41943040;class Ia{static withCacheSize(e){return new Ia(e,Ia.DEFAULT_COLLECTION_PERCENTILE,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ia.DEFAULT_COLLECTION_PERCENTILE=10,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ia.DEFAULT=new Ia(Woe,Ia.DEFAULT_COLLECTION_PERCENTILE,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ia.DISABLED=new Ia(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Nx(0)}static ar(){return new Nx(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="LruGarbageCollector",aYe=1048576;function q9([n,e],[t,r]){const s=cn(n,t);return s===0?cn(e,r):s}class oYe{constructor(e){this.Pr=e,this.buffer=new Is(q9),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();q9(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lYe{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Je(H9,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tw(t)?Je(H9,"Ignoring IndexedDB error during garbage collection: ",t):await ew(t)}await this.Ar(3e5)})}}class cYe{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return De.resolve(eP.ce);const r=new oYe(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(G9)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G9):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,i,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,t))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ry()<=xn.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function uYe(n,e){return new cYe(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hYe{constructor(){this.changes=new A0(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?De.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dYe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fYe{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&tS(r.mutation,s,Zl.empty(),ir.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,un()).next(()=>r))}getLocalViewOfDocuments(e,t,r=un()){const s=cm();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let a=A1();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=cm();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,un()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,r,s){let i=jh();const a=eS(),o=function(){return eS()}();return t.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof N0)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),tS(u.mutation,c,u.mutation.getFieldMask(),ir.now())):a.set(c.key,Zl.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),t.forEach((c,u)=>o.set(c,new dYe(u,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,t){const r=eS();let s=new Ar((a,o)=>a-o),i=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Zl.empty();u=o.applyToLocalView(c,u),r.set(l,u);const h=(s.get(o.batchId)||un()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,h=Coe();u.forEach(d=>{if(!i.has(d)){const f=_oe(t.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return De.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return fXe(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xoe(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):De.resolve(cm());let o=s2,l=i;return a.next(c=>De.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),i.get(u)?De.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,un())).next(u=>({batchId:o,changes:koe(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new mt(t)).next(r=>{let s=A1();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=A1();return this.indexManager.getCollectionParents(e,i).next(o=>De.forEach(o,l=>{const c=function(h,d){return new nw(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,d)=>{a=a.insert(h,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Oi.newInvalidDocument(u)))});let o=A1();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&tS(u.mutation,c,Zl.empty(),ir.now()),sP(t,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pYe{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return De.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:mu(s.createTime)}}(t)),De.resolve()}getNamedQuery(e,t){return De.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(s){return{name:s.name,query:rYe(s.bundledQuery),readTime:mu(s.readTime)}}(t)),De.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mYe{constructor(){this.overlays=new Ar(mt.comparator),this.Lr=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const r=cm();return De.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.bt(e,t,i)}),De.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),De.resolve()}getOverlaysForCollection(e,t,r){const s=cm(),i=t.length+1,a=new mt(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return De.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Ar((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=cm(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=cm(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return De.resolve(o)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new FXe(t,r));let i=this.Lr.get(t);i===void 0&&(i=un(),this.Lr.set(t,i)),this.Lr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gYe{constructor(){this.sessionToken=gi.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,De.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.kr=new Is(Vs.Kr),this.qr=new Is(Vs.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Vs(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Vs(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){const t=new mt(new Zn([])),r=new Vs(t,e),s=new Vs(t,e+1),i=[];return this.qr.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new mt(new Zn([])),r=new Vs(t,e),s=new Vs(t,e+1);let i=un();return this.qr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const t=new Vs(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Vs{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return mt.comparator(e.key,t.key)||cn(e.Hr,t.Hr)}static Ur(e,t){return cn(e.Hr,t.Hr)||mt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yYe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Is(Vs.Kr)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new DXe(i,t,r,s);this.mutationQueue.push(a);for(const o of s)this.Jr=this.Jr.add(new Vs(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return De.resolve(a)}lookupMutationBatch(e,t){return De.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),i=s<0?0:s;return De.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?uj:this.Yn-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vs(t,0),s=new Vs(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],a=>{const o=this.Zr(a.Hr);i.push(o)}),De.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Is(cn);return t.forEach(s=>{const i=new Vs(s,0),a=new Vs(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],o=>{r=r.add(o.Hr)})}),De.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;mt.isDocumentKey(i)||(i=i.child(""));const a=new Vs(new mt(i),0);let o=new Is(cn);return this.Jr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.Hr)),!0)},a),De.resolve(this.Yr(o))}Yr(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Fn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return De.forEach(t.mutations,s=>{const i=new Vs(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){const r=new Vs(t,0),s=this.Jr.firstAfterOrEqual(r);return De.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vYe{constructor(e){this.ti=e,this.docs=function(){return new Ar(mt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return De.resolve(r?r.document.mutableCopy():Oi.newInvalidDocument(t))}getEntries(e,t){let r=jh();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Oi.newInvalidDocument(s))}),De.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=jh();const a=t.path,o=new mt(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||UKe(jKe(u),r)<=0||(s.has(u.key)||sP(t,u))&&(i=i.insert(u.key,u.mutableCopy()))}return De.resolve(i)}getAllFromCollectionGroup(e,t,r,s){kt(9500)}ni(e,t){return De.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xYe(this)}getSize(e){return De.resolve(this.size)}}class xYe extends hYe{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),De.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bYe{constructor(e){this.persistence=e,this.ri=new A0(t=>fj(t),pj),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.ii=0,this.si=new xj,this.targetCount=0,this.oi=Nx._r()}forEachTarget(e,t){return this.ri.forEach((r,s)=>t(s)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),De.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Nx(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.lr(t),De.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.ri.forEach((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),De.waitFor(i).next(()=>s)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return De.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),De.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),De.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),De.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return De.resolve(r)}containsKey(e,t){return De.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Goe{constructor(e,t){this._i={},this.overlays={},this.ai=new eP(0),this.ui=!1,this.ui=!0,this.ci=new gYe,this.referenceDelegate=e(this),this.li=new bYe(this),this.indexManager=new sYe,this.remoteDocumentCache=function(s){return new vYe(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new nYe(t),this.Pi=new pYe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mYe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new yYe(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){Je("MemoryPersistence","Starting transaction:",e);const s=new wYe(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,t){return De.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}}class wYe extends GKe{constructor(e){super(),this.currentSequenceNumber=e}}class bj{constructor(e){this.persistence=e,this.Ri=new xj,this.Ai=null}static Vi(e){return new bj(e)}get di(){if(this.Ai)return this.Ai;throw kt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),De.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),De.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.di,r=>{const s=mt.fromPath(r);return this.mi(e,s).next(i=>{i||t.removeEntry(s,Ft.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return De.or([()=>De.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class y_{constructor(e,t){this.persistence=e,this.fi=new A0(r=>KKe(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=uYe(this,t)}static Vi(e,t){return new y_(e,t)}Ti(){}Ii(e){return De.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return De.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?De.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,t).next(o=>{o||(r++,i.removeEntry(a,Ft.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),De.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),De.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),De.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=EA(e.data.value)),t}wr(e,t,r){return De.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return De.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=un(),s=un();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new wj(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SYe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kYe{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return U9e()?8:HKe(V9e())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.gs(e,t).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ps(e,t,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new SYe;return this.ys(e,t,a).next(o=>{if(i.result=o,this.As)return this.ws(e,t,a,o.size)})}).next(()=>i.result)}ws(e,t,r,s){return r.documentReadCount<this.Vs?(ry()<=xn.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",sy(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),De.resolve()):(ry()<=xn.DEBUG&&Je("QueryEngine","Query:",sy(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ry()<=xn.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",sy(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pu(t))):De.resolve())}gs(e,t){if(O9(t))return De.resolve(null);let r=pu(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=p_(t,null,"F"),r=pu(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=un(...i);return this.fs.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(t,o);return this.Ss(t,c,a,l.readTime)?this.gs(e,p_(t,null,"F")):this.Ds(e,c,t,l)}))})))}ps(e,t,r,s){return O9(t)||s.isEqual(Ft.min())?De.resolve(null):this.fs.getDocuments(e,r).next(i=>{const a=this.bs(t,i);return this.Ss(t,a,r,s)?De.resolve(null):(ry()<=xn.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sy(t)),this.Ds(e,a,t,VKe(s,s2)).next(o=>o))})}bs(e,t){let r=new Is(woe(e));return t.forEach((s,i)=>{sP(e,i)&&(r=r.add(i))}),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,t,r){return ry()<=xn.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",sy(t)),this.fs.getDocumentsMatchingQuery(e,t,np.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="LocalStore",CYe=3e8;class TYe{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Ar(cn),this.Fs=new A0(i=>fj(i),pj),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fYe(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}function EYe(n,e,t,r){return new TYe(n,e,t,r)}async function Hoe(n,e){const t=Ot(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let l=un();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:o}))})})}function IYe(n,e){const t=Ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.xs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const h=c.batch,d=h.keys();let f=De.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const y=c.docVersions.get(p);Fn(y!==null,48541),m.version.compareTo(y)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=un();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function qoe(n){const e=Ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function AYe(n,e){const t=Ot(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const o=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;o.push(t.li.removeMatchingKeys(i,u.removedDocuments,h).next(()=>t.li.addMatchingKeys(i,u.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(gi.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),s=s.insert(h,f),function(m,y,g){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=CYe?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(d,f,u)&&o.push(t.li.updateTargetData(i,f))});let l=jh(),c=un();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(NYe(i,a,e.documentUpdates).next(u=>{l=u.Bs,c=u.Ls})),!r.isEqual(Ft.min())){const u=t.li.getLastRemoteSnapshotVersion(i).next(h=>t.li.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(u)}return De.waitFor(o).next(()=>a.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(t.vs=s,i))}function NYe(n,e,t){let r=un(),s=un();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=jh();return t.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Ft.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Je(Sj,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Bs:a,Ls:s}})}function _Ye(n,e){const t=Ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uj),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RYe(n,e){const t=Ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.li.getTargetData(r,e).next(i=>i?(s=i,De.resolve(s)):t.li.allocateTargetId(r).next(a=>(s=new hf(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function o$(n,e,t){const r=Ot(n),s=r.vs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!tw(a))throw a;Je(Sj,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function K9(n,e,t){const r=Ot(n);let s=Ft.min(),i=un();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const h=Ot(l),d=h.Fs.get(u);return d!==void 0?De.resolve(h.vs.get(d)):h.li.getTargetData(c,u)}(r,a,pu(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?s:Ft.min(),t?i:un())).next(o=>(DYe(r,gXe(e),o),{documents:o,ks:i})))}function DYe(n,e,t){let r=n.Ms.get(e)||Ft.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.Ms.set(e,r)}class X9{constructor(){this.activeTargetIds=SXe()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FYe{constructor(){this.vo=new X9,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new X9,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PYe{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="ConnectivityMonitor";class Z9{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Je(Y9,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Je(Y9,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xI=null;function l$(){return xI===null?xI=function(){return 268435456+Math.round(2147483648*Math.random())}():xI++,"0x"+xI.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="RestConnection",OYe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class LYe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===h_?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,i){const a=l$(),o=this.Qo(e,t.toUriEncodedString());Je(a3,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:c}=new URL(o),u=ZV(c);return this.zo(e,o,l,r,u).then(h=>(Je(a3,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Tx(a3,`RPC '${e}' ${a} failed with error: `,h,"url: ",o,"request:",r),h})}jo(e,t,r,s,i,a){return this.Wo(e,t,r,s,i)}Go(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jb}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,t){const r=OYe[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MYe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="WebChannelConnection",Gw=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Gy extends LYe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Gy.c_){const e=Yae();Gw(e,Xae.STAT_EVENT,t=>{t.stat===Y4.PROXY?Je(wi,"STAT_EVENT: detected buffering proxy"):t.stat===Y4.NOPROXY&&Je(wi,"STAT_EVENT: detected no buffering proxy")}),Gy.c_=!0}}zo(e,t,r,s,i){const a=l$();return new Promise((o,l)=>{const c=new qae;c.setWithCredentials(!0),c.listenOnce(Kae.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case TA.NO_ERROR:const h=c.getResponseJson();Je(wi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case TA.TIMEOUT:Je(wi,`RPC '${e}' ${a} timed out`),l(new Qe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case TA.HTTP_ERROR:const d=c.getStatus();if(Je(wi,`RPC '${e}' ${a} failed with status:`,d,"response text:",c.getResponseText()),d>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(v)>=0?v:_e.UNKNOWN}(p.status);l(new Qe(m,p.message))}else l(new Qe(_e.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Qe(_e.UNAVAILABLE,"Connection failed."));break;default:kt(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Je(wi,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(s);Je(wi,`RPC '${e}' ${a} sending request:`,s),c.send(t,"POST",u,r,15)})}T_(e,t,r){const s=l$(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,t,r),o.encodeInitMessageHeaders=!0;const c=i.join("");Je(wi,`Creating RPC '${e}' stream ${s}: ${c}`,o);const u=a.createWebChannel(c,o);this.I_(u);let h=!1,d=!1;const f=new MYe({Ho:p=>{d?Je(wi,`Not sending because RPC '${e}' stream ${s} is closed:`,p):(h||(Je(wi,`Opening RPC '${e}' stream ${s} transport.`),u.open(),h=!0),Je(wi,`RPC '${e}' stream ${s} sending:`,p),u.send(p))},Jo:()=>u.close()});return Gw(u,I1.EventType.OPEN,()=>{d||(Je(wi,`RPC '${e}' stream ${s} transport opened.`),f.i_())}),Gw(u,I1.EventType.CLOSE,()=>{d||(d=!0,Je(wi,`RPC '${e}' stream ${s} transport closed`),f.o_(),this.E_(u))}),Gw(u,I1.EventType.ERROR,p=>{d||(d=!0,Tx(wi,`RPC '${e}' stream ${s} transport errored. Name:`,p.name,"Message:",p.message),f.o_(new Qe(_e.UNAVAILABLE,"The operation could not be completed")))}),Gw(u,I1.EventType.MESSAGE,p=>{var m;if(!d){const y=p.data[0];Fn(!!y,16349);const g=y,v=(g==null?void 0:g.error)||((m=g[0])==null?void 0:m.error);if(v){Je(wi,`RPC '${e}' stream ${s} received error:`,v);const b=v.status;let w=function(T){const E=Jr[T];if(E!==void 0)return Foe(E)}(b),C=v.message;w===void 0&&(w=_e.INTERNAL,C="Unknown error status: "+b+" with message "+v.message),d=!0,f.o_(new Qe(w,C)),u.close()}else Je(wi,`RPC '${e}' stream ${s} received:`,y),f.__(y)}}),Gy.u_(),setTimeout(()=>{f.s_()},0),f}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Zae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ye(n){return new Gy(n)}function o3(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){return new jXe(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gy.c_=!1;class Koe{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&Je("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="PersistentStream";class Xoe{constructor(e,t,r,s,i,a,o,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Koe(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Vh(t.toString()),Vh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===t&&this.G_(r,s)},r=>{e(()=>{const s=new Qe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Je(Q9,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(Je(Q9,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zYe extends Xoe{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GXe(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ft.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ft.min():a.readTime?mu(a.readTime):Ft.min()}(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=a$(this.serializer),t.addTarget=function(i,a){let o;const l=a.target;if(o=t$(l)?{documents:KXe(i,l)}:{query:XXe(i,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Loe(i,a.resumeToken);const c=r$(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ft.min())>0){o.readTime=g_(i,a.snapshotVersion.toTimestamp());const c=r$(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=ZXe(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=a$(this.serializer),t.removeTarget=e,this.K_(t)}}class BYe extends Xoe{constructor(e,t,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Fn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qXe(e.writeResults,e.commitTime),r=mu(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=a$(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>HXe(this.serializer,r))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VYe{}class jYe extends VYe{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Qe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,s$(t,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Qe(_e.UNKNOWN,i.toString())})}jo(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.jo(e,s$(t,r),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Qe(_e.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function UYe(n,e,t,r){return new jYe(n,e,t,r)}class WYe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vh(t),this.aa=!1):Je("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="RemoteStore";class GYe{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{_0(this)&&(Je(Jg,"Restarting streams for network reachability change."),await async function(l){const c=Ot(l);c.Ea.add(4),await KT(c),c.Va.set("Unknown"),c.Ea.delete(4),await cP(c)}(this))})}),this.Va=new WYe(r,s)}}async function cP(n){if(_0(n))for(const e of n.Ra)await e(!0)}async function KT(n){for(const e of n.Ra)await e(!1)}function Yoe(n,e){const t=Ot(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ej(t)?Tj(t):rw(t).O_()&&Cj(t,e))}function kj(n,e){const t=Ot(n),r=rw(t);t.Ia.delete(e),r.O_()&&Zoe(t,e),t.Ia.size===0&&(r.O_()?r.L_():_0(t)&&t.Va.set("Unknown"))}function Cj(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rw(n).Z_(e)}function Zoe(n,e){n.da.$e(e),rw(n).X_(e)}function Tj(n){n.da=new $Xe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),rw(n).start(),n.Va.ua()}function Ej(n){return _0(n)&&!rw(n).x_()&&n.Ia.size>0}function _0(n){return Ot(n).Ea.size===0}function Qoe(n){n.da=void 0}async function HYe(n){n.Va.set("Online")}async function qYe(n){n.Ia.forEach((e,t)=>{Cj(n,e)})}async function KYe(n,e){Qoe(n),Ej(n)?(n.Va.ha(e),Tj(n)):n.Va.set("Unknown")}async function XYe(n,e,t){if(n.Va.set("Online"),e instanceof Ooe&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.Ia.delete(o),s.da.removeTarget(o))}(n,e)}catch(r){Je(Jg,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await v_(n,r)}else if(e instanceof NA?n.da.Xe(e):e instanceof Poe?n.da.st(e):n.da.tt(e),!t.isEqual(Ft.min()))try{const r=await qoe(n.localStore);t.compareTo(r)>=0&&await function(i,a){const o=i.da.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Ia.get(c);u&&i.Ia.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.Ia.get(l);if(!u)return;i.Ia.set(l,u.withResumeToken(gi.EMPTY_BYTE_STRING,u.snapshotVersion)),Zoe(i,l);const h=new hf(u.target,l,c,u.sequenceNumber);Cj(i,h)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){Je(Jg,"Failed to raise snapshot:",r),await v_(n,r)}}async function v_(n,e,t){if(!tw(e))throw e;n.Ea.add(1),await KT(n),n.Va.set("Offline"),t||(t=()=>qoe(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Je(Jg,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await cP(n)})}function Joe(n,e){return e().catch(t=>v_(n,t,e))}async function uP(n){const e=Ot(n),t=ap(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:uj;for(;YYe(e);)try{const s=await _Ye(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,ZYe(e,s)}catch(s){await v_(e,s)}ele(e)&&tle(e)}function YYe(n){return _0(n)&&n.Ta.length<10}function ZYe(n,e){n.Ta.push(e);const t=ap(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function ele(n){return _0(n)&&!ap(n).x_()&&n.Ta.length>0}function tle(n){ap(n).start()}async function QYe(n){ap(n).ra()}async function JYe(n){const e=ap(n);for(const t of n.Ta)e.ea(t.mutations)}async function eZe(n,e,t){const r=n.Ta.shift(),s=gj.from(r,e,t);await Joe(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await uP(n)}async function tZe(n,e){e&&ap(n).Y_&&await async function(r,s){if(function(a){return OXe(a)&&a!==_e.ABORTED}(s.code)){const i=r.Ta.shift();ap(r).B_(),await Joe(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await uP(r)}}(n,e),ele(n)&&tle(n)}async function J9(n,e){const t=Ot(n);t.asyncQueue.verifyOperationInProgress(),Je(Jg,"RemoteStore received new credentials");const r=_0(t);t.Ea.add(3),await KT(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cP(t)}async function nZe(n,e){const t=Ot(n);e?(t.Ea.delete(2),await cP(t)):e||(t.Ea.add(2),await KT(t),t.Va.set("Unknown"))}function rw(n){return n.ma||(n.ma=function(t,r,s){const i=Ot(t);return i.sa(),new zYe(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Zo:HYe.bind(null,n),Yo:qYe.bind(null,n),t_:KYe.bind(null,n),J_:XYe.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),Ej(n)?Tj(n):n.Va.set("Unknown")):(await n.ma.stop(),Qoe(n))})),n.ma}function ap(n){return n.fa||(n.fa=function(t,r,s){const i=Ot(t);return i.sa(),new BYe(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:QYe.bind(null,n),t_:tZe.bind(null,n),ta:JYe.bind(null,n),na:eZe.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await uP(n)):(await n.fa.stop(),n.Ta.length>0&&(Je(Jg,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,o=new Ij(e,t,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Aj(n,e){if(Vh("AsyncQueue",`${e}: ${n}`),tw(n))return new Qe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{static emptySet(e){return new Hy(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||mt.comparator(t.key,r.key):(t,r)=>mt.comparator(t.key,r.key),this.keyedMap=A1(),this.sortedSet=new Ar(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Hy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(){this.ga=new Ar(mt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):kt(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class _x{constructor(e,t,r,s,i,a,o,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new _x(e,t,Hy.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rP(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class sZe{constructor(){this.queries=t7(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Ot(t),i=s.queries;s.queries=t7(),i.forEach((a,o)=>{for(const l of o.ba)l.onError(r)})})(this,new Qe(_e.ABORTED,"Firestore shutting down"))}}function t7(){return new A0(n=>boe(n),rP)}async function iZe(n,e){const t=Ot(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new rZe,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const o=Aj(a,`Initialization of query '${sy(e.query)}' failed`);return void e.onError(o)}t.queries.set(s,i),i.ba.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&Nj(t)}async function aZe(n,e){const t=Ot(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function oZe(n,e){const t=Ot(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const o of a.ba)o.Fa(s)&&(r=!0);a.wa=s}}r&&Nj(t)}function lZe(n,e,t){const r=Ot(n),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(t);r.queries.delete(e)}function Nj(n){n.Ca.forEach(e=>{e.next()})}var c$,n7;(n7=c$||(c$={})).Ma="default",n7.Cache="cache";class cZe{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _x(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_x.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==c$.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nle{constructor(e){this.key=e}}class rle{constructor(e){this.key=e}}class uZe{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=un(),this.mutatedKeys=un(),this.eu=woe(e),this.tu=new Hy(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new e7,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),f=sP(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),y=!0):this.su(d,f)||(r.track({type:2,doc:f}),y=!0,(l&&this.eu(f,l)>0||c&&this.eu(f,c)<0)&&(o=!0)):!d&&f?(r.track({type:0,doc:f}),y=!0):d&&!f&&(r.track({type:1,doc:d}),y=!0,(l||c)&&(o=!0)),y&&(f?(a=a.add(f),i=m?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{tu:a,iu:r,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((u,h)=>function(f,p){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt(20277,{Vt:y})}};return m(f)-m(p)}(u.type,h.type)||this.eu(u.doc,h.doc)),this.ou(r),s=s??!1;const o=t&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,c=l!==this.Xa;return this.Xa=l,a.length!==0||c?{snapshot:new _x(this.query,e.tu,i,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e7,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=un(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new rle(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new nle(r))}),t}cu(e){this.Za=e.ks,this.Ya=un();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _x.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const _j="SyncEngine";class hZe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dZe{constructor(e){this.key=e,this.hu=!1}}class fZe{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new A0(o=>boe(o),rP),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ar(mt.comparator),this.Au=new Map,this.Vu=new xj,this.du={},this.mu=new Map,this.fu=Nx.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pZe(n,e,t=!0){const r=cle(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await sle(r,e,t,!0),s}async function mZe(n,e){const t=cle(n);await sle(t,e,!0,!1)}async function sle(n,e,t,r){const s=await RYe(n.localStore,pu(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let o;return r&&(o=await gZe(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&Yoe(n.remoteStore,s),o}async function gZe(n,e,t,r,s){n.pu=(h,d,f)=>async function(m,y,g,v){let b=y.view.ru(g);b.Ss&&(b=await K9(m.localStore,y.query,!1).then(({documents:T})=>y.view.ru(T,b)));const w=v&&v.targetChanges.get(y.targetId),C=v&&v.targetMismatches.get(y.targetId)!=null,I=y.view.applyChanges(b,m.isPrimaryClient,w,C);return s7(m,y.targetId,I.au),I.snapshot}(n,h,d,f);const i=await K9(n.localStore,e,!0),a=new uZe(e,i.ks),o=a.ru(i.documents),l=qT.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),c=a.applyChanges(o,n.isPrimaryClient,l);s7(n,t,c.au);const u=new hZe(e,t,a);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function yZe(n,e,t){const r=Ot(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!rP(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await o$(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&kj(r.remoteStore,s.targetId),u$(r,s.targetId)}).catch(ew)):(u$(r,s.targetId),await o$(r.localStore,s.targetId,!0))}async function vZe(n,e){const t=Ot(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kj(t.remoteStore,r.targetId))}async function xZe(n,e,t){const r=EZe(n);try{const s=await function(a,o){const l=Ot(a),c=ir.now(),u=o.reduce((f,p)=>f.add(p.key),un());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=jh(),m=un();return l.xs.getEntries(f,u).next(y=>{p=y,p.forEach((g,v)=>{v.isValidDocument()||(m=m.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(y=>{h=y;const g=[];for(const v of o){const b=_Xe(v,h.get(v.key).overlayedDocument);b!=null&&g.push(new N0(v.key,b,hoe(b.value.mapValue),Th.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,g,o)}).next(y=>{d=y;const g=y.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,y.batchId,g)})}).then(()=>({batchId:d.batchId,changes:koe(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.du[a.currentUser.toKey()];c||(c=new Ar(cn)),c=c.insert(o,l),a.du[a.currentUser.toKey()]=c}(r,s.batchId,t),await XT(r,s.changes),await uP(r.remoteStore)}catch(s){const i=Aj(s,"Failed to persist write");t.reject(i)}}async function ile(n,e){const t=Ot(n);try{const r=await AYe(t.localStore,e);e.targetChanges.forEach((s,i)=>{const a=t.Au.get(i);a&&(Fn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Fn(a.hu,14607):s.removedDocuments.size>0&&(Fn(a.hu,42227),a.hu=!1))}),await XT(t,r,e)}catch(r){await ew(r)}}function r7(n,e,t){const r=Ot(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach((i,a)=>{const o=a.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Ot(a);l.onlineState=o;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.ba)d.va(o)&&(c=!0)}),c&&Nj(l)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bZe(n,e,t){const r=Ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ar(mt.comparator);a=a.insert(i,Oi.newNoDocument(i,Ft.min()));const o=un().add(i),l=new oP(Ft.min(),new Map,new Ar(cn),a,o);await ile(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),Rj(r)}else await o$(r.localStore,e,!1).then(()=>u$(r,e,t)).catch(ew)}async function wZe(n,e){const t=Ot(n),r=e.batch.batchId;try{const s=await IYe(t.localStore,e);ole(t,r,null),ale(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await XT(t,s)}catch(s){await ew(s)}}async function SZe(n,e,t){const r=Ot(n);try{const s=await function(a,o){const l=Ot(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(Fn(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);ole(r,e,t),ale(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await XT(r,s)}catch(s){await ew(s)}}function ale(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function ole(n,e,t){const r=Ot(n);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function u$(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||lle(n,r)})}function lle(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(kj(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Rj(n))}function s7(n,e,t){for(const r of t)r instanceof nle?(n.Vu.addReference(r.key,e),kZe(n,r)):r instanceof rle?(Je(_j,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||lle(n,r.key)):kt(19791,{wu:r})}function kZe(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(Je(_j,"New document in limbo: "+t),n.Eu.add(r),Rj(n))}function Rj(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new mt(Zn.fromString(e)),r=n.fu.next();n.Au.set(r,new dZe(t)),n.Ru=n.Ru.insert(t,r),Yoe(n.remoteStore,new hf(pu(voe(t.path)),r,"TargetPurposeLimboResolution",eP.ce))}}async function XT(n,e,t){const r=Ot(n),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=wj.Es(l.targetId,c);i.push(h)}}))}),await Promise.all(a),r.Pu.J_(s),await async function(l,c){const u=Ot(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>De.forEach(c,d=>De.forEach(d.Ts,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>De.forEach(d.Is,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!tw(h))throw h;Je(Sj,"Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.vs.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.vs=u.vs.insert(d,m)}}}(r.localStore,i))}async function CZe(n,e){const t=Ot(n);if(!t.currentUser.isEqual(e)){Je(_j,"User change. New user:",e.toKey());const r=await Hoe(t.localStore,e);t.currentUser=e,function(i,a){i.mu.forEach(o=>{o.forEach(l=>{l.reject(new Qe(_e.CANCELLED,a))})}),i.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await XT(t,r.Ns)}}function TZe(n,e){const t=Ot(n),r=t.Au.get(e);if(r&&r.hu)return un().add(r.key);{let s=un();const i=t.Iu.get(e);if(!i)return s;for(const a of i){const o=t.Tu.get(a);s=s.unionWith(o.view.nu)}return s}}function cle(n){const e=Ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ile.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TZe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bZe.bind(null,e),e.Pu.J_=oZe.bind(null,e.eventManager),e.Pu.yu=lZe.bind(null,e.eventManager),e}function EZe(n){const e=Ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wZe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SZe.bind(null,e),e}class x_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lP(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return EYe(this.persistence,new kYe,e.initialUser,this.serializer)}Cu(e){return new Goe(bj.Vi,this.serializer)}Du(e){return new FYe}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}x_.provider={build:()=>new x_};class IZe extends x_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Fn(this.persistence.referenceDelegate instanceof y_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lYe(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ia.withCacheSize(this.cacheSizeBytes):Ia.DEFAULT;return new Goe(r=>y_.Vi(r,t),this.serializer)}}class h${async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r7(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CZe.bind(null,this.syncEngine),await nZe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sZe}()}createDatastore(e){const t=lP(e.databaseInfo.databaseId),r=$Ye(e.databaseInfo);return UYe(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,a,o){return new GYe(r,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>r7(this.syncEngine,t,0),function(){return Z9.v()?new Z9:new PYe}())}createSyncEngine(e,t){return function(s,i,a,o,l,c,u){const h=new fZe(s,i,a,o,l,c);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=Ot(s);Je(Jg,"RemoteStore shutting down."),i.Ea.add(5),await KT(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}h$.provider={build:()=>new h$};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vh("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="FirestoreClient";class NZe{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=Ni.UNAUTHENTICATED,this.clientId=cj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Je(op,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Je(op,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Aj(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function l3(n,e){n.asyncQueue.verifyOperationInProgress(),Je(op,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Hoe(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function i7(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _Ze(n);Je(op,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>J9(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>J9(e.remoteStore,s)),n._onlineComponents=e}async function _Ze(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Je(op,"Using user provided OfflineComponentProvider");try{await l3(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===_e.FAILED_PRECONDITION||s.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Tx("Error using user provided cache. Falling back to memory cache: "+t),await l3(n,new x_)}}else Je(op,"Using default OfflineComponentProvider"),await l3(n,new IZe(void 0));return n._offlineComponents}async function ule(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Je(op,"Using user provided OnlineComponentProvider"),await i7(n,n._uninitializedComponentsProvider._online)):(Je(op,"Using default OnlineComponentProvider"),await i7(n,new h$))),n._onlineComponents}function RZe(n){return ule(n).then(e=>e.syncEngine)}async function DZe(n){const e=await ule(n),t=e.eventManager;return t.onListen=pZe.bind(null,e.syncEngine),t.onUnlisten=yZe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mZe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vZe.bind(null,e.syncEngine),t}function FZe(n,e,t={}){const r=new Rf;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new AZe({next:d=>{u.Nu(),a.enqueueAndForget(()=>aZe(i,h)),d.fromCache&&l.source==="server"?c.reject(new Qe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new cZe(o,u,{includeMetadataChanges:!0,Ka:!0});return iZe(i,h)}(await DZe(n),n.asyncQueue,e,t,r)),r.promise}function PZe(n,e){const t=new Rf;return n.asyncQueue.enqueueAndForget(async()=>xZe(await RZe(n),e,t)),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hle(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OZe="ComponentProvider",a7=new Map;function LZe(n,e,t,r,s){return new ZKe(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,hle(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dle="firestore.googleapis.com",o7=!0;class l7{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dle,this.ssl=o7}else this.host=e.host,this.ssl=e.ssl??o7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Woe;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aYe)throw new Qe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BKe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hle(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hP{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l7({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l7(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _Ke;switch(r.type){case"firstParty":return new PKe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Qe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=a7.get(t);r&&(Je(OZe,"Removing Datastore"),a7.delete(t),r.terminate())}(this),Promise.resolve()}}function MZe(n,e,t,r={}){var c;n=c_(n,hP);const s=ZV(e),i=n._getSettings(),a={...i,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;s&&(L9e(`https://${o}`),B9e("Firestore",!0)),i.host!==dle&&i.host!==o&&Tx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:o,ssl:s,emulatorOptions:r};if(!n2(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Ni.MOCK_USER;else{u=M9e(r.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Qe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ni(d)}n._authCredentials=new RKe(new Jae(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ep(this.firestore,e,this._query)}}class Hs{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Df(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hs(this.firestore,e,this._key)}toJSON(){return{type:Hs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(GT(t,Hs._jsonSchema))return new Hs(e,r||null,new mt(Zn.fromString(t.referencePath)))}}Hs._jsonSchemaVersion="firestore/documentReference/1.0",Hs._jsonSchema={type:os("string",Hs._jsonSchemaVersion),referencePath:os("string")};class Df extends Ep{constructor(e,t,r){super(e,t,voe(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hs(this.firestore,null,new mt(e))}withConverter(e){return new Df(this.firestore,e,this._path)}}function fle(n,e,...t){if(n=$h(n),eoe("collection","path",e),n instanceof hP){const r=Zn.fromString(e,...t);return w9(r),new Df(n,null,r)}{if(!(n instanceof Hs||n instanceof Df))throw new Qe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zn.fromString(e,...t));return w9(r),new Df(n.firestore,null,r)}}function $Ze(n,e,...t){if(n=$h(n),arguments.length===1&&(e=cj.newId()),eoe("doc","path",e),n instanceof hP){const r=Zn.fromString(e,...t);return b9(r),new Hs(n,null,new mt(r))}{if(!(n instanceof Hs||n instanceof Df))throw new Qe(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zn.fromString(e,...t));return b9(r),new Hs(n.firestore,n instanceof Df?n.converter:null,new mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7="AsyncQueue";class u7{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Koe(this,"async_queue_retry"),this._c=()=>{const r=o3();r&&Je(c7,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=o3();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=o3();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Rf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!tw(e))throw e;Je(c7,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Vh("INTERNAL UNHANDLED ERROR: ",h7(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Ij.createAndSchedule(this,e,t,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&kt(47125,{Pc:h7(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function h7(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Dj extends hP{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new u7,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u7(e),this._firestoreClient=void 0,await e}}}function zZe(n,e){const t=typeof n=="object"?n:wae(),r=typeof n=="string"?n:h_,s=WT(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=P9e("firestore");i&&MZe(s,...i)}return s}function ple(n){if(n._terminated)throw new Qe(_e.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||BZe(n),n._firestoreClient}function BZe(n){var r,s,i,a;const e=n._freezeSettings(),t=LZe(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new NZe(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jo(gi.fromBase64String(e))}catch(t){throw new Qe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jo(gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jo._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(GT(e,Jo._jsonSchema))return Jo.fromBase64String(e.bytes)}}Jo._jsonSchemaVersion="firestore/bytes/1.0",Jo._jsonSchema={type:os("string",Jo._jsonSchemaVersion),bytes:os("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mle{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Qe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gu._jsonSchemaVersion}}static fromJSON(e){if(GT(e,gu._jsonSchema))return new gu(e.latitude,e.longitude)}}gu._jsonSchemaVersion="firestore/geoPoint/1.0",gu._jsonSchema={type:os("string",gu._jsonSchemaVersion),latitude:os("number"),longitude:os("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:sc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(GT(e,sc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new sc(e.vectorValues);throw new Qe(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sc._jsonSchemaVersion="firestore/vectorValue/1.0",sc._jsonSchema={type:os("string",sc._jsonSchemaVersion),vectorValues:os("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZe=/^__.*__$/;class jZe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new N0(e,this.data,this.fieldMask,t,this.fieldTransforms):new HT(e,this.data,t,this.fieldTransforms)}}function gle(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt(40011,{dataSource:n})}}class Pj{constructor(e,t,r,s,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Pj({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return b_(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(gle(this.dataSource)&&VZe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class UZe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lP(e)}createContext(e,t,r,s=!1){return new Pj({dataSource:e,methodName:t,targetDoc:r,path:ci.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yle(n){const e=n._freezeSettings(),t=lP(n._databaseId);return new UZe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function WZe(n,e,t,r,s,i={}){const a=n.createContext(i.merge||i.mergeFields?2:0,e,t,s);ble("Data must be an object, but it was:",a,r);const o=vle(r,a);let l,c;if(i.merge)l=new Zl(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const d=dP(e,h,t);if(!a.contains(d))throw new Qe(_e.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);KZe(u,d)||u.push(d)}l=new Zl(u),c=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=a.fieldTransforms;return new jZe(new Qo(o),l,c)}class Oj extends Fj{_toFieldTransform(e){return new EXe(e.path,new c2)}isEqual(e){return e instanceof Oj}}function GZe(n,e,t,r=!1){return Lj(t,n.createContext(r?4:3,e))}function Lj(n,e){if(xle(n=$h(n)))return ble("Unsupported field value:",e,n),vle(n,e);if(n instanceof Fj)return function(r,s){if(!gle(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const o of r){let l=Lj(o,s.childContextForArray(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=$h(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kXe(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ir.fromDate(r);return{timestampValue:g_(s.serializer,i)}}if(r instanceof ir){const i=new ir(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:g_(s.serializer,i)}}if(r instanceof gu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jo)return{bytesValue:Loe(s.serializer,r._byteString)};if(r instanceof Hs){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vj(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof sc)return function(a,o){const l=a instanceof sc?a.toArray():a;return{mapValue:{fields:{[coe]:{stringValue:uoe},[d_]:{arrayValue:{values:l.map(u=>{if(typeof u!="number")throw o.createError("VectorValues must only contain numeric values.");return mj(o.serializer,u)})}}}}}}(r,s);if(Uoe(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${JF(r)}`)}(n,e)}function vle(n,e){const t={};return roe(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):I0(n,(r,s)=>{const i=Lj(s,e.childContextForField(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function xle(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof gu||n instanceof Jo||n instanceof Hs||n instanceof Fj||n instanceof sc||Uoe(n))}function ble(n,e,t){if(!xle(t)||!toe(t)){const r=JF(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function dP(n,e,t){if((e=$h(e))instanceof mle)return e._internalPath;if(typeof e=="string")return qZe(n,e);throw b_("Field path arguments must be of type string or ",n,!1,void 0,t)}const HZe=new RegExp("[~\\*/\\[\\]]");function qZe(n,e,t){if(e.search(HZe)>=0)throw b_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mle(...e.split("."))._internalPath}catch{throw b_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function b_(n,e,t,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new Qe(_e.INVALID_ARGUMENT,o+n+l)}function KZe(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZe{convertValue(e,t="none"){switch(ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw kt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return I0(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var r,s,i;const t=(i=(s=(r=e.fields)==null?void 0:r[d_].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Wr(a.doubleValue));return new sc(t)}convertGeoPoint(e){return new gu(Wr(e.latitude),Wr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nP(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(i2(e));default:return null}}convertTimestamp(e){const t=rp(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zn.fromString(e);Fn(joe(r),9688,{name:e});const s=new a2(r.get(1),r.get(3)),i=new mt(r.popFirst(5));return s.isEqual(t)||Vh(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZe extends XZe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,t)}}function ZZe(){return new Oj("serverTimestamp")}const d7="@firebase/firestore",f7="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wle{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Hs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QZe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(dP("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QZe extends wle{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JZe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Qe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mj{}class $j extends Mj{}function eQe(n,e,...t){let r=[];e instanceof Mj&&r.push(e),r=r.concat(t),function(i){const a=i.filter(l=>l instanceof Bj).length,o=i.filter(l=>l instanceof zj).length;if(a>1||a>0&&o>0)throw new Qe(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class zj extends $j{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new zj(e,t,r)}_apply(e){const t=this._parse(e);return Sle(e._query,t),new Ep(e.firestore,e.converter,n$(e._query,t))}_parse(e){const t=yle(e.firestore);return function(i,a,o,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Qe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){m7(h,u);const p=[];for(const m of h)p.push(p7(l,i,m));d={arrayValue:{values:p}}}else d=p7(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||m7(h,u),d=GZe(o,a,h,u==="in"||u==="not-in");return rs.create(c,u,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Bj extends Mj{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bj(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:dc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)Sle(a,l),a=n$(a,l)}(e._query,t),new Ep(e.firestore,e.converter,n$(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vj extends $j{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vj(e,t)}_apply(e){const t=function(s,i,a){if(s.startAt!==null)throw new Qe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Qe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new l2(i,a)}(e._query,this._field,this._direction);return new Ep(e.firestore,e.converter,mXe(e._query,t))}}function tQe(n,e="asc"){const t=e,r=dP("orderBy",n);return Vj._create(r,t)}class jj extends $j{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jj(e,t,r)}_apply(e){return new Ep(e.firestore,e.converter,p_(e._query,this._limit,this._limitType))}}function nQe(n){return jj._create("limit",n,"F")}function p7(n,e,t){if(typeof(t=$h(t))=="string"){if(t==="")throw new Qe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xoe(e)&&t.indexOf("/")!==-1)throw new Qe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zn.fromString(t));if(!mt.isDocumentKey(r))throw new Qe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return N9(n,new mt(r))}if(t instanceof Hs)return N9(n,t._key);throw new Qe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JF(t)}.`)}function m7(n,e){if(!Array.isArray(n)||n.length===0)throw new Qe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sle(n,e){const t=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Qe(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qe(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function rQe(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class bI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qy extends wle{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _A(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=qy._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}qy._jsonSchemaVersion="firestore/documentSnapshot/1.0",qy._jsonSchema={type:os("string",qy._jsonSchemaVersion),bundleSource:os("string","DocumentSnapshot"),bundleName:os("string"),bundle:os("string")};class _A extends qy{data(e={}){return super.data(e)}}class Ky{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bI(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _A(this._firestore,this._userDataWriter,r.key,r,new bI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new _A(s._firestore,s._userDataWriter,o.doc.key,o.doc,new bI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new _A(s._firestore,s._userDataWriter,o.doc.key,o.doc,new bI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:sQe(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ky._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cj.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sQe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ky._jsonSchemaVersion="firestore/querySnapshot/1.0",Ky._jsonSchema={type:os("string",Ky._jsonSchemaVersion),bundleSource:os("string","QuerySnapshot"),bundleName:os("string"),bundle:os("string")};function iQe(n){n=c_(n,Ep);const e=c_(n.firestore,Dj),t=ple(e),r=new YZe(e);return JZe(n._query),FZe(t,n._query).then(s=>new Ky(e,r,n,s))}function aQe(n,e){const t=c_(n.firestore,Dj),r=$Ze(n),s=rQe(n.converter,e),i=yle(n.firestore);return oQe(t,[WZe(i,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Th.exists(!1))]).then(()=>r)}function oQe(n,e){const t=ple(n);return PZe(t,e)}(function(e,t=!0){NKe(X7e),tp(new zh("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),o=new Dj(new DKe(r.getProvider("auth-internal")),new OKe(a,r.getProvider("app-check-internal")),QKe(a,s),a);return i={useFetchStreams:t,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),fu(d7,f7,e),fu(d7,f7,"esm2020")})();const g7={apiKey:"AIzaSyDJfwfYSUFyqK5A1LlUPR_mtxm1e8_copk",authDomain:"notesforge-ac3d8.firebaseapp.com",projectId:"notesforge-ac3d8",storageBucket:"notesforge-ac3d8.firebasestorage.app",messagingSenderId:"41071304953",appId:"1:41071304953:web:33504690f13384767a0228",measurementId:"G-BEMJ51VX26"};let c3,d$,d2;try{g7.apiKey?(c3=bae(g7),EKe().then(n=>{n&&(d$=CKe(c3))}),d2=zZe(c3)):console.warn("Firebase config missing. Analytics will not work.")}catch(n){console.error("Firebase initialization error:",n)}const nS=async(n,e={})=>{if(d$&&Gae(d$,n,e),d2)try{await aQe(fle(d2,"events"),{event:n,...e,timestamp:ZZe(),userAgent:navigator.userAgent,path:window.location.pathname})}catch(t){console.error("Error logging to Firestore:",t)}};function lQe({currentPage:n,onNavigate:e}){var oe,we,Ne;const{isLight:t}=Nr(),[r,s]=Me.useState("home"),[i,a]=Me.useState("pdf"),[o,l]=Me.useState([]),[c,u]=Me.useState([]),[h,d]=Me.useState([]),[f,p]=Me.useState([]),[m,y]=Me.useState(!1),[g,v]=Me.useState(!1),[b,w]=Me.useState(""),[C,I]=Me.useState(null),T=Me.useRef(null),E=Me.useRef(null),A=Me.useRef(null),[N,F]=Me.useState(null),[_,D]=Me.useState({invert:!0,clearBackground:!1,greyscale:!1,blackAndWhite:!1,removeLogo:!1,removeTeacher:!1,quality:"medium",documentSize:"A4",orientation:"portrait",rows:3,cols:1,showBorders:!1,addPageNumbers:!0,margin:20,cellPadding:5}),R=(te,xe)=>{D(ce=>({...ce,[te]:xe}))},B=()=>{s("upload"),e("upload")},z=async te=>{const xe=[...o,te];l(xe),y(!0),w("Loading PDF..."),te&&nS("file_upload",{file_type:"pdf",file_size:te.size});try{const ce=await XW(te),pe=ce.numPages,Ie=[],je=h.length;for(let xt=1;xt<=pe;xt++){w(`Rendering page ${xt} of ${pe}...`);const Lt=await YW(ce,xt,.5);Ie.push({id:je+xt,pageNum:xt,fileIndex:xe.length-1,fileName:te.name,thumbnail:Lt.toDataURL(),edited:!1})}const Pe=[...h,...Ie];d(Pe),r==="home"?(s("upload"),p(Pe.map(xt=>xt.id))):p(r==="select"?[...f,...Ie.map(xt=>xt.id)]:Pe.map(xt=>xt.id))}catch(ce){console.error(ce),alert("Error loading PDF. Please try a different file."),l(o)}finally{y(!1),w("")}},W=async te=>{y(!0),w("Loading images...");const xe=r==="select";xe||a("images");try{const ce=xe?c:[],pe=xe?h:[],Ie=ce.length>0?Math.max(...ce.map(dn=>dn.id)):0,je=pe.length>0?Math.max(...pe.map(dn=>dn.id)):0,Pe=[];for(let dn=0;dn<te.length;dn++){w(`Loading image ${dn+1} of ${te.length}...`);const ct=await ZW(te[dn]);Pe.push({id:Ie+dn+1,...ct,selected:!0})}const xt=[...ce,...Pe];u(xt);const Lt=Pe.map((dn,ct)=>({id:je+ct+1,pageNum:je+ct+1,thumbnail:dn.dataUrl,imageId:dn.id,isImage:!0})),Dt=[...pe,...Lt];d(Dt),xe?p([...f,...Lt.map(dn=>dn.id)]):(p(Lt.map(dn=>dn.id)),s("upload"))}catch(ce){console.error(ce),alert("Error loading images. Please try again.")}finally{y(!1),w("")}},K=async te=>{console.log("PPTX Handler v2.0 - Loaded"),y(!0),w("Extracting PowerPoint slides...");const xe=r==="select";xe||a("pptx");try{const ce=await b9e(te,ct=>{w(ct)});if(ce.length===0)throw new Error("No slides could be extracted from the PowerPoint file.");const pe=xe?c:[],Ie=xe?h:[],je=pe.length>0?Math.max(...pe.map(ct=>ct.id)):0,Pe=Ie.length>0?Math.max(...Ie.map(ct=>ct.id)):0,xt=ce.map((ct,Zr)=>({id:je+Zr+1,canvas:ct.canvas,dataUrl:ct.dataUrl,width:ct.width,height:ct.height,file:{name:te.name},selected:!0})),Lt=[...pe,...xt];u(Lt);const Dt=xt.map((ct,Zr)=>({id:Pe+Zr+1,pageNum:Pe+Zr+1,thumbnail:ct.dataUrl,imageId:ct.id,isImage:!0,isPptx:!0})),dn=[...Ie,...Dt];d(dn),xe?p([...f,...Dt.map(ct=>ct.id)]):(p(Dt.map(ct=>ct.id)),s("upload"))}catch(ce){console.error("PPTX extraction error:",ce),alert("Error extracting PowerPoint slides: "+ce.message+`

Note: Only .pptx files (PowerPoint 2007+) are supported.`)}finally{y(!1),w("")}},H=()=>{var te;(te=T.current)==null||te.click()},se=te=>{var ce;const xe=(ce=te.target.files)==null?void 0:ce[0];xe&&(z(xe),te.target.value="")},q=()=>{var te;(te=E.current)==null||te.click()},X=te=>{const xe=Array.from(te.target.files||[]);xe.length!==0&&(W(xe),te.target.value="")},fe=te=>{const xe=o.filter((pe,Ie)=>Ie!==te),ce=h.filter(pe=>pe.fileIndex!==te).map((pe,Ie)=>({...pe,id:Ie+1,fileIndex:pe.fileIndex>te?pe.fileIndex-1:pe.fileIndex}));l(xe),d(ce),p(ce.map(pe=>pe.id))},de=te=>{d(h.map(xe=>xe.id===te.id?te:xe))},ue=te=>{var ce;const xe=(ce=te.target.files)==null?void 0:ce[0];xe&&(K(xe),te.target.value="")},Ce=(te,xe)=>{const ce=h.findIndex(Pe=>Pe.id===te),pe=h.findIndex(Pe=>Pe.id===xe);if(ce===-1||pe===-1)return;const Ie=[...h],[je]=Ie.splice(ce,1);Ie.splice(pe,0,je),d(Ie)},Ae=(te,xe)=>{F(xe),te.dataTransfer.effectAllowed="move",setTimeout(()=>{te.target.style.opacity="0.5"},0)},Ee=te=>{te.target.style.opacity="1",F(null)},Le=(te,xe)=>{te.preventDefault(),te.dataTransfer.dropEffect="move"},Ke=(te,xe)=>{if(te.preventDefault(),N===null||N===xe)return;const ce=[...c],pe=ce[N];ce.splice(N,1),ce.splice(xe,0,pe);const Ie=ce.map((je,Pe)=>({...je,id:Pe+1}));u(Ie),d(Ie.map((je,Pe)=>({id:Pe+1,pageNum:Pe+1,thumbnail:je.dataUrl,isImage:!0}))),p(Ie.map((je,Pe)=>Pe+1)),F(null)},Ze=async()=>{if(f.length!==0){v(!0),s("processing"),nS("process_start",{pages:f.length,layout:`${_.rows}x${_.cols}`});try{const te=[],xe=h.filter(Ie=>f.includes(Ie.id));if(xe.length===0)throw new Error("No valid pages selected.");for(let Ie=0;Ie<xe.length;Ie++){const je=xe[Ie];w(`Processing page ${Ie+1}/${xe.length}...`);let Pe;if(je.edited){Pe=document.createElement("canvas");const xt=Pe.getContext("2d"),Lt=new Ry;await new Promise(Dt=>{Lt.onload=Dt,Lt.src=je.thumbnail}),Pe.width=Lt.width,Pe.height=Lt.height,xt.drawImage(Lt,0,0)}else if(je.isImage||je.isPptx){const xt=je.imageId||je.id,Lt=c.find(Dt=>Dt.id===xt);if(Lt&&Lt.canvas)Pe=document.createElement("canvas"),Pe.width=Lt.canvas.width,Pe.height=Lt.canvas.height,Pe.getContext("2d").drawImage(Lt.canvas,0,0);else if(Lt&&Lt.dataUrl)Pe=await ZW(Lt.file||{name:"image"}).then(Dt=>Dt.canvas);else{Pe=document.createElement("canvas");const Dt=new Ry;await new Promise(dn=>{Dt.onload=dn,Dt.src=je.thumbnail}),Pe.width=Dt.width,Pe.height=Dt.height,Pe.getContext("2d").drawImage(Dt,0,0)}if(_.removeTeacher){w(`Removing teacher from page ${Ie+1}...`);try{Pe=await g9e(Pe,Dt=>w(`Page ${Ie+1}: ${Dt}`))}catch(Dt){console.warn("Teacher removal failed",Dt)}}uwe(Pe,_)}else{const xt=o[je.fileIndex],Lt=await XW(xt),Dt=_.quality==="high"?2:_.quality==="low"?1:1.5;Pe=await YW(Lt,je.pageNum,Dt),Pe=lwe(Pe,_)}te.push({canvas:Pe})}w("Generating Final PDF...");const ce=await cwe(te,_),pe=new Blob([ce],{type:"application/pdf"});I(pe),s("success")}catch(te){console.error(te),alert("Processing Failed. Please try again."),s("settings")}finally{v(!1),w("")}}},gt=()=>{if(!C)return;nS("download_pdf",{size:C.size,layout:`${_.rows}x${_.cols}`});const te=document.createElement("a");te.href=URL.createObjectURL(C),te.download=`NotesForge_${_.rows}x${_.cols}.pdf`,te.click()},Ct=()=>{C&&window.open(URL.createObjectURL(C),"_blank")},M=()=>{l([]),u([]),d([]),p([]),I(null),a("pdf"),s("home"),e("home")},be=()=>{r==="upload"?(s("home"),e("home")):r==="select"?s("upload"):r==="settings"?s("select"):r==="success"&&(s("settings"),I(null))},me=()=>o.reduce((te,xe)=>te+xe.size,0),J=(te,xe)=>{r==="success"&&te!=="success"&&I(null),s(te)},Z=te=>{if(!(o.length>0||c.length>0))return!1;const ce={upload:1,select:2,settings:4,success:6},pe=ce[r]||0;return(ce[te]||0)<=pe};return n==="about"?k.jsx(ope,{onBack:()=>e("home")}):n==="help"?k.jsx(lpe,{onBack:()=>e("home")}):n==="support"?k.jsx(cpe,{onBack:()=>e("home")}):n==="contact"?k.jsx(upe,{onBack:()=>e("home")}):n==="blog"?k.jsx(hpe,{onBack:()=>e("home")}):n==="terms"?k.jsx(dpe,{onBack:()=>e("home")}):n==="privacy"?k.jsx(fpe,{onBack:()=>e("home")}):n==="refund"?k.jsx(ppe,{onBack:()=>e("home")}):(n==="home"&&r!=="home"&&(s("home"),l([]),d([]),p([]),I(null)),r==="home"&&n==="home"?k.jsxs("div",{className:"space-y-0",children:[k.jsx(spe,{onGetStarted:B}),k.jsx(ipe,{}),k.jsx(ape,{})]}):(n==="upload"&&r==="home"&&s("upload"),r==="upload"?k.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[k.jsx("input",{ref:T,type:"file",accept:".pdf",onChange:se,className:"hidden"}),k.jsx("input",{ref:E,type:"file",accept:"image/png,image/jpeg,image/webp,image/gif",multiple:!0,onChange:X,className:"hidden"}),k.jsx("input",{ref:A,type:"file",accept:".pptx,application/vnd.openxmlformats-officedocument.presentationml.presentation",onChange:ue,className:"hidden"}),k.jsxs("button",{onClick:()=>{s("home"),e("home")},className:`flex items-center gap-2 transition-colors ${t?"text-slate-500 hover:text-slate-900":"text-slate-400 hover:text-white"}`,children:[k.jsx(ac,{className:"w-4 h-4"}),"Back to Home"]}),k.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border ${t?"bg-blue-50 border-blue-200":"bg-blue-500/10 border-blue-500/20"}`,children:[k.jsx("div",{className:"p-1.5 rounded-full bg-amber-500",children:k.jsx(l5,{className:"w-4 h-4 text-slate-900"})}),k.jsxs("div",{children:[k.jsx("span",{className:"text-amber-500 font-medium",children:"Pro Tip for Best Experience"}),k.jsxs("p",{className:`text-sm mt-1 ${t?"text-slate-600":"text-slate-400"}`,children:["For smooth and fast processing, make sure to ",k.jsx("span",{className:t?"text-slate-900 font-medium":"text-white",children:"close unnecessary browser tabs"})," and give your device enough breathing room. This helps us work our magic faster!"]})]})]}),k.jsx(h8,{type:"horizontal",className:"max-w-3xl"}),o.length===0&&c.length===0&&k.jsxs(k.Fragment,{children:[k.jsx(Qfe,{onFileSelect:z,onImagesSelect:W,onPptxSelect:K}),k.jsx(h8,{type:"responsive",className:"max-w-2xl"})]}),m&&k.jsxs("div",{className:"flex flex-col items-center gap-4 p-8",children:[k.jsx(HU,{className:"w-10 h-10 text-violet-500 animate-spin"}),k.jsx("p",{className:"text-slate-400",children:b})]}),o.length>0&&!m&&k.jsxs("div",{className:`p-6 rounded-xl border space-y-4 ${t?"bg-slate-50 border-slate-200":"bg-slate-900/50 border-white/5"}`,children:[k.jsxs("h3",{className:`text-lg font-semibold ${t?"text-slate-900":"text-white"}`,children:["Selected PDFs (",o.length,")"]}),k.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto scrollbar-thin",children:o.map((te,xe)=>k.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${t?"bg-white border-slate-200 hover:border-slate-300":"bg-slate-800/50 border-slate-700 hover:border-slate-600"}`,children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:`p-2 rounded-lg ${t?"bg-violet-100":"bg-violet-500/20"}`,children:k.jsx(Of,{className:`w-4 h-4 ${t?"text-violet-600":"text-violet-400"}`})}),k.jsxs("div",{children:[k.jsx("span",{className:`text-sm ${t?"text-slate-900":"text-white"}`,children:te.name}),k.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(",(te.size/(1024*1024)).toFixed(2)," MB)"]})]}),k.jsxs("span",{className:`text-xs flex items-center gap-1 ${t?"text-emerald-600":"text-emerald-400"}`,children:[k.jsx(eO,{className:"w-3 h-3"}),h.filter(ce=>ce.fileIndex===xe).length," pages"]})]}),k.jsx("button",{onClick:()=>fe(xe),className:"text-slate-500 hover:text-red-400 transition-colors",children:k.jsx(wS,{className:"w-5 h-5"})})]},xe))}),k.jsx("div",{className:`flex items-center justify-between pt-4 border-t text-sm ${t?"border-slate-200":"border-white/5"}`,children:k.jsxs("span",{className:"text-slate-400",children:["Total: ",k.jsxs("span",{className:t?"text-slate-900":"text-white",children:[o.length," PDF",o.length>1?"s":""]})," ",k.jsxs("span",{className:`ml-1 ${t?"text-slate-900":"text-white"}`,children:[h.length," pages"]})," ",k.jsxs("span",{className:`ml-1 ${t?"text-slate-900":"text-white"}`,children:[(me()/(1024*1024)).toFixed(2)," MB"]})]})}),k.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 pt-2",children:[k.jsxs(Cs,{onClick:()=>s("select"),className:"px-8 gap-2",children:[k.jsx(eO,{className:"w-4 h-4"}),"Continue"]}),k.jsx(Cs,{variant:"secondary",onClick:M,children:"Clear All"})]}),k.jsxs("button",{onClick:H,className:"flex items-center gap-2 text-violet-400 hover:text-violet-300 text-sm mx-auto pt-2 transition-colors",children:[k.jsx(XU,{className:"w-4 h-4"}),"Add more PDFs"]})]}),c.length>0&&!m&&k.jsxs("div",{className:`p-6 rounded-xl border space-y-4 ${t?"bg-slate-50 border-emerald-200":"bg-slate-900/50 border-emerald-500/20"}`,children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${t?"text-slate-900":"text-white"}`,children:[k.jsx(Ry,{className:`w-5 h-5 ${t?"text-emerald-600":"text-emerald-400"}`}),"Uploaded Images (",c.length,")"]}),k.jsx("span",{className:"text-xs text-slate-500",children:" Drag images to reorder"})]}),k.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2 max-h-72 overflow-y-auto scrollbar-thin p-1",children:c.map((te,xe)=>k.jsxs("div",{draggable:!0,onDragStart:ce=>Ae(ce,xe),onDragEnd:Ee,onDragOver:ce=>Le(ce),onDrop:ce=>Ke(ce,xe),className:`
                                        relative aspect-square rounded-lg overflow-hidden border-2 group cursor-grab active:cursor-grabbing transition-all duration-200
                                        ${N===xe?"border-emerald-500 scale-95 opacity-50":N!==null?"border-dashed border-slate-500 hover:border-emerald-400 hover:scale-105":"border-slate-700 hover:border-emerald-500/50"}
                                    `,children:[k.jsx("img",{src:te.dataUrl,alt:te.name,className:"w-full h-full object-cover pointer-events-none"}),k.jsx("button",{onClick:ce=>{ce.stopPropagation();const pe=c.filter((Ie,je)=>je!==xe);u(pe),d(pe.map((Ie,je)=>({id:je+1,pageNum:je+1,thumbnail:Ie.dataUrl,isImage:!0}))),p(pe.map(Ie=>Ie.id))},className:"absolute top-1 right-1 p-1 bg-red-500/80 rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",children:k.jsx(wS,{className:"w-3 h-3 text-white"})}),k.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-[10px] p-1 truncate flex items-center justify-between",children:[k.jsx("span",{className:"font-bold",children:xe+1}),k.jsx("span",{className:"opacity-60",children:""})]})]},te.id||xe))}),k.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-white/5 text-sm",children:k.jsxs("span",{className:"text-slate-400",children:["Total: ",k.jsxs("span",{className:"text-white",children:[c.length," images"]})]})}),k.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 pt-2",children:[k.jsxs(Cs,{onClick:()=>s("select"),className:"px-8 gap-2 bg-gradient-to-r from-emerald-600 to-cyan-600",children:[k.jsx(eO,{className:"w-4 h-4"}),"Review & Edit Pages"]}),k.jsx(Cs,{variant:"secondary",onClick:M,children:"Clear All"})]}),k.jsxs("button",{onClick:q,className:"flex items-center gap-2 text-emerald-400 hover:text-emerald-300 text-sm mx-auto pt-2 transition-colors",children:[k.jsx(XU,{className:"w-4 h-4"}),"Add more images"]})]})]}):r==="select"?k.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[k.jsx("input",{ref:T,type:"file",accept:".pdf",onChange:se,className:"hidden"}),k.jsx("input",{ref:E,type:"file",accept:"image/png,image/jpeg,image/webp,image/gif",multiple:!0,onChange:X,className:"hidden"}),k.jsx("input",{ref:A,type:"file",accept:".pptx,application/vnd.openxmlformats-officedocument.presentationml.presentation",onChange:ue,className:"hidden"}),k.jsx(dL,{currentStep:3,onStepClick:J,canNavigateToStep:Z}),k.jsx(epe,{pages:h,selectedPages:f,onSelectionChange:p,onPageEdit:de,onContinue:()=>s("settings"),onBack:be,onReorder:Ce,onAddPdfs:()=>{var te;return(te=T.current)==null?void 0:te.click()},onAddImages:()=>{var te;return(te=E.current)==null?void 0:te.click()},onAddPptx:()=>{var te;return(te=A.current)==null?void 0:te.click()}})]}):r==="settings"||r==="processing"?k.jsxs("div",{className:"space-y-6",children:[k.jsx(dL,{currentStep:r==="processing"?5:4,onStepClick:J,canNavigateToStep:Z}),k.jsxs("div",{className:"text-center",children:[k.jsx("h2",{className:"text-2xl font-bold text-white",children:"Enhance & Format"}),k.jsx("p",{className:"text-slate-400",children:"Customize your document with our enhancement tools."})]}),k.jsx(tpe,{settings:_,updateSettings:R,fileInfo:{name:o.length===1?(oe=o[0])==null?void 0:oe.name:`${o.length} PDFs`,size:me(),pageCount:f.length,excludedCount:h.length-f.length},onBack:be,onProcess:Ze,processing:g}),g&&k.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center z-50",children:k.jsxs("div",{className:"bg-slate-900 rounded-2xl p-8 border border-white/10 text-center space-y-4",children:[k.jsx(HU,{className:"w-12 h-12 text-violet-500 animate-spin mx-auto"}),k.jsx("p",{className:"text-white font-medium",children:"Processing your document..."}),k.jsx("p",{className:"text-slate-400 text-sm",children:b})]})})]}):r==="success"?k.jsx(npe,{fileInfo:{name:o.length===1?(Ne=(we=o[0])==null?void 0:we.name)==null?void 0:Ne.replace(".pdf",""):c.length>0?"Images":"Combined",originalSize:(me()/1024).toFixed(2),finalSize:((C==null?void 0:C.size)/(1024*1024)).toFixed(2),pageCount:Math.ceil((c.length||f.length)/(_.rows*_.cols))},onDownload:gt,onPreview:Ct,onProcessAnother:M,onGoBack:be,onStepClick:J,canNavigateToStep:Z}):null))}function cQe({onBack:n}){var p,m,y,g;const{isLight:e}=Nr(),[t,r]=Me.useState(!1),[s,i]=Me.useState(""),[a,o]=Me.useState(!1),[l,c]=Me.useState({activeUsers:0,totalVisits24h:0,totalVisits7d:0,recentEvents:[]}),u="admin123",h=v=>{v.preventDefault(),s===u?(r(!0),d()):alert("Incorrect Password")},d=async()=>{if(d2){o(!0);try{const v=fle(d2,"events"),b=eQe(v,tQe("timestamp","desc"),nQe(500)),C=(await iQe(b)).docs.map(z=>{var W,K;return{id:z.id,...z.data(),timestampObj:z.data().timestamp,date:(W=z.data().timestamp)==null?void 0:W.toDate().toLocaleDateString(),timestamp:((K=z.data().timestamp)==null?void 0:K.toDate().toLocaleString())||"Just now"}}),I={},T={Desktop:0,Mobile:0},E={uploads:0,processed:0,downloads:0},A={};for(let z=6;z>=0;z--){const W=new Date;W.setDate(W.getDate()-z),A[W.toLocaleDateString()]=0}C.forEach(z=>{if(z.event==="page_view"&&z.page_path&&(I[z.page_path]=(I[z.page_path]||0)+1),z.userAgent){const W=/iPhone|iPad|iPod|Android/i.test(z.userAgent);T[W?"Mobile":"Desktop"]++}z.event==="file_upload"&&E.uploads++,z.event==="process_start"&&E.processed++,z.event==="download_pdf"&&E.downloads++,z.date&&A[z.date]!==void 0&&A[z.date]++});const N=Object.entries(I).sort(([,z],[,W])=>W-z).slice(0,5).map(([z,W])=>({path:z,count:W})),F=Object.entries(A).map(([z,W])=>({date:z.split("/")[1]+"/"+z.split("/")[0],count:W})),_=new Date(Date.now()-30*60*1e3),D=C.filter(z=>{var W;return((W=z.timestampObj)==null?void 0:W.toDate())>_}).length,R=new Date(Date.now()-24*60*60*1e3),B=C.filter(z=>{var W;return((W=z.timestampObj)==null?void 0:W.toDate())>R}).length;c({activeUsers:Math.ceil(D/1.5),totalVisits24h:B,totalVisits7d:C.length,recentEvents:C.slice(0,20),topPages:N,platforms:T,funnel:E,activityData:F,rawEvents:C})}catch(v){console.error("Error fetching stats:",v)}finally{o(!1)}}},f=()=>{if(!l.rawEvents)return;const v=["ID","Event","Path","Details","Timestamp"],b=l.rawEvents.map(T=>[T.id,T.event,T.page_path||"-",JSON.stringify(T).replace(/,/g,";").substring(0,50),T.timestamp]),w="data:text/csv;charset=utf-8,"+v.join(",")+`
`+b.map(T=>T.join(",")).join(`
`),C=encodeURI(w),I=document.createElement("a");I.setAttribute("href",C),I.setAttribute("download",`notesforge_events_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(I),I.click(),document.body.removeChild(I)};return t?k.jsx("div",{className:`min-h-screen p-6 ${e?"bg-slate-50":"bg-background"}`,children:k.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[k.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[k.jsxs("div",{children:[k.jsx("h1",{className:`text-3xl font-bold ${e?"text-slate-900":"text-white"}`,children:"Analytics Dashboard"}),k.jsx("p",{className:"text-slate-500",children:"Real-time visitor tracking & insights"})]}),k.jsxs("div",{className:"flex gap-3",children:[k.jsxs("button",{onClick:f,className:`px-4 py-2 rounded-xl text-sm font-medium border transition-colors flex items-center gap-2 ${e?"bg-white border-slate-200 hover:bg-slate-50 text-slate-700":"bg-slate-900 border-white/10 hover:bg-white/5 text-slate-300"}`,children:[k.jsx(Of,{className:"w-4 h-4"})," Export CSV"]}),k.jsx("button",{onClick:d,disabled:a,className:`p-2 rounded-xl border transition-colors ${e?"bg-white border-slate-200 hover:bg-slate-50":"bg-slate-900 border-white/10 hover:bg-white/5"}`,children:k.jsx(LK,{className:`w-5 h-5 ${a?"animate-spin":""}`})}),k.jsx("button",{onClick:n,className:"px-4 py-2 rounded-xl bg-slate-900 text-white text-sm font-medium hover:bg-slate-800",children:"Exit"})]})]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[k.jsx(u3,{icon:khe,label:"Active Now (Est.)",value:l.activeUsers,color:"text-emerald-500",isLight:e}),k.jsx(u3,{icon:h5,label:"Events (24h)",value:l.totalVisits24h,color:"text-blue-500",isLight:e}),k.jsx(u3,{icon:rl,label:"Conversion Rate",value:(p=l.funnel)!=null&&p.uploads?`${Math.round(l.funnel.downloads/l.funnel.uploads*100)}%`:"0%",color:"text-violet-500",isLight:e})]}),l.topPages&&k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[k.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-white border-slate-200":"bg-slate-900 border-white/10"}`,children:[k.jsx("h3",{className:`text-lg font-bold mb-6 ${e?"text-slate-900":"text-white"}`,children:"Weekly Activity"}),k.jsx("div",{className:"flex items-end justify-between h-40 gap-2",children:(m=l.activityData)==null?void 0:m.map((v,b)=>{const w=Math.max(...l.activityData.map(I=>I.count),10),C=Math.max(v.count/w*100,5);return k.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[k.jsxs("div",{className:"relative w-full bg-slate-100/10 rounded-t-lg bg-slate-800/50 h-full flex items-end overflow-hidden",children:[k.jsx("div",{className:`w-full transition-all duration-500 group-hover:opacity-80 ${e?"bg-violet-500":"bg-violet-600"}`,style:{height:`${C}%`}}),k.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-black text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity",children:v.count})]}),k.jsx("span",{className:"text-xs text-slate-500 truncate w-full text-center",children:v.date})]},b)})})]}),k.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-white border-slate-200":"bg-slate-900 border-white/10"}`,children:[k.jsx("h3",{className:`text-lg font-bold mb-6 ${e?"text-slate-900":"text-white"}`,children:"Conversion Funnel"}),k.jsx("div",{className:"space-y-6",children:["uploads","processed","downloads"].map((v,b)=>{var E,A;const w=["Files Uploaded","Processed","Downloaded PDF"],C=((E=l.funnel)==null?void 0:E[v])||0,I=Math.max(((A=l.funnel)==null?void 0:A.uploads)||1,1),T=C/I*100;return k.jsxs("div",{className:"space-y-2",children:[k.jsxs("div",{className:"flex justify-between text-sm",children:[k.jsx("span",{className:e?"text-slate-700":"text-slate-300",children:w[b]}),k.jsx("span",{className:`font-bold ${e?"text-slate-900":"text-white"}`,children:C})]}),k.jsx("div",{className:`h-3 w-full rounded-full overflow-hidden ${e?"bg-slate-100":"bg-slate-800"}`,children:k.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${b===0?"bg-blue-500":b===1?"bg-violet-500":"bg-emerald-500"}`,style:{width:`${Math.max(T,2)}%`}})})]},v)})})]})]}),l.topPages&&k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-white border-slate-200":"bg-slate-900 border-white/10"}`,children:[k.jsx("h3",{className:`text-lg font-bold mb-4 ${e?"text-slate-900":"text-white"}`,children:"Top Pages"}),k.jsxs("div",{className:"space-y-3",children:[l.topPages.map((v,b)=>k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("span",{className:`text-sm ${e?"text-slate-600":"text-slate-400"}`,children:v.path||"Home"}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"h-2 bg-violet-500/20 rounded-full w-24 overflow-hidden",children:k.jsx("div",{className:"h-full bg-violet-500",style:{width:`${v.count/Math.max(...l.topPages.map(w=>w.count))*100}%`}})}),k.jsx("span",{className:`text-xs font-bold ${e?"text-slate-900":"text-white"}`,children:v.count})]})]},b)),l.topPages.length===0&&k.jsx("p",{className:"text-slate-500 text-sm",children:"No data yet"})]})]}),k.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-white border-slate-200":"bg-slate-900 border-white/10"}`,children:[k.jsx("h3",{className:`text-lg font-bold mb-4 ${e?"text-slate-900":"text-white"}`,children:"Platform Stats"}),k.jsxs("div",{className:"flex items-center justify-center h-40 gap-8",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"text-3xl font-bold text-violet-500",children:((y=l.platforms)==null?void 0:y.Desktop)||0}),k.jsx("div",{className:"text-sm text-slate-500",children:"Desktop"})]}),k.jsx("div",{className:"w-px h-12 bg-slate-700/50"}),k.jsxs("div",{className:"text-center",children:[k.jsx("div",{className:"text-3xl font-bold text-emerald-500",children:((g=l.platforms)==null?void 0:g.Mobile)||0}),k.jsx("div",{className:"text-sm text-slate-500",children:"Mobile"})]})]})]})]}),k.jsxs("div",{className:`rounded-2xl border overflow-hidden ${e?"bg-white border-slate-200 shadow-sm":"bg-slate-900 border-white/10"}`,children:[k.jsx("div",{className:"p-6 border-b border-inherit",children:k.jsx("h3",{className:`text-lg font-bold ${e?"text-slate-900":"text-white"}`,children:"Recent Events"})}),k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-sm text-left",children:[k.jsx("thead",{className:`text-xs uppercase ${e?"bg-slate-50 text-slate-500":"bg-slate-900/50 text-slate-400"}`,children:k.jsxs("tr",{children:[k.jsx("th",{className:"px-6 py-3",children:"Event"}),k.jsx("th",{className:"px-6 py-3",children:"Path"}),k.jsx("th",{className:"px-6 py-3",children:"Time"})]})}),k.jsxs("tbody",{className:`divide-y ${e?"divide-slate-200":"divide-white/5"}`,children:[l.recentEvents.map(v=>k.jsxs("tr",{className:e?"hover:bg-slate-50":"hover:bg-white/5",children:[k.jsx("td",{className:`px-6 py-4 font-medium ${e?"text-slate-900":"text-white"}`,children:v.event}),k.jsx("td",{className:"px-6 py-4 text-slate-500",children:v.page_path||"/"}),k.jsx("td",{className:"px-6 py-4 text-slate-500",children:v.timestamp})]},v.id)),l.recentEvents.length===0&&k.jsx("tr",{children:k.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-slate-500",children:"No events recorded yet."})})]})]})})]})]})}):k.jsx("div",{className:`min-h-screen flex items-center justify-center p-4 ${e?"bg-white":"bg-background"}`,children:k.jsxs("div",{className:`max-w-md w-full p-8 rounded-2xl border text-center space-y-6 ${e?"bg-white border-slate-200 shadow-xl":"bg-slate-900 border-white/10"}`,children:[k.jsx("div",{className:"w-16 h-16 rounded-full bg-violet-500/10 flex items-center justify-center mx-auto",children:k.jsx(ox,{className:"w-8 h-8 text-violet-500"})}),k.jsx("h2",{className:`text-2xl font-bold ${e?"text-slate-900":"text-white"}`,children:"Admin Access"}),k.jsxs("form",{onSubmit:h,className:"space-y-4",children:[k.jsx("input",{type:"password",placeholder:"Enter Admin Password",value:s,onChange:v=>i(v.target.value),className:`w-full px-4 py-3 rounded-xl border text-center tracking-widest ${e?"bg-slate-50 border-slate-200 text-slate-900 focus:border-violet-500":"bg-slate-800 border-slate-700 text-white focus:border-violet-500"}`}),k.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-violet-600 hover:bg-violet-700 text-white font-bold transition-colors",children:"Unlock Dashboard"})]}),k.jsx("button",{onClick:n,className:"text-sm text-slate-500 hover:underline",children:"Back to Home"})]})})}function u3({icon:n,label:e,value:t,color:r,isLight:s}){return k.jsx("div",{className:`p-6 rounded-2xl border ${s?"bg-white border-slate-200 shadow-sm":"bg-slate-900 border-white/10"}`,children:k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:`p-3 rounded-xl ${s?"bg-slate-100":"bg-white/5"}`,children:k.jsx(n,{className:`w-6 h-6 ${r}`})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-sm text-slate-500",children:e}),k.jsx("h3",{className:`text-2xl font-bold ${s?"text-slate-900":"text-white"}`,children:t})]})]})})}function uQe(n){return Me.useEffect(()=>{localStorage.getItem("cookie_consent")==="accepted"&&nS("page_view",{page_path:`/${n}`,page_title:`NotesForge - ${n}`})},[n]),{trackCustomEvent:(t,r)=>{localStorage.getItem("cookie_consent")==="accepted"&&nS(t,r)}}}function hQe(){const[n,e]=Me.useState("home");Me.useEffect(()=>{window.location.hash==="#admin"&&e("admin")},[]),uQe(n);const t=r=>{e(r),window.scrollTo(0,0)};return k.jsx(Xde,{children:n==="admin"?k.jsx(cQe,{onBack:()=>t("home")}):k.jsx(Jde,{currentPage:n,onNavigate:t,children:k.jsx(lQe,{currentPage:n,onNavigate:t})})})}h3.createRoot(document.getElementById("root")).render(k.jsx(V_.StrictMode,{children:k.jsx(hQe,{})}));
